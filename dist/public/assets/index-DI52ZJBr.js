var qSe=Object.defineProperty;var T6=t=>{throw TypeError(t)};var KSe=(t,e,n)=>e in t?qSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ee=(t,e,n)=>KSe(t,typeof e!="symbol"?e+"":e,n),tI=(t,e,n)=>e.has(t)||T6("Cannot "+n);var U=(t,e,n)=>(tI(t,e,"read from private field"),n?n.call(t):e.get(t)),ft=(t,e,n)=>e.has(t)?T6("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ve=(t,e,n,r)=>(tI(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Lt=(t,e,n)=>(tI(t,e,"access private method"),n);var zS=(t,e,n,r)=>({set _(s){Ve(t,e,s,n)},get _(){return U(t,e,r)}});function lee(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function XSe(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var cee={exports:{}},XT={},uee={exports:{}},Ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _1=Symbol.for("react.element"),YSe=Symbol.for("react.portal"),QSe=Symbol.for("react.fragment"),ZSe=Symbol.for("react.strict_mode"),JSe=Symbol.for("react.profiler"),eCe=Symbol.for("react.provider"),tCe=Symbol.for("react.context"),nCe=Symbol.for("react.forward_ref"),rCe=Symbol.for("react.suspense"),sCe=Symbol.for("react.memo"),iCe=Symbol.for("react.lazy"),k6=Symbol.iterator;function oCe(t){return t===null||typeof t!="object"?null:(t=k6&&t[k6]||t["@@iterator"],typeof t=="function"?t:null)}var dee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fee=Object.assign,hee={};function Xy(t,e,n){this.props=t,this.context=e,this.refs=hee,this.updater=n||dee}Xy.prototype.isReactComponent={};Xy.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xy.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pee(){}pee.prototype=Xy.prototype;function TF(t,e,n){this.props=t,this.context=e,this.refs=hee,this.updater=n||dee}var kF=TF.prototype=new pee;kF.constructor=TF;fee(kF,Xy.prototype);kF.isPureReactComponent=!0;var E6=Array.isArray,mee=Object.prototype.hasOwnProperty,EF={current:null},gee={key:!0,ref:!0,__self:!0,__source:!0};function yee(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)mee.call(e,r)&&!gee.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:_1,type:t,key:i,ref:o,props:s,_owner:EF.current}}function aCe(t,e){return{$$typeof:_1,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $F(t){return typeof t=="object"&&t!==null&&t.$$typeof===_1}function lCe(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $6=/\/+/g;function nI(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lCe(""+t.key):e.toString(36)}function o2(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case _1:case YSe:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+nI(o,0):r,E6(s)?(n="",t!=null&&(n=t.replace($6,"$&/")+"/"),o2(s,e,n,"",function(c){return c})):s!=null&&($F(s)&&(s=aCe(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($6,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",E6(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+nI(i,a);o+=o2(i,e,n,l,s)}else if(l=oCe(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+nI(i,a++),o+=o2(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function VS(t,e,n){if(t==null)return t;var r=[],s=0;return o2(t,r,"","",function(i){return e.call(n,i,s++)}),r}function cCe(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Di={current:null},a2={transition:null},uCe={ReactCurrentDispatcher:Di,ReactCurrentBatchConfig:a2,ReactCurrentOwner:EF};function vee(){throw Error("act(...) is not supported in production builds of React.")}Ht.Children={map:VS,forEach:function(t,e,n){VS(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return VS(t,function(){e++}),e},toArray:function(t){return VS(t,function(e){return e})||[]},only:function(t){if(!$F(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ht.Component=Xy;Ht.Fragment=QSe;Ht.Profiler=JSe;Ht.PureComponent=TF;Ht.StrictMode=ZSe;Ht.Suspense=rCe;Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uCe;Ht.act=vee;Ht.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=fee({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=EF.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)mee.call(e,l)&&!gee.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:_1,type:t.type,key:s,ref:i,props:r,_owner:o}};Ht.createContext=function(t){return t={$$typeof:tCe,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:eCe,_context:t},t.Consumer=t};Ht.createElement=yee;Ht.createFactory=function(t){var e=yee.bind(null,t);return e.type=t,e};Ht.createRef=function(){return{current:null}};Ht.forwardRef=function(t){return{$$typeof:nCe,render:t}};Ht.isValidElement=$F;Ht.lazy=function(t){return{$$typeof:iCe,_payload:{_status:-1,_result:t},_init:cCe}};Ht.memo=function(t,e){return{$$typeof:sCe,type:t,compare:e===void 0?null:e}};Ht.startTransition=function(t){var e=a2.transition;a2.transition={};try{t()}finally{a2.transition=e}};Ht.unstable_act=vee;Ht.useCallback=function(t,e){return Di.current.useCallback(t,e)};Ht.useContext=function(t){return Di.current.useContext(t)};Ht.useDebugValue=function(){};Ht.useDeferredValue=function(t){return Di.current.useDeferredValue(t)};Ht.useEffect=function(t,e){return Di.current.useEffect(t,e)};Ht.useId=function(){return Di.current.useId()};Ht.useImperativeHandle=function(t,e,n){return Di.current.useImperativeHandle(t,e,n)};Ht.useInsertionEffect=function(t,e){return Di.current.useInsertionEffect(t,e)};Ht.useLayoutEffect=function(t,e){return Di.current.useLayoutEffect(t,e)};Ht.useMemo=function(t,e){return Di.current.useMemo(t,e)};Ht.useReducer=function(t,e,n){return Di.current.useReducer(t,e,n)};Ht.useRef=function(t){return Di.current.useRef(t)};Ht.useState=function(t){return Di.current.useState(t)};Ht.useSyncExternalStore=function(t,e,n){return Di.current.useSyncExternalStore(t,e,n)};Ht.useTransition=function(){return Di.current.useTransition()};Ht.version="18.3.1";uee.exports=Ht;var N=uee.exports;const F=nn(N),xee=lee({__proto__:null,default:F},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dCe=N,fCe=Symbol.for("react.element"),hCe=Symbol.for("react.fragment"),pCe=Object.prototype.hasOwnProperty,mCe=dCe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gCe={key:!0,ref:!0,__self:!0,__source:!0};function bee(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)pCe.call(e,r)&&!gCe.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:fCe,type:t,key:i,ref:o,props:s,_owner:mCe.current}}XT.Fragment=hCe;XT.jsx=bee;XT.jsxs=bee;cee.exports=XT;var f=cee.exports,wee={exports:{}},Lo={},See={exports:{}},Cee={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(E,j){var B=E.length;E.push(j);e:for(;0<B;){var W=B-1>>>1,G=E[W];if(0<s(G,j))E[W]=j,E[B]=G,B=W;else break e}}function n(E){return E.length===0?null:E[0]}function r(E){if(E.length===0)return null;var j=E[0],B=E.pop();if(B!==j){E[0]=B;e:for(var W=0,G=E.length,te=G>>>1;W<te;){var ne=2*(W+1)-1,ue=E[ne],ge=ne+1,de=E[ge];if(0>s(ue,B))ge<G&&0>s(de,ue)?(E[W]=de,E[ge]=B,W=ge):(E[W]=ue,E[ne]=B,W=ne);else if(ge<G&&0>s(de,B))E[W]=de,E[ge]=B,W=ge;else break e}}return j}function s(E,j){var B=E.sortIndex-j.sortIndex;return B!==0?B:E.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,p=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(E){for(var j=n(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=E)r(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(c)}}function S(E){if(g=!1,b(E),!m)if(n(l)!==null)m=!0,R(w);else{var j=n(c);j!==null&&M(S,j.startTime-E)}}function w(E,j){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var B=h;try{for(b(j),d=n(l);d!==null&&(!(d.expirationTime>j)||E&&!O());){var W=d.callback;if(typeof W=="function"){d.callback=null,h=d.priorityLevel;var G=W(d.expirationTime<=j);j=t.unstable_now(),typeof G=="function"?d.callback=G:d===n(l)&&r(l),b(j)}else r(l);d=n(l)}if(d!==null)var te=!0;else{var ne=n(c);ne!==null&&M(S,ne.startTime-j),te=!1}return te}finally{d=null,h=B,p=!1}}var C=!1,_=null,T=-1,k=5,$=-1;function O(){return!(t.unstable_now()-$<k)}function P(){if(_!==null){var E=t.unstable_now();$=E;var j=!0;try{j=_(!0,E)}finally{j?D():(C=!1,_=null)}}else C=!1}var D;if(typeof x=="function")D=function(){x(P)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,I=A.port2;A.port1.onmessage=P,D=function(){I.postMessage(null)}}else D=function(){y(P,0)};function R(E){_=E,C||(C=!0,D())}function M(E,j){T=y(function(){E(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(E){E.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(w))},t.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<E?Math.floor(1e3/E):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(E){switch(h){case 1:case 2:case 3:var j=3;break;default:j=h}var B=h;h=j;try{return E()}finally{h=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(E,j){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var B=h;h=E;try{return j()}finally{h=B}},t.unstable_scheduleCallback=function(E,j,B){var W=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?W+B:W):B=W,E){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=B+G,E={id:u++,callback:j,priorityLevel:E,startTime:B,expirationTime:G,sortIndex:-1},B>W?(E.sortIndex=B,e(c,E),n(l)===null&&E===n(c)&&(g?(v(T),T=-1):g=!0,M(S,B-W))):(E.sortIndex=G,e(l,E),m||p||(m=!0,R(w))),E},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(E){var j=h;return function(){var B=h;h=j;try{return E.apply(this,arguments)}finally{h=B}}}})(Cee);See.exports=Cee;var yCe=See.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vCe=N,Ro=yCe;function Te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nee=new Set,O0={};function Ap(t,e){jg(t,e),jg(t+"Capture",e)}function jg(t,e){for(O0[t]=e,t=0;t<e.length;t++)Nee.add(e[t])}var Su=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),RP=Object.prototype.hasOwnProperty,xCe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A6={},I6={};function bCe(t){return RP.call(I6,t)?!0:RP.call(A6,t)?!1:xCe.test(t)?I6[t]=!0:(A6[t]=!0,!1)}function wCe(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SCe(t,e,n,r){if(e===null||typeof e>"u"||wCe(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ji(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ps={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ps[t]=new ji(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ps[e]=new ji(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ps[t]=new ji(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ps[t]=new ji(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ps[t]=new ji(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ps[t]=new ji(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ps[t]=new ji(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ps[t]=new ji(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ps[t]=new ji(t,5,!1,t.toLowerCase(),null,!1,!1)});var AF=/[\-:]([a-z])/g;function IF(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(AF,IF);Ps[e]=new ji(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(AF,IF);Ps[e]=new ji(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(AF,IF);Ps[e]=new ji(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ps[t]=new ji(t,1,!1,t.toLowerCase(),null,!1,!1)});Ps.xlinkHref=new ji("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ps[t]=new ji(t,1,!1,t.toLowerCase(),null,!0,!0)});function OF(t,e,n,r){var s=Ps.hasOwnProperty(e)?Ps[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SCe(e,n,s,r)&&(n=null),r||s===null?bCe(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var zu=vCe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,WS=Symbol.for("react.element"),Em=Symbol.for("react.portal"),$m=Symbol.for("react.fragment"),PF=Symbol.for("react.strict_mode"),DP=Symbol.for("react.profiler"),_ee=Symbol.for("react.provider"),Tee=Symbol.for("react.context"),RF=Symbol.for("react.forward_ref"),jP=Symbol.for("react.suspense"),MP=Symbol.for("react.suspense_list"),DF=Symbol.for("react.memo"),ad=Symbol.for("react.lazy"),kee=Symbol.for("react.offscreen"),O6=Symbol.iterator;function rx(t){return t===null||typeof t!="object"?null:(t=O6&&t[O6]||t["@@iterator"],typeof t=="function"?t:null)}var mr=Object.assign,rI;function Mx(t){if(rI===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rI=e&&e[1]||""}return`
`+rI+t}var sI=!1;function iI(t,e){if(!t||sI)return"";sI=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{sI=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Mx(t):""}function CCe(t){switch(t.tag){case 5:return Mx(t.type);case 16:return Mx("Lazy");case 13:return Mx("Suspense");case 19:return Mx("SuspenseList");case 0:case 2:case 15:return t=iI(t.type,!1),t;case 11:return t=iI(t.type.render,!1),t;case 1:return t=iI(t.type,!0),t;default:return""}}function FP(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $m:return"Fragment";case Em:return"Portal";case DP:return"Profiler";case PF:return"StrictMode";case jP:return"Suspense";case MP:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Tee:return(t.displayName||"Context")+".Consumer";case _ee:return(t._context.displayName||"Context")+".Provider";case RF:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case DF:return e=t.displayName||null,e!==null?e:FP(t.type)||"Memo";case ad:e=t._payload,t=t._init;try{return FP(t(e))}catch{}}return null}function NCe(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return FP(e);case 8:return e===PF?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qd(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Eee(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _Ce(t){var e=Eee(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function US(t){t._valueTracker||(t._valueTracker=_Ce(t))}function $ee(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Eee(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function G2(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function LP(t,e){var n=e.checked;return mr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function P6(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qd(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Aee(t,e){e=e.checked,e!=null&&OF(t,"checked",e,!1)}function BP(t,e){Aee(t,e);var n=Qd(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zP(t,e.type,n):e.hasOwnProperty("defaultValue")&&zP(t,e.type,Qd(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function R6(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function zP(t,e,n){(e!=="number"||G2(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fx=Array.isArray;function Zm(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qd(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function VP(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Te(91));return mr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function D6(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Te(92));if(Fx(n)){if(1<n.length)throw Error(Te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qd(n)}}function Iee(t,e){var n=Qd(e.value),r=Qd(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function j6(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Oee(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function WP(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Oee(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var GS,Pee=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(GS=GS||document.createElement("div"),GS.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=GS.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function P0(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var s0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TCe=["Webkit","ms","Moz","O"];Object.keys(s0).forEach(function(t){TCe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),s0[e]=s0[t]})});function Ree(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||s0.hasOwnProperty(t)&&s0[t]?(""+e).trim():e+"px"}function Dee(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ree(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var kCe=mr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function UP(t,e){if(e){if(kCe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Te(62))}}function GP(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var HP=null;function jF(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qP=null,Jm=null,eg=null;function M6(t){if(t=E1(t)){if(typeof qP!="function")throw Error(Te(280));var e=t.stateNode;e&&(e=ek(e),qP(t.stateNode,t.type,e))}}function jee(t){Jm?eg?eg.push(t):eg=[t]:Jm=t}function Mee(){if(Jm){var t=Jm,e=eg;if(eg=Jm=null,M6(t),e)for(t=0;t<e.length;t++)M6(e[t])}}function Fee(t,e){return t(e)}function Lee(){}var oI=!1;function Bee(t,e,n){if(oI)return t(e,n);oI=!0;try{return Fee(t,e,n)}finally{oI=!1,(Jm!==null||eg!==null)&&(Lee(),Mee())}}function R0(t,e){var n=t.stateNode;if(n===null)return null;var r=ek(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Te(231,e,typeof n));return n}var KP=!1;if(Su)try{var sx={};Object.defineProperty(sx,"passive",{get:function(){KP=!0}}),window.addEventListener("test",sx,sx),window.removeEventListener("test",sx,sx)}catch{KP=!1}function ECe(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var i0=!1,H2=null,q2=!1,XP=null,$Ce={onError:function(t){i0=!0,H2=t}};function ACe(t,e,n,r,s,i,o,a,l){i0=!1,H2=null,ECe.apply($Ce,arguments)}function ICe(t,e,n,r,s,i,o,a,l){if(ACe.apply(this,arguments),i0){if(i0){var c=H2;i0=!1,H2=null}else throw Error(Te(198));q2||(q2=!0,XP=c)}}function Ip(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zee(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function F6(t){if(Ip(t)!==t)throw Error(Te(188))}function OCe(t){var e=t.alternate;if(!e){if(e=Ip(t),e===null)throw Error(Te(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return F6(s),t;if(i===r)return F6(s),e;i=i.sibling}throw Error(Te(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Te(189))}}if(n.alternate!==r)throw Error(Te(190))}if(n.tag!==3)throw Error(Te(188));return n.stateNode.current===n?t:e}function Vee(t){return t=OCe(t),t!==null?Wee(t):null}function Wee(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Wee(t);if(e!==null)return e;t=t.sibling}return null}var Uee=Ro.unstable_scheduleCallback,L6=Ro.unstable_cancelCallback,PCe=Ro.unstable_shouldYield,RCe=Ro.unstable_requestPaint,Rr=Ro.unstable_now,DCe=Ro.unstable_getCurrentPriorityLevel,MF=Ro.unstable_ImmediatePriority,Gee=Ro.unstable_UserBlockingPriority,K2=Ro.unstable_NormalPriority,jCe=Ro.unstable_LowPriority,Hee=Ro.unstable_IdlePriority,YT=null,ac=null;function MCe(t){if(ac&&typeof ac.onCommitFiberRoot=="function")try{ac.onCommitFiberRoot(YT,t,void 0,(t.current.flags&128)===128)}catch{}}var ll=Math.clz32?Math.clz32:BCe,FCe=Math.log,LCe=Math.LN2;function BCe(t){return t>>>=0,t===0?32:31-(FCe(t)/LCe|0)|0}var HS=64,qS=4194304;function Lx(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function X2(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Lx(a):(i&=o,i!==0&&(r=Lx(i)))}else o=n&~s,o!==0?r=Lx(o):i!==0&&(r=Lx(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ll(e),s=1<<n,r|=t[n],e&=~s;return r}function zCe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VCe(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ll(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=zCe(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function YP(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qee(){var t=HS;return HS<<=1,!(HS&4194240)&&(HS=64),t}function aI(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function T1(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ll(e),t[e]=n}function WCe(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ll(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function FF(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ll(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var wn=0;function Kee(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Xee,LF,Yee,Qee,Zee,QP=!1,KS=[],Rd=null,Dd=null,jd=null,D0=new Map,j0=new Map,dd=[],UCe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function B6(t,e){switch(t){case"focusin":case"focusout":Rd=null;break;case"dragenter":case"dragleave":Dd=null;break;case"mouseover":case"mouseout":jd=null;break;case"pointerover":case"pointerout":D0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":j0.delete(e.pointerId)}}function ix(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=E1(e),e!==null&&LF(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function GCe(t,e,n,r,s){switch(e){case"focusin":return Rd=ix(Rd,t,e,n,r,s),!0;case"dragenter":return Dd=ix(Dd,t,e,n,r,s),!0;case"mouseover":return jd=ix(jd,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return D0.set(i,ix(D0.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,j0.set(i,ix(j0.get(i)||null,t,e,n,r,s)),!0}return!1}function Jee(t){var e=vh(t.target);if(e!==null){var n=Ip(e);if(n!==null){if(e=n.tag,e===13){if(e=zee(n),e!==null){t.blockedOn=e,Zee(t.priority,function(){Yee(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function l2(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ZP(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);HP=r,n.target.dispatchEvent(r),HP=null}else return e=E1(n),e!==null&&LF(e),t.blockedOn=n,!1;e.shift()}return!0}function z6(t,e,n){l2(t)&&n.delete(e)}function HCe(){QP=!1,Rd!==null&&l2(Rd)&&(Rd=null),Dd!==null&&l2(Dd)&&(Dd=null),jd!==null&&l2(jd)&&(jd=null),D0.forEach(z6),j0.forEach(z6)}function ox(t,e){t.blockedOn===e&&(t.blockedOn=null,QP||(QP=!0,Ro.unstable_scheduleCallback(Ro.unstable_NormalPriority,HCe)))}function M0(t){function e(s){return ox(s,t)}if(0<KS.length){ox(KS[0],t);for(var n=1;n<KS.length;n++){var r=KS[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rd!==null&&ox(Rd,t),Dd!==null&&ox(Dd,t),jd!==null&&ox(jd,t),D0.forEach(e),j0.forEach(e),n=0;n<dd.length;n++)r=dd[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<dd.length&&(n=dd[0],n.blockedOn===null);)Jee(n),n.blockedOn===null&&dd.shift()}var tg=zu.ReactCurrentBatchConfig,Y2=!0;function qCe(t,e,n,r){var s=wn,i=tg.transition;tg.transition=null;try{wn=1,BF(t,e,n,r)}finally{wn=s,tg.transition=i}}function KCe(t,e,n,r){var s=wn,i=tg.transition;tg.transition=null;try{wn=4,BF(t,e,n,r)}finally{wn=s,tg.transition=i}}function BF(t,e,n,r){if(Y2){var s=ZP(t,e,n,r);if(s===null)yI(t,e,r,Q2,n),B6(t,r);else if(GCe(s,t,e,n,r))r.stopPropagation();else if(B6(t,r),e&4&&-1<UCe.indexOf(t)){for(;s!==null;){var i=E1(s);if(i!==null&&Xee(i),i=ZP(t,e,n,r),i===null&&yI(t,e,r,Q2,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else yI(t,e,r,null,n)}}var Q2=null;function ZP(t,e,n,r){if(Q2=null,t=jF(r),t=vh(t),t!==null)if(e=Ip(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zee(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Q2=t,null}function ete(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DCe()){case MF:return 1;case Gee:return 4;case K2:case jCe:return 16;case Hee:return 536870912;default:return 16}default:return 16}}var Nd=null,zF=null,c2=null;function tte(){if(c2)return c2;var t,e=zF,n=e.length,r,s="value"in Nd?Nd.value:Nd.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return c2=s.slice(t,1<r?1-r:void 0)}function u2(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function XS(){return!0}function V6(){return!1}function Bo(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?XS:V6,this.isPropagationStopped=V6,this}return mr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=XS)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=XS)},persist:function(){},isPersistent:XS}),e}var Yy={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},VF=Bo(Yy),k1=mr({},Yy,{view:0,detail:0}),XCe=Bo(k1),lI,cI,ax,QT=mr({},k1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:WF,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ax&&(ax&&t.type==="mousemove"?(lI=t.screenX-ax.screenX,cI=t.screenY-ax.screenY):cI=lI=0,ax=t),lI)},movementY:function(t){return"movementY"in t?t.movementY:cI}}),W6=Bo(QT),YCe=mr({},QT,{dataTransfer:0}),QCe=Bo(YCe),ZCe=mr({},k1,{relatedTarget:0}),uI=Bo(ZCe),JCe=mr({},Yy,{animationName:0,elapsedTime:0,pseudoElement:0}),e2e=Bo(JCe),t2e=mr({},Yy,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),n2e=Bo(t2e),r2e=mr({},Yy,{data:0}),U6=Bo(r2e),s2e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i2e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o2e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a2e(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=o2e[t])?!!e[t]:!1}function WF(){return a2e}var l2e=mr({},k1,{key:function(t){if(t.key){var e=s2e[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=u2(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?i2e[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:WF,charCode:function(t){return t.type==="keypress"?u2(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?u2(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),c2e=Bo(l2e),u2e=mr({},QT,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),G6=Bo(u2e),d2e=mr({},k1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:WF}),f2e=Bo(d2e),h2e=mr({},Yy,{propertyName:0,elapsedTime:0,pseudoElement:0}),p2e=Bo(h2e),m2e=mr({},QT,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),g2e=Bo(m2e),y2e=[9,13,27,32],UF=Su&&"CompositionEvent"in window,o0=null;Su&&"documentMode"in document&&(o0=document.documentMode);var v2e=Su&&"TextEvent"in window&&!o0,nte=Su&&(!UF||o0&&8<o0&&11>=o0),H6=" ",q6=!1;function rte(t,e){switch(t){case"keyup":return y2e.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ste(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Am=!1;function x2e(t,e){switch(t){case"compositionend":return ste(e);case"keypress":return e.which!==32?null:(q6=!0,H6);case"textInput":return t=e.data,t===H6&&q6?null:t;default:return null}}function b2e(t,e){if(Am)return t==="compositionend"||!UF&&rte(t,e)?(t=tte(),c2=zF=Nd=null,Am=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nte&&e.locale!=="ko"?null:e.data;default:return null}}var w2e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K6(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!w2e[t.type]:e==="textarea"}function ite(t,e,n,r){jee(r),e=Z2(e,"onChange"),0<e.length&&(n=new VF("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var a0=null,F0=null;function S2e(t){gte(t,0)}function ZT(t){var e=Pm(t);if($ee(e))return t}function C2e(t,e){if(t==="change")return e}var ote=!1;if(Su){var dI;if(Su){var fI="oninput"in document;if(!fI){var X6=document.createElement("div");X6.setAttribute("oninput","return;"),fI=typeof X6.oninput=="function"}dI=fI}else dI=!1;ote=dI&&(!document.documentMode||9<document.documentMode)}function Y6(){a0&&(a0.detachEvent("onpropertychange",ate),F0=a0=null)}function ate(t){if(t.propertyName==="value"&&ZT(F0)){var e=[];ite(e,F0,t,jF(t)),Bee(S2e,e)}}function N2e(t,e,n){t==="focusin"?(Y6(),a0=e,F0=n,a0.attachEvent("onpropertychange",ate)):t==="focusout"&&Y6()}function _2e(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ZT(F0)}function T2e(t,e){if(t==="click")return ZT(e)}function k2e(t,e){if(t==="input"||t==="change")return ZT(e)}function E2e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vl=typeof Object.is=="function"?Object.is:E2e;function L0(t,e){if(vl(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!RP.call(e,s)||!vl(t[s],e[s]))return!1}return!0}function Q6(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Z6(t,e){var n=Q6(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Q6(n)}}function lte(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?lte(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cte(){for(var t=window,e=G2();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=G2(t.document)}return e}function GF(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $2e(t){var e=cte(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&lte(n.ownerDocument.documentElement,n)){if(r!==null&&GF(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Z6(n,i);var o=Z6(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var A2e=Su&&"documentMode"in document&&11>=document.documentMode,Im=null,JP=null,l0=null,eR=!1;function J6(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;eR||Im==null||Im!==G2(r)||(r=Im,"selectionStart"in r&&GF(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),l0&&L0(l0,r)||(l0=r,r=Z2(JP,"onSelect"),0<r.length&&(e=new VF("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Im)))}function YS(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Om={animationend:YS("Animation","AnimationEnd"),animationiteration:YS("Animation","AnimationIteration"),animationstart:YS("Animation","AnimationStart"),transitionend:YS("Transition","TransitionEnd")},hI={},ute={};Su&&(ute=document.createElement("div").style,"AnimationEvent"in window||(delete Om.animationend.animation,delete Om.animationiteration.animation,delete Om.animationstart.animation),"TransitionEvent"in window||delete Om.transitionend.transition);function JT(t){if(hI[t])return hI[t];if(!Om[t])return t;var e=Om[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ute)return hI[t]=e[n];return t}var dte=JT("animationend"),fte=JT("animationiteration"),hte=JT("animationstart"),pte=JT("transitionend"),mte=new Map,eW="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xf(t,e){mte.set(t,e),Ap(e,[t])}for(var pI=0;pI<eW.length;pI++){var mI=eW[pI],I2e=mI.toLowerCase(),O2e=mI[0].toUpperCase()+mI.slice(1);xf(I2e,"on"+O2e)}xf(dte,"onAnimationEnd");xf(fte,"onAnimationIteration");xf(hte,"onAnimationStart");xf("dblclick","onDoubleClick");xf("focusin","onFocus");xf("focusout","onBlur");xf(pte,"onTransitionEnd");jg("onMouseEnter",["mouseout","mouseover"]);jg("onMouseLeave",["mouseout","mouseover"]);jg("onPointerEnter",["pointerout","pointerover"]);jg("onPointerLeave",["pointerout","pointerover"]);Ap("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ap("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ap("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ap("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ap("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ap("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bx="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P2e=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bx));function tW(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ICe(r,e,void 0,t),t.currentTarget=null}function gte(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;tW(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;tW(s,a,c),i=l}}}if(q2)throw t=XP,q2=!1,XP=null,t}function Gn(t,e){var n=e[iR];n===void 0&&(n=e[iR]=new Set);var r=t+"__bubble";n.has(r)||(yte(e,t,2,!1),n.add(r))}function gI(t,e,n){var r=0;e&&(r|=4),yte(n,t,r,e)}var QS="_reactListening"+Math.random().toString(36).slice(2);function B0(t){if(!t[QS]){t[QS]=!0,Nee.forEach(function(n){n!=="selectionchange"&&(P2e.has(n)||gI(n,!1,t),gI(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[QS]||(e[QS]=!0,gI("selectionchange",!1,e))}}function yte(t,e,n,r){switch(ete(e)){case 1:var s=qCe;break;case 4:s=KCe;break;default:s=BF}n=s.bind(null,e,n,t),s=void 0,!KP||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function yI(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=vh(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Bee(function(){var c=i,u=jF(n),d=[];e:{var h=mte.get(t);if(h!==void 0){var p=VF,m=t;switch(t){case"keypress":if(u2(n)===0)break e;case"keydown":case"keyup":p=c2e;break;case"focusin":m="focus",p=uI;break;case"focusout":m="blur",p=uI;break;case"beforeblur":case"afterblur":p=uI;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=W6;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=QCe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=f2e;break;case dte:case fte:case hte:p=e2e;break;case pte:p=p2e;break;case"scroll":p=XCe;break;case"wheel":p=g2e;break;case"copy":case"cut":case"paste":p=n2e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=G6}var g=(e&4)!==0,y=!g&&t==="scroll",v=g?h!==null?h+"Capture":null:h;g=[];for(var x=c,b;x!==null;){b=x;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,v!==null&&(S=R0(x,v),S!=null&&g.push(z0(x,S,b)))),y)break;x=x.return}0<g.length&&(h=new p(h,m,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==HP&&(m=n.relatedTarget||n.fromElement)&&(vh(m)||m[Cu]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?vh(m):null,m!==null&&(y=Ip(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=W6,S="onMouseLeave",v="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(g=G6,S="onPointerLeave",v="onPointerEnter",x="pointer"),y=p==null?h:Pm(p),b=m==null?h:Pm(m),h=new g(S,x+"leave",p,n,u),h.target=y,h.relatedTarget=b,S=null,vh(u)===c&&(g=new g(v,x+"enter",m,n,u),g.target=b,g.relatedTarget=y,S=g),y=S,p&&m)t:{for(g=p,v=m,x=0,b=g;b;b=am(b))x++;for(b=0,S=v;S;S=am(S))b++;for(;0<x-b;)g=am(g),x--;for(;0<b-x;)v=am(v),b--;for(;x--;){if(g===v||v!==null&&g===v.alternate)break t;g=am(g),v=am(v)}g=null}else g=null;p!==null&&nW(d,h,p,g,!1),m!==null&&y!==null&&nW(d,y,m,g,!0)}}e:{if(h=c?Pm(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var w=C2e;else if(K6(h))if(ote)w=k2e;else{w=_2e;var C=N2e}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=T2e);if(w&&(w=w(t,c))){ite(d,w,n,u);break e}C&&C(t,h,c),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&zP(h,"number",h.value)}switch(C=c?Pm(c):window,t){case"focusin":(K6(C)||C.contentEditable==="true")&&(Im=C,JP=c,l0=null);break;case"focusout":l0=JP=Im=null;break;case"mousedown":eR=!0;break;case"contextmenu":case"mouseup":case"dragend":eR=!1,J6(d,n,u);break;case"selectionchange":if(A2e)break;case"keydown":case"keyup":J6(d,n,u)}var _;if(UF)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Am?rte(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(nte&&n.locale!=="ko"&&(Am||T!=="onCompositionStart"?T==="onCompositionEnd"&&Am&&(_=tte()):(Nd=u,zF="value"in Nd?Nd.value:Nd.textContent,Am=!0)),C=Z2(c,T),0<C.length&&(T=new U6(T,t,null,n,u),d.push({event:T,listeners:C}),_?T.data=_:(_=ste(n),_!==null&&(T.data=_)))),(_=v2e?x2e(t,n):b2e(t,n))&&(c=Z2(c,"onBeforeInput"),0<c.length&&(u=new U6("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=_))}gte(d,e)})}function z0(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Z2(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=R0(t,n),i!=null&&r.unshift(z0(t,i,s)),i=R0(t,e),i!=null&&r.push(z0(t,i,s))),t=t.return}return r}function am(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function nW(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=R0(n,i),l!=null&&o.unshift(z0(n,l,a))):s||(l=R0(n,i),l!=null&&o.push(z0(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var R2e=/\r\n?/g,D2e=/\u0000|\uFFFD/g;function rW(t){return(typeof t=="string"?t:""+t).replace(R2e,`
`).replace(D2e,"")}function ZS(t,e,n){if(e=rW(e),rW(t)!==e&&n)throw Error(Te(425))}function J2(){}var tR=null,nR=null;function rR(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sR=typeof setTimeout=="function"?setTimeout:void 0,j2e=typeof clearTimeout=="function"?clearTimeout:void 0,sW=typeof Promise=="function"?Promise:void 0,M2e=typeof queueMicrotask=="function"?queueMicrotask:typeof sW<"u"?function(t){return sW.resolve(null).then(t).catch(F2e)}:sR;function F2e(t){setTimeout(function(){throw t})}function vI(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),M0(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);M0(e)}function Md(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function iW(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qy=Math.random().toString(36).slice(2),Yl="__reactFiber$"+Qy,V0="__reactProps$"+Qy,Cu="__reactContainer$"+Qy,iR="__reactEvents$"+Qy,L2e="__reactListeners$"+Qy,B2e="__reactHandles$"+Qy;function vh(t){var e=t[Yl];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Cu]||n[Yl]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=iW(t);t!==null;){if(n=t[Yl])return n;t=iW(t)}return e}t=n,n=t.parentNode}return null}function E1(t){return t=t[Yl]||t[Cu],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Pm(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Te(33))}function ek(t){return t[V0]||null}var oR=[],Rm=-1;function bf(t){return{current:t}}function Xn(t){0>Rm||(t.current=oR[Rm],oR[Rm]=null,Rm--)}function Fn(t,e){Rm++,oR[Rm]=t.current,t.current=e}var Zd={},li=bf(Zd),Zi=bf(!1),Qh=Zd;function Mg(t,e){var n=t.type.contextTypes;if(!n)return Zd;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ji(t){return t=t.childContextTypes,t!=null}function eN(){Xn(Zi),Xn(li)}function oW(t,e,n){if(li.current!==Zd)throw Error(Te(168));Fn(li,e),Fn(Zi,n)}function vte(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Te(108,NCe(t)||"Unknown",s));return mr({},n,r)}function tN(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zd,Qh=li.current,Fn(li,t),Fn(Zi,Zi.current),!0}function aW(t,e,n){var r=t.stateNode;if(!r)throw Error(Te(169));n?(t=vte(t,e,Qh),r.__reactInternalMemoizedMergedChildContext=t,Xn(Zi),Xn(li),Fn(li,t)):Xn(Zi),Fn(Zi,n)}var Zc=null,tk=!1,xI=!1;function xte(t){Zc===null?Zc=[t]:Zc.push(t)}function z2e(t){tk=!0,xte(t)}function wf(){if(!xI&&Zc!==null){xI=!0;var t=0,e=wn;try{var n=Zc;for(wn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Zc=null,tk=!1}catch(s){throw Zc!==null&&(Zc=Zc.slice(t+1)),Uee(MF,wf),s}finally{wn=e,xI=!1}}return null}var Dm=[],jm=0,nN=null,rN=0,ia=[],oa=0,Zh=null,iu=1,ou="";function rh(t,e){Dm[jm++]=rN,Dm[jm++]=nN,nN=t,rN=e}function bte(t,e,n){ia[oa++]=iu,ia[oa++]=ou,ia[oa++]=Zh,Zh=t;var r=iu;t=ou;var s=32-ll(r)-1;r&=~(1<<s),n+=1;var i=32-ll(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,iu=1<<32-ll(e)+s|n<<s|r,ou=i+t}else iu=1<<i|n<<s|r,ou=t}function HF(t){t.return!==null&&(rh(t,1),bte(t,1,0))}function qF(t){for(;t===nN;)nN=Dm[--jm],Dm[jm]=null,rN=Dm[--jm],Dm[jm]=null;for(;t===Zh;)Zh=ia[--oa],ia[oa]=null,ou=ia[--oa],ia[oa]=null,iu=ia[--oa],ia[oa]=null}var To=null,No=null,nr=!1,Ja=null;function wte(t,e){var n=fa(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function lW(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,To=t,No=Md(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,To=t,No=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zh!==null?{id:iu,overflow:ou}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=fa(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,To=t,No=null,!0):!1;default:return!1}}function aR(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lR(t){if(nr){var e=No;if(e){var n=e;if(!lW(t,e)){if(aR(t))throw Error(Te(418));e=Md(n.nextSibling);var r=To;e&&lW(t,e)?wte(r,n):(t.flags=t.flags&-4097|2,nr=!1,To=t)}}else{if(aR(t))throw Error(Te(418));t.flags=t.flags&-4097|2,nr=!1,To=t}}}function cW(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;To=t}function JS(t){if(t!==To)return!1;if(!nr)return cW(t),nr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rR(t.type,t.memoizedProps)),e&&(e=No)){if(aR(t))throw Ste(),Error(Te(418));for(;e;)wte(t,e),e=Md(e.nextSibling)}if(cW(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){No=Md(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}No=null}}else No=To?Md(t.stateNode.nextSibling):null;return!0}function Ste(){for(var t=No;t;)t=Md(t.nextSibling)}function Fg(){No=To=null,nr=!1}function KF(t){Ja===null?Ja=[t]:Ja.push(t)}var V2e=zu.ReactCurrentBatchConfig;function lx(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Te(309));var r=n.stateNode}if(!r)throw Error(Te(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Te(284));if(!n._owner)throw Error(Te(290,t))}return t}function eC(t,e){throw t=Object.prototype.toString.call(e),Error(Te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function uW(t){var e=t._init;return e(t._payload)}function Cte(t){function e(v,x){if(t){var b=v.deletions;b===null?(v.deletions=[x],v.flags|=16):b.push(x)}}function n(v,x){if(!t)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=zd(v,x),v.index=0,v.sibling=null,v}function i(v,x,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<x?(v.flags|=2,x):b):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,x,b,S){return x===null||x.tag!==6?(x=TI(b,v.mode,S),x.return=v,x):(x=s(x,b),x.return=v,x)}function l(v,x,b,S){var w=b.type;return w===$m?u(v,x,b.props.children,S,b.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ad&&uW(w)===x.type)?(S=s(x,b.props),S.ref=lx(v,x,b),S.return=v,S):(S=y2(b.type,b.key,b.props,null,v.mode,S),S.ref=lx(v,x,b),S.return=v,S)}function c(v,x,b,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=kI(b,v.mode,S),x.return=v,x):(x=s(x,b.children||[]),x.return=v,x)}function u(v,x,b,S,w){return x===null||x.tag!==7?(x=zh(b,v.mode,S,w),x.return=v,x):(x=s(x,b),x.return=v,x)}function d(v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=TI(""+x,v.mode,b),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case WS:return b=y2(x.type,x.key,x.props,null,v.mode,b),b.ref=lx(v,null,x),b.return=v,b;case Em:return x=kI(x,v.mode,b),x.return=v,x;case ad:var S=x._init;return d(v,S(x._payload),b)}if(Fx(x)||rx(x))return x=zh(x,v.mode,b,null),x.return=v,x;eC(v,x)}return null}function h(v,x,b,S){var w=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:a(v,x,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case WS:return b.key===w?l(v,x,b,S):null;case Em:return b.key===w?c(v,x,b,S):null;case ad:return w=b._init,h(v,x,w(b._payload),S)}if(Fx(b)||rx(b))return w!==null?null:u(v,x,b,S,null);eC(v,b)}return null}function p(v,x,b,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(b)||null,a(x,v,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case WS:return v=v.get(S.key===null?b:S.key)||null,l(x,v,S,w);case Em:return v=v.get(S.key===null?b:S.key)||null,c(x,v,S,w);case ad:var C=S._init;return p(v,x,b,C(S._payload),w)}if(Fx(S)||rx(S))return v=v.get(b)||null,u(x,v,S,w,null);eC(x,S)}return null}function m(v,x,b,S){for(var w=null,C=null,_=x,T=x=0,k=null;_!==null&&T<b.length;T++){_.index>T?(k=_,_=null):k=_.sibling;var $=h(v,_,b[T],S);if($===null){_===null&&(_=k);break}t&&_&&$.alternate===null&&e(v,_),x=i($,x,T),C===null?w=$:C.sibling=$,C=$,_=k}if(T===b.length)return n(v,_),nr&&rh(v,T),w;if(_===null){for(;T<b.length;T++)_=d(v,b[T],S),_!==null&&(x=i(_,x,T),C===null?w=_:C.sibling=_,C=_);return nr&&rh(v,T),w}for(_=r(v,_);T<b.length;T++)k=p(_,v,T,b[T],S),k!==null&&(t&&k.alternate!==null&&_.delete(k.key===null?T:k.key),x=i(k,x,T),C===null?w=k:C.sibling=k,C=k);return t&&_.forEach(function(O){return e(v,O)}),nr&&rh(v,T),w}function g(v,x,b,S){var w=rx(b);if(typeof w!="function")throw Error(Te(150));if(b=w.call(b),b==null)throw Error(Te(151));for(var C=w=null,_=x,T=x=0,k=null,$=b.next();_!==null&&!$.done;T++,$=b.next()){_.index>T?(k=_,_=null):k=_.sibling;var O=h(v,_,$.value,S);if(O===null){_===null&&(_=k);break}t&&_&&O.alternate===null&&e(v,_),x=i(O,x,T),C===null?w=O:C.sibling=O,C=O,_=k}if($.done)return n(v,_),nr&&rh(v,T),w;if(_===null){for(;!$.done;T++,$=b.next())$=d(v,$.value,S),$!==null&&(x=i($,x,T),C===null?w=$:C.sibling=$,C=$);return nr&&rh(v,T),w}for(_=r(v,_);!$.done;T++,$=b.next())$=p(_,v,T,$.value,S),$!==null&&(t&&$.alternate!==null&&_.delete($.key===null?T:$.key),x=i($,x,T),C===null?w=$:C.sibling=$,C=$);return t&&_.forEach(function(P){return e(v,P)}),nr&&rh(v,T),w}function y(v,x,b,S){if(typeof b=="object"&&b!==null&&b.type===$m&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case WS:e:{for(var w=b.key,C=x;C!==null;){if(C.key===w){if(w=b.type,w===$m){if(C.tag===7){n(v,C.sibling),x=s(C,b.props.children),x.return=v,v=x;break e}}else if(C.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ad&&uW(w)===C.type){n(v,C.sibling),x=s(C,b.props),x.ref=lx(v,C,b),x.return=v,v=x;break e}n(v,C);break}else e(v,C);C=C.sibling}b.type===$m?(x=zh(b.props.children,v.mode,S,b.key),x.return=v,v=x):(S=y2(b.type,b.key,b.props,null,v.mode,S),S.ref=lx(v,x,b),S.return=v,v=S)}return o(v);case Em:e:{for(C=b.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(v,x.sibling),x=s(x,b.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else e(v,x);x=x.sibling}x=kI(b,v.mode,S),x.return=v,v=x}return o(v);case ad:return C=b._init,y(v,x,C(b._payload),S)}if(Fx(b))return m(v,x,b,S);if(rx(b))return g(v,x,b,S);eC(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(v,x.sibling),x=s(x,b),x.return=v,v=x):(n(v,x),x=TI(b,v.mode,S),x.return=v,v=x),o(v)):n(v,x)}return y}var Lg=Cte(!0),Nte=Cte(!1),sN=bf(null),iN=null,Mm=null,XF=null;function YF(){XF=Mm=iN=null}function QF(t){var e=sN.current;Xn(sN),t._currentValue=e}function cR(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ng(t,e){iN=t,XF=Mm=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qi=!0),t.firstContext=null)}function _a(t){var e=t._currentValue;if(XF!==t)if(t={context:t,memoizedValue:e,next:null},Mm===null){if(iN===null)throw Error(Te(308));Mm=t,iN.dependencies={lanes:0,firstContext:t}}else Mm=Mm.next=t;return e}var xh=null;function ZF(t){xh===null?xh=[t]:xh.push(t)}function _te(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ZF(e)):(n.next=s.next,s.next=n),e.interleaved=n,Nu(t,r)}function Nu(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ld=!1;function JF(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tte(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function du(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fd(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,sn&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Nu(t,n)}return s=r.interleaved,s===null?(e.next=e,ZF(r)):(e.next=s.next,s.next=e),r.interleaved=e,Nu(t,n)}function d2(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,FF(t,n)}}function dW(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function oN(t,e,n,r){var s=t.updateQueue;ld=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,u=c=l=null,a=i;do{var h=a.lane,p=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(h=e,p=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,h=typeof m=="function"?m.call(p,d,h):m,h==null)break e;d=mr({},d,h);break e;case 2:ld=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ep|=o,t.lanes=o,t.memoizedState=d}}function fW(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Te(191,s));s.call(r)}}}var $1={},lc=bf($1),W0=bf($1),U0=bf($1);function bh(t){if(t===$1)throw Error(Te(174));return t}function eL(t,e){switch(Fn(U0,e),Fn(W0,t),Fn(lc,$1),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:WP(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=WP(e,t)}Xn(lc),Fn(lc,e)}function Bg(){Xn(lc),Xn(W0),Xn(U0)}function kte(t){bh(U0.current);var e=bh(lc.current),n=WP(e,t.type);e!==n&&(Fn(W0,t),Fn(lc,n))}function tL(t){W0.current===t&&(Xn(lc),Xn(W0))}var dr=bf(0);function aN(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bI=[];function nL(){for(var t=0;t<bI.length;t++)bI[t]._workInProgressVersionPrimary=null;bI.length=0}var f2=zu.ReactCurrentDispatcher,wI=zu.ReactCurrentBatchConfig,Jh=0,hr=null,Jr=null,hs=null,lN=!1,c0=!1,G0=0,W2e=0;function zs(){throw Error(Te(321))}function rL(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vl(t[n],e[n]))return!1;return!0}function sL(t,e,n,r,s,i){if(Jh=i,hr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,f2.current=t===null||t.memoizedState===null?q2e:K2e,t=n(r,s),c0){i=0;do{if(c0=!1,G0=0,25<=i)throw Error(Te(301));i+=1,hs=Jr=null,e.updateQueue=null,f2.current=X2e,t=n(r,s)}while(c0)}if(f2.current=cN,e=Jr!==null&&Jr.next!==null,Jh=0,hs=Jr=hr=null,lN=!1,e)throw Error(Te(300));return t}function iL(){var t=G0!==0;return G0=0,t}function Bl(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hs===null?hr.memoizedState=hs=t:hs=hs.next=t,hs}function Ta(){if(Jr===null){var t=hr.alternate;t=t!==null?t.memoizedState:null}else t=Jr.next;var e=hs===null?hr.memoizedState:hs.next;if(e!==null)hs=e,Jr=t;else{if(t===null)throw Error(Te(310));Jr=t,t={memoizedState:Jr.memoizedState,baseState:Jr.baseState,baseQueue:Jr.baseQueue,queue:Jr.queue,next:null},hs===null?hr.memoizedState=hs=t:hs=hs.next=t}return hs}function H0(t,e){return typeof e=="function"?e(t):e}function SI(t){var e=Ta(),n=e.queue;if(n===null)throw Error(Te(311));n.lastRenderedReducer=t;var r=Jr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((Jh&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,hr.lanes|=u,ep|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,vl(r,e.memoizedState)||(qi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,hr.lanes|=i,ep|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function CI(t){var e=Ta(),n=e.queue;if(n===null)throw Error(Te(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);vl(i,e.memoizedState)||(qi=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ete(){}function $te(t,e){var n=hr,r=Ta(),s=e(),i=!vl(r.memoizedState,s);if(i&&(r.memoizedState=s,qi=!0),r=r.queue,oL(Ote.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||hs!==null&&hs.memoizedState.tag&1){if(n.flags|=2048,q0(9,Ite.bind(null,n,r,s,e),void 0,null),ys===null)throw Error(Te(349));Jh&30||Ate(n,e,s)}return s}function Ate(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=hr.updateQueue,e===null?(e={lastEffect:null,stores:null},hr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ite(t,e,n,r){e.value=n,e.getSnapshot=r,Pte(e)&&Rte(t)}function Ote(t,e,n){return n(function(){Pte(e)&&Rte(t)})}function Pte(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vl(t,n)}catch{return!0}}function Rte(t){var e=Nu(t,1);e!==null&&cl(e,t,1,-1)}function hW(t){var e=Bl();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:H0,lastRenderedState:t},e.queue=t,t=t.dispatch=H2e.bind(null,hr,t),[e.memoizedState,t]}function q0(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=hr.updateQueue,e===null?(e={lastEffect:null,stores:null},hr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Dte(){return Ta().memoizedState}function h2(t,e,n,r){var s=Bl();hr.flags|=t,s.memoizedState=q0(1|e,n,void 0,r===void 0?null:r)}function nk(t,e,n,r){var s=Ta();r=r===void 0?null:r;var i=void 0;if(Jr!==null){var o=Jr.memoizedState;if(i=o.destroy,r!==null&&rL(r,o.deps)){s.memoizedState=q0(e,n,i,r);return}}hr.flags|=t,s.memoizedState=q0(1|e,n,i,r)}function pW(t,e){return h2(8390656,8,t,e)}function oL(t,e){return nk(2048,8,t,e)}function jte(t,e){return nk(4,2,t,e)}function Mte(t,e){return nk(4,4,t,e)}function Fte(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Lte(t,e,n){return n=n!=null?n.concat([t]):null,nk(4,4,Fte.bind(null,e,t),n)}function aL(){}function Bte(t,e){var n=Ta();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rL(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zte(t,e){var n=Ta();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rL(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Vte(t,e,n){return Jh&21?(vl(n,e)||(n=qee(),hr.lanes|=n,ep|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qi=!0),t.memoizedState=n)}function U2e(t,e){var n=wn;wn=n!==0&&4>n?n:4,t(!0);var r=wI.transition;wI.transition={};try{t(!1),e()}finally{wn=n,wI.transition=r}}function Wte(){return Ta().memoizedState}function G2e(t,e,n){var r=Bd(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ute(t))Gte(e,n);else if(n=_te(t,e,n,r),n!==null){var s=Ei();cl(n,t,r,s),Hte(n,e,r)}}function H2e(t,e,n){var r=Bd(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ute(t))Gte(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,vl(a,o)){var l=e.interleaved;l===null?(s.next=s,ZF(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=_te(t,e,s,r),n!==null&&(s=Ei(),cl(n,t,r,s),Hte(n,e,r))}}function Ute(t){var e=t.alternate;return t===hr||e!==null&&e===hr}function Gte(t,e){c0=lN=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Hte(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,FF(t,n)}}var cN={readContext:_a,useCallback:zs,useContext:zs,useEffect:zs,useImperativeHandle:zs,useInsertionEffect:zs,useLayoutEffect:zs,useMemo:zs,useReducer:zs,useRef:zs,useState:zs,useDebugValue:zs,useDeferredValue:zs,useTransition:zs,useMutableSource:zs,useSyncExternalStore:zs,useId:zs,unstable_isNewReconciler:!1},q2e={readContext:_a,useCallback:function(t,e){return Bl().memoizedState=[t,e===void 0?null:e],t},useContext:_a,useEffect:pW,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,h2(4194308,4,Fte.bind(null,e,t),n)},useLayoutEffect:function(t,e){return h2(4194308,4,t,e)},useInsertionEffect:function(t,e){return h2(4,2,t,e)},useMemo:function(t,e){var n=Bl();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Bl();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=G2e.bind(null,hr,t),[r.memoizedState,t]},useRef:function(t){var e=Bl();return t={current:t},e.memoizedState=t},useState:hW,useDebugValue:aL,useDeferredValue:function(t){return Bl().memoizedState=t},useTransition:function(){var t=hW(!1),e=t[0];return t=U2e.bind(null,t[1]),Bl().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=hr,s=Bl();if(nr){if(n===void 0)throw Error(Te(407));n=n()}else{if(n=e(),ys===null)throw Error(Te(349));Jh&30||Ate(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,pW(Ote.bind(null,r,i,t),[t]),r.flags|=2048,q0(9,Ite.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Bl(),e=ys.identifierPrefix;if(nr){var n=ou,r=iu;n=(r&~(1<<32-ll(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=G0++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=W2e++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},K2e={readContext:_a,useCallback:Bte,useContext:_a,useEffect:oL,useImperativeHandle:Lte,useInsertionEffect:jte,useLayoutEffect:Mte,useMemo:zte,useReducer:SI,useRef:Dte,useState:function(){return SI(H0)},useDebugValue:aL,useDeferredValue:function(t){var e=Ta();return Vte(e,Jr.memoizedState,t)},useTransition:function(){var t=SI(H0)[0],e=Ta().memoizedState;return[t,e]},useMutableSource:Ete,useSyncExternalStore:$te,useId:Wte,unstable_isNewReconciler:!1},X2e={readContext:_a,useCallback:Bte,useContext:_a,useEffect:oL,useImperativeHandle:Lte,useInsertionEffect:jte,useLayoutEffect:Mte,useMemo:zte,useReducer:CI,useRef:Dte,useState:function(){return CI(H0)},useDebugValue:aL,useDeferredValue:function(t){var e=Ta();return Jr===null?e.memoizedState=t:Vte(e,Jr.memoizedState,t)},useTransition:function(){var t=CI(H0)[0],e=Ta().memoizedState;return[t,e]},useMutableSource:Ete,useSyncExternalStore:$te,useId:Wte,unstable_isNewReconciler:!1};function Ha(t,e){if(t&&t.defaultProps){e=mr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uR(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:mr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rk={isMounted:function(t){return(t=t._reactInternals)?Ip(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ei(),s=Bd(t),i=du(r,s);i.payload=e,n!=null&&(i.callback=n),e=Fd(t,i,s),e!==null&&(cl(e,t,s,r),d2(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ei(),s=Bd(t),i=du(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Fd(t,i,s),e!==null&&(cl(e,t,s,r),d2(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ei(),r=Bd(t),s=du(n,r);s.tag=2,e!=null&&(s.callback=e),e=Fd(t,s,r),e!==null&&(cl(e,t,r,n),d2(e,t,r))}};function mW(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!L0(n,r)||!L0(s,i):!0}function qte(t,e,n){var r=!1,s=Zd,i=e.contextType;return typeof i=="object"&&i!==null?i=_a(i):(s=Ji(e)?Qh:li.current,r=e.contextTypes,i=(r=r!=null)?Mg(t,s):Zd),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rk,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function gW(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&rk.enqueueReplaceState(e,e.state,null)}function dR(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},JF(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=_a(i):(i=Ji(e)?Qh:li.current,s.context=Mg(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(uR(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&rk.enqueueReplaceState(s,s.state,null),oN(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function zg(t,e){try{var n="",r=e;do n+=CCe(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function NI(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function fR(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Y2e=typeof WeakMap=="function"?WeakMap:Map;function Kte(t,e,n){n=du(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){dN||(dN=!0,SR=r),fR(t,e)},n}function Xte(t,e,n){n=du(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){fR(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){fR(t,e),typeof r!="function"&&(Ld===null?Ld=new Set([this]):Ld.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function yW(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Y2e;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=uNe.bind(null,t,e,n),e.then(t,t))}function vW(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function xW(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=du(-1,1),e.tag=2,Fd(n,e,1))),n.lanes|=1),t)}var Q2e=zu.ReactCurrentOwner,qi=!1;function yi(t,e,n,r){e.child=t===null?Nte(e,null,n,r):Lg(e,t.child,n,r)}function bW(t,e,n,r,s){n=n.render;var i=e.ref;return ng(e,s),r=sL(t,e,n,r,i,s),n=iL(),t!==null&&!qi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_u(t,e,s)):(nr&&n&&HF(e),e.flags|=1,yi(t,e,r,s),e.child)}function wW(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!mL(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Yte(t,e,i,r,s)):(t=y2(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:L0,n(o,r)&&t.ref===e.ref)return _u(t,e,s)}return e.flags|=1,t=zd(i,r),t.ref=e.ref,t.return=e,e.child=t}function Yte(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(L0(i,r)&&t.ref===e.ref)if(qi=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(qi=!0);else return e.lanes=t.lanes,_u(t,e,s)}return hR(t,e,n,r,s)}function Qte(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fn(Lm,yo),yo|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fn(Lm,yo),yo|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Fn(Lm,yo),yo|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Fn(Lm,yo),yo|=r;return yi(t,e,s,n),e.child}function Zte(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hR(t,e,n,r,s){var i=Ji(n)?Qh:li.current;return i=Mg(e,i),ng(e,s),n=sL(t,e,n,r,i,s),r=iL(),t!==null&&!qi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_u(t,e,s)):(nr&&r&&HF(e),e.flags|=1,yi(t,e,n,s),e.child)}function SW(t,e,n,r,s){if(Ji(n)){var i=!0;tN(e)}else i=!1;if(ng(e,s),e.stateNode===null)p2(t,e),qte(e,n,r),dR(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=_a(c):(c=Ji(n)?Qh:li.current,c=Mg(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&gW(e,o,r,c),ld=!1;var h=e.memoizedState;o.state=h,oN(e,r,o,s),l=e.memoizedState,a!==r||h!==l||Zi.current||ld?(typeof u=="function"&&(uR(e,n,u,r),l=e.memoizedState),(a=ld||mW(e,n,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Tte(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ha(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=_a(l):(l=Ji(n)?Qh:li.current,l=Mg(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&gW(e,o,r,l),ld=!1,h=e.memoizedState,o.state=h,oN(e,r,o,s);var m=e.memoizedState;a!==d||h!==m||Zi.current||ld?(typeof p=="function"&&(uR(e,n,p,r),m=e.memoizedState),(c=ld||mW(e,n,c,r,h,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return pR(t,e,n,r,i,s)}function pR(t,e,n,r,s,i){Zte(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&aW(e,n,!1),_u(t,e,i);r=e.stateNode,Q2e.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Lg(e,t.child,null,i),e.child=Lg(e,null,a,i)):yi(t,e,a,i),e.memoizedState=r.state,s&&aW(e,n,!0),e.child}function Jte(t){var e=t.stateNode;e.pendingContext?oW(t,e.pendingContext,e.pendingContext!==e.context):e.context&&oW(t,e.context,!1),eL(t,e.containerInfo)}function CW(t,e,n,r,s){return Fg(),KF(s),e.flags|=256,yi(t,e,n,r),e.child}var mR={dehydrated:null,treeContext:null,retryLane:0};function gR(t){return{baseLanes:t,cachePool:null,transitions:null}}function ene(t,e,n){var r=e.pendingProps,s=dr.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Fn(dr,s&1),t===null)return lR(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ok(o,r,0,null),t=zh(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=gR(n),e.memoizedState=mR,t):lL(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Z2e(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=zd(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=zd(a,i):(i=zh(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?gR(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=mR,r}return i=t.child,t=i.sibling,r=zd(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function lL(t,e){return e=ok({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function tC(t,e,n,r){return r!==null&&KF(r),Lg(e,t.child,null,n),t=lL(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Z2e(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=NI(Error(Te(422))),tC(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ok({mode:"visible",children:r.children},s,0,null),i=zh(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Lg(e,t.child,null,o),e.child.memoizedState=gR(o),e.memoizedState=mR,i);if(!(e.mode&1))return tC(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Te(419)),r=NI(i,r,void 0),tC(t,e,o,r)}if(a=(o&t.childLanes)!==0,qi||a){if(r=ys,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Nu(t,s),cl(r,t,s,-1))}return pL(),r=NI(Error(Te(421))),tC(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=dNe.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,No=Md(s.nextSibling),To=e,nr=!0,Ja=null,t!==null&&(ia[oa++]=iu,ia[oa++]=ou,ia[oa++]=Zh,iu=t.id,ou=t.overflow,Zh=e),e=lL(e,r.children),e.flags|=4096,e)}function NW(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),cR(t.return,e,n)}function _I(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function tne(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(yi(t,e,r.children,n),r=dr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&NW(t,n,e);else if(t.tag===19)NW(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Fn(dr,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&aN(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),_I(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&aN(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}_I(e,!0,n,null,i);break;case"together":_I(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function p2(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _u(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ep|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Te(153));if(e.child!==null){for(t=e.child,n=zd(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=zd(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function J2e(t,e,n){switch(e.tag){case 3:Jte(e),Fg();break;case 5:kte(e);break;case 1:Ji(e.type)&&tN(e);break;case 4:eL(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Fn(sN,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Fn(dr,dr.current&1),e.flags|=128,null):n&e.child.childLanes?ene(t,e,n):(Fn(dr,dr.current&1),t=_u(t,e,n),t!==null?t.sibling:null);Fn(dr,dr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return tne(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Fn(dr,dr.current),r)break;return null;case 22:case 23:return e.lanes=0,Qte(t,e,n)}return _u(t,e,n)}var nne,yR,rne,sne;nne=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yR=function(){};rne=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,bh(lc.current);var i=null;switch(n){case"input":s=LP(t,s),r=LP(t,r),i=[];break;case"select":s=mr({},s,{value:void 0}),r=mr({},r,{value:void 0}),i=[];break;case"textarea":s=VP(t,s),r=VP(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=J2)}UP(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(O0.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(O0.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Gn("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};sne=function(t,e,n,r){n!==r&&(e.flags|=4)};function cx(t,e){if(!nr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Vs(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function eNe(t,e,n){var r=e.pendingProps;switch(qF(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vs(e),null;case 1:return Ji(e.type)&&eN(),Vs(e),null;case 3:return r=e.stateNode,Bg(),Xn(Zi),Xn(li),nL(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(JS(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ja!==null&&(_R(Ja),Ja=null))),yR(t,e),Vs(e),null;case 5:tL(e);var s=bh(U0.current);if(n=e.type,t!==null&&e.stateNode!=null)rne(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Te(166));return Vs(e),null}if(t=bh(lc.current),JS(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Yl]=e,r[V0]=i,t=(e.mode&1)!==0,n){case"dialog":Gn("cancel",r),Gn("close",r);break;case"iframe":case"object":case"embed":Gn("load",r);break;case"video":case"audio":for(s=0;s<Bx.length;s++)Gn(Bx[s],r);break;case"source":Gn("error",r);break;case"img":case"image":case"link":Gn("error",r),Gn("load",r);break;case"details":Gn("toggle",r);break;case"input":P6(r,i),Gn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Gn("invalid",r);break;case"textarea":D6(r,i),Gn("invalid",r)}UP(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ZS(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ZS(r.textContent,a,t),s=["children",""+a]):O0.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Gn("scroll",r)}switch(n){case"input":US(r),R6(r,i,!0);break;case"textarea":US(r),j6(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=J2)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Oee(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Yl]=e,t[V0]=r,nne(t,e,!1,!1),e.stateNode=t;e:{switch(o=GP(n,r),n){case"dialog":Gn("cancel",t),Gn("close",t),s=r;break;case"iframe":case"object":case"embed":Gn("load",t),s=r;break;case"video":case"audio":for(s=0;s<Bx.length;s++)Gn(Bx[s],t);s=r;break;case"source":Gn("error",t),s=r;break;case"img":case"image":case"link":Gn("error",t),Gn("load",t),s=r;break;case"details":Gn("toggle",t),s=r;break;case"input":P6(t,r),s=LP(t,r),Gn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=mr({},r,{value:void 0}),Gn("invalid",t);break;case"textarea":D6(t,r),s=VP(t,r),Gn("invalid",t);break;default:s=r}UP(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Dee(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Pee(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&P0(t,l):typeof l=="number"&&P0(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(O0.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Gn("scroll",t):l!=null&&OF(t,i,l,o))}switch(n){case"input":US(t),R6(t,r,!1);break;case"textarea":US(t),j6(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qd(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Zm(t,!!r.multiple,i,!1):r.defaultValue!=null&&Zm(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=J2)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vs(e),null;case 6:if(t&&e.stateNode!=null)sne(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Te(166));if(n=bh(U0.current),bh(lc.current),JS(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yl]=e,(i=r.nodeValue!==n)&&(t=To,t!==null))switch(t.tag){case 3:ZS(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ZS(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yl]=e,e.stateNode=r}return Vs(e),null;case 13:if(Xn(dr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(nr&&No!==null&&e.mode&1&&!(e.flags&128))Ste(),Fg(),e.flags|=98560,i=!1;else if(i=JS(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Te(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Te(317));i[Yl]=e}else Fg(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vs(e),i=!1}else Ja!==null&&(_R(Ja),Ja=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||dr.current&1?rs===0&&(rs=3):pL())),e.updateQueue!==null&&(e.flags|=4),Vs(e),null);case 4:return Bg(),yR(t,e),t===null&&B0(e.stateNode.containerInfo),Vs(e),null;case 10:return QF(e.type._context),Vs(e),null;case 17:return Ji(e.type)&&eN(),Vs(e),null;case 19:if(Xn(dr),i=e.memoizedState,i===null)return Vs(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)cx(i,!1);else{if(rs!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=aN(t),o!==null){for(e.flags|=128,cx(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Fn(dr,dr.current&1|2),e.child}t=t.sibling}i.tail!==null&&Rr()>Vg&&(e.flags|=128,r=!0,cx(i,!1),e.lanes=4194304)}else{if(!r)if(t=aN(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),cx(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!nr)return Vs(e),null}else 2*Rr()-i.renderingStartTime>Vg&&n!==1073741824&&(e.flags|=128,r=!0,cx(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Rr(),e.sibling=null,n=dr.current,Fn(dr,r?n&1|2:n&1),e):(Vs(e),null);case 22:case 23:return hL(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yo&1073741824&&(Vs(e),e.subtreeFlags&6&&(e.flags|=8192)):Vs(e),null;case 24:return null;case 25:return null}throw Error(Te(156,e.tag))}function tNe(t,e){switch(qF(e),e.tag){case 1:return Ji(e.type)&&eN(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bg(),Xn(Zi),Xn(li),nL(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tL(e),null;case 13:if(Xn(dr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Te(340));Fg()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xn(dr),null;case 4:return Bg(),null;case 10:return QF(e.type._context),null;case 22:case 23:return hL(),null;case 24:return null;default:return null}}var nC=!1,Qs=!1,nNe=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Fm(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){xr(t,e,r)}else n.current=null}function vR(t,e,n){try{n()}catch(r){xr(t,e,r)}}var _W=!1;function rNe(t,e){if(tR=Y2,t=cte(),GF(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var p;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===t)break t;if(h===n&&++c===s&&(a=o),h===i&&++u===r&&(l=o),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(nR={focusedElem:t,selectionRange:n},Y2=!1,Ke=e;Ke!==null;)if(e=Ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ke=t;else for(;Ke!==null;){e=Ke;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,y=m.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ha(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Te(163))}}catch(S){xr(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Ke=t;break}Ke=e.return}return m=_W,_W=!1,m}function u0(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&vR(e,n,i)}s=s.next}while(s!==r)}}function sk(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xR(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ine(t){var e=t.alternate;e!==null&&(t.alternate=null,ine(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yl],delete e[V0],delete e[iR],delete e[L2e],delete e[B2e])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function one(t){return t.tag===5||t.tag===3||t.tag===4}function TW(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||one(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bR(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=J2));else if(r!==4&&(t=t.child,t!==null))for(bR(t,e,n),t=t.sibling;t!==null;)bR(t,e,n),t=t.sibling}function wR(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wR(t,e,n),t=t.sibling;t!==null;)wR(t,e,n),t=t.sibling}var Es=null,Xa=!1;function Zu(t,e,n){for(n=n.child;n!==null;)ane(t,e,n),n=n.sibling}function ane(t,e,n){if(ac&&typeof ac.onCommitFiberUnmount=="function")try{ac.onCommitFiberUnmount(YT,n)}catch{}switch(n.tag){case 5:Qs||Fm(n,e);case 6:var r=Es,s=Xa;Es=null,Zu(t,e,n),Es=r,Xa=s,Es!==null&&(Xa?(t=Es,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Es.removeChild(n.stateNode));break;case 18:Es!==null&&(Xa?(t=Es,n=n.stateNode,t.nodeType===8?vI(t.parentNode,n):t.nodeType===1&&vI(t,n),M0(t)):vI(Es,n.stateNode));break;case 4:r=Es,s=Xa,Es=n.stateNode.containerInfo,Xa=!0,Zu(t,e,n),Es=r,Xa=s;break;case 0:case 11:case 14:case 15:if(!Qs&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&vR(n,e,o),s=s.next}while(s!==r)}Zu(t,e,n);break;case 1:if(!Qs&&(Fm(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){xr(n,e,a)}Zu(t,e,n);break;case 21:Zu(t,e,n);break;case 22:n.mode&1?(Qs=(r=Qs)||n.memoizedState!==null,Zu(t,e,n),Qs=r):Zu(t,e,n);break;default:Zu(t,e,n)}}function kW(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nNe),e.forEach(function(r){var s=fNe.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ba(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Es=a.stateNode,Xa=!1;break e;case 3:Es=a.stateNode.containerInfo,Xa=!0;break e;case 4:Es=a.stateNode.containerInfo,Xa=!0;break e}a=a.return}if(Es===null)throw Error(Te(160));ane(i,o,s),Es=null,Xa=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){xr(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)lne(e,t),e=e.sibling}function lne(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ba(e,t),jl(t),r&4){try{u0(3,t,t.return),sk(3,t)}catch(g){xr(t,t.return,g)}try{u0(5,t,t.return)}catch(g){xr(t,t.return,g)}}break;case 1:Ba(e,t),jl(t),r&512&&n!==null&&Fm(n,n.return);break;case 5:if(Ba(e,t),jl(t),r&512&&n!==null&&Fm(n,n.return),t.flags&32){var s=t.stateNode;try{P0(s,"")}catch(g){xr(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Aee(s,i),GP(a,o);var c=GP(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?Dee(s,d):u==="dangerouslySetInnerHTML"?Pee(s,d):u==="children"?P0(s,d):OF(s,u,d,c)}switch(a){case"input":BP(s,i);break;case"textarea":Iee(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Zm(s,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?Zm(s,!!i.multiple,i.defaultValue,!0):Zm(s,!!i.multiple,i.multiple?[]:"",!1))}s[V0]=i}catch(g){xr(t,t.return,g)}}break;case 6:if(Ba(e,t),jl(t),r&4){if(t.stateNode===null)throw Error(Te(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){xr(t,t.return,g)}}break;case 3:if(Ba(e,t),jl(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{M0(e.containerInfo)}catch(g){xr(t,t.return,g)}break;case 4:Ba(e,t),jl(t);break;case 13:Ba(e,t),jl(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(dL=Rr())),r&4&&kW(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Qs=(c=Qs)||u,Ba(e,t),Qs=c):Ba(e,t),jl(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ke=t,u=t.child;u!==null;){for(d=Ke=u;Ke!==null;){switch(h=Ke,p=h.child,h.tag){case 0:case 11:case 14:case 15:u0(4,h,h.return);break;case 1:Fm(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){xr(r,n,g)}}break;case 5:Fm(h,h.return);break;case 22:if(h.memoizedState!==null){$W(d);continue}}p!==null?(p.return=h,Ke=p):$W(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ree("display",o))}catch(g){xr(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){xr(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ba(e,t),jl(t),r&4&&kW(t);break;case 21:break;default:Ba(e,t),jl(t)}}function jl(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(one(n)){var r=n;break e}n=n.return}throw Error(Te(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(P0(s,""),r.flags&=-33);var i=TW(t);wR(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=TW(t);bR(t,a,o);break;default:throw Error(Te(161))}}catch(l){xr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sNe(t,e,n){Ke=t,cne(t)}function cne(t,e,n){for(var r=(t.mode&1)!==0;Ke!==null;){var s=Ke,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||nC;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Qs;a=nC;var c=Qs;if(nC=o,(Qs=l)&&!c)for(Ke=s;Ke!==null;)o=Ke,l=o.child,o.tag===22&&o.memoizedState!==null?AW(s):l!==null?(l.return=o,Ke=l):AW(s);for(;i!==null;)Ke=i,cne(i),i=i.sibling;Ke=s,nC=a,Qs=c}EW(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ke=i):EW(t)}}function EW(t){for(;Ke!==null;){var e=Ke;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qs||sk(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qs)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ha(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&fW(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fW(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&M0(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Te(163))}Qs||e.flags&512&&xR(e)}catch(h){xr(e,e.return,h)}}if(e===t){Ke=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function $W(t){for(;Ke!==null;){var e=Ke;if(e===t){Ke=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function AW(t){for(;Ke!==null;){var e=Ke;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sk(4,e)}catch(l){xr(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){xr(e,s,l)}}var i=e.return;try{xR(e)}catch(l){xr(e,i,l)}break;case 5:var o=e.return;try{xR(e)}catch(l){xr(e,o,l)}}}catch(l){xr(e,e.return,l)}if(e===t){Ke=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ke=a;break}Ke=e.return}}var iNe=Math.ceil,uN=zu.ReactCurrentDispatcher,cL=zu.ReactCurrentOwner,xa=zu.ReactCurrentBatchConfig,sn=0,ys=null,zr=null,Os=0,yo=0,Lm=bf(0),rs=0,K0=null,ep=0,ik=0,uL=0,d0=null,Ui=null,dL=0,Vg=1/0,Xc=null,dN=!1,SR=null,Ld=null,rC=!1,_d=null,fN=0,f0=0,CR=null,m2=-1,g2=0;function Ei(){return sn&6?Rr():m2!==-1?m2:m2=Rr()}function Bd(t){return t.mode&1?sn&2&&Os!==0?Os&-Os:V2e.transition!==null?(g2===0&&(g2=qee()),g2):(t=wn,t!==0||(t=window.event,t=t===void 0?16:ete(t.type)),t):1}function cl(t,e,n,r){if(50<f0)throw f0=0,CR=null,Error(Te(185));T1(t,n,r),(!(sn&2)||t!==ys)&&(t===ys&&(!(sn&2)&&(ik|=n),rs===4&&fd(t,Os)),eo(t,r),n===1&&sn===0&&!(e.mode&1)&&(Vg=Rr()+500,tk&&wf()))}function eo(t,e){var n=t.callbackNode;VCe(t,e);var r=X2(t,t===ys?Os:0);if(r===0)n!==null&&L6(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&L6(n),e===1)t.tag===0?z2e(IW.bind(null,t)):xte(IW.bind(null,t)),M2e(function(){!(sn&6)&&wf()}),n=null;else{switch(Kee(r)){case 1:n=MF;break;case 4:n=Gee;break;case 16:n=K2;break;case 536870912:n=Hee;break;default:n=K2}n=yne(n,une.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function une(t,e){if(m2=-1,g2=0,sn&6)throw Error(Te(327));var n=t.callbackNode;if(rg()&&t.callbackNode!==n)return null;var r=X2(t,t===ys?Os:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hN(t,r);else{e=r;var s=sn;sn|=2;var i=fne();(ys!==t||Os!==e)&&(Xc=null,Vg=Rr()+500,Bh(t,e));do try{lNe();break}catch(a){dne(t,a)}while(!0);YF(),uN.current=i,sn=s,zr!==null?e=0:(ys=null,Os=0,e=rs)}if(e!==0){if(e===2&&(s=YP(t),s!==0&&(r=s,e=NR(t,s))),e===1)throw n=K0,Bh(t,0),fd(t,r),eo(t,Rr()),n;if(e===6)fd(t,r);else{if(s=t.current.alternate,!(r&30)&&!oNe(s)&&(e=hN(t,r),e===2&&(i=YP(t),i!==0&&(r=i,e=NR(t,i))),e===1))throw n=K0,Bh(t,0),fd(t,r),eo(t,Rr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Te(345));case 2:sh(t,Ui,Xc);break;case 3:if(fd(t,r),(r&130023424)===r&&(e=dL+500-Rr(),10<e)){if(X2(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ei(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=sR(sh.bind(null,t,Ui,Xc),e);break}sh(t,Ui,Xc);break;case 4:if(fd(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ll(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Rr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iNe(r/1960))-r,10<r){t.timeoutHandle=sR(sh.bind(null,t,Ui,Xc),r);break}sh(t,Ui,Xc);break;case 5:sh(t,Ui,Xc);break;default:throw Error(Te(329))}}}return eo(t,Rr()),t.callbackNode===n?une.bind(null,t):null}function NR(t,e){var n=d0;return t.current.memoizedState.isDehydrated&&(Bh(t,e).flags|=256),t=hN(t,e),t!==2&&(e=Ui,Ui=n,e!==null&&_R(e)),t}function _R(t){Ui===null?Ui=t:Ui.push.apply(Ui,t)}function oNe(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vl(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fd(t,e){for(e&=~uL,e&=~ik,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ll(e),r=1<<n;t[n]=-1,e&=~r}}function IW(t){if(sn&6)throw Error(Te(327));rg();var e=X2(t,0);if(!(e&1))return eo(t,Rr()),null;var n=hN(t,e);if(t.tag!==0&&n===2){var r=YP(t);r!==0&&(e=r,n=NR(t,r))}if(n===1)throw n=K0,Bh(t,0),fd(t,e),eo(t,Rr()),n;if(n===6)throw Error(Te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,sh(t,Ui,Xc),eo(t,Rr()),null}function fL(t,e){var n=sn;sn|=1;try{return t(e)}finally{sn=n,sn===0&&(Vg=Rr()+500,tk&&wf())}}function tp(t){_d!==null&&_d.tag===0&&!(sn&6)&&rg();var e=sn;sn|=1;var n=xa.transition,r=wn;try{if(xa.transition=null,wn=1,t)return t()}finally{wn=r,xa.transition=n,sn=e,!(sn&6)&&wf()}}function hL(){yo=Lm.current,Xn(Lm)}function Bh(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,j2e(n)),zr!==null)for(n=zr.return;n!==null;){var r=n;switch(qF(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&eN();break;case 3:Bg(),Xn(Zi),Xn(li),nL();break;case 5:tL(r);break;case 4:Bg();break;case 13:Xn(dr);break;case 19:Xn(dr);break;case 10:QF(r.type._context);break;case 22:case 23:hL()}n=n.return}if(ys=t,zr=t=zd(t.current,null),Os=yo=e,rs=0,K0=null,uL=ik=ep=0,Ui=d0=null,xh!==null){for(e=0;e<xh.length;e++)if(n=xh[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}xh=null}return t}function dne(t,e){do{var n=zr;try{if(YF(),f2.current=cN,lN){for(var r=hr.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}lN=!1}if(Jh=0,hs=Jr=hr=null,c0=!1,G0=0,cL.current=null,n===null||n.return===null){rs=1,K0=e,zr=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Os,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=vW(o);if(p!==null){p.flags&=-257,xW(p,o,a,i,e),p.mode&1&&yW(i,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){yW(i,c,e),pL();break e}l=Error(Te(426))}}else if(nr&&a.mode&1){var y=vW(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),xW(y,o,a,i,e),KF(zg(l,a));break e}}i=l=zg(l,a),rs!==4&&(rs=2),d0===null?d0=[i]:d0.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=Kte(i,l,e);dW(i,v);break e;case 1:a=l;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ld===null||!Ld.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=Xte(i,a,e);dW(i,S);break e}}i=i.return}while(i!==null)}pne(n)}catch(w){e=w,zr===n&&n!==null&&(zr=n=n.return);continue}break}while(!0)}function fne(){var t=uN.current;return uN.current=cN,t===null?cN:t}function pL(){(rs===0||rs===3||rs===2)&&(rs=4),ys===null||!(ep&268435455)&&!(ik&268435455)||fd(ys,Os)}function hN(t,e){var n=sn;sn|=2;var r=fne();(ys!==t||Os!==e)&&(Xc=null,Bh(t,e));do try{aNe();break}catch(s){dne(t,s)}while(!0);if(YF(),sn=n,uN.current=r,zr!==null)throw Error(Te(261));return ys=null,Os=0,rs}function aNe(){for(;zr!==null;)hne(zr)}function lNe(){for(;zr!==null&&!PCe();)hne(zr)}function hne(t){var e=gne(t.alternate,t,yo);t.memoizedProps=t.pendingProps,e===null?pne(t):zr=e,cL.current=null}function pne(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tNe(n,e),n!==null){n.flags&=32767,zr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rs=6,zr=null;return}}else if(n=eNe(n,e,yo),n!==null){zr=n;return}if(e=e.sibling,e!==null){zr=e;return}zr=e=t}while(e!==null);rs===0&&(rs=5)}function sh(t,e,n){var r=wn,s=xa.transition;try{xa.transition=null,wn=1,cNe(t,e,n,r)}finally{xa.transition=s,wn=r}return null}function cNe(t,e,n,r){do rg();while(_d!==null);if(sn&6)throw Error(Te(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Te(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(WCe(t,i),t===ys&&(zr=ys=null,Os=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rC||(rC=!0,yne(K2,function(){return rg(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=xa.transition,xa.transition=null;var o=wn;wn=1;var a=sn;sn|=4,cL.current=null,rNe(t,n),lne(n,t),$2e(nR),Y2=!!tR,nR=tR=null,t.current=n,sNe(n),RCe(),sn=a,wn=o,xa.transition=i}else t.current=n;if(rC&&(rC=!1,_d=t,fN=s),i=t.pendingLanes,i===0&&(Ld=null),MCe(n.stateNode),eo(t,Rr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(dN)throw dN=!1,t=SR,SR=null,t;return fN&1&&t.tag!==0&&rg(),i=t.pendingLanes,i&1?t===CR?f0++:(f0=0,CR=t):f0=0,wf(),null}function rg(){if(_d!==null){var t=Kee(fN),e=xa.transition,n=wn;try{if(xa.transition=null,wn=16>t?16:t,_d===null)var r=!1;else{if(t=_d,_d=null,fN=0,sn&6)throw Error(Te(331));var s=sn;for(sn|=4,Ke=t.current;Ke!==null;){var i=Ke,o=i.child;if(Ke.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ke=c;Ke!==null;){var u=Ke;switch(u.tag){case 0:case 11:case 15:u0(8,u,i)}var d=u.child;if(d!==null)d.return=u,Ke=d;else for(;Ke!==null;){u=Ke;var h=u.sibling,p=u.return;if(ine(u),u===c){Ke=null;break}if(h!==null){h.return=p,Ke=h;break}Ke=p}}}var m=i.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Ke=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ke=o;else e:for(;Ke!==null;){if(i=Ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:u0(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Ke=v;break e}Ke=i.return}}var x=t.current;for(Ke=x;Ke!==null;){o=Ke;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Ke=b;else e:for(o=x;Ke!==null;){if(a=Ke,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:sk(9,a)}}catch(w){xr(a,a.return,w)}if(a===o){Ke=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Ke=S;break e}Ke=a.return}}if(sn=s,wf(),ac&&typeof ac.onPostCommitFiberRoot=="function")try{ac.onPostCommitFiberRoot(YT,t)}catch{}r=!0}return r}finally{wn=n,xa.transition=e}}return!1}function OW(t,e,n){e=zg(n,e),e=Kte(t,e,1),t=Fd(t,e,1),e=Ei(),t!==null&&(T1(t,1,e),eo(t,e))}function xr(t,e,n){if(t.tag===3)OW(t,t,n);else for(;e!==null;){if(e.tag===3){OW(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ld===null||!Ld.has(r))){t=zg(n,t),t=Xte(e,t,1),e=Fd(e,t,1),t=Ei(),e!==null&&(T1(e,1,t),eo(e,t));break}}e=e.return}}function uNe(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ei(),t.pingedLanes|=t.suspendedLanes&n,ys===t&&(Os&n)===n&&(rs===4||rs===3&&(Os&130023424)===Os&&500>Rr()-dL?Bh(t,0):uL|=n),eo(t,e)}function mne(t,e){e===0&&(t.mode&1?(e=qS,qS<<=1,!(qS&130023424)&&(qS=4194304)):e=1);var n=Ei();t=Nu(t,e),t!==null&&(T1(t,e,n),eo(t,n))}function dNe(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),mne(t,n)}function fNe(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Te(314))}r!==null&&r.delete(e),mne(t,n)}var gne;gne=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Zi.current)qi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qi=!1,J2e(t,e,n);qi=!!(t.flags&131072)}else qi=!1,nr&&e.flags&1048576&&bte(e,rN,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;p2(t,e),t=e.pendingProps;var s=Mg(e,li.current);ng(e,n),s=sL(null,e,r,t,s,n);var i=iL();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ji(r)?(i=!0,tN(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,JF(e),s.updater=rk,e.stateNode=s,s._reactInternals=e,dR(e,r,t,n),e=pR(null,e,r,!0,i,n)):(e.tag=0,nr&&i&&HF(e),yi(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(p2(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=pNe(r),t=Ha(r,t),s){case 0:e=hR(null,e,r,t,n);break e;case 1:e=SW(null,e,r,t,n);break e;case 11:e=bW(null,e,r,t,n);break e;case 14:e=wW(null,e,r,Ha(r.type,t),n);break e}throw Error(Te(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ha(r,s),hR(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ha(r,s),SW(t,e,r,s,n);case 3:e:{if(Jte(e),t===null)throw Error(Te(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Tte(t,e),oN(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=zg(Error(Te(423)),e),e=CW(t,e,r,n,s);break e}else if(r!==s){s=zg(Error(Te(424)),e),e=CW(t,e,r,n,s);break e}else for(No=Md(e.stateNode.containerInfo.firstChild),To=e,nr=!0,Ja=null,n=Nte(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fg(),r===s){e=_u(t,e,n);break e}yi(t,e,r,n)}e=e.child}return e;case 5:return kte(e),t===null&&lR(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,rR(r,s)?o=null:i!==null&&rR(r,i)&&(e.flags|=32),Zte(t,e),yi(t,e,o,n),e.child;case 6:return t===null&&lR(e),null;case 13:return ene(t,e,n);case 4:return eL(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Lg(e,null,r,n):yi(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ha(r,s),bW(t,e,r,s,n);case 7:return yi(t,e,e.pendingProps,n),e.child;case 8:return yi(t,e,e.pendingProps.children,n),e.child;case 12:return yi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Fn(sN,r._currentValue),r._currentValue=o,i!==null)if(vl(i.value,o)){if(i.children===s.children&&!Zi.current){e=_u(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=du(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),cR(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Te(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),cR(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}yi(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ng(e,n),s=_a(s),r=r(s),e.flags|=1,yi(t,e,r,n),e.child;case 14:return r=e.type,s=Ha(r,e.pendingProps),s=Ha(r.type,s),wW(t,e,r,s,n);case 15:return Yte(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ha(r,s),p2(t,e),e.tag=1,Ji(r)?(t=!0,tN(e)):t=!1,ng(e,n),qte(e,r,s),dR(e,r,s,n),pR(null,e,r,!0,t,n);case 19:return tne(t,e,n);case 22:return Qte(t,e,n)}throw Error(Te(156,e.tag))};function yne(t,e){return Uee(t,e)}function hNe(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fa(t,e,n,r){return new hNe(t,e,n,r)}function mL(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pNe(t){if(typeof t=="function")return mL(t)?1:0;if(t!=null){if(t=t.$$typeof,t===RF)return 11;if(t===DF)return 14}return 2}function zd(t,e){var n=t.alternate;return n===null?(n=fa(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function y2(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")mL(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $m:return zh(n.children,s,i,e);case PF:o=8,s|=8;break;case DP:return t=fa(12,n,e,s|2),t.elementType=DP,t.lanes=i,t;case jP:return t=fa(13,n,e,s),t.elementType=jP,t.lanes=i,t;case MP:return t=fa(19,n,e,s),t.elementType=MP,t.lanes=i,t;case kee:return ok(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _ee:o=10;break e;case Tee:o=9;break e;case RF:o=11;break e;case DF:o=14;break e;case ad:o=16,r=null;break e}throw Error(Te(130,t==null?t:typeof t,""))}return e=fa(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function zh(t,e,n,r){return t=fa(7,t,r,e),t.lanes=n,t}function ok(t,e,n,r){return t=fa(22,t,r,e),t.elementType=kee,t.lanes=n,t.stateNode={isHidden:!1},t}function TI(t,e,n){return t=fa(6,t,null,e),t.lanes=n,t}function kI(t,e,n){return e=fa(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mNe(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aI(0),this.expirationTimes=aI(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aI(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gL(t,e,n,r,s,i,o,a,l){return t=new mNe(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=fa(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},JF(i),t}function gNe(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Em,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function vne(t){if(!t)return Zd;t=t._reactInternals;e:{if(Ip(t)!==t||t.tag!==1)throw Error(Te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ji(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Te(171))}if(t.tag===1){var n=t.type;if(Ji(n))return vte(t,n,e)}return e}function xne(t,e,n,r,s,i,o,a,l){return t=gL(n,r,!0,t,s,i,o,a,l),t.context=vne(null),n=t.current,r=Ei(),s=Bd(n),i=du(r,s),i.callback=e??null,Fd(n,i,s),t.current.lanes=s,T1(t,s,r),eo(t,r),t}function ak(t,e,n,r){var s=e.current,i=Ei(),o=Bd(s);return n=vne(n),e.context===null?e.context=n:e.pendingContext=n,e=du(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Fd(s,e,o),t!==null&&(cl(t,s,o,i),d2(t,s,o)),o}function pN(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function PW(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yL(t,e){PW(t,e),(t=t.alternate)&&PW(t,e)}function yNe(){return null}var bne=typeof reportError=="function"?reportError:function(t){console.error(t)};function vL(t){this._internalRoot=t}lk.prototype.render=vL.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Te(409));ak(t,e,null,null)};lk.prototype.unmount=vL.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;tp(function(){ak(null,t,null,null)}),e[Cu]=null}};function lk(t){this._internalRoot=t}lk.prototype.unstable_scheduleHydration=function(t){if(t){var e=Qee();t={blockedOn:null,target:t,priority:e};for(var n=0;n<dd.length&&e!==0&&e<dd[n].priority;n++);dd.splice(n,0,t),n===0&&Jee(t)}};function xL(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ck(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function RW(){}function vNe(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=pN(o);i.call(c)}}var o=xne(e,r,t,0,null,!1,!1,"",RW);return t._reactRootContainer=o,t[Cu]=o.current,B0(t.nodeType===8?t.parentNode:t),tp(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=pN(l);a.call(c)}}var l=gL(t,0,!1,null,null,!1,!1,"",RW);return t._reactRootContainer=l,t[Cu]=l.current,B0(t.nodeType===8?t.parentNode:t),tp(function(){ak(e,l,n,r)}),l}function uk(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=pN(o);a.call(l)}}ak(e,o,t,s)}else o=vNe(n,e,t,s,r);return pN(o)}Xee=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Lx(e.pendingLanes);n!==0&&(FF(e,n|1),eo(e,Rr()),!(sn&6)&&(Vg=Rr()+500,wf()))}break;case 13:tp(function(){var r=Nu(t,1);if(r!==null){var s=Ei();cl(r,t,1,s)}}),yL(t,1)}};LF=function(t){if(t.tag===13){var e=Nu(t,134217728);if(e!==null){var n=Ei();cl(e,t,134217728,n)}yL(t,134217728)}};Yee=function(t){if(t.tag===13){var e=Bd(t),n=Nu(t,e);if(n!==null){var r=Ei();cl(n,t,e,r)}yL(t,e)}};Qee=function(){return wn};Zee=function(t,e){var n=wn;try{return wn=t,e()}finally{wn=n}};qP=function(t,e,n){switch(e){case"input":if(BP(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ek(r);if(!s)throw Error(Te(90));$ee(r),BP(r,s)}}}break;case"textarea":Iee(t,n);break;case"select":e=n.value,e!=null&&Zm(t,!!n.multiple,e,!1)}};Fee=fL;Lee=tp;var xNe={usingClientEntryPoint:!1,Events:[E1,Pm,ek,jee,Mee,fL]},ux={findFiberByHostInstance:vh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bNe={bundleType:ux.bundleType,version:ux.version,rendererPackageName:ux.rendererPackageName,rendererConfig:ux.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zu.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Vee(t),t===null?null:t.stateNode},findFiberByHostInstance:ux.findFiberByHostInstance||yNe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sC.isDisabled&&sC.supportsFiber)try{YT=sC.inject(bNe),ac=sC}catch{}}Lo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xNe;Lo.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xL(e))throw Error(Te(200));return gNe(t,e,null,n)};Lo.createRoot=function(t,e){if(!xL(t))throw Error(Te(299));var n=!1,r="",s=bne;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=gL(t,1,!1,null,null,n,!1,r,s),t[Cu]=e.current,B0(t.nodeType===8?t.parentNode:t),new vL(e)};Lo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Te(188)):(t=Object.keys(t).join(","),Error(Te(268,t)));return t=Vee(e),t=t===null?null:t.stateNode,t};Lo.flushSync=function(t){return tp(t)};Lo.hydrate=function(t,e,n){if(!ck(e))throw Error(Te(200));return uk(null,t,e,!0,n)};Lo.hydrateRoot=function(t,e,n){if(!xL(t))throw Error(Te(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=bne;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=xne(e,null,t,1,n??null,s,!1,i,o),t[Cu]=e.current,B0(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new lk(e)};Lo.render=function(t,e,n){if(!ck(e))throw Error(Te(200));return uk(null,t,e,!1,n)};Lo.unmountComponentAtNode=function(t){if(!ck(t))throw Error(Te(40));return t._reactRootContainer?(tp(function(){uk(null,null,t,!1,function(){t._reactRootContainer=null,t[Cu]=null})}),!0):!1};Lo.unstable_batchedUpdates=fL;Lo.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ck(n))throw Error(Te(200));if(t==null||t._reactInternals===void 0)throw Error(Te(38));return uk(t,e,n,!1,r)};Lo.version="18.3.1-next-f1338f8080-20240426";function wne(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wne)}catch(t){console.error(t)}}wne(),wee.exports=Lo;var Op=wee.exports;const wNe=nn(Op);var Sne,DW=Op;Sne=DW.createRoot,DW.hydrateRoot;var Zy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},np=typeof window>"u"||"Deno"in globalThis;function na(){}function SNe(t,e){return typeof t=="function"?t(e):t}function TR(t){return typeof t=="number"&&t>=0&&t!==1/0}function Cne(t,e){return Math.max(t+(e||0)-Date.now(),0)}function sg(t,e){return typeof t=="function"?t(e):t}function el(t,e){return typeof t=="function"?t(e):t}function jW(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==bL(o,e.options))return!1}else if(!X0(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function MW(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(rp(e.options.mutationKey)!==rp(i))return!1}else if(!X0(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function bL(t,e){return((e==null?void 0:e.queryKeyHashFn)||rp)(t)}function rp(t){return JSON.stringify(t,(e,n)=>kR(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function X0(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!X0(t[n],e[n])):!1}function Nne(t,e){if(t===e)return t;const n=FW(t)&&FW(e);if(n||kR(t)&&kR(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{};let l=0;for(let c=0;c<o;c++){const u=n?c:i[c];(!n&&r.includes(u)||n)&&t[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=Nne(t[u],e[u]),a[u]===t[u]&&t[u]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function mN(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function FW(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function kR(t){if(!LW(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!LW(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function LW(t){return Object.prototype.toString.call(t)==="[object Object]"}function CNe(t){return new Promise(e=>{setTimeout(e,t)})}function ER(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Nne(t,e):e}function NNe(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function _Ne(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var wL=Symbol();function _ne(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===wL?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Oh,md,Cg,gY,TNe=(gY=class extends Zy{constructor(){super();ft(this,Oh);ft(this,md);ft(this,Cg);Ve(this,Cg,e=>{if(!np&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){U(this,md)||this.setEventListener(U(this,Cg))}onUnsubscribe(){var e;this.hasListeners()||((e=U(this,md))==null||e.call(this),Ve(this,md,void 0))}setEventListener(e){var n;Ve(this,Cg,e),(n=U(this,md))==null||n.call(this),Ve(this,md,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){U(this,Oh)!==e&&(Ve(this,Oh,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof U(this,Oh)=="boolean"?U(this,Oh):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Oh=new WeakMap,md=new WeakMap,Cg=new WeakMap,gY),SL=new TNe,Ng,gd,_g,yY,kNe=(yY=class extends Zy{constructor(){super();ft(this,Ng,!0);ft(this,gd);ft(this,_g);Ve(this,_g,e=>{if(!np&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){U(this,gd)||this.setEventListener(U(this,_g))}onUnsubscribe(){var e;this.hasListeners()||((e=U(this,gd))==null||e.call(this),Ve(this,gd,void 0))}setEventListener(e){var n;Ve(this,_g,e),(n=U(this,gd))==null||n.call(this),Ve(this,gd,e(this.setOnline.bind(this)))}setOnline(e){U(this,Ng)!==e&&(Ve(this,Ng,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return U(this,Ng)}},Ng=new WeakMap,gd=new WeakMap,_g=new WeakMap,yY),gN=new kNe;function $R(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function ENe(t){return Math.min(1e3*2**t,3e4)}function Tne(t){return(t??"online")==="online"?gN.isOnline():!0}var kne=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function EI(t){return t instanceof kne}function Ene(t){let e=!1,n=0,r=!1,s;const i=$R(),o=g=>{var y;r||(h(new kne(g)),(y=t.abort)==null||y.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>SL.isFocused()&&(t.networkMode==="always"||gN.isOnline())&&t.canRun(),u=()=>Tne(t.networkMode)&&t.canRun(),d=g=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,g),s==null||s(),i.reject(g))},p=()=>new Promise(g=>{var y;s=v=>{(r||c())&&g(v)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),m=()=>{if(r)return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(d).catch(v=>{var C;if(r)return;const x=t.retry??(np?0:3),b=t.retryDelay??ENe,S=typeof b=="function"?b(n,v):b,w=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,v);if(e||!w){h(v);return}n++,(C=t.onFail)==null||C.call(t,n,v),CNe(S).then(()=>c()?void 0:p()).then(()=>{e?h(v):m()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?m():p().then(m),i)}}function $Ne(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var es=$Ne(),Ph,vY,$ne=(vY=class{constructor(){ft(this,Ph)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),TR(this.gcTime)&&Ve(this,Ph,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(np?1/0:5*60*1e3))}clearGcTimeout(){U(this,Ph)&&(clearTimeout(U(this,Ph)),Ve(this,Ph,void 0))}},Ph=new WeakMap,vY),Tg,kg,ta,Rh,Gs,w1,Dh,qa,qc,xY,ANe=(xY=class extends $ne{constructor(e){super();ft(this,qa);ft(this,Tg);ft(this,kg);ft(this,ta);ft(this,Rh);ft(this,Gs);ft(this,w1);ft(this,Dh);Ve(this,Dh,!1),Ve(this,w1,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ve(this,Rh,e.client),Ve(this,ta,U(this,Rh).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ve(this,Tg,INe(this.options)),this.state=e.state??U(this,Tg),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=U(this,Gs))==null?void 0:e.promise}setOptions(e){this.options={...U(this,w1),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&U(this,ta).remove(this)}setData(e,n){const r=ER(this.state.data,e,this.options);return Lt(this,qa,qc).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Lt(this,qa,qc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=U(this,Gs))==null?void 0:r.promise;return(s=U(this,Gs))==null||s.cancel(e),n?n.then(na).catch(na):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(U(this,Tg))}isActive(){return this.observers.some(e=>el(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===wL||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Cne(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=U(this,Gs))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=U(this,Gs))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),U(this,ta).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(U(this,Gs)&&(U(this,Dh)?U(this,Gs).cancel({revert:!0}):U(this,Gs).cancelRetry()),this.scheduleGc()),U(this,ta).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Lt(this,qa,qc).call(this,{type:"invalidate"})}fetch(e,n){var l,c,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(U(this,Gs))return U(this,Gs).continueRetry(),U(this,Gs).promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(h=>h.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,s=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(Ve(this,Dh,!0),r.signal)})},i=()=>{const d=_ne(this.options,n),h={client:U(this,Rh),queryKey:this.queryKey,meta:this.meta};return s(h),Ve(this,Dh,!1),this.options.persister?this.options.persister(d,h,this):d(h)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:U(this,Rh),state:this.state,fetchFn:i};s(o),(l=this.options.behavior)==null||l.onFetch(o,this),Ve(this,kg,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=o.fetchOptions)==null?void 0:c.meta))&&Lt(this,qa,qc).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const a=d=>{var h,p,m,g;EI(d)&&d.silent||Lt(this,qa,qc).call(this,{type:"error",error:d}),EI(d)||((p=(h=U(this,ta).config).onError)==null||p.call(h,d,this),(g=(m=U(this,ta).config).onSettled)==null||g.call(m,this.state.data,d,this)),this.scheduleGc()};return Ve(this,Gs,Ene({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:d=>{var h,p,m,g;if(d===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(y){a(y);return}(p=(h=U(this,ta).config).onSuccess)==null||p.call(h,d,this),(g=(m=U(this,ta).config).onSettled)==null||g.call(m,d,this.state.error,this),this.scheduleGc()},onError:a,onFail:(d,h)=>{Lt(this,qa,qc).call(this,{type:"failed",failureCount:d,error:h})},onPause:()=>{Lt(this,qa,qc).call(this,{type:"pause"})},onContinue:()=>{Lt(this,qa,qc).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),U(this,Gs).start()}},Tg=new WeakMap,kg=new WeakMap,ta=new WeakMap,Rh=new WeakMap,Gs=new WeakMap,w1=new WeakMap,Dh=new WeakMap,qa=new WeakSet,qc=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Ane(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return EI(s)&&s.revert&&U(this,kg)?{...U(this,kg),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),es.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),U(this,ta).notify({query:this,type:"updated",action:e})})},xY);function Ane(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Tne(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function INe(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Wl,bY,ONe=(bY=class extends Zy{constructor(e={}){super();ft(this,Wl);this.config=e,Ve(this,Wl,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??bL(s,n);let o=this.get(i);return o||(o=new ANe({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){U(this,Wl).has(e.queryHash)||(U(this,Wl).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=U(this,Wl).get(e.queryHash);n&&(e.destroy(),n===e&&U(this,Wl).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){es.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return U(this,Wl).get(e)}getAll(){return[...U(this,Wl).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>jW(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>jW(e,r)):n}notify(e){es.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){es.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){es.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Wl=new WeakMap,bY),Ul,pi,jh,Gl,rd,wY,PNe=(wY=class extends $ne{constructor(e){super();ft(this,Gl);ft(this,Ul);ft(this,pi);ft(this,jh);this.mutationId=e.mutationId,Ve(this,pi,e.mutationCache),Ve(this,Ul,[]),this.state=e.state||Ine(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){U(this,Ul).includes(e)||(U(this,Ul).push(e),this.clearGcTimeout(),U(this,pi).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ve(this,Ul,U(this,Ul).filter(n=>n!==e)),this.scheduleGc(),U(this,pi).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){U(this,Ul).length||(this.state.status==="pending"?this.scheduleGc():U(this,pi).remove(this))}continue(){var e;return((e=U(this,jh))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,i,o,a,l,c,u,d,h,p,m,g,y,v,x,b,S,w,C,_;Ve(this,jh,Ene({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(T,k)=>{Lt(this,Gl,rd).call(this,{type:"failed",failureCount:T,error:k})},onPause:()=>{Lt(this,Gl,rd).call(this,{type:"pause"})},onContinue:()=>{Lt(this,Gl,rd).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>U(this,pi).canRun(this)}));const n=this.state.status==="pending",r=!U(this,jh).canStart();try{if(!n){Lt(this,Gl,rd).call(this,{type:"pending",variables:e,isPaused:r}),await((i=(s=U(this,pi).config).onMutate)==null?void 0:i.call(s,e,this));const k=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e));k!==this.state.context&&Lt(this,Gl,rd).call(this,{type:"pending",context:k,variables:e,isPaused:r})}const T=await U(this,jh).start();return await((c=(l=U(this,pi).config).onSuccess)==null?void 0:c.call(l,T,e,this.state.context,this)),await((d=(u=this.options).onSuccess)==null?void 0:d.call(u,T,e,this.state.context)),await((p=(h=U(this,pi).config).onSettled)==null?void 0:p.call(h,T,null,this.state.variables,this.state.context,this)),await((g=(m=this.options).onSettled)==null?void 0:g.call(m,T,null,e,this.state.context)),Lt(this,Gl,rd).call(this,{type:"success",data:T}),T}catch(T){try{throw await((v=(y=U(this,pi).config).onError)==null?void 0:v.call(y,T,e,this.state.context,this)),await((b=(x=this.options).onError)==null?void 0:b.call(x,T,e,this.state.context)),await((w=(S=U(this,pi).config).onSettled)==null?void 0:w.call(S,void 0,T,this.state.variables,this.state.context,this)),await((_=(C=this.options).onSettled)==null?void 0:_.call(C,void 0,T,e,this.state.context)),T}finally{Lt(this,Gl,rd).call(this,{type:"error",error:T})}}finally{U(this,pi).runNext(this)}}},Ul=new WeakMap,pi=new WeakMap,jh=new WeakMap,Gl=new WeakSet,rd=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),es.batch(()=>{U(this,Ul).forEach(r=>{r.onMutationUpdate(e)}),U(this,pi).notify({mutation:this,type:"updated",action:e})})},wY);function Ine(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var tu,Ka,S1,SY,RNe=(SY=class extends Zy{constructor(e={}){super();ft(this,tu);ft(this,Ka);ft(this,S1);this.config=e,Ve(this,tu,new Set),Ve(this,Ka,new Map),Ve(this,S1,0)}build(e,n,r){const s=new PNe({mutationCache:this,mutationId:++zS(this,S1)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){U(this,tu).add(e);const n=iC(e);if(typeof n=="string"){const r=U(this,Ka).get(n);r?r.push(e):U(this,Ka).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(U(this,tu).delete(e)){const n=iC(e);if(typeof n=="string"){const r=U(this,Ka).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&U(this,Ka).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=iC(e);if(typeof n=="string"){const r=U(this,Ka).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=iC(e);if(typeof n=="string"){const s=(r=U(this,Ka).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){es.batch(()=>{U(this,tu).forEach(e=>{this.notify({type:"removed",mutation:e})}),U(this,tu).clear(),U(this,Ka).clear()})}getAll(){return Array.from(U(this,tu))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>MW(n,r))}findAll(e={}){return this.getAll().filter(n=>MW(e,n))}notify(e){es.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return es.batch(()=>Promise.all(e.map(n=>n.continue().catch(na))))}},tu=new WeakMap,Ka=new WeakMap,S1=new WeakMap,SY);function iC(t){var e;return(e=t.options.scope)==null?void 0:e.id}function BW(t){return{onFetch:(e,n)=>{var u,d,h,p,m;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},v=_ne(e.options,e.fetchOptions),x=async(b,S,w)=>{if(g)return Promise.reject();if(S==null&&b.pages.length)return Promise.resolve(b);const C={client:e.client,queryKey:e.queryKey,pageParam:S,direction:w?"backward":"forward",meta:e.options.meta};y(C);const _=await v(C),{maxPages:T}=e.options,k=w?_Ne:NNe;return{pages:k(b.pages,_,T),pageParams:k(b.pageParams,S,T)}};if(s&&i.length){const b=s==="backward",S=b?DNe:zW,w={pages:i,pageParams:o},C=S(r,w);a=await x(w,C,b)}else{const b=t??i.length;do{const S=l===0?o[0]??r.initialPageParam:zW(r,a);if(l>0&&S==null)break;a=await x(a,S),l++}while(l<b)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function zW(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function DNe(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var yr,yd,vd,Eg,$g,xd,Ag,Ig,CY,jNe=(CY=class{constructor(t={}){ft(this,yr);ft(this,yd);ft(this,vd);ft(this,Eg);ft(this,$g);ft(this,xd);ft(this,Ag);ft(this,Ig);Ve(this,yr,t.queryCache||new ONe),Ve(this,yd,t.mutationCache||new RNe),Ve(this,vd,t.defaultOptions||{}),Ve(this,Eg,new Map),Ve(this,$g,new Map),Ve(this,xd,0)}mount(){zS(this,xd)._++,U(this,xd)===1&&(Ve(this,Ag,SL.subscribe(async t=>{t&&(await this.resumePausedMutations(),U(this,yr).onFocus())})),Ve(this,Ig,gN.subscribe(async t=>{t&&(await this.resumePausedMutations(),U(this,yr).onOnline())})))}unmount(){var t,e;zS(this,xd)._--,U(this,xd)===0&&((t=U(this,Ag))==null||t.call(this),Ve(this,Ag,void 0),(e=U(this,Ig))==null||e.call(this),Ve(this,Ig,void 0))}isFetching(t){return U(this,yr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return U(this,yd).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=U(this,yr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=U(this,yr).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(sg(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return U(this,yr).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=U(this,yr).get(r.queryHash),i=s==null?void 0:s.state.data,o=SNe(e,i);if(o!==void 0)return U(this,yr).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return es.batch(()=>U(this,yr).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=U(this,yr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=U(this,yr);es.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=U(this,yr);return es.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=es.batch(()=>U(this,yr).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(na).catch(na)}invalidateQueries(t,e={}){return es.batch(()=>(U(this,yr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=es.batch(()=>U(this,yr).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(na)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(na)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=U(this,yr).build(this,e);return n.isStaleByTime(sg(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(na).catch(na)}fetchInfiniteQuery(t){return t.behavior=BW(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(na).catch(na)}ensureInfiniteQueryData(t){return t.behavior=BW(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return gN.isOnline()?U(this,yd).resumePausedMutations():Promise.resolve()}getQueryCache(){return U(this,yr)}getMutationCache(){return U(this,yd)}getDefaultOptions(){return U(this,vd)}setDefaultOptions(t){Ve(this,vd,t)}setQueryDefaults(t,e){U(this,Eg).set(rp(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...U(this,Eg).values()],n={};return e.forEach(r=>{X0(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){U(this,$g).set(rp(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...U(this,$g).values()],n={};return e.forEach(r=>{X0(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...U(this,vd).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=bL(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===wL&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...U(this,vd).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){U(this,yr).clear(),U(this,yd).clear()}},yr=new WeakMap,yd=new WeakMap,vd=new WeakMap,Eg=new WeakMap,$g=new WeakMap,xd=new WeakMap,Ag=new WeakMap,Ig=new WeakMap,CY),zi,Xt,C1,mi,Mh,Og,bd,Hl,N1,Pg,Rg,Fh,Lh,wd,Dg,yn,zx,AR,IR,OR,PR,RR,DR,jR,One,NY,MNe=(NY=class extends Zy{constructor(e,n){super();ft(this,yn);ft(this,zi);ft(this,Xt);ft(this,C1);ft(this,mi);ft(this,Mh);ft(this,Og);ft(this,bd);ft(this,Hl);ft(this,N1);ft(this,Pg);ft(this,Rg);ft(this,Fh);ft(this,Lh);ft(this,wd);ft(this,Dg,new Set);this.options=n,Ve(this,zi,e),Ve(this,Hl,null),Ve(this,bd,$R()),this.options.experimental_prefetchInRender||U(this,bd).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(U(this,Xt).addObserver(this),VW(U(this,Xt),this.options)?Lt(this,yn,zx).call(this):this.updateResult(),Lt(this,yn,PR).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return MR(U(this,Xt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return MR(U(this,Xt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Lt(this,yn,RR).call(this),Lt(this,yn,DR).call(this),U(this,Xt).removeObserver(this)}setOptions(e,n){const r=this.options,s=U(this,Xt);if(this.options=U(this,zi).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof el(this.options.enabled,U(this,Xt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Lt(this,yn,jR).call(this),U(this,Xt).setOptions(this.options),r._defaulted&&!mN(this.options,r)&&U(this,zi).getQueryCache().notify({type:"observerOptionsUpdated",query:U(this,Xt),observer:this});const i=this.hasListeners();i&&WW(U(this,Xt),s,this.options,r)&&Lt(this,yn,zx).call(this),this.updateResult(n),i&&(U(this,Xt)!==s||el(this.options.enabled,U(this,Xt))!==el(r.enabled,U(this,Xt))||sg(this.options.staleTime,U(this,Xt))!==sg(r.staleTime,U(this,Xt)))&&Lt(this,yn,AR).call(this);const o=Lt(this,yn,IR).call(this);i&&(U(this,Xt)!==s||el(this.options.enabled,U(this,Xt))!==el(r.enabled,U(this,Xt))||o!==U(this,wd))&&Lt(this,yn,OR).call(this,o)}getOptimisticResult(e){const n=U(this,zi).getQueryCache().build(U(this,zi),e),r=this.createResult(n,e);return LNe(this,r)&&(Ve(this,mi,r),Ve(this,Og,this.options),Ve(this,Mh,U(this,Xt).state)),r}getCurrentResult(){return U(this,mi)}trackResult(e,n){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),n==null||n(s),e[s])})}),r}trackProp(e){U(this,Dg).add(e)}getCurrentQuery(){return U(this,Xt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=U(this,zi).defaultQueryOptions(e),r=U(this,zi).getQueryCache().build(U(this,zi),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Lt(this,yn,zx).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),U(this,mi)))}createResult(e,n){var T;const r=U(this,Xt),s=this.options,i=U(this,mi),o=U(this,Mh),a=U(this,Og),c=e!==r?e.state:U(this,C1),{state:u}=e;let d={...u},h=!1,p;if(n._optimisticResults){const k=this.hasListeners(),$=!k&&VW(e,n),O=k&&WW(e,r,n,s);($||O)&&(d={...d,...Ane(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:y}=d;if(n.select&&d.data!==void 0)if(i&&d.data===(o==null?void 0:o.data)&&n.select===U(this,N1))p=U(this,Pg);else try{Ve(this,N1,n.select),p=n.select(d.data),p=ER(i==null?void 0:i.data,p,n),Ve(this,Pg,p),Ve(this,Hl,null)}catch(k){Ve(this,Hl,k)}else p=d.data;if(n.placeholderData!==void 0&&p===void 0&&y==="pending"){let k;if(i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))k=i.data;else if(k=typeof n.placeholderData=="function"?n.placeholderData((T=U(this,Rg))==null?void 0:T.state.data,U(this,Rg)):n.placeholderData,n.select&&k!==void 0)try{k=n.select(k),Ve(this,Hl,null)}catch($){Ve(this,Hl,$)}k!==void 0&&(y="success",p=ER(i==null?void 0:i.data,k,n),h=!0)}U(this,Hl)&&(m=U(this,Hl),p=U(this,Pg),g=Date.now(),y="error");const v=d.fetchStatus==="fetching",x=y==="pending",b=y==="error",S=x&&v,w=p!==void 0,_={status:y,fetchStatus:d.fetchStatus,isPending:x,isSuccess:y==="success",isError:b,isInitialLoading:S,isLoading:S,data:p,dataUpdatedAt:d.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:v,isRefetching:v&&!x,isLoadingError:b&&!w,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:b&&w,isStale:CL(e,n),refetch:this.refetch,promise:U(this,bd)};if(this.options.experimental_prefetchInRender){const k=P=>{_.status==="error"?P.reject(_.error):_.data!==void 0&&P.resolve(_.data)},$=()=>{const P=Ve(this,bd,_.promise=$R());k(P)},O=U(this,bd);switch(O.status){case"pending":e.queryHash===r.queryHash&&k(O);break;case"fulfilled":(_.status==="error"||_.data!==O.value)&&$();break;case"rejected":(_.status!=="error"||_.error!==O.reason)&&$();break}}return _}updateResult(e){const n=U(this,mi),r=this.createResult(U(this,Xt),this.options);if(Ve(this,Mh,U(this,Xt).state),Ve(this,Og,this.options),U(this,Mh).data!==void 0&&Ve(this,Rg,U(this,Xt)),mN(r,n))return;Ve(this,mi,r);const s={},i=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!U(this,Dg).size)return!0;const l=new Set(a??U(this,Dg));return this.options.throwOnError&&l.add("error"),Object.keys(U(this,mi)).some(c=>{const u=c;return U(this,mi)[u]!==n[u]&&l.has(u)})};(e==null?void 0:e.listeners)!==!1&&i()&&(s.listeners=!0),Lt(this,yn,One).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Lt(this,yn,PR).call(this)}},zi=new WeakMap,Xt=new WeakMap,C1=new WeakMap,mi=new WeakMap,Mh=new WeakMap,Og=new WeakMap,bd=new WeakMap,Hl=new WeakMap,N1=new WeakMap,Pg=new WeakMap,Rg=new WeakMap,Fh=new WeakMap,Lh=new WeakMap,wd=new WeakMap,Dg=new WeakMap,yn=new WeakSet,zx=function(e){Lt(this,yn,jR).call(this);let n=U(this,Xt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(na)),n},AR=function(){Lt(this,yn,RR).call(this);const e=sg(this.options.staleTime,U(this,Xt));if(np||U(this,mi).isStale||!TR(e))return;const r=Cne(U(this,mi).dataUpdatedAt,e)+1;Ve(this,Fh,setTimeout(()=>{U(this,mi).isStale||this.updateResult()},r))},IR=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(U(this,Xt)):this.options.refetchInterval)??!1},OR=function(e){Lt(this,yn,DR).call(this),Ve(this,wd,e),!(np||el(this.options.enabled,U(this,Xt))===!1||!TR(U(this,wd))||U(this,wd)===0)&&Ve(this,Lh,setInterval(()=>{(this.options.refetchIntervalInBackground||SL.isFocused())&&Lt(this,yn,zx).call(this)},U(this,wd)))},PR=function(){Lt(this,yn,AR).call(this),Lt(this,yn,OR).call(this,Lt(this,yn,IR).call(this))},RR=function(){U(this,Fh)&&(clearTimeout(U(this,Fh)),Ve(this,Fh,void 0))},DR=function(){U(this,Lh)&&(clearInterval(U(this,Lh)),Ve(this,Lh,void 0))},jR=function(){const e=U(this,zi).getQueryCache().build(U(this,zi),this.options);if(e===U(this,Xt))return;const n=U(this,Xt);Ve(this,Xt,e),Ve(this,C1,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},One=function(e){es.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(U(this,mi))}),U(this,zi).getQueryCache().notify({query:U(this,Xt),type:"observerResultsUpdated"})})},NY);function FNe(t,e){return el(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function VW(t,e){return FNe(t,e)||t.state.data!==void 0&&MR(t,e,e.refetchOnMount)}function MR(t,e,n){if(el(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&CL(t,e)}return!1}function WW(t,e,n,r){return(t!==e||el(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&CL(t,n)}function CL(t,e){return el(e.enabled,t)!==!1&&t.isStaleByTime(sg(e.staleTime,t))}function LNe(t,e){return!mN(t.getCurrentResult(),e)}var Sd,Cd,Vi,nu,wu,v2,FR,_Y,BNe=(_Y=class extends Zy{constructor(n,r){super();ft(this,wu);ft(this,Sd);ft(this,Cd);ft(this,Vi);ft(this,nu);Ve(this,Sd,n),this.setOptions(r),this.bindMethods(),Lt(this,wu,v2).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=U(this,Sd).defaultMutationOptions(n),mN(this.options,r)||U(this,Sd).getMutationCache().notify({type:"observerOptionsUpdated",mutation:U(this,Vi),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&rp(r.mutationKey)!==rp(this.options.mutationKey)?this.reset():((s=U(this,Vi))==null?void 0:s.state.status)==="pending"&&U(this,Vi).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=U(this,Vi))==null||n.removeObserver(this)}onMutationUpdate(n){Lt(this,wu,v2).call(this),Lt(this,wu,FR).call(this,n)}getCurrentResult(){return U(this,Cd)}reset(){var n;(n=U(this,Vi))==null||n.removeObserver(this),Ve(this,Vi,void 0),Lt(this,wu,v2).call(this),Lt(this,wu,FR).call(this)}mutate(n,r){var s;return Ve(this,nu,r),(s=U(this,Vi))==null||s.removeObserver(this),Ve(this,Vi,U(this,Sd).getMutationCache().build(U(this,Sd),this.options)),U(this,Vi).addObserver(this),U(this,Vi).execute(n)}},Sd=new WeakMap,Cd=new WeakMap,Vi=new WeakMap,nu=new WeakMap,wu=new WeakSet,v2=function(){var r;const n=((r=U(this,Vi))==null?void 0:r.state)??Ine();Ve(this,Cd,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},FR=function(n){es.batch(()=>{var r,s,i,o,a,l,c,u;if(U(this,nu)&&this.hasListeners()){const d=U(this,Cd).variables,h=U(this,Cd).context;(n==null?void 0:n.type)==="success"?((s=(r=U(this,nu)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=U(this,nu)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((l=(a=U(this,nu)).onError)==null||l.call(a,n.error,d,h),(u=(c=U(this,nu)).onSettled)==null||u.call(c,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(U(this,Cd))})})},_Y),Pne=N.createContext(void 0),A1=t=>{const e=N.useContext(Pne);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},zNe=({client:t,children:e})=>(N.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),f.jsx(Pne.Provider,{value:t,children:e})),Rne=N.createContext(!1),VNe=()=>N.useContext(Rne);Rne.Provider;function WNe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var UNe=N.createContext(WNe()),GNe=()=>N.useContext(UNe);function Dne(t,e){return typeof t=="function"?t(...e):!!t}function LR(){}var HNe=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},qNe=t=>{N.useEffect(()=>{t.clearReset()},[t])},KNe=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||Dne(n,[t.error,r])),XNe=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...n)=>Math.max(e(...n),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},YNe=(t,e)=>t.isLoading&&t.isFetching&&!e,QNe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,UW=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function ZNe(t,e,n){var d,h,p,m,g;const r=A1(),s=VNe(),i=GNe(),o=r.defaultQueryOptions(t);(h=(d=r.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=s?"isRestoring":"optimistic",XNe(o),HNe(o,i),qNe(i);const a=!r.getQueryCache().get(o.queryHash),[l]=N.useState(()=>new e(r,o)),c=l.getOptimisticResult(o),u=!s&&t.subscribed!==!1;if(N.useSyncExternalStore(N.useCallback(y=>{const v=u?l.subscribe(es.batchCalls(y)):LR;return l.updateResult(),v},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),N.useEffect(()=>{l.setOptions(o,{listeners:!1})},[o,l]),QNe(o,c))throw UW(o,l,i);if(KNe({result:c,errorResetBoundary:i,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((m=(p=r.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||m.call(p,o,c),o.experimental_prefetchInRender&&!np&&YNe(c,s)){const y=a?UW(o,l,i):(g=r.getQueryCache().get(o.queryHash))==null?void 0:g.promise;y==null||y.catch(LR).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function qt(t,e){return ZNe(t,MNe)}function Vr(t,e){const n=A1(),[r]=N.useState(()=>new BNe(n,t));N.useEffect(()=>{r.setOptions(t)},[r,t]);const s=N.useSyncExternalStore(N.useCallback(o=>r.subscribe(es.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=N.useCallback((o,a)=>{r.mutate(o,a).catch(LR)},[r]);if(s.error&&Dne(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function JNe(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],a="",l=t.split("/");for(l[0]||l.shift();s=l.shift();)n=s[0],n==="*"?(o.push(n),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),a+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~r?"?":"")+"\\"+s.substring(i))):a+="/"+s;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var jne={exports:{}},Mne={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg=N;function e_e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var t_e=typeof Object.is=="function"?Object.is:e_e,n_e=Wg.useState,r_e=Wg.useEffect,s_e=Wg.useLayoutEffect,i_e=Wg.useDebugValue;function o_e(t,e){var n=e(),r=n_e({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return s_e(function(){s.value=n,s.getSnapshot=e,$I(s)&&i({inst:s})},[t,n,e]),r_e(function(){return $I(s)&&i({inst:s}),t(function(){$I(s)&&i({inst:s})})},[t]),i_e(n),n}function $I(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!t_e(t,n)}catch{return!0}}function a_e(t,e){return e()}var l_e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?a_e:o_e;Mne.useSyncExternalStore=Wg.useSyncExternalStore!==void 0?Wg.useSyncExternalStore:l_e;jne.exports=Mne;var c_e=jne.exports;const u_e=xee.useInsertionEffect,d_e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Fne=d_e?N.useLayoutEffect:N.useEffect,f_e=u_e||Fne,NL=t=>{const e=N.useRef([t,(...n)=>e[0](...n)]).current;return f_e(()=>{e[0]=t}),e[1]},h_e="popstate",_L="pushState",TL="replaceState",p_e="hashchange",GW=[h_e,_L,TL,p_e],m_e=t=>{for(const e of GW)addEventListener(e,t);return()=>{for(const e of GW)removeEventListener(e,t)}},Lne=(t,e)=>c_e.useSyncExternalStore(m_e,t,e),g_e=()=>location.search,y_e=({ssrSearch:t=""}={})=>Lne(g_e,()=>t),HW=()=>location.pathname,v_e=({ssrPath:t}={})=>Lne(HW,t?()=>t:HW),x_e=(t,{replace:e=!1,state:n=null}={})=>history[e?TL:_L](n,"",t),b_e=(t={})=>[v_e(t),x_e],qW=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[qW]>"u"){for(const t of[_L,TL]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,qW,{value:!0})}const w_e=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",Bne=(t="")=>t==="/"?"":t,S_e=(t,e)=>t[0]==="~"?t.slice(1):Bne(e)+t,C_e=(t="",e)=>w_e(KW(Bne(t)),KW(e)),KW=t=>{try{return decodeURI(t)}catch{return t}},zne={hook:b_e,searchHook:y_e,parser:JNe,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},Vne=N.createContext(zne),Jy=()=>N.useContext(Vne),Wne={},Une=N.createContext(Wne),Gne=()=>N.useContext(Une),I1=t=>{const[e,n]=t.hook(t);return[C_e(t.base,e),NL((r,s)=>n(S_e(r,t.base),s))]},kL=()=>I1(Jy()),Hne=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[a,...l]=o;return a!==void 0?[!0,(()=>{const c=i!==!1?Object.fromEntries(i.map((d,h)=>[d,l[h]])):o.groups;let u={...l};return c&&Object.assign(u,c),u})(),...r?[a]:[]]:[!1,null]},N_e=({children:t,...e})=>{var u,d;const n=Jy(),r=e.hook?zne:n;let s=r;const[i,o]=((u=e.ssrPath)==null?void 0:u.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((d=e.hook)==null?void 0:d.hrefs);let a=N.useRef({}),l=a.current,c=l;for(let h in r){const p=h==="base"?r[h]+(e[h]||""):e[h]||r[h];l===c&&p!==c[h]&&(a.current=c={...c}),c[h]=p,p!==r[h]&&(s=c)}return N.createElement(Vne.Provider,{value:s,children:t})},XW=({children:t,component:e},n)=>e?N.createElement(e,{params:n}):typeof t=="function"?t(n):t,__e=t=>{let e=N.useRef(Wne);const n=e.current;return e.current=Object.keys(t).length!==Object.keys(n).length||Object.entries(t).some(([r,s])=>s!==n[r])?t:n},yN=({path:t,nest:e,match:n,...r})=>{const s=Jy(),[i]=I1(s),[o,a,l]=n??Hne(s.parser,t,i,e),c=__e({...Gne(),...a});if(!o)return null;const u=l?N.createElement(N_e,{base:l},XW(r,c)):XW(r,c);return N.createElement(Une.Provider,{value:c,children:u})},EL=N.forwardRef((t,e)=>{const n=Jy(),[r,s]=I1(n),{to:i="",href:o=i,onClick:a,asChild:l,children:c,className:u,replace:d,state:h,...p}=t,m=NL(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(a==null||a(y),y.defaultPrevented||(y.preventDefault(),s(o,t)))}),g=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return l&&N.isValidElement(c)?N.cloneElement(c,{onClick:m,href:g}):N.createElement("a",{...p,onClick:m,href:g,className:u!=null&&u.call?u(r===o):u,children:c,ref:e})}),qne=t=>Array.isArray(t)?t.flatMap(e=>qne(e&&e.type===N.Fragment?e.props.children:e)):[t],T_e=({children:t,location:e})=>{const n=Jy(),[r]=I1(n);for(const s of qne(t)){let i=0;if(N.isValidElement(s)&&(i=Hne(n.parser,s.props.path,e||r,s.props.nest))[0])return N.cloneElement(s,{match:i})}return null},k_e=t=>{const{to:e,href:n=e}=t,r=Jy(),[,s]=I1(r),i=NL(()=>s(e||n,t)),{ssrContext:o}=r;return Fne(()=>{i()},[]),o&&(o.redirectTo=e),null};async function Kne(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function wr(t,e,n){const r=await fetch(e,{method:t,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0,credentials:"include"});return await Kne(r),r}const Xne=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e[0],{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await Kne(n),await n.json())},ms=new jNe({defaultOptions:{queries:{queryFn:Xne({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),E_e=1,$_e=1e6;let AI=0;function A_e(){return AI=(AI+1)%Number.MAX_SAFE_INTEGER,AI.toString()}const II=new Map,YW=t=>{if(II.has(t))return;const e=setTimeout(()=>{II.delete(t),h0({type:"REMOVE_TOAST",toastId:t})},$_e);II.set(t,e)},I_e=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,E_e)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?YW(n):t.toasts.forEach(r=>{YW(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},x2=[];let b2={toasts:[]};function h0(t){b2=I_e(b2,t),x2.forEach(e=>{e(b2)})}function O_e({...t}){const e=A_e(),n=s=>h0({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>h0({type:"DISMISS_TOAST",toastId:e});return h0({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function cs(){const[t,e]=N.useState(b2);return N.useEffect(()=>(x2.push(e),()=>{const n=x2.indexOf(e);n>-1&&x2.splice(n,1)}),[t]),{...t,toast:O_e,dismiss:n=>h0({type:"DISMISS_TOAST",toastId:n})}}function Ie(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function P_e(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function dk(...t){return e=>t.forEach(n=>P_e(n,e))}function Gt(...t){return N.useCallback(dk(...t),t)}function R_e(t,e=[]){let n=[];function r(i,o){const a=N.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:h,children:p,...m}=d,g=(h==null?void 0:h[t][l])||a,y=N.useMemo(()=>m,Object.values(m));return f.jsx(g.Provider,{value:y,children:p})}function u(d,h){const p=(h==null?void 0:h[t][l])||a,m=N.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=n.map(o=>N.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return N.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,D_e(s,...e)]}function D_e(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Ii=N.forwardRef((t,e)=>{const{children:n,...r}=t,s=N.Children.toArray(n),i=s.find(j_e);if(i){const o=i.props.children,a=s.map(l=>l===i?N.Children.count(o)>1?N.Children.only(null):N.isValidElement(o)?o.props.children:null:l);return f.jsx(BR,{...r,ref:e,children:N.isValidElement(o)?N.cloneElement(o,void 0,a):null})}return f.jsx(BR,{...r,ref:e,children:n})});Ii.displayName="Slot";var BR=N.forwardRef((t,e)=>{const{children:n,...r}=t;if(N.isValidElement(n)){const s=F_e(n);return N.cloneElement(n,{...M_e(r,n.props),ref:e?dk(e,s):s})}return N.Children.count(n)>1?N.Children.only(null):null});BR.displayName="SlotClone";var $L=({children:t})=>f.jsx(f.Fragment,{children:t});function j_e(t){return N.isValidElement(t)&&t.type===$L}function M_e(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function F_e(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function O1(t){const e=t+"CollectionProvider",[n,r]=R_e(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:m,children:g}=p,y=F.useRef(null),v=F.useRef(new Map).current;return f.jsx(s,{scope:m,itemMap:v,collectionRef:y,children:g})};o.displayName=e;const a=t+"CollectionSlot",l=F.forwardRef((p,m)=>{const{scope:g,children:y}=p,v=i(a,g),x=Gt(m,v.collectionRef);return f.jsx(Ii,{ref:x,children:y})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=F.forwardRef((p,m)=>{const{scope:g,children:y,...v}=p,x=F.useRef(null),b=Gt(m,x),S=i(c,g);return F.useEffect(()=>(S.itemMap.set(x,{ref:x,...v}),()=>void S.itemMap.delete(x))),f.jsx(Ii,{[u]:"",ref:b,children:y})});d.displayName=c;function h(p){const m=i(t+"CollectionConsumer",p);return F.useCallback(()=>{const y=m.collectionRef.current;if(!y)return[];const v=Array.from(y.querySelectorAll(`[${u}]`));return Array.from(m.itemMap.values()).sort((S,w)=>v.indexOf(S.ref.current)-v.indexOf(w.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},h,r]}function L_e(t,e){const n=N.createContext(e),r=i=>{const{children:o,...a}=i,l=N.useMemo(()=>a,Object.values(a));return f.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=N.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function $l(t,e=[]){let n=[];function r(i,o){const a=N.createContext(o),l=n.length;n=[...n,o];const c=d=>{var v;const{scope:h,children:p,...m}=d,g=((v=h==null?void 0:h[t])==null?void 0:v[l])||a,y=N.useMemo(()=>m,Object.values(m));return f.jsx(g.Provider,{value:y,children:p})};c.displayName=i+"Provider";function u(d,h){var g;const p=((g=h==null?void 0:h[t])==null?void 0:g[l])||a,m=N.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=n.map(o=>N.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return N.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,B_e(s,...e)]}function B_e(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var z_e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ct=z_e.reduce((t,e)=>{const n=N.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?Ii:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(a,{...o,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function AL(t,e){t&&Op.flushSync(()=>t.dispatchEvent(e))}function ci(t){const e=N.useRef(t);return N.useEffect(()=>{e.current=t}),N.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function V_e(t,e=globalThis==null?void 0:globalThis.document){const n=ci(t);N.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var W_e="DismissableLayer",zR="dismissableLayer.update",U_e="dismissableLayer.pointerDownOutside",G_e="dismissableLayer.focusOutside",QW,Yne=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Pp=N.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=N.useContext(Yne),[u,d]=N.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=N.useState({}),m=Gt(e,_=>d(_)),g=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(y),x=u?g.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,S=x>=v,w=q_e(_=>{const T=_.target,k=[...c.branches].some($=>$.contains(T));!S||k||(s==null||s(_),o==null||o(_),_.defaultPrevented||a==null||a())},h),C=K_e(_=>{const T=_.target;[...c.branches].some($=>$.contains(T))||(i==null||i(_),o==null||o(_),_.defaultPrevented||a==null||a())},h);return V_e(_=>{x===c.layers.size-1&&(r==null||r(_),!_.defaultPrevented&&a&&(_.preventDefault(),a()))},h),N.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(QW=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),ZW(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=QW)}},[u,h,n,c]),N.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),ZW())},[u,c]),N.useEffect(()=>{const _=()=>p({});return document.addEventListener(zR,_),()=>document.removeEventListener(zR,_)},[]),f.jsx(ct.div,{...l,ref:m,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:Ie(t.onFocusCapture,C.onFocusCapture),onBlurCapture:Ie(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Ie(t.onPointerDownCapture,w.onPointerDownCapture)})});Pp.displayName=W_e;var H_e="DismissableLayerBranch",Qne=N.forwardRef((t,e)=>{const n=N.useContext(Yne),r=N.useRef(null),s=Gt(e,r);return N.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),f.jsx(ct.div,{...t,ref:s})});Qne.displayName=H_e;function q_e(t,e=globalThis==null?void 0:globalThis.document){const n=ci(t),r=N.useRef(!1),s=N.useRef(()=>{});return N.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){Zne(U_e,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function K_e(t,e=globalThis==null?void 0:globalThis.document){const n=ci(t),r=N.useRef(!1);return N.useEffect(()=>{const s=i=>{i.target&&!r.current&&Zne(G_e,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ZW(){const t=new CustomEvent(zR);document.dispatchEvent(t)}function Zne(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?AL(s,i):s.dispatchEvent(i)}var X_e=Pp,Y_e=Qne,Rs=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},Q_e="Portal",ev=N.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=N.useState(!1);Rs(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?wNe.createPortal(f.jsx(ct.div,{...r,ref:e}),o):null});ev.displayName=Q_e;function Z_e(t,e){return N.useReducer((n,r)=>e[n][r]??n,t)}var co=t=>{const{present:e,children:n}=t,r=J_e(e),s=typeof n=="function"?n({present:r.isPresent}):N.Children.only(n),i=Gt(r.ref,eTe(s));return typeof n=="function"||r.isPresent?N.cloneElement(s,{ref:i}):null};co.displayName="Presence";function J_e(t){const[e,n]=N.useState(),r=N.useRef({}),s=N.useRef(t),i=N.useRef("none"),o=t?"mounted":"unmounted",[a,l]=Z_e(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const c=oC(r.current);i.current=a==="mounted"?c:"none"},[a]),Rs(()=>{const c=r.current,u=s.current;if(u!==t){const h=i.current,p=oC(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Rs(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const g=oC(r.current).includes(p.animationName);if(p.target===e&&g&&(l("ANIMATION_END"),!s.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},h=p=>{p.target===e&&(i.current=oC(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:N.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function oC(t){return(t==null?void 0:t.animationName)||"none"}function eTe(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function ka({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=tTe({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=ci(n),l=N.useCallback(c=>{if(i){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else s(c)},[i,t,s,a]);return[o,l]}function tTe({defaultProp:t,onChange:e}){const n=N.useState(t),[r]=n,s=N.useRef(r),i=ci(e);return N.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var nTe="VisuallyHidden",P1=N.forwardRef((t,e)=>f.jsx(ct.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));P1.displayName=nTe;var rTe=P1,IL="ToastProvider",[OL,sTe,iTe]=O1("Toast"),[Jne,O9t]=$l("Toast",[iTe]),[oTe,fk]=Jne(IL),ere=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=N.useState(null),[c,u]=N.useState(0),d=N.useRef(!1),h=N.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${IL}\`. Expected non-empty \`string\`.`),f.jsx(OL.Provider,{scope:e,children:f.jsx(oTe,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:N.useCallback(()=>u(p=>p+1),[]),onToastRemove:N.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:o})})};ere.displayName=IL;var tre="ToastViewport",aTe=["F8"],VR="toast.viewportPause",WR="toast.viewportResume",nre=N.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=aTe,label:s="Notifications ({hotkey})",...i}=t,o=fk(tre,n),a=sTe(n),l=N.useRef(null),c=N.useRef(null),u=N.useRef(null),d=N.useRef(null),h=Gt(e,d,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=o.toastCount>0;N.useEffect(()=>{const y=v=>{var b;r.length!==0&&r.every(S=>v[S]||v.code===S)&&((b=d.current)==null||b.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),N.useEffect(()=>{const y=l.current,v=d.current;if(m&&y&&v){const x=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(VR);v.dispatchEvent(C),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(WR);v.dispatchEvent(C),o.isClosePausedRef.current=!1}},S=C=>{!y.contains(C.relatedTarget)&&b()},w=()=>{y.contains(document.activeElement)||b()};return y.addEventListener("focusin",x),y.addEventListener("focusout",S),y.addEventListener("pointermove",x),y.addEventListener("pointerleave",w),window.addEventListener("blur",x),window.addEventListener("focus",b),()=>{y.removeEventListener("focusin",x),y.removeEventListener("focusout",S),y.removeEventListener("pointermove",x),y.removeEventListener("pointerleave",w),window.removeEventListener("blur",x),window.removeEventListener("focus",b)}}},[m,o.isClosePausedRef]);const g=N.useCallback(({tabbingDirection:y})=>{const x=a().map(b=>{const S=b.ref.current,w=[S,...bTe(S)];return y==="forwards"?w:w.reverse()});return(y==="forwards"?x.reverse():x).flat()},[a]);return N.useEffect(()=>{const y=d.current;if(y){const v=x=>{var w,C,_;const b=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!b){const T=document.activeElement,k=x.shiftKey;if(x.target===y&&k){(w=c.current)==null||w.focus();return}const P=g({tabbingDirection:k?"backwards":"forwards"}),D=P.findIndex(A=>A===T);OI(P.slice(D+1))?x.preventDefault():k?(C=c.current)==null||C.focus():(_=u.current)==null||_.focus()}};return y.addEventListener("keydown",v),()=>y.removeEventListener("keydown",v)}},[a,g]),f.jsxs(Y_e,{ref:l,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&f.jsx(UR,{ref:c,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});OI(y)}}),f.jsx(OL.Slot,{scope:n,children:f.jsx(ct.ol,{tabIndex:-1,...i,ref:h})}),m&&f.jsx(UR,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});OI(y)}})]})});nre.displayName=tre;var rre="ToastFocusProxy",UR=N.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=fk(rre,n);return f.jsx(P1,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});UR.displayName=rre;var hk="Toast",lTe="toast.swipeStart",cTe="toast.swipeMove",uTe="toast.swipeCancel",dTe="toast.swipeEnd",sre=N.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a=!0,l]=ka({prop:r,defaultProp:s,onChange:i});return f.jsx(co,{present:n||a,children:f.jsx(pTe,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:ci(t.onPause),onResume:ci(t.onResume),onSwipeStart:Ie(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ie(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:Ie(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ie(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});sre.displayName=hk;var[fTe,hTe]=Jne(hk,{onClose(){}}),pTe=N.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:p,...m}=t,g=fk(hk,n),[y,v]=N.useState(null),x=Gt(e,A=>v(A)),b=N.useRef(null),S=N.useRef(null),w=s||g.duration,C=N.useRef(0),_=N.useRef(w),T=N.useRef(0),{onToastAdd:k,onToastRemove:$}=g,O=ci(()=>{var I;(y==null?void 0:y.contains(document.activeElement))&&((I=g.viewport)==null||I.focus()),o()}),P=N.useCallback(A=>{!A||A===1/0||(window.clearTimeout(T.current),C.current=new Date().getTime(),T.current=window.setTimeout(O,A))},[O]);N.useEffect(()=>{const A=g.viewport;if(A){const I=()=>{P(_.current),c==null||c()},R=()=>{const M=new Date().getTime()-C.current;_.current=_.current-M,window.clearTimeout(T.current),l==null||l()};return A.addEventListener(VR,R),A.addEventListener(WR,I),()=>{A.removeEventListener(VR,R),A.removeEventListener(WR,I)}}},[g.viewport,w,l,c,P]),N.useEffect(()=>{i&&!g.isClosePausedRef.current&&P(w)},[i,w,g.isClosePausedRef,P]),N.useEffect(()=>(k(),()=>$()),[k,$]);const D=N.useMemo(()=>y?dre(y):null,[y]);return g.viewport?f.jsxs(f.Fragment,{children:[D&&f.jsx(mTe,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:D}),f.jsx(fTe,{scope:n,onClose:O,children:Op.createPortal(f.jsx(OL.ItemSlot,{scope:n,children:f.jsx(X_e,{asChild:!0,onEscapeKeyDown:Ie(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||O(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:f.jsx(ct.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...m,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ie(t.onKeyDown,A=>{A.key==="Escape"&&(a==null||a(A.nativeEvent),A.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:Ie(t.onPointerDown,A=>{A.button===0&&(b.current={x:A.clientX,y:A.clientY})}),onPointerMove:Ie(t.onPointerMove,A=>{if(!b.current)return;const I=A.clientX-b.current.x,R=A.clientY-b.current.y,M=!!S.current,E=["left","right"].includes(g.swipeDirection),j=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,B=E?j(0,I):0,W=E?0:j(0,R),G=A.pointerType==="touch"?10:2,te={x:B,y:W},ne={originalEvent:A,delta:te};M?(S.current=te,aC(cTe,d,ne,{discrete:!1})):JW(te,g.swipeDirection,G)?(S.current=te,aC(lTe,u,ne,{discrete:!1}),A.target.setPointerCapture(A.pointerId)):(Math.abs(I)>G||Math.abs(R)>G)&&(b.current=null)}),onPointerUp:Ie(t.onPointerUp,A=>{const I=S.current,R=A.target;if(R.hasPointerCapture(A.pointerId)&&R.releasePointerCapture(A.pointerId),S.current=null,b.current=null,I){const M=A.currentTarget,E={originalEvent:A,delta:I};JW(I,g.swipeDirection,g.swipeThreshold)?aC(dTe,p,E,{discrete:!0}):aC(uTe,h,E,{discrete:!0}),M.addEventListener("click",j=>j.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),mTe=t=>{const{__scopeToast:e,children:n,...r}=t,s=fk(hk,e),[i,o]=N.useState(!1),[a,l]=N.useState(!1);return vTe(()=>o(!0)),N.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:f.jsx(ev,{asChild:!0,children:f.jsx(P1,{...r,children:i&&f.jsxs(f.Fragment,{children:[s.label," ",n]})})})},gTe="ToastTitle",ire=N.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return f.jsx(ct.div,{...r,ref:e})});ire.displayName=gTe;var yTe="ToastDescription",ore=N.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return f.jsx(ct.div,{...r,ref:e})});ore.displayName=yTe;var are="ToastAction",lre=N.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?f.jsx(ure,{altText:n,asChild:!0,children:f.jsx(PL,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${are}\`. Expected non-empty \`string\`.`),null)});lre.displayName=are;var cre="ToastClose",PL=N.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=hTe(cre,n);return f.jsx(ure,{asChild:!0,children:f.jsx(ct.button,{type:"button",...r,ref:e,onClick:Ie(t.onClick,s.onClose)})})});PL.displayName=cre;var ure=N.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return f.jsx(ct.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function dre(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),xTe(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...dre(r))}}),e}function aC(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?AL(s,i):s.dispatchEvent(i)}var JW=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function vTe(t=()=>{}){const e=ci(t);Rs(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function xTe(t){return t.nodeType===t.ELEMENT_NODE}function bTe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function OI(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var wTe=ere,fre=nre,hre=sre,pre=ire,mre=ore,gre=lre,yre=PL;function vre(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=vre(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function STe(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=vre(t))&&(r&&(r+=" "),r+=e);return r}const eU=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,tU=STe,Rp=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return tU(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=n==null?void 0:n[c],d=i==null?void 0:i[c];if(u===null)return null;const h=eU(u)||eU(d);return s[c][h]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:h,...p}=u;return Object.entries(p).every(m=>{let[g,y]=m;return Array.isArray(y)?y.includes({...i,...a}[g]):{...i,...a}[g]===y})?[...c,d,h]:c},[]);return tU(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CTe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xre=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NTe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Te=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>N.createElement("svg",{ref:l,...NTe,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:xre("lucide",s),...a},[...o.map(([c,u])=>N.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=(t,e)=>{const n=N.forwardRef(({className:r,...s},i)=>N.createElement(_Te,{ref:i,iconNode:e,className:xre(`lucide-${CTe(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TTe=ut("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kTe=ut("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ETe=ut("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=ut("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Te=ut("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=ut("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=ut("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ATe=ut("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bre=ut("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ITe=ut("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=ut("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=ut("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=ut("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OTe=ut("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PTe=ut("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=ut("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RTe=ut("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=ut("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=ut("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wre=ut("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DTe=ut("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jTe=ut("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MTe=ut("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=ut("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=ut("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FTe=ut("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=ut("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LTe=ut("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BTe=ut("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zTe=ut("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VTe=ut("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=ut("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WTe=ut("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UTe=ut("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GTe=ut("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=ut("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=ut("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HTe=ut("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sre=ut("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=ut("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qTe=ut("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KTe=ut("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cre=ut("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nre=ut("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=ut("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XTe=ut("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YTe=ut("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QTe=ut("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _re=ut("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=ut("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=ut("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZTe=ut("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=ut("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=ut("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JTe=ut("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function Tre(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Tre(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function _t(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Tre(t))&&(r&&(r+=" "),r+=e);return r}const FL="-",eke=t=>{const e=nke(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(FL);return a[0]===""&&a.length!==1&&a.shift(),kre(a,e)||tke(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},kre=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?kre(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(FL);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},oU=/^\[(.+)\]$/,tke=t=>{if(oU.test(t)){const e=oU.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},nke=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return ske(Object.entries(t.classGroups),n).forEach(([i,o])=>{qR(o,r,i,e)}),r},qR=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:aU(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(rke(s)){qR(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{qR(o,aU(e,i),n,r)})})},aU=(t,e)=>{let n=t;return e.split(FL).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},rke=t=>t.isThemeGetter,ske=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,ike=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},Ere="!",oke=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,u=0,d;for(let y=0;y<a.length;y++){let v=a[y];if(c===0){if(v===s&&(r||a.slice(y,y+i)===e)){l.push(a.slice(u,y)),u=y+i;continue}if(v==="/"){d=y;continue}}v==="["?c++:v==="]"&&c--}const h=l.length===0?a:a.substring(u),p=h.startsWith(Ere),m=p?h.substring(1):h,g=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}};return n?a=>n({className:a,parseClassName:o}):o},ake=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},lke=t=>({cache:ike(t.cacheSize),parseClassName:oke(t),...eke(t)}),cke=/\s+/,uke=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(cke);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:p}=n(c);let m=!!p,g=r(m?h.substring(0,p):h);if(!g){if(!m){a=c+(a.length>0?" "+a:a);continue}if(g=r(h),!g){a=c+(a.length>0?" "+a:a);continue}m=!1}const y=ake(u).join(":"),v=d?y+Ere:y,x=v+g;if(i.includes(x))continue;i.push(x);const b=s(g,m);for(let S=0;S<b.length;++S){const w=b[S];i.push(v+w)}a=c+(a.length>0?" "+a:a)}return a};function dke(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=$re(e))&&(r&&(r+=" "),r+=n);return r}const $re=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=$re(t[r]))&&(n&&(n+=" "),n+=e);return n};function fke(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((u,d)=>d(u),t());return n=lke(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=uke(l,n);return s(l,u),u}return function(){return i(dke.apply(null,arguments))}}const Un=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Are=/^\[(?:([a-z-]+):)?(.+)\]$/i,hke=/^\d+\/\d+$/,pke=new Set(["px","full","screen"]),mke=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,gke=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yke=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,vke=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,xke=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vc=t=>ig(t)||pke.has(t)||hke.test(t),Ju=t=>tv(t,"length",kke),ig=t=>!!t&&!Number.isNaN(Number(t)),RI=t=>tv(t,"number",ig),dx=t=>!!t&&Number.isInteger(Number(t)),bke=t=>t.endsWith("%")&&ig(t.slice(0,-1)),Ft=t=>Are.test(t),ed=t=>mke.test(t),wke=new Set(["length","size","percentage"]),Ske=t=>tv(t,wke,Ire),Cke=t=>tv(t,"position",Ire),Nke=new Set(["image","url"]),_ke=t=>tv(t,Nke,$ke),Tke=t=>tv(t,"",Eke),fx=()=>!0,tv=(t,e,n)=>{const r=Are.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},kke=t=>gke.test(t)&&!yke.test(t),Ire=()=>!1,Eke=t=>vke.test(t),$ke=t=>xke.test(t),Ake=()=>{const t=Un("colors"),e=Un("spacing"),n=Un("blur"),r=Un("brightness"),s=Un("borderColor"),i=Un("borderRadius"),o=Un("borderSpacing"),a=Un("borderWidth"),l=Un("contrast"),c=Un("grayscale"),u=Un("hueRotate"),d=Un("invert"),h=Un("gap"),p=Un("gradientColorStops"),m=Un("gradientColorStopPositions"),g=Un("inset"),y=Un("margin"),v=Un("opacity"),x=Un("padding"),b=Un("saturate"),S=Un("scale"),w=Un("sepia"),C=Un("skew"),_=Un("space"),T=Un("translate"),k=()=>["auto","contain","none"],$=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Ft,e],P=()=>[Ft,e],D=()=>["",Vc,Ju],A=()=>["auto",ig,Ft],I=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],R=()=>["solid","dashed","dotted","double","none"],M=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],E=()=>["start","end","center","between","around","evenly","stretch"],j=()=>["","0",Ft],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[ig,Ft];return{cacheSize:500,separator:":",theme:{colors:[fx],spacing:[Vc,Ju],blur:["none","",ed,Ft],brightness:W(),borderColor:[t],borderRadius:["none","","full",ed,Ft],borderSpacing:P(),borderWidth:D(),contrast:W(),grayscale:j(),hueRotate:W(),invert:j(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[bke,Ju],inset:O(),margin:O(),opacity:W(),padding:P(),saturate:W(),scale:W(),sepia:j(),skew:W(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",Ft]}],container:["container"],columns:[{columns:[ed]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...I(),Ft]}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",dx,Ft]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ft]}],grow:[{grow:j()}],shrink:[{shrink:j()}],order:[{order:["first","last","none",dx,Ft]}],"grid-cols":[{"grid-cols":[fx]}],"col-start-end":[{col:["auto",{span:["full",dx,Ft]},Ft]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[fx]}],"row-start-end":[{row:["auto",{span:[dx,Ft]},Ft]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ft]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ft]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...E()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...E(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...E(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ft,e]}],"min-w":[{"min-w":[Ft,e,"min","max","fit"]}],"max-w":[{"max-w":[Ft,e,"none","full","min","max","fit","prose",{screen:[ed]},ed]}],h:[{h:[Ft,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ft,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ft,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ft,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ed,Ju]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",RI]}],"font-family":[{font:[fx]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ft]}],"line-clamp":[{"line-clamp":["none",ig,RI]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Vc,Ft]}],"list-image":[{"list-image":["none",Ft]}],"list-style-type":[{list:["none","disc","decimal",Ft]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...R(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Vc,Ju]}],"underline-offset":[{"underline-offset":["auto",Vc,Ft]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ft]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ft]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...I(),Cke]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ske]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},_ke]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...R(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:R()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...R()]}],"outline-offset":[{"outline-offset":[Vc,Ft]}],"outline-w":[{outline:[Vc,Ju]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Vc,Ju]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ed,Tke]}],"shadow-color":[{shadow:[fx]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...M(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":M()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ed,Ft]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ft]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",Ft]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ft]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[dx,Ft]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ft]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ft]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ft]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Vc,Ju,RI]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Ike=fke(Ake);function pe(...t){return Ike(_t(t))}const Oke=wTe,Ore=N.forwardRef(({className:t,...e},n)=>f.jsx(fre,{ref:n,className:pe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Ore.displayName=fre.displayName;const Pke=Rp("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Pre=N.forwardRef(({className:t,variant:e,...n},r)=>f.jsx(hre,{ref:r,className:pe(Pke({variant:e}),t),...n}));Pre.displayName=hre.displayName;const Rke=N.forwardRef(({className:t,...e},n)=>f.jsx(gre,{ref:n,className:pe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Rke.displayName=gre.displayName;const Rre=N.forwardRef(({className:t,...e},n)=>f.jsx(yre,{ref:n,className:pe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:f.jsx(gk,{className:"h-4 w-4"})}));Rre.displayName=yre.displayName;const Dre=N.forwardRef(({className:t,...e},n)=>f.jsx(pre,{ref:n,className:pe("text-sm font-semibold",t),...e}));Dre.displayName=pre.displayName;const jre=N.forwardRef(({className:t,...e},n)=>f.jsx(mre,{ref:n,className:pe("text-sm opacity-90",t),...e}));jre.displayName=mre.displayName;function Dke(){const{toasts:t}=cs();return f.jsxs(Oke,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return f.jsxs(Pre,{...i,children:[f.jsxs("div",{className:"grid gap-1",children:[n&&f.jsx(Dre,{children:n}),r&&f.jsx(jre,{children:r})]}),s,f.jsx(Rre,{})]},e)}),f.jsx(Ore,{})]})}const Mre=N.createContext(null);function jke({children:t}){const{toast:e}=cs(),{data:n,error:r,isLoading:s}=qt({queryKey:["/api/auth/user"],queryFn:Xne({on401:"returnNull"})}),i=Vr({mutationFn:async c=>{const u=await wr("POST","/api/auth/login",c),d=await u.json();if(console.log("Login response:",d),!u.ok){const h=await u.json();throw new Error(`Login failed: ${h.message||u.statusText}`)}return d},onSuccess:c=>{ms.setQueryData(["/api/auth/user"],c)},onError:c=>{console.error("Login error:",c),e({title:"فشل تسجيل الدخول",description:c.message,variant:"destructive"})}}),o=Vr({mutationFn:async c=>{const u=await wr("POST","/api/auth/register",c),d=await u.json();if(console.log("Register response:",d),!u.ok){const h=await u.json();throw new Error(`Registration failed: ${h.message||u.statusText}`)}return d},onSuccess:c=>{ms.setQueryData(["/api/auth/user"],c)},onError:c=>{console.error("Register error:",c),e({title:"فشل إنشاء الحساب",description:c.message,variant:"destructive"})}}),a=Vr({mutationFn:async()=>{await wr("POST","/api/auth/logout")},onSuccess:()=>{ms.clear(),ms.setQueryData(["/api/auth/user"],null),localStorage.clear(),sessionStorage.clear(),e({title:"تم تسجيل الخروج",description:"تم تسجيل الخروج بنجاح"})},onError:c=>{e({title:"فشل تسجيل الخروج",description:c.message,variant:"destructive"})}}),l=Vr({mutationFn:async c=>{await wr("DELETE",`/api/users/${c}`)},onSuccess:()=>{ms.invalidateQueries({queryKey:["/api/users"]})},onError:c=>{e({title:"فشل حذف المستخدم",description:c.message,variant:"destructive"})}});return f.jsx(Mre.Provider,{value:{user:n??null,isLoading:s,error:r,loginMutation:i,logoutMutation:a,registerMutation:o,deleteUserMutation:l},children:t})}function Sf(){const t=N.useContext(Mre);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function Ws({path:t,component:e}){const{user:n,isLoading:r}=Sf();return r?f.jsx(yN,{path:t,children:f.jsx("div",{className:"flex items-center justify-center min-h-screen",children:f.jsx(Zs,{className:"h-8 w-8 animate-spin text-border"})})}):n?f.jsx(e,{}):f.jsx(yN,{path:t,children:f.jsx(k_e,{to:"/auth"})})}const Le=N.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:pe("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Le.displayName="Card";const Ye=N.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:pe("flex flex-col space-y-1.5 p-6",t),...e}));Ye.displayName="CardHeader";const Qe=N.forwardRef(({className:t,...e},n)=>f.jsx("h3",{ref:n,className:pe("text-2xl font-semibold leading-none tracking-tight",t),...e}));Qe.displayName="CardTitle";const Kt=N.forwardRef(({className:t,...e},n)=>f.jsx("p",{ref:n,className:pe("text-sm text-muted-foreground",t),...e}));Kt.displayName="CardDescription";const Ue=N.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:pe("p-6 pt-0",t),...e}));Ue.displayName="CardContent";const LL=N.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:pe("flex items-center p-6 pt-0",t),...e}));LL.displayName="CardFooter";function Mke(){return f.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:f.jsx(Le,{className:"w-full max-w-md mx-4",children:f.jsxs(Ue,{className:"pt-6",children:[f.jsxs("div",{className:"flex mb-4 gap-2",children:[f.jsx(pk,{className:"h-8 w-8 text-red-500"}),f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),f.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}var R1=t=>t.type==="checkbox",wh=t=>t instanceof Date,vi=t=>t==null;const Fre=t=>typeof t=="object";var jr=t=>!vi(t)&&!Array.isArray(t)&&Fre(t)&&!wh(t),Lre=t=>jr(t)&&t.target?R1(t.target)?t.target.checked:t.target.value:t,Fke=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Bre=(t,e)=>t.has(Fke(e)),Lke=t=>{const e=t.constructor&&t.constructor.prototype;return jr(e)&&e.hasOwnProperty("isPrototypeOf")},BL=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Bi(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(BL&&(t instanceof Blob||r))&&(n||jr(t)))if(e=n?[]:{},!n&&!Lke(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Bi(t[s]));else return t;return e}var yk=t=>Array.isArray(t)?t.filter(Boolean):[],Pr=t=>t===void 0,je=(t,e,n)=>{if(!e||!jr(t))return n;const r=yk(e.split(/[,[\].]+?/)).reduce((s,i)=>vi(s)?s:s[i],t);return Pr(r)||r===t?Pr(t[e])?n:t[e]:r},sa=t=>typeof t=="boolean",zL=t=>/^\w*$/.test(t),zre=t=>yk(t.replace(/["|']|\]/g,"").split(/\.|\[/)),mn=(t,e,n)=>{let r=-1;const s=zL(e)?[e]:zre(e),i=s.length,o=i-1;for(;++r<i;){const a=s[r];let l=n;if(r!==o){const c=t[a];l=jr(c)||Array.isArray(c)?c:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}return t};const bN={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},rl={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Wc={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Vre=F.createContext(null),vk=()=>F.useContext(Vre),Bke=t=>{const{children:e,...n}=t;return F.createElement(Vre.Provider,{value:n},e)};var Wre=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==rl.all&&(e._proxyFormState[o]=!r||rl.all),n&&(n[o]=!0),t[o]}});return s},Wi=t=>jr(t)&&!Object.keys(t).length,Ure=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return Wi(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||rl.all))},p0=t=>Array.isArray(t)?t:[t],Gre=(t,e,n)=>!t||!e||t===e||p0(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r)));function VL(t){const e=F.useRef(t);e.current=t,F.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}function zke(t){const e=vk(),{control:n=e.control,disabled:r,name:s,exact:i}=t||{},[o,a]=F.useState(n._formState),l=F.useRef(!0),c=F.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=F.useRef(s);return u.current=s,VL({disabled:r,next:d=>l.current&&Gre(u.current,d.name,i)&&Ure(d,c.current,n._updateFormState)&&a({...n._formState,...d}),subject:n._subjects.state}),F.useEffect(()=>(l.current=!0,c.current.isValid&&n._updateValid(!0),()=>{l.current=!1}),[n]),F.useMemo(()=>Wre(o,n,c.current,!1),[o,n])}var ec=t=>typeof t=="string",Hre=(t,e,n,r,s)=>ec(t)?(r&&e.watch.add(t),je(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),je(n,i))):(r&&(e.watchAll=!0),n);function Vke(t){const e=vk(),{control:n=e.control,name:r,defaultValue:s,disabled:i,exact:o}=t||{},a=F.useRef(r);a.current=r,VL({disabled:i,subject:n._subjects.values,next:u=>{Gre(a.current,u.name,o)&&c(Bi(Hre(a.current,n._names,u.values||n._formValues,!1,s)))}});const[l,c]=F.useState(n._getWatch(r,s));return F.useEffect(()=>n._removeUnmounted()),l}function Wke(t){const e=vk(),{name:n,disabled:r,control:s=e.control,shouldUnregister:i}=t,o=Bre(s._names.array,n),a=Vke({control:s,name:n,defaultValue:je(s._formValues,n,je(s._defaultValues,n,t.defaultValue)),exact:!0}),l=zke({control:s,name:n,exact:!0}),c=F.useRef(s.register(n,{...t.rules,value:a,...sa(t.disabled)?{disabled:t.disabled}:{}})),u=F.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!je(l.errors,n)},isDirty:{enumerable:!0,get:()=>!!je(l.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!je(l.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!je(l.validatingFields,n)},error:{enumerable:!0,get:()=>je(l.errors,n)}}),[l,n]),d=F.useMemo(()=>({name:n,value:a,...sa(r)||l.disabled?{disabled:l.disabled||r}:{},onChange:h=>c.current.onChange({target:{value:Lre(h),name:n},type:bN.CHANGE}),onBlur:()=>c.current.onBlur({target:{value:je(s._formValues,n),name:n},type:bN.BLUR}),ref:h=>{const p=je(s._fields,n);p&&h&&(p._f.ref={focus:()=>h.focus(),select:()=>h.select(),setCustomValidity:m=>h.setCustomValidity(m),reportValidity:()=>h.reportValidity()})}}),[n,s._formValues,r,l.disabled,a,s._fields]);return F.useEffect(()=>{const h=s._options.shouldUnregister||i,p=(m,g)=>{const y=je(s._fields,m);y&&y._f&&(y._f.mount=g)};if(p(n,!0),h){const m=Bi(je(s._options.defaultValues,n));mn(s._defaultValues,n,m),Pr(je(s._formValues,n))&&mn(s._formValues,n,m)}return!o&&s.register(n),()=>{(o?h&&!s._state.action:h)?s.unregister(n):p(n,!1)}},[n,s,o,i]),F.useEffect(()=>{s._updateDisabledField({disabled:r,fields:s._fields,name:n})},[r,n,s]),F.useMemo(()=>({field:d,formState:l,fieldState:u}),[d,l,u])}const Uke=t=>t.render(Wke(t));var qre=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},lU=t=>({isOnSubmit:!t||t===rl.onSubmit,isOnBlur:t===rl.onBlur,isOnChange:t===rl.onChange,isOnAll:t===rl.all,isOnTouch:t===rl.onTouched}),cU=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const m0=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=je(t,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(m0(a,e))break}else if(jr(a)&&m0(a,e))break}}};var Gke=(t,e,n)=>{const r=p0(je(t,n));return mn(r,"root",e[n]),mn(t,n,r),t},WL=t=>t.type==="file",Ql=t=>typeof t=="function",wN=t=>{if(!BL)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},w2=t=>ec(t),UL=t=>t.type==="radio",SN=t=>t instanceof RegExp;const uU={value:!1,isValid:!1},dU={value:!0,isValid:!0};var Kre=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Pr(t[0].attributes.value)?Pr(t[0].value)||t[0].value===""?dU:{value:t[0].value,isValid:!0}:dU:uU}return uU};const fU={isValid:!1,value:null};var Xre=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,fU):fU;function hU(t,e,n="validate"){if(w2(t)||Array.isArray(t)&&t.every(w2)||sa(t)&&!t)return{type:n,message:w2(t)?t:"",ref:e}}var lm=t=>jr(t)&&!SN(t)?t:{value:t,message:""},pU=async(t,e,n,r,s,i)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:u,min:d,max:h,pattern:p,validate:m,name:g,valueAsNumber:y,mount:v}=t._f,x=je(n,g);if(!v||e.has(g))return{};const b=a?a[0]:o,S=P=>{s&&b.reportValidity&&(b.setCustomValidity(sa(P)?"":P||""),b.reportValidity())},w={},C=UL(o),_=R1(o),T=C||_,k=(y||WL(o))&&Pr(o.value)&&Pr(x)||wN(o)&&o.value===""||x===""||Array.isArray(x)&&!x.length,$=qre.bind(null,g,r,w),O=(P,D,A,I=Wc.maxLength,R=Wc.minLength)=>{const M=P?D:A;w[g]={type:P?I:R,message:M,ref:o,...$(P?I:R,M)}};if(i?!Array.isArray(x)||!x.length:l&&(!T&&(k||vi(x))||sa(x)&&!x||_&&!Kre(a).isValid||C&&!Xre(a).isValid)){const{value:P,message:D}=w2(l)?{value:!!l,message:l}:lm(l);if(P&&(w[g]={type:Wc.required,message:D,ref:b,...$(Wc.required,D)},!r))return S(D),w}if(!k&&(!vi(d)||!vi(h))){let P,D;const A=lm(h),I=lm(d);if(!vi(x)&&!isNaN(x)){const R=o.valueAsNumber||x&&+x;vi(A.value)||(P=R>A.value),vi(I.value)||(D=R<I.value)}else{const R=o.valueAsDate||new Date(x),M=B=>new Date(new Date().toDateString()+" "+B),E=o.type=="time",j=o.type=="week";ec(A.value)&&x&&(P=E?M(x)>M(A.value):j?x>A.value:R>new Date(A.value)),ec(I.value)&&x&&(D=E?M(x)<M(I.value):j?x<I.value:R<new Date(I.value))}if((P||D)&&(O(!!P,A.message,I.message,Wc.max,Wc.min),!r))return S(w[g].message),w}if((c||u)&&!k&&(ec(x)||i&&Array.isArray(x))){const P=lm(c),D=lm(u),A=!vi(P.value)&&x.length>+P.value,I=!vi(D.value)&&x.length<+D.value;if((A||I)&&(O(A,P.message,D.message),!r))return S(w[g].message),w}if(p&&!k&&ec(x)){const{value:P,message:D}=lm(p);if(SN(P)&&!x.match(P)&&(w[g]={type:Wc.pattern,message:D,ref:o,...$(Wc.pattern,D)},!r))return S(D),w}if(m){if(Ql(m)){const P=await m(x,n),D=hU(P,b);if(D&&(w[g]={...D,...$(Wc.validate,D.message)},!r))return S(D.message),w}else if(jr(m)){let P={};for(const D in m){if(!Wi(P)&&!r)break;const A=hU(await m[D](x,n),b,D);A&&(P={...A,...$(D,A.message)},S(A.message),r&&(w[g]=P))}if(!Wi(P)&&(w[g]={ref:b,...P},!r))return w}}return S(!0),w};function Hke(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Pr(t)?r++:t[e[r++]];return t}function qke(t){for(const e in t)if(t.hasOwnProperty(e)&&!Pr(t[e]))return!1;return!0}function Zr(t,e){const n=Array.isArray(e)?e:zL(e)?[e]:zre(e),r=n.length===1?t:Hke(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(jr(r)&&Wi(r)||Array.isArray(r)&&qke(r))&&Zr(t,n.slice(0,-1)),t}var DI=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}},KR=t=>vi(t)||!Fre(t);function hd(t,e){if(KR(t)||KR(e))return t===e;if(wh(t)&&wh(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const i=t[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=e[s];if(wh(i)&&wh(o)||jr(i)&&jr(o)||Array.isArray(i)&&Array.isArray(o)?!hd(i,o):i!==o)return!1}}return!0}var Yre=t=>t.type==="select-multiple",Kke=t=>UL(t)||R1(t),jI=t=>wN(t)&&t.isConnected,Qre=t=>{for(const e in t)if(Ql(t[e]))return!0;return!1};function CN(t,e={}){const n=Array.isArray(t);if(jr(t)||n)for(const r in t)Array.isArray(t[r])||jr(t[r])&&!Qre(t[r])?(e[r]=Array.isArray(t[r])?[]:{},CN(t[r],e[r])):vi(t[r])||(e[r]=!0);return e}function Zre(t,e,n){const r=Array.isArray(t);if(jr(t)||r)for(const s in t)Array.isArray(t[s])||jr(t[s])&&!Qre(t[s])?Pr(e)||KR(n[s])?n[s]=Array.isArray(t[s])?CN(t[s],[]):{...CN(t[s])}:Zre(t[s],vi(e)?{}:e[s],n[s]):n[s]=!hd(t[s],e[s]);return n}var hx=(t,e)=>Zre(t,e,CN(e)),Jre=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Pr(t)?t:e?t===""?NaN:t&&+t:n&&ec(t)?new Date(t):r?r(t):t;function MI(t){const e=t.ref;return WL(e)?e.files:UL(e)?Xre(t.refs).value:Yre(e)?[...e.selectedOptions].map(({value:n})=>n):R1(e)?Kre(t.refs).value:Jre(Pr(e.value)?t.ref.value:e.value,t)}var Xke=(t,e,n,r)=>{const s={};for(const i of t){const o=je(e,i);o&&mn(s,i,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},px=t=>Pr(t)?t:SN(t)?t.source:jr(t)?SN(t.value)?t.value.source:t.value:t;const mU="AsyncFunction";var Yke=t=>!!t&&!!t.validate&&!!(Ql(t.validate)&&t.validate.constructor.name===mU||jr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===mU)),Qke=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function gU(t,e,n){const r=je(t,n);if(r||zL(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),o=je(e,i),a=je(t,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(a&&a.type)return{name:i,error:a};s.pop()}return{name:n}}var Zke=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,Jke=(t,e)=>!yk(je(t,e)).length&&Zr(t,e);const eEe={mode:rl.onSubmit,reValidateMode:rl.onChange,shouldFocusError:!0};function tEe(t={}){let e={...eEe,...t},n={submitCount:0,isDirty:!1,isLoading:Ql(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=jr(e.defaultValues)||jr(e.values)?Bi(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:Bi(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={values:DI(),array:DI(),state:DI()},h=lU(e.mode),p=lU(e.reValidateMode),m=e.criteriaMode===rl.all,g=z=>Q=>{clearTimeout(c),c=setTimeout(z,Q)},y=async z=>{if(!e.disabled&&(u.isValid||z)){const Q=e.resolver?Wi((await T()).errors):await $(r,!0);Q!==n.isValid&&d.state.next({isValid:Q})}},v=(z,Q)=>{!e.disabled&&(u.isValidating||u.validatingFields)&&((z||Array.from(a.mount)).forEach(ie=>{ie&&(Q?mn(n.validatingFields,ie,Q):Zr(n.validatingFields,ie))}),d.state.next({validatingFields:n.validatingFields,isValidating:!Wi(n.validatingFields)}))},x=(z,Q=[],ie,Ee,Se=!0,Ne=!0)=>{if(Ee&&ie&&!e.disabled){if(o.action=!0,Ne&&Array.isArray(je(r,z))){const qe=ie(je(r,z),Ee.argA,Ee.argB);Se&&mn(r,z,qe)}if(Ne&&Array.isArray(je(n.errors,z))){const qe=ie(je(n.errors,z),Ee.argA,Ee.argB);Se&&mn(n.errors,z,qe),Jke(n.errors,z)}if(u.touchedFields&&Ne&&Array.isArray(je(n.touchedFields,z))){const qe=ie(je(n.touchedFields,z),Ee.argA,Ee.argB);Se&&mn(n.touchedFields,z,qe)}u.dirtyFields&&(n.dirtyFields=hx(s,i)),d.state.next({name:z,isDirty:P(z,Q),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else mn(i,z,Q)},b=(z,Q)=>{mn(n.errors,z,Q),d.state.next({errors:n.errors})},S=z=>{n.errors=z,d.state.next({errors:n.errors,isValid:!1})},w=(z,Q,ie,Ee)=>{const Se=je(r,z);if(Se){const Ne=je(i,z,Pr(ie)?je(s,z):ie);Pr(Ne)||Ee&&Ee.defaultChecked||Q?mn(i,z,Q?Ne:MI(Se._f)):I(z,Ne),o.mount&&y()}},C=(z,Q,ie,Ee,Se)=>{let Ne=!1,qe=!1;const mt={name:z};if(!e.disabled){const En=!!(je(r,z)&&je(r,z)._f&&je(r,z)._f.disabled);if(!ie||Ee){u.isDirty&&(qe=n.isDirty,n.isDirty=mt.isDirty=P(),Ne=qe!==mt.isDirty);const $n=En||hd(je(s,z),Q);qe=!!(!En&&je(n.dirtyFields,z)),$n||En?Zr(n.dirtyFields,z):mn(n.dirtyFields,z,!0),mt.dirtyFields=n.dirtyFields,Ne=Ne||u.dirtyFields&&qe!==!$n}if(ie){const $n=je(n.touchedFields,z);$n||(mn(n.touchedFields,z,ie),mt.touchedFields=n.touchedFields,Ne=Ne||u.touchedFields&&$n!==ie)}Ne&&Se&&d.state.next(mt)}return Ne?mt:{}},_=(z,Q,ie,Ee)=>{const Se=je(n.errors,z),Ne=u.isValid&&sa(Q)&&n.isValid!==Q;if(e.delayError&&ie?(l=g(()=>b(z,ie)),l(e.delayError)):(clearTimeout(c),l=null,ie?mn(n.errors,z,ie):Zr(n.errors,z)),(ie?!hd(Se,ie):Se)||!Wi(Ee)||Ne){const qe={...Ee,...Ne&&sa(Q)?{isValid:Q}:{},errors:n.errors,name:z};n={...n,...qe},d.state.next(qe)}},T=async z=>{v(z,!0);const Q=await e.resolver(i,e.context,Xke(z||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return v(z),Q},k=async z=>{const{errors:Q}=await T(z);if(z)for(const ie of z){const Ee=je(Q,ie);Ee?mn(n.errors,ie,Ee):Zr(n.errors,ie)}else n.errors=Q;return Q},$=async(z,Q,ie={valid:!0})=>{for(const Ee in z){const Se=z[Ee];if(Se){const{_f:Ne,...qe}=Se;if(Ne){const mt=a.array.has(Ne.name),En=Se._f&&Yke(Se._f);En&&u.validatingFields&&v([Ee],!0);const $n=await pU(Se,a.disabled,i,m,e.shouldUseNativeValidation&&!Q,mt);if(En&&u.validatingFields&&v([Ee]),$n[Ne.name]&&(ie.valid=!1,Q))break;!Q&&(je($n,Ne.name)?mt?Gke(n.errors,$n,Ne.name):mn(n.errors,Ne.name,$n[Ne.name]):Zr(n.errors,Ne.name))}!Wi(qe)&&await $(qe,Q,ie)}}return ie.valid},O=()=>{for(const z of a.unMount){const Q=je(r,z);Q&&(Q._f.refs?Q._f.refs.every(ie=>!jI(ie)):!jI(Q._f.ref))&&ge(z)}a.unMount=new Set},P=(z,Q)=>!e.disabled&&(z&&Q&&mn(i,z,Q),!hd(W(),s)),D=(z,Q,ie)=>Hre(z,a,{...o.mount?i:Pr(Q)?s:ec(z)?{[z]:Q}:Q},ie,Q),A=z=>yk(je(o.mount?i:s,z,e.shouldUnregister?je(s,z,[]):[])),I=(z,Q,ie={})=>{const Ee=je(r,z);let Se=Q;if(Ee){const Ne=Ee._f;Ne&&(!Ne.disabled&&mn(i,z,Jre(Q,Ne)),Se=wN(Ne.ref)&&vi(Q)?"":Q,Yre(Ne.ref)?[...Ne.ref.options].forEach(qe=>qe.selected=Se.includes(qe.value)):Ne.refs?R1(Ne.ref)?Ne.refs.length>1?Ne.refs.forEach(qe=>(!qe.defaultChecked||!qe.disabled)&&(qe.checked=Array.isArray(Se)?!!Se.find(mt=>mt===qe.value):Se===qe.value)):Ne.refs[0]&&(Ne.refs[0].checked=!!Se):Ne.refs.forEach(qe=>qe.checked=qe.value===Se):WL(Ne.ref)?Ne.ref.value="":(Ne.ref.value=Se,Ne.ref.type||d.values.next({name:z,values:{...i}})))}(ie.shouldDirty||ie.shouldTouch)&&C(z,Se,ie.shouldTouch,ie.shouldDirty,!0),ie.shouldValidate&&B(z)},R=(z,Q,ie)=>{for(const Ee in Q){const Se=Q[Ee],Ne=`${z}.${Ee}`,qe=je(r,Ne);(a.array.has(z)||jr(Se)||qe&&!qe._f)&&!wh(Se)?R(Ne,Se,ie):I(Ne,Se,ie)}},M=(z,Q,ie={})=>{const Ee=je(r,z),Se=a.array.has(z),Ne=Bi(Q);mn(i,z,Ne),Se?(d.array.next({name:z,values:{...i}}),(u.isDirty||u.dirtyFields)&&ie.shouldDirty&&d.state.next({name:z,dirtyFields:hx(s,i),isDirty:P(z,Ne)})):Ee&&!Ee._f&&!vi(Ne)?R(z,Ne,ie):I(z,Ne,ie),cU(z,a)&&d.state.next({...n}),d.values.next({name:o.mount?z:void 0,values:{...i}})},E=async z=>{o.mount=!0;const Q=z.target;let ie=Q.name,Ee=!0;const Se=je(r,ie),Ne=()=>Q.type?MI(Se._f):Lre(z),qe=mt=>{Ee=Number.isNaN(mt)||wh(mt)&&isNaN(mt.getTime())||hd(mt,je(i,ie,mt))};if(Se){let mt,En;const $n=Ne(),Ns=z.type===bN.BLUR||z.type===bN.FOCUS_OUT,Gf=!Qke(Se._f)&&!e.resolver&&!je(n.errors,ie)&&!Se._f.deps||Zke(Ns,je(n.touchedFields,ie),n.isSubmitted,p,h),Hf=cU(ie,a,Ns);mn(i,ie,$n),Ns?(Se._f.onBlur&&Se._f.onBlur(z),l&&l(0)):Se._f.onChange&&Se._f.onChange(z);const qf=C(ie,$n,Ns,!1),JA=!Wi(qf)||Hf;if(!Ns&&d.values.next({name:ie,type:z.type,values:{...i}}),Gf)return u.isValid&&(e.mode==="onBlur"&&Ns?y():Ns||y()),JA&&d.state.next({name:ie,...Hf?{}:qf});if(!Ns&&Hf&&d.state.next({...n}),e.resolver){const{errors:Kf}=await T([ie]);if(qe($n),Ee){const eI=gU(n.errors,r,ie),BS=gU(Kf,r,eI.name||ie);mt=BS.error,ie=BS.name,En=Wi(Kf)}}else v([ie],!0),mt=(await pU(Se,a.disabled,i,m,e.shouldUseNativeValidation))[ie],v([ie]),qe($n),Ee&&(mt?En=!1:u.isValid&&(En=await $(r,!0)));Ee&&(Se._f.deps&&B(Se._f.deps),_(ie,En,mt,qf))}},j=(z,Q)=>{if(je(n.errors,Q)&&z.focus)return z.focus(),1},B=async(z,Q={})=>{let ie,Ee;const Se=p0(z);if(e.resolver){const Ne=await k(Pr(z)?z:Se);ie=Wi(Ne),Ee=z?!Se.some(qe=>je(Ne,qe)):ie}else z?(Ee=(await Promise.all(Se.map(async Ne=>{const qe=je(r,Ne);return await $(qe&&qe._f?{[Ne]:qe}:qe)}))).every(Boolean),!(!Ee&&!n.isValid)&&y()):Ee=ie=await $(r);return d.state.next({...!ec(z)||u.isValid&&ie!==n.isValid?{}:{name:z},...e.resolver||!z?{isValid:ie}:{},errors:n.errors}),Q.shouldFocus&&!Ee&&m0(r,j,z?Se:a.mount),Ee},W=z=>{const Q={...o.mount?i:s};return Pr(z)?Q:ec(z)?je(Q,z):z.map(ie=>je(Q,ie))},G=(z,Q)=>({invalid:!!je((Q||n).errors,z),isDirty:!!je((Q||n).dirtyFields,z),error:je((Q||n).errors,z),isValidating:!!je(n.validatingFields,z),isTouched:!!je((Q||n).touchedFields,z)}),te=z=>{z&&p0(z).forEach(Q=>Zr(n.errors,Q)),d.state.next({errors:z?n.errors:{}})},ne=(z,Q,ie)=>{const Ee=(je(r,z,{_f:{}})._f||{}).ref,Se=je(n.errors,z)||{},{ref:Ne,message:qe,type:mt,...En}=Se;mn(n.errors,z,{...En,...Q,ref:Ee}),d.state.next({name:z,errors:n.errors,isValid:!1}),ie&&ie.shouldFocus&&Ee&&Ee.focus&&Ee.focus()},ue=(z,Q)=>Ql(z)?d.values.subscribe({next:ie=>z(D(void 0,Q),ie)}):D(z,Q,!0),ge=(z,Q={})=>{for(const ie of z?p0(z):a.mount)a.mount.delete(ie),a.array.delete(ie),Q.keepValue||(Zr(r,ie),Zr(i,ie)),!Q.keepError&&Zr(n.errors,ie),!Q.keepDirty&&Zr(n.dirtyFields,ie),!Q.keepTouched&&Zr(n.touchedFields,ie),!Q.keepIsValidating&&Zr(n.validatingFields,ie),!e.shouldUnregister&&!Q.keepDefaultValue&&Zr(s,ie);d.values.next({values:{...i}}),d.state.next({...n,...Q.keepDirty?{isDirty:P()}:{}}),!Q.keepIsValid&&y()},de=({disabled:z,name:Q,field:ie,fields:Ee})=>{(sa(z)&&o.mount||z||a.disabled.has(Q))&&(z?a.disabled.add(Q):a.disabled.delete(Q),C(Q,MI(ie?ie._f:je(Ee,Q)._f),!1,!1,!0))},we=(z,Q={})=>{let ie=je(r,z);const Ee=sa(Q.disabled)||sa(e.disabled);return mn(r,z,{...ie||{},_f:{...ie&&ie._f?ie._f:{ref:{name:z}},name:z,mount:!0,...Q}}),a.mount.add(z),ie?de({field:ie,disabled:sa(Q.disabled)?Q.disabled:e.disabled,name:z}):w(z,!0,Q.value),{...Ee?{disabled:Q.disabled||e.disabled}:{},...e.progressive?{required:!!Q.required,min:px(Q.min),max:px(Q.max),minLength:px(Q.minLength),maxLength:px(Q.maxLength),pattern:px(Q.pattern)}:{},name:z,onChange:E,onBlur:E,ref:Se=>{if(Se){we(z,Q),ie=je(r,z);const Ne=Pr(Se.value)&&Se.querySelectorAll&&Se.querySelectorAll("input,select,textarea")[0]||Se,qe=Kke(Ne),mt=ie._f.refs||[];if(qe?mt.find(En=>En===Ne):Ne===ie._f.ref)return;mn(r,z,{_f:{...ie._f,...qe?{refs:[...mt.filter(jI),Ne,...Array.isArray(je(s,z))?[{}]:[]],ref:{type:Ne.type,name:z}}:{ref:Ne}}}),w(z,!1,void 0,Ne)}else ie=je(r,z,{}),ie._f&&(ie._f.mount=!1),(e.shouldUnregister||Q.shouldUnregister)&&!(Bre(a.array,z)&&o.action)&&a.unMount.add(z)}}},se=()=>e.shouldFocusError&&m0(r,j,a.mount),he=z=>{sa(z)&&(d.state.next({disabled:z}),m0(r,(Q,ie)=>{const Ee=je(r,ie);Ee&&(Q.disabled=Ee._f.disabled||z,Array.isArray(Ee._f.refs)&&Ee._f.refs.forEach(Se=>{Se.disabled=Ee._f.disabled||z}))},0,!1))},me=(z,Q)=>async ie=>{let Ee;ie&&(ie.preventDefault&&ie.preventDefault(),ie.persist&&ie.persist());let Se=Bi(i);if(a.disabled.size)for(const Ne of a.disabled)mn(Se,Ne,void 0);if(d.state.next({isSubmitting:!0}),e.resolver){const{errors:Ne,values:qe}=await T();n.errors=Ne,Se=qe}else await $(r);if(Zr(n.errors,"root"),Wi(n.errors)){d.state.next({errors:{}});try{await z(Se,ie)}catch(Ne){Ee=Ne}}else Q&&await Q({...n.errors},ie),se(),setTimeout(se);if(d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Wi(n.errors)&&!Ee,submitCount:n.submitCount+1,errors:n.errors}),Ee)throw Ee},Y=(z,Q={})=>{je(r,z)&&(Pr(Q.defaultValue)?M(z,Bi(je(s,z))):(M(z,Q.defaultValue),mn(s,z,Bi(Q.defaultValue))),Q.keepTouched||Zr(n.touchedFields,z),Q.keepDirty||(Zr(n.dirtyFields,z),n.isDirty=Q.defaultValue?P(z,Bi(je(s,z))):P()),Q.keepError||(Zr(n.errors,z),u.isValid&&y()),d.state.next({...n}))},ye=(z,Q={})=>{const ie=z?Bi(z):s,Ee=Bi(ie),Se=Wi(z),Ne=Se?s:Ee;if(Q.keepDefaultValues||(s=ie),!Q.keepValues){if(Q.keepDirtyValues){const qe=new Set([...a.mount,...Object.keys(hx(s,i))]);for(const mt of Array.from(qe))je(n.dirtyFields,mt)?mn(Ne,mt,je(i,mt)):M(mt,je(Ne,mt))}else{if(BL&&Pr(z))for(const qe of a.mount){const mt=je(r,qe);if(mt&&mt._f){const En=Array.isArray(mt._f.refs)?mt._f.refs[0]:mt._f.ref;if(wN(En)){const $n=En.closest("form");if($n){$n.reset();break}}}}r={}}i=e.shouldUnregister?Q.keepDefaultValues?Bi(s):{}:Bi(Ne),d.array.next({values:{...Ne}}),d.values.next({values:{...Ne}})}a={mount:Q.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!Q.keepIsValid||!!Q.keepDirtyValues,o.watch=!!e.shouldUnregister,d.state.next({submitCount:Q.keepSubmitCount?n.submitCount:0,isDirty:Se?!1:Q.keepDirty?n.isDirty:!!(Q.keepDefaultValues&&!hd(z,s)),isSubmitted:Q.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Se?{}:Q.keepDirtyValues?Q.keepDefaultValues&&i?hx(s,i):n.dirtyFields:Q.keepDefaultValues&&z?hx(s,z):Q.keepDirty?n.dirtyFields:{},touchedFields:Q.keepTouched?n.touchedFields:{},errors:Q.keepErrors?n.errors:{},isSubmitSuccessful:Q.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Ae=(z,Q)=>ye(Ql(z)?z(i):z,Q);return{control:{register:we,unregister:ge,getFieldState:G,handleSubmit:me,setError:ne,_executeSchema:T,_getWatch:D,_getDirty:P,_updateValid:y,_removeUnmounted:O,_updateFieldArray:x,_updateDisabledField:de,_getFieldArray:A,_reset:ye,_resetDefaultValues:()=>Ql(e.defaultValues)&&e.defaultValues().then(z=>{Ae(z,e.resetOptions),d.state.next({isLoading:!1})}),_updateFormState:z=>{n={...n,...z}},_disableForm:he,_subjects:d,_proxyFormState:u,_setErrors:S,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(z){o=z},get _defaultValues(){return s},get _names(){return a},set _names(z){a=z},get _formState(){return n},set _formState(z){n=z},get _options(){return e},set _options(z){e={...e,...z}}},trigger:B,register:we,handleSubmit:me,watch:ue,setValue:M,getValues:W,reset:Ae,resetField:Y,clearErrors:te,unregister:ge,setError:ne,setFocus:(z,Q={})=>{const ie=je(r,z),Ee=ie&&ie._f;if(Ee){const Se=Ee.refs?Ee.refs[0]:Ee.ref;Se.focus&&(Se.focus(),Q.shouldSelect&&Ql(Se.select)&&Se.select())}},getFieldState:G}}function bl(t={}){const e=F.useRef(void 0),n=F.useRef(void 0),[r,s]=F.useState({isDirty:!1,isValidating:!1,isLoading:Ql(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Ql(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...tEe(t),formState:r});const i=e.current.control;return i._options=t,VL({subject:i._subjects.state,next:o=>{Ure(o,i._proxyFormState,i._updateFormState,!0)&&s({...i._formState})}}),F.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),F.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),F.useEffect(()=>{t.values&&!hd(t.values,n.current)?(i._reset(t.values,i._options.resetOptions),n.current=t.values,s(o=>({...o}))):i._resetDefaultValues()},[t.values,i]),F.useEffect(()=>{t.errors&&i._setErrors(t.errors)},[t.errors,i]),F.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),F.useEffect(()=>{t.shouldUnregister&&i._subjects.values.next({values:i._getWatch()})},[t.shouldUnregister,i]),e.current.formState=Wre(r,i),e.current}const yU=(t,e,n)=>{if(t&&"reportValidity"in t){const r=je(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},ese=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?yU(r.ref,n,t):r.refs&&r.refs.forEach(s=>yU(s,n,t))}},nEe=(t,e)=>{e.shouldUseNativeValidation&&ese(t,e);const n={};for(const r in t){const s=je(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(rEe(e.names||Object.keys(t),r)){const o=Object.assign({},je(n,r));mn(o,"root",i),mn(n,r,o)}else mn(n,r,i)}return n},rEe=(t,e)=>t.some(n=>n.startsWith(e+"."));var sEe=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,i=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(d){return t.push(d)})}),e){var l=n[o].types,c=l&&l[r.code];n[o]=qre(o,e,n,s,c?[].concat(c,r.message):r.message)}t.shift()}return n},bc=function(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(c){return i.shouldUseNativeValidation&&ese({},i),{errors:{},values:n.raw?r:c}})}catch(c){return a(c)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:nEe(sEe(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}};const be=Symbol.for("drizzle:entityKind");function $s(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,be))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(t).constructor;if(n)for(;n;){if(be in n&&n[be]===e[be])return!0;n=Object.getPrototypeOf(n)}return!1}var TY;TY=be;class Ug{constructor(e,n){ee(this,"name");ee(this,"keyAsName");ee(this,"primary");ee(this,"notNull");ee(this,"default");ee(this,"defaultFn");ee(this,"onUpdateFn");ee(this,"hasDefault");ee(this,"isUnique");ee(this,"uniqueName");ee(this,"uniqueType");ee(this,"dataType");ee(this,"columnType");ee(this,"enumValues");ee(this,"generated");ee(this,"generatedIdentity");ee(this,"config");this.table=e,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}ee(Ug,TY,"Column");var kY;kY=be;class tse{constructor(e,n,r){ee(this,"config");ee(this,"$default",this.$defaultFn);ee(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}ee(tse,kY,"ColumnBuilder");const og=Symbol.for("drizzle:Name");var EY;EY=be;class nse{constructor(e,n){ee(this,"reference");ee(this,"_onUpdate","no action");ee(this,"_onDelete","no action");this.reference=()=>{const{name:r,columns:s,foreignColumns:i}=e();return{name:r,columns:s,foreignTable:i[0].table,foreignColumns:i}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new rse(e,this)}}ee(nse,EY,"PgForeignKeyBuilder");var $Y;$Y=be;class rse{constructor(e,n){ee(this,"reference");ee(this,"onUpdate");ee(this,"onDelete");this.table=e,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}getName(){const{name:e,columns:n,foreignColumns:r}=this.reference(),s=n.map(a=>a.name),i=r.map(a=>a.name),o=[this.table[og],...s,r[0].table[og],...i];return e??`${o.join("_")}_fk`}}ee(rse,$Y,"PgForeignKey");function iEe(t,...e){return t(...e)}function oEe(t,e){return`${t[og]}_${e.join("_")}_unique`}function vU(t,e,n){for(let r=e;r<t.length;r++){const s=t[r];if(s==="\\"){r++;continue}if(s==='"')return[t.slice(e,r).replace(/\\/g,""),r+1];if(!n&&(s===","||s==="}"))return[t.slice(e,r).replace(/\\/g,""),r]}return[t.slice(e).replace(/\\/g,""),t.length]}function sse(t,e=0){const n=[];let r=e,s=!1;for(;r<t.length;){const i=t[r];if(i===","){(s||r===e)&&n.push(""),s=!0,r++;continue}if(s=!1,i==="\\"){r+=2;continue}if(i==='"'){const[l,c]=vU(t,r+1,!0);n.push(l),r=c;continue}if(i==="}")return[n,r+1];if(i==="{"){const[l,c]=sse(t,r+1);n.push(l),r=c;continue}const[o,a]=vU(t,r,!1);n.push(o),r=a}return[n,r]}function aEe(t){const[e]=sse(t,1);return e}function ise(t){return`{${t.map(e=>Array.isArray(e)?ise(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var AY,IY;class rn extends(IY=tse,AY=be,IY){constructor(){super(...arguments);ee(this,"foreignKeyConfigs",[])}array(n){return new ase(this.config.name,this,n)}references(n,r={}){return this.foreignKeyConfigs.push({ref:n,actions:r}),this}unique(n,r){return this.config.isUnique=!0,this.config.uniqueName=n,this.config.uniqueType=r==null?void 0:r.nulls,this}generatedAlwaysAs(n){return this.config.generated={as:n,type:"always",mode:"stored"},this}buildForeignKeys(n,r){return this.foreignKeyConfigs.map(({ref:s,actions:i})=>iEe((o,a)=>{const l=new nse(()=>{const c=o();return{columns:[n],foreignColumns:[c]}});return a.onUpdate&&l.onUpdate(a.onUpdate),a.onDelete&&l.onDelete(a.onDelete),l.build(r)},s,i))}buildExtraConfigColumn(n){return new ose(n,this.config)}}ee(rn,AY,"PgColumnBuilder");var OY,PY;class Mt extends(PY=Ug,OY=be,PY){constructor(e,n){n.uniqueName||(n.uniqueName=oEe(e,[n.name])),super(e,n),this.table=e}}ee(Mt,OY,"PgColumn");var RY,DY;class ose extends(DY=Mt,RY=be,DY){constructor(){super(...arguments);ee(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});ee(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(n){return this.indexConfig.opClass=n,this}}ee(ose,RY,"ExtraConfigColumn");var jY,MY;class ase extends(MY=rn,jY=be,MY){constructor(e,n,r){super(e,"array","PgArray"),this.config.baseBuilder=n,this.config.size=r}build(e){const n=this.config.baseBuilder.build(e);return new XR(e,this.config,n)}}ee(ase,jY,"PgArrayBuilder");var FY,LY;const KT=class KT extends(LY=Mt,FY=be,LY){constructor(n,r,s,i){super(n,r);ee(this,"size");this.baseColumn=s,this.range=i,this.size=r.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(n){return typeof n=="string"&&(n=aEe(n)),n.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(n,r=!1){const s=n.map(i=>i===null?null:$s(this.baseColumn,KT)?this.baseColumn.mapToDriverValue(i,!0):this.baseColumn.mapToDriverValue(i));return r?s:ise(s)}};ee(KT,FY,"PgArray");let XR=KT;const xU=Symbol.for("drizzle:isPgEnum");function lEe(t){return!!t&&typeof t=="function"&&xU in t&&t[xU]===!0}var BY;BY=be;class GL{constructor(e,n,r,s=!1){this._={brand:"Subquery",sql:e,selectedFields:n,alias:r,isWith:s}}}ee(GL,BY,"Subquery");const cEe={startActiveSpan(t,e){return e()}},ag=Symbol.for("drizzle:ViewBaseConfig"),FI=Symbol.for("drizzle:Schema"),bU=Symbol.for("drizzle:Columns"),wU=Symbol.for("drizzle:ExtraConfigColumns"),LI=Symbol.for("drizzle:OriginalName"),BI=Symbol.for("drizzle:BaseName"),NN=Symbol.for("drizzle:IsAlias"),SU=Symbol.for("drizzle:ExtraConfigBuilder"),lse=Symbol.for("drizzle:IsDrizzleTable");var zY,VY,WY,UY,GY,HY,qY,KY,XY,YY,i2;let xo=(YY=be,XY=og,KY=LI,qY=FI,HY=bU,GY=wU,UY=BI,WY=NN,VY=lse,zY=SU,i2=class{constructor(e,n,r){ee(this,XY);ee(this,KY);ee(this,qY);ee(this,HY);ee(this,GY);ee(this,UY);ee(this,WY,!1);ee(this,VY,!0);ee(this,zY);this[og]=this[LI]=e,this[FI]=n,this[BI]=r}},ee(i2,YY,"Table"),ee(i2,"Symbol",{Name:og,Schema:FI,OriginalName:LI,Columns:bU,ExtraConfigColumns:wU,BaseName:BI,IsAlias:NN,ExtraConfigBuilder:SU}),i2);function cse(t){return typeof t=="object"&&t!==null&&lse in t}function uEe(t){return t!=null&&typeof t.getSQL=="function"}function dEe(t){var n;const e={sql:"",params:[]};for(const r of t)e.sql+=r.sql,e.params.push(...r.params),(n=r.typings)!=null&&n.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}var QY;QY=be;class ra{constructor(e){ee(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new ss([this])}}ee(ra,QY,"StringChunk");var ZY;ZY=be;const yh=class yh{constructor(e){ee(this,"decoder",use);ee(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return cEe.startActiveSpan("drizzle.buildSQL",n=>{const r=this.buildQueryFromSourceParams(this.queryChunks,e);return n==null||n.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,n){const r=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:s,escapeName:i,escapeParam:o,prepareTyping:a,inlineParams:l,paramStartIndex:c}=r;return dEe(e.map(u=>{var d;if($s(u,ra))return{sql:u.value.join(""),params:[]};if($s(u,_N))return{sql:i(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){const h=[new ra("(")];for(const[p,m]of u.entries())h.push(m),p<u.length-1&&h.push(new ra(", "));return h.push(new ra(")")),this.buildQueryFromSourceParams(h,r)}if($s(u,yh))return this.buildQueryFromSourceParams(u.queryChunks,{...r,inlineParams:l||u.shouldInlineParams});if($s(u,xo)){const h=u[xo.Symbol.Schema],p=u[xo.Symbol.Name];return{sql:h===void 0||u[NN]?i(p):i(h)+"."+i(p),params:[]}}if($s(u,Ug)){const h=s.getColumnCasing(u);if(n.invokeSource==="indexes")return{sql:i(h),params:[]};const p=u.table[xo.Symbol.Schema];return{sql:u.table[NN]||p===void 0?i(u.table[xo.Symbol.Name])+"."+i(h):i(p)+"."+i(u.table[xo.Symbol.Name])+"."+i(h),params:[]}}if($s(u,hse)){const h=u[ag].schema,p=u[ag].name;return{sql:h===void 0||u[ag].isAlias?i(p):i(h)+"."+i(p),params:[]}}if($s(u,HL)){if($s(u.value,kN))return{sql:o(c.value++,u),params:[u],typings:["none"]};const h=u.value===null?null:u.encoder.mapToDriverValue(u.value);if($s(h,yh))return this.buildQueryFromSourceParams([h],r);if(l)return{sql:this.mapInlineParam(h,r),params:[]};let p=["none"];return a&&(p=[a(u.encoder)]),{sql:o(c.value++,h),params:[h],typings:p}}return $s(u,kN)?{sql:o(c.value++,u),params:[u],typings:["none"]}:$s(u,yh.Aliased)&&u.fieldAlias!==void 0?{sql:i(u.fieldAlias),params:[]}:$s(u,GL)?u._.isWith?{sql:i(u._.alias),params:[]}:this.buildQueryFromSourceParams([new ra("("),u._.sql,new ra(") "),new _N(u._.alias)],r):lEe(u)?u.schema?{sql:i(u.schema)+"."+i(u.enumName),params:[]}:{sql:i(u.enumName),params:[]}:uEe(u)?(d=u.shouldOmitSQLParens)!=null&&d.call(u)?this.buildQueryFromSourceParams([u.getSQL()],r):this.buildQueryFromSourceParams([new ra("("),u.getSQL(),new ra(")")],r):l?{sql:this.mapInlineParam(u,r),params:[]}:{sql:o(c.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(e,{escapeString:n}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return n(e);if(typeof e=="object"){const r=e.toString();return n(r==="[object Object]"?JSON.stringify(e):r)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new yh.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};ee(yh,ZY,"SQL");let ss=yh;var JY;JY=be;class _N{constructor(e){ee(this,"brand");this.value=e}getSQL(){return new ss([this])}}ee(_N,JY,"Name");const use={mapFromDriverValue:t=>t},dse={mapToDriverValue:t=>t};({...use,...dse});var eQ;eQ=be;class HL{constructor(e,n=dse){ee(this,"brand");this.value=e,this.encoder=n}getSQL(){return new ss([this])}}ee(HL,eQ,"Param");function TN(t,...e){const n=[];(e.length>0||t.length>0&&t[0]!=="")&&n.push(new ra(t[0]));for(const[r,s]of e.entries())n.push(s,new ra(t[r+1]));return new ss(n)}(t=>{function e(){return new ss([])}t.empty=e;function n(l){return new ss(l)}t.fromList=n;function r(l){return new ss([new ra(l)])}t.raw=r;function s(l,c){const u=[];for(const[d,h]of l.entries())d>0&&c!==void 0&&u.push(c),u.push(h);return new ss(u)}t.join=s;function i(l){return new _N(l)}t.identifier=i;function o(l){return new kN(l)}t.placeholder=o;function a(l,c){return new HL(l,c)}t.param=a})(TN||(TN={}));(t=>{var n;n=be;const r=class r{constructor(i,o){ee(this,"isSelectionField",!1);this.sql=i,this.fieldAlias=o}getSQL(){return this.sql}clone(){return new r(this.sql,this.fieldAlias)}};ee(r,n,"SQL.Aliased");let e=r;t.Aliased=e})(ss||(ss={}));var tQ;tQ=be;class kN{constructor(e){this.name=e}getSQL(){return new ss([this])}}ee(kN,tQ,"Placeholder");const fse=Symbol.for("drizzle:IsDrizzleView");var nQ,rQ,sQ;sQ=be,rQ=ag,nQ=fse;class hse{constructor({name:e,schema:n,selectedFields:r,query:s}){ee(this,rQ);ee(this,nQ,!0);this[ag]={name:e,originalName:e,schema:n,selectedFields:r,query:s,isExisting:!s,isAlias:!1}}getSQL(){return new ss([this])}}ee(hse,sQ,"View");function fEe(t){return typeof t=="object"&&t!==null&&fse in t}Ug.prototype.getSQL=function(){return new ss([this])};xo.prototype.getSQL=function(){return new ss([this])};GL.prototype.getSQL=function(){return new ss([this])};function hEe(t){return t[xo.Symbol.Columns]}function pEe(t){return t[ag].selectedFields}function xs(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var iQ,oQ;class D1 extends(oQ=rn,iQ=be,oQ){generatedAlwaysAsIdentity(e){if(e){const{name:n,...r}=e;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:n,...r}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}ee(D1,iQ,"PgIntColumnBaseBuilder");var aQ,lQ;class pse extends(lQ=D1,aQ=be,lQ){constructor(e){super(e,"number","PgBigInt53")}build(e){return new mse(e,this.config)}}ee(pse,aQ,"PgBigInt53Builder");var cQ,uQ;class mse extends(uQ=Mt,cQ=be,uQ){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}ee(mse,cQ,"PgBigInt53");var dQ,fQ;class gse extends(fQ=D1,dQ=be,fQ){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new yse(e,this.config)}}ee(gse,dQ,"PgBigInt64Builder");var hQ,pQ;class yse extends(pQ=Mt,hQ=be,pQ){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}ee(yse,hQ,"PgBigInt64");function mEe(t,e){const{name:n,config:r}=xs(t,e);return r.mode==="number"?new pse(n):new gse(n)}var mQ,gQ;class vse extends(gQ=rn,mQ=be,gQ){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new xse(e,this.config)}}ee(vse,mQ,"PgBigSerial53Builder");var yQ,vQ;class xse extends(vQ=Mt,yQ=be,vQ){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}ee(xse,yQ,"PgBigSerial53");var xQ,bQ;class bse extends(bQ=rn,xQ=be,bQ){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new wse(e,this.config)}}ee(bse,xQ,"PgBigSerial64Builder");var wQ,SQ;class wse extends(SQ=Mt,wQ=be,SQ){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}ee(wse,wQ,"PgBigSerial64");function gEe(t,e){const{name:n,config:r}=xs(t,e);return r.mode==="number"?new vse(n):new bse(n)}var CQ,NQ;class Sse extends(NQ=rn,CQ=be,NQ){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Cse(e,this.config)}}ee(Sse,CQ,"PgBooleanBuilder");var _Q,TQ;class Cse extends(TQ=Mt,_Q=be,TQ){getSQLType(){return"boolean"}}ee(Cse,_Q,"PgBoolean");function Tu(t){return new Sse(t??"")}var kQ,EQ;class Nse extends(EQ=rn,kQ=be,EQ){constructor(e,n){super(e,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new _se(e,this.config)}}ee(Nse,kQ,"PgCharBuilder");var $Q,AQ;class _se extends(AQ=Mt,$Q=be,AQ){constructor(){super(...arguments);ee(this,"length",this.config.length);ee(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}ee(_se,$Q,"PgChar");function yEe(t,e={}){const{name:n,config:r}=xs(t,e);return new Nse(n,r)}var IQ,OQ;class Tse extends(OQ=rn,IQ=be,OQ){constructor(e){super(e,"string","PgCidr")}build(e){return new kse(e,this.config)}}ee(Tse,IQ,"PgCidrBuilder");var PQ,RQ;class kse extends(RQ=Mt,PQ=be,RQ){getSQLType(){return"cidr"}}ee(kse,PQ,"PgCidr");function vEe(t){return new Tse(t??"")}var DQ,jQ;class Ese extends(jQ=rn,DQ=be,jQ){constructor(e,n,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=r}build(e){return new $se(e,this.config)}}ee(Ese,DQ,"PgCustomColumnBuilder");var MQ,FQ;class $se extends(FQ=Mt,MQ=be,FQ){constructor(n,r){super(n,r);ee(this,"sqlName");ee(this,"mapTo");ee(this,"mapFrom");this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(n){return typeof this.mapFrom=="function"?this.mapFrom(n):n}mapToDriverValue(n){return typeof this.mapTo=="function"?this.mapTo(n):n}}ee($se,MQ,"PgCustomColumn");function xEe(t){return(e,n)=>{const{name:r,config:s}=xs(e,n);return new Ese(r,s,t)}}var LQ,BQ;class nv extends(BQ=rn,LQ=be,BQ){defaultNow(){return this.default(TN`now()`)}}ee(nv,LQ,"PgDateColumnBaseBuilder");var zQ,VQ;class Ase extends(VQ=nv,zQ=be,VQ){constructor(e){super(e,"date","PgDate")}build(e){return new Ise(e,this.config)}}ee(Ase,zQ,"PgDateBuilder");var WQ,UQ;class Ise extends(UQ=Mt,WQ=be,UQ){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}ee(Ise,WQ,"PgDate");var GQ,HQ;class Ose extends(HQ=nv,GQ=be,HQ){constructor(e){super(e,"string","PgDateString")}build(e){return new Pse(e,this.config)}}ee(Ose,GQ,"PgDateStringBuilder");var qQ,KQ;class Pse extends(KQ=Mt,qQ=be,KQ){getSQLType(){return"date"}}ee(Pse,qQ,"PgDateString");function bEe(t,e){const{name:n,config:r}=xs(t,e);return(r==null?void 0:r.mode)==="date"?new Ase(n):new Ose(n)}var XQ,YQ;class Rse extends(YQ=rn,XQ=be,YQ){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Dse(e,this.config)}}ee(Rse,XQ,"PgDoublePrecisionBuilder");var QQ,ZQ;class Dse extends(ZQ=Mt,QQ=be,ZQ){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}ee(Dse,QQ,"PgDoublePrecision");function wEe(t){return new Rse(t??"")}var JQ,eZ;class jse extends(eZ=rn,JQ=be,eZ){constructor(e){super(e,"string","PgInet")}build(e){return new Mse(e,this.config)}}ee(jse,JQ,"PgInetBuilder");var tZ,nZ;class Mse extends(nZ=Mt,tZ=be,nZ){getSQLType(){return"inet"}}ee(Mse,tZ,"PgInet");function SEe(t){return new jse(t??"")}var rZ,sZ;class Fse extends(sZ=D1,rZ=be,sZ){constructor(e){super(e,"number","PgInteger")}build(e){return new Lse(e,this.config)}}ee(Fse,rZ,"PgIntegerBuilder");var iZ,oZ;class Lse extends(oZ=Mt,iZ=be,oZ){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}ee(Lse,iZ,"PgInteger");function pt(t){return new Fse(t??"")}var aZ,lZ;class Bse extends(lZ=rn,aZ=be,lZ){constructor(e,n){super(e,"string","PgInterval"),this.config.intervalConfig=n}build(e){return new zse(e,this.config)}}ee(Bse,aZ,"PgIntervalBuilder");var cZ,uZ;class zse extends(uZ=Mt,cZ=be,uZ){constructor(){super(...arguments);ee(this,"fields",this.config.intervalConfig.fields);ee(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const n=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${n}${r}`}}ee(zse,cZ,"PgInterval");function CEe(t,e={}){const{name:n,config:r}=xs(t,e);return new Bse(n,r)}var dZ,fZ;class Vse extends(fZ=rn,dZ=be,fZ){constructor(e){super(e,"json","PgJson")}build(e){return new Wse(e,this.config)}}ee(Vse,dZ,"PgJsonBuilder");var hZ,pZ;class Wse extends(pZ=Mt,hZ=be,pZ){constructor(e,n){super(e,n)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}ee(Wse,hZ,"PgJson");function ul(t){return new Vse(t??"")}var mZ,gZ;class Use extends(gZ=rn,mZ=be,gZ){constructor(e){super(e,"json","PgJsonb")}build(e){return new Gse(e,this.config)}}ee(Use,mZ,"PgJsonbBuilder");var yZ,vZ;class Gse extends(vZ=Mt,yZ=be,vZ){constructor(e,n){super(e,n)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}ee(Gse,yZ,"PgJsonb");function NEe(t){return new Use(t??"")}var xZ,bZ;class Hse extends(bZ=rn,xZ=be,bZ){constructor(e){super(e,"array","PgLine")}build(e){return new qse(e,this.config)}}ee(Hse,xZ,"PgLineBuilder");var wZ,SZ;class qse extends(SZ=Mt,wZ=be,SZ){getSQLType(){return"line"}mapFromDriverValue(e){const[n,r,s]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r),Number.parseFloat(s)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}ee(qse,wZ,"PgLine");var CZ,NZ;class Kse extends(NZ=rn,CZ=be,NZ){constructor(e){super(e,"json","PgLineABC")}build(e){return new Xse(e,this.config)}}ee(Kse,CZ,"PgLineABCBuilder");var _Z,TZ;class Xse extends(TZ=Mt,_Z=be,TZ){getSQLType(){return"line"}mapFromDriverValue(e){const[n,r,s]=e.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(r),c:Number.parseFloat(s)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}ee(Xse,_Z,"PgLineABC");function _Ee(t,e){const{name:n,config:r}=xs(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new Hse(n):new Kse(n)}var kZ,EZ;class Yse extends(EZ=rn,kZ=be,EZ){constructor(e){super(e,"string","PgMacaddr")}build(e){return new Qse(e,this.config)}}ee(Yse,kZ,"PgMacaddrBuilder");var $Z,AZ;class Qse extends(AZ=Mt,$Z=be,AZ){getSQLType(){return"macaddr"}}ee(Qse,$Z,"PgMacaddr");function TEe(t){return new Yse(t??"")}var IZ,OZ;class Zse extends(OZ=rn,IZ=be,OZ){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new Jse(e,this.config)}}ee(Zse,IZ,"PgMacaddr8Builder");var PZ,RZ;class Jse extends(RZ=Mt,PZ=be,RZ){getSQLType(){return"macaddr8"}}ee(Jse,PZ,"PgMacaddr8");function kEe(t){return new Zse(t??"")}var DZ,jZ;class eie extends(jZ=rn,DZ=be,jZ){constructor(e,n,r){super(e,"string","PgNumeric"),this.config.precision=n,this.config.scale=r}build(e){return new tie(e,this.config)}}ee(eie,DZ,"PgNumericBuilder");var MZ,FZ;class tie extends(FZ=Mt,MZ=be,FZ){constructor(n,r){super(n,r);ee(this,"precision");ee(this,"scale");this.precision=r.precision,this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}ee(tie,MZ,"PgNumeric");function nie(t,e){const{name:n,config:r}=xs(t,e);return new eie(n,r==null?void 0:r.precision,r==null?void 0:r.scale)}const Sr=nie;var LZ,BZ;class rie extends(BZ=rn,LZ=be,BZ){constructor(e){super(e,"array","PgPointTuple")}build(e){return new sie(e,this.config)}}ee(rie,LZ,"PgPointTupleBuilder");var zZ,VZ;class sie extends(VZ=Mt,zZ=be,VZ){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[n,r]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}ee(sie,zZ,"PgPointTuple");var WZ,UZ;class iie extends(UZ=rn,WZ=be,UZ){constructor(e){super(e,"json","PgPointObject")}build(e){return new oie(e,this.config)}}ee(iie,WZ,"PgPointObjectBuilder");var GZ,HZ;class oie extends(HZ=Mt,GZ=be,HZ){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[n,r]=e.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(r)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}ee(oie,GZ,"PgPointObject");function EEe(t,e){const{name:n,config:r}=xs(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new rie(n):new iie(n)}function $Ee(t){const e=[];for(let n=0;n<t.length;n+=2)e.push(Number.parseInt(t.slice(n,n+2),16));return new Uint8Array(e)}function CU(t,e){const n=new ArrayBuffer(8),r=new DataView(n);for(let s=0;s<8;s++)r.setUint8(s,t[e+s]);return r.getFloat64(0,!0)}function aie(t){const e=$Ee(t);let n=0;const r=e[n];n+=1;const s=new DataView(e.buffer),i=s.getUint32(n,r===1);if(n+=4,i&536870912&&(s.getUint32(n,r===1),n+=4),(i&65535)===1){const o=CU(e,n);n+=8;const a=CU(e,n);return n+=8,[o,a]}throw new Error("Unsupported geometry type")}var qZ,KZ;class lie extends(KZ=rn,qZ=be,KZ){constructor(e){super(e,"array","PgGeometry")}build(e){return new cie(e,this.config)}}ee(lie,qZ,"PgGeometryBuilder");var XZ,YZ;class cie extends(YZ=Mt,XZ=be,YZ){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return aie(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}ee(cie,XZ,"PgGeometry");var QZ,ZZ;class uie extends(ZZ=rn,QZ=be,ZZ){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new die(e,this.config)}}ee(uie,QZ,"PgGeometryObjectBuilder");var JZ,eJ;class die extends(eJ=Mt,JZ=be,eJ){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const n=aie(e);return{x:n[0],y:n[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}ee(die,JZ,"PgGeometryObject");function AEe(t,e){const{name:n,config:r}=xs(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new lie(n):new uie(n)}var tJ,nJ;class fie extends(nJ=rn,tJ=be,nJ){constructor(e,n){super(e,"number","PgReal"),this.config.length=n}build(e){return new hie(e,this.config)}}ee(fie,tJ,"PgRealBuilder");var rJ,sJ;class hie extends(sJ=Mt,rJ=be,sJ){constructor(n,r){super(n,r);ee(this,"mapFromDriverValue",n=>typeof n=="string"?Number.parseFloat(n):n)}getSQLType(){return"real"}}ee(hie,rJ,"PgReal");function IEe(t){return new fie(t??"")}var iJ,oJ;class pie extends(oJ=rn,iJ=be,oJ){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new mie(e,this.config)}}ee(pie,iJ,"PgSerialBuilder");var aJ,lJ;class mie extends(lJ=Mt,aJ=be,lJ){getSQLType(){return"serial"}}ee(mie,aJ,"PgSerial");function hn(t){return new pie(t??"")}var cJ,uJ;class gie extends(uJ=D1,cJ=be,uJ){constructor(e){super(e,"number","PgSmallInt")}build(e){return new yie(e,this.config)}}ee(gie,cJ,"PgSmallIntBuilder");var dJ,fJ;class yie extends(fJ=Mt,dJ=be,fJ){constructor(){super(...arguments);ee(this,"mapFromDriverValue",n=>typeof n=="string"?Number(n):n)}getSQLType(){return"smallint"}}ee(yie,dJ,"PgSmallInt");function OEe(t){return new gie(t??"")}var hJ,pJ;class vie extends(pJ=rn,hJ=be,pJ){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new xie(e,this.config)}}ee(vie,hJ,"PgSmallSerialBuilder");var mJ,gJ;class xie extends(gJ=Mt,mJ=be,gJ){getSQLType(){return"smallserial"}}ee(xie,mJ,"PgSmallSerial");function PEe(t){return new vie(t??"")}var yJ,vJ;class bie extends(vJ=rn,yJ=be,vJ){constructor(e,n){super(e,"string","PgText"),this.config.enumValues=n.enum}build(e){return new wie(e,this.config)}}ee(bie,yJ,"PgTextBuilder");var xJ,bJ;class wie extends(bJ=Mt,xJ=be,bJ){constructor(){super(...arguments);ee(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}ee(wie,xJ,"PgText");function ve(t,e={}){const{name:n,config:r}=xs(t,e);return new bie(n,r)}var wJ,SJ;class Sie extends(SJ=nv,wJ=be,SJ){constructor(e,n,r){super(e,"string","PgTime"),this.withTimezone=n,this.precision=r,this.config.withTimezone=n,this.config.precision=r}build(e){return new Cie(e,this.config)}}ee(Sie,wJ,"PgTimeBuilder");var CJ,NJ;class Cie extends(NJ=Mt,CJ=be,NJ){constructor(n,r){super(n,r);ee(this,"withTimezone");ee(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}ee(Cie,CJ,"PgTime");function REe(t,e={}){const{name:n,config:r}=xs(t,e);return new Sie(n,r.withTimezone??!1,r.precision)}var _J,TJ;class Nie extends(TJ=nv,_J=be,TJ){constructor(e,n,r){super(e,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=r}build(e){return new _ie(e,this.config)}}ee(Nie,_J,"PgTimestampBuilder");var kJ,EJ;class _ie extends(EJ=Mt,kJ=be,EJ){constructor(n,r){super(n,r);ee(this,"withTimezone");ee(this,"precision");ee(this,"mapFromDriverValue",n=>new Date(this.withTimezone?n:n+"+0000"));ee(this,"mapToDriverValue",n=>n.toISOString());this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}ee(_ie,kJ,"PgTimestamp");var $J,AJ;class Tie extends(AJ=nv,$J=be,AJ){constructor(e,n,r){super(e,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=r}build(e){return new kie(e,this.config)}}ee(Tie,$J,"PgTimestampStringBuilder");var IJ,OJ;class kie extends(OJ=Mt,IJ=be,OJ){constructor(n,r){super(n,r);ee(this,"withTimezone");ee(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}ee(kie,IJ,"PgTimestampString");function dt(t,e={}){const{name:n,config:r}=xs(t,e);return(r==null?void 0:r.mode)==="string"?new Tie(n,r.withTimezone??!1,r.precision):new Nie(n,(r==null?void 0:r.withTimezone)??!1,r==null?void 0:r.precision)}var PJ,RJ;class Eie extends(RJ=rn,PJ=be,RJ){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(TN`gen_random_uuid()`)}build(e){return new $ie(e,this.config)}}ee(Eie,PJ,"PgUUIDBuilder");var DJ,jJ;class $ie extends(jJ=Mt,DJ=be,jJ){getSQLType(){return"uuid"}}ee($ie,DJ,"PgUUID");function DEe(t){return new Eie(t??"")}var MJ,FJ;class Aie extends(FJ=rn,MJ=be,FJ){constructor(e,n){super(e,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new Iie(e,this.config)}}ee(Aie,MJ,"PgVarcharBuilder");var LJ,BJ;class Iie extends(BJ=Mt,LJ=be,BJ){constructor(){super(...arguments);ee(this,"length",this.config.length);ee(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}ee(Iie,LJ,"PgVarchar");function EN(t,e={}){const{name:n,config:r}=xs(t,e);return new Aie(n,r)}var zJ,VJ;class Oie extends(VJ=rn,zJ=be,VJ){constructor(e,n){super(e,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(e){return new Pie(e,this.config)}}ee(Oie,zJ,"PgBinaryVectorBuilder");var WJ,UJ;class Pie extends(UJ=Mt,WJ=be,UJ){constructor(){super(...arguments);ee(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}ee(Pie,WJ,"PgBinaryVector");function jEe(t,e){const{name:n,config:r}=xs(t,e);return new Oie(n,r)}var GJ,HJ;class Rie extends(HJ=rn,GJ=be,HJ){constructor(e,n){super(e,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(e){return new Die(e,this.config)}}ee(Rie,GJ,"PgHalfVectorBuilder");var qJ,KJ;class Die extends(KJ=Mt,qJ=be,KJ){constructor(){super(...arguments);ee(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}ee(Die,qJ,"PgHalfVector");function MEe(t,e){const{name:n,config:r}=xs(t,e);return new Rie(n,r)}var XJ,YJ;class jie extends(YJ=rn,XJ=be,YJ){constructor(e,n){super(e,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(e){return new Mie(e,this.config)}}ee(jie,XJ,"PgSparseVectorBuilder");var QJ,ZJ;class Mie extends(ZJ=Mt,QJ=be,ZJ){constructor(){super(...arguments);ee(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}ee(Mie,QJ,"PgSparseVector");function FEe(t,e){const{name:n,config:r}=xs(t,e);return new jie(n,r)}var JJ,eee;class Fie extends(eee=rn,JJ=be,eee){constructor(e,n){super(e,"array","PgVector"),this.config.dimensions=n.dimensions}build(e){return new Lie(e,this.config)}}ee(Fie,JJ,"PgVectorBuilder");var tee,nee;class Lie extends(nee=Mt,tee=be,nee){constructor(){super(...arguments);ee(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}ee(Lie,tee,"PgVector");function LEe(t,e){const{name:n,config:r}=xs(t,e);return new Fie(n,r)}function BEe(){return{bigint:mEe,bigserial:gEe,boolean:Tu,char:yEe,cidr:vEe,customType:xEe,date:bEe,doublePrecision:wEe,inet:SEe,integer:pt,interval:CEe,json:ul,jsonb:NEe,line:_Ee,macaddr:TEe,macaddr8:kEe,numeric:nie,point:EEe,geometry:AEe,real:IEe,serial:hn,smallint:OEe,smallserial:PEe,text:ve,time:REe,timestamp:dt,uuid:DEe,varchar:EN,bit:jEe,halfvec:MEe,sparsevec:FEe,vector:LEe}}const YR=Symbol.for("drizzle:PgInlineForeignKeys"),NU=Symbol.for("drizzle:EnableRLS");var ree,see,iee,oee,aee;class $N extends(aee=xo,oee=be,iee=YR,see=NU,ree=xo.Symbol.ExtraConfigBuilder,aee){constructor(){super(...arguments);ee(this,iee,[]);ee(this,see,!1);ee(this,ree)}}ee($N,oee,"PgTable"),ee($N,"Symbol",Object.assign({},xo.Symbol,{InlineForeignKeys:YR,EnableRLS:NU}));function zEe(t,e,n,r,s=t){const i=new $N(t,r,s),o=typeof e=="function"?e(BEe()):e,a=Object.fromEntries(Object.entries(o).map(([u,d])=>{const h=d;h.setName(u);const p=h.build(i);return i[YR].push(...h.buildForeignKeys(p,i)),[u,p]})),l=Object.fromEntries(Object.entries(o).map(([u,d])=>{const h=d;h.setName(u);const p=h.buildExtraConfigColumn(i);return[u,p]})),c=Object.assign(i,a);return c[xo.Symbol.Columns]=a,c[xo.Symbol.ExtraConfigColumns]=l,Object.assign(c,{enableRLS:()=>(c[$N.Symbol.EnableRLS]=!0,c)})}const vn=(t,e,n)=>zEe(t,e,n,void 0);var en;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(en||(en={}));var QR;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(QR||(QR={}));const Ge=en.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Jc=t=>{switch(typeof t){case"undefined":return Ge.undefined;case"string":return Ge.string;case"number":return isNaN(t)?Ge.nan:Ge.number;case"boolean":return Ge.boolean;case"function":return Ge.function;case"bigint":return Ge.bigint;case"symbol":return Ge.symbol;case"object":return Array.isArray(t)?Ge.array:t===null?Ge.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ge.promise:typeof Map<"u"&&t instanceof Map?Ge.map:typeof Set<"u"&&t instanceof Set?Ge.set:typeof Date<"u"&&t instanceof Date?Ge.date:Ge.object;default:return Ge.unknown}},_e=en.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),VEe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ko extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),r}static assert(e){if(!(e instanceof ko))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,en.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ko.create=t=>new ko(t);const Gg=(t,e)=>{let n;switch(t.code){case _e.invalid_type:t.received===Ge.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case _e.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,en.jsonStringifyReplacer)}`;break;case _e.unrecognized_keys:n=`Unrecognized key(s) in object: ${en.joinValues(t.keys,", ")}`;break;case _e.invalid_union:n="Invalid input";break;case _e.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${en.joinValues(t.options)}`;break;case _e.invalid_enum_value:n=`Invalid enum value. Expected ${en.joinValues(t.options)}, received '${t.received}'`;break;case _e.invalid_arguments:n="Invalid function arguments";break;case _e.invalid_return_type:n="Invalid function return type";break;case _e.invalid_date:n="Invalid date";break;case _e.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:en.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case _e.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case _e.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case _e.custom:n="Invalid input";break;case _e.invalid_intersection_types:n="Intersection results could not be merged";break;case _e.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case _e.not_finite:n="Number must be finite";break;default:n=e.defaultError,en.assertNever(t)}return{message:n}};let Bie=Gg;function WEe(t){Bie=t}function AN(){return Bie}const IN=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}},UEe=[];function Me(t,e){const n=AN(),r=IN({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Gg?void 0:Gg].filter(s=>!!s)});t.common.issues.push(r)}class ui{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Nt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return ui.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Nt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Nt=Object.freeze({status:"aborted"}),Bm=t=>({status:"dirty",value:t}),Oi=t=>({status:"valid",value:t}),ZR=t=>t.status==="aborted",JR=t=>t.status==="dirty",sp=t=>t.status==="valid",Q0=t=>typeof Promise<"u"&&t instanceof Promise;function ON(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function zie(t,e,n,r,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var nt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(nt||(nt={}));var Vx,Wx;class wc{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const _U=(t,e)=>{if(sp(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ko(t.common.issues);return this._error=n,this._error}}};function jt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{var l,c;const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??a.defaultError}:typeof a.data>"u"?{message:(l=u??r)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(c=u??n)!==null&&c!==void 0?c:a.defaultError}},description:s}}class Bt{get description(){return this._def.description}_getType(e){return Jc(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Jc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ui,ctx:{common:e.parent.common,data:e.data,parsedType:Jc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Q0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Jc(e)},i=this._parseSync({data:e,path:s.path,parent:s});return _U(s,i)}"~validate"(e){var n,r;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Jc(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:s});return sp(i)?{value:i.value}:{issues:s.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>sp(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Jc(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Q0(s)?s:Promise.resolve(s));return _U(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:_e.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new wl({schema:this,typeName:St.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return cc.create(this,this._def)}nullable(){return nf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return dl.create(this)}promise(){return qg.create(this,this._def)}or(e){return tb.create([this,e],this._def)}and(e){return nb.create(this,e,this._def)}transform(e){return new wl({...jt(this._def),schema:this,typeName:St.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new ab({...jt(this._def),innerType:this,defaultValue:n,typeName:St.ZodDefault})}brand(){return new qL({typeName:St.ZodBranded,type:this,...jt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new lb({...jt(this._def),innerType:this,catchValue:n,typeName:St.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return j1.create(this,e)}readonly(){return cb.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const GEe=/^c[^\s-]{8,}$/i,HEe=/^[0-9a-z]+$/,qEe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,KEe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,XEe=/^[a-z0-9_-]{21}$/i,YEe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,QEe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ZEe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,JEe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let zI;const e$e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,t$e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,n$e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,r$e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,s$e=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,i$e=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Vie="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",o$e=new RegExp(`^${Vie}$`);function Wie(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function a$e(t){return new RegExp(`^${Wie(t)}$`)}function Uie(t){let e=`${Vie}T${Wie(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function l$e(t,e){return!!((e==="v4"||!e)&&e$e.test(t)||(e==="v6"||!e)&&n$e.test(t))}function c$e(t,e){if(!YEe.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function u$e(t,e){return!!((e==="v4"||!e)&&t$e.test(t)||(e==="v6"||!e)&&r$e.test(t))}class ol extends Bt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ge.string){const i=this._getOrReturnCtx(e);return Me(i,{code:_e.invalid_type,expected:Ge.string,received:i.parsedType}),Nt}const r=new ui;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:_e.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:_e.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Me(s,{code:_e.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Me(s,{code:_e.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")ZEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"email",code:_e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")zI||(zI=new RegExp(JEe,"u")),zI.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"emoji",code:_e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")KEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"uuid",code:_e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")XEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"nanoid",code:_e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")GEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"cuid",code:_e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")HEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"cuid2",code:_e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")qEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"ulid",code:_e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Me(s,{validation:"url",code:_e.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"regex",code:_e.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Me(s,{code:_e.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Me(s,{code:_e.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Me(s,{code:_e.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Uie(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{code:_e.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?o$e.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{code:_e.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?a$e(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{code:_e.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?QEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"duration",code:_e.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?l$e(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"ip",code:_e.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?c$e(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"jwt",code:_e.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?u$e(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"cidr",code:_e.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?s$e.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"base64",code:_e.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?i$e.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"base64url",code:_e.invalid_string,message:i.message}),r.dirty()):en.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:_e.invalid_string,...nt.errToObj(r)})}_addCheck(e){return new ol({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...nt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...nt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...nt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...nt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...nt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...nt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...nt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...nt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...nt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...nt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...nt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...nt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...nt.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...nt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...nt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...nt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...nt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...nt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...nt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...nt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...nt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...nt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...nt.errToObj(n)})}nonempty(e){return this.min(1,nt.errToObj(e))}trim(){return new ol({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ol({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ol({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ol.create=t=>{var e;return new ol({checks:[],typeName:St.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...jt(t)})};function d$e(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Jd extends Bt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ge.number){const i=this._getOrReturnCtx(e);return Me(i,{code:_e.invalid_type,expected:Ge.number,received:i.parsedType}),Nt}let r;const s=new ui;for(const i of this._def.checks)i.kind==="int"?en.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Me(r,{code:_e.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:_e.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:_e.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?d$e(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Me(r,{code:_e.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Me(r,{code:_e.not_finite,message:i.message}),s.dirty()):en.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,nt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,nt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,nt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,nt.toString(n))}setLimit(e,n,r,s){return new Jd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:nt.toString(s)}]})}_addCheck(e){return new Jd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:nt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:nt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:nt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:nt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:nt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:nt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:nt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:nt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:nt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&en.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Jd.create=t=>new Jd({checks:[],typeName:St.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...jt(t)});class ef extends Bt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ge.bigint)return this._getInvalidInput(e);let r;const s=new ui;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:_e.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:_e.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:_e.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):en.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Me(n,{code:_e.invalid_type,expected:Ge.bigint,received:n.parsedType}),Nt}gte(e,n){return this.setLimit("min",e,!0,nt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,nt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,nt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,nt.toString(n))}setLimit(e,n,r,s){return new ef({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:nt.toString(s)}]})}_addCheck(e){return new ef({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:nt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:nt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:nt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:nt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:nt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ef.create=t=>{var e;return new ef({checks:[],typeName:St.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...jt(t)})};class Z0 extends Bt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ge.boolean){const r=this._getOrReturnCtx(e);return Me(r,{code:_e.invalid_type,expected:Ge.boolean,received:r.parsedType}),Nt}return Oi(e.data)}}Z0.create=t=>new Z0({typeName:St.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...jt(t)});class ip extends Bt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ge.date){const i=this._getOrReturnCtx(e);return Me(i,{code:_e.invalid_type,expected:Ge.date,received:i.parsedType}),Nt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Me(i,{code:_e.invalid_date}),Nt}const r=new ui;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:_e.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:_e.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):en.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ip({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:nt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:nt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ip.create=t=>new ip({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:St.ZodDate,...jt(t)});class PN extends Bt{_parse(e){if(this._getType(e)!==Ge.symbol){const r=this._getOrReturnCtx(e);return Me(r,{code:_e.invalid_type,expected:Ge.symbol,received:r.parsedType}),Nt}return Oi(e.data)}}PN.create=t=>new PN({typeName:St.ZodSymbol,...jt(t)});class J0 extends Bt{_parse(e){if(this._getType(e)!==Ge.undefined){const r=this._getOrReturnCtx(e);return Me(r,{code:_e.invalid_type,expected:Ge.undefined,received:r.parsedType}),Nt}return Oi(e.data)}}J0.create=t=>new J0({typeName:St.ZodUndefined,...jt(t)});class eb extends Bt{_parse(e){if(this._getType(e)!==Ge.null){const r=this._getOrReturnCtx(e);return Me(r,{code:_e.invalid_type,expected:Ge.null,received:r.parsedType}),Nt}return Oi(e.data)}}eb.create=t=>new eb({typeName:St.ZodNull,...jt(t)});class Hg extends Bt{constructor(){super(...arguments),this._any=!0}_parse(e){return Oi(e.data)}}Hg.create=t=>new Hg({typeName:St.ZodAny,...jt(t)});class Vh extends Bt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Oi(e.data)}}Vh.create=t=>new Vh({typeName:St.ZodUnknown,...jt(t)});class ku extends Bt{_parse(e){const n=this._getOrReturnCtx(e);return Me(n,{code:_e.invalid_type,expected:Ge.never,received:n.parsedType}),Nt}}ku.create=t=>new ku({typeName:St.ZodNever,...jt(t)});class RN extends Bt{_parse(e){if(this._getType(e)!==Ge.undefined){const r=this._getOrReturnCtx(e);return Me(r,{code:_e.invalid_type,expected:Ge.void,received:r.parsedType}),Nt}return Oi(e.data)}}RN.create=t=>new RN({typeName:St.ZodVoid,...jt(t)});class dl extends Bt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Ge.array)return Me(n,{code:_e.invalid_type,expected:Ge.array,received:n.parsedType}),Nt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(Me(n,{code:o?_e.too_big:_e.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Me(n,{code:_e.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Me(n,{code:_e.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new wc(n,o,n.path,a)))).then(o=>ui.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new wc(n,o,n.path,a)));return ui.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new dl({...this._def,minLength:{value:e,message:nt.toString(n)}})}max(e,n){return new dl({...this._def,maxLength:{value:e,message:nt.toString(n)}})}length(e,n){return new dl({...this._def,exactLength:{value:e,message:nt.toString(n)}})}nonempty(e){return this.min(1,e)}}dl.create=(t,e)=>new dl({type:t,minLength:null,maxLength:null,exactLength:null,typeName:St.ZodArray,...jt(e)});function Cm(t){if(t instanceof ur){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=cc.create(Cm(r))}return new ur({...t._def,shape:()=>e})}else return t instanceof dl?new dl({...t._def,type:Cm(t.element)}):t instanceof cc?cc.create(Cm(t.unwrap())):t instanceof nf?nf.create(Cm(t.unwrap())):t instanceof Sc?Sc.create(t.items.map(e=>Cm(e))):t}class ur extends Bt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=en.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Ge.object){const c=this._getOrReturnCtx(e);return Me(c,{code:_e.invalid_type,expected:Ge.object,received:c.parsedType}),Nt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ku&&this._def.unknownKeys==="strip"))for(const c in s.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=i[c],d=s.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new wc(s,d,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof ku){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(c==="strict")a.length>0&&(Me(s,{code:_e.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=s.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new wc(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,h=await u.value;c.push({key:d,value:h,alwaysSet:u.alwaysSet})}return c}).then(c=>ui.mergeObjectSync(r,c)):ui.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return nt.errToObj,new ur({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const l=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=nt.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new ur({...this._def,unknownKeys:"strip"})}passthrough(){return new ur({...this._def,unknownKeys:"passthrough"})}extend(e){return new ur({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ur({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:St.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ur({...this._def,catchall:e})}pick(e){const n={};return en.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new ur({...this._def,shape:()=>n})}omit(e){const n={};return en.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new ur({...this._def,shape:()=>n})}deepPartial(){return Cm(this)}partial(e){const n={};return en.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new ur({...this._def,shape:()=>n})}required(e){const n={};return en.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof cc;)i=i._def.innerType;n[r]=i}}),new ur({...this._def,shape:()=>n})}keyof(){return Gie(en.objectKeys(this.shape))}}ur.create=(t,e)=>new ur({shape:()=>t,unknownKeys:"strip",catchall:ku.create(),typeName:St.ZodObject,...jt(e)});ur.strictCreate=(t,e)=>new ur({shape:()=>t,unknownKeys:"strict",catchall:ku.create(),typeName:St.ZodObject,...jt(e)});ur.lazycreate=(t,e)=>new ur({shape:t,unknownKeys:"strip",catchall:ku.create(),typeName:St.ZodObject,...jt(e)});class tb extends Bt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new ko(a.ctx.common.issues));return Me(n,{code:_e.invalid_union,unionErrors:o}),Nt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new ko(l));return Me(n,{code:_e.invalid_union,unionErrors:a}),Nt}}get options(){return this._def.options}}tb.create=(t,e)=>new tb({options:t,typeName:St.ZodUnion,...jt(e)});const Kc=t=>t instanceof sb?Kc(t.schema):t instanceof wl?Kc(t.innerType()):t instanceof ib?[t.value]:t instanceof tf?t.options:t instanceof ob?en.objectValues(t.enum):t instanceof ab?Kc(t._def.innerType):t instanceof J0?[void 0]:t instanceof eb?[null]:t instanceof cc?[void 0,...Kc(t.unwrap())]:t instanceof nf?[null,...Kc(t.unwrap())]:t instanceof qL||t instanceof cb?Kc(t.unwrap()):t instanceof lb?Kc(t._def.innerType):[];class xk extends Bt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ge.object)return Me(n,{code:_e.invalid_type,expected:Ge.object,received:n.parsedType}),Nt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Me(n,{code:_e.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Nt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=Kc(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new xk({typeName:St.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...jt(r)})}}function eD(t,e){const n=Jc(t),r=Jc(e);if(t===e)return{valid:!0,data:t};if(n===Ge.object&&r===Ge.object){const s=en.objectKeys(e),i=en.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const l=eD(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===Ge.array&&r===Ge.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],l=eD(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===Ge.date&&r===Ge.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class nb extends Bt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(ZR(i)||ZR(o))return Nt;const a=eD(i.value,o.value);return a.valid?((JR(i)||JR(o))&&n.dirty(),{status:n.value,value:a.data}):(Me(r,{code:_e.invalid_intersection_types}),Nt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}nb.create=(t,e,n)=>new nb({left:t,right:e,typeName:St.ZodIntersection,...jt(n)});class Sc extends Bt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ge.array)return Me(r,{code:_e.invalid_type,expected:Ge.array,received:r.parsedType}),Nt;if(r.data.length<this._def.items.length)return Me(r,{code:_e.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Nt;!this._def.rest&&r.data.length>this._def.items.length&&(Me(r,{code:_e.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new wc(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>ui.mergeArray(n,o)):ui.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Sc({...this._def,rest:e})}}Sc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Sc({items:t,typeName:St.ZodTuple,rest:null,...jt(e)})};class rb extends Bt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ge.object)return Me(r,{code:_e.invalid_type,expected:Ge.object,received:r.parsedType}),Nt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new wc(r,a,r.path,a)),value:o._parse(new wc(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?ui.mergeObjectAsync(n,s):ui.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Bt?new rb({keyType:e,valueType:n,typeName:St.ZodRecord,...jt(r)}):new rb({keyType:ol.create(),valueType:e,typeName:St.ZodRecord,...jt(n)})}}class DN extends Bt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ge.map)return Me(r,{code:_e.invalid_type,expected:Ge.map,received:r.parsedType}),Nt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:s._parse(new wc(r,a,r.path,[c,"key"])),value:i._parse(new wc(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Nt;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Nt;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}DN.create=(t,e,n)=>new DN({valueType:e,keyType:t,typeName:St.ZodMap,...jt(n)});class op extends Bt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ge.set)return Me(r,{code:_e.invalid_type,expected:Ge.set,received:r.parsedType}),Nt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Me(r,{code:_e.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Me(r,{code:_e.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Nt;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>i._parse(new wc(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new op({...this._def,minSize:{value:e,message:nt.toString(n)}})}max(e,n){return new op({...this._def,maxSize:{value:e,message:nt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}op.create=(t,e)=>new op({valueType:t,minSize:null,maxSize:null,typeName:St.ZodSet,...jt(e)});class lg extends Bt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ge.function)return Me(n,{code:_e.invalid_type,expected:Ge.function,received:n.parsedType}),Nt;function r(a,l){return IN({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,AN(),Gg].filter(c=>!!c),issueData:{code:_e.invalid_arguments,argumentsError:l}})}function s(a,l){return IN({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,AN(),Gg].filter(c=>!!c),issueData:{code:_e.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof qg){const a=this;return Oi(async function(...l){const c=new ko([]),u=await a._def.args.parseAsync(l,i).catch(p=>{throw c.addIssue(r(l,p)),c}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(p=>{throw c.addIssue(s(d,p)),c})})}else{const a=this;return Oi(function(...l){const c=a._def.args.safeParse(l,i);if(!c.success)throw new ko([r(l,c.error)]);const u=Reflect.apply(o,this,c.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new ko([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new lg({...this._def,args:Sc.create(e).rest(Vh.create())})}returns(e){return new lg({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new lg({args:e||Sc.create([]).rest(Vh.create()),returns:n||Vh.create(),typeName:St.ZodFunction,...jt(r)})}}class sb extends Bt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}sb.create=(t,e)=>new sb({getter:t,typeName:St.ZodLazy,...jt(e)});class ib extends Bt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Me(n,{received:n.data,code:_e.invalid_literal,expected:this._def.value}),Nt}return{status:"valid",value:e.data}}get value(){return this._def.value}}ib.create=(t,e)=>new ib({value:t,typeName:St.ZodLiteral,...jt(e)});function Gie(t,e){return new tf({values:t,typeName:St.ZodEnum,...jt(e)})}class tf extends Bt{constructor(){super(...arguments),Vx.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Me(n,{expected:en.joinValues(r),received:n.parsedType,code:_e.invalid_type}),Nt}if(ON(this,Vx)||zie(this,Vx,new Set(this._def.values)),!ON(this,Vx).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Me(n,{received:n.data,code:_e.invalid_enum_value,options:r}),Nt}return Oi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return tf.create(e,{...this._def,...n})}exclude(e,n=this._def){return tf.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Vx=new WeakMap;tf.create=Gie;class ob extends Bt{constructor(){super(...arguments),Wx.set(this,void 0)}_parse(e){const n=en.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ge.string&&r.parsedType!==Ge.number){const s=en.objectValues(n);return Me(r,{expected:en.joinValues(s),received:r.parsedType,code:_e.invalid_type}),Nt}if(ON(this,Wx)||zie(this,Wx,new Set(en.getValidEnumValues(this._def.values))),!ON(this,Wx).has(e.data)){const s=en.objectValues(n);return Me(r,{received:r.data,code:_e.invalid_enum_value,options:s}),Nt}return Oi(e.data)}get enum(){return this._def.values}}Wx=new WeakMap;ob.create=(t,e)=>new ob({values:t,typeName:St.ZodNativeEnum,...jt(e)});class qg extends Bt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ge.promise&&n.common.async===!1)return Me(n,{code:_e.invalid_type,expected:Ge.promise,received:n.parsedType}),Nt;const r=n.parsedType===Ge.promise?n.data:Promise.resolve(n.data);return Oi(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}qg.create=(t,e)=>new qg({type:t,typeName:St.ZodPromise,...jt(e)});class wl extends Bt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===St.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Me(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Nt;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?Nt:l.status==="dirty"||n.value==="dirty"?Bm(l.value):l});{if(n.value==="aborted")return Nt;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Nt:a.status==="dirty"||n.value==="dirty"?Bm(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Nt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Nt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!sp(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>sp(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);en.assertNever(s)}}wl.create=(t,e,n)=>new wl({schema:t,typeName:St.ZodEffects,effect:e,...jt(n)});wl.createWithPreprocess=(t,e,n)=>new wl({schema:e,effect:{type:"preprocess",transform:t},typeName:St.ZodEffects,...jt(n)});class cc extends Bt{_parse(e){return this._getType(e)===Ge.undefined?Oi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}cc.create=(t,e)=>new cc({innerType:t,typeName:St.ZodOptional,...jt(e)});class nf extends Bt{_parse(e){return this._getType(e)===Ge.null?Oi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}nf.create=(t,e)=>new nf({innerType:t,typeName:St.ZodNullable,...jt(e)});class ab extends Bt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ge.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ab.create=(t,e)=>new ab({innerType:t,typeName:St.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...jt(e)});class lb extends Bt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Q0(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ko(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ko(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}lb.create=(t,e)=>new lb({innerType:t,typeName:St.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...jt(e)});class jN extends Bt{_parse(e){if(this._getType(e)!==Ge.nan){const r=this._getOrReturnCtx(e);return Me(r,{code:_e.invalid_type,expected:Ge.nan,received:r.parsedType}),Nt}return{status:"valid",value:e.data}}}jN.create=t=>new jN({typeName:St.ZodNaN,...jt(t)});const f$e=Symbol("zod_brand");class qL extends Bt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class j1 extends Bt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Nt:i.status==="dirty"?(n.dirty(),Bm(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Nt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new j1({in:e,out:n,typeName:St.ZodPipeline})}}class cb extends Bt{_parse(e){const n=this._def.innerType._parse(e),r=s=>(sp(s)&&(s.value=Object.freeze(s.value)),s);return Q0(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}cb.create=(t,e)=>new cb({innerType:t,typeName:St.ZodReadonly,...jt(e)});function TU(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function Hie(t,e={},n){return t?Hg.create().superRefine((r,s)=>{var i,o;const a=t(r);if(a instanceof Promise)return a.then(l=>{var c,u;if(!l){const d=TU(e,r),h=(u=(c=d.fatal)!==null&&c!==void 0?c:n)!==null&&u!==void 0?u:!0;s.addIssue({code:"custom",...d,fatal:h})}});if(!a){const l=TU(e,r),c=(o=(i=l.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0;s.addIssue({code:"custom",...l,fatal:c})}}):Hg.create()}const h$e={object:ur.lazycreate};var St;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(St||(St={}));const p$e=(t,e={message:`Input not instance of ${t.name}`})=>Hie(n=>n instanceof t,e),qie=ol.create,Kie=Jd.create,m$e=jN.create,g$e=ef.create,Xie=Z0.create,y$e=ip.create,v$e=PN.create,x$e=J0.create,b$e=eb.create,w$e=Hg.create,S$e=Vh.create,C$e=ku.create,N$e=RN.create,_$e=dl.create,T$e=ur.create,k$e=ur.strictCreate,E$e=tb.create,$$e=xk.create,A$e=nb.create,I$e=Sc.create,O$e=rb.create,P$e=DN.create,R$e=op.create,D$e=lg.create,j$e=sb.create,M$e=ib.create,F$e=tf.create,L$e=ob.create,B$e=qg.create,kU=wl.create,z$e=cc.create,V$e=nf.create,W$e=wl.createWithPreprocess,U$e=j1.create,G$e=()=>qie().optional(),H$e=()=>Kie().optional(),q$e=()=>Xie().optional(),K$e={string:t=>ol.create({...t,coerce:!0}),number:t=>Jd.create({...t,coerce:!0}),boolean:t=>Z0.create({...t,coerce:!0}),bigint:t=>ef.create({...t,coerce:!0}),date:t=>ip.create({...t,coerce:!0})},X$e=Nt;var q=Object.freeze({__proto__:null,defaultErrorMap:Gg,setErrorMap:WEe,getErrorMap:AN,makeIssue:IN,EMPTY_PATH:UEe,addIssueToContext:Me,ParseStatus:ui,INVALID:Nt,DIRTY:Bm,OK:Oi,isAborted:ZR,isDirty:JR,isValid:sp,isAsync:Q0,get util(){return en},get objectUtil(){return QR},ZodParsedType:Ge,getParsedType:Jc,ZodType:Bt,datetimeRegex:Uie,ZodString:ol,ZodNumber:Jd,ZodBigInt:ef,ZodBoolean:Z0,ZodDate:ip,ZodSymbol:PN,ZodUndefined:J0,ZodNull:eb,ZodAny:Hg,ZodUnknown:Vh,ZodNever:ku,ZodVoid:RN,ZodArray:dl,ZodObject:ur,ZodUnion:tb,ZodDiscriminatedUnion:xk,ZodIntersection:nb,ZodTuple:Sc,ZodRecord:rb,ZodMap:DN,ZodSet:op,ZodFunction:lg,ZodLazy:sb,ZodLiteral:ib,ZodEnum:tf,ZodNativeEnum:ob,ZodPromise:qg,ZodEffects:wl,ZodTransformer:wl,ZodOptional:cc,ZodNullable:nf,ZodDefault:ab,ZodCatch:lb,ZodNaN:jN,BRAND:f$e,ZodBranded:qL,ZodPipeline:j1,ZodReadonly:cb,custom:Hie,Schema:Bt,ZodSchema:Bt,late:h$e,get ZodFirstPartyTypeKind(){return St},coerce:K$e,any:w$e,array:_$e,bigint:g$e,boolean:Xie,date:y$e,discriminatedUnion:$$e,effect:kU,enum:F$e,function:D$e,instanceof:p$e,intersection:A$e,lazy:j$e,literal:M$e,map:P$e,nan:m$e,nativeEnum:L$e,never:C$e,null:b$e,nullable:V$e,number:Kie,object:T$e,oboolean:q$e,onumber:H$e,optional:z$e,ostring:G$e,pipeline:U$e,preprocess:W$e,promise:B$e,record:O$e,set:R$e,strictObject:k$e,string:qie,symbol:v$e,transformer:kU,tuple:I$e,undefined:x$e,union:E$e,unknown:S$e,void:N$e,NEVER:X$e,ZodIssueCode:_e,quotelessJson:VEe,ZodError:ko});const cr={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function Or(t,e){return e.includes(t.columnType)}function Y$e(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const Q$e=q.union([q.string(),q.number(),q.boolean(),q.null()]),Z$e=q.union([Q$e,q.record(q.any()),q.array(q.any())]),J$e=q.custom(t=>t instanceof Buffer);function Yie(t,e){const n=(e==null?void 0:e.zodInstance)??q,r=(e==null?void 0:e.coerce)??{};let s;return Y$e(t)&&(s=t.enumValues.length?n.enum(t.enumValues):n.string()),s||(Or(t,["PgGeometry","PgPointTuple"])?s=n.tuple([n.number(),n.number()]):Or(t,["PgGeometryObject","PgPointObject"])?s=n.object({x:n.number(),y:n.number()}):Or(t,["PgHalfVector","PgVector"])?(s=n.array(n.number()),s=t.dimensions?s.length(t.dimensions):s):Or(t,["PgLine"])?s=n.tuple([n.number(),n.number(),n.number()]):Or(t,["PgLineABC"])?s=n.object({a:n.number(),b:n.number(),c:n.number()}):Or(t,["PgArray"])?(s=n.array(Yie(t.baseColumn,n)),s=t.size?s.length(t.size):s):t.dataType==="array"?s=n.array(n.any()):t.dataType==="number"?s=eAe(t,n,r):t.dataType==="bigint"?s=tAe(t,n,r):t.dataType==="boolean"?s=r===!0||r.boolean?n.coerce.boolean():n.boolean():t.dataType==="date"?s=r===!0||r.date?n.coerce.date():n.date():t.dataType==="string"?s=nAe(t,n,r):t.dataType==="json"?s=Z$e:t.dataType==="custom"?s=n.any():t.dataType==="buffer"&&(s=J$e)),s||(s=n.any()),s}function eAe(t,e,n){let r=t.getSQLType().includes("unsigned"),s,i,o=!1;Or(t,["MySqlTinyInt","SingleStoreTinyInt"])?(s=r?0:cr.INT8_MIN,i=r?cr.INT8_UNSIGNED_MAX:cr.INT8_MAX,o=!0):Or(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(s=r?0:cr.INT16_MIN,i=r?cr.INT16_UNSIGNED_MAX:cr.INT16_MAX,o=!0):Or(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(s=r?0:cr.INT24_MIN,i=r?cr.INT24_UNSIGNED_MAX:cr.INT24_MAX,o=Or(t,["MySqlMediumInt","SingleStoreMediumInt"])):Or(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(s=r?0:cr.INT32_MIN,i=r?cr.INT32_UNSIGNED_MAX:cr.INT32_MAX,o=!0):Or(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(s=r?0:cr.INT48_MIN,i=r?cr.INT48_UNSIGNED_MAX:cr.INT48_MAX):Or(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(r=r||Or(t,["MySqlSerial","SingleStoreSerial"]),s=r?0:Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,o=!0):Or(t,["MySqlYear","SingleStoreYear"])?(s=1901,i=2155,o=!0):(s=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER);let a=n===!0||n!=null&&n.number?e.coerce.number():e.number();return a=a.min(s).max(i),o?a.int():a}function tAe(t,e,n){const r=t.getSQLType().includes("unsigned"),s=r?0n:cr.INT64_MIN,i=r?cr.INT64_UNSIGNED_MAX:cr.INT64_MAX;return(n===!0||n!=null&&n.bigint?e.coerce.bigint():e.bigint()).min(s).max(i)}function nAe(t,e,n){if(Or(t,["PgUUID"]))return e.string().uuid();let r,s,i=!1;Or(t,["PgVarchar","SQLiteText"])?r=t.length:Or(t,["MySqlVarChar","SingleStoreVarChar"])?r=t.length??cr.INT16_UNSIGNED_MAX:Or(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?r=cr.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?r=cr.INT24_UNSIGNED_MAX:t.textType==="text"?r=cr.INT16_UNSIGNED_MAX:r=cr.INT8_UNSIGNED_MAX),Or(t,["PgChar","MySqlChar","SingleStoreChar"])&&(r=t.length,i=!0),Or(t,["PgBinaryVector"])&&(s=/^[01]+$/,r=t.dimensions);let o=n===!0||n!=null&&n.string?e.coerce.string():e.string();return o=s?o.regex(s):o,r&&i?o.length(r):r?o.max(r):o}function Qie(t){return cse(t)?hEe(t):pEe(t)}function Zie(t,e,n,r){const s={};for(const[i,o]of Object.entries(t)){if(!$s(o,Ug)&&!$s(o,ss)&&!$s(o,ss.Aliased)&&typeof o=="object"){const d=cse(o)||fEe(o)?Qie(o):o;s[i]=Zie(d,e[i]??{},n,r);continue}const a=e[i];if(a!==void 0&&typeof a!="function"){s[i]=a;continue}const l=$s(o,Ug)?o:void 0,c=l?Yie(l,r):q.any(),u=typeof a=="function"?a(c):c;n.never(l)||(s[i]=u,l&&(n.nullable(l)&&(s[i]=s[i].nullable()),n.optional(l)&&(s[i]=s[i].optional())))}return q.object(s)}const rAe={never:t=>{var e,n;return((e=t==null?void 0:t.generated)==null?void 0:e.type)==="always"||((n=t==null?void 0:t.generatedIdentity)==null?void 0:n.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},Cn=(t,e)=>{const n=Qie(t);return Zie(n,{},rAe)};q.object({id:q.number().optional(),name:q.string().min(2),address:q.string().min(2),phone:q.string().min(6),email:q.string().email().optional().nullable(),taxNumber:q.string().optional().nullable(),website:q.string().url().optional().nullable(),logoUrl:q.string().optional().nullable(),notes:q.string().optional().nullable(),createdAt:q.date().optional(),updatedAt:q.date().optional()});const rv=vn("users",{id:hn("id").primaryKey(),username:ve("username").notNull().unique(),password:ve("password").notNull(),fullName:ve("full_name").notNull(),role:ve("role").notNull().default("staff"),email:ve("email"),phone:ve("phone"),isActive:Tu("is_active").notNull().default(!0),lastLoginAt:dt("last_login_at"),permissions:ve("permissions").array(),createdAt:dt("created_at").notNull().defaultNow(),updatedAt:dt("updated_at").notNull().defaultNow()}),bk=vn("products",{id:hn("id").primaryKey(),name:ve("name").notNull(),description:ve("description"),productCode:EN("product_code",{length:50}).notNull().unique(),barcode:EN("barcode",{length:100}).unique(),productType:ve("product_type").notNull(),quantity:pt("quantity").notNull().default(0),minQuantity:pt("min_quantity").notNull().default(0),productionDate:dt("production_date"),expiryDate:dt("expiry_date"),costPrice:Sr("cost_price",{precision:10,scale:2}).notNull(),priceIqd:Sr("price_iqd",{precision:10,scale:2}).notNull(),categoryId:pt("category_id").references(()=>sAe.id),isWeightBased:Tu("is_weight_based").notNull().default(!1),enableDirectWeighing:Tu("enable_direct_weighing").notNull().default(!1),stock:pt("stock").notNull().default(0),imageUrl:ve("image_url"),thumbnailUrl:ve("thumbnail_url"),createdAt:dt("created_at").notNull().defaultNow(),updatedAt:dt("updated_at").notNull().defaultNow()}),sAe=vn("product_categories",{id:hn("id").primaryKey(),name:ve("name").notNull(),description:ve("description"),createdAt:dt("created_at").notNull().defaultNow()}),KL=vn("customers",{id:hn("id").primaryKey(),name:ve("name").notNull(),phone:ve("phone"),email:ve("email"),address:ve("address"),notes:ve("notes"),createdAt:dt("created_at").notNull().defaultNow()}),iAe=vn("sales",{id:hn("id").primaryKey(),productId:pt("product_id").notNull().references(()=>bk.id),customerId:pt("customer_id").notNull().references(()=>KL.id),quantity:pt("quantity").notNull(),priceIqd:Sr("price_iqd",{precision:10,scale:2}).notNull(),discount:Sr("discount",{precision:10,scale:2}).notNull().default("0"),finalPriceIqd:Sr("final_price_iqd",{precision:10,scale:2}).notNull(),date:dt("date").notNull().defaultNow(),userId:pt("user_id").notNull().references(()=>rv.id),isInstallment:Tu("is_installment").notNull().default(!1)}),wk=vn("invoices",{id:hn("id").primaryKey(),saleId:pt("sale_id").notNull(),invoiceNumber:EN("invoice_number",{length:50}).notNull().unique(),customerName:ve("customer_name").notNull(),totalAmount:Sr("total_amount",{precision:10,scale:2}).notNull(),discountAmount:Sr("discount_amount",{precision:10,scale:2}).notNull().default("0"),finalAmount:Sr("final_amount",{precision:10,scale:2}).notNull(),status:ve("status").notNull().default("active"),paymentMethod:ve("payment_method").notNull().default("cash"),notes:ve("notes"),printed:Tu("printed").notNull().default(!1),originalInvoiceId:pt("original_invoice_id").references(()=>wk.id),modificationReason:ve("modification_reason"),createdAt:dt("created_at").notNull().defaultNow(),updatedAt:dt("updated_at").notNull().defaultNow()}),oAe=vn("invoice_items",{id:hn("id").primaryKey(),invoiceId:pt("invoice_id").notNull().references(()=>wk.id),productId:pt("product_id").notNull().references(()=>bk.id),quantity:Sr("quantity",{precision:10,scale:3}).notNull(),unitPrice:Sr("unit_price",{precision:10,scale:2}).notNull(),discount:Sr("discount",{precision:10,scale:2}).notNull().default("0"),totalPrice:Sr("total_price",{precision:10,scale:2}).notNull(),createdAt:dt("created_at").notNull().defaultNow()}),aAe=vn("invoice_history",{id:hn("id").primaryKey(),invoiceId:pt("invoice_id").notNull().references(()=>wk.id),action:ve("action").notNull(),userId:pt("user_id").notNull().references(()=>rv.id),changes:ul("changes").notNull(),reason:ve("reason"),timestamp:dt("timestamp").notNull().defaultNow()}),lAe=vn("installments",{id:hn("id").primaryKey(),saleId:pt("sale_id").notNull(),customerName:ve("customer_name").notNull(),customerPhone:ve("customer_phone").notNull(),identityNumber:ve("identity_number").notNull(),totalAmount:Sr("total_amount",{precision:10,scale:2}).notNull(),downPayment:Sr("down_payment",{precision:10,scale:2}).notNull().default("0"),numberOfPayments:pt("number_of_payments").notNull(),remainingAmount:Sr("remaining_amount",{precision:10,scale:2}).notNull(),startDate:dt("start_date").notNull().defaultNow(),nextPaymentDate:dt("next_payment_date").notNull(),guarantorName:ve("guarantor_name"),guarantorPhone:ve("guarantor_phone"),status:ve("status").notNull().default("active")}),cAe=vn("installment_payments",{id:hn("id").primaryKey(),installmentId:pt("installment_id").notNull(),amount:Sr("amount",{precision:10,scale:2}).notNull(),paymentDate:dt("payment_date").notNull().defaultNow(),notes:ve("notes")}),uAe=vn("exchange_rates",{id:hn("id").primaryKey(),usdToIqd:Sr("usd_to_iqd",{precision:10,scale:2}).notNull(),date:dt("date").notNull().defaultNow()}),dAe=vn("marketing_campaigns",{id:hn("id").primaryKey(),name:ve("name").notNull(),description:ve("description"),platforms:ve("platforms").array().notNull(),budget:Sr("budget",{precision:10,scale:2}).notNull(),startDate:dt("start_date").notNull(),endDate:dt("end_date"),status:ve("status").notNull().default("draft"),userId:pt("user_id").notNull(),metrics:ul("metrics"),createdAt:dt("created_at").notNull().defaultNow()}),fAe=vn("campaign_analytics",{id:hn("id").primaryKey(),campaignId:pt("campaign_id").notNull(),platform:ve("platform").notNull(),impressions:pt("impressions").notNull().default(0),clicks:pt("clicks").notNull().default(0),conversions:pt("conversions").notNull().default(0),spend:Sr("spend",{precision:10,scale:2}).notNull().default("0"),date:dt("date").notNull()}),hAe=vn("social_media_accounts",{id:hn("id").primaryKey(),userId:pt("user_id").notNull(),platform:ve("platform").notNull(),accountName:ve("account_name").notNull(),accessToken:ve("access_token").notNull(),refreshToken:ve("refresh_token"),expiresAt:dt("expires_at"),createdAt:dt("created_at").notNull().defaultNow()}),pAe=vn("api_keys",{id:hn("id").primaryKey(),userId:pt("user_id").notNull(),platform:ve("platform").notNull(),keyType:ve("key_type").notNull(),keyValue:ve("key_value").notNull(),createdAt:dt("created_at").notNull().defaultNow(),updatedAt:dt("updated_at").notNull().defaultNow()}),mAe=vn("inventory_transactions",{id:hn("id").primaryKey(),productId:pt("product_id").notNull(),type:ve("type").notNull(),quantity:pt("quantity").notNull(),reason:ve("reason").notNull(),reference:ve("reference"),date:dt("date").notNull().defaultNow(),userId:pt("user_id").notNull(),notes:ve("notes")}),gAe=vn("inventory_adjustments",{id:hn("id").primaryKey(),productId:pt("product_id").notNull(),oldQuantity:pt("old_quantity").notNull(),newQuantity:pt("new_quantity").notNull(),reason:ve("reason").notNull(),date:dt("date").notNull().defaultNow(),userId:pt("user_id").notNull(),notes:ve("notes")}),Jie=vn("inventory_alerts",{id:hn("id").primaryKey(),productId:pt("product_id").notNull().references(()=>bk.id),type:ve("type").notNull(),threshold:pt("threshold").notNull(),status:ve("status").notNull().default("active"),lastTriggered:dt("last_triggered"),createdAt:dt("created_at").notNull().defaultNow(),updatedAt:dt("updated_at").notNull().defaultNow()}),yAe=vn("alert_notifications",{id:hn("id").primaryKey(),alertId:pt("alert_id").notNull().references(()=>Jie.id),message:ve("message").notNull(),read:Tu("read").notNull().default(!1),createdAt:dt("created_at").notNull().defaultNow()}),vAe=vn("reports",{id:hn("id").primaryKey(),type:ve("type").notNull(),title:ve("title").notNull(),dateRange:ul("date_range").notNull(),filters:ul("filters"),data:ul("data").notNull(),createdAt:dt("created_at").notNull().defaultNow(),userId:pt("user_id").notNull(),status:ve("status").notNull().default("active"),format:ve("format").notNull().default("json")}),eoe=vn("expense_categories",{id:hn("id").primaryKey(),name:ve("name").notNull(),description:ve("description"),parentId:pt("parent_id"),budgetAmount:Sr("budget_amount",{precision:10,scale:2}),createdAt:dt("created_at").notNull().defaultNow(),userId:pt("user_id").notNull()}),xAe=vn("expenses",{id:hn("id").primaryKey(),amount:Sr("amount",{precision:10,scale:2}).notNull(),description:ve("description").notNull(),date:dt("date").notNull(),categoryId:pt("category_id").notNull().references(()=>eoe.id),userId:pt("user_id").notNull(),isRecurring:Tu("is_recurring").default(!1),recurringPeriod:ve("recurring_period"),recurringDay:pt("recurring_day"),notes:ve("notes"),attachments:ve("attachments").array(),status:ve("status").notNull().default("active"),createdAt:dt("created_at").notNull().defaultNow(),updatedAt:dt("updated_at").notNull().defaultNow()}),bAe=vn("suppliers",{id:hn("id").primaryKey(),name:ve("name").notNull(),contactPerson:ve("contact_person").notNull(),phone:ve("phone").notNull(),email:ve("email"),address:ve("address"),taxNumber:ve("tax_number"),paymentTerms:ve("payment_terms"),notes:ve("notes"),status:ve("status").notNull().default("active"),categories:ve("categories").array(),createdAt:dt("created_at").notNull().defaultNow(),updatedAt:dt("updated_at").notNull().defaultNow(),userId:pt("user_id").notNull()}),wAe=vn("supplier_transactions",{id:hn("id").primaryKey(),supplierId:pt("supplier_id").notNull(),type:ve("type").notNull(),amount:Sr("amount",{precision:10,scale:2}).notNull(),date:dt("date").notNull(),reference:ve("reference"),status:ve("status").notNull().default("completed"),notes:ve("notes"),attachments:ve("attachments").array(),createdAt:dt("created_at").notNull().defaultNow(),userId:pt("user_id").notNull()}),SAe=vn("appointments",{id:hn("id").primaryKey(),customerId:pt("customer_id").references(()=>KL.id),title:ve("title").notNull(),description:ve("description"),date:dt("date").notNull(),duration:pt("duration").notNull(),status:ve("status").notNull().default("scheduled"),notes:ve("notes"),createdAt:dt("created_at").notNull().defaultNow(),updatedAt:dt("updated_at").notNull().defaultNow()}),CAe=vn("file_storage",{id:hn("id").primaryKey(),filename:ve("filename").notNull(),contentType:ve("content_type").notNull(),size:pt("size").notNull(),data:ve("data").notNull(),userId:pt("user_id").notNull(),createdAt:dt("created_at").notNull().defaultNow(),updatedAt:dt("updated_at").notNull().defaultNow()}),NAe=vn("user_settings",{id:hn("id").primaryKey(),userId:pt("user_id").notNull().references(()=>rv.id),themeName:ve("theme_name").notNull(),fontName:ve("font_name").notNull(),fontSize:ve("font_size").notNull(),appearance:ve("appearance").notNull(),colors:ul("colors").notNull(),createdAt:dt("created_at").notNull().defaultNow(),updatedAt:dt("updated_at").notNull().defaultNow()}),_Ae=vn("store_settings",{id:hn("id").primaryKey(),storeName:ve("store_name").notNull(),storeAddress:ve("store_address"),storePhone:ve("store_phone"),storeEmail:ve("store_email"),taxNumber:ve("tax_number"),logoUrl:ve("logo_url"),receiptNotes:ve("receipt_notes"),enableLogo:Tu("enable_logo").notNull().default(!0),createdAt:dt("created_at").notNull().defaultNow(),updatedAt:dt("updated_at").notNull().defaultNow()}),TAe=vn("system_activities",{id:hn("id").primaryKey(),userId:pt("user_id").notNull().references(()=>rv.id),activityType:ve("activity_type").notNull(),entityType:ve("entity_type").notNull(),entityId:pt("entity_id").notNull(),action:ve("action").notNull(),details:ul("details").notNull(),ipAddress:ve("ip_address"),userAgent:ve("user_agent"),timestamp:dt("timestamp").notNull().defaultNow()}),kAe=vn("activity_reports",{id:hn("id").primaryKey(),name:ve("name").notNull(),description:ve("description"),dateRange:ul("date_range").notNull(),filters:ul("filters"),reportType:ve("report_type").notNull(),generatedBy:pt("generated_by").notNull().references(()=>rv.id),data:ul("data").notNull(),createdAt:dt("created_at").notNull().defaultNow(),updatedAt:dt("updated_at").notNull().defaultNow()}),tD=Cn(rv).pick({username:!0,password:!0,fullName:!0,email:!0,phone:!0,role:!0,permissions:!0}).extend({username:q.string().min(1,"اسم المستخدم مطلوب"),password:q.string().min(6,"كلمة المرور يجب أن تكون 6 أحرف على الأقل"),fullName:q.string().min(1,"الاسم الكامل مطلوب"),email:q.string().email("البريد الإلكتروني غير صالح").optional().nullable(),phone:q.string().optional().nullable(),role:q.enum(["admin","staff"]).default("staff"),permissions:q.array(q.string()).default([])}),EAe=Cn(bk).extend({name:q.string().min(3,"اسم المنتج يجب أن يكون 3 أحرف على الأقل"),description:q.string().optional(),productCode:q.string().min(1,"رمز المنتج مطلوب").regex(/^[A-Za-z0-9-]+$/,"رمز المنتج يجب أن يحتوي على أحرف وأرقام وشرطات فقط"),barcode:q.string().optional().nullable().refine(t=>!t||/^[0-9]{8,13}$/.test(t),"الباركود يجب أن يكون رقمًا من 8 إلى 13 خانة"),productType:q.string().min(1,"نوع المنتج مطلوب"),quantity:q.coerce.number().min(0,"الكمية يجب أن تكون 0 على الأقل"),minQuantity:q.coerce.number().min(0,"الحد الأدنى يجب أن يكون 0 على الأقل"),productionDate:q.date().optional().nullable(),expiryDate:q.date().optional().nullable(),costPrice:q.coerce.number().min(0,"سعر التكلفة يجب أن يكون أكبر من 0"),priceIqd:q.coerce.number().min(0,"سعر البيع يجب أن يكون أكبر من 0"),categoryId:q.number().optional().nullable(),isWeightBased:q.boolean().default(!1),enableDirectWeighing:q.boolean().default(!1),imageUrl:q.string().url("يجب أن يكون رابط صورة صحيح").optional().nullable(),thumbnailUrl:q.string().url("يجب أن يكون رابط الصورة المصغرة صحيح").optional().nullable()});Cn(iAe).pick({productId:!0,customerId:!0,quantity:!0,priceIqd:!0,discount:!0,isInstallment:!0}).extend({productId:q.number().min(1,"يجب اختيار منتج"),customerId:q.number().min(1,"يجب اختيار عميل"),quantity:q.number().min(1,"الكمية يجب أن تكون 1 على الأقل"),priceIqd:q.number().min(0,"السعر يجب أن يكون أكبر من 0"),discount:q.number().min(0,"الخصم يجب أن يكون 0 أو أكثر"),isInstallment:q.boolean().default(!1)});Cn(uAe).pick({usdToIqd:!0});Cn(lAe).extend({customerName:q.string().min(1,"اسم العميل مطلوب"),customerPhone:q.string().min(1,"رقم الهاتف مطلوب"),identityNumber:q.string().min(1,"رقم الهوية مطلوب"),totalAmount:q.number().min(0,"المبلغ الإجمالي يجب أن يكون أكبر من 0"),downPayment:q.number().min(0,"الدفعة الأولى يجب أن تكون 0 أو أكثر"),numberOfPayments:q.number().min(1,"عدد الأقساط يجب أن يكون 1 على الأقل"),nextPaymentDate:q.date(),guarantorName:q.string().optional(),guarantorPhone:q.string().optional()});Cn(cAe).extend({amount:q.number().min(0,"مبلغ الدفعة يجب أن يكون أكبر من 0"),notes:q.string().optional()});const $Ae=Cn(dAe).extend({platforms:q.array(q.string()).min(1,"يجب اختيار منصة واحدة على الأقل"),budget:q.number().min(0,"الميزانية يجب أن تكون أكبر من 0"),startDate:q.date(),endDate:q.date().optional()});Cn(fAe).extend({date:q.date(),platform:q.string(),impressions:q.number().min(0),clicks:q.number().min(0),conversions:q.number().min(0),spend:q.number().min(0)});Cn(hAe).extend({platform:q.enum(["facebook","instagram","twitter","linkedin","snapchat","tiktok"]),accountName:q.string().min(1,"اسم الحساب مطلوب"),accessToken:q.string().min(1,"رمز الوصول مطلوب"),refreshToken:q.string().optional(),expiresAt:q.date().optional()});Cn(pAe);Cn(mAe).extend({type:q.enum(["in","out"]),quantity:q.number().min(1,"الكمية يجب أن تكون 1 على الأقل"),reason:q.enum(["sale","return","adjustment","purchase"]),reference:q.string().optional(),notes:q.string().optional()});Cn(gAe).extend({oldQuantity:q.number().min(0,"الكمية القديمة يجب أن تكون 0 على الأقل"),newQuantity:q.number().min(0,"الكمية الجديدة يجب أن تكون 0 على الأقل"),reason:q.string().min(1,"سبب التعديل مطلوب"),notes:q.string().optional()});Cn(Jie).extend({type:q.enum(["low_stock","inactive","high_demand"]),threshold:q.number().min(0,"قيمة الحد يجب أن تكون 0 أو أكثر"),status:q.enum(["active","inactive"]).default("active")});Cn(yAe).extend({message:q.string().min(1,"الرسالة مطلوبة")});Cn(vAe).extend({type:q.enum(["sales","inventory","marketing","financial"]),title:q.string().min(1,"عنوان التقرير مطلوب"),dateRange:q.object({start:q.date(),end:q.date()}),filters:q.record(q.unknown()).optional(),data:q.record(q.unknown()),format:q.enum(["json","csv","pdf"]).default("json")});Cn(bAe).extend({name:q.string().min(1,"اسم المورد مطلوب"),contactPerson:q.string().min(1,"اسم الشخص المسؤول مطلوب"),phone:q.string().min(1,"رقم الهاتف مطلوب"),email:q.string().email("البريد الإلكتروني غير صالح").optional().nullable(),categories:q.array(q.string()).min(1,"يجب اختيار فئة واحدة على الأقل")});Cn(wAe).extend({amount:q.number().min(0,"المبلغ يجب أن يكون أكبر من 0"),date:q.date(),type:q.enum(["payment","refund","advance","other"]),status:q.enum(["pending","completed","cancelled"]).default("completed"),attachments:q.array(q.string()).optional()});Cn(KL).extend({name:q.string().min(1,"اسم العميل مطلوب"),phone:q.string().optional(),email:q.string().email("البريد الإلكتروني غير صالح").optional().nullable()});const AAe=Cn(SAe).extend({title:q.string().min(1,"عنوان الموعد مطلوب"),description:q.string().optional().nullable(),customerId:q.number().int().positive("يجب اختيار عميل").optional().nullable(),date:q.coerce.date(),duration:q.coerce.number().int().min(1,"مدة الموعد يجب أن تكون 1 دقيقة على الأقل"),status:q.enum(["scheduled","completed","cancelled"]).default("scheduled"),notes:q.string().optional().nullable()});Cn(CAe).extend({filename:q.string().min(1,"اسم الملف مطلوب"),contentType:q.string().min(1,"نوع المحتوى مطلوب"),size:q.number().min(0,"حجم الملف يجب أن يكون أكبر من 0"),data:q.string().min(1,"محتوى الملف مطلوب"),userId:q.number().min(1,"معرف المستخدم مطلوب")});Cn(wk).extend({saleId:q.number().min(1,"معرف البيع مطلوب"),invoiceNumber:q.string().min(1,"رقم الفاتورة مطلوب"),customerName:q.string().min(1,"اسم العميل مطلوب"),totalAmount:q.coerce.number().min(0,"المبلغ الإجمالي يجب أن يكون أكبر من 0"),discountAmount:q.coerce.number().min(0,"قيمة الخصم يجب أن تكون 0 أو أكثر"),finalAmount:q.coerce.number().min(0,"المبلغ النهائي يجب أن يكون أكبر من 0"),status:q.enum(["active","modified","cancelled"]).default("active"),paymentMethod:q.enum(["cash","card","transfer"]).default("cash"),notes:q.string().optional(),originalInvoiceId:q.number().optional(),modificationReason:q.string().optional()});Cn(oAe).extend({invoiceId:q.number().min(1,"معرف الفاتورة مطلوب"),productId:q.number().min(1,"معرف المنتج مطلوب"),quantity:q.coerce.number().min(.001,"الكمية يجب أن تكون أكبر من 0"),unitPrice:q.coerce.number().min(0,"سعر الوحدة يجب أن يكون أكبر من 0"),discount:q.coerce.number().min(0,"قيمة الخصم يجب أن تكون 0 أو أكثر"),totalPrice:q.coerce.number().min(0,"السعر الإجمالي يجب أن يكون أكبر من 0")});Cn(aAe).extend({invoiceId:q.number().min(1,"معرف الفاتورة مطلوب"),action:q.enum(["create","modify","cancel"]),changes:q.record(q.unknown()),reason:q.string().optional()});Cn(TAe).extend({details:q.record(q.unknown()),ipAddress:q.string().optional(),userAgent:q.string().optional()});Cn(kAe).extend({dateRange:q.object({startDate:q.date(),endDate:q.date()}),filters:q.record(q.unknown()).optional(),reportType:q.enum(["daily","weekly","monthly"]),data:q.record(q.unknown())});const IAe=Cn(eoe).extend({name:q.string().min(1,"اسم الفئة مطلوب"),description:q.string().optional().nullable(),budgetAmount:q.coerce.number().min(0,"الميزانية يجب أن تكون 0 على الأقل").optional().nullable()}),OAe=Cn(xAe).extend({amount:q.coerce.number().min(0,"المبلغيجب أن يكونأكبر من 0"),description:q.string().min(1,"الوصف مطلوب"),date:q.coerce.date(),categoryId:q.coerce.number().min(1,"يجب اختيار فئة"),isRecurring:q.boolean().default(!1),recurringPeriod:q.enum(["monthly","weekly","yearly"]).optional(),recurringDay:q.coerce.number().min(1).max(31).optional(),attachments:q.array(q.string()).optional()});Cn(NAe).extend({themeName:q.string().min(1,"اسم الثيم مطلوب"),fontName:q.string().min(1,"اسم الخط مطلوب"),fontSize:q.enum(["small","medium","large","xlarge"]),appearance:q.enum(["light","dark","system"]),colors:q.object({primary:q.string(),secondary:q.string(),accent:q.string()})});Cn(_Ae).extend({storeName:q.string().min(1,"اسم المتجر مطلوب"),storeAddress:q.string().optional(),storePhone:q.string().optional(),storeEmail:q.string().email("البريد الإلكتروني غير صالح").optional(),taxNumber:q.string().optional(),logoUrl:q.string().optional(),receiptNotes:q.string().optional(),enableLogo:q.boolean().default(!0)});const ub=Rp("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),$e=N.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?Ii:"button";return f.jsx(o,{className:pe(ub({variant:e,size:n,className:t})),ref:i,...s})});$e.displayName="Button";var PAe="Label",toe=N.forwardRef((t,e)=>f.jsx(ct.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));toe.displayName=PAe;var noe=toe;const RAe=Rp("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ot=N.forwardRef(({className:t,...e},n)=>f.jsx(noe,{ref:n,className:pe(RAe(),t),...e}));ot.displayName=noe.displayName;const Cc=Bke,roe=N.createContext({}),It=({...t})=>f.jsx(roe.Provider,{value:{name:t.name},children:f.jsx(Uke,{...t})}),Sk=()=>{const t=N.useContext(roe),e=N.useContext(soe),{getFieldState:n,formState:r}=vk(),s=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...s}},soe=N.createContext({}),kt=N.forwardRef(({className:t,...e},n)=>{const r=N.useId();return f.jsx(soe.Provider,{value:{id:r},children:f.jsx("div",{ref:n,className:pe("space-y-2",t),...e})})});kt.displayName="FormItem";const Et=N.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:s}=Sk();return f.jsx(ot,{ref:n,className:pe(r&&"text-destructive",t),htmlFor:s,...e})});Et.displayName="FormLabel";const Ot=N.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:s,formMessageId:i}=Sk();return f.jsx(Ii,{ref:e,id:r,"aria-describedby":n?`${s} ${i}`:`${s}`,"aria-invalid":!!n,...t})});Ot.displayName="FormControl";const DAe=N.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=Sk();return f.jsx("p",{ref:n,id:r,className:pe("text-sm text-muted-foreground",t),...e})});DAe.displayName="FormDescription";const $t=N.forwardRef(({className:t,children:e,...n},r)=>{const{error:s,formMessageId:i}=Sk(),o=s?String(s==null?void 0:s.message):e;return o?f.jsx("p",{ref:r,id:i,className:pe("text-sm font-medium text-destructive",t),...n,children:o}):null});$t.displayName="FormMessage";const Oe=N.forwardRef(({className:t,type:e,...n},r)=>f.jsx("input",{type:e,className:pe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));Oe.displayName="Input";function jAe(t,e=[]){let n=[];function r(i,o){const a=N.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:h,children:p,...m}=d,g=(h==null?void 0:h[t][l])||a,y=N.useMemo(()=>m,Object.values(m));return f.jsx(g.Provider,{value:y,children:p})}function u(d,h){const p=(h==null?void 0:h[t][l])||a,m=N.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=n.map(o=>N.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return N.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,MAe(s,...e)]}function MAe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var FAe=xee.useId||(()=>{}),LAe=0;function to(t){const[e,n]=N.useState(FAe());return Rs(()=>{t||n(r=>r??String(LAe++))},[t]),t||(e?`radix-${e}`:"")}var BAe=N.createContext(void 0);function M1(t){const e=N.useContext(BAe);return t||e||"ltr"}var VI="rovingFocusGroup.onEntryFocus",zAe={bubbles:!1,cancelable:!0},Ck="RovingFocusGroup",[nD,ioe,VAe]=O1(Ck),[WAe,Nk]=jAe(Ck,[VAe]),[UAe,GAe]=WAe(Ck),ooe=N.forwardRef((t,e)=>f.jsx(nD.Provider,{scope:t.__scopeRovingFocusGroup,children:f.jsx(nD.Slot,{scope:t.__scopeRovingFocusGroup,children:f.jsx(HAe,{...t,ref:e})})}));ooe.displayName=Ck;var HAe=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,h=N.useRef(null),p=Gt(e,h),m=M1(i),[g=null,y]=ka({prop:o,defaultProp:a,onChange:l}),[v,x]=N.useState(!1),b=ci(c),S=ioe(n),w=N.useRef(!1),[C,_]=N.useState(0);return N.useEffect(()=>{const T=h.current;if(T)return T.addEventListener(VI,b),()=>T.removeEventListener(VI,b)},[b]),f.jsx(UAe,{scope:n,orientation:r,dir:m,loop:s,currentTabStopId:g,onItemFocus:N.useCallback(T=>y(T),[y]),onItemShiftTab:N.useCallback(()=>x(!0),[]),onFocusableItemAdd:N.useCallback(()=>_(T=>T+1),[]),onFocusableItemRemove:N.useCallback(()=>_(T=>T-1),[]),children:f.jsx(ct.div,{tabIndex:v||C===0?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:Ie(t.onMouseDown,()=>{w.current=!0}),onFocus:Ie(t.onFocus,T=>{const k=!w.current;if(T.target===T.currentTarget&&k&&!v){const $=new CustomEvent(VI,zAe);if(T.currentTarget.dispatchEvent($),!$.defaultPrevented){const O=S().filter(R=>R.focusable),P=O.find(R=>R.active),D=O.find(R=>R.id===g),I=[P,D,...O].filter(Boolean).map(R=>R.ref.current);coe(I,u)}}w.current=!1}),onBlur:Ie(t.onBlur,()=>x(!1))})})}),aoe="RovingFocusGroupItem",loe=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,a=to(),l=i||a,c=GAe(aoe,n),u=c.currentTabStopId===l,d=ioe(n),{onFocusableItemAdd:h,onFocusableItemRemove:p}=c;return N.useEffect(()=>{if(r)return h(),()=>p()},[r,h,p]),f.jsx(nD.ItemSlot,{scope:n,id:l,focusable:r,active:s,children:f.jsx(ct.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:Ie(t.onMouseDown,m=>{r?c.onItemFocus(l):m.preventDefault()}),onFocus:Ie(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:Ie(t.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const g=XAe(m,c.orientation,c.dir);if(g!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let v=d().filter(x=>x.focusable).map(x=>x.ref.current);if(g==="last")v.reverse();else if(g==="prev"||g==="next"){g==="prev"&&v.reverse();const x=v.indexOf(m.currentTarget);v=c.loop?YAe(v,x+1):v.slice(x+1)}setTimeout(()=>coe(v))}})})})});loe.displayName=aoe;var qAe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function KAe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function XAe(t,e,n){const r=KAe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return qAe[r]}function coe(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function YAe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var uoe=ooe,doe=loe,XL="Tabs",[QAe,R9t]=$l(XL,[Nk]),foe=Nk(),[ZAe,YL]=QAe(XL),hoe=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=M1(a),[d,h]=ka({prop:r,onChange:s,defaultProp:i});return f.jsx(ZAe,{scope:n,baseId:to(),value:d,onValueChange:h,orientation:o,dir:u,activationMode:l,children:f.jsx(ct.div,{dir:u,"data-orientation":o,...c,ref:e})})});hoe.displayName=XL;var poe="TabsList",moe=N.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=YL(poe,n),o=foe(n);return f.jsx(uoe,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:f.jsx(ct.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});moe.displayName=poe;var goe="TabsTrigger",yoe=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=YL(goe,n),a=foe(n),l=boe(o.baseId,r),c=woe(o.baseId,r),u=r===o.value;return f.jsx(doe,{asChild:!0,...a,focusable:!s,active:u,children:f.jsx(ct.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:Ie(t.onMouseDown,d=>{!s&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:Ie(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:Ie(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!s&&d&&o.onValueChange(r)})})})});yoe.displayName=goe;var voe="TabsContent",xoe=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,a=YL(voe,n),l=boe(a.baseId,r),c=woe(a.baseId,r),u=r===a.value,d=N.useRef(u);return N.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),f.jsx(co,{present:s||u,children:({present:h})=>f.jsx(ct.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:h&&i})})});xoe.displayName=voe;function boe(t,e){return`${t}-trigger-${e}`}function woe(t,e){return`${t}-content-${e}`}var JAe=hoe,Soe=moe,Coe=yoe,Noe=xoe;const Dc=JAe,Al=N.forwardRef(({className:t,...e},n)=>f.jsx(Soe,{ref:n,className:pe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Al.displayName=Soe.displayName;const Ln=N.forwardRef(({className:t,...e},n)=>f.jsx(Coe,{ref:n,className:pe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Ln.displayName=Coe.displayName;const Cr=N.forwardRef(({className:t,...e},n)=>f.jsx(Noe,{ref:n,className:pe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Cr.displayName=Noe.displayName;const eIe=Rp("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),MN=N.forwardRef(({className:t,variant:e,...n},r)=>f.jsx("div",{ref:r,role:"alert",className:pe(eIe({variant:e}),t),...n}));MN.displayName="Alert";const _oe=N.forwardRef(({className:t,...e},n)=>f.jsx("h5",{ref:n,className:pe("mb-1 font-medium leading-none tracking-tight",t),...e}));_oe.displayName="AlertTitle";const FN=N.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:pe("text-sm [&_p]:leading-relaxed",t),...e}));FN.displayName="AlertDescription";function tIe(t){let e=0,n="ضعيف جداً",r="bg-red-500";switch(t.length>=8&&e++,/[A-Z]/.test(t)&&e++,/[a-z]/.test(t)&&e++,/[0-9]/.test(t)&&e++,/[^A-Za-z0-9]/.test(t)&&e++,e){case 0:case 1:n="ضعيف جداً",r="bg-red-500";break;case 2:n="ضعيف",r="bg-orange-500";break;case 3:n="متوسط",r="bg-yellow-500";break;case 4:n="قوي",r="bg-lime-500";break;case 5:n="قوي جداً",r="bg-green-500";break}return{score:e,message:n,color:r}}function nIe(){const{user:t,loginMutation:e,registerMutation:n}=Sf(),[,r]=kL(),[s,i]=N.useState("login"),[o,a]=N.useState(!1),[l,c]=N.useState({score:0,message:"ضعيف جداً",color:"bg-red-500"});N.useEffect(()=>{t&&r("/")},[t,r]);const u=bl({resolver:bc(tD.pick({username:!0,password:!0})),defaultValues:{username:"",password:""}}),d=bl({resolver:bc(tD),defaultValues:{username:"",password:"",fullName:"",email:"",phone:"",role:"staff",permissions:[]}}),h=()=>{d.reset(),i("login")},p=m=>{c(tIe(m))};return t?null:f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-accent/5 flex items-center justify-center p-4 relative overflow-hidden",children:[f.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-primary/10 rounded-full filter blur-3xl transform -translate-x-1/2 -translate-y-1/2 animate-pulse"}),f.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-accent/10 rounded-full filter blur-3xl transform translate-x-1/4 translate-y-1/4 animate-pulse",style:{animationDelay:"1s"}}),f.jsx("div",{className:"absolute top-1/2 left-1/2 w-96 h-96 bg-secondary/10 rounded-full filter blur-3xl transform -translate-x-1/2 -translate-y-1/2 animate-pulse",style:{animationDelay:"2s"}}),f.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-[0.02]",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.2'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})]}),f.jsxs("div",{className:"max-w-5xl w-full grid md:grid-cols-2 gap-6 items-center relative z-10",children:[f.jsxs("div",{className:"hidden md:flex flex-col items-center justify-center p-8 rounded-2xl bg-gradient-to-br from-background/50 to-background/30 backdrop-blur-sm border border-border/50",children:[f.jsx("div",{className:"text-9xl font-black mb-6 bg-clip-text text-transparent bg-gradient-to-r from-primary via-secondary to-accent animate-gradient",style:{fontFamily:"Cairo, sans-serif"},children:"SAS"}),f.jsx("div",{className:"flex justify-center items-center mb-3",children:f.jsxs("div",{className:"text-4xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-purple-500 shadow-glow px-4 py-1 rounded-lg border border-blue-300/30",style:{fontFamily:"Cairo, sans-serif",textShadow:"0 0 15px rgba(59, 130, 246, 0.5)",backdropFilter:"blur(4px)",background:"linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(147, 51, 234, 0.1))"},children:[f.jsx("span",{style:{letterSpacing:"1px"},children:"S.A.S"}),f.jsx("span",{className:"text-sm ml-1 align-text-top",children:"®"})]})}),f.jsx("div",{className:"text-2xl text-center text-foreground font-semibold max-w-md animate-fade-in",style:{fontFamily:"Cairo, sans-serif"},children:"نظام إدارة الأعمال المتكامل"}),f.jsx("div",{className:"mt-8 w-full space-y-2 animate-fade-in-delayed",children:["إدارة المبيعات والمخزون","تحليلات أداء الأعمال","إدارة العملاء والموردين","تقارير مالية متقدمة"].map((m,g)=>f.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[f.jsx("div",{className:"rounded-full bg-primary/10 p-1",children:f.jsx(Vd,{className:"h-4 w-4 text-primary"})}),f.jsx("span",{className:"text-muted-foreground",children:m})]},g))})]}),f.jsx("div",{className:"w-full",children:f.jsxs(Le,{className:"w-full backdrop-blur-sm bg-background/80 border-border/50 shadow-lg",children:[f.jsxs(Ye,{className:"text-center",children:[f.jsxs("div",{className:"md:hidden flex flex-col items-center justify-center mb-4",children:[f.jsx("div",{className:"text-6xl font-black bg-clip-text text-transparent bg-gradient-to-r from-primary via-secondary to-accent animate-gradient",style:{fontFamily:"Cairo, sans-serif"},children:"SAS"}),f.jsxs("div",{className:"text-2xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-purple-500 mt-1",style:{fontFamily:"Cairo, sans-serif",textShadow:"0 0 8px rgba(59, 130, 246, 0.4)"},children:[f.jsx("span",{style:{letterSpacing:"1px"},children:"S.A.S"}),f.jsx("span",{className:"text-xs ml-1 align-text-top",children:"®"})]})]}),f.jsx(Qe,{className:"text-2xl font-bold",children:"مرحباً بك"}),f.jsx(Kt,{children:s==="login"?"قم بتسجيل الدخول للوصول إلى حسابك":"أنشئ حساب جديد للبدء"})]}),f.jsx(Ue,{children:f.jsxs(Dc,{value:s,onValueChange:i,className:"w-full",children:[f.jsxs(Al,{className:"grid grid-cols-2 w-full mb-6",children:[f.jsx(Ln,{value:"login",children:"تسجيل الدخول"}),f.jsx(Ln,{value:"register",children:"حساب جديد"})]}),f.jsx(Cr,{value:"login",children:f.jsx(Cc,{...u,children:f.jsxs("form",{onSubmit:u.handleSubmit(m=>{e.mutate(m)}),className:"space-y-4",children:[f.jsx(It,{control:u.control,name:"username",render:({field:m})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"اسم المستخدم"}),f.jsx(Ot,{children:f.jsx(Oe,{placeholder:"أدخل اسم المستخدم",...m})}),f.jsx($t,{})]})}),f.jsx(It,{control:u.control,name:"password",render:({field:m})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"كلمة المرور"}),f.jsx(Ot,{children:f.jsxs("div",{className:"relative",children:[f.jsx(Oe,{type:o?"text":"password",placeholder:"أدخل كلمة المرور",...m}),f.jsx($e,{type:"button",variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 h-8 w-8 transform -translate-y-1/2 p-0",onClick:()=>a(!o),children:o?f.jsx(nU,{className:"h-4 w-4"}):f.jsx(vN,{className:"h-4 w-4"})})]})}),f.jsx($t,{})]})}),e.isError&&f.jsx(MN,{variant:"destructive",children:f.jsx(FN,{children:e.error instanceof Error?e.error.message:"حدث خطأ أثناء تسجيل الدخول"})}),f.jsx($e,{type:"submit",className:"w-full",disabled:e.isPending,children:e.isPending?"جاري تسجيل الدخول...":"تسجيل الدخول"})]})})}),f.jsx(Cr,{value:"register",children:f.jsx(Cc,{...d,children:f.jsxs("form",{onSubmit:d.handleSubmit(m=>{n.mutate(m,{onSuccess:h})}),className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsx(It,{control:d.control,name:"fullName",render:({field:m})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"الاسم الكامل"}),f.jsx(Ot,{children:f.jsx(Oe,{placeholder:"أدخل الاسم الكامل",...m})}),f.jsx($t,{})]})}),f.jsx(It,{control:d.control,name:"username",render:({field:m})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"اسم المستخدم"}),f.jsx(Ot,{children:f.jsx(Oe,{placeholder:"أدخل اسم المستخدم",...m})}),f.jsx($t,{})]})})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsx(It,{control:d.control,name:"email",render:({field:m})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"البريد الإلكتروني"}),f.jsx(Ot,{children:f.jsx(Oe,{type:"email",placeholder:"أدخل البريد الإلكتروني",...m})}),f.jsx($t,{})]})}),f.jsx(It,{control:d.control,name:"phone",render:({field:m})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"رقم الهاتف"}),f.jsx(Ot,{children:f.jsx(Oe,{placeholder:"أدخل رقم الهاتف",...m})}),f.jsx($t,{})]})})]}),f.jsx(It,{control:d.control,name:"password",render:({field:m})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"كلمة المرور"}),f.jsx(Ot,{children:f.jsxs("div",{className:"relative",children:[f.jsx(Oe,{type:o?"text":"password",placeholder:"أدخل كلمة المرور",...m,onChange:g=>{m.onChange(g),p(g.target.value)}}),f.jsx($e,{type:"button",variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 h-8 w-8 transform -translate-y-1/2 p-0",onClick:()=>a(!o),children:o?f.jsx(nU,{className:"h-4 w-4"}):f.jsx(vN,{className:"h-4 w-4"})})]})}),f.jsx("div",{className:"mt-2",children:f.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[f.jsx("div",{className:"h-2 flex-1 bg-gray-200 rounded-full overflow-hidden",children:f.jsx("div",{className:`h-full ${l.color} transition-all`,style:{width:`${l.score/5*100}%`}})}),f.jsx("span",{className:"text-xs",children:l.message})]})}),f.jsx($t,{})]})}),n.isError&&f.jsx(MN,{variant:"destructive",children:f.jsx(FN,{children:n.error instanceof Error?n.error.message:"حدث خطأ أثناء إنشاء الحساب"})}),f.jsx($e,{type:"submit",className:"w-full",disabled:n.isPending,children:n.isPending?"جاري إنشاء الحساب...":"إنشاء حساب"})]})})})]})}),f.jsx(LL,{className:"flex flex-col space-y-2",children:f.jsx("div",{className:"text-sm text-muted-foreground text-center",children:"بالتسجيل، أنت توافق على شروط الاستخدام وسياسة الخصوصية"})})]})})]}),f.jsxs("div",{className:"absolute bottom-4 text-center w-full text-sm text-muted-foreground",children:["© ",new Date().getFullYear()," SAS - جميع الحقوق محفوظة"]})]})}var Toe={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},EU=F.createContext&&F.createContext(Toe),rIe=["attr","size","title"];function sIe(t,e){if(t==null)return{};var n=iIe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function iIe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function LN(){return LN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LN.apply(this,arguments)}function $U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function BN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$U(Object(n),!0).forEach(function(r){oIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$U(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oIe(t,e,n){return e=aIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aIe(t){var e=lIe(t,"string");return typeof e=="symbol"?e:e+""}function lIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function koe(t){return t&&t.map((e,n)=>F.createElement(e.tag,BN({key:n},e.attr),koe(e.child)))}function Fr(t){return e=>F.createElement(cIe,LN({attr:BN({},t.attr)},e),koe(t.child))}function cIe(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=sIe(t,rIe),a=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),F.createElement("svg",LN({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:BN(BN({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&F.createElement("title",null,i),t.children)};return EU!==void 0?F.createElement(EU.Consumer,null,n=>e(n)):e(Toe)}function uIe(t){return Fr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M4 10h3v7H4zM10.5 10h3v7h-3zM2 19h20v3H2zM17 10h3v7h-3zM12 1 2 6v2h20V6z"},child:[]}]})(t)}function AU(t){return Fr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"},child:[]}]})(t)}function dIe(t){return Fr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"},child:[]}]})(t)}function fIe(t){return Fr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 17H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20z"},child:[]}]})(t)}function hIe(t){return Fr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(t)}function Eoe(t){return Fr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.5 12c1.38 0 2.49-1.12 2.49-2.5S17.88 7 16.5 7a2.5 2.5 0 0 0 0 5zM9 11c1.66 0 2.99-1.34 2.99-3S10.66 5 9 5C7.34 5 6 6.34 6 8s1.34 3 3 3zm7.5 3c-1.83 0-5.5.92-5.5 2.75V19h11v-2.25c0-1.83-3.67-2.75-5.5-2.75zM9 13c-2.33 0-7 1.17-7 3.5V19h7v-2.25c0-.85.33-2.34 2.37-3.47C10.5 13.1 9.66 13 9 13z"},child:[]}]})(t)}function pIe(t){return Fr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 21h-2v-2h2v2zm-2-7h-2v5h2v-5zm8-2h-2v4h2v-4zm-2-2h-2v2h2v-2zM7 12H5v2h2v-2zm-2-2H3v2h2v-2zm7-5h2V3h-2v2zm-7.5-.5v3h3v-3h-3zM9 9H3V3h6v6zm-4.5 7.5v3h3v-3h-3zM9 21H3v-6h6v6zm7.5-16.5v3h3v-3h-3zM21 9h-6V3h6v6zm-2 10v-3h-4v2h2v3h4v-2h-2zm-2-7h-4v2h4v-2zm-4-2H7v2h2v2h2v-2h2v-2zm1-1V7h-2V5h-2v4h4zM6.75 5.25h-1.5v1.5h1.5v-1.5zm0 12h-1.5v1.5h1.5v-1.5zm12-12h-1.5v1.5h1.5v-1.5z"},child:[]}]})(t)}function mIe(t){return Fr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(t)}function gIe(t){return Fr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1 0-2 .9-2 2v3.01c0 .72.43 1.34 1 1.69V20c0 1.1 1.1 2 2 2h14c.9 0 2-.9 2-2V8.7c.57-.35 1-.97 1-1.69V4c0-1.1-1-2-2-2zm-5 12H9v-2h6v2zm5-7H4V4h16v3z"},child:[]}]})(t)}function yIe(t){return Fr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M4 9h4v11H4zM16 13h4v7h-4zM10 4h4v16h-4z"},child:[]}]})(t)}function vIe(t){return Fr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 2H7c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 4H7V4h10v2zm3 16H4c-1.1 0-2-.9-2-2v-1h20v1c0 1.1-.9 2-2 2zm-1.47-11.81A2.008 2.008 0 0 0 16.7 9H7.3c-.79 0-1.51.47-1.83 1.19L2 18h20l-3.47-7.81zM9.5 16h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm3 4h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm3 4h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5z"},child:[]}]})(t)}function xIe(t){return Fr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"},child:[]}]})(t)}function bIe(t){return Fr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9 1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"},child:[]}]})(t)}function wIe(t){return Fr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 11v2h4v-2h-4zm-2 6.61c.96.71 2.21 1.65 3.2 2.39.4-.53.8-1.07 1.2-1.6-.99-.74-2.24-1.68-3.2-2.4-.4.54-.8 1.08-1.2 1.61zM20.4 5.6c-.4-.53-.8-1.07-1.2-1.6-.99.74-2.24 1.68-3.2 2.4.4.53.8 1.07 1.2 1.6.96-.72 2.21-1.65 3.2-2.4zM4 9c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h1v4h2v-4h1l5 3V6L8 9H4zm11.5 3c0-1.33-.58-2.53-1.5-3.35v6.69c.92-.81 1.5-2.01 1.5-3.34z"},child:[]}]})(t)}function SIe(t){return Fr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(t)}const CIe=Rp("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function fu({className:t,variant:e,...n}){return f.jsx("div",{className:pe(CIe({variant:e}),t),...n})}var WI=0;function _k(){N.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??IU()),document.body.insertAdjacentElement("beforeend",t[1]??IU()),WI++,()=>{WI===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),WI--}},[])}function IU(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var UI="focusScope.autoFocusOnMount",GI="focusScope.autoFocusOnUnmount",OU={bubbles:!1,cancelable:!0},NIe="FocusScope",F1=N.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=N.useState(null),c=ci(s),u=ci(i),d=N.useRef(null),h=Gt(e,g=>l(g)),p=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(r){let g=function(b){if(p.paused||!a)return;const S=b.target;a.contains(S)?d.current=S:sd(d.current,{select:!0})},y=function(b){if(p.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||sd(d.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const w of b)w.removedNodes.length>0&&sd(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const x=new MutationObserver(v);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),x.disconnect()}}},[r,a,p.paused]),N.useEffect(()=>{if(a){RU.add(p);const g=document.activeElement;if(!a.contains(g)){const v=new CustomEvent(UI,OU);a.addEventListener(UI,c),a.dispatchEvent(v),v.defaultPrevented||(_Ie(AIe($oe(a)),{select:!0}),document.activeElement===g&&sd(a))}return()=>{a.removeEventListener(UI,c),setTimeout(()=>{const v=new CustomEvent(GI,OU);a.addEventListener(GI,u),a.dispatchEvent(v),v.defaultPrevented||sd(g??document.body,{select:!0}),a.removeEventListener(GI,u),RU.remove(p)},0)}}},[a,c,u,p]);const m=N.useCallback(g=>{if(!n&&!r||p.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(y&&v){const x=g.currentTarget,[b,S]=TIe(x);b&&S?!g.shiftKey&&v===S?(g.preventDefault(),n&&sd(b,{select:!0})):g.shiftKey&&v===b&&(g.preventDefault(),n&&sd(S,{select:!0})):v===x&&g.preventDefault()}},[n,r,p.paused]);return f.jsx(ct.div,{tabIndex:-1,...o,ref:h,onKeyDown:m})});F1.displayName=NIe;function _Ie(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(sd(r,{select:e}),document.activeElement!==n)return}function TIe(t){const e=$oe(t),n=PU(e,t),r=PU(e.reverse(),t);return[n,r]}function $oe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function PU(t,e){for(const n of t)if(!kIe(n,{upTo:e}))return n}function kIe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function EIe(t){return t instanceof HTMLInputElement&&"select"in t}function sd(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&EIe(t)&&e&&t.select()}}var RU=$Ie();function $Ie(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=DU(t,e),t.unshift(e)},remove(e){var n;t=DU(t,e),(n=t[0])==null||n.resume()}}}function DU(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function AIe(t){return t.filter(e=>e.tagName!=="A")}const IIe=["top","right","bottom","left"],rf=Math.min,bo=Math.max,zN=Math.round,lC=Math.floor,uc=t=>({x:t,y:t}),OIe={left:"right",right:"left",bottom:"top",top:"bottom"},PIe={start:"end",end:"start"};function rD(t,e,n){return bo(t,rf(e,n))}function Eu(t,e){return typeof t=="function"?t(e):t}function $u(t){return t.split("-")[0]}function sv(t){return t.split("-")[1]}function QL(t){return t==="x"?"y":"x"}function ZL(t){return t==="y"?"height":"width"}function sf(t){return["top","bottom"].includes($u(t))?"y":"x"}function JL(t){return QL(sf(t))}function RIe(t,e,n){n===void 0&&(n=!1);const r=sv(t),s=JL(t),i=ZL(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=VN(o)),[o,VN(o)]}function DIe(t){const e=VN(t);return[sD(t),e,sD(e)]}function sD(t){return t.replace(/start|end/g,e=>PIe[e])}function jIe(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function MIe(t,e,n,r){const s=sv(t);let i=jIe($u(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(sD)))),i}function VN(t){return t.replace(/left|right|bottom|top/g,e=>OIe[e])}function FIe(t){return{top:0,right:0,bottom:0,left:0,...t}}function Aoe(t){return typeof t!="number"?FIe(t):{top:t,right:t,bottom:t,left:t}}function WN(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function jU(t,e,n){let{reference:r,floating:s}=t;const i=sf(e),o=JL(e),a=ZL(o),l=$u(e),c=i==="y",u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,h=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-s.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-s.width,y:d};break;default:p={x:r.x,y:r.y}}switch(sv(e)){case"start":p[o]-=h*(n&&c?-1:1);break;case"end":p[o]+=h*(n&&c?-1:1);break}return p}const LIe=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:d}=jU(c,r,l),h=r,p={},m=0;for(let g=0;g<a.length;g++){const{name:y,fn:v}=a[g],{x,y:b,data:S,reset:w}=await v({x:u,y:d,initialPlacement:r,placement:h,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=x??u,d=b??d,p={...p,[y]:{...p[y],...S}},w&&m<=50&&(m++,typeof w=="object"&&(w.placement&&(h=w.placement),w.rects&&(c=w.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):w.rects),{x:u,y:d}=jU(c,h,l)),g=-1)}return{x:u,y:d,placement:h,strategy:s,middlewareData:p}};async function db(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=Eu(e,t),m=Aoe(p),y=a[h?d==="floating"?"reference":"floating":d],v=WN(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=d==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),S=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},w=WN(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:b,strategy:l}):x);return{top:(v.top-w.top+m.top)/S.y,bottom:(w.bottom-v.bottom+m.bottom)/S.y,left:(v.left-w.left+m.left)/S.x,right:(w.right-v.right+m.right)/S.x}}const BIe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Eu(t,e)||{};if(c==null)return{};const d=Aoe(u),h={x:n,y:r},p=JL(s),m=ZL(p),g=await o.getDimensions(c),y=p==="y",v=y?"top":"left",x=y?"bottom":"right",b=y?"clientHeight":"clientWidth",S=i.reference[m]+i.reference[p]-h[p]-i.floating[m],w=h[p]-i.reference[p],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let _=C?C[b]:0;(!_||!await(o.isElement==null?void 0:o.isElement(C)))&&(_=a.floating[b]||i.floating[m]);const T=S/2-w/2,k=_/2-g[m]/2-1,$=rf(d[v],k),O=rf(d[x],k),P=$,D=_-g[m]-O,A=_/2-g[m]/2+T,I=rD(P,A,D),R=!l.arrow&&sv(s)!=null&&A!==I&&i.reference[m]/2-(A<P?$:O)-g[m]/2<0,M=R?A<P?A-P:A-D:0;return{[p]:h[p]+M,data:{[p]:I,centerOffset:A-I-M,...R&&{alignmentOffset:M}},reset:R}}}),zIe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...y}=Eu(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=$u(s),x=sf(a),b=$u(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),w=h||(b||!g?[VN(a)]:DIe(a)),C=m!=="none";!h&&C&&w.push(...MIe(a,g,m,S));const _=[a,...w],T=await db(e,y),k=[];let $=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&k.push(T[v]),d){const A=RIe(s,o,S);k.push(T[A[0]],T[A[1]])}if($=[...$,{placement:s,overflows:k}],!k.every(A=>A<=0)){var O,P;const A=(((O=i.flip)==null?void 0:O.index)||0)+1,I=_[A];if(I)return{data:{index:A,overflows:$},reset:{placement:I}};let R=(P=$.filter(M=>M.overflows[0]<=0).sort((M,E)=>M.overflows[1]-E.overflows[1])[0])==null?void 0:P.placement;if(!R)switch(p){case"bestFit":{var D;const M=(D=$.filter(E=>{if(C){const j=sf(E.placement);return j===x||j==="y"}return!0}).map(E=>[E.placement,E.overflows.filter(j=>j>0).reduce((j,B)=>j+B,0)]).sort((E,j)=>E[1]-j[1])[0])==null?void 0:D[0];M&&(R=M);break}case"initialPlacement":R=a;break}if(s!==R)return{reset:{placement:R}}}return{}}}};function MU(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function FU(t){return IIe.some(e=>t[e]>=0)}const VIe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Eu(t,e);switch(r){case"referenceHidden":{const i=await db(e,{...s,elementContext:"reference"}),o=MU(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:FU(o)}}}case"escaped":{const i=await db(e,{...s,altBoundary:!0}),o=MU(i,n.floating);return{data:{escapedOffsets:o,escaped:FU(o)}}}default:return{}}}}};async function WIe(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=$u(n),a=sv(n),l=sf(n)==="y",c=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,d=Eu(e,t);let{mainAxis:h,crossAxis:p,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(p=a==="end"?m*-1:m),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}const UIe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await WIe(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},GIe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:v,y:x}=y;return{x:v,y:x}}},...l}=Eu(t,e),c={x:n,y:r},u=await db(e,l),d=sf($u(s)),h=QL(d);let p=c[h],m=c[d];if(i){const y=h==="y"?"top":"left",v=h==="y"?"bottom":"right",x=p+u[y],b=p-u[v];p=rD(x,p,b)}if(o){const y=d==="y"?"top":"left",v=d==="y"?"bottom":"right",x=m+u[y],b=m-u[v];m=rD(x,m,b)}const g=a.fn({...e,[h]:p,[d]:m});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[h]:i,[d]:o}}}}}},HIe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Eu(t,e),u={x:n,y:r},d=sf(s),h=QL(d);let p=u[h],m=u[d];const g=Eu(a,e),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const b=h==="y"?"height":"width",S=i.reference[h]-i.floating[b]+y.mainAxis,w=i.reference[h]+i.reference[b]-y.mainAxis;p<S?p=S:p>w&&(p=w)}if(c){var v,x;const b=h==="y"?"width":"height",S=["top","left"].includes($u(s)),w=i.reference[d]-i.floating[b]+(S&&((v=o.offset)==null?void 0:v[d])||0)+(S?0:y.crossAxis),C=i.reference[d]+i.reference[b]+(S?0:((x=o.offset)==null?void 0:x[d])||0)-(S?y.crossAxis:0);m<w?m=w:m>C&&(m=C)}return{[h]:p,[d]:m}}}},qIe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Eu(t,e),u=await db(e,c),d=$u(s),h=sv(s),p=sf(s)==="y",{width:m,height:g}=i.floating;let y,v;d==="top"||d==="bottom"?(y=d,v=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,y=h==="end"?"top":"bottom");const x=g-u.top-u.bottom,b=m-u.left-u.right,S=rf(g-u[y],x),w=rf(m-u[v],b),C=!e.middlewareData.shift;let _=S,T=w;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(_=x),C&&!h){const $=bo(u.left,0),O=bo(u.right,0),P=bo(u.top,0),D=bo(u.bottom,0);p?T=m-2*($!==0||O!==0?$+O:bo(u.left,u.right)):_=g-2*(P!==0||D!==0?P+D:bo(u.top,u.bottom))}await l({...e,availableWidth:T,availableHeight:_});const k=await o.getDimensions(a.floating);return m!==k.width||g!==k.height?{reset:{rects:!0}}:{}}}};function Tk(){return typeof window<"u"}function iv(t){return Ioe(t)?(t.nodeName||"").toLowerCase():"#document"}function Eo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function jc(t){var e;return(e=(Ioe(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Ioe(t){return Tk()?t instanceof Node||t instanceof Eo(t).Node:!1}function Sl(t){return Tk()?t instanceof Element||t instanceof Eo(t).Element:!1}function Nc(t){return Tk()?t instanceof HTMLElement||t instanceof Eo(t).HTMLElement:!1}function LU(t){return!Tk()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Eo(t).ShadowRoot}function L1(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Cl(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function KIe(t){return["table","td","th"].includes(iv(t))}function kk(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function e3(t){const e=t3(),n=Sl(t)?Cl(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function XIe(t){let e=of(t);for(;Nc(e)&&!Kg(e);){if(e3(e))return e;if(kk(e))return null;e=of(e)}return null}function t3(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Kg(t){return["html","body","#document"].includes(iv(t))}function Cl(t){return Eo(t).getComputedStyle(t)}function Ek(t){return Sl(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function of(t){if(iv(t)==="html")return t;const e=t.assignedSlot||t.parentNode||LU(t)&&t.host||jc(t);return LU(e)?e.host:e}function Ooe(t){const e=of(t);return Kg(e)?t.ownerDocument?t.ownerDocument.body:t.body:Nc(e)&&L1(e)?e:Ooe(e)}function fb(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=Ooe(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Eo(s);if(i){const a=iD(o);return e.concat(o,o.visualViewport||[],L1(s)?s:[],a&&n?fb(a):[])}return e.concat(s,fb(s,[],n))}function iD(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Poe(t){const e=Cl(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Nc(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=zN(n)!==i||zN(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function n3(t){return Sl(t)?t:t.contextElement}function cg(t){const e=n3(t);if(!Nc(e))return uc(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=Poe(e);let o=(i?zN(n.width):n.width)/r,a=(i?zN(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const YIe=uc(0);function Roe(t){const e=Eo(t);return!t3()||!e.visualViewport?YIe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function QIe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Eo(t)?!1:e}function ap(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=n3(t);let o=uc(1);e&&(r?Sl(r)&&(o=cg(r)):o=cg(t));const a=QIe(i,n,r)?Roe(i):uc(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(i){const h=Eo(i),p=r&&Sl(r)?Eo(r):r;let m=h,g=iD(m);for(;g&&r&&p!==m;){const y=cg(g),v=g.getBoundingClientRect(),x=Cl(g),b=v.left+(g.clientLeft+parseFloat(x.paddingLeft))*y.x,S=v.top+(g.clientTop+parseFloat(x.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,d*=y.y,l+=b,c+=S,m=Eo(g),g=iD(m)}}return WN({width:u,height:d,x:l,y:c})}function r3(t,e){const n=Ek(t).scrollLeft;return e?e.left+n:ap(jc(t)).left+n}function Doe(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:r3(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function ZIe(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=jc(r),a=e?kk(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=uc(1);const u=uc(0),d=Nc(r);if((d||!d&&!i)&&((iv(r)!=="body"||L1(o))&&(l=Ek(r)),Nc(r))){const p=ap(r);c=cg(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const h=o&&!d&&!i?Doe(o,l,!0):uc(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}}function JIe(t){return Array.from(t.getClientRects())}function eOe(t){const e=jc(t),n=Ek(t),r=t.ownerDocument.body,s=bo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=bo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+r3(t);const a=-n.scrollTop;return Cl(r).direction==="rtl"&&(o+=bo(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function tOe(t,e){const n=Eo(t),r=jc(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=t3();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function nOe(t,e){const n=ap(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Nc(t)?cg(t):uc(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function BU(t,e,n){let r;if(e==="viewport")r=tOe(t,n);else if(e==="document")r=eOe(jc(t));else if(Sl(e))r=nOe(e,n);else{const s=Roe(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return WN(r)}function joe(t,e){const n=of(t);return n===e||!Sl(n)||Kg(n)?!1:Cl(n).position==="fixed"||joe(n,e)}function rOe(t,e){const n=e.get(t);if(n)return n;let r=fb(t,[],!1).filter(a=>Sl(a)&&iv(a)!=="body"),s=null;const i=Cl(t).position==="fixed";let o=i?of(t):t;for(;Sl(o)&&!Kg(o);){const a=Cl(o),l=e3(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||L1(o)&&!l&&joe(t,o))?r=r.filter(u=>u!==o):s=a,o=of(o)}return e.set(t,r),r}function sOe(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?kk(e)?[]:rOe(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=BU(e,u,s);return c.top=bo(d.top,c.top),c.right=rf(d.right,c.right),c.bottom=rf(d.bottom,c.bottom),c.left=bo(d.left,c.left),c},BU(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function iOe(t){const{width:e,height:n}=Poe(t);return{width:e,height:n}}function oOe(t,e,n){const r=Nc(e),s=jc(e),i=n==="fixed",o=ap(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=uc(0);if(r||!r&&!i)if((iv(e)!=="body"||L1(s))&&(a=Ek(e)),r){const h=ap(e,!0,i,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else s&&(l.x=r3(s));const c=s&&!r&&!i?Doe(s,a):uc(0),u=o.left+a.scrollLeft-l.x-c.x,d=o.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:o.width,height:o.height}}function HI(t){return Cl(t).position==="static"}function zU(t,e){if(!Nc(t)||Cl(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return jc(t)===n&&(n=n.ownerDocument.body),n}function Moe(t,e){const n=Eo(t);if(kk(t))return n;if(!Nc(t)){let s=of(t);for(;s&&!Kg(s);){if(Sl(s)&&!HI(s))return s;s=of(s)}return n}let r=zU(t,e);for(;r&&KIe(r)&&HI(r);)r=zU(r,e);return r&&Kg(r)&&HI(r)&&!e3(r)?n:r||XIe(t)||n}const aOe=async function(t){const e=this.getOffsetParent||Moe,n=this.getDimensions,r=await n(t.floating);return{reference:oOe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function lOe(t){return Cl(t).direction==="rtl"}const cOe={convertOffsetParentRelativeRectToViewportRelativeRect:ZIe,getDocumentElement:jc,getClippingRect:sOe,getOffsetParent:Moe,getElementRects:aOe,getClientRects:JIe,getDimensions:iOe,getScale:cg,isElement:Sl,isRTL:lOe};function uOe(t,e){let n=null,r;const s=jc(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:u,width:d,height:h}=t.getBoundingClientRect();if(a||e(),!d||!h)return;const p=lC(u),m=lC(s.clientWidth-(c+d)),g=lC(s.clientHeight-(u+h)),y=lC(c),x={rootMargin:-p+"px "+-m+"px "+-g+"px "+-y+"px",threshold:bo(0,rf(1,l))||1};let b=!0;function S(w){const C=w[0].intersectionRatio;if(C!==l){if(!b)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(S,{...x,root:s.ownerDocument})}catch{n=new IntersectionObserver(S,x)}n.observe(t)}return o(!0),i}function dOe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=n3(t),u=s||i?[...c?fb(c):[],...fb(e)]:[];u.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const d=c&&a?uOe(c,n):null;let h=-1,p=null;o&&(p=new ResizeObserver(v=>{let[x]=v;x&&x.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let m,g=l?ap(t):null;l&&y();function y(){const v=ap(t);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&n(),g=v,m=requestAnimationFrame(y)}return n(),()=>{var v;u.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),d==null||d(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const fOe=UIe,hOe=GIe,pOe=zIe,mOe=qIe,gOe=VIe,VU=BIe,yOe=HIe,vOe=(t,e,n)=>{const r=new Map,s={platform:cOe,...n},i={...s.platform,_c:r};return LIe(t,e,{...s,platform:i})};var S2=typeof document<"u"?N.useLayoutEffect:N.useEffect;function UN(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!UN(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!UN(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Foe(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function WU(t,e){const n=Foe(t);return Math.round(e*n)/n}function qI(t){const e=N.useRef(t);return S2(()=>{e.current=t}),e}function xOe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=N.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,p]=N.useState(r);UN(h,r)||p(r);const[m,g]=N.useState(null),[y,v]=N.useState(null),x=N.useCallback(E=>{E!==C.current&&(C.current=E,g(E))},[]),b=N.useCallback(E=>{E!==_.current&&(_.current=E,v(E))},[]),S=i||m,w=o||y,C=N.useRef(null),_=N.useRef(null),T=N.useRef(u),k=l!=null,$=qI(l),O=qI(s),P=qI(c),D=N.useCallback(()=>{if(!C.current||!_.current)return;const E={placement:e,strategy:n,middleware:h};O.current&&(E.platform=O.current),vOe(C.current,_.current,E).then(j=>{const B={...j,isPositioned:P.current!==!1};A.current&&!UN(T.current,B)&&(T.current=B,Op.flushSync(()=>{d(B)}))})},[h,e,n,O,P]);S2(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d(E=>({...E,isPositioned:!1})))},[c]);const A=N.useRef(!1);S2(()=>(A.current=!0,()=>{A.current=!1}),[]),S2(()=>{if(S&&(C.current=S),w&&(_.current=w),S&&w){if($.current)return $.current(S,w,D);D()}},[S,w,D,$,k]);const I=N.useMemo(()=>({reference:C,floating:_,setReference:x,setFloating:b}),[x,b]),R=N.useMemo(()=>({reference:S,floating:w}),[S,w]),M=N.useMemo(()=>{const E={position:n,left:0,top:0};if(!R.floating)return E;const j=WU(R.floating,u.x),B=WU(R.floating,u.y);return a?{...E,transform:"translate("+j+"px, "+B+"px)",...Foe(R.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:j,top:B}},[n,a,R.floating,u.x,u.y]);return N.useMemo(()=>({...u,update:D,refs:I,elements:R,floatingStyles:M}),[u,D,I,R,M])}const bOe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?VU({element:r.current,padding:s}).fn(n):{}:r?VU({element:r,padding:s}).fn(n):{}}}},wOe=(t,e)=>({...fOe(t),options:[t,e]}),SOe=(t,e)=>({...hOe(t),options:[t,e]}),COe=(t,e)=>({...yOe(t),options:[t,e]}),NOe=(t,e)=>({...pOe(t),options:[t,e]}),_Oe=(t,e)=>({...mOe(t),options:[t,e]}),TOe=(t,e)=>({...gOe(t),options:[t,e]}),kOe=(t,e)=>({...bOe(t),options:[t,e]});var EOe="Arrow",Loe=N.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return f.jsx(ct.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});Loe.displayName=EOe;var $Oe=Loe;function AOe(t,e=[]){let n=[];function r(i,o){const a=N.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:h,children:p,...m}=d,g=(h==null?void 0:h[t][l])||a,y=N.useMemo(()=>m,Object.values(m));return f.jsx(g.Provider,{value:y,children:p})}function u(d,h){const p=(h==null?void 0:h[t][l])||a,m=N.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=n.map(o=>N.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return N.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,IOe(s,...e)]}function IOe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function OOe(t){const[e,n]=N.useState(void 0);return Rs(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var s3="Popper",[Boe,Cf]=AOe(s3),[POe,zoe]=Boe(s3),Voe=t=>{const{__scopePopper:e,children:n}=t,[r,s]=N.useState(null);return f.jsx(POe,{scope:e,anchor:r,onAnchorChange:s,children:n})};Voe.displayName=s3;var Woe="PopperAnchor",Uoe=N.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=zoe(Woe,n),o=N.useRef(null),a=Gt(e,o);return N.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:f.jsx(ct.div,{...s,ref:a})});Uoe.displayName=Woe;var i3="PopperContent",[ROe,DOe]=Boe(i3),Goe=N.forwardRef((t,e)=>{var de,we,se,he,me,Y;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:m,...g}=t,y=zoe(i3,n),[v,x]=N.useState(null),b=Gt(e,ye=>x(ye)),[S,w]=N.useState(null),C=OOe(S),_=(C==null?void 0:C.width)??0,T=(C==null?void 0:C.height)??0,k=r+(i!=="center"?"-"+i:""),$=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},O=Array.isArray(c)?c:[c],P=O.length>0,D={padding:$,boundary:O.filter(MOe),altBoundary:P},{refs:A,floatingStyles:I,placement:R,isPositioned:M,middlewareData:E}=xOe({strategy:"fixed",placement:k,whileElementsMounted:(...ye)=>dOe(...ye,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[wOe({mainAxis:s+T,alignmentAxis:o}),l&&SOe({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?COe():void 0,...D}),l&&NOe({...D}),_Oe({...D,apply:({elements:ye,rects:Ae,availableWidth:Re,availableHeight:ze})=>{const{width:rt,height:z}=Ae.reference,Q=ye.floating.style;Q.setProperty("--radix-popper-available-width",`${Re}px`),Q.setProperty("--radix-popper-available-height",`${ze}px`),Q.setProperty("--radix-popper-anchor-width",`${rt}px`),Q.setProperty("--radix-popper-anchor-height",`${z}px`)}}),S&&kOe({element:S,padding:a}),FOe({arrowWidth:_,arrowHeight:T}),h&&TOe({strategy:"referenceHidden",...D})]}),[j,B]=Koe(R),W=ci(m);Rs(()=>{M&&(W==null||W())},[M,W]);const G=(de=E.arrow)==null?void 0:de.x,te=(we=E.arrow)==null?void 0:we.y,ne=((se=E.arrow)==null?void 0:se.centerOffset)!==0,[ue,ge]=N.useState();return Rs(()=>{v&&ge(window.getComputedStyle(v).zIndex)},[v]),f.jsx("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...I,transform:M?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ue,"--radix-popper-transform-origin":[(he=E.transformOrigin)==null?void 0:he.x,(me=E.transformOrigin)==null?void 0:me.y].join(" "),...((Y=E.hide)==null?void 0:Y.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:f.jsx(ROe,{scope:n,placedSide:j,onArrowChange:w,arrowX:G,arrowY:te,shouldHideArrow:ne,children:f.jsx(ct.div,{"data-side":j,"data-align":B,...g,ref:b,style:{...g.style,animation:M?void 0:"none"}})})})});Goe.displayName=i3;var Hoe="PopperArrow",jOe={top:"bottom",right:"left",bottom:"top",left:"right"},qoe=N.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=DOe(Hoe,r),o=jOe[i.placedSide];return f.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:f.jsx($Oe,{...s,ref:n,style:{...s.style,display:"block"}})})});qoe.displayName=Hoe;function MOe(t){return t!==null}var FOe=t=>({name:"transformOrigin",options:t,fn(e){var y,v,x;const{placement:n,rects:r,middlewareData:s}=e,o=((y=s.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=Koe(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(((v=s.arrow)==null?void 0:v.x)??0)+a/2,p=(((x=s.arrow)==null?void 0:x.y)??0)+l/2;let m="",g="";return c==="bottom"?(m=o?d:`${h}px`,g=`${-l}px`):c==="top"?(m=o?d:`${h}px`,g=`${r.floating.height+l}px`):c==="right"?(m=`${-l}px`,g=o?d:`${p}px`):c==="left"&&(m=`${r.floating.width+l}px`,g=o?d:`${p}px`),{data:{x:m,y:g}}}});function Koe(t){const[e,n="center"]=t.split("-");return[e,n]}var $k=Voe,B1=Uoe,Ak=Goe,Ik=qoe,LOe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},cm=new WeakMap,cC=new WeakMap,uC={},KI=0,Xoe=function(t){return t&&(t.host||Xoe(t.parentNode))},BOe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Xoe(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},zOe=function(t,e,n,r){var s=BOe(e,Array.isArray(t)?t:[t]);uC[n]||(uC[n]=new WeakMap);var i=uC[n],o=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var p=h.getAttribute(r),m=p!==null&&p!=="false",g=(cm.get(h)||0)+1,y=(i.get(h)||0)+1;cm.set(h,g),i.set(h,y),o.push(h),g===1&&m&&cC.set(h,!0),y===1&&h.setAttribute(n,"true"),m||h.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return u(e),a.clear(),KI++,function(){o.forEach(function(d){var h=cm.get(d)-1,p=i.get(d)-1;cm.set(d,h),i.set(d,p),h||(cC.has(d)||d.removeAttribute(r),cC.delete(d)),p||d.removeAttribute(n)}),KI--,KI||(cm=new WeakMap,cm=new WeakMap,cC=new WeakMap,uC={})}},Ok=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=LOe(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),zOe(r,s,n,"aria-hidden")):function(){return null}},Zl=function(){return Zl=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Zl.apply(this,arguments)};function Yoe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function VOe(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var C2="right-scroll-bar-position",N2="width-before-scroll-bar",WOe="with-scroll-bars-hidden",UOe="--removed-body-scroll-bar-size";function XI(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function GOe(t,e){var n=N.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var HOe=typeof window<"u"?N.useLayoutEffect:N.useEffect,UU=new WeakMap;function qOe(t,e){var n=GOe(null,function(r){return t.forEach(function(s){return XI(s,r)})});return HOe(function(){var r=UU.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||XI(a,null)}),i.forEach(function(a){s.has(a)||XI(a,o)})}UU.set(n,t)},[t]),n}function KOe(t){return t}function XOe(t,e){e===void 0&&(e=KOe);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return s}function YOe(t){t===void 0&&(t={});var e=XOe(null);return e.options=Zl({async:!0,ssr:!1},t),e}var Qoe=function(t){var e=t.sideCar,n=Yoe(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,Zl({},n))};Qoe.isSideCarExport=!0;function QOe(t,e){return t.useMedium(e),Qoe}var Zoe=YOe(),YI=function(){},Pk=N.forwardRef(function(t,e){var n=N.useRef(null),r=N.useState({onScrollCapture:YI,onWheelCapture:YI,onTouchMoveCapture:YI}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,p=t.noIsolation,m=t.inert,g=t.allowPinchZoom,y=t.as,v=y===void 0?"div":y,x=t.gapMode,b=Yoe(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,w=qOe([n,e]),C=Zl(Zl({},b),s);return N.createElement(N.Fragment,null,u&&N.createElement(S,{sideCar:Zoe,removeScrollBar:c,shards:d,noIsolation:p,inert:m,setCallbacks:i,allowPinchZoom:!!g,lockRef:n,gapMode:x}),o?N.cloneElement(N.Children.only(a),Zl(Zl({},C),{ref:w})):N.createElement(v,Zl({},C,{className:l,ref:w}),a))});Pk.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Pk.classNames={fullWidth:N2,zeroRight:C2};var ZOe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function JOe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=ZOe();return e&&t.setAttribute("nonce",e),t}function ePe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function tPe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var nPe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=JOe())&&(ePe(e,n),tPe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},rPe=function(){var t=nPe();return function(e,n){N.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Joe=function(){var t=rPe(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},sPe={left:0,top:0,right:0,gap:0},QI=function(t){return parseInt(t||"",10)||0},iPe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[QI(n),QI(r),QI(s)]},oPe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return sPe;var e=iPe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},aPe=Joe(),ug="data-scroll-locked",lPe=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(WOe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(ug,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(C2,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(N2,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(C2," .").concat(C2,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(N2," .").concat(N2,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ug,`] {
    `).concat(UOe,": ").concat(a,`px;
  }
`)},GU=function(){var t=parseInt(document.body.getAttribute(ug)||"0",10);return isFinite(t)?t:0},cPe=function(){N.useEffect(function(){return document.body.setAttribute(ug,(GU()+1).toString()),function(){var t=GU()-1;t<=0?document.body.removeAttribute(ug):document.body.setAttribute(ug,t.toString())}},[])},uPe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;cPe();var i=N.useMemo(function(){return oPe(s)},[s]);return N.createElement(aPe,{styles:lPe(i,!e,s,n?"":"!important")})},oD=!1;if(typeof window<"u")try{var dC=Object.defineProperty({},"passive",{get:function(){return oD=!0,!0}});window.addEventListener("test",dC,dC),window.removeEventListener("test",dC,dC)}catch{oD=!1}var um=oD?{passive:!1}:!1,dPe=function(t){return t.tagName==="TEXTAREA"},eae=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!dPe(t)&&n[e]==="visible")},fPe=function(t){return eae(t,"overflowY")},hPe=function(t){return eae(t,"overflowX")},HU=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=tae(t,r);if(s){var i=nae(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},pPe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},mPe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},tae=function(t,e){return t==="v"?fPe(e):hPe(e)},nae=function(t,e){return t==="v"?pPe(e):mPe(e)},gPe=function(t,e){return t==="h"&&e==="rtl"?-1:1},yPe=function(t,e,n,r,s){var i=gPe(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,h=0;do{var p=nae(t,a),m=p[0],g=p[1],y=p[2],v=g-y-i*m;(m||v)&&tae(t,a)&&(d+=v,h+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(d)<1||!s)||!u&&(Math.abs(h)<1||!s))&&(c=!0),c},fC=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},qU=function(t){return[t.deltaX,t.deltaY]},KU=function(t){return t&&"current"in t?t.current:t},vPe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},xPe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},bPe=0,dm=[];function wPe(t){var e=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),s=N.useState(bPe++)[0],i=N.useState(Joe)[0],o=N.useRef(t);N.useEffect(function(){o.current=t},[t]),N.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=VOe([t.lockRef.current],(t.shards||[]).map(KU),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=N.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var v=fC(g),x=n.current,b="deltaX"in g?g.deltaX:x[0]-v[0],S="deltaY"in g?g.deltaY:x[1]-v[1],w,C=g.target,_=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in g&&_==="h"&&C.type==="range")return!1;var T=HU(_,C);if(!T)return!0;if(T?w=_:(w=_==="v"?"h":"v",T=HU(_,C)),!T)return!1;if(!r.current&&"changedTouches"in g&&(b||S)&&(r.current=w),!w)return!0;var k=r.current||w;return yPe(k,y,g,k==="h"?b:S,!0)},[]),l=N.useCallback(function(g){var y=g;if(!(!dm.length||dm[dm.length-1]!==i)){var v="deltaY"in y?qU(y):fC(y),x=e.current.filter(function(w){return w.name===y.type&&(w.target===y.target||y.target===w.shadowParent)&&vPe(w.delta,v)})[0];if(x&&x.should){y.cancelable&&y.preventDefault();return}if(!x){var b=(o.current.shards||[]).map(KU).filter(Boolean).filter(function(w){return w.contains(y.target)}),S=b.length>0?a(y,b[0]):!o.current.noIsolation;S&&y.cancelable&&y.preventDefault()}}},[]),c=N.useCallback(function(g,y,v,x){var b={name:g,delta:y,target:v,should:x,shadowParent:SPe(v)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),u=N.useCallback(function(g){n.current=fC(g),r.current=void 0},[]),d=N.useCallback(function(g){c(g.type,qU(g),g.target,a(g,t.lockRef.current))},[]),h=N.useCallback(function(g){c(g.type,fC(g),g.target,a(g,t.lockRef.current))},[]);N.useEffect(function(){return dm.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,um),document.addEventListener("touchmove",l,um),document.addEventListener("touchstart",u,um),function(){dm=dm.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,um),document.removeEventListener("touchmove",l,um),document.removeEventListener("touchstart",u,um)}},[]);var p=t.removeScrollBar,m=t.inert;return N.createElement(N.Fragment,null,m?N.createElement(i,{styles:xPe(s)}):null,p?N.createElement(uPe,{gapMode:t.gapMode}):null)}function SPe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const CPe=QOe(Zoe,wPe);var z1=N.forwardRef(function(t,e){return N.createElement(Pk,Zl({},t,{ref:e,sideCar:CPe}))});z1.classNames=Pk.classNames;var o3="Popover",[rae,D9t]=$l(o3,[Cf]),V1=Cf(),[NPe,Nf]=rae(o3),sae=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!1}=t,a=V1(e),l=N.useRef(null),[c,u]=N.useState(!1),[d=!1,h]=ka({prop:r,defaultProp:s,onChange:i});return f.jsx($k,{...a,children:f.jsx(NPe,{scope:e,contentId:to(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:N.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:c,onCustomAnchorAdd:N.useCallback(()=>u(!0),[]),onCustomAnchorRemove:N.useCallback(()=>u(!1),[]),modal:o,children:n})})};sae.displayName=o3;var iae="PopoverAnchor",_Pe=N.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Nf(iae,n),i=V1(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=s;return N.useEffect(()=>(o(),()=>a()),[o,a]),f.jsx(B1,{...i,...r,ref:e})});_Pe.displayName=iae;var oae="PopoverTrigger",aae=N.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Nf(oae,n),i=V1(n),o=Gt(e,s.triggerRef),a=f.jsx(ct.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":fae(s.open),...r,ref:o,onClick:Ie(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:f.jsx(B1,{asChild:!0,...i,children:a})});aae.displayName=oae;var a3="PopoverPortal",[TPe,kPe]=rae(a3,{forceMount:void 0}),lae=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,i=Nf(a3,e);return f.jsx(TPe,{scope:e,forceMount:n,children:f.jsx(co,{present:n||i.open,children:f.jsx(ev,{asChild:!0,container:s,children:r})})})};lae.displayName=a3;var Xg="PopoverContent",cae=N.forwardRef((t,e)=>{const n=kPe(Xg,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,i=Nf(Xg,t.__scopePopover);return f.jsx(co,{present:r||i.open,children:i.modal?f.jsx(EPe,{...s,ref:e}):f.jsx($Pe,{...s,ref:e})})});cae.displayName=Xg;var EPe=N.forwardRef((t,e)=>{const n=Nf(Xg,t.__scopePopover),r=N.useRef(null),s=Gt(e,r),i=N.useRef(!1);return N.useEffect(()=>{const o=r.current;if(o)return Ok(o)},[]),f.jsx(z1,{as:Ii,allowPinchZoom:!0,children:f.jsx(uae,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ie(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),i.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Ie(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Ie(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),$Pe=N.forwardRef((t,e)=>{const n=Nf(Xg,t.__scopePopover),r=N.useRef(!1),s=N.useRef(!1);return f.jsx(uae,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),uae=N.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,h=Nf(Xg,n),p=V1(n);return _k(),f.jsx(F1,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:f.jsx(Pp,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:f.jsx(Ak,{"data-state":fae(h.open),role:"dialog",id:h.contentId,...p,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),dae="PopoverClose",APe=N.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Nf(dae,n);return f.jsx(ct.button,{type:"button",...r,ref:e,onClick:Ie(t.onClick,()=>s.onOpenChange(!1))})});APe.displayName=dae;var IPe="PopoverArrow",OPe=N.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=V1(n);return f.jsx(Ik,{...s,...r,ref:e})});OPe.displayName=IPe;function fae(t){return t?"open":"closed"}var PPe=sae,RPe=aae,DPe=lae,hae=cae;const ov=PPe,av=RPe,jp=N.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>f.jsx(DPe,{children:f.jsx(hae,{ref:s,align:e,sideOffset:n,className:pe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));jp.displayName=hae.displayName;const _c=Object.create(null);_c.open="0";_c.close="1";_c.ping="2";_c.pong="3";_c.message="4";_c.upgrade="5";_c.noop="6";const _2=Object.create(null);Object.keys(_c).forEach(t=>{_2[_c[t]]=t});const aD={type:"error",data:"parser error"},pae=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",mae=typeof ArrayBuffer=="function",gae=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,l3=({type:t,data:e},n,r)=>pae&&e instanceof Blob?n?r(e):XU(e,r):mae&&(e instanceof ArrayBuffer||gae(e))?n?r(e):XU(new Blob([e]),r):r(_c[t]+(e||"")),XU=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function YU(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let ZI;function jPe(t,e){if(pae&&t.data instanceof Blob)return t.data.arrayBuffer().then(YU).then(e);if(mae&&(t.data instanceof ArrayBuffer||gae(t.data)))return e(YU(t.data));l3(t,!1,n=>{ZI||(ZI=new TextEncoder),e(ZI.encode(n))})}const QU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ux=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<QU.length;t++)Ux[QU.charCodeAt(t)]=t;const MPe=t=>{let e=t.length*.75,n=t.length,r,s=0,i,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(r=0;r<n;r+=4)i=Ux[t.charCodeAt(r)],o=Ux[t.charCodeAt(r+1)],a=Ux[t.charCodeAt(r+2)],l=Ux[t.charCodeAt(r+3)],u[s++]=i<<2|o>>4,u[s++]=(o&15)<<4|a>>2,u[s++]=(a&3)<<6|l&63;return c},FPe=typeof ArrayBuffer=="function",c3=(t,e)=>{if(typeof t!="string")return{type:"message",data:yae(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:LPe(t.substring(1),e)}:_2[n]?t.length>1?{type:_2[n],data:t.substring(1)}:{type:_2[n]}:aD},LPe=(t,e)=>{if(FPe){const n=MPe(t);return yae(n,e)}else return{base64:!0,data:t}},yae=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},vae="",BPe=(t,e)=>{const n=t.length,r=new Array(n);let s=0;t.forEach((i,o)=>{l3(i,!1,a=>{r[o]=a,++s===n&&e(r.join(vae))})})},zPe=(t,e)=>{const n=t.split(vae),r=[];for(let s=0;s<n.length;s++){const i=c3(n[s],e);if(r.push(i),i.type==="error")break}return r};function VPe(){return new TransformStream({transform(t,e){jPe(t,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}let JI;function hC(t){return t.reduce((e,n)=>e+n.length,0)}function pC(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)n[s]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function WPe(t,e){JI||(JI=new TextDecoder);const n=[];let r=0,s=-1,i=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(hC(n)<1)break;const l=pC(n,1);i=(l[0]&128)===128,s=l[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(hC(n)<2)break;const l=pC(n,2);s=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(hC(n)<8)break;const l=pC(n,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(aD);break}s=u*Math.pow(2,32)+c.getUint32(4),r=3}else{if(hC(n)<s)break;const l=pC(n,s);a.enqueue(c3(i?l:JI.decode(l),e)),r=0}if(s===0||s>t){a.enqueue(aD);break}}}})}const xae=4;function Wr(t){if(t)return UPe(t)}function UPe(t){for(var e in Wr.prototype)t[e]=Wr.prototype[e];return t}Wr.prototype.on=Wr.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Wr.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Wr.prototype.off=Wr.prototype.removeListener=Wr.prototype.removeAllListeners=Wr.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===e||r.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Wr.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,e)}return this};Wr.prototype.emitReserved=Wr.prototype.emit;Wr.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Wr.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Rk=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),aa=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),GPe="arraybuffer";function bae(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const HPe=aa.setTimeout,qPe=aa.clearTimeout;function Dk(t,e){e.useNativeTimers?(t.setTimeoutFn=HPe.bind(aa),t.clearTimeoutFn=qPe.bind(aa)):(t.setTimeoutFn=aa.setTimeout.bind(aa),t.clearTimeoutFn=aa.clearTimeout.bind(aa))}const KPe=1.33;function XPe(t){return typeof t=="string"?YPe(t):Math.ceil((t.byteLength||t.size)*KPe)}function YPe(t){let e=0,n=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function wae(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function QPe(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function ZPe(t){let e={},n=t.split("&");for(let r=0,s=n.length;r<s;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class JPe extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class u3 extends Wr{constructor(e){super(),this.writable=!1,Dk(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new JPe(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=c3(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=QPe(e);return n.length?"?"+n:""}}class eRe extends u3{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};zPe(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,BPe(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=wae()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let Sae=!1;try{Sae=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const tRe=Sae;function nRe(){}class rRe extends eRe{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let dg=class T2 extends Wr{constructor(e,n,r){super(),this.createRequest=e,Dk(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=bae(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=T2.requestsCount++,T2.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=nRe,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete T2.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};dg.requestsCount=0;dg.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ZU);else if(typeof addEventListener=="function"){const t="onpagehide"in aa?"pagehide":"unload";addEventListener(t,ZU,!1)}}function ZU(){for(let t in dg.requests)dg.requests.hasOwnProperty(t)&&dg.requests[t].abort()}const sRe=function(){const t=Cae({xdomain:!1});return t&&t.responseType!==null}();class iRe extends rRe{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=sRe&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new dg(Cae,this.uri(),e)}}function Cae(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||tRe))return new XMLHttpRequest}catch{}if(!e)try{return new aa[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Nae=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class oRe extends u3{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=Nae?{}:bae(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;l3(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}s&&Rk(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=wae()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const eO=aa.WebSocket||aa.MozWebSocket;class aRe extends oRe{createSocket(e,n,r){return Nae?new eO(e,n,r):n?new eO(e,n):new eO(e)}doWrite(e,n){this.ws.send(n)}}class lRe extends u3{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=WPe(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),s=VPe();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const i=()=>{r.read().then(({done:a,value:l})=>{a||(this.onPacket(l),i())}).catch(a=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;this._writer.write(r).then(()=>{s&&Rk(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const cRe={websocket:aRe,webtransport:lRe,polling:iRe},uRe=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,dRe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function lD(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let s=uRe.exec(t||""),i={},o=14;for(;o--;)i[dRe[o]]=s[o]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=fRe(i,i.path),i.queryKey=hRe(i,i.query),i}function fRe(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function hRe(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(n[s]=i)}),n}const cD=typeof addEventListener=="function"&&typeof removeEventListener=="function",k2=[];cD&&addEventListener("offline",()=>{k2.forEach(t=>t())},!1);class Wd extends Wr{constructor(e,n){if(super(),this.binaryType=GPe,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=lD(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=lD(n.host).host);Dk(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=ZPe(this.opts.query)),cD&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},k2.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=xae,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Wd.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Wd.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=XPe(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Rk(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(Wd.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),cD&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=k2.indexOf(this._offlineEventListener);r!==-1&&k2.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Wd.protocol=xae;class pRe extends Wd{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;Wd.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Wd.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function i(){r||(r=!0,u(),n.close(),n=null)}const o=d=>{const h=new Error("probe error: "+d);h.transport=n.name,i(),this.emitReserved("upgradeError",h)};function a(){o("transport closed")}function l(){o("socket closed")}function c(d){n&&d.name!==n.name&&i()}const u=()=>{n.removeListener("open",s),n.removeListener("error",o),n.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};n.once("open",s),n.once("error",o),n.once("close",a),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let mRe=class extends pRe{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>cRe[s]).filter(s=>!!s)),super(e,r)}};function gRe(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=lD(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const yRe=typeof ArrayBuffer=="function",vRe=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,_ae=Object.prototype.toString,xRe=typeof Blob=="function"||typeof Blob<"u"&&_ae.call(Blob)==="[object BlobConstructor]",bRe=typeof File=="function"||typeof File<"u"&&_ae.call(File)==="[object FileConstructor]";function d3(t){return yRe&&(t instanceof ArrayBuffer||vRe(t))||xRe&&t instanceof Blob||bRe&&t instanceof File}function E2(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(E2(t[n]))return!0;return!1}if(d3(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return E2(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&E2(t[n]))return!0;return!1}function wRe(t){const e=[],n=t.data,r=t;return r.data=uD(n,e),r.attachments=e.length,{packet:r,buffers:e}}function uD(t,e){if(!t)return t;if(d3(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=uD(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=uD(t[r],e));return n}return t}function SRe(t,e){return t.data=dD(t.data,e),delete t.attachments,t}function dD(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=dD(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=dD(t[n],e));return t}const CRe=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],NRe=5;var Yt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Yt||(Yt={}));class _Re{constructor(e){this.replacer=e}encode(e){return(e.type===Yt.EVENT||e.type===Yt.ACK)&&E2(e)?this.encodeAsBinary({type:e.type===Yt.EVENT?Yt.BINARY_EVENT:Yt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Yt.BINARY_EVENT||e.type===Yt.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=wRe(e),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function JU(t){return Object.prototype.toString.call(t)==="[object Object]"}class f3 extends Wr{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===Yt.BINARY_EVENT;r||n.type===Yt.BINARY_ACK?(n.type=r?Yt.EVENT:Yt.ACK,this.reconstructor=new TRe(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(d3(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(Yt[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Yt.BINARY_EVENT||r.type===Yt.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(i,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(f3.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Yt.CONNECT:return JU(n);case Yt.DISCONNECT:return n===void 0;case Yt.CONNECT_ERROR:return typeof n=="string"||JU(n);case Yt.EVENT:case Yt.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&CRe.indexOf(n[0])===-1);case Yt.ACK:case Yt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class TRe{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=SRe(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const kRe=Object.freeze(Object.defineProperty({__proto__:null,Decoder:f3,Encoder:_Re,get PacketType(){return Yt},protocol:NRe},Symbol.toStringTag,{value:"Module"}));function Ya(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const ERe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Tae extends Wr{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ya(e,"open",this.onopen.bind(this)),Ya(e,"packet",this.onpacket.bind(this)),Ya(e,"error",this.onerror.bind(this)),Ya(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,s,i;if(ERe.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:Yt.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,d=n.pop();this._registerAckCallback(u,d),o.id=u}const a=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,l=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},s),o=(...a)=>{this.io.clearTimeoutFn(i),n.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,s)=>{const i=(o,a)=>o?s(o):r(a);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Yt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Yt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Yt.EVENT:case Yt.BINARY_EVENT:this.onevent(e);break;case Yt.ACK:case Yt.BINARY_ACK:this.onack(e);break;case Yt.DISCONNECT:this.ondisconnect();break;case Yt.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:Yt.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Yt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function lv(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}lv.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};lv.prototype.reset=function(){this.attempts=0};lv.prototype.setMin=function(t){this.ms=t};lv.prototype.setMax=function(t){this.max=t};lv.prototype.setJitter=function(t){this.jitter=t};class fD extends Wr{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Dk(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new lv({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||kRe;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new mRe(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=Ya(n,"open",function(){r.onopen(),e&&e()}),i=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=Ya(n,"error",i);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(s),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Ya(e,"ping",this.onping.bind(this)),Ya(e,"data",this.ondata.bind(this)),Ya(e,"error",this.onerror.bind(this)),Ya(e,"close",this.onclose.bind(this)),Ya(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Rk(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Tae(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const mx={};function $2(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=gRe(t,e.path||"/socket.io"),r=n.source,s=n.id,i=n.path,o=mx[s]&&i in mx[s].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new fD(r,e):(mx[s]||(mx[s]=new fD(r,e)),l=mx[s]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign($2,{Manager:fD,Socket:Tae,io:$2,connect:$2});function Tt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function io(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Xs(t,e){const n=Tt(t);return isNaN(e)?io(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Nl(t,e){const n=Tt(t);if(isNaN(e))return io(t,NaN);if(!e)return n;const r=n.getDate(),s=io(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const i=s.getDate();return r>=i?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const h3=6048e5,$Re=864e5,mC=43200,e8=1440;let ARe={};function cv(){return ARe}function Tc(t,e){var a,l,c,u;const n=cv(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=Tt(t),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function lp(t){return Tc(t,{weekStartsOn:1})}function kae(t){const e=Tt(t),n=e.getFullYear(),r=io(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=lp(r),i=io(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=lp(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Yg(t){const e=Tt(t);return e.setHours(0,0,0,0),e}function Qg(t){const e=Tt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function tc(t,e){const n=Yg(t),r=Yg(e),s=+n-Qg(n),i=+r-Qg(r);return Math.round((s-i)/$Re)}function IRe(t){const e=kae(t),n=io(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),lp(n)}function hD(t,e){const n=e*7;return Xs(t,n)}function ORe(t,e){return Nl(t,e*12)}function PRe(t){let e;return t.forEach(function(n){const r=Tt(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function RRe(t){let e;return t.forEach(n=>{const r=Tt(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function A2(t,e){const n=Tt(t),r=Tt(e),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function DRe(t){return io(t,Date.now())}function Ki(t,e){const n=Yg(t),r=Yg(e);return+n==+r}function p3(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function jRe(t){if(!p3(t)&&typeof t!="number")return!1;const e=Tt(t);return!isNaN(Number(e))}function Zg(t,e){const n=Tt(t),r=Tt(e),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function MRe(t,e,n){const r=Tc(t,n),s=Tc(e,n),i=+r-Qg(r),o=+s-Qg(s);return Math.round((i-o)/h3)}function FRe(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function LRe(t,e){return+Tt(t)-+Tt(e)}function BRe(t){const e=Tt(t);return e.setHours(23,59,59,999),e}function jk(t){const e=Tt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function zRe(t){const e=Tt(t);return+BRe(e)==+jk(e)}function VRe(t,e){const n=Tt(t),r=Tt(e),s=A2(n,r),i=Math.abs(Zg(n,r));let o;if(i<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);let a=A2(n,r)===-s;zRe(Tt(t))&&i===1&&A2(t,r)===1&&(a=!1),o=s*(i-Number(a))}return o===0?0:o}function WRe(t,e,n){const r=LRe(t,e)/1e3;return FRe(n==null?void 0:n.roundingMethod)(r)}function no(t){const e=Tt(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Eae(t){const e=Tt(t),n=io(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function m3(t,e){var a,l,c,u;const n=cv(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=Tt(t),i=s.getDay(),o=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}function $ae(t){return m3(t,{weekStartsOn:1})}const URe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},GRe=(t,e,n)=>{let r;const s=URe[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function hu(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const HRe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},qRe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},KRe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},XRe={date:hu({formats:HRe,defaultWidth:"full"}),time:hu({formats:qRe,defaultWidth:"full"}),dateTime:hu({formats:KRe,defaultWidth:"full"})},YRe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},QRe=(t,e,n,r)=>YRe[t];function Ci(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const ZRe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},JRe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},eDe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},tDe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},nDe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},rDe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},sDe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},iDe={ordinalNumber:sDe,era:Ci({values:ZRe,defaultWidth:"wide"}),quarter:Ci({values:JRe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ci({values:eDe,defaultWidth:"wide"}),day:Ci({values:tDe,defaultWidth:"wide"}),dayPeriod:Ci({values:nDe,defaultWidth:"wide",formattingValues:rDe,defaultFormattingWidth:"wide"})};function Ni(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?aDe(a,d=>d.test(o)):oDe(a,d=>d.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function oDe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function aDe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function g3(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const lDe=/^(\d+)(th|st|nd|rd)?/i,cDe=/\d+/i,uDe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},dDe={any:[/^b/i,/^(a|c)/i]},fDe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},hDe={any:[/1/i,/2/i,/3/i,/4/i]},pDe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mDe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gDe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},yDe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},vDe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xDe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},bDe={ordinalNumber:g3({matchPattern:lDe,parsePattern:cDe,valueCallback:t=>parseInt(t,10)}),era:Ni({matchPatterns:uDe,defaultMatchWidth:"wide",parsePatterns:dDe,defaultParseWidth:"any"}),quarter:Ni({matchPatterns:fDe,defaultMatchWidth:"wide",parsePatterns:hDe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ni({matchPatterns:pDe,defaultMatchWidth:"wide",parsePatterns:mDe,defaultParseWidth:"any"}),day:Ni({matchPatterns:gDe,defaultMatchWidth:"wide",parsePatterns:yDe,defaultParseWidth:"any"}),dayPeriod:Ni({matchPatterns:vDe,defaultMatchWidth:"any",parsePatterns:xDe,defaultParseWidth:"any"})},y3={code:"en-US",formatDistance:GRe,formatLong:XRe,formatRelative:QRe,localize:iDe,match:bDe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function wDe(t){const e=Tt(t);return tc(e,Eae(e))+1}function Aae(t){const e=Tt(t),n=+lp(e)-+IRe(e);return Math.round(n/h3)+1}function Iae(t,e){var u,d,h,p;const n=Tt(t),r=n.getFullYear(),s=cv(),i=(e==null?void 0:e.firstWeekContainsDate)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(h=s.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=io(t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=Tc(o,e),l=io(t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=Tc(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function SDe(t,e){var a,l,c,u;const n=cv(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,s=Iae(t,e),i=io(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Tc(i,e)}function Oae(t,e){const n=Tt(t),r=+Tc(n,e)-+SDe(n,e);return Math.round(r/h3)+1}function bn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const td={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return bn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):bn(n+1,2)},d(t,e){return bn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return bn(t.getHours()%12||12,e.length)},H(t,e){return bn(t.getHours(),e.length)},m(t,e){return bn(t.getMinutes(),e.length)},s(t,e){return bn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return bn(s,e.length)}},fm={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},t8={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return td.y(t,e)},Y:function(t,e,n,r){const s=Iae(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return bn(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):bn(i,e.length)},R:function(t,e){const n=kae(t);return bn(n,e.length)},u:function(t,e){const n=t.getFullYear();return bn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return bn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return bn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return td.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return bn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=Oae(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):bn(s,e.length)},I:function(t,e,n){const r=Aae(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):bn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):td.d(t,e)},D:function(t,e,n){const r=wDe(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):bn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return bn(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return bn(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return bn(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=fm.noon:r===0?s=fm.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=fm.evening:r>=12?s=fm.afternoon:r>=4?s=fm.morning:s=fm.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return td.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):td.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):bn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):bn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):td.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):td.s(t,e)},S:function(t,e){return td.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return r8(r);case"XXXX":case"XX":return ih(r);case"XXXXX":case"XXX":default:return ih(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return r8(r);case"xxxx":case"xx":return ih(r);case"xxxxx":case"xxx":default:return ih(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+n8(r,":");case"OOOO":default:return"GMT"+ih(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+n8(r,":");case"zzzz":default:return"GMT"+ih(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return bn(r,e.length)},T:function(t,e,n){const r=t.getTime();return bn(r,e.length)}};function n8(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+bn(i,2)}function r8(t,e){return t%60===0?(t>0?"-":"+")+bn(Math.abs(t)/60,2):ih(t,e)}function ih(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=bn(Math.trunc(r/60),2),i=bn(r%60,2);return n+s+e+i}const s8=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Pae=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},CDe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return s8(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",s8(r,e)).replace("{{time}}",Pae(s,e))},NDe={p:Pae,P:CDe},_De=/^D+$/,TDe=/^Y+$/,kDe=["D","DD","YY","YYYY"];function EDe(t){return _De.test(t)}function $De(t){return TDe.test(t)}function ADe(t,e,n){const r=IDe(t,e,n);if(console.warn(r),kDe.includes(t))throw new RangeError(r)}function IDe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ODe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,PDe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,RDe=/^'([^]*?)'?$/,DDe=/''/g,jDe=/[a-zA-Z]/;function un(t,e,n){var u,d,h,p,m,g,y,v;const r=cv(),s=(n==null?void 0:n.locale)??r.locale??y3,i=(n==null?void 0:n.firstWeekContainsDate)??((d=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((g=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((v=(y=r.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??0,a=Tt(t);if(!jRe(a))throw new RangeError("Invalid time value");let l=e.match(PDe).map(x=>{const b=x[0];if(b==="p"||b==="P"){const S=NDe[b];return S(x,s.formatLong)}return x}).join("").match(ODe).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const b=x[0];if(b==="'")return{isToken:!1,value:MDe(x)};if(t8[b])return{isToken:!0,value:x};if(b.match(jDe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(x=>{if(!x.isToken)return x.value;const b=x.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&$De(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&EDe(b))&&ADe(b,e,String(t));const S=t8[b[0]];return S(a,b,s.localize,c)}).join("")}function MDe(t){const e=t.match(RDe);return e?e[1].replace(DDe,"'"):t}function FDe(t,e,n){const r=cv(),s=(n==null?void 0:n.locale)??r.locale??y3,i=2520,o=A2(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let l,c;o>0?(l=Tt(e),c=Tt(t)):(l=Tt(t),c=Tt(e));const u=WRe(c,l),d=(Qg(c)-Qg(l))/1e3,h=Math.round((u-d)/60);let p;if(h<2)return n!=null&&n.includeSeconds?u<5?s.formatDistance("lessThanXSeconds",5,a):u<10?s.formatDistance("lessThanXSeconds",10,a):u<20?s.formatDistance("lessThanXSeconds",20,a):u<40?s.formatDistance("halfAMinute",0,a):u<60?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",1,a):h===0?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",h,a);if(h<45)return s.formatDistance("xMinutes",h,a);if(h<90)return s.formatDistance("aboutXHours",1,a);if(h<e8){const m=Math.round(h/60);return s.formatDistance("aboutXHours",m,a)}else{if(h<i)return s.formatDistance("xDays",1,a);if(h<mC){const m=Math.round(h/e8);return s.formatDistance("xDays",m,a)}else if(h<mC*2)return p=Math.round(h/mC),s.formatDistance("aboutXMonths",p,a)}if(p=VRe(c,l),p<12){const m=Math.round(h/mC);return s.formatDistance("xMonths",m,a)}else{const m=p%12,g=Math.trunc(p/12);return m<3?s.formatDistance("aboutXYears",g,a):m<9?s.formatDistance("overXYears",g,a):s.formatDistance("almostXYears",g+1,a)}}function LDe(t,e){return FDe(t,DRe(t),e)}function BDe(t){const e=Tt(t),n=e.getFullYear(),r=e.getMonth(),s=io(t,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function zDe(t){return Math.trunc(+Tt(t)/1e3)}function VDe(t){const e=Tt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function WDe(t,e){return MRe(VDe(t),no(t),e)+1}function pD(t,e){const n=Tt(t),r=Tt(e);return n.getTime()>r.getTime()}function Rae(t,e){const n=Tt(t),r=Tt(e);return+n<+r}function v3(t,e){const n=Tt(t),r=Tt(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function UDe(t,e){const n=Tt(t),r=Tt(e);return n.getFullYear()===r.getFullYear()}function tO(t,e){return Xs(t,-e)}function nO(t,e){const n=Tt(t),r=n.getFullYear(),s=n.getDate(),i=io(t,0);i.setFullYear(r,e,15),i.setHours(0,0,0,0);const o=BDe(i);return n.setMonth(e,Math.min(s,o)),n}function i8(t,e){const n=Tt(t);return isNaN(+n)?io(t,NaN):(n.setFullYear(e),n)}const GDe={lessThanXSeconds:{one:"أقل من ثانية",two:"أقل من ثانيتين",threeToTen:"أقل من {{count}} ثواني",other:"أقل من {{count}} ثانية"},xSeconds:{one:"ثانية واحدة",two:"ثانيتان",threeToTen:"{{count}} ثواني",other:"{{count}} ثانية"},halfAMinute:"نصف دقيقة",lessThanXMinutes:{one:"أقل من دقيقة",two:"أقل من دقيقتين",threeToTen:"أقل من {{count}} دقائق",other:"أقل من {{count}} دقيقة"},xMinutes:{one:"دقيقة واحدة",two:"دقيقتان",threeToTen:"{{count}} دقائق",other:"{{count}} دقيقة"},aboutXHours:{one:"ساعة واحدة تقريباً",two:"ساعتين تقريبا",threeToTen:"{{count}} ساعات تقريباً",other:"{{count}} ساعة تقريباً"},xHours:{one:"ساعة واحدة",two:"ساعتان",threeToTen:"{{count}} ساعات",other:"{{count}} ساعة"},xDays:{one:"يوم واحد",two:"يومان",threeToTen:"{{count}} أيام",other:"{{count}} يوم"},aboutXWeeks:{one:"أسبوع واحد تقريبا",two:"أسبوعين تقريبا",threeToTen:"{{count}} أسابيع تقريبا",other:"{{count}} أسبوعا تقريبا"},xWeeks:{one:"أسبوع واحد",two:"أسبوعان",threeToTen:"{{count}} أسابيع",other:"{{count}} أسبوعا"},aboutXMonths:{one:"شهر واحد تقريباً",two:"شهرين تقريبا",threeToTen:"{{count}} أشهر تقريبا",other:"{{count}} شهرا تقريباً"},xMonths:{one:"شهر واحد",two:"شهران",threeToTen:"{{count}} أشهر",other:"{{count}} شهرا"},aboutXYears:{one:"سنة واحدة تقريباً",two:"سنتين تقريبا",threeToTen:"{{count}} سنوات تقريباً",other:"{{count}} سنة تقريباً"},xYears:{one:"سنة واحد",two:"سنتان",threeToTen:"{{count}} سنوات",other:"{{count}} سنة"},overXYears:{one:"أكثر من سنة",two:"أكثر من سنتين",threeToTen:"أكثر من {{count}} سنوات",other:"أكثر من {{count}} سنة"},almostXYears:{one:"ما يقارب سنة واحدة",two:"ما يقارب سنتين",threeToTen:"ما يقارب {{count}} سنوات",other:"ما يقارب {{count}} سنة"}},HDe=(t,e,n)=>{const r=GDe[t];let s;return typeof r=="string"?s=r:e===1?s=r.one:e===2?s=r.two:e<=10?s=r.threeToTen.replace("{{count}}",String(e)):s=r.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"خلال "+s:"منذ "+s:s},qDe={full:"EEEE، do MMMM y",long:"do MMMM y",medium:"d MMM y",short:"dd/MM/yyyy"},KDe={full:"HH:mm:ss",long:"HH:mm:ss",medium:"HH:mm:ss",short:"HH:mm"},XDe={full:"{{date}} 'عند الساعة' {{time}}",long:"{{date}} 'عند الساعة' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},YDe={date:hu({formats:qDe,defaultWidth:"full"}),time:hu({formats:KDe,defaultWidth:"full"}),dateTime:hu({formats:XDe,defaultWidth:"full"})},QDe={lastWeek:"eeee 'الماضي عند الساعة' p",yesterday:"'الأمس عند الساعة' p",today:"'اليوم عند الساعة' p",tomorrow:"'غدا عند الساعة' p",nextWeek:"eeee 'القادم عند الساعة' p",other:"P"},ZDe=t=>QDe[t],JDe={narrow:["ق","ب"],abbreviated:["ق.م.","ب.م."],wide:["قبل الميلاد","بعد الميلاد"]},eje={narrow:["1","2","3","4"],abbreviated:["ر1","ر2","ر3","ر4"],wide:["الربع الأول","الربع الثاني","الربع الثالث","الربع الرابع"]},tje={narrow:["ي","ف","م","أ","م","ي","ي","أ","س","أ","ن","د"],abbreviated:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],wide:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]},nje={narrow:["ح","ن","ث","ر","خ","ج","س"],short:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],abbreviated:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],wide:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"]},rje={narrow:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"}},sje={narrow:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"}},ije=t=>String(t),oje={ordinalNumber:ije,era:Ci({values:JDe,defaultWidth:"wide"}),quarter:Ci({values:eje,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ci({values:tje,defaultWidth:"wide"}),day:Ci({values:nje,defaultWidth:"wide"}),dayPeriod:Ci({values:rje,defaultWidth:"wide",formattingValues:sje,defaultFormattingWidth:"wide"})},aje=/^(\d+)(th|st|nd|rd)?/i,lje=/\d+/i,cje={narrow:/[قب]/,abbreviated:/[قب]\.م\./,wide:/(قبل|بعد) الميلاد/},uje={any:[/قبل/,/بعد/]},dje={narrow:/^[1234]/i,abbreviated:/ر[1234]/,wide:/الربع (الأول|الثاني|الثالث|الرابع)/},fje={any:[/1/i,/2/i,/3/i,/4/i]},hje={narrow:/^[أيفمسند]/,abbreviated:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/,wide:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/},pje={narrow:[/^ي/i,/^ف/i,/^م/i,/^أ/i,/^م/i,/^ي/i,/^ي/i,/^أ/i,/^س/i,/^أ/i,/^ن/i,/^د/i],any:[/^يناير/i,/^فبراير/i,/^مارس/i,/^أبريل/i,/^مايو/i,/^يونيو/i,/^يوليو/i,/^أغسطس/i,/^سبتمبر/i,/^أكتوبر/i,/^نوفمبر/i,/^ديسمبر/i]},mje={narrow:/^[حنثرخجس]/i,short:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,abbreviated:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,wide:/^(الأحد|الاثنين|الثلاثاء|الأربعاء|الخميس|الجمعة|السبت)/i},gje={narrow:[/^ح/i,/^ن/i,/^ث/i,/^ر/i,/^خ/i,/^ج/i,/^س/i],wide:[/^الأحد/i,/^الاثنين/i,/^الثلاثاء/i,/^الأربعاء/i,/^الخميس/i,/^الجمعة/i,/^السبت/i],any:[/^أح/i,/^اث/i,/^ث/i,/^أر/i,/^خ/i,/^ج/i,/^س/i]},yje={narrow:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/,any:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/},vje={any:{am:/^ص/,pm:/^م/,midnight:/منتصف الليل/,noon:/الظهر/,afternoon:/بعد الظهر/,morning:/في الصباح/,evening:/في المساء/,night:/في الليل/}},xje={ordinalNumber:g3({matchPattern:aje,parsePattern:lje,valueCallback:t=>parseInt(t,10)}),era:Ni({matchPatterns:cje,defaultMatchWidth:"wide",parsePatterns:uje,defaultParseWidth:"any"}),quarter:Ni({matchPatterns:dje,defaultMatchWidth:"wide",parsePatterns:fje,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ni({matchPatterns:hje,defaultMatchWidth:"wide",parsePatterns:pje,defaultParseWidth:"any"}),day:Ni({matchPatterns:mje,defaultMatchWidth:"wide",parsePatterns:gje,defaultParseWidth:"any"}),dayPeriod:Ni({matchPatterns:yje,defaultMatchWidth:"any",parsePatterns:vje,defaultParseWidth:"any"})},xi={code:"ar",formatDistance:HDe,formatLong:YDe,formatRelative:ZDe,localize:oje,match:xje,options:{weekStartsOn:6,firstWeekContainsDate:1}},bje={lessThanXSeconds:{one:"أقل من ثانية",two:"أقل من ثانيتين",threeToTen:"أقل من {{count}} ثواني",other:"أقل من {{count}} ثانية"},xSeconds:{one:"ثانية",two:"ثانيتين",threeToTen:"{{count}} ثواني",other:"{{count}} ثانية"},halfAMinute:"نص دقيقة",lessThanXMinutes:{one:"أقل من دقيقة",two:"أقل من دقيقتين",threeToTen:"أقل من {{count}} دقايق",other:"أقل من {{count}} دقيقة"},xMinutes:{one:"دقيقة",two:"دقيقتين",threeToTen:"{{count}} دقايق",other:"{{count}} دقيقة"},aboutXHours:{one:"حوالي ساعة",two:"حوالي ساعتين",threeToTen:"حوالي {{count}} ساعات",other:"حوالي {{count}} ساعة"},xHours:{one:"ساعة",two:"ساعتين",threeToTen:"{{count}} ساعات",other:"{{count}} ساعة"},xDays:{one:"يوم",two:"يومين",threeToTen:"{{count}} أيام",other:"{{count}} يوم"},aboutXWeeks:{one:"حوالي أسبوع",two:"حوالي أسبوعين",threeToTen:"حوالي {{count}} أسابيع",other:"حوالي {{count}} أسبوع"},xWeeks:{one:"أسبوع",two:"أسبوعين",threeToTen:"{{count}} أسابيع",other:"{{count}} أسبوع"},aboutXMonths:{one:"حوالي شهر",two:"حوالي شهرين",threeToTen:"حوالي {{count}} أشهر",other:"حوالي {{count}} شهر"},xMonths:{one:"شهر",two:"شهرين",threeToTen:"{{count}} أشهر",other:"{{count}} شهر"},aboutXYears:{one:"حوالي سنة",two:"حوالي سنتين",threeToTen:"حوالي {{count}} سنين",other:"حوالي {{count}} سنة"},xYears:{one:"عام",two:"عامين",threeToTen:"{{count}} أعوام",other:"{{count}} عام"},overXYears:{one:"أكثر من سنة",two:"أكثر من سنتين",threeToTen:"أكثر من {{count}} سنين",other:"أكثر من {{count}} سنة"},almostXYears:{one:"عام تقريبًا",two:"عامين تقريبًا",threeToTen:"{{count}} أعوام تقريبًا",other:"{{count}} عام تقريبًا"}},wje=(t,e,n)=>{let r;const s=bje[t];return typeof s=="string"?r=s:e===1?r=s.one:e===2?r=s.two:e<=10?r=s.threeToTen.replace("{{count}}",String(e)):r=s.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?`في خلال ${r}`:`منذ ${r}`:r},Sje={full:"EEEE، do MMMM y",long:"do MMMM y",medium:"dd/MMM/y",short:"d/MM/y"},Cje={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Nje={full:"{{date}} 'الساعة' {{time}}",long:"{{date}} 'الساعة' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_je={date:hu({formats:Sje,defaultWidth:"full"}),time:hu({formats:Cje,defaultWidth:"full"}),dateTime:hu({formats:Nje,defaultWidth:"full"})},Tje={lastWeek:"eeee 'اللي جاي الساعة' p",yesterday:"'إمبارح الساعة' p",today:"'النهاردة الساعة' p",tomorrow:"'بكرة الساعة' p",nextWeek:"eeee 'الساعة' p",other:"P"},kje=(t,e,n,r)=>Tje[t],Eje={narrow:["ق","ب"],abbreviated:["ق.م","ب.م"],wide:["قبل الميلاد","بعد الميلاد"]},$je={narrow:["1","2","3","4"],abbreviated:["ر1","ر2","ر3","ر4"],wide:["الربع الأول","الربع الثاني","الربع الثالث","الربع الرابع"]},Aje={narrow:["ي","ف","م","أ","م","ي","ي","أ","س","أ","ن","د"],abbreviated:["ينا","فبر","مارس","أبريل","مايو","يونـ","يولـ","أغسـ","سبتـ","أكتـ","نوفـ","ديسـ"],wide:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]},Ije={narrow:["ح","ن","ث","ر","خ","ج","س"],short:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],abbreviated:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],wide:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"]},Oje={narrow:{am:"ص",pm:"م",midnight:"ن",noon:"ظ",morning:"صباحاً",afternoon:"بعد الظهر",evening:"مساءً",night:"ليلاً"},abbreviated:{am:"ص",pm:"م",midnight:"نصف الليل",noon:"ظهراً",morning:"صباحاً",afternoon:"بعد الظهر",evening:"مساءً",night:"ليلاً"},wide:{am:"ص",pm:"م",midnight:"نصف الليل",noon:"ظهراً",morning:"صباحاً",afternoon:"بعد الظهر",evening:"مساءً",night:"ليلاً"}},Pje={narrow:{am:"ص",pm:"م",midnight:"ن",noon:"ظ",morning:"في الصباح",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل"},abbreviated:{am:"ص",pm:"م",midnight:"نصف الليل",noon:"ظهراً",morning:"في الصباح",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل"},wide:{am:"ص",pm:"م",midnight:"نصف الليل",morning:"في الصباح",noon:"ظهراً",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل"}},Rje=(t,e)=>String(t),Dje={ordinalNumber:Rje,era:Ci({values:Eje,defaultWidth:"wide"}),quarter:Ci({values:$je,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ci({values:Aje,defaultWidth:"wide"}),day:Ci({values:Ije,defaultWidth:"wide"}),dayPeriod:Ci({values:Oje,defaultWidth:"wide",formattingValues:Pje,defaultFormattingWidth:"wide"})},jje=/^(\d+)/,Mje=/\d+/i,Fje={narrow:/^(ق|ب)/g,abbreviated:/^(ق.م|ب.م)/g,wide:/^(قبل الميلاد|بعد الميلاد)/g},Lje={any:[/^ق/g,/^ب/g]},Bje={narrow:/^[1234]/,abbreviated:/^ر[1234]/,wide:/^الربع (الأول|الثاني|الثالث|الرابع)/},zje={wide:[/الربع الأول/,/الربع الثاني/,/الربع الثالث/,/الربع الرابع/],any:[/1/,/2/,/3/,/4/]},Vje={narrow:/^(ي|ف|م|أ|س|ن|د)/,abbreviated:/^(ينا|فبر|مارس|أبريل|مايو|يونـ|يولـ|أغسـ|سبتـ|أكتـ|نوفـ|ديسـ)/,wide:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/},Wje={narrow:[/^ي/,/^ف/,/^م/,/^أ/,/^م/,/^ي/,/^ي/,/^أ/,/^س/,/^أ/,/^ن/,/^د/],any:[/^ينا/,/^فبر/,/^مارس/,/^أبريل/,/^مايو/,/^يون/,/^يول/,/^أغس/,/^سبت/,/^أكت/,/^نوف/,/^ديس/]},Uje={narrow:/^(ح|ن|ث|ر|خ|ج|س)/,short:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/,abbreviated:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/,wide:/^(الأحد|الاثنين|الثلاثاء|الأربعاء|الخميس|الجمعة|السبت)/},Gje={narrow:[/^ح/,/^ن/,/^ث/,/^ر/,/^خ/,/^ج/,/^س/],any:[/أحد/,/اثنين/,/ثلاثاء/,/أربعاء/,/خميس/,/جمعة/,/سبت/]},Hje={narrow:/^(ص|م|ن|ظ|في الصباح|بعد الظهر|في المساء|في الليل)/,abbreviated:/^(ص|م|نصف الليل|ظهراً|في الصباح|بعد الظهر|في المساء|في الليل)/,wide:/^(ص|م|نصف الليل|في الصباح|ظهراً|بعد الظهر|في المساء|في الليل)/,any:/^(ص|م|صباح|ظهر|مساء|ليل)/},qje={any:{am:/^ص/,pm:/^م/,midnight:/^ن/,noon:/^ظ/,morning:/^ص/,afternoon:/^بعد/,evening:/^م/,night:/^ل/}},Kje={ordinalNumber:g3({matchPattern:jje,parsePattern:Mje,valueCallback:function(t){return parseInt(t,10)}}),era:Ni({matchPatterns:Fje,defaultMatchWidth:"wide",parsePatterns:Lje,defaultParseWidth:"any"}),quarter:Ni({matchPatterns:Bje,defaultMatchWidth:"wide",parsePatterns:zje,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ni({matchPatterns:Vje,defaultMatchWidth:"wide",parsePatterns:Wje,defaultParseWidth:"any"}),day:Ni({matchPatterns:Uje,defaultMatchWidth:"wide",parsePatterns:Gje,defaultParseWidth:"any"}),dayPeriod:Ni({matchPatterns:Hje,defaultMatchWidth:"any",parsePatterns:qje,defaultParseWidth:"any"})},Xje={code:"ar-EG",formatDistance:wje,formatLong:_je,formatRelative:kje,localize:Dje,match:Kje,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Yje(){const{user:t}=Sf(),[e,n]=N.useState(null),[r,s]=N.useState([]),[i,o]=N.useState(0),[a,l]=N.useState(!1);N.useEffect(()=>{if(t){console.log("إنشاء اتصال Socket.IO للإشعارات للمستخدم:",t.id);const m=$2("/",{withCredentials:!0});return m.on("connect",()=>{console.log("تم الاتصال بالسوكت"),m.emit("register",t.id)}),m.on("notification",g=>{console.log("تم استلام إشعار جديد:",g);const y={id:`${Date.now()}-${Math.random().toString(36).substring(2,9)}`,type:g.type,data:g.data,timestamp:new Date(g.timestamp),read:!1};s(v=>[y,...v]),o(v=>v+1)}),m.on("disconnect",()=>{console.log("تم قطع الاتصال بالسوكت")}),n(m),()=>{m.disconnect()}}},[t]),N.useEffect(()=>{o(r.filter(m=>!m.read).length)},[r]);const c=m=>{s(g=>g.map(y=>y.id===m?{...y,read:!0}:y))},u=()=>{s(m=>m.map(g=>({...g,read:!0})))},d=()=>{s([])},h=m=>{switch(m){case"inventory_alert":return f.jsx(iU,{className:"h-5 w-5 text-warning"});case"upcoming_appointments":return f.jsx(PI,{className:"h-5 w-5 text-info"});case"installment_due":return f.jsx(iU,{className:"h-5 w-5 text-warning"});case"inventory_check_complete":return f.jsx(Vd,{className:"h-5 w-5 text-success"});case"system_update":return f.jsx(PI,{className:"h-5 w-5 text-info"});default:return f.jsx(PI,{className:"h-5 w-5 text-info"})}},p=(m,g)=>{switch(m){case"inventory_alert":return f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold",children:"تنبيه المخزون"}),f.jsx("p",{className:"text-sm",children:g.message})]});case"upcoming_appointments":return f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold",children:"تذكير بموعد"}),f.jsx("p",{className:"text-sm",children:g.message})]});case"inventory_check_complete":return f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold",children:"اكتمال فحص المخزون"}),f.jsx("p",{className:"text-sm",children:g.message})]});default:return f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold",children:"إشعار"}),f.jsx("p",{className:"text-sm",children:"إشعار جديد من النظام"})]})}};return N.useEffect(()=>{r.length===0&&setTimeout(()=>{const m={id:`test-${Date.now()}`,type:"inventory_alert",data:{message:"مستوى المخزون منخفض للمنتج X (5 قطع متبقية)"},timestamp:new Date,read:!1};s([m])},2e3)},[]),f.jsx("div",{className:"relative",children:f.jsxs(ov,{open:a,onOpenChange:l,children:[f.jsx(av,{asChild:!0,children:f.jsxs($e,{variant:"ghost",size:"icon",className:"relative",children:[f.jsx(ETe,{className:"h-5 w-5"}),i>0&&f.jsx(fu,{variant:"destructive",className:"absolute -top-1 -right-1 px-1 min-w-[18px] h-[18px]",children:i})]})}),f.jsxs(jp,{className:"w-80 p-0",align:"end",children:[f.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[f.jsx("h3",{className:"font-bold",children:"الإشعارات"}),f.jsxs("div",{className:"flex gap-1",children:[f.jsxs($e,{variant:"ghost",size:"sm",onClick:u,disabled:i===0,children:[f.jsx(Vd,{className:"h-4 w-4 mr-1"}),"تعيين الكل كمقروء"]}),f.jsxs($e,{variant:"ghost",size:"sm",onClick:d,disabled:r.length===0,children:[f.jsx(gk,{className:"h-4 w-4 mr-1"}),"مسح الكل"]})]})]}),f.jsx("div",{className:"max-h-80 overflow-y-auto",style:{direction:"rtl"},children:r.length===0?f.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"لا توجد إشعارات"}):f.jsx("div",{children:r.map(m=>f.jsxs("div",{className:pe("flex items-start gap-3 p-3 hover:bg-accent cursor-pointer border-b last:border-0",m.read?"opacity-70":"bg-accent/20"),onClick:()=>c(m.id),children:[f.jsx("div",{className:"mt-1",children:h(m.type)}),f.jsxs("div",{className:"flex-1",children:[p(m.type,m.data),f.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:LDe(m.timestamp,{addSuffix:!0,locale:Xje})})]}),!m.read&&f.jsx("div",{className:"w-2 h-2 mt-1 rounded-full bg-primary"})]},m.id))})})]})]})})}const Qje=[{name:"لوحة التحكم",href:"/",icon:dIe,color:"#4285F4"},{name:"المواعيد",href:"/appointments",icon:AU,color:"#EA4335"},{name:"المخزون",href:"/inventory",icon:gIe,color:"#34A853"},{name:"المبيعات",href:"/sales",icon:vIe,color:"#EA4335"},{name:"العملاء",href:"/customers",icon:SIe,color:"#FBBC05"},{name:"الفواتير",href:"/invoices",icon:fIe,color:"#4285F4"},{name:"التقسيط",href:"/installments",icon:AU,color:"#34A853"},{name:"التسويق",href:"/marketing",icon:wIe,color:"#EA4335"},{name:"التقارير",href:"/reports",icon:yIe,color:"#FBBC05"},{name:"المصروفات",href:"/expenses",icon:uIe,color:"#4285F4"},{name:"الموردين",href:"/suppliers",icon:bIe,color:"#34A853"},{name:"الباركود",href:"/barcodes",icon:pIe,color:"#EA4335"},{name:"أكواد الخصم",href:"/discount-codes",icon:xIe,color:"#FBBC05"},{name:"الموظفين",href:"/staff",icon:Eoe,color:"#4285F4"},{name:"الإعدادات",href:"/settings",icon:hIe,color:"#34A853"}];function kc(){const[t]=kL(),{user:e,logoutMutation:n}=Sf();return f.jsxs("div",{className:"flex flex-col h-full bg-white border-l",children:[f.jsxs("div",{className:"p-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h1",{className:"text-xl font-semibold",children:"نظام المتجر"}),f.jsx(Yje,{})]}),f.jsxs("p",{className:"text-xs text-gray-600",children:["مرحباً, ",e==null?void 0:e.username]})]}),f.jsx("nav",{className:"flex-1 px-3",children:f.jsx("ul",{className:"space-y-2",children:Qje.map(r=>{const s=r.icon;return f.jsx("li",{children:f.jsx($e,{variant:"ghost",className:pe("w-full justify-start gap-3 h-10 px-3 text-sm font-normal",t===r.href?"bg-gray-100 text-black":"text-black hover:bg-gray-50"),asChild:!0,children:f.jsxs(EL,{href:r.href,children:[f.jsx(s,{className:"h-5 w-5",style:{color:r.color}}),r.name]})})},r.name)})})}),f.jsx("div",{className:"p-3 border-t border-gray-200",children:f.jsxs($e,{variant:"ghost",className:"w-full h-10 text-sm font-normal text-black hover:bg-gray-50",onClick:()=>n.mutate(),children:[f.jsx(FTe,{className:"h-5 w-5 ml-3",style:{color:"#EA4335"}}),"تسجيل خروج"]})})]})}function Zje(){const{data:t=[]}=qt({queryKey:["/api/products"]}),{data:e=[]}=qt({queryKey:["/api/sales"]});qt({queryKey:["/api/customers"]});const n=e.reduce((p,m)=>p+Number(m.priceIqd)*m.quantity,0),r=e.filter(p=>{const m=new Date(p.date),g=new Date;return m.getMonth()===g.getMonth()&&m.getFullYear()===g.getFullYear()}).reduce((p,m)=>p+Number(m.priceIqd)*m.quantity,0),s=e.filter(p=>{const m=new Date(p.date),g=new Date,y=g.getMonth()===0?11:g.getMonth()-1,v=g.getMonth()===0?g.getFullYear()-1:g.getFullYear();return m.getMonth()===y&&m.getFullYear()===v}).reduce((p,m)=>p+Number(m.priceIqd)*m.quantity,0),i=s===0?100:(r-s)/s*100,o=t.length,a=t.filter(p=>p.stock<10).length,l=e.length,c=e.filter(p=>{const m=new Date(p.date),g=new Date;return m.getHours()===g.getHours()&&m.getDate()===g.getDate()&&m.getMonth()===g.getMonth()&&m.getFullYear()===g.getFullYear()}).length,u=e.filter(p=>{const m=new Date(p.date),g=new Date,y=g.getHours()===0?23:g.getHours()-1;return m.getHours()===y&&m.getDate()===g.getDate()&&m.getMonth()===g.getMonth()&&m.getFullYear()===g.getFullYear()}).length,d=c-u,h=new Set(e.filter(p=>{const m=new Date(p.date),g=new Date;return m.getMonth()===g.getMonth()&&m.getFullYear()===g.getFullYear()}).map(p=>p.customerId)).size;return f.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[f.jsxs(Le,{children:[f.jsxs(Ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[f.jsx(Qe,{className:"text-sm font-medium",children:"إجمالي الإيرادات"}),f.jsx(RL,{className:"h-4 w-4 text-muted-foreground"})]}),f.jsxs(Ue,{children:[f.jsxs("div",{className:"text-2xl font-bold",children:[n.toLocaleString()," د.ع"]}),f.jsxs("p",{className:"text-xs text-muted-foreground",children:[i>=0?"+":"",i.toFixed(1),"% عن الشهر الماضي"]})]})]}),f.jsxs(Le,{children:[f.jsxs(Ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[f.jsx(Qe,{className:"text-sm font-medium",children:"المنتجات"}),f.jsx(mk,{className:"h-4 w-4 text-muted-foreground"})]}),f.jsxs(Ue,{children:[f.jsx("div",{className:"text-2xl font-bold",children:o}),f.jsxs("p",{className:"text-xs text-muted-foreground",children:[a," منتجات منخفضة المخزون"]})]})]}),f.jsxs(Le,{children:[f.jsxs(Ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[f.jsx(Qe,{className:"text-sm font-medium",children:"المبيعات"}),f.jsx(Cre,{className:"h-4 w-4 text-muted-foreground"})]}),f.jsxs(Ue,{children:[f.jsx("div",{className:"text-2xl font-bold",children:l}),f.jsxs("p",{className:"text-xs text-muted-foreground",children:[d>=0?"+":"",d," منذ الساعة الماضية"]})]})]}),f.jsxs(Le,{children:[f.jsxs(Ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[f.jsx(Qe,{className:"text-sm font-medium",children:"العملاء النشطون"}),f.jsx(ML,{className:"h-4 w-4 text-muted-foreground"})]}),f.jsxs(Ue,{children:[f.jsx("div",{className:"text-2xl font-bold",children:h}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"عملاء نشطون هذا الشهر"})]})]})]})}var Jje=Array.isArray,uo=Jje,eMe=typeof da=="object"&&da&&da.Object===Object&&da,Dae=eMe,tMe=Dae,nMe=typeof self=="object"&&self&&self.Object===Object&&self,rMe=tMe||nMe||Function("return this")(),Mc=rMe,sMe=Mc,iMe=sMe.Symbol,W1=iMe,o8=W1,jae=Object.prototype,oMe=jae.hasOwnProperty,aMe=jae.toString,gx=o8?o8.toStringTag:void 0;function lMe(t){var e=oMe.call(t,gx),n=t[gx];try{t[gx]=void 0;var r=!0}catch{}var s=aMe.call(t);return r&&(e?t[gx]=n:delete t[gx]),s}var cMe=lMe,uMe=Object.prototype,dMe=uMe.toString;function fMe(t){return dMe.call(t)}var hMe=fMe,a8=W1,pMe=cMe,mMe=hMe,gMe="[object Null]",yMe="[object Undefined]",l8=a8?a8.toStringTag:void 0;function vMe(t){return t==null?t===void 0?yMe:gMe:l8&&l8 in Object(t)?pMe(t):mMe(t)}var Vu=vMe;function xMe(t){return t!=null&&typeof t=="object"}var Wu=xMe,bMe=Vu,wMe=Wu,SMe="[object Symbol]";function CMe(t){return typeof t=="symbol"||wMe(t)&&bMe(t)==SMe}var uv=CMe,NMe=uo,_Me=uv,TMe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kMe=/^\w*$/;function EMe(t,e){if(NMe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||_Me(t)?!0:kMe.test(t)||!TMe.test(t)||e!=null&&t in Object(e)}var x3=EMe;function $Me(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var _f=$Me;const dv=nn(_f);var AMe=Vu,IMe=_f,OMe="[object AsyncFunction]",PMe="[object Function]",RMe="[object GeneratorFunction]",DMe="[object Proxy]";function jMe(t){if(!IMe(t))return!1;var e=AMe(t);return e==PMe||e==RMe||e==OMe||e==DMe}var b3=jMe;const at=nn(b3);var MMe=Mc,FMe=MMe["__core-js_shared__"],LMe=FMe,rO=LMe,c8=function(){var t=/[^.]+$/.exec(rO&&rO.keys&&rO.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function BMe(t){return!!c8&&c8 in t}var zMe=BMe,VMe=Function.prototype,WMe=VMe.toString;function UMe(t){if(t!=null){try{return WMe.call(t)}catch{}try{return t+""}catch{}}return""}var Mae=UMe,GMe=b3,HMe=zMe,qMe=_f,KMe=Mae,XMe=/[\\^$.*+?()[\]{}|]/g,YMe=/^\[object .+?Constructor\]$/,QMe=Function.prototype,ZMe=Object.prototype,JMe=QMe.toString,eFe=ZMe.hasOwnProperty,tFe=RegExp("^"+JMe.call(eFe).replace(XMe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function nFe(t){if(!qMe(t)||HMe(t))return!1;var e=GMe(t)?tFe:YMe;return e.test(KMe(t))}var rFe=nFe;function sFe(t,e){return t==null?void 0:t[e]}var iFe=sFe,oFe=rFe,aFe=iFe;function lFe(t,e){var n=aFe(t,e);return oFe(n)?n:void 0}var Mp=lFe,cFe=Mp,uFe=cFe(Object,"create"),Mk=uFe,u8=Mk;function dFe(){this.__data__=u8?u8(null):{},this.size=0}var fFe=dFe;function hFe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var pFe=hFe,mFe=Mk,gFe="__lodash_hash_undefined__",yFe=Object.prototype,vFe=yFe.hasOwnProperty;function xFe(t){var e=this.__data__;if(mFe){var n=e[t];return n===gFe?void 0:n}return vFe.call(e,t)?e[t]:void 0}var bFe=xFe,wFe=Mk,SFe=Object.prototype,CFe=SFe.hasOwnProperty;function NFe(t){var e=this.__data__;return wFe?e[t]!==void 0:CFe.call(e,t)}var _Fe=NFe,TFe=Mk,kFe="__lodash_hash_undefined__";function EFe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=TFe&&e===void 0?kFe:e,this}var $Fe=EFe,AFe=fFe,IFe=pFe,OFe=bFe,PFe=_Fe,RFe=$Fe;function fv(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}fv.prototype.clear=AFe;fv.prototype.delete=IFe;fv.prototype.get=OFe;fv.prototype.has=PFe;fv.prototype.set=RFe;var DFe=fv;function jFe(){this.__data__=[],this.size=0}var MFe=jFe;function FFe(t,e){return t===e||t!==t&&e!==e}var w3=FFe,LFe=w3;function BFe(t,e){for(var n=t.length;n--;)if(LFe(t[n][0],e))return n;return-1}var Fk=BFe,zFe=Fk,VFe=Array.prototype,WFe=VFe.splice;function UFe(t){var e=this.__data__,n=zFe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():WFe.call(e,n,1),--this.size,!0}var GFe=UFe,HFe=Fk;function qFe(t){var e=this.__data__,n=HFe(e,t);return n<0?void 0:e[n][1]}var KFe=qFe,XFe=Fk;function YFe(t){return XFe(this.__data__,t)>-1}var QFe=YFe,ZFe=Fk;function JFe(t,e){var n=this.__data__,r=ZFe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var eLe=JFe,tLe=MFe,nLe=GFe,rLe=KFe,sLe=QFe,iLe=eLe;function hv(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}hv.prototype.clear=tLe;hv.prototype.delete=nLe;hv.prototype.get=rLe;hv.prototype.has=sLe;hv.prototype.set=iLe;var Lk=hv,oLe=Mp,aLe=Mc,lLe=oLe(aLe,"Map"),S3=lLe,d8=DFe,cLe=Lk,uLe=S3;function dLe(){this.size=0,this.__data__={hash:new d8,map:new(uLe||cLe),string:new d8}}var fLe=dLe;function hLe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var pLe=hLe,mLe=pLe;function gLe(t,e){var n=t.__data__;return mLe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Bk=gLe,yLe=Bk;function vLe(t){var e=yLe(this,t).delete(t);return this.size-=e?1:0,e}var xLe=vLe,bLe=Bk;function wLe(t){return bLe(this,t).get(t)}var SLe=wLe,CLe=Bk;function NLe(t){return CLe(this,t).has(t)}var _Le=NLe,TLe=Bk;function kLe(t,e){var n=TLe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var ELe=kLe,$Le=fLe,ALe=xLe,ILe=SLe,OLe=_Le,PLe=ELe;function pv(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}pv.prototype.clear=$Le;pv.prototype.delete=ALe;pv.prototype.get=ILe;pv.prototype.has=OLe;pv.prototype.set=PLe;var C3=pv,Fae=C3,RLe="Expected a function";function N3(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(RLe);var n=function(){var r=arguments,s=e?e.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var o=t.apply(this,r);return n.cache=i.set(s,o)||i,o};return n.cache=new(N3.Cache||Fae),n}N3.Cache=Fae;var Lae=N3;const DLe=nn(Lae);var jLe=Lae,MLe=500;function FLe(t){var e=jLe(t,function(r){return n.size===MLe&&n.clear(),r}),n=e.cache;return e}var LLe=FLe,BLe=LLe,zLe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,VLe=/\\(\\)?/g,WLe=BLe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(zLe,function(n,r,s,i){e.push(s?i.replace(VLe,"$1"):r||n)}),e}),ULe=WLe;function GLe(t,e){for(var n=-1,r=t==null?0:t.length,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}var _3=GLe,f8=W1,HLe=_3,qLe=uo,KLe=uv,XLe=1/0,h8=f8?f8.prototype:void 0,p8=h8?h8.toString:void 0;function Bae(t){if(typeof t=="string")return t;if(qLe(t))return HLe(t,Bae)+"";if(KLe(t))return p8?p8.call(t):"";var e=t+"";return e=="0"&&1/t==-XLe?"-0":e}var YLe=Bae,QLe=YLe;function ZLe(t){return t==null?"":QLe(t)}var zae=ZLe,JLe=uo,e3e=x3,t3e=ULe,n3e=zae;function r3e(t,e){return JLe(t)?t:e3e(t,e)?[t]:t3e(n3e(t))}var Vae=r3e,s3e=uv,i3e=1/0;function o3e(t){if(typeof t=="string"||s3e(t))return t;var e=t+"";return e=="0"&&1/t==-i3e?"-0":e}var zk=o3e,a3e=Vae,l3e=zk;function c3e(t,e){e=a3e(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[l3e(e[n++])];return n&&n==r?t:void 0}var T3=c3e,u3e=T3;function d3e(t,e,n){var r=t==null?void 0:u3e(t,e);return r===void 0?n:r}var Wae=d3e;const $o=nn(Wae);function f3e(t){return t==null}var h3e=f3e;const ht=nn(h3e);var p3e=Vu,m3e=uo,g3e=Wu,y3e="[object String]";function v3e(t){return typeof t=="string"||!m3e(t)&&g3e(t)&&p3e(t)==y3e}var x3e=v3e;const U1=nn(x3e);var Uae={exports:{}},Nn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k3=Symbol.for("react.element"),E3=Symbol.for("react.portal"),Vk=Symbol.for("react.fragment"),Wk=Symbol.for("react.strict_mode"),Uk=Symbol.for("react.profiler"),Gk=Symbol.for("react.provider"),Hk=Symbol.for("react.context"),b3e=Symbol.for("react.server_context"),qk=Symbol.for("react.forward_ref"),Kk=Symbol.for("react.suspense"),Xk=Symbol.for("react.suspense_list"),Yk=Symbol.for("react.memo"),Qk=Symbol.for("react.lazy"),w3e=Symbol.for("react.offscreen"),Gae;Gae=Symbol.for("react.module.reference");function Ra(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case k3:switch(t=t.type,t){case Vk:case Uk:case Wk:case Kk:case Xk:return t;default:switch(t=t&&t.$$typeof,t){case b3e:case Hk:case qk:case Qk:case Yk:case Gk:return t;default:return e}}case E3:return e}}}Nn.ContextConsumer=Hk;Nn.ContextProvider=Gk;Nn.Element=k3;Nn.ForwardRef=qk;Nn.Fragment=Vk;Nn.Lazy=Qk;Nn.Memo=Yk;Nn.Portal=E3;Nn.Profiler=Uk;Nn.StrictMode=Wk;Nn.Suspense=Kk;Nn.SuspenseList=Xk;Nn.isAsyncMode=function(){return!1};Nn.isConcurrentMode=function(){return!1};Nn.isContextConsumer=function(t){return Ra(t)===Hk};Nn.isContextProvider=function(t){return Ra(t)===Gk};Nn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===k3};Nn.isForwardRef=function(t){return Ra(t)===qk};Nn.isFragment=function(t){return Ra(t)===Vk};Nn.isLazy=function(t){return Ra(t)===Qk};Nn.isMemo=function(t){return Ra(t)===Yk};Nn.isPortal=function(t){return Ra(t)===E3};Nn.isProfiler=function(t){return Ra(t)===Uk};Nn.isStrictMode=function(t){return Ra(t)===Wk};Nn.isSuspense=function(t){return Ra(t)===Kk};Nn.isSuspenseList=function(t){return Ra(t)===Xk};Nn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Vk||t===Uk||t===Wk||t===Kk||t===Xk||t===w3e||typeof t=="object"&&t!==null&&(t.$$typeof===Qk||t.$$typeof===Yk||t.$$typeof===Gk||t.$$typeof===Hk||t.$$typeof===qk||t.$$typeof===Gae||t.getModuleId!==void 0)};Nn.typeOf=Ra;Uae.exports=Nn;var S3e=Uae.exports,C3e=Vu,N3e=Wu,_3e="[object Number]";function T3e(t){return typeof t=="number"||N3e(t)&&C3e(t)==_3e}var Hae=T3e;const k3e=nn(Hae);var E3e=Hae;function $3e(t){return E3e(t)&&t!=+t}var A3e=$3e;const mv=nn(A3e);var _i=function(e){return e===0?0:e>0?1:-1},Sh=function(e){return U1(e)&&e.indexOf("%")===e.length-1},ke=function(e){return k3e(e)&&!mv(e)},is=function(e){return ke(e)||U1(e)},I3e=0,Tf=function(e){var n=++I3e;return"".concat(e||"").concat(n)},Ti=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ke(e)&&!U1(e))return r;var i;if(Sh(e)){var o=e.indexOf("%");i=n*parseFloat(e.slice(0,o))/100}else i=+e;return mv(i)&&(i=r),s&&i>n&&(i=n),i},pd=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},O3e=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},s=0;s<n;s++)if(!r[e[s]])r[e[s]]=!0;else return!0;return!1},On=function(e,n){return ke(e)&&ke(n)?function(r){return e+r*(n-e)}:function(){return n}};function GN(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):$o(r,e))===n})}var P3e=function(e){if(!e||!e.length)return null;for(var n=e.length,r=0,s=0,i=0,o=0,a=1/0,l=-1/0,c=0,u=0,d=0;d<n;d++)c=e[d].cx||0,u=e[d].cy||0,r+=c,s+=u,i+=c*u,o+=c*c,a=Math.min(a,c),l=Math.max(l,c);var h=n*o!==r*r?(n*i-r*s)/(n*o-r*r):0;return{xmin:a,xmax:l,a:h,b:(s-h*r)/n}};function fg(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function mD(t){"@babel/helpers - typeof";return mD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mD(t)}var R3e=["viewBox","children"],D3e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],m8=["points","pathLength"],sO={svg:R3e,polygon:m8,polyline:m8},$3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],HN=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(N.isValidElement(e)&&(r=e.props),!dv(r))return null;var s={};return Object.keys(r).forEach(function(i){$3.includes(i)&&(s[i]=n||function(o){return r[i](r,o)})}),s},j3e=function(e,n,r){return function(s){return e(n,r,s),null}},af=function(e,n,r){if(!dv(e)||mD(e)!=="object")return null;var s=null;return Object.keys(e).forEach(function(i){var o=e[i];$3.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=j3e(o,n,r))}),s},M3e=["children"],F3e=["children"];function g8(t,e){if(t==null)return{};var n=L3e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function L3e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function gD(t){"@babel/helpers - typeof";return gD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gD(t)}var y8={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},pu=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},v8=null,iO=null,A3=function t(e){if(e===v8&&Array.isArray(iO))return iO;var n=[];return N.Children.forEach(e,function(r){ht(r)||(S3e.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),iO=n,v8=e,n};function $i(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(s){return pu(s)}):r=[pu(e)],A3(t).forEach(function(s){var i=$o(s,"type.displayName")||$o(s,"type.name");r.indexOf(i)!==-1&&n.push(s)}),n}function vo(t,e){var n=$i(t,e);return n&&n[0]}var x8=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,s=n.height;return!(!ke(r)||r<=0||!ke(s)||s<=0)},B3e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],z3e=function(e){return e&&e.type&&U1(e.type)&&B3e.indexOf(e.type)>=0},qae=function(e){return e&&gD(e)==="object"&&"clipDot"in e},V3e=function(e,n,r,s){var i,o=(i=sO==null?void 0:sO[s])!==null&&i!==void 0?i:[];return!at(e)&&(s&&o.includes(n)||D3e.includes(n))||r&&$3.includes(n)},He=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(N.isValidElement(e)&&(s=e.props),!dv(s))return null;var i={};return Object.keys(s).forEach(function(o){var a;V3e((a=s)===null||a===void 0?void 0:a[o],o,n,r)&&(i[o]=s[o])}),i},yD=function t(e,n){if(e===n)return!0;var r=N.Children.count(e);if(r!==N.Children.count(n))return!1;if(r===0)return!0;if(r===1)return b8(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var s=0;s<r;s++){var i=e[s],o=n[s];if(Array.isArray(i)||Array.isArray(o)){if(!t(i,o))return!1}else if(!b8(i,o))return!1}return!0},b8=function(e,n){if(ht(e)&&ht(n))return!0;if(!ht(e)&&!ht(n)){var r=e.props||{},s=r.children,i=g8(r,M3e),o=n.props||{},a=o.children,l=g8(o,F3e);return s&&a?fg(i,l)&&yD(s,a):!s&&!a?fg(i,l):!1}return!1},w8=function(e,n){var r=[],s={};return A3(e).forEach(function(i,o){if(z3e(i))r.push(i);else if(i){var a=pu(i.type),l=n[a]||{},c=l.handler,u=l.once;if(c&&(!u||!s[a])){var d=c(i,a,o);r.push(d),s[a]=!0}}}),r},W3e=function(e){var n=e&&e.type;return n&&y8[n]?y8[n]:null},U3e=function(e,n){return A3(n).indexOf(e)},G3e=["children","width","height","viewBox","className","style","title","desc"];function vD(){return vD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vD.apply(this,arguments)}function H3e(t,e){if(t==null)return{};var n=q3e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function q3e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xD(t){var e=t.children,n=t.width,r=t.height,s=t.viewBox,i=t.className,o=t.style,a=t.title,l=t.desc,c=H3e(t,G3e),u=s||{width:n,height:r,x:0,y:0},d=_t("recharts-surface",i);return F.createElement("svg",vD({},He(c,!0,"svg"),{className:d,width:n,height:r,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),F.createElement("title",null,a),F.createElement("desc",null,l),e)}var K3e=["children","className"];function bD(){return bD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bD.apply(this,arguments)}function X3e(t,e){if(t==null)return{};var n=Y3e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Y3e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var At=F.forwardRef(function(t,e){var n=t.children,r=t.className,s=X3e(t,K3e),i=_t("recharts-layer",r);return F.createElement("g",bD({className:i},He(s,!0),{ref:e}),n)}),fl=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i]};function Q3e(t,e,n){var r=-1,s=t.length;e<0&&(e=-e>s?0:s+e),n=n>s?s:n,n<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(s);++r<s;)i[r]=t[r+e];return i}var Z3e=Q3e,J3e=Z3e;function e4e(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:J3e(t,e,n)}var t4e=e4e,n4e="\\ud800-\\udfff",r4e="\\u0300-\\u036f",s4e="\\ufe20-\\ufe2f",i4e="\\u20d0-\\u20ff",o4e=r4e+s4e+i4e,a4e="\\ufe0e\\ufe0f",l4e="\\u200d",c4e=RegExp("["+l4e+n4e+o4e+a4e+"]");function u4e(t){return c4e.test(t)}var Kae=u4e;function d4e(t){return t.split("")}var f4e=d4e,Xae="\\ud800-\\udfff",h4e="\\u0300-\\u036f",p4e="\\ufe20-\\ufe2f",m4e="\\u20d0-\\u20ff",g4e=h4e+p4e+m4e,y4e="\\ufe0e\\ufe0f",v4e="["+Xae+"]",wD="["+g4e+"]",SD="\\ud83c[\\udffb-\\udfff]",x4e="(?:"+wD+"|"+SD+")",Yae="[^"+Xae+"]",Qae="(?:\\ud83c[\\udde6-\\uddff]){2}",Zae="[\\ud800-\\udbff][\\udc00-\\udfff]",b4e="\\u200d",Jae=x4e+"?",ele="["+y4e+"]?",w4e="(?:"+b4e+"(?:"+[Yae,Qae,Zae].join("|")+")"+ele+Jae+")*",S4e=ele+Jae+w4e,C4e="(?:"+[Yae+wD+"?",wD,Qae,Zae,v4e].join("|")+")",N4e=RegExp(SD+"(?="+SD+")|"+C4e+S4e,"g");function _4e(t){return t.match(N4e)||[]}var T4e=_4e,k4e=f4e,E4e=Kae,$4e=T4e;function A4e(t){return E4e(t)?$4e(t):k4e(t)}var I4e=A4e,O4e=t4e,P4e=Kae,R4e=I4e,D4e=zae;function j4e(t){return function(e){e=D4e(e);var n=P4e(e)?R4e(e):void 0,r=n?n[0]:e.charAt(0),s=n?O4e(n,1).join(""):e.slice(1);return r[t]()+s}}var M4e=j4e,F4e=M4e,L4e=F4e("toUpperCase"),B4e=L4e;const Zk=nn(B4e);function Mn(t){return function(){return t}}const tle=Math.cos,qN=Math.sin,Il=Math.sqrt,KN=Math.PI,Jk=2*KN,CD=Math.PI,ND=2*CD,oh=1e-6,z4e=ND-oh;function nle(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function V4e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return nle;const n=10**e;return function(r){this._+=r[0];for(let s=1,i=r.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class W4e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?nle:V4e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,s){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,n,r,s,i,o){this._append`C${+e},${+n},${+r},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(e,n,r,s,i){if(e=+e,n=+n,r=+r,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,l=r-e,c=s-n,u=o-e,d=a-n,h=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>oh)if(!(Math.abs(d*l-c*u)>oh)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-o,m=s-a,g=l*l+c*c,y=p*p+m*m,v=Math.sqrt(g),x=Math.sqrt(h),b=i*Math.tan((CD-Math.acos((g+h-y)/(2*v*x)))/2),S=b/x,w=b/v;Math.abs(S-1)>oh&&this._append`L${e+S*u},${n+S*d}`,this._append`A${i},${i},0,0,${+(d*p>u*m)},${this._x1=e+w*l},${this._y1=n+w*c}`}}arc(e,n,r,s,i,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(s),l=r*Math.sin(s),c=e+a,u=n+l,d=1^o,h=o?s-i:i-s;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>oh||Math.abs(this._y1-u)>oh)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%ND+ND),h>z4e?this._append`A${r},${r},0,1,${d},${e-a},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:h>oh&&this._append`A${r},${r},0,${+(h>=CD)},${d},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function I3(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new W4e(e)}function O3(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function rle(t){this._context=t}rle.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function eE(t){return new rle(t)}function sle(t){return t[0]}function ile(t){return t[1]}function ole(t,e){var n=Mn(!0),r=null,s=eE,i=null,o=I3(a);t=typeof t=="function"?t:t===void 0?sle:Mn(t),e=typeof e=="function"?e:e===void 0?ile:Mn(e);function a(l){var c,u=(l=O3(l)).length,d,h=!1,p;for(r==null&&(i=s(p=o())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+t(d,c,l),+e(d,c,l));if(p)return i=null,p+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Mn(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Mn(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Mn(!!l),a):n},a.curve=function(l){return arguments.length?(s=l,r!=null&&(i=s(r)),a):s},a.context=function(l){return arguments.length?(l==null?r=i=null:i=s(r=l),a):r},a}function gC(t,e,n){var r=null,s=Mn(!0),i=null,o=eE,a=null,l=I3(c);t=typeof t=="function"?t:t===void 0?sle:Mn(+t),e=typeof e=="function"?e:Mn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?ile:Mn(+n);function c(d){var h,p,m,g=(d=O3(d)).length,y,v=!1,x,b=new Array(g),S=new Array(g);for(i==null&&(a=o(x=l())),h=0;h<=g;++h){if(!(h<g&&s(y=d[h],h,d))===v)if(v=!v)p=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),m=h-1;m>=p;--m)a.point(b[m],S[m]);a.lineEnd(),a.areaEnd()}v&&(b[h]=+t(y,h,d),S[h]=+e(y,h,d),a.point(r?+r(y,h,d):b[h],n?+n(y,h,d):S[h]))}if(x)return a=null,x+""||null}function u(){return ole().defined(s).curve(o).context(i)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Mn(+d),r=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:Mn(+d),c):t},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Mn(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Mn(+d),n=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Mn(+d),c):e},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Mn(+d),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(d){return arguments.length?(s=typeof d=="function"?d:Mn(!!d),c):s},c.curve=function(d){return arguments.length?(o=d,i!=null&&(a=o(i)),c):o},c.context=function(d){return arguments.length?(d==null?i=a=null:a=o(i=d),c):i},c}class ale{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function U4e(t){return new ale(t,!0)}function G4e(t){return new ale(t,!1)}const P3={draw(t,e){const n=Il(e/KN);t.moveTo(n,0),t.arc(0,0,n,0,Jk)}},H4e={draw(t,e){const n=Il(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},lle=Il(1/3),q4e=lle*2,K4e={draw(t,e){const n=Il(e/q4e),r=n*lle;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},X4e={draw(t,e){const n=Il(e),r=-n/2;t.rect(r,r,n,n)}},Y4e=.8908130915292852,cle=qN(KN/10)/qN(7*KN/10),Q4e=qN(Jk/10)*cle,Z4e=-tle(Jk/10)*cle,J4e={draw(t,e){const n=Il(e*Y4e),r=Q4e*n,s=Z4e*n;t.moveTo(0,-n),t.lineTo(r,s);for(let i=1;i<5;++i){const o=Jk*i/5,a=tle(o),l=qN(o);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*s,l*r+a*s)}t.closePath()}},oO=Il(3),eBe={draw(t,e){const n=-Il(e/(oO*3));t.moveTo(0,n*2),t.lineTo(-oO*n,-n),t.lineTo(oO*n,-n),t.closePath()}},Uo=-.5,Go=Il(3)/2,_D=1/Il(12),tBe=(_D/2+1)*3,nBe={draw(t,e){const n=Il(e/tBe),r=n/2,s=n*_D,i=r,o=n*_D+n,a=-i,l=o;t.moveTo(r,s),t.lineTo(i,o),t.lineTo(a,l),t.lineTo(Uo*r-Go*s,Go*r+Uo*s),t.lineTo(Uo*i-Go*o,Go*i+Uo*o),t.lineTo(Uo*a-Go*l,Go*a+Uo*l),t.lineTo(Uo*r+Go*s,Uo*s-Go*r),t.lineTo(Uo*i+Go*o,Uo*o-Go*i),t.lineTo(Uo*a+Go*l,Uo*l-Go*a),t.closePath()}};function rBe(t,e){let n=null,r=I3(s);t=typeof t=="function"?t:Mn(t||P3),e=typeof e=="function"?e:Mn(e===void 0?64:+e);function s(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(t=typeof i=="function"?i:Mn(i),s):t},s.size=function(i){return arguments.length?(e=typeof i=="function"?i:Mn(+i),s):e},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function XN(){}function YN(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ule(t){this._context=t}ule.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:YN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:YN(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function sBe(t){return new ule(t)}function dle(t){this._context=t}dle.prototype={areaStart:XN,areaEnd:XN,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:YN(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function iBe(t){return new dle(t)}function fle(t){this._context=t}fle.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:YN(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function oBe(t){return new fle(t)}function hle(t){this._context=t}hle.prototype={areaStart:XN,areaEnd:XN,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function aBe(t){return new hle(t)}function S8(t){return t<0?-1:1}function C8(t,e,n){var r=t._x1-t._x0,s=e-t._x1,i=(t._y1-t._y0)/(r||s<0&&-0),o=(n-t._y1)/(s||r<0&&-0),a=(i*s+o*r)/(r+s);return(S8(i)+S8(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(a))||0}function N8(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function aO(t,e,n){var r=t._x0,s=t._y0,i=t._x1,o=t._y1,a=(i-r)/3;t._context.bezierCurveTo(r+a,s+a*e,i-a,o-a*n,i,o)}function QN(t){this._context=t}QN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:aO(this,this._t0,N8(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,aO(this,N8(this,n=C8(this,t,e)),n);break;default:aO(this,this._t0,n=C8(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function ple(t){this._context=new mle(t)}(ple.prototype=Object.create(QN.prototype)).point=function(t,e){QN.prototype.point.call(this,e,t)};function mle(t){this._context=t}mle.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,s,i){this._context.bezierCurveTo(e,t,r,n,i,s)}};function lBe(t){return new QN(t)}function cBe(t){return new ple(t)}function gle(t){this._context=t}gle.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=_8(t),s=_8(e),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],s[0][i],r[1][i],s[1][i],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function _8(t){var e,n=t.length-1,r,s=new Array(n),i=new Array(n),o=new Array(n);for(s[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)s[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(s[n-1]=2,i[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=s[e]/i[e-1],i[e]-=r,o[e]-=r*o[e-1];for(s[n-1]=o[n-1]/i[n-1],e=n-2;e>=0;--e)s[e]=(o[e]-s[e+1])/i[e];for(i[n-1]=(t[n]+s[n-1])/2,e=0;e<n-1;++e)i[e]=2*t[e+1]-s[e+1];return[s,i]}function uBe(t){return new gle(t)}function tE(t,e){this._context=t,this._t=e}tE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function dBe(t){return new tE(t,.5)}function fBe(t){return new tE(t,0)}function hBe(t){return new tE(t,1)}function Jg(t,e){if((o=t.length)>1)for(var n=1,r,s,i=t[e[0]],o,a=i.length;n<o;++n)for(s=i,i=t[e[n]],r=0;r<a;++r)i[r][1]+=i[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function TD(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function pBe(t,e){return t[e]}function mBe(t){const e=[];return e.key=t,e}function gBe(){var t=Mn([]),e=TD,n=Jg,r=pBe;function s(i){var o=Array.from(t.apply(this,arguments),mBe),a,l=o.length,c=-1,u;for(const d of i)for(a=0,++c;a<l;++a)(o[a][c]=[0,+r(d,o[a].key,c,i)]).data=d;for(a=0,u=O3(e(o));a<l;++a)o[u[a]].index=a;return n(o,u),o}return s.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Mn(Array.from(i)),s):t},s.value=function(i){return arguments.length?(r=typeof i=="function"?i:Mn(+i),s):r},s.order=function(i){return arguments.length?(e=i==null?TD:typeof i=="function"?i:Mn(Array.from(i)),s):e},s.offset=function(i){return arguments.length?(n=i??Jg,s):n},s}function yBe(t,e){if((r=t.length)>0){for(var n,r,s=0,i=t[0].length,o;s<i;++s){for(o=n=0;n<r;++n)o+=t[n][s][1]||0;if(o)for(n=0;n<r;++n)t[n][s][1]/=o}Jg(t,e)}}function vBe(t,e){if((s=t.length)>0){for(var n=0,r=t[e[0]],s,i=r.length;n<i;++n){for(var o=0,a=0;o<s;++o)a+=t[o][n][1]||0;r[n][1]+=r[n][0]=-a/2}Jg(t,e)}}function xBe(t,e){if(!(!((o=t.length)>0)||!((i=(s=t[e[0]]).length)>0))){for(var n=0,r=1,s,i,o;r<i;++r){for(var a=0,l=0,c=0;a<o;++a){for(var u=t[e[a]],d=u[r][1]||0,h=u[r-1][1]||0,p=(d-h)/2,m=0;m<a;++m){var g=t[e[m]],y=g[r][1]||0,v=g[r-1][1]||0;p+=y-v}l+=d,c+=p*d}s[r-1][1]+=s[r-1][0]=n,l&&(n-=c/l)}s[r-1][1]+=s[r-1][0]=n,Jg(t,e)}}function hb(t){"@babel/helpers - typeof";return hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hb(t)}var bBe=["type","size","sizeType"];function kD(){return kD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kD.apply(this,arguments)}function T8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function k8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T8(Object(n),!0).forEach(function(r){wBe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wBe(t,e,n){return e=SBe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SBe(t){var e=CBe(t,"string");return hb(e)=="symbol"?e:e+""}function CBe(t,e){if(hb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NBe(t,e){if(t==null)return{};var n=_Be(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _Be(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var yle={symbolCircle:P3,symbolCross:H4e,symbolDiamond:K4e,symbolSquare:X4e,symbolStar:J4e,symbolTriangle:eBe,symbolWye:nBe},TBe=Math.PI/180,kBe=function(e){var n="symbol".concat(Zk(e));return yle[n]||P3},EBe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*TBe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},$Be=function(e,n){yle["symbol".concat(Zk(e))]=n},nE=function(e){var n=e.type,r=n===void 0?"circle":n,s=e.size,i=s===void 0?64:s,o=e.sizeType,a=o===void 0?"area":o,l=NBe(e,bBe),c=k8(k8({},l),{},{type:r,size:i,sizeType:a}),u=function(){var y=kBe(r),v=rBe().type(y).size(EBe(i,a,r));return v()},d=c.className,h=c.cx,p=c.cy,m=He(c,!0);return h===+h&&p===+p&&i===+i?F.createElement("path",kD({},m,{className:_t("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};nE.registerSymbol=$Be;function ey(t){"@babel/helpers - typeof";return ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ey(t)}function ED(){return ED=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ED.apply(this,arguments)}function E8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ABe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E8(Object(n),!0).forEach(function(r){pb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OBe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xle(r.key),r)}}function PBe(t,e,n){return e&&OBe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function RBe(t,e,n){return e=ZN(e),DBe(t,vle()?Reflect.construct(e,n||[],ZN(t).constructor):e.apply(t,n))}function DBe(t,e){if(e&&(ey(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jBe(t)}function jBe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vle(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vle=function(){return!!t})()}function ZN(t){return ZN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ZN(t)}function MBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$D(t,e)}function $D(t,e){return $D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},$D(t,e)}function pb(t,e,n){return e=xle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xle(t){var e=FBe(t,"string");return ey(e)=="symbol"?e:e+""}function FBe(t,e){if(ey(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ey(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ho=32,R3=function(t){function e(){return IBe(this,e),RBe(this,e,arguments)}return MBe(e,t),PBe(e,[{key:"renderIcon",value:function(r){var s=this.props.inactiveColor,i=Ho/2,o=Ho/6,a=Ho/3,l=r.inactive?s:r.color;if(r.type==="plainline")return F.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:Ho,y2:i,className:"recharts-legend-icon"});if(r.type==="line")return F.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*a,",").concat(i,`
            H`).concat(Ho,"M").concat(2*a,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(a,",").concat(i),className:"recharts-legend-icon"});if(r.type==="rect")return F.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Ho/8,"h").concat(Ho,"v").concat(Ho*3/4,"h").concat(-Ho,"z"),className:"recharts-legend-icon"});if(F.isValidElement(r.legendIcon)){var c=ABe({},r);return delete c.legendIcon,F.cloneElement(r.legendIcon,c)}return F.createElement(nE,{fill:l,cx:i,cy:i,size:Ho,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,s=this.props,i=s.payload,o=s.iconSize,a=s.layout,l=s.formatter,c=s.inactiveColor,u={x:0,y:0,width:Ho,height:Ho},d={display:a==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,m){var g=p.formatter||l,y=_t(pb(pb({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",p.inactive));if(p.type==="none")return null;var v=at(p.value)?null:p.value;fl(!at(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=p.inactive?c:p.color;return F.createElement("li",ED({className:y,style:d,key:"legend-item-".concat(m)},af(r.props,p,m)),F.createElement(xD,{width:o,height:o,viewBox:u,style:h},r.renderIcon(p)),F.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},g?g(v,p,m):v))})}},{key:"render",value:function(){var r=this.props,s=r.payload,i=r.layout,o=r.align;if(!s||!s.length)return null;var a={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return F.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])}(N.PureComponent);pb(R3,"displayName","Legend");pb(R3,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var LBe=Lk;function BBe(){this.__data__=new LBe,this.size=0}var zBe=BBe;function VBe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var WBe=VBe;function UBe(t){return this.__data__.get(t)}var GBe=UBe;function HBe(t){return this.__data__.has(t)}var qBe=HBe,KBe=Lk,XBe=S3,YBe=C3,QBe=200;function ZBe(t,e){var n=this.__data__;if(n instanceof KBe){var r=n.__data__;if(!XBe||r.length<QBe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new YBe(r)}return n.set(t,e),this.size=n.size,this}var JBe=ZBe,eze=Lk,tze=zBe,nze=WBe,rze=GBe,sze=qBe,ize=JBe;function gv(t){var e=this.__data__=new eze(t);this.size=e.size}gv.prototype.clear=tze;gv.prototype.delete=nze;gv.prototype.get=rze;gv.prototype.has=sze;gv.prototype.set=ize;var ble=gv,oze="__lodash_hash_undefined__";function aze(t){return this.__data__.set(t,oze),this}var lze=aze;function cze(t){return this.__data__.has(t)}var uze=cze,dze=C3,fze=lze,hze=uze;function JN(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new dze;++e<n;)this.add(t[e])}JN.prototype.add=JN.prototype.push=fze;JN.prototype.has=hze;var wle=JN;function pze(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Sle=pze;function mze(t,e){return t.has(e)}var Cle=mze,gze=wle,yze=Sle,vze=Cle,xze=1,bze=2;function wze(t,e,n,r,s,i){var o=n&xze,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=i.get(t),u=i.get(e);if(c&&u)return c==e&&u==t;var d=-1,h=!0,p=n&bze?new gze:void 0;for(i.set(t,e),i.set(e,t);++d<a;){var m=t[d],g=e[d];if(r)var y=o?r(g,m,d,e,t,i):r(m,g,d,t,e,i);if(y!==void 0){if(y)continue;h=!1;break}if(p){if(!yze(e,function(v,x){if(!vze(p,x)&&(m===v||s(m,v,n,r,i)))return p.push(x)})){h=!1;break}}else if(!(m===g||s(m,g,n,r,i))){h=!1;break}}return i.delete(t),i.delete(e),h}var Nle=wze,Sze=Mc,Cze=Sze.Uint8Array,Nze=Cze;function _ze(t){var e=-1,n=Array(t.size);return t.forEach(function(r,s){n[++e]=[s,r]}),n}var Tze=_ze;function kze(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var D3=kze,$8=W1,A8=Nze,Eze=w3,$ze=Nle,Aze=Tze,Ize=D3,Oze=1,Pze=2,Rze="[object Boolean]",Dze="[object Date]",jze="[object Error]",Mze="[object Map]",Fze="[object Number]",Lze="[object RegExp]",Bze="[object Set]",zze="[object String]",Vze="[object Symbol]",Wze="[object ArrayBuffer]",Uze="[object DataView]",I8=$8?$8.prototype:void 0,lO=I8?I8.valueOf:void 0;function Gze(t,e,n,r,s,i,o){switch(n){case Uze:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Wze:return!(t.byteLength!=e.byteLength||!i(new A8(t),new A8(e)));case Rze:case Dze:case Fze:return Eze(+t,+e);case jze:return t.name==e.name&&t.message==e.message;case Lze:case zze:return t==e+"";case Mze:var a=Aze;case Bze:var l=r&Oze;if(a||(a=Ize),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=Pze,o.set(t,e);var u=$ze(a(t),a(e),r,s,i,o);return o.delete(t),u;case Vze:if(lO)return lO.call(t)==lO.call(e)}return!1}var Hze=Gze;function qze(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var _le=qze,Kze=_le,Xze=uo;function Yze(t,e,n){var r=e(t);return Xze(t)?r:Kze(r,n(t))}var Qze=Yze;function Zze(t,e){for(var n=-1,r=t==null?0:t.length,s=0,i=[];++n<r;){var o=t[n];e(o,n,t)&&(i[s++]=o)}return i}var Jze=Zze;function eVe(){return[]}var tVe=eVe,nVe=Jze,rVe=tVe,sVe=Object.prototype,iVe=sVe.propertyIsEnumerable,O8=Object.getOwnPropertySymbols,oVe=O8?function(t){return t==null?[]:(t=Object(t),nVe(O8(t),function(e){return iVe.call(t,e)}))}:rVe,aVe=oVe;function lVe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var cVe=lVe,uVe=Vu,dVe=Wu,fVe="[object Arguments]";function hVe(t){return dVe(t)&&uVe(t)==fVe}var pVe=hVe,P8=pVe,mVe=Wu,Tle=Object.prototype,gVe=Tle.hasOwnProperty,yVe=Tle.propertyIsEnumerable,vVe=P8(function(){return arguments}())?P8:function(t){return mVe(t)&&gVe.call(t,"callee")&&!yVe.call(t,"callee")},j3=vVe,e_={exports:{}};function xVe(){return!1}var bVe=xVe;e_.exports;(function(t,e){var n=Mc,r=bVe,s=e&&!e.nodeType&&e,i=s&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===s,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;t.exports=c})(e_,e_.exports);var kle=e_.exports,wVe=9007199254740991,SVe=/^(?:0|[1-9]\d*)$/;function CVe(t,e){var n=typeof t;return e=e??wVe,!!e&&(n=="number"||n!="symbol"&&SVe.test(t))&&t>-1&&t%1==0&&t<e}var M3=CVe,NVe=9007199254740991;function _Ve(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=NVe}var F3=_Ve,TVe=Vu,kVe=F3,EVe=Wu,$Ve="[object Arguments]",AVe="[object Array]",IVe="[object Boolean]",OVe="[object Date]",PVe="[object Error]",RVe="[object Function]",DVe="[object Map]",jVe="[object Number]",MVe="[object Object]",FVe="[object RegExp]",LVe="[object Set]",BVe="[object String]",zVe="[object WeakMap]",VVe="[object ArrayBuffer]",WVe="[object DataView]",UVe="[object Float32Array]",GVe="[object Float64Array]",HVe="[object Int8Array]",qVe="[object Int16Array]",KVe="[object Int32Array]",XVe="[object Uint8Array]",YVe="[object Uint8ClampedArray]",QVe="[object Uint16Array]",ZVe="[object Uint32Array]",Hn={};Hn[UVe]=Hn[GVe]=Hn[HVe]=Hn[qVe]=Hn[KVe]=Hn[XVe]=Hn[YVe]=Hn[QVe]=Hn[ZVe]=!0;Hn[$Ve]=Hn[AVe]=Hn[VVe]=Hn[IVe]=Hn[WVe]=Hn[OVe]=Hn[PVe]=Hn[RVe]=Hn[DVe]=Hn[jVe]=Hn[MVe]=Hn[FVe]=Hn[LVe]=Hn[BVe]=Hn[zVe]=!1;function JVe(t){return EVe(t)&&kVe(t.length)&&!!Hn[TVe(t)]}var e5e=JVe;function t5e(t){return function(e){return t(e)}}var Ele=t5e,t_={exports:{}};t_.exports;(function(t,e){var n=Dae,r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,i=s&&s.exports===r,o=i&&n.process,a=function(){try{var l=s&&s.require&&s.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(t_,t_.exports);var n5e=t_.exports,r5e=e5e,s5e=Ele,R8=n5e,D8=R8&&R8.isTypedArray,i5e=D8?s5e(D8):r5e,$le=i5e,o5e=cVe,a5e=j3,l5e=uo,c5e=kle,u5e=M3,d5e=$le,f5e=Object.prototype,h5e=f5e.hasOwnProperty;function p5e(t,e){var n=l5e(t),r=!n&&a5e(t),s=!n&&!r&&c5e(t),i=!n&&!r&&!s&&d5e(t),o=n||r||s||i,a=o?o5e(t.length,String):[],l=a.length;for(var c in t)(e||h5e.call(t,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||u5e(c,l)))&&a.push(c);return a}var m5e=p5e,g5e=Object.prototype;function y5e(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||g5e;return t===n}var v5e=y5e;function x5e(t,e){return function(n){return t(e(n))}}var Ale=x5e,b5e=Ale,w5e=b5e(Object.keys,Object),S5e=w5e,C5e=v5e,N5e=S5e,_5e=Object.prototype,T5e=_5e.hasOwnProperty;function k5e(t){if(!C5e(t))return N5e(t);var e=[];for(var n in Object(t))T5e.call(t,n)&&n!="constructor"&&e.push(n);return e}var E5e=k5e,$5e=b3,A5e=F3;function I5e(t){return t!=null&&A5e(t.length)&&!$5e(t)}var G1=I5e,O5e=m5e,P5e=E5e,R5e=G1;function D5e(t){return R5e(t)?O5e(t):P5e(t)}var rE=D5e,j5e=Qze,M5e=aVe,F5e=rE;function L5e(t){return j5e(t,F5e,M5e)}var B5e=L5e,j8=B5e,z5e=1,V5e=Object.prototype,W5e=V5e.hasOwnProperty;function U5e(t,e,n,r,s,i){var o=n&z5e,a=j8(t),l=a.length,c=j8(e),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var h=a[d];if(!(o?h in e:W5e.call(e,h)))return!1}var p=i.get(t),m=i.get(e);if(p&&m)return p==e&&m==t;var g=!0;i.set(t,e),i.set(e,t);for(var y=o;++d<l;){h=a[d];var v=t[h],x=e[h];if(r)var b=o?r(x,v,h,e,t,i):r(v,x,h,t,e,i);if(!(b===void 0?v===x||s(v,x,n,r,i):b)){g=!1;break}y||(y=h=="constructor")}if(g&&!y){var S=t.constructor,w=e.constructor;S!=w&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof w=="function"&&w instanceof w)&&(g=!1)}return i.delete(t),i.delete(e),g}var G5e=U5e,H5e=Mp,q5e=Mc,K5e=H5e(q5e,"DataView"),X5e=K5e,Y5e=Mp,Q5e=Mc,Z5e=Y5e(Q5e,"Promise"),J5e=Z5e,e6e=Mp,t6e=Mc,n6e=e6e(t6e,"Set"),Ile=n6e,r6e=Mp,s6e=Mc,i6e=r6e(s6e,"WeakMap"),o6e=i6e,AD=X5e,ID=S3,OD=J5e,PD=Ile,RD=o6e,Ole=Vu,yv=Mae,M8="[object Map]",a6e="[object Object]",F8="[object Promise]",L8="[object Set]",B8="[object WeakMap]",z8="[object DataView]",l6e=yv(AD),c6e=yv(ID),u6e=yv(OD),d6e=yv(PD),f6e=yv(RD),ah=Ole;(AD&&ah(new AD(new ArrayBuffer(1)))!=z8||ID&&ah(new ID)!=M8||OD&&ah(OD.resolve())!=F8||PD&&ah(new PD)!=L8||RD&&ah(new RD)!=B8)&&(ah=function(t){var e=Ole(t),n=e==a6e?t.constructor:void 0,r=n?yv(n):"";if(r)switch(r){case l6e:return z8;case c6e:return M8;case u6e:return F8;case d6e:return L8;case f6e:return B8}return e});var h6e=ah,cO=ble,p6e=Nle,m6e=Hze,g6e=G5e,V8=h6e,W8=uo,U8=kle,y6e=$le,v6e=1,G8="[object Arguments]",H8="[object Array]",yC="[object Object]",x6e=Object.prototype,q8=x6e.hasOwnProperty;function b6e(t,e,n,r,s,i){var o=W8(t),a=W8(e),l=o?H8:V8(t),c=a?H8:V8(e);l=l==G8?yC:l,c=c==G8?yC:c;var u=l==yC,d=c==yC,h=l==c;if(h&&U8(t)){if(!U8(e))return!1;o=!0,u=!1}if(h&&!u)return i||(i=new cO),o||y6e(t)?p6e(t,e,n,r,s,i):m6e(t,e,l,n,r,s,i);if(!(n&v6e)){var p=u&&q8.call(t,"__wrapped__"),m=d&&q8.call(e,"__wrapped__");if(p||m){var g=p?t.value():t,y=m?e.value():e;return i||(i=new cO),s(g,y,n,r,i)}}return h?(i||(i=new cO),g6e(t,e,n,r,s,i)):!1}var w6e=b6e,S6e=w6e,K8=Wu;function Ple(t,e,n,r,s){return t===e?!0:t==null||e==null||!K8(t)&&!K8(e)?t!==t&&e!==e:S6e(t,e,n,r,Ple,s)}var L3=Ple,C6e=ble,N6e=L3,_6e=1,T6e=2;function k6e(t,e,n,r){var s=n.length,i=s,o=!r;if(t==null)return!i;for(t=Object(t);s--;){var a=n[s];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++s<i;){a=n[s];var l=a[0],c=t[l],u=a[1];if(o&&a[2]){if(c===void 0&&!(l in t))return!1}else{var d=new C6e;if(r)var h=r(c,u,l,t,e,d);if(!(h===void 0?N6e(u,c,_6e|T6e,r,d):h))return!1}}return!0}var E6e=k6e,$6e=_f;function A6e(t){return t===t&&!$6e(t)}var Rle=A6e,I6e=Rle,O6e=rE;function P6e(t){for(var e=O6e(t),n=e.length;n--;){var r=e[n],s=t[r];e[n]=[r,s,I6e(s)]}return e}var R6e=P6e;function D6e(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var Dle=D6e,j6e=E6e,M6e=R6e,F6e=Dle;function L6e(t){var e=M6e(t);return e.length==1&&e[0][2]?F6e(e[0][0],e[0][1]):function(n){return n===t||j6e(n,t,e)}}var B6e=L6e;function z6e(t,e){return t!=null&&e in Object(t)}var V6e=z6e,W6e=Vae,U6e=j3,G6e=uo,H6e=M3,q6e=F3,K6e=zk;function X6e(t,e,n){e=W6e(e,t);for(var r=-1,s=e.length,i=!1;++r<s;){var o=K6e(e[r]);if(!(i=t!=null&&n(t,o)))break;t=t[o]}return i||++r!=s?i:(s=t==null?0:t.length,!!s&&q6e(s)&&H6e(o,s)&&(G6e(t)||U6e(t)))}var Y6e=X6e,Q6e=V6e,Z6e=Y6e;function J6e(t,e){return t!=null&&Z6e(t,e,Q6e)}var eWe=J6e,tWe=L3,nWe=Wae,rWe=eWe,sWe=x3,iWe=Rle,oWe=Dle,aWe=zk,lWe=1,cWe=2;function uWe(t,e){return sWe(t)&&iWe(e)?oWe(aWe(t),e):function(n){var r=nWe(n,t);return r===void 0&&r===e?rWe(n,t):tWe(e,r,lWe|cWe)}}var dWe=uWe;function fWe(t){return t}var vv=fWe;function hWe(t){return function(e){return e==null?void 0:e[t]}}var pWe=hWe,mWe=T3;function gWe(t){return function(e){return mWe(e,t)}}var yWe=gWe,vWe=pWe,xWe=yWe,bWe=x3,wWe=zk;function SWe(t){return bWe(t)?vWe(wWe(t)):xWe(t)}var CWe=SWe,NWe=B6e,_We=dWe,TWe=vv,kWe=uo,EWe=CWe;function $We(t){return typeof t=="function"?t:t==null?TWe:typeof t=="object"?kWe(t)?_We(t[0],t[1]):NWe(t):EWe(t)}var Fc=$We;function AWe(t,e,n,r){for(var s=t.length,i=n+(r?1:-1);r?i--:++i<s;)if(e(t[i],i,t))return i;return-1}var jle=AWe;function IWe(t){return t!==t}var OWe=IWe;function PWe(t,e,n){for(var r=n-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}var RWe=PWe,DWe=jle,jWe=OWe,MWe=RWe;function FWe(t,e,n){return e===e?MWe(t,e,n):DWe(t,jWe,n)}var LWe=FWe,BWe=LWe;function zWe(t,e){var n=t==null?0:t.length;return!!n&&BWe(t,e,0)>-1}var VWe=zWe;function WWe(t,e,n){for(var r=-1,s=t==null?0:t.length;++r<s;)if(n(e,t[r]))return!0;return!1}var UWe=WWe;function GWe(){}var HWe=GWe,uO=Ile,qWe=HWe,KWe=D3,XWe=1/0,YWe=uO&&1/KWe(new uO([,-0]))[1]==XWe?function(t){return new uO(t)}:qWe,QWe=YWe,ZWe=wle,JWe=VWe,eUe=UWe,tUe=Cle,nUe=QWe,rUe=D3,sUe=200;function iUe(t,e,n){var r=-1,s=JWe,i=t.length,o=!0,a=[],l=a;if(n)o=!1,s=eUe;else if(i>=sUe){var c=e?null:nUe(t);if(c)return rUe(c);o=!1,s=tUe,l=new ZWe}else l=e?[]:a;e:for(;++r<i;){var u=t[r],d=e?e(u):u;if(u=n||u!==0?u:0,o&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;e&&l.push(d),a.push(u)}else s(l,d,n)||(l!==a&&l.push(d),a.push(u))}return a}var oUe=iUe,aUe=Fc,lUe=oUe;function cUe(t,e){return t&&t.length?lUe(t,aUe(e)):[]}var uUe=cUe;const X8=nn(uUe);function Mle(t,e,n){return e===!0?X8(t,n):at(e)?X8(t,e):t}function ty(t){"@babel/helpers - typeof";return ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ty(t)}var dUe=["ref"];function Y8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Uc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y8(Object(n),!0).forEach(function(r){sE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lle(r.key),r)}}function hUe(t,e,n){return e&&Q8(t.prototype,e),n&&Q8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pUe(t,e,n){return e=n_(e),mUe(t,Fle()?Reflect.construct(e,n||[],n_(t).constructor):e.apply(t,n))}function mUe(t,e){if(e&&(ty(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gUe(t)}function gUe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fle(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fle=function(){return!!t})()}function n_(t){return n_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},n_(t)}function yUe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DD(t,e)}function DD(t,e){return DD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},DD(t,e)}function sE(t,e,n){return e=Lle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lle(t){var e=vUe(t,"string");return ty(e)=="symbol"?e:e+""}function vUe(t,e){if(ty(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ty(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xUe(t,e){if(t==null)return{};var n=bUe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bUe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function wUe(t){return t.value}function SUe(t,e){if(F.isValidElement(t))return F.cloneElement(t,e);if(typeof t=="function")return F.createElement(t,e);e.ref;var n=xUe(e,dUe);return F.createElement(R3,n)}var Z8=1,os=function(t){function e(){var n;fUe(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=pUe(this,e,[].concat(s)),sE(n,"lastBoundingBox",{width:-1,height:-1}),n}return yUe(e,t),hUe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>Z8||Math.abs(s.height-this.lastBoundingBox.height)>Z8)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,r&&r(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Uc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var s=this.props,i=s.layout,o=s.align,a=s.verticalAlign,l=s.margin,c=s.chartWidth,u=s.chartHeight,d,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();d={left:((c||0)-p.width)/2}}else d=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var m=this.getBBoxSnapshot();h={top:((u||0)-m.height)/2}}else h=a==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Uc(Uc({},d),h)}},{key:"render",value:function(){var r=this,s=this.props,i=s.content,o=s.width,a=s.height,l=s.wrapperStyle,c=s.payloadUniqBy,u=s.payload,d=Uc(Uc({position:"absolute",width:o||"auto",height:a||"auto"},this.getDefaultPosition(l)),l);return F.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(p){r.wrapperNode=p}},SUe(i,Uc(Uc({},this.props),{},{payload:Mle(u,c,wUe)})))}}],[{key:"getWithHeight",value:function(r,s){var i=Uc(Uc({},this.defaultProps),r.props),o=i.layout;return o==="vertical"&&ke(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||s}:null}}])}(N.PureComponent);sE(os,"displayName","Legend");sE(os,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var J8=W1,CUe=j3,NUe=uo,eG=J8?J8.isConcatSpreadable:void 0;function _Ue(t){return NUe(t)||CUe(t)||!!(eG&&t&&t[eG])}var TUe=_Ue,kUe=_le,EUe=TUe;function Ble(t,e,n,r,s){var i=-1,o=t.length;for(n||(n=EUe),s||(s=[]);++i<o;){var a=t[i];e>0&&n(a)?e>1?Ble(a,e-1,n,r,s):kUe(s,a):r||(s[s.length]=a)}return s}var zle=Ble;function $Ue(t){return function(e,n,r){for(var s=-1,i=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++s];if(n(i[l],l,i)===!1)break}return e}}var AUe=$Ue,IUe=AUe,OUe=IUe(),PUe=OUe,RUe=PUe,DUe=rE;function jUe(t,e){return t&&RUe(t,e,DUe)}var Vle=jUe,MUe=G1;function FUe(t,e){return function(n,r){if(n==null)return n;if(!MUe(n))return t(n,r);for(var s=n.length,i=e?s:-1,o=Object(n);(e?i--:++i<s)&&r(o[i],i,o)!==!1;);return n}}var LUe=FUe,BUe=Vle,zUe=LUe,VUe=zUe(BUe),B3=VUe,WUe=B3,UUe=G1;function GUe(t,e){var n=-1,r=UUe(t)?Array(t.length):[];return WUe(t,function(s,i,o){r[++n]=e(s,i,o)}),r}var Wle=GUe;function HUe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var qUe=HUe,tG=uv;function KUe(t,e){if(t!==e){var n=t!==void 0,r=t===null,s=t===t,i=tG(t),o=e!==void 0,a=e===null,l=e===e,c=tG(e);if(!a&&!c&&!i&&t>e||i&&o&&l&&!a&&!c||r&&o&&l||!n&&l||!s)return 1;if(!r&&!i&&!c&&t<e||c&&n&&s&&!r&&!i||a&&n&&s||!o&&s||!l)return-1}return 0}var XUe=KUe,YUe=XUe;function QUe(t,e,n){for(var r=-1,s=t.criteria,i=e.criteria,o=s.length,a=n.length;++r<o;){var l=YUe(s[r],i[r]);if(l){if(r>=a)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return t.index-e.index}var ZUe=QUe,dO=_3,JUe=T3,e8e=Fc,t8e=Wle,n8e=qUe,r8e=Ele,s8e=ZUe,i8e=vv,o8e=uo;function a8e(t,e,n){e.length?e=dO(e,function(i){return o8e(i)?function(o){return JUe(o,i.length===1?i[0]:i)}:i}):e=[i8e];var r=-1;e=dO(e,r8e(e8e));var s=t8e(t,function(i,o,a){var l=dO(e,function(c){return c(i)});return{criteria:l,index:++r,value:i}});return n8e(s,function(i,o){return s8e(i,o,n)})}var l8e=a8e;function c8e(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var u8e=c8e,d8e=u8e,nG=Math.max;function f8e(t,e,n){return e=nG(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,i=nG(r.length-e,0),o=Array(i);++s<i;)o[s]=r[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=r[s];return a[e]=n(o),d8e(t,this,a)}}var h8e=f8e;function p8e(t){return function(){return t}}var m8e=p8e,g8e=Mp,y8e=function(){try{var t=g8e(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Ule=y8e,v8e=m8e,rG=Ule,x8e=vv,b8e=rG?function(t,e){return rG(t,"toString",{configurable:!0,enumerable:!1,value:v8e(e),writable:!0})}:x8e,w8e=b8e,S8e=800,C8e=16,N8e=Date.now;function _8e(t){var e=0,n=0;return function(){var r=N8e(),s=C8e-(r-n);if(n=r,s>0){if(++e>=S8e)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var T8e=_8e,k8e=w8e,E8e=T8e,$8e=E8e(k8e),A8e=$8e,I8e=vv,O8e=h8e,P8e=A8e;function R8e(t,e){return P8e(O8e(t,e,I8e),t+"")}var D8e=R8e,j8e=w3,M8e=G1,F8e=M3,L8e=_f;function B8e(t,e,n){if(!L8e(n))return!1;var r=typeof e;return(r=="number"?M8e(n)&&F8e(e,n.length):r=="string"&&e in n)?j8e(n[e],t):!1}var iE=B8e,z8e=zle,V8e=l8e,W8e=D8e,sG=iE,U8e=W8e(function(t,e){if(t==null)return[];var n=e.length;return n>1&&sG(t,e[0],e[1])?e=[]:n>2&&sG(e[0],e[1],e[2])&&(e=[e[0]]),V8e(t,z8e(e,1),[])}),G8e=U8e;const z3=nn(G8e);function mb(t){"@babel/helpers - typeof";return mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mb(t)}function jD(){return jD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jD.apply(this,arguments)}function H8e(t,e){return Y8e(t)||X8e(t,e)||K8e(t,e)||q8e()}function q8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K8e(t,e){if(t){if(typeof t=="string")return iG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iG(t,e)}}function iG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function X8e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function Y8e(t){if(Array.isArray(t))return t}function oG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function fO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oG(Object(n),!0).forEach(function(r){Q8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Q8e(t,e,n){return e=Z8e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z8e(t){var e=J8e(t,"string");return mb(e)=="symbol"?e:e+""}function J8e(t,e){if(mb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eGe(t){return Array.isArray(t)&&is(t[0])&&is(t[1])?t.join(" ~ "):t}var tGe=function(e){var n=e.separator,r=n===void 0?" : ":n,s=e.contentStyle,i=s===void 0?{}:s,o=e.itemStyle,a=o===void 0?{}:o,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,d=e.formatter,h=e.itemSorter,p=e.wrapperClassName,m=e.labelClassName,g=e.label,y=e.labelFormatter,v=e.accessibilityLayer,x=v===void 0?!1:v,b=function(){if(u&&u.length){var P={padding:0,margin:0},D=(h?z3(u,h):u).map(function(A,I){if(A.type==="none")return null;var R=fO({display:"block",paddingTop:4,paddingBottom:4,color:A.color||"#000"},a),M=A.formatter||d||eGe,E=A.value,j=A.name,B=E,W=j;if(M&&B!=null&&W!=null){var G=M(E,j,A,I,u);if(Array.isArray(G)){var te=H8e(G,2);B=te[0],W=te[1]}else B=G}return F.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:R},is(W)?F.createElement("span",{className:"recharts-tooltip-item-name"},W):null,is(W)?F.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,F.createElement("span",{className:"recharts-tooltip-item-value"},B),F.createElement("span",{className:"recharts-tooltip-item-unit"},A.unit||""))});return F.createElement("ul",{className:"recharts-tooltip-item-list",style:P},D)}return null},S=fO({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=fO({margin:0},c),C=!ht(g),_=C?g:"",T=_t("recharts-default-tooltip",p),k=_t("recharts-tooltip-label",m);C&&y&&u!==void 0&&u!==null&&(_=y(g,u));var $=x?{role:"status","aria-live":"assertive"}:{};return F.createElement("div",jD({className:T,style:S},$),F.createElement("p",{className:k,style:w},F.isValidElement(_)?_:"".concat(_)),b())};function gb(t){"@babel/helpers - typeof";return gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gb(t)}function vC(t,e,n){return e=nGe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nGe(t){var e=rGe(t,"string");return gb(e)=="symbol"?e:e+""}function rGe(t,e){if(gb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yx="recharts-tooltip-wrapper",sGe={visibility:"hidden"};function iGe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return _t(yx,vC(vC(vC(vC({},"".concat(yx,"-right"),ke(n)&&e&&ke(e.x)&&n>=e.x),"".concat(yx,"-left"),ke(n)&&e&&ke(e.x)&&n<e.x),"".concat(yx,"-bottom"),ke(r)&&e&&ke(e.y)&&r>=e.y),"".concat(yx,"-top"),ke(r)&&e&&ke(e.y)&&r<e.y))}function aG(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,s=t.offsetTopLeft,i=t.position,o=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(i&&ke(i[r]))return i[r];var u=n[r]-a-s,d=n[r]+s;if(e[r])return o[r]?u:d;if(o[r]){var h=u,p=l[r];return h<p?Math.max(d,l[r]):Math.max(u,l[r])}var m=d+a,g=l[r]+c;return m>g?Math.max(u,l[r]):Math.max(d,l[r])}function oGe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function aGe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,s=t.position,i=t.reverseDirection,o=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,c,u,d;return o.height>0&&o.width>0&&n?(u=aG({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),d=aG({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=oGe({translateX:u,translateY:d,useTranslate3d:a})):c=sGe,{cssProperties:c,cssClasses:iGe({translateX:u,translateY:d,coordinate:n})}}function ny(t){"@babel/helpers - typeof";return ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ny(t)}function lG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function cG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lG(Object(n),!0).forEach(function(r){FD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cGe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hle(r.key),r)}}function uGe(t,e,n){return e&&cGe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dGe(t,e,n){return e=r_(e),fGe(t,Gle()?Reflect.construct(e,n||[],r_(t).constructor):e.apply(t,n))}function fGe(t,e){if(e&&(ny(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hGe(t)}function hGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gle(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gle=function(){return!!t})()}function r_(t){return r_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},r_(t)}function pGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MD(t,e)}function MD(t,e){return MD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},MD(t,e)}function FD(t,e,n){return e=Hle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hle(t){var e=mGe(t,"string");return ny(e)=="symbol"?e:e+""}function mGe(t,e){if(ny(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ny(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uG=1,gGe=function(t){function e(){var n;lGe(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=dGe(this,e,[].concat(s)),FD(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),FD(n,"handleKeyDown",function(o){if(o.key==="Escape"){var a,l,c,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&a!==void 0?a:0,y:(c=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),n}return pGe(e,t),uGe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>uG||Math.abs(r.height-this.state.lastBoundingBox.height)>uG)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,a=s.animationDuration,l=s.animationEasing,c=s.children,u=s.coordinate,d=s.hasPayload,h=s.isAnimationActive,p=s.offset,m=s.position,g=s.reverseDirection,y=s.useTranslate3d,v=s.viewBox,x=s.wrapperStyle,b=aGe({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:p,position:m,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:v}),S=b.cssClasses,w=b.cssProperties,C=cG(cG({transition:h&&i?"transform ".concat(a,"ms ").concat(l):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&d?"visible":"hidden",position:"absolute",top:0,left:0},x);return F.createElement("div",{tabIndex:-1,className:S,style:C,ref:function(T){r.wrapperNode=T}},c)}}])}(N.PureComponent),yGe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ao={isSsr:yGe(),get:function(e){return Ao[e]},set:function(e,n){if(typeof e=="string")Ao[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(s){Ao[s]=e[s]})}}};function ry(t){"@babel/helpers - typeof";return ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ry(t)}function dG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function fG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dG(Object(n),!0).forEach(function(r){V3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xGe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kle(r.key),r)}}function bGe(t,e,n){return e&&xGe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function wGe(t,e,n){return e=s_(e),SGe(t,qle()?Reflect.construct(e,n||[],s_(t).constructor):e.apply(t,n))}function SGe(t,e){if(e&&(ry(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CGe(t)}function CGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qle(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qle=function(){return!!t})()}function s_(t){return s_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},s_(t)}function NGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LD(t,e)}function LD(t,e){return LD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},LD(t,e)}function V3(t,e,n){return e=Kle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kle(t){var e=_Ge(t,"string");return ry(e)=="symbol"?e:e+""}function _Ge(t,e){if(ry(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ry(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TGe(t){return t.dataKey}function kGe(t,e){return F.isValidElement(t)?F.cloneElement(t,e):typeof t=="function"?F.createElement(t,e):F.createElement(tGe,e)}var Tn=function(t){function e(){return vGe(this,e),wGe(this,e,arguments)}return NGe(e,t),bGe(e,[{key:"render",value:function(){var r=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,a=s.animationDuration,l=s.animationEasing,c=s.content,u=s.coordinate,d=s.filterNull,h=s.isAnimationActive,p=s.offset,m=s.payload,g=s.payloadUniqBy,y=s.position,v=s.reverseDirection,x=s.useTranslate3d,b=s.viewBox,S=s.wrapperStyle,w=m??[];d&&w.length&&(w=Mle(m.filter(function(_){return _.value!=null&&(_.hide!==!0||r.props.includeHidden)}),g,TGe));var C=w.length>0;return F.createElement(gGe,{allowEscapeViewBox:o,animationDuration:a,animationEasing:l,isAnimationActive:h,active:i,coordinate:u,hasPayload:C,offset:p,position:y,reverseDirection:v,useTranslate3d:x,viewBox:b,wrapperStyle:S},kGe(c,fG(fG({},this.props),{},{payload:w})))}}])}(N.PureComponent);V3(Tn,"displayName","Tooltip");V3(Tn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ao.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var EGe=Mc,$Ge=function(){return EGe.Date.now()},AGe=$Ge,IGe=/\s/;function OGe(t){for(var e=t.length;e--&&IGe.test(t.charAt(e)););return e}var PGe=OGe,RGe=PGe,DGe=/^\s+/;function jGe(t){return t&&t.slice(0,RGe(t)+1).replace(DGe,"")}var MGe=jGe,FGe=MGe,hG=_f,LGe=uv,pG=NaN,BGe=/^[-+]0x[0-9a-f]+$/i,zGe=/^0b[01]+$/i,VGe=/^0o[0-7]+$/i,WGe=parseInt;function UGe(t){if(typeof t=="number")return t;if(LGe(t))return pG;if(hG(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=hG(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=FGe(t);var n=zGe.test(t);return n||VGe.test(t)?WGe(t.slice(2),n?2:8):BGe.test(t)?pG:+t}var Xle=UGe,GGe=_f,hO=AGe,mG=Xle,HGe="Expected a function",qGe=Math.max,KGe=Math.min;function XGe(t,e,n){var r,s,i,o,a,l,c=0,u=!1,d=!1,h=!0;if(typeof t!="function")throw new TypeError(HGe);e=mG(e)||0,GGe(n)&&(u=!!n.leading,d="maxWait"in n,i=d?qGe(mG(n.maxWait)||0,e):i,h="trailing"in n?!!n.trailing:h);function p(C){var _=r,T=s;return r=s=void 0,c=C,o=t.apply(T,_),o}function m(C){return c=C,a=setTimeout(v,e),u?p(C):o}function g(C){var _=C-l,T=C-c,k=e-_;return d?KGe(k,i-T):k}function y(C){var _=C-l,T=C-c;return l===void 0||_>=e||_<0||d&&T>=i}function v(){var C=hO();if(y(C))return x(C);a=setTimeout(v,g(C))}function x(C){return a=void 0,h&&r?p(C):(r=s=void 0,o)}function b(){a!==void 0&&clearTimeout(a),c=0,r=l=s=a=void 0}function S(){return a===void 0?o:x(hO())}function w(){var C=hO(),_=y(C);if(r=arguments,s=this,l=C,_){if(a===void 0)return m(l);if(d)return clearTimeout(a),a=setTimeout(v,e),p(l)}return a===void 0&&(a=setTimeout(v,e)),o}return w.cancel=b,w.flush=S,w}var YGe=XGe,QGe=YGe,ZGe=_f,JGe="Expected a function";function eHe(t,e,n){var r=!0,s=!0;if(typeof t!="function")throw new TypeError(JGe);return ZGe(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),QGe(t,e,{leading:r,maxWait:e,trailing:s})}var tHe=eHe;const Yle=nn(tHe);function yb(t){"@babel/helpers - typeof";return yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yb(t)}function gG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function xC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gG(Object(n),!0).forEach(function(r){nHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nHe(t,e,n){return e=rHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rHe(t){var e=sHe(t,"string");return yb(e)=="symbol"?e:e+""}function sHe(t,e){if(yb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iHe(t,e){return cHe(t)||lHe(t,e)||aHe(t,e)||oHe()}function oHe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aHe(t,e){if(t){if(typeof t=="string")return yG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yG(t,e)}}function yG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lHe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function cHe(t){if(Array.isArray(t))return t}var ro=N.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,s=r===void 0?{width:-1,height:-1}:r,i=t.width,o=i===void 0?"100%":i,a=t.height,l=a===void 0?"100%":a,c=t.minWidth,u=c===void 0?0:c,d=t.minHeight,h=t.maxHeight,p=t.children,m=t.debounce,g=m===void 0?0:m,y=t.id,v=t.className,x=t.onResize,b=t.style,S=b===void 0?{}:b,w=N.useRef(null),C=N.useRef();C.current=x,N.useImperativeHandle(e,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var _=N.useState({containerWidth:s.width,containerHeight:s.height}),T=iHe(_,2),k=T[0],$=T[1],O=N.useCallback(function(D,A){$(function(I){var R=Math.round(D),M=Math.round(A);return I.containerWidth===R&&I.containerHeight===M?I:{containerWidth:R,containerHeight:M}})},[]);N.useEffect(function(){var D=function(j){var B,W=j[0].contentRect,G=W.width,te=W.height;O(G,te),(B=C.current)===null||B===void 0||B.call(C,G,te)};g>0&&(D=Yle(D,g,{trailing:!0,leading:!1}));var A=new ResizeObserver(D),I=w.current.getBoundingClientRect(),R=I.width,M=I.height;return O(R,M),A.observe(w.current),function(){A.disconnect()}},[O,g]);var P=N.useMemo(function(){var D=k.containerWidth,A=k.containerHeight;if(D<0||A<0)return null;fl(Sh(o)||Sh(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),fl(!n||n>0,"The aspect(%s) must be greater than zero.",n);var I=Sh(o)?D:o,R=Sh(l)?A:l;n&&n>0&&(I?R=I/n:R&&(I=R*n),h&&R>h&&(R=h)),fl(I>0||R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,R,o,l,u,d,n);var M=!Array.isArray(p)&&pu(p.type).endsWith("Chart");return F.Children.map(p,function(E){return F.isValidElement(E)?N.cloneElement(E,xC({width:I,height:R},M?{style:xC({height:"100%",width:"100%",maxHeight:R,maxWidth:I},E.props.style)}:{})):E})},[n,p,l,h,d,u,k,o]);return F.createElement("div",{id:y?"".concat(y):void 0,className:_t("recharts-responsive-container",v),style:xC(xC({},S),{},{width:o,height:l,minWidth:u,minHeight:d,maxHeight:h}),ref:w},P)}),xv=function(e){return null};xv.displayName="Cell";function vb(t){"@babel/helpers - typeof";return vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vb(t)}function vG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function BD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vG(Object(n),!0).forEach(function(r){uHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uHe(t,e,n){return e=dHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dHe(t){var e=fHe(t,"string");return vb(e)=="symbol"?e:e+""}function fHe(t,e){if(vb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hm={widthCache:{},cacheCount:0},hHe=2e3,pHe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},xG="recharts_measurement_span";function mHe(t){var e=BD({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var g0=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ao.isSsr)return{width:0,height:0};var r=mHe(n),s=JSON.stringify({text:e,copyStyle:r});if(hm.widthCache[s])return hm.widthCache[s];try{var i=document.getElementById(xG);i||(i=document.createElement("span"),i.setAttribute("id",xG),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=BD(BD({},pHe),r);Object.assign(i.style,o),i.textContent="".concat(e);var a=i.getBoundingClientRect(),l={width:a.width,height:a.height};return hm.widthCache[s]=l,++hm.cacheCount>hHe&&(hm.cacheCount=0,hm.widthCache={}),l}catch{return{width:0,height:0}}},gHe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function xb(t){"@babel/helpers - typeof";return xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xb(t)}function i_(t,e){return bHe(t)||xHe(t,e)||vHe(t,e)||yHe()}function yHe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vHe(t,e){if(t){if(typeof t=="string")return bG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bG(t,e)}}function bG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xHe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function bHe(t){if(Array.isArray(t))return t}function wHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CHe(r.key),r)}}function SHe(t,e,n){return e&&wG(t.prototype,e),n&&wG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function CHe(t){var e=NHe(t,"string");return xb(e)=="symbol"?e:e+""}function NHe(t,e){if(xb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var SG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,_He=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,THe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Qle={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},kHe=Object.keys(Qle),zm="NaN";function EHe(t,e){return t*Qle[e]}var bC=function(){function t(e,n){wHe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!_He.test(n)&&(this.num=NaN,this.unit=""),kHe.includes(n)&&(this.num=EHe(e,n),this.unit="px")}return SHe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,s=(r=THe.exec(n))!==null&&r!==void 0?r:[],i=i_(s,3),o=i[1],a=i[2];return new t(parseFloat(o),a??"")}}])}();function Zle(t){if(t.includes(zm))return zm;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=SG.exec(e))!==null&&n!==void 0?n:[],s=i_(r,4),i=s[1],o=s[2],a=s[3],l=bC.parse(i??""),c=bC.parse(a??""),u=o==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return zm;e=e.replace(SG,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,h=(d=CG.exec(e))!==null&&d!==void 0?d:[],p=i_(h,4),m=p[1],g=p[2],y=p[3],v=bC.parse(m??""),x=bC.parse(y??""),b=g==="+"?v.add(x):v.subtract(x);if(b.isNaN())return zm;e=e.replace(CG,b.toString())}return e}var NG=/\(([^()]*)\)/;function $He(t){for(var e=t;e.includes("(");){var n=NG.exec(e),r=i_(n,2),s=r[1];e=e.replace(NG,Zle(s))}return e}function AHe(t){var e=t.replace(/\s+/g,"");return e=$He(e),e=Zle(e),e}function IHe(t){try{return AHe(t)}catch{return zm}}function pO(t){var e=IHe(t.slice(5,-1));return e===zm?"":e}var OHe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],PHe=["dx","dy","angle","className","breakAll"];function zD(){return zD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zD.apply(this,arguments)}function _G(t,e){if(t==null)return{};var n=RHe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function RHe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function TG(t,e){return FHe(t)||MHe(t,e)||jHe(t,e)||DHe()}function DHe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jHe(t,e){if(t){if(typeof t=="string")return kG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kG(t,e)}}function kG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function MHe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function FHe(t){if(Array.isArray(t))return t}var Jle=/[ \f\n\r\t\v\u2028\u2029]+/,ece=function(e){var n=e.children,r=e.breakAll,s=e.style;try{var i=[];ht(n)||(r?i=n.toString().split(""):i=n.toString().split(Jle));var o=i.map(function(l){return{word:l,width:g0(l,s).width}}),a=r?0:g0(" ",s).width;return{wordsWithComputedWidth:o,spaceWidth:a}}catch{return null}},LHe=function(e,n,r,s,i){var o=e.maxLines,a=e.children,l=e.style,c=e.breakAll,u=ke(o),d=a,h=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I.reduce(function(R,M){var E=M.word,j=M.width,B=R[R.length-1];if(B&&(s==null||i||B.width+j+r<Number(s)))B.words.push(E),B.width+=j+r;else{var W={words:[E],width:j};R.push(W)}return R},[])},p=h(n),m=function(I){return I.reduce(function(R,M){return R.width>M.width?R:M})};if(!u)return p;for(var g="…",y=function(I){var R=d.slice(0,I),M=ece({breakAll:c,style:l,children:R+g}).wordsWithComputedWidth,E=h(M),j=E.length>o||m(E).width>Number(s);return[j,E]},v=0,x=d.length-1,b=0,S;v<=x&&b<=d.length-1;){var w=Math.floor((v+x)/2),C=w-1,_=y(C),T=TG(_,2),k=T[0],$=T[1],O=y(w),P=TG(O,1),D=P[0];if(!k&&!D&&(v=w+1),k&&D&&(x=w-1),!k&&D){S=$;break}b++}return S||p},EG=function(e){var n=ht(e)?[]:e.toString().split(Jle);return[{words:n}]},BHe=function(e){var n=e.width,r=e.scaleToFit,s=e.children,i=e.style,o=e.breakAll,a=e.maxLines;if((n||r)&&!Ao.isSsr){var l,c,u=ece({breakAll:o,children:s,style:i});if(u){var d=u.wordsWithComputedWidth,h=u.spaceWidth;l=d,c=h}else return EG(s);return LHe({breakAll:o,children:s,maxLines:a,style:i},l,c,n,r)}return EG(s)},$G="#808080",cp=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,i=s===void 0?0:s,o=e.lineHeight,a=o===void 0?"1em":o,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,d=u===void 0?!1:u,h=e.textAnchor,p=h===void 0?"start":h,m=e.verticalAnchor,g=m===void 0?"end":m,y=e.fill,v=y===void 0?$G:y,x=_G(e,OHe),b=N.useMemo(function(){return BHe({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:d,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,d,x.style,x.width]),S=x.dx,w=x.dy,C=x.angle,_=x.className,T=x.breakAll,k=_G(x,PHe);if(!is(r)||!is(i))return null;var $=r+(ke(S)?S:0),O=i+(ke(w)?w:0),P;switch(g){case"start":P=pO("calc(".concat(c,")"));break;case"middle":P=pO("calc(".concat((b.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:P=pO("calc(".concat(b.length-1," * -").concat(a,")"));break}var D=[];if(d){var A=b[0].width,I=x.width;D.push("scale(".concat((ke(I)?I/A:1)/A,")"))}return C&&D.push("rotate(".concat(C,", ").concat($,", ").concat(O,")")),D.length&&(k.transform=D.join(" ")),F.createElement("text",zD({},He(k,!0),{x:$,y:O,className:_t("recharts-text",_),textAnchor:p,fill:v.includes("url")?$G:v}),b.map(function(R,M){var E=R.words.join(T?"":" ");return F.createElement("tspan",{x:$,dy:M===0?P:a,key:"".concat(E,"-").concat(M)},E)}))};function Ud(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function zHe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function W3(t){let e,n,r;t.length!==2?(e=Ud,n=(a,l)=>Ud(t(a),l),r=(a,l)=>t(a)-l):(e=t===Ud||t===zHe?t:VHe,n=t,r=t);function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function o(a,l,c=0,u=a.length){const d=s(a,l,c,u-1);return d>c&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:s,center:o,right:i}}function VHe(){return 0}function tce(t){return t===null?NaN:+t}function*WHe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const UHe=W3(Ud),H1=UHe.right;W3(tce).center;class AG extends Map{constructor(e,n=qHe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(IG(this,e))}has(e){return super.has(IG(this,e))}set(e,n){return super.set(GHe(this,e),n)}delete(e){return super.delete(HHe(this,e))}}function IG({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function GHe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function HHe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function qHe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function KHe(t=Ud){if(t===Ud)return nce;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function nce(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const XHe=Math.sqrt(50),YHe=Math.sqrt(10),QHe=Math.sqrt(2);function o_(t,e,n){const r=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(r)),i=r/Math.pow(10,s),o=i>=XHe?10:i>=YHe?5:i>=QHe?2:1;let a,l,c;return s<0?(c=Math.pow(10,-s)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,s)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?o_(t,e,n*2):[a,l,c]}function VD(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[s,i,o]=r?o_(e,t,n):o_(t,e,n);if(!(i>=s))return[];const a=i-s+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(i-c)/-o;else for(let c=0;c<a;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(s+c)/-o;else for(let c=0;c<a;++c)l[c]=(s+c)*o;return l}function WD(t,e,n){return e=+e,t=+t,n=+n,o_(t,e,n)[2]}function UD(t,e,n){e=+e,t=+t,n=+n;const r=e<t,s=r?WD(e,t,n):WD(t,e,n);return(r?-1:1)*(s<0?1/-s:s)}function OG(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function PG(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function rce(t,e,n=0,r=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(s=s===void 0?nce:KHe(s);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),d=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),p=Math.max(n,Math.floor(e-c*d/l+h)),m=Math.min(r,Math.floor(e+(l-c)*d/l+h));rce(t,e,p,m,s)}const i=t[e];let o=n,a=r;for(vx(t,n,e),s(t[r],i)>0&&vx(t,n,r);o<a;){for(vx(t,o,a),++o,--a;s(t[o],i)<0;)++o;for(;s(t[a],i)>0;)--a}s(t[n],i)===0?vx(t,n,a):(++a,vx(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function vx(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function ZHe(t,e,n){if(t=Float64Array.from(WHe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return PG(t);if(e>=1)return OG(t);var r,s=(r-1)*e,i=Math.floor(s),o=OG(rce(t,i).subarray(0,i+1)),a=PG(t.subarray(i+1));return o+(a-o)*(s-i)}}function JHe(t,e,n=tce){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,s=(r-1)*e,i=Math.floor(s),o=+n(t[i],i,t),a=+n(t[i+1],i+1,t);return o+(a-o)*(s-i)}}function e9e(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(s);++r<s;)i[r]=t+r*n;return i}function Da(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Uu(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const GD=Symbol("implicit");function U3(){var t=new AG,e=[],n=[],r=GD;function s(i){let o=t.get(i);if(o===void 0){if(r!==GD)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return s.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new AG;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return U3(e,n).unknown(r)},Da.apply(s,arguments),s}function bb(){var t=U3().unknown(void 0),e=t.domain,n=t.range,r=0,s=1,i,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var h=e().length,p=s<r,m=p?s:r,g=p?r:s;i=(g-m)/Math.max(1,h-l+c*2),a&&(i=Math.floor(i)),m+=(g-m-i*(h-l))*u,o=i*(1-l),a&&(m=Math.round(m),o=Math.round(o));var y=e9e(h).map(function(v){return m+i*v});return n(p?y.reverse():y)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([r,s]=h,r=+r,s=+s,d()):[r,s]},t.rangeRound=function(h){return[r,s]=h,r=+r,s=+s,a=!0,d()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(h){return arguments.length?(a=!!h,d()):a},t.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),d()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},t.paddingOuter=function(h){return arguments.length?(c=+h,d()):c},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),d()):u},t.copy=function(){return bb(e(),[r,s]).round(a).paddingInner(l).paddingOuter(c).align(u)},Da.apply(d(),arguments)}function sce(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return sce(e())},t}function y0(){return sce(bb.apply(null,arguments).paddingInner(1))}function G3(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ice(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function q1(){}var wb=.7,a_=1/wb,hg="\\s*([+-]?\\d+)\\s*",Sb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",t9e=/^#([0-9a-f]{3,8})$/,n9e=new RegExp(`^rgb\\(${hg},${hg},${hg}\\)$`),r9e=new RegExp(`^rgb\\(${dc},${dc},${dc}\\)$`),s9e=new RegExp(`^rgba\\(${hg},${hg},${hg},${Sb}\\)$`),i9e=new RegExp(`^rgba\\(${dc},${dc},${dc},${Sb}\\)$`),o9e=new RegExp(`^hsl\\(${Sb},${dc},${dc}\\)$`),a9e=new RegExp(`^hsla\\(${Sb},${dc},${dc},${Sb}\\)$`),RG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};G3(q1,Cb,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:DG,formatHex:DG,formatHex8:l9e,formatHsl:c9e,formatRgb:jG,toString:jG});function DG(){return this.rgb().formatHex()}function l9e(){return this.rgb().formatHex8()}function c9e(){return oce(this).formatHsl()}function jG(){return this.rgb().formatRgb()}function Cb(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=t9e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?MG(e):n===3?new Xi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?wC(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?wC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=n9e.exec(t))?new Xi(e[1],e[2],e[3],1):(e=r9e.exec(t))?new Xi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=s9e.exec(t))?wC(e[1],e[2],e[3],e[4]):(e=i9e.exec(t))?wC(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=o9e.exec(t))?BG(e[1],e[2]/100,e[3]/100,1):(e=a9e.exec(t))?BG(e[1],e[2]/100,e[3]/100,e[4]):RG.hasOwnProperty(t)?MG(RG[t]):t==="transparent"?new Xi(NaN,NaN,NaN,0):null}function MG(t){return new Xi(t>>16&255,t>>8&255,t&255,1)}function wC(t,e,n,r){return r<=0&&(t=e=n=NaN),new Xi(t,e,n,r)}function u9e(t){return t instanceof q1||(t=Cb(t)),t?(t=t.rgb(),new Xi(t.r,t.g,t.b,t.opacity)):new Xi}function HD(t,e,n,r){return arguments.length===1?u9e(t):new Xi(t,e,n,r??1)}function Xi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}G3(Xi,HD,ice(q1,{brighter(t){return t=t==null?a_:Math.pow(a_,t),new Xi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?wb:Math.pow(wb,t),new Xi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Xi(Wh(this.r),Wh(this.g),Wh(this.b),l_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:FG,formatHex:FG,formatHex8:d9e,formatRgb:LG,toString:LG}));function FG(){return`#${Ch(this.r)}${Ch(this.g)}${Ch(this.b)}`}function d9e(){return`#${Ch(this.r)}${Ch(this.g)}${Ch(this.b)}${Ch((isNaN(this.opacity)?1:this.opacity)*255)}`}function LG(){const t=l_(this.opacity);return`${t===1?"rgb(":"rgba("}${Wh(this.r)}, ${Wh(this.g)}, ${Wh(this.b)}${t===1?")":`, ${t})`}`}function l_(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Wh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ch(t){return t=Wh(t),(t<16?"0":"")+t.toString(16)}function BG(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new sl(t,e,n,r)}function oce(t){if(t instanceof sl)return new sl(t.h,t.s,t.l,t.opacity);if(t instanceof q1||(t=Cb(t)),!t)return new sl;if(t instanceof sl)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),i=Math.max(e,n,r),o=NaN,a=i-s,l=(i+s)/2;return a?(e===i?o=(n-r)/a+(n<r)*6:n===i?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?i+s:2-i-s,o*=60):a=l>0&&l<1?0:o,new sl(o,a,l,t.opacity)}function f9e(t,e,n,r){return arguments.length===1?oce(t):new sl(t,e,n,r??1)}function sl(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}G3(sl,f9e,ice(q1,{brighter(t){return t=t==null?a_:Math.pow(a_,t),new sl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?wb:Math.pow(wb,t),new sl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Xi(mO(t>=240?t-240:t+120,s,r),mO(t,s,r),mO(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new sl(zG(this.h),SC(this.s),SC(this.l),l_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=l_(this.opacity);return`${t===1?"hsl(":"hsla("}${zG(this.h)}, ${SC(this.s)*100}%, ${SC(this.l)*100}%${t===1?")":`, ${t})`}`}}));function zG(t){return t=(t||0)%360,t<0?t+360:t}function SC(t){return Math.max(0,Math.min(1,t||0))}function mO(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const H3=t=>()=>t;function h9e(t,e){return function(n){return t+n*e}}function p9e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function m9e(t){return(t=+t)==1?ace:function(e,n){return n-e?p9e(e,n,t):H3(isNaN(e)?n:e)}}function ace(t,e){var n=e-t;return n?h9e(t,n):H3(isNaN(t)?e:t)}const VG=function t(e){var n=m9e(e);function r(s,i){var o=n((s=HD(s)).r,(i=HD(i)).r),a=n(s.g,i.g),l=n(s.b,i.b),c=ace(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=a(u),s.b=l(u),s.opacity=c(u),s+""}}return r.gamma=t,r}(1);function g9e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(i){for(s=0;s<n;++s)r[s]=t[s]*(1-i)+e[s]*i;return r}}function y9e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function v9e(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)s[o]=bv(t[o],e[o]);for(;o<n;++o)i[o]=e[o];return function(a){for(o=0;o<r;++o)i[o]=s[o](a);return i}}function x9e(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function c_(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function b9e(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=bv(t[s],e[s]):r[s]=e[s];return function(i){for(s in n)r[s]=n[s](i);return r}}var qD=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gO=new RegExp(qD.source,"g");function w9e(t){return function(){return t}}function S9e(t){return function(e){return t(e)+""}}function C9e(t,e){var n=qD.lastIndex=gO.lastIndex=0,r,s,i,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=qD.exec(t))&&(s=gO.exec(e));)(i=s.index)>n&&(i=e.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(r=r[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:c_(r,s)})),n=gO.lastIndex;return n<e.length&&(i=e.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?S9e(l[0].x):w9e(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function bv(t,e){var n=typeof e,r;return e==null||n==="boolean"?H3(e):(n==="number"?c_:n==="string"?(r=Cb(e))?(e=r,VG):C9e:e instanceof Cb?VG:e instanceof Date?x9e:y9e(e)?g9e:Array.isArray(e)?v9e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?b9e:c_)(t,e)}function q3(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function N9e(t,e){e===void 0&&(e=t,t=bv);for(var n=0,r=e.length-1,s=e[0],i=new Array(r<0?0:r);n<r;)i[n]=t(s,s=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return i[a](o-a)}}function _9e(t){return function(){return t}}function u_(t){return+t}var WG=[0,1];function ki(t){return t}function KD(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:_9e(isNaN(e)?NaN:.5)}function T9e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function k9e(t,e,n){var r=t[0],s=t[1],i=e[0],o=e[1];return s<r?(r=KD(s,r),i=n(o,i)):(r=KD(r,s),i=n(i,o)),function(a){return i(r(a))}}function E9e(t,e,n){var r=Math.min(t.length,e.length)-1,s=new Array(r),i=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)s[o]=KD(t[o],t[o+1]),i[o]=n(e[o],e[o+1]);return function(a){var l=H1(t,a,1,r)-1;return i[l](s[l](a))}}function K1(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function oE(){var t=WG,e=WG,n=bv,r,s,i,o=ki,a,l,c;function u(){var h=Math.min(t.length,e.length);return o!==ki&&(o=T9e(t[0],t[h-1])),a=h>2?E9e:k9e,l=c=null,d}function d(h){return h==null||isNaN(h=+h)?i:(l||(l=a(t.map(r),e,n)))(r(o(h)))}return d.invert=function(h){return o(s((c||(c=a(e,t.map(r),c_)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,u_),u()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),n=q3,u()},d.clamp=function(h){return arguments.length?(o=h?!0:ki,u()):o!==ki},d.interpolate=function(h){return arguments.length?(n=h,u()):n},d.unknown=function(h){return arguments.length?(i=h,d):i},function(h,p){return r=h,s=p,u()}}function K3(){return oE()(ki,ki)}function $9e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function d_(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function sy(t){return t=d_(Math.abs(t)),t?t[1]:NaN}function A9e(t,e){return function(n,r){for(var s=n.length,i=[],o=0,a=t[0],l=0;s>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),i.push(n.substring(s-=a,s+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return i.reverse().join(e)}}function I9e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var O9e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Nb(t){if(!(e=O9e.exec(t)))throw new Error("invalid format: "+t);var e;return new X3({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Nb.prototype=X3.prototype;function X3(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}X3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function P9e(t){e:for(var e=t.length,n=1,r=-1,s;n<e;++n)switch(t[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var lce;function R9e(t,e){var n=d_(t,e);if(!n)return t+"";var r=n[0],s=n[1],i=s-(lce=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+d_(t,Math.max(0,e+i-1))[0]}function UG(t,e){var n=d_(t,e);if(!n)return t+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const GG={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:$9e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>UG(t*100,e),r:UG,s:R9e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function HG(t){return t}var qG=Array.prototype.map,KG=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function D9e(t){var e=t.grouping===void 0||t.thousands===void 0?HG:A9e(qG.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?HG:I9e(qG.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Nb(d);var h=d.fill,p=d.align,m=d.sign,g=d.symbol,y=d.zero,v=d.width,x=d.comma,b=d.precision,S=d.trim,w=d.type;w==="n"?(x=!0,w="g"):GG[w]||(b===void 0&&(b=12),S=!0,w="g"),(y||h==="0"&&p==="=")&&(y=!0,h="0",p="=");var C=g==="$"?n:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",_=g==="$"?r:/[%p]/.test(w)?o:"",T=GG[w],k=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function $(O){var P=C,D=_,A,I,R;if(w==="c")D=T(O)+D,O="";else{O=+O;var M=O<0||1/O<0;if(O=isNaN(O)?l:T(Math.abs(O),b),S&&(O=P9e(O)),M&&+O==0&&m!=="+"&&(M=!1),P=(M?m==="("?m:a:m==="-"||m==="("?"":m)+P,D=(w==="s"?KG[8+lce/3]:"")+D+(M&&m==="("?")":""),k){for(A=-1,I=O.length;++A<I;)if(R=O.charCodeAt(A),48>R||R>57){D=(R===46?s+O.slice(A+1):O.slice(A))+D,O=O.slice(0,A);break}}}x&&!y&&(O=e(O,1/0));var E=P.length+O.length+D.length,j=E<v?new Array(v-E+1).join(h):"";switch(x&&y&&(O=e(j+O,j.length?v-D.length:1/0),j=""),p){case"<":O=P+O+D+j;break;case"=":O=P+j+O+D;break;case"^":O=j.slice(0,E=j.length>>1)+P+O+D+j.slice(E);break;default:O=j+P+O+D;break}return i(O)}return $.toString=function(){return d+""},$}function u(d,h){var p=c((d=Nb(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(sy(h)/3)))*3,g=Math.pow(10,-m),y=KG[8+m/3];return function(v){return p(g*v)+y}}return{format:c,formatPrefix:u}}var CC,Y3,cce;j9e({thousands:",",grouping:[3],currency:["$",""]});function j9e(t){return CC=D9e(t),Y3=CC.format,cce=CC.formatPrefix,CC}function M9e(t){return Math.max(0,-sy(Math.abs(t)))}function F9e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(sy(e)/3)))*3-sy(Math.abs(t)))}function L9e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,sy(e)-sy(t))+1}function uce(t,e,n,r){var s=UD(t,e,n),i;switch(r=Nb(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=F9e(s,o))&&(r.precision=i),cce(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=L9e(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=M9e(s))&&(r.precision=i-(r.type==="%")*2);break}}return Y3(r)}function kf(t){var e=t.domain;return t.ticks=function(n){var r=e();return VD(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var s=e();return uce(s[0],s[s.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),s=0,i=r.length-1,o=r[s],a=r[i],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=s,s=i,i=c);u-- >0;){if(c=WD(o,a,n),c===l)return r[s]=o,r[i]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function f_(){var t=K3();return t.copy=function(){return K1(t,f_())},Da.apply(t,arguments),kf(t)}function dce(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,u_),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return dce(t).unknown(e)},t=arguments.length?Array.from(t,u_):[0,1],kf(n)}function fce(t,e){t=t.slice();var n=0,r=t.length-1,s=t[n],i=t[r],o;return i<s&&(o=n,n=r,r=o,o=s,s=i,i=o),t[n]=e.floor(s),t[r]=e.ceil(i),t}function XG(t){return Math.log(t)}function YG(t){return Math.exp(t)}function B9e(t){return-Math.log(-t)}function z9e(t){return-Math.exp(-t)}function V9e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function W9e(t){return t===10?V9e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function U9e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function QG(t){return(e,n)=>-t(-e,n)}function Q3(t){const e=t(XG,YG),n=e.domain;let r=10,s,i;function o(){return s=U9e(r),i=W9e(r),n()[0]<0?(s=QG(s),i=QG(i),t(B9e,z9e)):t(XG,YG),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let h=s(c),p=s(u),m,g;const y=a==null?10:+a;let v=[];if(!(r%1)&&p-h<y){if(h=Math.floor(h),p=Math.ceil(p),c>0){for(;h<=p;++h)for(m=1;m<r;++m)if(g=h<0?m/i(-h):m*i(h),!(g<c)){if(g>u)break;v.push(g)}}else for(;h<=p;++h)for(m=r-1;m>=1;--m)if(g=h>0?m/i(-h):m*i(h),!(g<c)){if(g>u)break;v.push(g)}v.length*2<y&&(v=VD(c,u,y))}else v=VD(h,p,Math.min(p-h,y)).map(i);return d?v.reverse():v},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Nb(l)).precision==null&&(l.trim=!0),l=Y3(l)),a===1/0)return l;const c=Math.max(1,r*a/e.ticks().length);return u=>{let d=u/i(Math.round(s(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},e.nice=()=>n(fce(n(),{floor:a=>i(Math.floor(s(a))),ceil:a=>i(Math.ceil(s(a)))})),e}function hce(){const t=Q3(oE()).domain([1,10]);return t.copy=()=>K1(t,hce()).base(t.base()),Da.apply(t,arguments),t}function ZG(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function JG(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Z3(t){var e=1,n=t(ZG(e),JG(e));return n.constant=function(r){return arguments.length?t(ZG(e=+r),JG(e)):e},kf(n)}function pce(){var t=Z3(oE());return t.copy=function(){return K1(t,pce()).constant(t.constant())},Da.apply(t,arguments)}function eH(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function G9e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function H9e(t){return t<0?-t*t:t*t}function J3(t){var e=t(ki,ki),n=1;function r(){return n===1?t(ki,ki):n===.5?t(G9e,H9e):t(eH(n),eH(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,r()):n},kf(e)}function e4(){var t=J3(oE());return t.copy=function(){return K1(t,e4()).exponent(t.exponent())},Da.apply(t,arguments),t}function q9e(){return e4.apply(null,arguments).exponent(.5)}function tH(t){return Math.sign(t)*t*t}function K9e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function mce(){var t=K3(),e=[0,1],n=!1,r;function s(i){var o=K9e(t(i));return isNaN(o)?r:n?Math.round(o):o}return s.invert=function(i){return t.invert(tH(i))},s.domain=function(i){return arguments.length?(t.domain(i),s):t.domain()},s.range=function(i){return arguments.length?(t.range((e=Array.from(i,u_)).map(tH)),s):e.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(t.clamp(i),s):t.clamp()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return mce(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Da.apply(s,arguments),kf(s)}function gce(){var t=[],e=[],n=[],r;function s(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=JHe(t,o/a);return i}function i(o){return o==null||isNaN(o=+o)?r:e[H1(n,o)]}return i.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Ud),s()},i.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return gce().domain(t).range(e).unknown(r)},Da.apply(i,arguments)}function yce(){var t=0,e=1,n=1,r=[.5],s=[0,1],i;function o(l){return l!=null&&l<=l?s[H1(r,l,0,n)]:i}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(s=Array.from(l)).length-1,a()):s.slice()},o.invertExtent=function(l){var c=s.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return yce().domain([t,e]).range(s).unknown(i)},Da.apply(kf(o),arguments)}function vce(){var t=[.5],e=[0,1],n,r=1;function s(i){return i!=null&&i<=i?e[H1(t,i,0,r)]:n}return s.domain=function(i){return arguments.length?(t=Array.from(i),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(i){return arguments.length?(e=Array.from(i),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return vce().domain(t).range(e).unknown(n)},Da.apply(s,arguments)}const yO=new Date,vO=new Date;function us(t,e,n,r){function s(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(t(i=new Date(+i)),i),s.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),s.round=i=>{const o=s(i),a=s.ceil(i);return i-o<a-i?o:a},s.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,a)=>{const l=[];if(i=s.ceil(i),a=a==null?1:Math.floor(a),!(i<o)||!(a>0))return l;let c;do l.push(c=new Date(+i)),e(i,a),t(i);while(c<i&&i<o);return l},s.filter=i=>us(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!i(o););else for(;--a>=0;)for(;e(o,1),!i(o););}),n&&(s.count=(i,o)=>(yO.setTime(+i),vO.setTime(+o),t(yO),t(vO),Math.floor(n(yO,vO))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(r?o=>r(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const h_=us(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);h_.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?us(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):h_);h_.range;const au=1e3,ha=au*60,lu=ha*60,Au=lu*24,t4=Au*7,nH=Au*30,xO=Au*365,Nh=us(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*au)},(t,e)=>(e-t)/au,t=>t.getUTCSeconds());Nh.range;const n4=us(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*au)},(t,e)=>{t.setTime(+t+e*ha)},(t,e)=>(e-t)/ha,t=>t.getMinutes());n4.range;const r4=us(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ha)},(t,e)=>(e-t)/ha,t=>t.getUTCMinutes());r4.range;const s4=us(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*au-t.getMinutes()*ha)},(t,e)=>{t.setTime(+t+e*lu)},(t,e)=>(e-t)/lu,t=>t.getHours());s4.range;const i4=us(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*lu)},(t,e)=>(e-t)/lu,t=>t.getUTCHours());i4.range;const X1=us(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ha)/Au,t=>t.getDate()-1);X1.range;const aE=us(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Au,t=>t.getUTCDate()-1);aE.range;const xce=us(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Au,t=>Math.floor(t/Au));xce.range;function Fp(t){return us(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ha)/t4)}const lE=Fp(0),p_=Fp(1),X9e=Fp(2),Y9e=Fp(3),iy=Fp(4),Q9e=Fp(5),Z9e=Fp(6);lE.range;p_.range;X9e.range;Y9e.range;iy.range;Q9e.range;Z9e.range;function Lp(t){return us(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/t4)}const cE=Lp(0),m_=Lp(1),J9e=Lp(2),e7e=Lp(3),oy=Lp(4),t7e=Lp(5),n7e=Lp(6);cE.range;m_.range;J9e.range;e7e.range;oy.range;t7e.range;n7e.range;const o4=us(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());o4.range;const a4=us(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());a4.range;const Iu=us(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Iu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:us(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Iu.range;const Ou=us(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ou.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:us(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ou.range;function bce(t,e,n,r,s,i){const o=[[Nh,1,au],[Nh,5,5*au],[Nh,15,15*au],[Nh,30,30*au],[i,1,ha],[i,5,5*ha],[i,15,15*ha],[i,30,30*ha],[s,1,lu],[s,3,3*lu],[s,6,6*lu],[s,12,12*lu],[r,1,Au],[r,2,2*Au],[n,1,t4],[e,1,nH],[e,3,3*nH],[t,1,xO]];function a(c,u,d){const h=u<c;h&&([c,u]=[u,c]);const p=d&&typeof d.range=="function"?d:l(c,u,d),m=p?p.range(c,+u+1):[];return h?m.reverse():m}function l(c,u,d){const h=Math.abs(u-c)/d,p=W3(([,,y])=>y).right(o,h);if(p===o.length)return t.every(UD(c/xO,u/xO,d));if(p===0)return h_.every(Math.max(UD(c,u,d),1));const[m,g]=o[h/o[p-1][2]<o[p][2]/h?p-1:p];return m.every(g)}return[a,l]}const[r7e,s7e]=bce(Ou,a4,cE,xce,i4,r4),[i7e,o7e]=bce(Iu,o4,lE,X1,s4,n4);function bO(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function wO(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function xx(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function a7e(t){var e=t.dateTime,n=t.date,r=t.time,s=t.periods,i=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=bx(s),u=wx(s),d=bx(i),h=wx(i),p=bx(o),m=wx(o),g=bx(a),y=wx(a),v=bx(l),x=wx(l),b={a:M,A:E,b:j,B,c:null,d:lH,e:lH,f:A7e,g:B7e,G:V7e,H:k7e,I:E7e,j:$7e,L:wce,m:I7e,M:O7e,p:W,q:G,Q:dH,s:fH,S:P7e,u:R7e,U:D7e,V:j7e,w:M7e,W:F7e,x:null,X:null,y:L7e,Y:z7e,Z:W7e,"%":uH},S={a:te,A:ne,b:ue,B:ge,c:null,d:cH,e:cH,f:q7e,g:rqe,G:iqe,H:U7e,I:G7e,j:H7e,L:Cce,m:K7e,M:X7e,p:de,q:we,Q:dH,s:fH,S:Y7e,u:Q7e,U:Z7e,V:J7e,w:eqe,W:tqe,x:null,X:null,y:nqe,Y:sqe,Z:oqe,"%":uH},w={a:$,A:O,b:P,B:D,c:A,d:oH,e:oH,f:C7e,g:iH,G:sH,H:aH,I:aH,j:x7e,L:S7e,m:v7e,M:b7e,p:k,q:y7e,Q:_7e,s:T7e,S:w7e,u:f7e,U:h7e,V:p7e,w:d7e,W:m7e,x:I,X:R,y:iH,Y:sH,Z:g7e,"%":N7e};b.x=C(n,b),b.X=C(r,b),b.c=C(e,b),S.x=C(n,S),S.X=C(r,S),S.c=C(e,S);function C(se,he){return function(me){var Y=[],ye=-1,Ae=0,Re=se.length,ze,rt,z;for(me instanceof Date||(me=new Date(+me));++ye<Re;)se.charCodeAt(ye)===37&&(Y.push(se.slice(Ae,ye)),(rt=rH[ze=se.charAt(++ye)])!=null?ze=se.charAt(++ye):rt=ze==="e"?" ":"0",(z=he[ze])&&(ze=z(me,rt)),Y.push(ze),Ae=ye+1);return Y.push(se.slice(Ae,ye)),Y.join("")}}function _(se,he){return function(me){var Y=xx(1900,void 0,1),ye=T(Y,se,me+="",0),Ae,Re;if(ye!=me.length)return null;if("Q"in Y)return new Date(Y.Q);if("s"in Y)return new Date(Y.s*1e3+("L"in Y?Y.L:0));if(he&&!("Z"in Y)&&(Y.Z=0),"p"in Y&&(Y.H=Y.H%12+Y.p*12),Y.m===void 0&&(Y.m="q"in Y?Y.q:0),"V"in Y){if(Y.V<1||Y.V>53)return null;"w"in Y||(Y.w=1),"Z"in Y?(Ae=wO(xx(Y.y,0,1)),Re=Ae.getUTCDay(),Ae=Re>4||Re===0?m_.ceil(Ae):m_(Ae),Ae=aE.offset(Ae,(Y.V-1)*7),Y.y=Ae.getUTCFullYear(),Y.m=Ae.getUTCMonth(),Y.d=Ae.getUTCDate()+(Y.w+6)%7):(Ae=bO(xx(Y.y,0,1)),Re=Ae.getDay(),Ae=Re>4||Re===0?p_.ceil(Ae):p_(Ae),Ae=X1.offset(Ae,(Y.V-1)*7),Y.y=Ae.getFullYear(),Y.m=Ae.getMonth(),Y.d=Ae.getDate()+(Y.w+6)%7)}else("W"in Y||"U"in Y)&&("w"in Y||(Y.w="u"in Y?Y.u%7:"W"in Y?1:0),Re="Z"in Y?wO(xx(Y.y,0,1)).getUTCDay():bO(xx(Y.y,0,1)).getDay(),Y.m=0,Y.d="W"in Y?(Y.w+6)%7+Y.W*7-(Re+5)%7:Y.w+Y.U*7-(Re+6)%7);return"Z"in Y?(Y.H+=Y.Z/100|0,Y.M+=Y.Z%100,wO(Y)):bO(Y)}}function T(se,he,me,Y){for(var ye=0,Ae=he.length,Re=me.length,ze,rt;ye<Ae;){if(Y>=Re)return-1;if(ze=he.charCodeAt(ye++),ze===37){if(ze=he.charAt(ye++),rt=w[ze in rH?he.charAt(ye++):ze],!rt||(Y=rt(se,me,Y))<0)return-1}else if(ze!=me.charCodeAt(Y++))return-1}return Y}function k(se,he,me){var Y=c.exec(he.slice(me));return Y?(se.p=u.get(Y[0].toLowerCase()),me+Y[0].length):-1}function $(se,he,me){var Y=p.exec(he.slice(me));return Y?(se.w=m.get(Y[0].toLowerCase()),me+Y[0].length):-1}function O(se,he,me){var Y=d.exec(he.slice(me));return Y?(se.w=h.get(Y[0].toLowerCase()),me+Y[0].length):-1}function P(se,he,me){var Y=v.exec(he.slice(me));return Y?(se.m=x.get(Y[0].toLowerCase()),me+Y[0].length):-1}function D(se,he,me){var Y=g.exec(he.slice(me));return Y?(se.m=y.get(Y[0].toLowerCase()),me+Y[0].length):-1}function A(se,he,me){return T(se,e,he,me)}function I(se,he,me){return T(se,n,he,me)}function R(se,he,me){return T(se,r,he,me)}function M(se){return o[se.getDay()]}function E(se){return i[se.getDay()]}function j(se){return l[se.getMonth()]}function B(se){return a[se.getMonth()]}function W(se){return s[+(se.getHours()>=12)]}function G(se){return 1+~~(se.getMonth()/3)}function te(se){return o[se.getUTCDay()]}function ne(se){return i[se.getUTCDay()]}function ue(se){return l[se.getUTCMonth()]}function ge(se){return a[se.getUTCMonth()]}function de(se){return s[+(se.getUTCHours()>=12)]}function we(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var he=C(se+="",b);return he.toString=function(){return se},he},parse:function(se){var he=_(se+="",!1);return he.toString=function(){return se},he},utcFormat:function(se){var he=C(se+="",S);return he.toString=function(){return se},he},utcParse:function(se){var he=_(se+="",!0);return he.toString=function(){return se},he}}}var rH={"-":"",_:" ",0:"0"},bs=/^\s*\d+/,l7e=/^%/,c7e=/[\\^$*+?|[\]().{}]/g;function ln(t,e,n){var r=t<0?"-":"",s=(r?-t:t)+"",i=s.length;return r+(i<n?new Array(n-i+1).join(e)+s:s)}function u7e(t){return t.replace(c7e,"\\$&")}function bx(t){return new RegExp("^(?:"+t.map(u7e).join("|")+")","i")}function wx(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function d7e(t,e,n){var r=bs.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function f7e(t,e,n){var r=bs.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function h7e(t,e,n){var r=bs.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function p7e(t,e,n){var r=bs.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function m7e(t,e,n){var r=bs.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function sH(t,e,n){var r=bs.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function iH(t,e,n){var r=bs.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function g7e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function y7e(t,e,n){var r=bs.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function v7e(t,e,n){var r=bs.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function oH(t,e,n){var r=bs.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function x7e(t,e,n){var r=bs.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function aH(t,e,n){var r=bs.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function b7e(t,e,n){var r=bs.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function w7e(t,e,n){var r=bs.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function S7e(t,e,n){var r=bs.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function C7e(t,e,n){var r=bs.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function N7e(t,e,n){var r=l7e.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function _7e(t,e,n){var r=bs.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function T7e(t,e,n){var r=bs.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function lH(t,e){return ln(t.getDate(),e,2)}function k7e(t,e){return ln(t.getHours(),e,2)}function E7e(t,e){return ln(t.getHours()%12||12,e,2)}function $7e(t,e){return ln(1+X1.count(Iu(t),t),e,3)}function wce(t,e){return ln(t.getMilliseconds(),e,3)}function A7e(t,e){return wce(t,e)+"000"}function I7e(t,e){return ln(t.getMonth()+1,e,2)}function O7e(t,e){return ln(t.getMinutes(),e,2)}function P7e(t,e){return ln(t.getSeconds(),e,2)}function R7e(t){var e=t.getDay();return e===0?7:e}function D7e(t,e){return ln(lE.count(Iu(t)-1,t),e,2)}function Sce(t){var e=t.getDay();return e>=4||e===0?iy(t):iy.ceil(t)}function j7e(t,e){return t=Sce(t),ln(iy.count(Iu(t),t)+(Iu(t).getDay()===4),e,2)}function M7e(t){return t.getDay()}function F7e(t,e){return ln(p_.count(Iu(t)-1,t),e,2)}function L7e(t,e){return ln(t.getFullYear()%100,e,2)}function B7e(t,e){return t=Sce(t),ln(t.getFullYear()%100,e,2)}function z7e(t,e){return ln(t.getFullYear()%1e4,e,4)}function V7e(t,e){var n=t.getDay();return t=n>=4||n===0?iy(t):iy.ceil(t),ln(t.getFullYear()%1e4,e,4)}function W7e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ln(e/60|0,"0",2)+ln(e%60,"0",2)}function cH(t,e){return ln(t.getUTCDate(),e,2)}function U7e(t,e){return ln(t.getUTCHours(),e,2)}function G7e(t,e){return ln(t.getUTCHours()%12||12,e,2)}function H7e(t,e){return ln(1+aE.count(Ou(t),t),e,3)}function Cce(t,e){return ln(t.getUTCMilliseconds(),e,3)}function q7e(t,e){return Cce(t,e)+"000"}function K7e(t,e){return ln(t.getUTCMonth()+1,e,2)}function X7e(t,e){return ln(t.getUTCMinutes(),e,2)}function Y7e(t,e){return ln(t.getUTCSeconds(),e,2)}function Q7e(t){var e=t.getUTCDay();return e===0?7:e}function Z7e(t,e){return ln(cE.count(Ou(t)-1,t),e,2)}function Nce(t){var e=t.getUTCDay();return e>=4||e===0?oy(t):oy.ceil(t)}function J7e(t,e){return t=Nce(t),ln(oy.count(Ou(t),t)+(Ou(t).getUTCDay()===4),e,2)}function eqe(t){return t.getUTCDay()}function tqe(t,e){return ln(m_.count(Ou(t)-1,t),e,2)}function nqe(t,e){return ln(t.getUTCFullYear()%100,e,2)}function rqe(t,e){return t=Nce(t),ln(t.getUTCFullYear()%100,e,2)}function sqe(t,e){return ln(t.getUTCFullYear()%1e4,e,4)}function iqe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?oy(t):oy.ceil(t),ln(t.getUTCFullYear()%1e4,e,4)}function oqe(){return"+0000"}function uH(){return"%"}function dH(t){return+t}function fH(t){return Math.floor(+t/1e3)}var pm,_ce,Tce;aqe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function aqe(t){return pm=a7e(t),_ce=pm.format,pm.parse,Tce=pm.utcFormat,pm.utcParse,pm}function lqe(t){return new Date(t)}function cqe(t){return t instanceof Date?+t:+new Date(+t)}function l4(t,e,n,r,s,i,o,a,l,c){var u=K3(),d=u.invert,h=u.domain,p=c(".%L"),m=c(":%S"),g=c("%I:%M"),y=c("%I %p"),v=c("%a %d"),x=c("%b %d"),b=c("%B"),S=c("%Y");function w(C){return(l(C)<C?p:a(C)<C?m:o(C)<C?g:i(C)<C?y:r(C)<C?s(C)<C?v:x:n(C)<C?b:S)(C)}return u.invert=function(C){return new Date(d(C))},u.domain=function(C){return arguments.length?h(Array.from(C,cqe)):h().map(lqe)},u.ticks=function(C){var _=h();return t(_[0],_[_.length-1],C??10)},u.tickFormat=function(C,_){return _==null?w:c(_)},u.nice=function(C){var _=h();return(!C||typeof C.range!="function")&&(C=e(_[0],_[_.length-1],C??10)),C?h(fce(_,C)):u},u.copy=function(){return K1(u,l4(t,e,n,r,s,i,o,a,l,c))},u}function uqe(){return Da.apply(l4(i7e,o7e,Iu,o4,lE,X1,s4,n4,Nh,_ce).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function dqe(){return Da.apply(l4(r7e,s7e,Ou,a4,cE,aE,i4,r4,Nh,Tce).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function uE(){var t=0,e=1,n,r,s,i,o=ki,a=!1,l;function c(d){return d==null||isNaN(d=+d)?l:o(s===0?.5:(d=(i(d)-n)*s,a?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,n=i(t=+t),r=i(e=+e),s=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(d){return arguments.length?(a=!!d,c):a},c.interpolator=function(d){return arguments.length?(o=d,c):o};function u(d){return function(h){var p,m;return arguments.length?([p,m]=h,o=d(p,m),c):[o(0),o(1)]}}return c.range=u(bv),c.rangeRound=u(q3),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return i=d,n=d(t),r=d(e),s=n===r?0:1/(r-n),c}}function Ef(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function kce(){var t=kf(uE()(ki));return t.copy=function(){return Ef(t,kce())},Uu.apply(t,arguments)}function Ece(){var t=Q3(uE()).domain([1,10]);return t.copy=function(){return Ef(t,Ece()).base(t.base())},Uu.apply(t,arguments)}function $ce(){var t=Z3(uE());return t.copy=function(){return Ef(t,$ce()).constant(t.constant())},Uu.apply(t,arguments)}function c4(){var t=J3(uE());return t.copy=function(){return Ef(t,c4()).exponent(t.exponent())},Uu.apply(t,arguments)}function fqe(){return c4.apply(null,arguments).exponent(.5)}function Ace(){var t=[],e=ki;function n(r){if(r!=null&&!isNaN(r=+r))return e((H1(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Ud),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,i)=>ZHe(t,i/r))},n.copy=function(){return Ace(e).domain(t)},Uu.apply(n,arguments)}function dE(){var t=0,e=.5,n=1,r=1,s,i,o,a,l,c=ki,u,d=!1,h;function p(g){return isNaN(g=+g)?h:(g=.5+((g=+u(g))-i)*(r*g<r*i?a:l),c(d?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([t,e,n]=g,s=u(t=+t),i=u(e=+e),o=u(n=+n),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),r=i<s?-1:1,p):[t,e,n]},p.clamp=function(g){return arguments.length?(d=!!g,p):d},p.interpolator=function(g){return arguments.length?(c=g,p):c};function m(g){return function(y){var v,x,b;return arguments.length?([v,x,b]=y,c=N9e(g,[v,x,b]),p):[c(0),c(.5),c(1)]}}return p.range=m(bv),p.rangeRound=m(q3),p.unknown=function(g){return arguments.length?(h=g,p):h},function(g){return u=g,s=g(t),i=g(e),o=g(n),a=s===i?0:.5/(i-s),l=i===o?0:.5/(o-i),r=i<s?-1:1,p}}function Ice(){var t=kf(dE()(ki));return t.copy=function(){return Ef(t,Ice())},Uu.apply(t,arguments)}function Oce(){var t=Q3(dE()).domain([.1,1,10]);return t.copy=function(){return Ef(t,Oce()).base(t.base())},Uu.apply(t,arguments)}function Pce(){var t=Z3(dE());return t.copy=function(){return Ef(t,Pce()).constant(t.constant())},Uu.apply(t,arguments)}function u4(){var t=J3(dE());return t.copy=function(){return Ef(t,u4()).exponent(t.exponent())},Uu.apply(t,arguments)}function hqe(){return u4.apply(null,arguments).exponent(.5)}const hH=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:bb,scaleDiverging:Ice,scaleDivergingLog:Oce,scaleDivergingPow:u4,scaleDivergingSqrt:hqe,scaleDivergingSymlog:Pce,scaleIdentity:dce,scaleImplicit:GD,scaleLinear:f_,scaleLog:hce,scaleOrdinal:U3,scalePoint:y0,scalePow:e4,scaleQuantile:gce,scaleQuantize:yce,scaleRadial:mce,scaleSequential:kce,scaleSequentialLog:Ece,scaleSequentialPow:c4,scaleSequentialQuantile:Ace,scaleSequentialSqrt:fqe,scaleSequentialSymlog:$ce,scaleSqrt:q9e,scaleSymlog:pce,scaleThreshold:vce,scaleTime:uqe,scaleUtc:dqe,tickFormat:uce},Symbol.toStringTag,{value:"Module"}));var pqe=uv;function mqe(t,e,n){for(var r=-1,s=t.length;++r<s;){var i=t[r],o=e(i);if(o!=null&&(a===void 0?o===o&&!pqe(o):n(o,a)))var a=o,l=i}return l}var fE=mqe;function gqe(t,e){return t>e}var Rce=gqe,yqe=fE,vqe=Rce,xqe=vv;function bqe(t){return t&&t.length?yqe(t,xqe,vqe):void 0}var wqe=bqe;const Td=nn(wqe);function Sqe(t,e){return t<e}var Dce=Sqe,Cqe=fE,Nqe=Dce,_qe=vv;function Tqe(t){return t&&t.length?Cqe(t,_qe,Nqe):void 0}var kqe=Tqe;const hE=nn(kqe);var Eqe=_3,$qe=Fc,Aqe=Wle,Iqe=uo;function Oqe(t,e){var n=Iqe(t)?Eqe:Aqe;return n(t,$qe(e))}var Pqe=Oqe,Rqe=zle,Dqe=Pqe;function jqe(t,e){return Rqe(Dqe(t,e),1)}var Mqe=jqe;const Fqe=nn(Mqe);var Lqe=L3;function Bqe(t,e){return Lqe(t,e)}var zqe=Bqe;const Pu=nn(zqe);var wv=1e9,Vqe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},f4,rr=!0,Ea="[DecimalError] ",Uh=Ea+"Invalid argument: ",d4=Ea+"Exponent out of range: ",Sv=Math.floor,lh=Math.pow,Wqe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,wo,fs=1e7,qn=7,jce=9007199254740991,g_=Sv(jce/qn),Xe={};Xe.absoluteValue=Xe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Xe.comparedTo=Xe.cmp=function(t){var e,n,r,s,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(r=i.d.length,s=t.d.length,e=0,n=r<s?r:s;e<n;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return r===s?0:r>s^i.s<0?1:-1};Xe.decimalPlaces=Xe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*qn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Xe.dividedBy=Xe.div=function(t){return mu(this,new this.constructor(t))};Xe.dividedToIntegerBy=Xe.idiv=function(t){var e=this,n=e.constructor;return Rn(mu(e,new n(t),0,1),n.precision)};Xe.equals=Xe.eq=function(t){return!this.cmp(t)};Xe.exponent=function(){return Hr(this)};Xe.greaterThan=Xe.gt=function(t){return this.cmp(t)>0};Xe.greaterThanOrEqualTo=Xe.gte=function(t){return this.cmp(t)>=0};Xe.isInteger=Xe.isint=function(){return this.e>this.d.length-2};Xe.isNegative=Xe.isneg=function(){return this.s<0};Xe.isPositive=Xe.ispos=function(){return this.s>0};Xe.isZero=function(){return this.s===0};Xe.lessThan=Xe.lt=function(t){return this.cmp(t)<0};Xe.lessThanOrEqualTo=Xe.lte=function(t){return this.cmp(t)<1};Xe.logarithm=Xe.log=function(t){var e,n=this,r=n.constructor,s=r.precision,i=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(wo))throw Error(Ea+"NaN");if(n.s<1)throw Error(Ea+(n.s?"NaN":"-Infinity"));return n.eq(wo)?new r(0):(rr=!1,e=mu(_b(n,i),_b(t,i),i),rr=!0,Rn(e,s))};Xe.minus=Xe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Lce(e,t):Mce(e,(t.s=-t.s,t))};Xe.modulo=Xe.mod=function(t){var e,n=this,r=n.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error(Ea+"NaN");return n.s?(rr=!1,e=mu(n,t,0,1).times(t),rr=!0,n.minus(e)):Rn(new r(n),s)};Xe.naturalExponential=Xe.exp=function(){return Fce(this)};Xe.naturalLogarithm=Xe.ln=function(){return _b(this)};Xe.negated=Xe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Xe.plus=Xe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Mce(e,t):Lce(e,(t.s=-t.s,t))};Xe.precision=Xe.sd=function(t){var e,n,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Uh+t);if(e=Hr(s)+1,r=s.d.length-1,n=r*qn+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Xe.squareRoot=Xe.sqrt=function(){var t,e,n,r,s,i,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Ea+"NaN")}for(t=Hr(a),rr=!1,s=Math.sqrt(+a),s==0||s==1/0?(e=nc(a.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=Sv((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(s.toString()),n=l.precision,s=o=n+3;;)if(i=r,r=i.plus(mu(a,i,o+2)).times(.5),nc(i.d).slice(0,o)===(e=nc(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),s==o&&e=="4999"){if(Rn(i,n+1,0),i.times(i).eq(a)){r=i;break}}else if(e!="9999")break;o+=4}return rr=!0,Rn(r,n)};Xe.times=Xe.mul=function(t){var e,n,r,s,i,o,a,l,c,u=this,d=u.constructor,h=u.d,p=(t=new d(t)).d;if(!u.s||!t.s)return new d(0);for(t.s*=u.s,n=u.e+t.e,l=h.length,c=p.length,l<c&&(i=h,h=p,p=i,o=l,l=c,c=o),i=[],o=l+c,r=o;r--;)i.push(0);for(r=c;--r>=0;){for(e=0,s=l+r;s>r;)a=i[s]+p[r]*h[s-r-1]+e,i[s--]=a%fs|0,e=a/fs|0;i[s]=(i[s]+e)%fs|0}for(;!i[--o];)i.pop();return e?++n:i.shift(),t.d=i,t.e=n,rr?Rn(t,d.precision):t};Xe.toDecimalPlaces=Xe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ec(t,0,wv),e===void 0?e=r.rounding:Ec(e,0,8),Rn(n,t+Hr(n)+1,e))};Xe.toExponential=function(t,e){var n,r=this,s=r.constructor;return t===void 0?n=up(r,!0):(Ec(t,0,wv),e===void 0?e=s.rounding:Ec(e,0,8),r=Rn(new s(r),t+1,e),n=up(r,!0,t+1)),n};Xe.toFixed=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?up(s):(Ec(t,0,wv),e===void 0?e=i.rounding:Ec(e,0,8),r=Rn(new i(s),t+Hr(s)+1,e),n=up(r.abs(),!1,t+Hr(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};Xe.toInteger=Xe.toint=function(){var t=this,e=t.constructor;return Rn(new e(t),Hr(t)+1,e.rounding)};Xe.toNumber=function(){return+this};Xe.toPower=Xe.pow=function(t){var e,n,r,s,i,o,a=this,l=a.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(wo);if(a=new l(a),!a.s){if(t.s<1)throw Error(Ea+"Infinity");return a}if(a.eq(wo))return a;if(r=l.precision,t.eq(wo))return Rn(a,r);if(e=t.e,n=t.d.length-1,o=e>=n,i=a.s,o){if((n=u<0?-u:u)<=jce){for(s=new l(wo),e=Math.ceil(r/qn+4),rr=!1;n%2&&(s=s.times(a),mH(s.d,e)),n=Sv(n/2),n!==0;)a=a.times(a),mH(a.d,e);return rr=!0,t.s<0?new l(wo).div(s):Rn(s,r)}}else if(i<0)throw Error(Ea+"NaN");return i=i<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,rr=!1,s=t.times(_b(a,r+c)),rr=!0,s=Fce(s),s.s=i,s};Xe.toPrecision=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?(n=Hr(s),r=up(s,n<=i.toExpNeg||n>=i.toExpPos)):(Ec(t,1,wv),e===void 0?e=i.rounding:Ec(e,0,8),s=Rn(new i(s),t,e),n=Hr(s),r=up(s,t<=n||n<=i.toExpNeg,t)),r};Xe.toSignificantDigits=Xe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ec(t,1,wv),e===void 0?e=r.rounding:Ec(e,0,8)),Rn(new r(n),t,e)};Xe.toString=Xe.valueOf=Xe.val=Xe.toJSON=Xe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Hr(t),n=t.constructor;return up(t,e<=n.toExpNeg||e>=n.toExpPos)};function Mce(t,e){var n,r,s,i,o,a,l,c,u=t.constructor,d=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),rr?Rn(e,d):e;if(l=t.d,c=e.d,o=t.e,s=e.e,l=l.slice(),i=o-s,i){for(i<0?(r=l,i=-i,a=c.length):(r=c,s=o,a=l.length),o=Math.ceil(d/qn),a=o>a?o+1:a+1,i>a&&(i=a,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(a=l.length,i=c.length,a-i<0&&(i=a,r=c,c=l,l=r),n=0;i;)n=(l[--i]=l[i]+c[i]+n)/fs|0,l[i]%=fs;for(n&&(l.unshift(n),++s),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=s,rr?Rn(e,d):e}function Ec(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Uh+t)}function nc(t){var e,n,r,s=t.length-1,i="",o=t[0];if(s>0){for(i+=o,e=1;e<s;e++)r=t[e]+"",n=qn-r.length,n&&(i+=cd(n)),i+=r;o=t[e],r=o+"",n=qn-r.length,n&&(i+=cd(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var mu=function(){function t(r,s){var i,o=0,a=r.length;for(r=r.slice();a--;)i=r[a]*s+o,r[a]=i%fs|0,o=i/fs|0;return o&&r.unshift(o),r}function e(r,s,i,o){var a,l;if(i!=o)l=i>o?1:-1;else for(a=l=0;a<i;a++)if(r[a]!=s[a]){l=r[a]>s[a]?1:-1;break}return l}function n(r,s,i){for(var o=0;i--;)r[i]-=o,o=r[i]<s[i]?1:0,r[i]=o*fs+r[i]-s[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,i,o){var a,l,c,u,d,h,p,m,g,y,v,x,b,S,w,C,_,T,k=r.constructor,$=r.s==s.s?1:-1,O=r.d,P=s.d;if(!r.s)return new k(r);if(!s.s)throw Error(Ea+"Division by zero");for(l=r.e-s.e,_=P.length,w=O.length,p=new k($),m=p.d=[],c=0;P[c]==(O[c]||0);)++c;if(P[c]>(O[c]||0)&&--l,i==null?x=i=k.precision:o?x=i+(Hr(r)-Hr(s))+1:x=i,x<0)return new k(0);if(x=x/qn+2|0,c=0,_==1)for(u=0,P=P[0],x++;(c<w||u)&&x--;c++)b=u*fs+(O[c]||0),m[c]=b/P|0,u=b%P|0;else{for(u=fs/(P[0]+1)|0,u>1&&(P=t(P,u),O=t(O,u),_=P.length,w=O.length),S=_,g=O.slice(0,_),y=g.length;y<_;)g[y++]=0;T=P.slice(),T.unshift(0),C=P[0],P[1]>=fs/2&&++C;do u=0,a=e(P,g,_,y),a<0?(v=g[0],_!=y&&(v=v*fs+(g[1]||0)),u=v/C|0,u>1?(u>=fs&&(u=fs-1),d=t(P,u),h=d.length,y=g.length,a=e(d,g,h,y),a==1&&(u--,n(d,_<h?T:P,h))):(u==0&&(a=u=1),d=P.slice()),h=d.length,h<y&&d.unshift(0),n(g,d,y),a==-1&&(y=g.length,a=e(P,g,_,y),a<1&&(u++,n(g,_<y?T:P,y))),y=g.length):a===0&&(u++,g=[0]),m[c++]=u,a&&g[0]?g[y++]=O[S]||0:(g=[O[S]],y=1);while((S++<w||g[0]!==void 0)&&x--)}return m[0]||m.shift(),p.e=l,Rn(p,o?i+Hr(p)+1:i)}}();function Fce(t,e){var n,r,s,i,o,a,l=0,c=0,u=t.constructor,d=u.precision;if(Hr(t)>16)throw Error(d4+Hr(t));if(!t.s)return new u(wo);for(e==null?(rr=!1,a=d):a=e,o=new u(.03125);t.abs().gte(.1);)t=t.times(o),c+=5;for(r=Math.log(lh(2,c))/Math.LN10*2+5|0,a+=r,n=s=i=new u(wo),u.precision=a;;){if(s=Rn(s.times(t),a),n=n.times(++l),o=i.plus(mu(s,n,a)),nc(o.d).slice(0,a)===nc(i.d).slice(0,a)){for(;c--;)i=Rn(i.times(i),a);return u.precision=d,e==null?(rr=!0,Rn(i,d)):i}i=o}}function Hr(t){for(var e=t.e*qn,n=t.d[0];n>=10;n/=10)e++;return e}function SO(t,e,n){if(e>t.LN10.sd())throw rr=!0,n&&(t.precision=n),Error(Ea+"LN10 precision limit exceeded");return Rn(new t(t.LN10),e)}function cd(t){for(var e="";t--;)e+="0";return e}function _b(t,e){var n,r,s,i,o,a,l,c,u,d=1,h=10,p=t,m=p.d,g=p.constructor,y=g.precision;if(p.s<1)throw Error(Ea+(p.s?"NaN":"-Infinity"));if(p.eq(wo))return new g(0);if(e==null?(rr=!1,c=y):c=e,p.eq(10))return e==null&&(rr=!0),SO(g,c);if(c+=h,g.precision=c,n=nc(m),r=n.charAt(0),i=Hr(p),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(t),n=nc(p.d),r=n.charAt(0),d++;i=Hr(p),r>1?(p=new g("0."+n),i++):p=new g(r+"."+n.slice(1))}else return l=SO(g,c+2,y).times(i+""),p=_b(new g(r+"."+n.slice(1)),c-h).plus(l),g.precision=y,e==null?(rr=!0,Rn(p,y)):p;for(a=o=p=mu(p.minus(wo),p.plus(wo),c),u=Rn(p.times(p),c),s=3;;){if(o=Rn(o.times(u),c),l=a.plus(mu(o,new g(s),c)),nc(l.d).slice(0,c)===nc(a.d).slice(0,c))return a=a.times(2),i!==0&&(a=a.plus(SO(g,c+2,y).times(i+""))),a=mu(a,new g(d),c),g.precision=y,e==null?(rr=!0,Rn(a,y)):a;a=l,s+=2}}function pH(t,e){var n,r,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,n=n-r-1,t.e=Sv(n/qn),t.d=[],r=(n+1)%qn,n<0&&(r+=qn),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=qn;r<s;)t.d.push(+e.slice(r,r+=qn));e=e.slice(r),r=qn-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),rr&&(t.e>g_||t.e<-g_))throw Error(d4+n)}else t.s=0,t.e=0,t.d=[0];return t}function Rn(t,e,n){var r,s,i,o,a,l,c,u,d=t.d;for(o=1,i=d[0];i>=10;i/=10)o++;if(r=e-o,r<0)r+=qn,s=e,c=d[u=0];else{if(u=Math.ceil((r+1)/qn),i=d.length,u>=i)return t;for(c=i=d[u],o=1;i>=10;i/=10)o++;r%=qn,s=r-qn+o}if(n!==void 0&&(i=lh(10,o-s-1),a=c/i%10|0,l=e<0||d[u+1]!==void 0||c%i,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?s>0?c/lh(10,o-s):0:d[u-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(i=Hr(t),d.length=1,e=e-i-1,d[0]=lh(10,(qn-e%qn)%qn),t.e=Sv(-e/qn)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=u,i=1,u--):(d.length=u+1,i=lh(10,qn-r),d[u]=s>0?(c/lh(10,o-s)%lh(10,s)|0)*i:0),l)for(;;)if(u==0){(d[0]+=i)==fs&&(d[0]=1,++t.e);break}else{if(d[u]+=i,d[u]!=fs)break;d[u--]=0,i=1}for(r=d.length;d[--r]===0;)d.pop();if(rr&&(t.e>g_||t.e<-g_))throw Error(d4+Hr(t));return t}function Lce(t,e){var n,r,s,i,o,a,l,c,u,d,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),rr?Rn(e,p):e;if(l=t.d,d=e.d,r=e.e,c=t.e,l=l.slice(),o=c-r,o){for(u=o<0,u?(n=l,o=-o,a=d.length):(n=d,r=c,a=l.length),s=Math.max(Math.ceil(p/qn),a)+2,o>s&&(o=s,n.length=1),n.reverse(),s=o;s--;)n.push(0);n.reverse()}else{for(s=l.length,a=d.length,u=s<a,u&&(a=s),s=0;s<a;s++)if(l[s]!=d[s]){u=l[s]<d[s];break}o=0}for(u&&(n=l,l=d,d=n,e.s=-e.s),a=l.length,s=d.length-a;s>0;--s)l[a++]=0;for(s=d.length;s>o;){if(l[--s]<d[s]){for(i=s;i&&l[--i]===0;)l[i]=fs-1;--l[i],l[s]+=fs}l[s]-=d[s]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,rr?Rn(e,p):e):new h(0)}function up(t,e,n){var r,s=Hr(t),i=nc(t.d),o=i.length;return e?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+cd(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+cd(-s-1)+i,n&&(r=n-o)>0&&(i+=cd(r))):s>=o?(i+=cd(s+1-o),n&&(r=n-s-1)>0&&(i=i+"."+cd(r))):((r=s+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(s+1===o&&(i+="."),i+=cd(r))),t.s<0?"-"+i:i}function mH(t,e){if(t.length>e)return t.length=e,!0}function Bce(t){var e,n,r;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Uh+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return pH(o,i.toString())}else if(typeof i!="string")throw Error(Uh+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Wqe.test(i))pH(o,i);else throw Error(Uh+i)}if(s.prototype=Xe,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=Bce,s.config=s.set=Uqe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return s.config(t),s}function Uqe(t){if(!t||typeof t!="object")throw Error(Ea+"Object expected");var e,n,r,s=["precision",1,wv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[n=s[e]])!==void 0)if(Sv(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(Uh+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Uh+n+": "+r);return this}var f4=Bce(Vqe);wo=new f4(1);const _n=f4;function Gqe(t){return Xqe(t)||Kqe(t)||qqe(t)||Hqe()}function Hqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qqe(t,e){if(t){if(typeof t=="string")return XD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XD(t,e)}}function Kqe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Xqe(t){if(Array.isArray(t))return XD(t)}function XD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Yqe=function(e){return e},zce={"@@functional/placeholder":!0},Vce=function(e){return e===zce},gH=function(e){return function n(){return arguments.length===0||arguments.length===1&&Vce(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Qqe=function t(e,n){return e===1?n:gH(function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];var o=s.filter(function(a){return a!==zce}).length;return o>=e?n.apply(void 0,s):t(e-o,gH(function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];var u=s.map(function(d){return Vce(d)?l.shift():d});return n.apply(void 0,Gqe(u).concat(l))}))})},pE=function(e){return Qqe(e.length,e)},YD=function(e,n){for(var r=[],s=e;s<n;++s)r[s-e]=s;return r},Zqe=pE(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Jqe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Yqe;var s=n.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(a,l){return l(a)},i.apply(void 0,arguments))}},QD=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Wce=function(e){var n=null,r=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return n&&i.every(function(a,l){return a===n[l]})||(n=i,r=e.apply(void 0,i)),r}};function eKe(t){var e;return t===0?e=1:e=Math.floor(new _n(t).abs().log(10).toNumber())+1,e}function tKe(t,e,n){for(var r=new _n(t),s=0,i=[];r.lt(e)&&s<1e5;)i.push(r.toNumber()),r=r.add(n),s++;return i}var nKe=pE(function(t,e,n){var r=+t,s=+e;return r+n*(s-r)}),rKe=pE(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),sKe=pE(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const mE={rangeStep:tKe,getDigitCount:eKe,interpolateNumber:nKe,uninterpolateNumber:rKe,uninterpolateTruncation:sKe};function ZD(t){return aKe(t)||oKe(t)||Uce(t)||iKe()}function iKe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oKe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function aKe(t){if(Array.isArray(t))return JD(t)}function Tb(t,e){return uKe(t)||cKe(t,e)||Uce(t,e)||lKe()}function lKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uce(t,e){if(t){if(typeof t=="string")return JD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JD(t,e)}}function JD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cKe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,s=!1,i=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,i=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw i}}return n}}function uKe(t){if(Array.isArray(t))return t}function Gce(t){var e=Tb(t,2),n=e[0],r=e[1],s=n,i=r;return n>r&&(s=r,i=n),[s,i]}function Hce(t,e,n){if(t.lte(0))return new _n(0);var r=mE.getDigitCount(t.toNumber()),s=new _n(10).pow(r),i=t.div(s),o=r!==1?.05:.1,a=new _n(Math.ceil(i.div(o).toNumber())).add(n).mul(o),l=a.mul(s);return e?l:new _n(Math.ceil(l))}function dKe(t,e,n){var r=1,s=new _n(t);if(!s.isint()&&n){var i=Math.abs(t);i<1?(r=new _n(10).pow(mE.getDigitCount(t)-1),s=new _n(Math.floor(s.div(r).toNumber())).mul(r)):i>1&&(s=new _n(Math.floor(t)))}else t===0?s=new _n(Math.floor((e-1)/2)):n||(s=new _n(Math.floor(t)));var o=Math.floor((e-1)/2),a=Jqe(Zqe(function(l){return s.add(new _n(l-o).mul(r)).toNumber()}),YD);return a(0,e)}function qce(t,e,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new _n(0),tickMin:new _n(0),tickMax:new _n(0)};var i=Hce(new _n(e).sub(t).div(n-1),r,s),o;t<=0&&e>=0?o=new _n(0):(o=new _n(t).add(e).div(2),o=o.sub(new _n(o).mod(i)));var a=Math.ceil(o.sub(t).div(i).toNumber()),l=Math.ceil(new _n(e).sub(o).div(i).toNumber()),c=a+l+1;return c>n?qce(t,e,n,r,s+1):(c<n&&(l=e>0?l+(n-c):l,a=e>0?a:a+(n-c)),{step:i,tickMin:o.sub(new _n(a).mul(i)),tickMax:o.add(new _n(l).mul(i))})}function fKe(t){var e=Tb(t,2),n=e[0],r=e[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),a=Gce([n,r]),l=Tb(a,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var d=u===1/0?[c].concat(ZD(YD(0,s-1).map(function(){return 1/0}))):[].concat(ZD(YD(0,s-1).map(function(){return-1/0})),[u]);return n>r?QD(d):d}if(c===u)return dKe(c,s,i);var h=qce(c,u,o,i),p=h.step,m=h.tickMin,g=h.tickMax,y=mE.rangeStep(m,g.add(new _n(.1).mul(p)),p);return n>r?QD(y):y}function hKe(t,e){var n=Tb(t,2),r=n[0],s=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Gce([r,s]),a=Tb(o,2),l=a[0],c=a[1];if(l===-1/0||c===1/0)return[r,s];if(l===c)return[l];var u=Math.max(e,2),d=Hce(new _n(c).sub(l).div(u-1),i,0),h=[].concat(ZD(mE.rangeStep(new _n(l),new _n(c).sub(new _n(.99).mul(d)),d)),[c]);return r>s?QD(h):h}var pKe=Wce(fKe),mKe=Wce(hKe),gKe="Invariant failed";function dp(t,e){throw new Error(gKe)}var yKe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function ay(t){"@babel/helpers - typeof";return ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ay(t)}function y_(){return y_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},y_.apply(this,arguments)}function vKe(t,e){return SKe(t)||wKe(t,e)||bKe(t,e)||xKe()}function xKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bKe(t,e){if(t){if(typeof t=="string")return yH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yH(t,e)}}function yH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wKe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function SKe(t){if(Array.isArray(t))return t}function CKe(t,e){if(t==null)return{};var n=NKe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function NKe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function _Ke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TKe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yce(r.key),r)}}function kKe(t,e,n){return e&&TKe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function EKe(t,e,n){return e=v_(e),$Ke(t,Kce()?Reflect.construct(e,n||[],v_(t).constructor):e.apply(t,n))}function $Ke(t,e){if(e&&(ay(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AKe(t)}function AKe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kce(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kce=function(){return!!t})()}function v_(t){return v_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},v_(t)}function IKe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ej(t,e)}function ej(t,e){return ej=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},ej(t,e)}function Xce(t,e,n){return e=Yce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yce(t){var e=OKe(t,"string");return ay(e)=="symbol"?e:e+""}function OKe(t,e){if(ay(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ay(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cv=function(t){function e(){return _Ke(this,e),EKe(this,e,arguments)}return IKe(e,t),kKe(e,[{key:"render",value:function(){var r=this.props,s=r.offset,i=r.layout,o=r.width,a=r.dataKey,l=r.data,c=r.dataPointFormatter,u=r.xAxis,d=r.yAxis,h=CKe(r,yKe),p=He(h,!1);this.props.direction==="x"&&u.type!=="number"&&dp();var m=l.map(function(g){var y=c(g,a),v=y.x,x=y.y,b=y.value,S=y.errorVal;if(!S)return null;var w=[],C,_;if(Array.isArray(S)){var T=vKe(S,2);C=T[0],_=T[1]}else C=_=S;if(i==="vertical"){var k=u.scale,$=x+s,O=$+o,P=$-o,D=k(b-C),A=k(b+_);w.push({x1:A,y1:O,x2:A,y2:P}),w.push({x1:D,y1:$,x2:A,y2:$}),w.push({x1:D,y1:O,x2:D,y2:P})}else if(i==="horizontal"){var I=d.scale,R=v+s,M=R-o,E=R+o,j=I(b-C),B=I(b+_);w.push({x1:M,y1:B,x2:E,y2:B}),w.push({x1:R,y1:j,x2:R,y2:B}),w.push({x1:M,y1:j,x2:E,y2:j})}return F.createElement(At,y_({className:"recharts-errorBar",key:"bar-".concat(w.map(function(W){return"".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))},p),w.map(function(W){return F.createElement("line",y_({},W,{key:"line-".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))}))});return F.createElement(At,{className:"recharts-errorBars"},m)}}])}(F.Component);Xce(Cv,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Xce(Cv,"displayName","ErrorBar");function kb(t){"@babel/helpers - typeof";return kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kb(t)}function vH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Xf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vH(Object(n),!0).forEach(function(r){PKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PKe(t,e,n){return e=RKe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RKe(t){var e=DKe(t,"string");return kb(e)=="symbol"?e:e+""}function DKe(t,e){if(kb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(kb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qce=function(e){var n=e.children,r=e.formattedGraphicalItems,s=e.legendWidth,i=e.legendContent,o=vo(n,os);if(!o)return null;var a=os.defaultProps,l=a!==void 0?Xf(Xf({},a),o.props):{},c;return o.props&&o.props.payload?c=o.props&&o.props.payload:i==="children"?c=(r||[]).reduce(function(u,d){var h=d.item,p=d.props,m=p.sectors||p.data||[];return u.concat(m.map(function(g){return{type:o.props.iconType||h.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):c=(r||[]).map(function(u){var d=u.item,h=d.type.defaultProps,p=h!==void 0?Xf(Xf({},h),d.props):{},m=p.dataKey,g=p.name,y=p.legendType,v=p.hide;return{inactive:v,dataKey:m,type:l.iconType||y||"square",color:h4(d),value:g||m,payload:p}}),Xf(Xf(Xf({},l),os.getWithHeight(o,s)),{},{payload:c,item:o})};function Eb(t){"@babel/helpers - typeof";return Eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eb(t)}function xH(t){return LKe(t)||FKe(t)||MKe(t)||jKe()}function jKe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MKe(t,e){if(t){if(typeof t=="string")return tj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tj(t,e)}}function FKe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function LKe(t){if(Array.isArray(t))return tj(t)}function tj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function br(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bH(Object(n),!0).forEach(function(r){pg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pg(t,e,n){return e=BKe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BKe(t){var e=zKe(t,"string");return Eb(e)=="symbol"?e:e+""}function zKe(t,e){if(Eb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Eb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pn(t,e,n){return ht(t)||ht(e)?n:is(e)?$o(t,e,n):at(e)?e(t):n}function v0(t,e,n,r){var s=Fqe(t,function(a){return Pn(a,e)});if(n==="number"){var i=s.filter(function(a){return ke(a)||parseFloat(a)});return i.length?[hE(i),Td(i)]:[1/0,-1/0]}var o=r?s.filter(function(a){return!ht(a)}):s;return o.map(function(a){return is(a)||a instanceof Date?a:""})}var VKe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var l=i.range,c=0;c<a;c++){var u=c>0?s[c-1].coordinate:s[a-1].coordinate,d=s[c].coordinate,h=c>=a-1?s[0].coordinate:s[c+1].coordinate,p=void 0;if(_i(d-u)!==_i(h-d)){var m=[];if(_i(h-d)===_i(l[1]-l[0])){p=h;var g=d+l[1]-l[0];m[0]=Math.min(g,(g+u)/2),m[1]=Math.max(g,(g+u)/2)}else{p=u;var y=h+l[1]-l[0];m[0]=Math.min(d,(y+d)/2),m[1]=Math.max(d,(y+d)/2)}var v=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(e>v[0]&&e<=v[1]||e>=m[0]&&e<=m[1]){o=s[c].index;break}}else{var x=Math.min(u,h),b=Math.max(u,h);if(e>(x+d)/2&&e<=(b+d)/2){o=s[c].index;break}}}else for(var S=0;S<a;S++)if(S===0&&e<=(r[S].coordinate+r[S+1].coordinate)/2||S>0&&S<a-1&&e>(r[S].coordinate+r[S-1].coordinate)/2&&e<=(r[S].coordinate+r[S+1].coordinate)/2||S===a-1&&e>(r[S].coordinate+r[S-1].coordinate)/2){o=r[S].index;break}return o},h4=function(e){var n,r=e,s=r.type.displayName,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?br(br({},e.type.defaultProps),e.props):e.props,o=i.stroke,a=i.fill,l;switch(s){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:a;break;default:l=a;break}return l},WKe=function(e){var n=e.barSize,r=e.totalSize,s=e.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},a=Object.keys(i),l=0,c=a.length;l<c;l++)for(var u=i[a[l]].stackGroups,d=Object.keys(u),h=0,p=d.length;h<p;h++){var m=u[d[h]],g=m.items,y=m.cateAxisId,v=g.filter(function(_){return pu(_.type).indexOf("Bar")>=0});if(v&&v.length){var x=v[0].type.defaultProps,b=x!==void 0?br(br({},x),v[0].props):v[0].props,S=b.barSize,w=b[y];o[w]||(o[w]=[]);var C=ht(S)?n:S;o[w].push({item:v[0],stackList:v.slice(1),barSize:ht(C)?void 0:Ti(C,r,0)})}}return o},UKe=function(e){var n=e.barGap,r=e.barCategoryGap,s=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,a=e.maxBarSize,l=o.length;if(l<1)return null;var c=Ti(n,s,0,!0),u,d=[];if(o[0].barSize===+o[0].barSize){var h=!1,p=s/l,m=o.reduce(function(S,w){return S+w.barSize||0},0);m+=(l-1)*c,m>=s&&(m-=(l-1)*c,c=0),m>=s&&p>0&&(h=!0,p*=.9,m=l*p);var g=(s-m)/2>>0,y={offset:g-c,size:0};u=o.reduce(function(S,w){var C={item:w.item,position:{offset:y.offset+y.size+c,size:h?p:w.barSize}},_=[].concat(xH(S),[C]);return y=_[_.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(T){_.push({item:T,position:y})}),_},d)}else{var v=Ti(r,s,0,!0);s-2*v-(l-1)*c<=0&&(c=0);var x=(s-2*v-(l-1)*c)/l;x>1&&(x>>=0);var b=a===+a?Math.min(x,a):x;u=o.reduce(function(S,w,C){var _=[].concat(xH(S),[{item:w.item,position:{offset:v+(x+c)*C+(x-b)/2,size:b}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(T){_.push({item:T,position:_[_.length-1].position})}),_},d)}return u},GKe=function(e,n,r,s){var i=r.children,o=r.width,a=r.margin,l=o-(a.left||0)-(a.right||0),c=Qce({children:i,legendWidth:l});if(c){var u=s||{},d=u.width,h=u.height,p=c.align,m=c.verticalAlign,g=c.layout;if((g==="vertical"||g==="horizontal"&&m==="middle")&&p!=="center"&&ke(e[p]))return br(br({},e),{},pg({},p,e[p]+(d||0)));if((g==="horizontal"||g==="vertical"&&p==="center")&&m!=="middle"&&ke(e[m]))return br(br({},e),{},pg({},m,e[m]+(h||0)))}return e},HKe=function(e,n,r){return ht(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},Zce=function(e,n,r,s,i){var o=n.props.children,a=$i(o,Cv).filter(function(c){return HKe(s,i,c.props.direction)});if(a&&a.length){var l=a.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var d=Pn(u,r);if(ht(d))return c;var h=Array.isArray(d)?[hE(d),Td(d)]:[d,d],p=l.reduce(function(m,g){var y=Pn(u,g,0),v=h[0]-Math.abs(Array.isArray(y)?y[0]:y),x=h[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(v,m[0]),Math.max(x,m[1])]},[1/0,-1/0]);return[Math.min(p[0],c[0]),Math.max(p[1],c[1])]},[1/0,-1/0])}return null},qKe=function(e,n,r,s,i){var o=n.map(function(a){return Zce(e,a,r,i,s)}).filter(function(a){return!ht(a)});return o&&o.length?o.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},Jce=function(e,n,r,s,i){var o=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&Zce(e,l,c,s)||v0(e,c,r,i)});if(r==="number")return o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var a={};return o.reduce(function(l,c){for(var u=0,d=c.length;u<d;u++)a[c[u]]||(a[c[u]]=!0,l.push(c[u]));return l},[])},eue=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},tue=function(e,n,r,s){if(s)return e.map(function(l){return l.coordinate});var i,o,a=e.map(function(l){return l.coordinate===n&&(i=!0),l.coordinate===r&&(o=!0),l.coordinate});return i||a.push(n),o||a.push(r),a},cu=function(e,n,r){if(!e)return null;var s=e.scale,i=e.duplicateDomain,o=e.type,a=e.range,l=e.realScaleType==="scaleBand"?s.bandwidth()/2:2,c=(n||r)&&o==="category"&&s.bandwidth?s.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?_i(a[0]-a[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(d){var h=i?i.indexOf(d):d;return{coordinate:s(h)+c,value:d,offset:c}});return u.filter(function(d){return!mv(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,h){return{coordinate:s(d)+c,value:d,index:h,offset:c}}):s.ticks&&!r?s.ticks(e.tickCount).map(function(d){return{coordinate:s(d)+c,value:d,offset:c}}):s.domain().map(function(d,h){return{coordinate:s(d)+c,value:i?i[d]:d,index:h,offset:c}})},CO=new WeakMap,NC=function(e,n){if(typeof n!="function")return e;CO.has(e)||CO.set(e,new WeakMap);var r=CO.get(e);if(r.has(n))return r.get(n);var s=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,s),s},nue=function(e,n,r){var s=e.scale,i=e.type,o=e.layout,a=e.axisType;if(s==="auto")return o==="radial"&&a==="radiusAxis"?{scale:bb(),realScaleType:"band"}:o==="radial"&&a==="angleAxis"?{scale:f_(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:y0(),realScaleType:"point"}:i==="category"?{scale:bb(),realScaleType:"band"}:{scale:f_(),realScaleType:"linear"};if(U1(s)){var l="scale".concat(Zk(s));return{scale:(hH[l]||y0)(),realScaleType:hH[l]?l:"point"}}return at(s)?{scale:s}:{scale:y0(),realScaleType:"point"}},wH=1e-4,rue=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,s=e.range(),i=Math.min(s[0],s[1])-wH,o=Math.max(s[0],s[1])+wH,a=e(n[0]),l=e(n[r-1]);(a<i||a>o||l<i||l>o)&&e.domain([n[0],n[r-1]])}},KKe=function(e,n){if(!e)return null;for(var r=0,s=e.length;r<s;r++)if(e[r].item===n)return e[r].position;return null},XKe=function(e,n){if(!n||n.length!==2||!ke(n[0])||!ke(n[1]))return e;var r=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]),i=[e[0],e[1]];return(!ke(e[0])||e[0]<r)&&(i[0]=r),(!ke(e[1])||e[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<r&&(i[1]=r),i},YKe=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var i=0,o=0,a=0;a<n;++a){var l=mv(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=i,e[a][r][1]=i+l,i=e[a][r][1]):(e[a][r][0]=o,e[a][r][1]=o+l,o=e[a][r][1])}},QKe=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var i=0,o=0;o<n;++o){var a=mv(e[o][r][1])?e[o][r][0]:e[o][r][1];a>=0?(e[o][r][0]=i,e[o][r][1]=i+a,i=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},ZKe={sign:YKe,expand:yBe,none:Jg,silhouette:vBe,wiggle:xBe,positive:QKe},JKe=function(e,n,r){var s=n.map(function(a){return a.props.dataKey}),i=ZKe[r],o=gBe().keys(s).value(function(a,l){return+Pn(a,l,0)}).order(TD).offset(i);return o(e)},eXe=function(e,n,r,s,i,o){if(!e)return null;var a=o?n.reverse():n,l={},c=a.reduce(function(d,h){var p,m=(p=h.type)!==null&&p!==void 0&&p.defaultProps?br(br({},h.type.defaultProps),h.props):h.props,g=m.stackId,y=m.hide;if(y)return d;var v=m[r],x=d[v]||{hasStack:!1,stackGroups:{}};if(is(g)){var b=x.stackGroups[g]||{numericAxisId:r,cateAxisId:s,items:[]};b.items.push(h),x.hasStack=!0,x.stackGroups[g]=b}else x.stackGroups[Tf("_stackId_")]={numericAxisId:r,cateAxisId:s,items:[h]};return br(br({},d),{},pg({},v,x))},l),u={};return Object.keys(c).reduce(function(d,h){var p=c[h];if(p.hasStack){var m={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(g,y){var v=p.stackGroups[y];return br(br({},g),{},pg({},y,{numericAxisId:r,cateAxisId:s,items:v.items,stackedData:JKe(e,v.items,i)}))},m)}return br(br({},d),{},pg({},h,p))},u)},sue=function(e,n){var r=n.realScaleType,s=n.type,i=n.tickCount,o=n.originalDomain,a=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=pKe(c,i,a);return e.domain([hE(u),Td(u)]),{niceTicks:u}}if(i&&s==="number"){var d=e.domain(),h=mKe(d,i,a);return{niceTicks:h}}return null};function ly(t){var e=t.axis,n=t.ticks,r=t.bandSize,s=t.entry,i=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!ht(s[e.dataKey])){var a=GN(n,"value",s[e.dataKey]);if(a)return a.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var l=Pn(s,ht(o)?e.dataKey:o);return ht(l)?null:e.scale(l)}var SH=function(e){var n=e.axis,r=e.ticks,s=e.offset,i=e.bandSize,o=e.entry,a=e.index;if(n.type==="category")return r[a]?r[a].coordinate+s:null;var l=Pn(o,n.dataKey,n.domain[a]);return ht(l)?null:n.scale(l)-i/2+s},tXe=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var s=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return s<=0&&i>=0?0:i<0?i:s}return r[0]},nXe=function(e,n){var r,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?br(br({},e.type.defaultProps),e.props):e.props,i=s.stackId;if(is(i)){var o=n[i];if(o){var a=o.items.indexOf(e);return a>=0?o.stackedData[a]:null}}return null},rXe=function(e){return e.reduce(function(n,r){return[hE(r.concat([n[0]]).filter(ke)),Td(r.concat([n[1]]).filter(ke))]},[1/0,-1/0])},iue=function(e,n,r){return Object.keys(e).reduce(function(s,i){var o=e[i],a=o.stackedData,l=a.reduce(function(c,u){var d=rXe(u.slice(n,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],s[0]),Math.max(l[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},CH=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,NH=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nj=function(e,n,r){if(at(e))return e(n,r);if(!Array.isArray(e))return n;var s=[];if(ke(e[0]))s[0]=r?e[0]:Math.min(e[0],n[0]);else if(CH.test(e[0])){var i=+CH.exec(e[0])[1];s[0]=n[0]-i}else at(e[0])?s[0]=e[0](n[0]):s[0]=n[0];if(ke(e[1]))s[1]=r?e[1]:Math.max(e[1],n[1]);else if(NH.test(e[1])){var o=+NH.exec(e[1])[1];s[1]=n[1]+o}else at(e[1])?s[1]=e[1](n[1]):s[1]=n[1];return s},x_=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!r||s>0)return s}if(e&&n&&n.length>=2){for(var i=z3(n,function(d){return d.coordinate}),o=1/0,a=1,l=i.length;a<l;a++){var c=i[a],u=i[a-1];o=Math.min((c.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},_H=function(e,n,r){return!e||!e.length||Pu(e,$o(r,"type.defaultProps.domain"))?n:e},oue=function(e,n){var r=e.type.defaultProps?br(br({},e.type.defaultProps),e.props):e.props,s=r.dataKey,i=r.name,o=r.unit,a=r.formatter,l=r.tooltipType,c=r.chartType,u=r.hide;return br(br({},He(e,!1)),{},{dataKey:s,unit:o,formatter:a,name:i||s,color:h4(e),value:Pn(n,s),type:l,payload:n,chartType:c,hide:u})};function $b(t){"@babel/helpers - typeof";return $b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$b(t)}function TH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Yc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TH(Object(n),!0).forEach(function(r){aue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aue(t,e,n){return e=sXe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sXe(t){var e=iXe(t,"string");return $b(e)=="symbol"?e:e+""}function iXe(t,e){if($b(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if($b(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oXe(t,e){return uXe(t)||cXe(t,e)||lXe(t,e)||aXe()}function aXe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lXe(t,e){if(t){if(typeof t=="string")return kH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kH(t,e)}}function kH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cXe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function uXe(t){if(Array.isArray(t))return t}var b_=Math.PI/180,dXe=function(e){return e*180/Math.PI},fn=function(e,n,r,s){return{x:e+Math.cos(-b_*s)*r,y:n+Math.sin(-b_*s)*r}},lue=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},cue=function(e,n,r,s,i){var o=e.width,a=e.height,l=e.startAngle,c=e.endAngle,u=Ti(e.cx,o,o/2),d=Ti(e.cy,a,a/2),h=lue(o,a,r),p=Ti(e.innerRadius,h,0),m=Ti(e.outerRadius,h,h*.8),g=Object.keys(n);return g.reduce(function(y,v){var x=n[v],b=x.domain,S=x.reversed,w;if(ht(x.range))s==="angleAxis"?w=[l,c]:s==="radiusAxis"&&(w=[p,m]),S&&(w=[w[1],w[0]]);else{w=x.range;var C=w,_=oXe(C,2);l=_[0],c=_[1]}var T=nue(x,i),k=T.realScaleType,$=T.scale;$.domain(b).range(w),rue($);var O=sue($,Yc(Yc({},x),{},{realScaleType:k})),P=Yc(Yc(Yc({},x),O),{},{range:w,radius:m,realScaleType:k,scale:$,cx:u,cy:d,innerRadius:p,outerRadius:m,startAngle:l,endAngle:c});return Yc(Yc({},y),{},aue({},v,P))},{})},fXe=function(e,n){var r=e.x,s=e.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(s-o,2))},hXe=function(e,n){var r=e.x,s=e.y,i=n.cx,o=n.cy,a=fXe({x:r,y:s},{x:i,y:o});if(a<=0)return{radius:a};var l=(r-i)/a,c=Math.acos(l);return s>o&&(c=2*Math.PI-c),{radius:a,angle:dXe(c),angleInRadian:c}},pXe=function(e){var n=e.startAngle,r=e.endAngle,s=Math.floor(n/360),i=Math.floor(r/360),o=Math.min(s,i);return{startAngle:n-o*360,endAngle:r-o*360}},mXe=function(e,n){var r=n.startAngle,s=n.endAngle,i=Math.floor(r/360),o=Math.floor(s/360),a=Math.min(i,o);return e+a*360},EH=function(e,n){var r=e.x,s=e.y,i=hXe({x:r,y:s},n),o=i.radius,a=i.angle,l=n.innerRadius,c=n.outerRadius;if(o<l||o>c)return!1;if(o===0)return!0;var u=pXe(n),d=u.startAngle,h=u.endAngle,p=a,m;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;m=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=d}return m?Yc(Yc({},n),{},{radius:o,angle:mXe(p,n)}):null},uue=function(e){return!N.isValidElement(e)&&!at(e)&&typeof e!="boolean"?e.className:""};function Ab(t){"@babel/helpers - typeof";return Ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ab(t)}var gXe=["offset"];function yXe(t){return wXe(t)||bXe(t)||xXe(t)||vXe()}function vXe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xXe(t,e){if(t){if(typeof t=="string")return rj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rj(t,e)}}function bXe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wXe(t){if(Array.isArray(t))return rj(t)}function rj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function SXe(t,e){if(t==null)return{};var n=CXe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function CXe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function $H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$H(Object(n),!0).forEach(function(r){NXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$H(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NXe(t,e,n){return e=_Xe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Xe(t){var e=TXe(t,"string");return Ab(e)=="symbol"?e:e+""}function TXe(t,e){if(Ab(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ab(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ib(){return Ib=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ib.apply(this,arguments)}var kXe=function(e){var n=e.value,r=e.formatter,s=ht(e.children)?n:e.children;return at(r)?r(s):s},EXe=function(e,n){var r=_i(n-e),s=Math.min(Math.abs(n-e),360);return r*s},$Xe=function(e,n,r){var s=e.position,i=e.viewBox,o=e.offset,a=e.className,l=i,c=l.cx,u=l.cy,d=l.innerRadius,h=l.outerRadius,p=l.startAngle,m=l.endAngle,g=l.clockWise,y=(d+h)/2,v=EXe(p,m),x=v>=0?1:-1,b,S;s==="insideStart"?(b=p+x*o,S=g):s==="insideEnd"?(b=m-x*o,S=!g):s==="end"&&(b=m+x*o,S=g),S=v<=0?S:!S;var w=fn(c,u,y,b),C=fn(c,u,y,b+(S?1:-1)*359),_="M".concat(w.x,",").concat(w.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(S?0:1,`,
    `).concat(C.x,",").concat(C.y),T=ht(e.id)?Tf("recharts-radial-line-"):e.id;return F.createElement("text",Ib({},r,{dominantBaseline:"central",className:_t("recharts-radial-bar-label",a)}),F.createElement("defs",null,F.createElement("path",{id:T,d:_})),F.createElement("textPath",{xlinkHref:"#".concat(T)},n))},AXe=function(e){var n=e.viewBox,r=e.offset,s=e.position,i=n,o=i.cx,a=i.cy,l=i.innerRadius,c=i.outerRadius,u=i.startAngle,d=i.endAngle,h=(u+d)/2;if(s==="outside"){var p=fn(o,a,c+r,h),m=p.x,g=p.y;return{x:m,y:g,textAnchor:m>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var y=(l+c)/2,v=fn(o,a,y,h),x=v.x,b=v.y;return{x,y:b,textAnchor:"middle",verticalAnchor:"middle"}},IXe=function(e){var n=e.viewBox,r=e.parentViewBox,s=e.offset,i=e.position,o=n,a=o.x,l=o.y,c=o.width,u=o.height,d=u>=0?1:-1,h=d*s,p=d>0?"end":"start",m=d>0?"start":"end",g=c>=0?1:-1,y=g*s,v=g>0?"end":"start",x=g>0?"start":"end";if(i==="top"){var b={x:a+c/2,y:l-d*s,textAnchor:"middle",verticalAnchor:p};return Qr(Qr({},b),r?{height:Math.max(l-r.y,0),width:c}:{})}if(i==="bottom"){var S={x:a+c/2,y:l+u+h,textAnchor:"middle",verticalAnchor:m};return Qr(Qr({},S),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(i==="left"){var w={x:a-y,y:l+u/2,textAnchor:v,verticalAnchor:"middle"};return Qr(Qr({},w),r?{width:Math.max(w.x-r.x,0),height:u}:{})}if(i==="right"){var C={x:a+c+y,y:l+u/2,textAnchor:x,verticalAnchor:"middle"};return Qr(Qr({},C),r?{width:Math.max(r.x+r.width-C.x,0),height:u}:{})}var _=r?{width:c,height:u}:{};return i==="insideLeft"?Qr({x:a+y,y:l+u/2,textAnchor:x,verticalAnchor:"middle"},_):i==="insideRight"?Qr({x:a+c-y,y:l+u/2,textAnchor:v,verticalAnchor:"middle"},_):i==="insideTop"?Qr({x:a+c/2,y:l+h,textAnchor:"middle",verticalAnchor:m},_):i==="insideBottom"?Qr({x:a+c/2,y:l+u-h,textAnchor:"middle",verticalAnchor:p},_):i==="insideTopLeft"?Qr({x:a+y,y:l+h,textAnchor:x,verticalAnchor:m},_):i==="insideTopRight"?Qr({x:a+c-y,y:l+h,textAnchor:v,verticalAnchor:m},_):i==="insideBottomLeft"?Qr({x:a+y,y:l+u-h,textAnchor:x,verticalAnchor:p},_):i==="insideBottomRight"?Qr({x:a+c-y,y:l+u-h,textAnchor:v,verticalAnchor:p},_):dv(i)&&(ke(i.x)||Sh(i.x))&&(ke(i.y)||Sh(i.y))?Qr({x:a+Ti(i.x,c),y:l+Ti(i.y,u),textAnchor:"end",verticalAnchor:"end"},_):Qr({x:a+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},_)},OXe=function(e){return"cx"in e&&ke(e.cx)};function ps(t){var e=t.offset,n=e===void 0?5:e,r=SXe(t,gXe),s=Qr({offset:n},r),i=s.viewBox,o=s.position,a=s.value,l=s.children,c=s.content,u=s.className,d=u===void 0?"":u,h=s.textBreakAll;if(!i||ht(a)&&ht(l)&&!N.isValidElement(c)&&!at(c))return null;if(N.isValidElement(c))return N.cloneElement(c,s);var p;if(at(c)){if(p=N.createElement(c,s),N.isValidElement(p))return p}else p=kXe(s);var m=OXe(i),g=He(s,!0);if(m&&(o==="insideStart"||o==="insideEnd"||o==="end"))return $Xe(s,p,g);var y=m?AXe(s):IXe(s);return F.createElement(cp,Ib({className:_t("recharts-label",d)},g,y,{breakAll:h}),p)}ps.displayName="Label";var due=function(e){var n=e.cx,r=e.cy,s=e.angle,i=e.startAngle,o=e.endAngle,a=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,d=e.x,h=e.y,p=e.top,m=e.left,g=e.width,y=e.height,v=e.clockWise,x=e.labelViewBox;if(x)return x;if(ke(g)&&ke(y)){if(ke(d)&&ke(h))return{x:d,y:h,width:g,height:y};if(ke(p)&&ke(m))return{x:p,y:m,width:g,height:y}}return ke(d)&&ke(h)?{x:d,y:h,width:0,height:0}:ke(n)&&ke(r)?{cx:n,cy:r,startAngle:i||s||0,endAngle:o||s||0,innerRadius:c||0,outerRadius:u||l||a||0,clockWise:v}:e.viewBox?e.viewBox:{}},PXe=function(e,n){return e?e===!0?F.createElement(ps,{key:"label-implicit",viewBox:n}):is(e)?F.createElement(ps,{key:"label-implicit",viewBox:n,value:e}):N.isValidElement(e)?e.type===ps?N.cloneElement(e,{key:"label-implicit",viewBox:n}):F.createElement(ps,{key:"label-implicit",content:e,viewBox:n}):at(e)?F.createElement(ps,{key:"label-implicit",content:e,viewBox:n}):dv(e)?F.createElement(ps,Ib({viewBox:n},e,{key:"label-implicit"})):null:null},RXe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,i=due(e),o=$i(s,ps).map(function(l,c){return N.cloneElement(l,{viewBox:n||i,key:"label-".concat(c)})});if(!r)return o;var a=PXe(e.label,n||i);return[a].concat(yXe(o))};ps.parseViewBox=due;ps.renderCallByParent=RXe;function DXe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var jXe=DXe;const fue=nn(jXe);function Ob(t){"@babel/helpers - typeof";return Ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ob(t)}var MXe=["valueAccessor"],FXe=["data","dataKey","clockWise","id","textBreakAll"];function LXe(t){return WXe(t)||VXe(t)||zXe(t)||BXe()}function BXe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zXe(t,e){if(t){if(typeof t=="string")return sj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sj(t,e)}}function VXe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function WXe(t){if(Array.isArray(t))return sj(t)}function sj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w_(){return w_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w_.apply(this,arguments)}function AH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function IH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AH(Object(n),!0).forEach(function(r){UXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UXe(t,e,n){return e=GXe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GXe(t){var e=HXe(t,"string");return Ob(e)=="symbol"?e:e+""}function HXe(t,e){if(Ob(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ob(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OH(t,e){if(t==null)return{};var n=qXe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qXe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var KXe=function(e){return Array.isArray(e.value)?fue(e.value):e.value};function ba(t){var e=t.valueAccessor,n=e===void 0?KXe:e,r=OH(t,MXe),s=r.data,i=r.dataKey,o=r.clockWise,a=r.id,l=r.textBreakAll,c=OH(r,FXe);return!s||!s.length?null:F.createElement(At,{className:"recharts-label-list"},s.map(function(u,d){var h=ht(i)?n(u,d):Pn(u&&u.payload,i),p=ht(a)?{}:{id:"".concat(a,"-").concat(d)};return F.createElement(ps,w_({},He(u,!0),c,p,{parentViewBox:u.parentViewBox,value:h,textBreakAll:l,viewBox:ps.parseViewBox(ht(o)?u:IH(IH({},u),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}ba.displayName="LabelList";function XXe(t,e){return t?t===!0?F.createElement(ba,{key:"labelList-implicit",data:e}):F.isValidElement(t)||at(t)?F.createElement(ba,{key:"labelList-implicit",data:e,content:t}):dv(t)?F.createElement(ba,w_({data:e},t,{key:"labelList-implicit"})):null:null}function YXe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,s=$i(r,ba).map(function(o,a){return N.cloneElement(o,{data:e,key:"labelList-".concat(a)})});if(!n)return s;var i=XXe(t.label,e);return[i].concat(LXe(s))}ba.renderCallByParent=YXe;function Pb(t){"@babel/helpers - typeof";return Pb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pb(t)}function ij(){return ij=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ij.apply(this,arguments)}function PH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function RH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PH(Object(n),!0).forEach(function(r){QXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QXe(t,e,n){return e=ZXe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZXe(t){var e=JXe(t,"string");return Pb(e)=="symbol"?e:e+""}function JXe(t,e){if(Pb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Pb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eYe=function(e,n){var r=_i(n-e),s=Math.min(Math.abs(n-e),359.999);return r*s},_C=function(e){var n=e.cx,r=e.cy,s=e.radius,i=e.angle,o=e.sign,a=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(a?1:-1)+s,d=Math.asin(l/u)/b_,h=c?i:i+o*d,p=fn(n,r,u,h),m=fn(n,r,s,h),g=c?i-o*d:i,y=fn(n,r,u*Math.cos(d*b_),g);return{center:p,circleTangency:m,lineTangency:y,theta:d}},hue=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.startAngle,a=e.endAngle,l=eYe(o,a),c=o+l,u=fn(n,r,i,o),d=fn(n,r,i,c),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(s>0){var p=fn(n,r,s,o),m=fn(n,r,s,c);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=c),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},tYe=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,d=_i(u-c),h=_C({cx:n,cy:r,radius:i,angle:c,sign:d,cornerRadius:o,cornerIsExternal:l}),p=h.circleTangency,m=h.lineTangency,g=h.theta,y=_C({cx:n,cy:r,radius:i,angle:u,sign:-d,cornerRadius:o,cornerIsExternal:l}),v=y.circleTangency,x=y.lineTangency,b=y.theta,S=l?Math.abs(c-u):Math.abs(c-u)-g-b;if(S<0)return a?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):hue({cx:n,cy:r,innerRadius:s,outerRadius:i,startAngle:c,endAngle:u});var w="M ".concat(m.x,",").concat(m.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(s>0){var C=_C({cx:n,cy:r,radius:s,angle:c,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),_=C.circleTangency,T=C.lineTangency,k=C.theta,$=_C({cx:n,cy:r,radius:s,angle:u,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),O=$.circleTangency,P=$.lineTangency,D=$.theta,A=l?Math.abs(c-u):Math.abs(c-u)-k-D;if(A<0&&o===0)return"".concat(w,"L").concat(n,",").concat(r,"Z");w+="L".concat(P.x,",").concat(P.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(A>180),",").concat(+(d>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,"Z")}else w+="L".concat(n,",").concat(r,"Z");return w},nYe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},pue=function(e){var n=RH(RH({},nYe),e),r=n.cx,s=n.cy,i=n.innerRadius,o=n.outerRadius,a=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,u=n.startAngle,d=n.endAngle,h=n.className;if(o<i||u===d)return null;var p=_t("recharts-sector",h),m=o-i,g=Ti(a,m,0,!0),y;return g>0&&Math.abs(u-d)<360?y=tYe({cx:r,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):y=hue({cx:r,cy:s,innerRadius:i,outerRadius:o,startAngle:u,endAngle:d}),F.createElement("path",ij({},He(n,!0),{className:p,d:y,role:"img"}))};function Rb(t){"@babel/helpers - typeof";return Rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rb(t)}function oj(){return oj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oj.apply(this,arguments)}function DH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function jH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DH(Object(n),!0).forEach(function(r){rYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rYe(t,e,n){return e=sYe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sYe(t){var e=iYe(t,"string");return Rb(e)=="symbol"?e:e+""}function iYe(t,e){if(Rb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Rb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MH={curveBasisClosed:iBe,curveBasisOpen:oBe,curveBasis:sBe,curveBumpX:U4e,curveBumpY:G4e,curveLinearClosed:aBe,curveLinear:eE,curveMonotoneX:lBe,curveMonotoneY:cBe,curveNatural:uBe,curveStep:dBe,curveStepAfter:hBe,curveStepBefore:fBe},TC=function(e){return e.x===+e.x&&e.y===+e.y},Sx=function(e){return e.x},Cx=function(e){return e.y},oYe=function(e,n){if(at(e))return e;var r="curve".concat(Zk(e));return(r==="curveMonotone"||r==="curveBump")&&n?MH["".concat(r).concat(n==="vertical"?"Y":"X")]:MH[r]||eE},aYe=function(e){var n=e.type,r=n===void 0?"linear":n,s=e.points,i=s===void 0?[]:s,o=e.baseLine,a=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=oYe(r,a),d=c?i.filter(function(g){return TC(g)}):i,h;if(Array.isArray(o)){var p=c?o.filter(function(g){return TC(g)}):o,m=d.map(function(g,y){return jH(jH({},g),{},{base:p[y]})});return a==="vertical"?h=gC().y(Cx).x1(Sx).x0(function(g){return g.base.x}):h=gC().x(Sx).y1(Cx).y0(function(g){return g.base.y}),h.defined(TC).curve(u),h(m)}return a==="vertical"&&ke(o)?h=gC().y(Cx).x1(Sx).x0(o):ke(o)?h=gC().x(Sx).y1(Cx).y0(o):h=ole().x(Sx).y(Cx),h.defined(TC).curve(u),h(d)},Gd=function(e){var n=e.className,r=e.points,s=e.path,i=e.pathRef;if((!r||!r.length)&&!s)return null;var o=r&&r.length?aYe(e):s;return F.createElement("path",oj({},He(e,!1),HN(e),{className:_t("recharts-curve",n),d:o,ref:i}))},mue={exports:{}},lYe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",cYe=lYe,uYe=cYe;function gue(){}function yue(){}yue.resetWarningCache=gue;var dYe=function(){function t(r,s,i,o,a,l){if(l!==uYe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:yue,resetWarningCache:gue};return n.PropTypes=n,n};mue.exports=dYe();var gE=mue.exports;const pn=nn(gE);var fYe=Object.getOwnPropertyNames,hYe=Object.getOwnPropertySymbols,pYe=Object.prototype.hasOwnProperty;function FH(t,e){return function(r,s,i){return t(r,s,i)&&e(r,s,i)}}function kC(t){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,s);var i=s.cache,o=i.get(n),a=i.get(r);if(o&&a)return o===r&&a===n;i.set(n,r),i.set(r,n);var l=t(n,r,s);return i.delete(n),i.delete(r),l}}function LH(t){return fYe(t).concat(hYe(t))}var mYe=Object.hasOwn||function(t,e){return pYe.call(t,e)};function Bp(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var gYe="__v",yYe="__o",vYe="_owner",BH=Object.getOwnPropertyDescriptor,zH=Object.keys;function xYe(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function bYe(t,e){return Bp(t.getTime(),e.getTime())}function wYe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function SYe(t,e){return t===e}function VH(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),i=t.entries(),o,a,l=0;(o=i.next())&&!o.done;){for(var c=e.entries(),u=!1,d=0;(a=c.next())&&!a.done;){if(s[d]){d++;continue}var h=o.value,p=a.value;if(n.equals(h[0],p[0],l,d,t,e,n)&&n.equals(h[1],p[1],h[0],p[0],t,e,n)){u=s[d]=!0;break}d++}if(!u)return!1;l++}return!0}var CYe=Bp;function NYe(t,e,n){var r=zH(t),s=r.length;if(zH(e).length!==s)return!1;for(;s-- >0;)if(!vue(t,e,n,r[s]))return!1;return!0}function Nx(t,e,n){var r=LH(t),s=r.length;if(LH(e).length!==s)return!1;for(var i,o,a;s-- >0;)if(i=r[s],!vue(t,e,n,i)||(o=BH(t,i),a=BH(e,i),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function _Ye(t,e){return Bp(t.valueOf(),e.valueOf())}function TYe(t,e){return t.source===e.source&&t.flags===e.flags}function WH(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),i=t.values(),o,a;(o=i.next())&&!o.done;){for(var l=e.values(),c=!1,u=0;(a=l.next())&&!a.done;){if(!s[u]&&n.equals(o.value,a.value,o.value,a.value,t,e,n)){c=s[u]=!0;break}u++}if(!c)return!1}return!0}function kYe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function EYe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function vue(t,e,n,r){return(r===vYe||r===yYe||r===gYe)&&(t.$$typeof||e.$$typeof)?!0:mYe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var $Ye="[object Arguments]",AYe="[object Boolean]",IYe="[object Date]",OYe="[object Error]",PYe="[object Map]",RYe="[object Number]",DYe="[object Object]",jYe="[object RegExp]",MYe="[object Set]",FYe="[object String]",LYe="[object URL]",BYe=Array.isArray,UH=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,GH=Object.assign,zYe=Object.prototype.toString.call.bind(Object.prototype.toString);function VYe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,s=t.areFunctionsEqual,i=t.areMapsEqual,o=t.areNumbersEqual,a=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,c=t.areRegExpsEqual,u=t.areSetsEqual,d=t.areTypedArraysEqual,h=t.areUrlsEqual;return function(m,g,y){if(m===g)return!0;if(m==null||g==null)return!1;var v=typeof m;if(v!==typeof g)return!1;if(v!=="object")return v==="number"?o(m,g,y):v==="function"?s(m,g,y):!1;var x=m.constructor;if(x!==g.constructor)return!1;if(x===Object)return a(m,g,y);if(BYe(m))return e(m,g,y);if(UH!=null&&UH(m))return d(m,g,y);if(x===Date)return n(m,g,y);if(x===RegExp)return c(m,g,y);if(x===Map)return i(m,g,y);if(x===Set)return u(m,g,y);var b=zYe(m);return b===IYe?n(m,g,y):b===jYe?c(m,g,y):b===PYe?i(m,g,y):b===MYe?u(m,g,y):b===DYe?typeof m.then!="function"&&typeof g.then!="function"&&a(m,g,y):b===LYe?h(m,g,y):b===OYe?r(m,g,y):b===$Ye?a(m,g,y):b===AYe||b===RYe||b===FYe?l(m,g,y):!1}}function WYe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,s={areArraysEqual:r?Nx:xYe,areDatesEqual:bYe,areErrorsEqual:wYe,areFunctionsEqual:SYe,areMapsEqual:r?FH(VH,Nx):VH,areNumbersEqual:CYe,areObjectsEqual:r?Nx:NYe,arePrimitiveWrappersEqual:_Ye,areRegExpsEqual:TYe,areSetsEqual:r?FH(WH,Nx):WH,areTypedArraysEqual:r?Nx:kYe,areUrlsEqual:EYe};if(n&&(s=GH({},s,n(s))),e){var i=kC(s.areArraysEqual),o=kC(s.areMapsEqual),a=kC(s.areObjectsEqual),l=kC(s.areSetsEqual);s=GH({},s,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:l})}return s}function UYe(t){return function(e,n,r,s,i,o,a){return t(e,n,a)}}function GYe(t){var e=t.circular,n=t.comparator,r=t.createState,s=t.equals,i=t.strict;if(r)return function(l,c){var u=r(),d=u.cache,h=d===void 0?e?new WeakMap:void 0:d,p=u.meta;return n(l,c,{cache:h,equals:s,meta:p,strict:i})};if(e)return function(l,c){return n(l,c,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var o={cache:void 0,equals:s,meta:void 0,strict:i};return function(l,c){return n(l,c,o)}}var HYe=$f();$f({strict:!0});$f({circular:!0});$f({circular:!0,strict:!0});$f({createInternalComparator:function(){return Bp}});$f({strict:!0,createInternalComparator:function(){return Bp}});$f({circular:!0,createInternalComparator:function(){return Bp}});$f({circular:!0,createInternalComparator:function(){return Bp},strict:!0});function $f(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,s=t.createState,i=t.strict,o=i===void 0?!1:i,a=WYe(t),l=VYe(a),c=r?r(l):UYe(l);return GYe({circular:n,comparator:l,createState:s,equals:c,strict:o})}function qYe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function HH(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function s(i){n<0&&(n=i),i-n>e?(t(i),n=-1):qYe(s)};requestAnimationFrame(r)}function aj(t){"@babel/helpers - typeof";return aj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aj(t)}function KYe(t){return ZYe(t)||QYe(t)||YYe(t)||XYe()}function XYe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YYe(t,e){if(t){if(typeof t=="string")return qH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qH(t,e)}}function qH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function QYe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ZYe(t){if(Array.isArray(t))return t}function JYe(){var t={},e=function(){return null},n=!1,r=function s(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,a=KYe(o),l=a[0],c=a.slice(1);if(typeof l=="number"){HH(s.bind(null,c),l);return}s(l),HH(s.bind(null,c));return}aj(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,r(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function Db(t){"@babel/helpers - typeof";return Db=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Db(t)}function KH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function XH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KH(Object(n),!0).forEach(function(r){xue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xue(t,e,n){return e=eQe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eQe(t){var e=tQe(t,"string");return Db(e)==="symbol"?e:String(e)}function tQe(t,e){if(Db(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Db(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nQe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,s){return r.filter(function(i){return s.includes(i)})})},rQe=function(e){return e},sQe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},x0=function(e,n){return Object.keys(n).reduce(function(r,s){return XH(XH({},r),{},xue({},s,e(s,n[s])))},{})},YH=function(e,n,r){return e.map(function(s){return"".concat(sQe(s)," ").concat(n,"ms ").concat(r)}).join(",")};function iQe(t,e){return lQe(t)||aQe(t,e)||bue(t,e)||oQe()}function oQe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aQe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function lQe(t){if(Array.isArray(t))return t}function cQe(t){return fQe(t)||dQe(t)||bue(t)||uQe()}function uQe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bue(t,e){if(t){if(typeof t=="string")return lj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lj(t,e)}}function dQe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fQe(t){if(Array.isArray(t))return lj(t)}function lj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var S_=1e-4,wue=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},Sue=function(e,n){return e.map(function(r,s){return r*Math.pow(n,s)}).reduce(function(r,s){return r+s})},QH=function(e,n){return function(r){var s=wue(e,n);return Sue(s,r)}},hQe=function(e,n){return function(r){var s=wue(e,n),i=[].concat(cQe(s.map(function(o,a){return o*a}).slice(1)),[0]);return Sue(i,r)}},ZH=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0],i=n[1],o=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":s=0,i=0,o=1,a=1;break;case"ease":s=.25,i=.1,o=.25,a=1;break;case"ease-in":s=.42,i=0,o=1,a=1;break;case"ease-out":s=.42,i=0,o=.58,a=1;break;case"ease-in-out":s=0,i=0,o=.58,a=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),u=iQe(c,4);s=u[0],i=u[1],o=u[2],a=u[3]}}}var d=QH(s,o),h=QH(i,a),p=hQe(s,o),m=function(v){return v>1?1:v<0?0:v},g=function(v){for(var x=v>1?1:v,b=x,S=0;S<8;++S){var w=d(b)-x,C=p(b);if(Math.abs(w-x)<S_||C<S_)return h(b);b=m(b-w/C)}return h(b)};return g.isStepper=!1,g},pQe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,s=e.damping,i=s===void 0?8:s,o=e.dt,a=o===void 0?17:o,l=function(u,d,h){var p=-(u-d)*r,m=h*i,g=h+(p-m)*a/1e3,y=h*a/1e3+u;return Math.abs(y-d)<S_&&Math.abs(g)<S_?[d,0]:[y,g]};return l.isStepper=!0,l.dt=a,l},mQe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return ZH(s);case"spring":return pQe();default:if(s.split("(")[0]==="cubic-bezier")return ZH(s)}return typeof s=="function"?s:null};function jb(t){"@babel/helpers - typeof";return jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jb(t)}function JH(t){return vQe(t)||yQe(t)||Cue(t)||gQe()}function gQe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yQe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vQe(t){if(Array.isArray(t))return uj(t)}function e9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ks(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e9(Object(n),!0).forEach(function(r){cj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cj(t,e,n){return e=xQe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xQe(t){var e=bQe(t,"string");return jb(e)==="symbol"?e:String(e)}function bQe(t,e){if(jb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wQe(t,e){return NQe(t)||CQe(t,e)||Cue(t,e)||SQe()}function SQe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cue(t,e){if(t){if(typeof t=="string")return uj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uj(t,e)}}function uj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function CQe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function NQe(t){if(Array.isArray(t))return t}var C_=function(e,n,r){return e+(n-e)*r},dj=function(e){var n=e.from,r=e.to;return n!==r},_Qe=function t(e,n,r){var s=x0(function(i,o){if(dj(o)){var a=e(o.from,o.to,o.velocity),l=wQe(a,2),c=l[0],u=l[1];return ks(ks({},o),{},{from:c,velocity:u})}return o},n);return r<1?x0(function(i,o){return dj(o)?ks(ks({},o),{},{velocity:C_(o.velocity,s[i].velocity,r),from:C_(o.from,s[i].from,r)}):o},n):t(e,s,r-1)};const TQe=function(t,e,n,r,s){var i=nQe(t,e),o=i.reduce(function(y,v){return ks(ks({},y),{},cj({},v,[t[v],e[v]]))},{}),a=i.reduce(function(y,v){return ks(ks({},y),{},cj({},v,{from:t[v],velocity:0,to:e[v]}))},{}),l=-1,c,u,d=function(){return null},h=function(){return x0(function(v,x){return x.from},a)},p=function(){return!Object.values(a).filter(dj).length},m=function(v){c||(c=v);var x=v-c,b=x/n.dt;a=_Qe(n,a,b),s(ks(ks(ks({},t),e),h())),c=v,p()||(l=requestAnimationFrame(d))},g=function(v){u||(u=v);var x=(v-u)/r,b=x0(function(w,C){return C_.apply(void 0,JH(C).concat([n(x)]))},o);if(s(ks(ks(ks({},t),e),b)),x<1)l=requestAnimationFrame(d);else{var S=x0(function(w,C){return C_.apply(void 0,JH(C).concat([n(1)]))},o);s(ks(ks(ks({},t),e),S))}};return d=n.isStepper?m:g,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function cy(t){"@babel/helpers - typeof";return cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cy(t)}var kQe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function EQe(t,e){if(t==null)return{};var n=$Qe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $Qe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function NO(t){return PQe(t)||OQe(t)||IQe(t)||AQe()}function AQe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IQe(t,e){if(t){if(typeof t=="string")return fj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fj(t,e)}}function OQe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function PQe(t){if(Array.isArray(t))return fj(t)}function fj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function t9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function za(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t9(Object(n),!0).forEach(function(r){Gx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gx(t,e,n){return e=Nue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DQe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nue(r.key),r)}}function jQe(t,e,n){return e&&DQe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Nue(t){var e=MQe(t,"string");return cy(e)==="symbol"?e:String(e)}function MQe(t,e){if(cy(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cy(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FQe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hj(t,e)}function hj(t,e){return hj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},hj(t,e)}function LQe(t){var e=BQe();return function(){var r=N_(t),s;if(e){var i=N_(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return pj(this,s)}}function pj(t,e){if(e&&(cy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mj(t)}function mj(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BQe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function N_(t){return N_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},N_(t)}var Do=function(t){FQe(n,t);var e=LQe(n);function n(r,s){var i;RQe(this,n),i=e.call(this,r,s);var o=i.props,a=o.isActive,l=o.attributeName,c=o.from,u=o.to,d=o.steps,h=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(mj(i)),i.changeStyle=i.changeStyle.bind(mj(i)),!a||p<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:u}),pj(i);if(d&&d.length)i.state={style:d[0].style};else if(c){if(typeof h=="function")return i.state={style:c},pj(i);i.state={style:l?Gx({},l,c):c}}else i.state={style:{}};return i}return jQe(n,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,a=i.canBegin,l=i.attributeName,c=i.shouldReAnimate,u=i.to,d=i.from,h=this.state.style;if(a){if(!o){var p={style:l?Gx({},l,u):u};this.state&&h&&(l&&h[l]!==u||!l&&h!==u)&&this.setState(p);return}if(!(HYe(s.to,u)&&s.canBegin&&s.isActive)){var m=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=m||c?d:s.to;if(this.state&&h){var y={style:l?Gx({},l,g):g};(l&&h[l]!==g||!l&&h!==g)&&this.setState(y)}this.runAnimation(za(za({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,a=s.to,l=s.duration,c=s.easing,u=s.begin,d=s.onAnimationEnd,h=s.onAnimationStart,p=TQe(o,a,mQe(c),l,this.changeStyle),m=function(){i.stopJSAnimation=p()};this.manager.start([h,u,m,l,d])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,a=s.begin,l=s.onAnimationStart,c=o[0],u=c.style,d=c.duration,h=d===void 0?0:d,p=function(g,y,v){if(v===0)return g;var x=y.duration,b=y.easing,S=b===void 0?"ease":b,w=y.style,C=y.properties,_=y.onAnimationEnd,T=v>0?o[v-1]:y,k=C||Object.keys(w);if(typeof S=="function"||S==="spring")return[].concat(NO(g),[i.runJSAnimation.bind(i,{from:T.style,to:w,duration:x,easing:S}),x]);var $=YH(k,x,S),O=za(za(za({},T.style),w),{},{transition:$});return[].concat(NO(g),[O,x,_]).filter(rQe)};return this.manager.start([l].concat(NO(o.reduce(p,[u,Math.max(h,a)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=JYe());var i=s.begin,o=s.duration,a=s.attributeName,l=s.to,c=s.easing,u=s.onAnimationStart,d=s.onAnimationEnd,h=s.steps,p=s.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof c=="function"||typeof p=="function"||c==="spring"){this.runJSAnimation(s);return}if(h.length>1){this.runStepAnimation(s);return}var g=a?Gx({},a,l):l,y=YH(Object.keys(g),o,c);m.start([u,i,za(za({},g),{},{transition:y}),o,d])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var a=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var l=EQe(s,kQe),c=N.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!a||c===0||o<=0)return i;var d=function(p){var m=p.props,g=m.style,y=g===void 0?{}:g,v=m.className,x=N.cloneElement(p,za(za({},l),{},{style:za(za({},y),u),className:v}));return x};return c===1?d(N.Children.only(i)):F.createElement("div",null,N.Children.map(i,function(h){return d(h)}))}}]),n}(N.PureComponent);Do.displayName="Animate";Do.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Do.propTypes={from:pn.oneOfType([pn.object,pn.string]),to:pn.oneOfType([pn.object,pn.string]),attributeName:pn.string,duration:pn.number,begin:pn.number,easing:pn.oneOfType([pn.string,pn.func]),steps:pn.arrayOf(pn.shape({duration:pn.number.isRequired,style:pn.object.isRequired,easing:pn.oneOfType([pn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),pn.func]),properties:pn.arrayOf("string"),onAnimationEnd:pn.func})),children:pn.oneOfType([pn.node,pn.func]),isActive:pn.bool,canBegin:pn.bool,onAnimationEnd:pn.func,shouldReAnimate:pn.bool,onAnimationStart:pn.func,onAnimationReStart:pn.func};function Mb(t){"@babel/helpers - typeof";return Mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mb(t)}function __(){return __=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},__.apply(this,arguments)}function zQe(t,e){return GQe(t)||UQe(t,e)||WQe(t,e)||VQe()}function VQe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WQe(t,e){if(t){if(typeof t=="string")return n9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n9(t,e)}}function n9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function UQe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function GQe(t){if(Array.isArray(t))return t}function r9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function s9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r9(Object(n),!0).forEach(function(r){HQe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HQe(t,e,n){return e=qQe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qQe(t){var e=KQe(t,"string");return Mb(e)=="symbol"?e:e+""}function KQe(t,e){if(Mb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Mb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var i9=function(e,n,r,s,i){var o=Math.min(Math.abs(r)/2,Math.abs(s)/2),a=s>=0?1:-1,l=r>=0?1:-1,c=s>=0&&r>=0||s<0&&r<0?1:0,u;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],h=0,p=4;h<p;h++)d[h]=i[h]>o?o:i[h];u="M".concat(e,",").concat(n+a*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(n)),u+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+a*d[1])),u+="L ".concat(e+r,",").concat(n+s-a*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(n+s)),u+="L ".concat(e+l*d[3],",").concat(n+s),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+s-a*d[3])),u+="Z"}else if(o>0&&i===+i&&i>0){var m=Math.min(o,i);u="M ".concat(e,",").concat(n+a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(n,`
            L `).concat(e+r-l*m,",").concat(n,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(n+a*m,`
            L `).concat(e+r,",").concat(n+s-a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(n+s,`
            L `).concat(e+l*m,",").concat(n+s,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(n+s-a*m," Z")}else u="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return u},XQe=function(e,n){if(!e||!n)return!1;var r=e.x,s=e.y,i=n.x,o=n.y,a=n.width,l=n.height;if(Math.abs(a)>0&&Math.abs(l)>0){var c=Math.min(i,i+a),u=Math.max(i,i+a),d=Math.min(o,o+l),h=Math.max(o,o+l);return r>=c&&r<=u&&s>=d&&s<=h}return!1},YQe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},p4=function(e){var n=s9(s9({},YQe),e),r=N.useRef(),s=N.useState(-1),i=zQe(s,2),o=i[0],a=i[1];N.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var S=r.current.getTotalLength();S&&a(S)}catch{}},[]);var l=n.x,c=n.y,u=n.width,d=n.height,h=n.radius,p=n.className,m=n.animationEasing,g=n.animationDuration,y=n.animationBegin,v=n.isAnimationActive,x=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||u===0||d===0)return null;var b=_t("recharts-rectangle",p);return x?F.createElement(Do,{canBegin:o>0,from:{width:u,height:d,x:l,y:c},to:{width:u,height:d,x:l,y:c},duration:g,animationEasing:m,isActive:x},function(S){var w=S.width,C=S.height,_=S.x,T=S.y;return F.createElement(Do,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,isActive:v,easing:m},F.createElement("path",__({},He(n,!0),{className:b,d:i9(_,T,w,C,h),ref:r})))}):F.createElement("path",__({},He(n,!0),{className:b,d:i9(l,c,u,d,h)}))},QQe=["points","className","baseLinePoints","connectNulls"];function Vm(){return Vm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vm.apply(this,arguments)}function ZQe(t,e){if(t==null)return{};var n=JQe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function JQe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function o9(t){return rZe(t)||nZe(t)||tZe(t)||eZe()}function eZe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tZe(t,e){if(t){if(typeof t=="string")return gj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gj(t,e)}}function nZe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rZe(t){if(Array.isArray(t))return gj(t)}function gj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a9=function(e){return e&&e.x===+e.x&&e.y===+e.y},sZe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){a9(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),a9(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},b0=function(e,n){var r=sZe(e);n&&(r=[r.reduce(function(i,o){return[].concat(o9(i),o9(o))},[])]);var s=r.map(function(i){return i.reduce(function(o,a,l){return"".concat(o).concat(l===0?"M":"L").concat(a.x,",").concat(a.y)},"")}).join("");return r.length===1?"".concat(s,"Z"):s},iZe=function(e,n,r){var s=b0(e,r);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(b0(n.reverse(),r).slice(1))},_ue=function(e){var n=e.points,r=e.className,s=e.baseLinePoints,i=e.connectNulls,o=ZQe(e,QQe);if(!n||!n.length)return null;var a=_t("recharts-polygon",r);if(s&&s.length){var l=o.stroke&&o.stroke!=="none",c=iZe(n,s,i);return F.createElement("g",{className:a},F.createElement("path",Vm({},He(o,!0),{fill:c.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:c})),l?F.createElement("path",Vm({},He(o,!0),{fill:"none",d:b0(n,i)})):null,l?F.createElement("path",Vm({},He(o,!0),{fill:"none",d:b0(s,i)})):null)}var u=b0(n,i);return F.createElement("path",Vm({},He(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",className:a,d:u}))};function yj(){return yj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yj.apply(this,arguments)}var Nv=function(e){var n=e.cx,r=e.cy,s=e.r,i=e.className,o=_t("recharts-dot",i);return n===+n&&r===+r&&s===+s?F.createElement("circle",yj({},He(e,!1),HN(e),{className:o,cx:n,cy:r,r:s})):null};function Fb(t){"@babel/helpers - typeof";return Fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fb(t)}var oZe=["x","y","top","left","width","height","className"];function vj(){return vj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vj.apply(this,arguments)}function l9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function aZe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l9(Object(n),!0).forEach(function(r){lZe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lZe(t,e,n){return e=cZe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cZe(t){var e=uZe(t,"string");return Fb(e)=="symbol"?e:e+""}function uZe(t,e){if(Fb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Fb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dZe(t,e){if(t==null)return{};var n=fZe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fZe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var hZe=function(e,n,r,s,i,o){return"M".concat(e,",").concat(i,"v").concat(s,"M").concat(o,",").concat(n,"h").concat(r)},pZe=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,i=s===void 0?0:s,o=e.top,a=o===void 0?0:o,l=e.left,c=l===void 0?0:l,u=e.width,d=u===void 0?0:u,h=e.height,p=h===void 0?0:h,m=e.className,g=dZe(e,oZe),y=aZe({x:r,y:i,top:a,left:c,width:d,height:p},g);return!ke(r)||!ke(i)||!ke(d)||!ke(p)||!ke(a)||!ke(c)?null:F.createElement("path",vj({},He(y,!0),{className:_t("recharts-cross",m),d:hZe(r,i,d,p,a,c)}))},mZe=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function Lb(t){"@babel/helpers - typeof";return Lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lb(t)}function gZe(t,e){if(t==null)return{};var n=yZe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yZe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ru(){return Ru=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ru.apply(this,arguments)}function c9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Bb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c9(Object(n),!0).forEach(function(r){vZe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vZe(t,e,n){return e=xZe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xZe(t){var e=bZe(t,"string");return Lb(e)=="symbol"?e:e+""}function bZe(t,e){if(Lb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Lb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wZe=function(e,n,r,s){var i="";return s.forEach(function(o,a){var l=fn(n,r,e,o);a?i+="L ".concat(l.x,",").concat(l.y):i+="M ".concat(l.x,",").concat(l.y)}),i+="Z",i},SZe=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.polarAngles,a=e.radialLines;if(!o||!o.length||!a)return null;var l=Bb({stroke:"#ccc"},He(e,!1));return F.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(c){var u=fn(n,r,s,c),d=fn(n,r,i,c);return F.createElement("line",Ru({},l,{key:"line-".concat(c),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},CZe=function(e){var n=e.cx,r=e.cy,s=e.radius,i=e.index,o=Bb(Bb({stroke:"#ccc"},He(e,!1)),{},{fill:"none"});return F.createElement("circle",Ru({},o,{className:_t("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(i),cx:n,cy:r,r:s}))},NZe=function(e){var n=e.radius,r=e.index,s=Bb(Bb({stroke:"#ccc"},He(e,!1)),{},{fill:"none"});return F.createElement("path",Ru({},s,{className:_t("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:wZe(n,e.cx,e.cy,e.polarAngles)}))},_Ze=function(e){var n=e.polarRadius,r=e.gridType;return!n||!n.length?null:F.createElement("g",{className:"recharts-polar-grid-concentric"},n.map(function(s,i){var o=i;return r==="circle"?F.createElement(CZe,Ru({key:o},e,{radius:s,index:i})):F.createElement(NZe,Ru({key:o},e,{radius:s,index:i}))}))},Tue=function(e){var n=e.cx,r=n===void 0?0:n,s=e.cy,i=s===void 0?0:s,o=e.innerRadius,a=o===void 0?0:o,l=e.outerRadius,c=l===void 0?0:l,u=e.gridType,d=u===void 0?"polygon":u,h=e.radialLines,p=h===void 0?!0:h,m=gZe(e,mZe);return c<=0?null:F.createElement("g",{className:"recharts-polar-grid"},F.createElement(SZe,Ru({cx:r,cy:i,innerRadius:a,outerRadius:c,gridType:d,radialLines:p},m)),F.createElement(_Ze,Ru({cx:r,cy:i,innerRadius:a,outerRadius:c,gridType:d,radialLines:p},m)))};Tue.displayName="PolarGrid";var TZe=fE,kZe=Rce,EZe=Fc;function $Ze(t,e){return t&&t.length?TZe(t,EZe(e),kZe):void 0}var AZe=$Ze;const IZe=nn(AZe);var OZe=fE,PZe=Fc,RZe=Dce;function DZe(t,e){return t&&t.length?OZe(t,PZe(e),RZe):void 0}var jZe=DZe;const MZe=nn(jZe);var FZe=["cx","cy","angle","ticks","axisLine"],LZe=["ticks","tick","angle","tickFormatter","stroke"];function uy(t){"@babel/helpers - typeof";return uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uy(t)}function w0(){return w0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w0.apply(this,arguments)}function u9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Yf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u9(Object(n),!0).forEach(function(r){yE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function d9(t,e){if(t==null)return{};var n=BZe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function BZe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function zZe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Eue(r.key),r)}}function VZe(t,e,n){return e&&f9(t.prototype,e),n&&f9(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function WZe(t,e,n){return e=T_(e),UZe(t,kue()?Reflect.construct(e,n||[],T_(t).constructor):e.apply(t,n))}function UZe(t,e){if(e&&(uy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GZe(t)}function GZe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kue(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kue=function(){return!!t})()}function T_(t){return T_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},T_(t)}function HZe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xj(t,e)}function xj(t,e){return xj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},xj(t,e)}function yE(t,e,n){return e=Eue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eue(t){var e=qZe(t,"string");return uy(e)=="symbol"?e:e+""}function qZe(t,e){if(uy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(uy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _v=function(t){function e(){return zZe(this,e),WZe(this,e,arguments)}return HZe(e,t),VZe(e,[{key:"getTickValueCoord",value:function(r){var s=r.coordinate,i=this.props,o=i.angle,a=i.cx,l=i.cy;return fn(a,l,s,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,s;switch(r){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.angle,a=r.ticks,l=IZe(a,function(u){return u.coordinate||0}),c=MZe(a,function(u){return u.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:c.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.angle,a=r.ticks,l=r.axisLine,c=d9(r,FZe),u=a.reduce(function(m,g){return[Math.min(m[0],g.coordinate),Math.max(m[1],g.coordinate)]},[1/0,-1/0]),d=fn(s,i,u[0],o),h=fn(s,i,u[1],o),p=Yf(Yf(Yf({},He(c,!1)),{},{fill:"none"},He(l,!1)),{},{x1:d.x,y1:d.y,x2:h.x,y2:h.y});return F.createElement("line",w0({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var r=this,s=this.props,i=s.ticks,o=s.tick,a=s.angle,l=s.tickFormatter,c=s.stroke,u=d9(s,LZe),d=this.getTickTextAnchor(),h=He(u,!1),p=He(o,!1),m=i.map(function(g,y){var v=r.getTickValueCoord(g),x=Yf(Yf(Yf(Yf({textAnchor:d,transform:"rotate(".concat(90-a,", ").concat(v.x,", ").concat(v.y,")")},h),{},{stroke:"none",fill:c},p),{},{index:y},v),{},{payload:g});return F.createElement(At,w0({className:_t("recharts-polar-radius-axis-tick",uue(o)),key:"tick-".concat(g.coordinate)},af(r.props,g,y)),e.renderTickItem(o,x,l?l(g.value,y):g.value))});return F.createElement(At,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,s=r.ticks,i=r.axisLine,o=r.tick;return!s||!s.length?null:F.createElement(At,{className:_t("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),ps.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,s,i){var o;return F.isValidElement(r)?o=F.cloneElement(r,s):at(r)?o=r(s):o=F.createElement(cp,w0({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(N.PureComponent);yE(_v,"displayName","PolarRadiusAxis");yE(_v,"axisType","radiusAxis");yE(_v,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function dy(t){"@babel/helpers - typeof";return dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dy(t)}function fh(){return fh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fh.apply(this,arguments)}function h9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Qf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h9(Object(n),!0).forEach(function(r){vE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KZe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Aue(r.key),r)}}function XZe(t,e,n){return e&&p9(t.prototype,e),n&&p9(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function YZe(t,e,n){return e=k_(e),QZe(t,$ue()?Reflect.construct(e,n||[],k_(t).constructor):e.apply(t,n))}function QZe(t,e){if(e&&(dy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZZe(t)}function ZZe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $ue(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($ue=function(){return!!t})()}function k_(t){return k_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},k_(t)}function JZe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bj(t,e)}function bj(t,e){return bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},bj(t,e)}function vE(t,e,n){return e=Aue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aue(t){var e=eJe(t,"string");return dy(e)=="symbol"?e:e+""}function eJe(t,e){if(dy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tJe=Math.PI/180,m9=1e-5,Tv=function(t){function e(){return KZe(this,e),YZe(this,e,arguments)}return JZe(e,t),XZe(e,[{key:"getTickLineCoord",value:function(r){var s=this.props,i=s.cx,o=s.cy,a=s.radius,l=s.orientation,c=s.tickSize,u=c||8,d=fn(i,o,a,r.coordinate),h=fn(i,o,a+(l==="inner"?-1:1)*u,r.coordinate);return{x1:d.x,y1:d.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(r){var s=this.props.orientation,i=Math.cos(-r.coordinate*tJe),o;return i>m9?o=s==="outer"?"start":"end":i<-m9?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.radius,a=r.axisLine,l=r.axisLineType,c=Qf(Qf({},He(this.props,!1)),{},{fill:"none"},He(a,!1));if(l==="circle")return F.createElement(Nv,fh({className:"recharts-polar-angle-axis-line"},c,{cx:s,cy:i,r:o}));var u=this.props.ticks,d=u.map(function(h){return fn(s,i,o,h.coordinate)});return F.createElement(_ue,fh({className:"recharts-polar-angle-axis-line"},c,{points:d}))}},{key:"renderTicks",value:function(){var r=this,s=this.props,i=s.ticks,o=s.tick,a=s.tickLine,l=s.tickFormatter,c=s.stroke,u=He(this.props,!1),d=He(o,!1),h=Qf(Qf({},u),{},{fill:"none"},He(a,!1)),p=i.map(function(m,g){var y=r.getTickLineCoord(m),v=r.getTickTextAnchor(m),x=Qf(Qf(Qf({textAnchor:v},u),{},{stroke:"none",fill:c},d),{},{index:g,payload:m,x:y.x2,y:y.y2});return F.createElement(At,fh({className:_t("recharts-polar-angle-axis-tick",uue(o)),key:"tick-".concat(m.coordinate)},af(r.props,m,g)),a&&F.createElement("line",fh({className:"recharts-polar-angle-axis-tick-line"},h,y)),o&&e.renderTickItem(o,x,l?l(m.value,g):m.value))});return F.createElement(At,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,s=r.ticks,i=r.radius,o=r.axisLine;return i<=0||!s||!s.length?null:F.createElement(At,{className:_t("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,s,i){var o;return F.isValidElement(r)?o=F.cloneElement(r,s):at(r)?o=r(s):o=F.createElement(cp,fh({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(N.PureComponent);vE(Tv,"displayName","PolarAngleAxis");vE(Tv,"axisType","angleAxis");vE(Tv,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var nJe=Ale,rJe=nJe(Object.getPrototypeOf,Object),sJe=rJe,iJe=Vu,oJe=sJe,aJe=Wu,lJe="[object Object]",cJe=Function.prototype,uJe=Object.prototype,Iue=cJe.toString,dJe=uJe.hasOwnProperty,fJe=Iue.call(Object);function hJe(t){if(!aJe(t)||iJe(t)!=lJe)return!1;var e=oJe(t);if(e===null)return!0;var n=dJe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Iue.call(n)==fJe}var pJe=hJe;const mJe=nn(pJe);var gJe=Vu,yJe=Wu,vJe="[object Boolean]";function xJe(t){return t===!0||t===!1||yJe(t)&&gJe(t)==vJe}var bJe=xJe;const wJe=nn(bJe);function zb(t){"@babel/helpers - typeof";return zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zb(t)}function E_(){return E_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},E_.apply(this,arguments)}function SJe(t,e){return TJe(t)||_Je(t,e)||NJe(t,e)||CJe()}function CJe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NJe(t,e){if(t){if(typeof t=="string")return g9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g9(t,e)}}function g9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _Je(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function TJe(t){if(Array.isArray(t))return t}function y9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function v9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y9(Object(n),!0).forEach(function(r){kJe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kJe(t,e,n){return e=EJe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EJe(t){var e=$Je(t,"string");return zb(e)=="symbol"?e:e+""}function $Je(t,e){if(zb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var x9=function(e,n,r,s,i){var o=r-s,a;return a="M ".concat(e,",").concat(n),a+="L ".concat(e+r,",").concat(n),a+="L ".concat(e+r-o/2,",").concat(n+i),a+="L ".concat(e+r-o/2-s,",").concat(n+i),a+="L ".concat(e,",").concat(n," Z"),a},AJe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},IJe=function(e){var n=v9(v9({},AJe),e),r=N.useRef(),s=N.useState(-1),i=SJe(s,2),o=i[0],a=i[1];N.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var l=n.x,c=n.y,u=n.upperWidth,d=n.lowerWidth,h=n.height,p=n.className,m=n.animationEasing,g=n.animationDuration,y=n.animationBegin,v=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||h!==+h||u===0&&d===0||h===0)return null;var x=_t("recharts-trapezoid",p);return v?F.createElement(Do,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:c},to:{upperWidth:u,lowerWidth:d,height:h,x:l,y:c},duration:g,animationEasing:m,isActive:v},function(b){var S=b.upperWidth,w=b.lowerWidth,C=b.height,_=b.x,T=b.y;return F.createElement(Do,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,easing:m},F.createElement("path",E_({},He(n,!0),{className:x,d:x9(_,T,S,w,C),ref:r})))}):F.createElement("g",null,F.createElement("path",E_({},He(n,!0),{className:x,d:x9(l,c,u,d,h)})))},OJe=["option","shapeType","propTransformer","activeClassName","isActive"];function Vb(t){"@babel/helpers - typeof";return Vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vb(t)}function PJe(t,e){if(t==null)return{};var n=RJe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function RJe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function b9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function $_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b9(Object(n),!0).forEach(function(r){DJe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DJe(t,e,n){return e=jJe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jJe(t){var e=MJe(t,"string");return Vb(e)=="symbol"?e:e+""}function MJe(t,e){if(Vb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FJe(t,e){return $_($_({},e),t)}function LJe(t,e){return t==="symbols"}function w9(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return F.createElement(p4,n);case"trapezoid":return F.createElement(IJe,n);case"sector":return F.createElement(pue,n);case"symbols":if(LJe(e))return F.createElement(nE,n);break;default:return null}}function BJe(t){return N.isValidElement(t)?t.props:t}function A_(t){var e=t.option,n=t.shapeType,r=t.propTransformer,s=r===void 0?FJe:r,i=t.activeClassName,o=i===void 0?"recharts-active-shape":i,a=t.isActive,l=PJe(t,OJe),c;if(N.isValidElement(e))c=N.cloneElement(e,$_($_({},l),BJe(e)));else if(at(e))c=e(l);else if(mJe(e)&&!wJe(e)){var u=s(e,l);c=F.createElement(w9,{shapeType:n,elementProps:u})}else{var d=l;c=F.createElement(w9,{shapeType:n,elementProps:d})}return a?F.createElement(At,{className:o},c):c}function xE(t,e){return e!=null&&"trapezoids"in t.props}function bE(t,e){return e!=null&&"sectors"in t.props}function Wb(t,e){return e!=null&&"points"in t.props}function zJe(t,e){var n,r,s=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,i=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return s&&i}function VJe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function WJe(t,e){var n=t.x===e.x,r=t.y===e.y,s=t.z===e.z;return n&&r&&s}function UJe(t,e){var n;return xE(t,e)?n=zJe:bE(t,e)?n=VJe:Wb(t,e)&&(n=WJe),n}function GJe(t,e){var n;return xE(t,e)?n="trapezoids":bE(t,e)?n="sectors":Wb(t,e)&&(n="points"),n}function HJe(t,e){if(xE(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(bE(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Wb(t,e)?e.payload:{}}function qJe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,s=GJe(n,e),i=HJe(n,e),o=r.filter(function(l,c){var u=Pu(i,l),d=n.props[s].filter(function(m){var g=UJe(n,e);return g(m,e)}),h=n.props[s].indexOf(d[d.length-1]),p=c===h;return u&&p}),a=r.indexOf(o[o.length-1]);return a}var I2;function fy(t){"@babel/helpers - typeof";return fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fy(t)}function Wm(){return Wm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wm.apply(this,arguments)}function S9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function jn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S9(Object(n),!0).forEach(function(r){la(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KJe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pue(r.key),r)}}function XJe(t,e,n){return e&&C9(t.prototype,e),n&&C9(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function YJe(t,e,n){return e=I_(e),QJe(t,Oue()?Reflect.construct(e,n||[],I_(t).constructor):e.apply(t,n))}function QJe(t,e){if(e&&(fy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZJe(t)}function ZJe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oue(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Oue=function(){return!!t})()}function I_(t){return I_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},I_(t)}function JJe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wj(t,e)}function wj(t,e){return wj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},wj(t,e)}function la(t,e,n){return e=Pue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pue(t){var e=eet(t,"string");return fy(e)=="symbol"?e:e+""}function eet(t,e){if(fy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lc=function(t){function e(n){var r;return KJe(this,e),r=YJe(this,e,[n]),la(r,"pieRef",null),la(r,"sectorRefs",[]),la(r,"id",Tf("recharts-pie-")),la(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),at(s)&&s()}),la(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),at(s)&&s()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return JJe(e,t),XJe(e,[{key:"isActiveIndex",value:function(r){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(r)!==-1:r===s}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,a=i.labelLine,l=i.dataKey,c=i.valueKey,u=He(this.props,!1),d=He(o,!1),h=He(a,!1),p=o&&o.offsetRadius||20,m=r.map(function(g,y){var v=(g.startAngle+g.endAngle)/2,x=fn(g.cx,g.cy,g.outerRadius+p,v),b=jn(jn(jn(jn({},u),g),{},{stroke:"none"},d),{},{index:y,textAnchor:e.getTextAnchor(x.x,g.cx)},x),S=jn(jn(jn(jn({},u),g),{},{fill:"none",stroke:g.fill},h),{},{index:y,points:[fn(g.cx,g.cy,g.outerRadius,v),x]}),w=l;return ht(l)&&ht(c)?w="value":ht(l)&&(w=c),F.createElement(At,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(y)},a&&e.renderLabelLineItem(a,S,"line"),e.renderLabelItem(o,b,Pn(g,w)))});return F.createElement(At,{className:"recharts-pie-labels"},m)}},{key:"renderSectorsStatically",value:function(r){var s=this,i=this.props,o=i.activeShape,a=i.blendStroke,l=i.inactiveShape;return r.map(function(c,u){if((c==null?void 0:c.startAngle)===0&&(c==null?void 0:c.endAngle)===0&&r.length!==1)return null;var d=s.isActiveIndex(u),h=l&&s.hasActiveIndex()?l:null,p=d?o:h,m=jn(jn({},c),{},{stroke:a?c.fill:c.stroke,tabIndex:-1});return F.createElement(At,Wm({ref:function(y){y&&!s.sectorRefs.includes(y)&&s.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},af(s.props,c,u),{key:"sector-".concat(c==null?void 0:c.startAngle,"-").concat(c==null?void 0:c.endAngle,"-").concat(c.midAngle,"-").concat(u)}),F.createElement(A_,Wm({option:p,isActive:d,shapeType:"sector"},m)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,s=this.props,i=s.sectors,o=s.isAnimationActive,a=s.animationBegin,l=s.animationDuration,c=s.animationEasing,u=s.animationId,d=this.state,h=d.prevSectors,p=d.prevIsAnimationActive;return F.createElement(Do,{begin:a,duration:l,isActive:o,easing:c,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(m){var g=m.t,y=[],v=i&&i[0],x=v.startAngle;return i.forEach(function(b,S){var w=h&&h[S],C=S>0?$o(b,"paddingAngle",0):0;if(w){var _=On(w.endAngle-w.startAngle,b.endAngle-b.startAngle),T=jn(jn({},b),{},{startAngle:x+C,endAngle:x+_(g)+C});y.push(T),x=T.endAngle}else{var k=b.endAngle,$=b.startAngle,O=On(0,k-$),P=O(g),D=jn(jn({},b),{},{startAngle:x+C,endAngle:x+P+C});y.push(D),x=D.endAngle}}),F.createElement(At,null,r.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(r){var s=this;r.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var a=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[a].focus(),s.setState({sectorToFocus:a});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,s=r.sectors,i=r.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!Pu(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,s=this.props,i=s.hide,o=s.sectors,a=s.className,l=s.label,c=s.cx,u=s.cy,d=s.innerRadius,h=s.outerRadius,p=s.isAnimationActive,m=this.state.isAnimationFinished;if(i||!o||!o.length||!ke(c)||!ke(u)||!ke(d)||!ke(h))return null;var g=_t("recharts-pie",a);return F.createElement(At,{tabIndex:this.props.rootTabIndex,className:g,ref:function(v){r.pieRef=v}},this.renderSectors(),l&&this.renderLabels(o),ps.renderCallByParent(this.props,null,!1),(!p||m)&&ba.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return s.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:r.sectors!==s.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,s){return r>s?"start":r<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,s,i){if(F.isValidElement(r))return F.cloneElement(r,s);if(at(r))return r(s);var o=_t("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return F.createElement(Gd,Wm({},s,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,s,i){if(F.isValidElement(r))return F.cloneElement(r,s);var o=i;if(at(r)&&(o=r(s),F.isValidElement(o)))return o;var a=_t("recharts-pie-label-text",typeof r!="boolean"&&!at(r)?r.className:"");return F.createElement(cp,Wm({},s,{alignmentBaseline:"middle",className:a}),o)}}])}(N.PureComponent);I2=Lc;la(Lc,"displayName","Pie");la(Lc,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ao.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});la(Lc,"parseDeltaAngle",function(t,e){var n=_i(e-t),r=Math.min(Math.abs(e-t),360);return n*r});la(Lc,"getRealPieData",function(t){var e=t.data,n=t.children,r=He(t,!1),s=$i(n,xv);return e&&e.length?e.map(function(i,o){return jn(jn(jn({payload:i},r),i),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(i){return jn(jn({},r),i.props)}):[]});la(Lc,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,s=e.width,i=e.height,o=lue(s,i),a=r+Ti(t.cx,s,s/2),l=n+Ti(t.cy,i,i/2),c=Ti(t.innerRadius,o,0),u=Ti(t.outerRadius,o,o*.8),d=t.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:a,cy:l,innerRadius:c,outerRadius:u,maxRadius:d}});la(Lc,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?jn(jn({},e.type.defaultProps),e.props):e.props,s=I2.getRealPieData(r);if(!s||!s.length)return null;var i=r.cornerRadius,o=r.startAngle,a=r.endAngle,l=r.paddingAngle,c=r.dataKey,u=r.nameKey,d=r.valueKey,h=r.tooltipType,p=Math.abs(r.minAngle),m=I2.parseCoordinateOfPie(r,n),g=I2.parseDeltaAngle(o,a),y=Math.abs(g),v=c;ht(c)&&ht(d)?(fl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):ht(c)&&(fl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=d);var x=s.filter(function(T){return Pn(T,v,0)!==0}).length,b=(y>=360?x:x-1)*l,S=y-x*p-b,w=s.reduce(function(T,k){var $=Pn(k,v,0);return T+(ke($)?$:0)},0),C;if(w>0){var _;C=s.map(function(T,k){var $=Pn(T,v,0),O=Pn(T,u,k),P=(ke($)?$:0)/w,D;k?D=_.endAngle+_i(g)*l*($!==0?1:0):D=o;var A=D+_i(g)*(($!==0?p:0)+P*S),I=(D+A)/2,R=(m.innerRadius+m.outerRadius)/2,M=[{name:O,value:$,payload:T,dataKey:v,type:h}],E=fn(m.cx,m.cy,R,I);return _=jn(jn(jn({percent:P,cornerRadius:i,name:O,tooltipPayload:M,midAngle:I,middleRadius:R,tooltipPosition:E},T),m),{},{value:Pn(T,v),startAngle:D,endAngle:A,payload:T,paddingAngle:_i(g)*l}),_})}return jn(jn({},m),{},{sectors:C,data:s})});function tet(t){return t&&t.length?t[0]:void 0}var net=tet,ret=net;const set=nn(ret);var iet=["key"];function hy(t){"@babel/helpers - typeof";return hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hy(t)}function oet(t,e){if(t==null)return{};var n=aet(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aet(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function O_(){return O_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O_.apply(this,arguments)}function N9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function gi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N9(Object(n),!0).forEach(function(r){ru(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cet(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Due(r.key),r)}}function uet(t,e,n){return e&&_9(t.prototype,e),n&&_9(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function det(t,e,n){return e=P_(e),fet(t,Rue()?Reflect.construct(e,n||[],P_(t).constructor):e.apply(t,n))}function fet(t,e){if(e&&(hy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return het(t)}function het(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rue(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rue=function(){return!!t})()}function P_(t){return P_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},P_(t)}function pet(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sj(t,e)}function Sj(t,e){return Sj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Sj(t,e)}function ru(t,e,n){return e=Due(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Due(t){var e=met(t,"string");return hy(e)=="symbol"?e:e+""}function met(t,e){if(hy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var py=function(t){function e(){var n;cet(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=det(this,e,[].concat(s)),ru(n,"state",{isAnimationFinished:!1}),ru(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),at(o)&&o()}),ru(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),at(o)&&o()}),ru(n,"handleMouseEnter",function(o){var a=n.props.onMouseEnter;a&&a(n.props,o)}),ru(n,"handleMouseLeave",function(o){var a=n.props.onMouseLeave;a&&a(n.props,o)}),n}return pet(e,t),uet(e,[{key:"renderDots",value:function(r){var s=this.props,i=s.dot,o=s.dataKey,a=He(this.props,!1),l=He(i,!0),c=r.map(function(u,d){var h=gi(gi(gi({key:"dot-".concat(d),r:3},a),l),{},{dataKey:o,cx:u.x,cy:u.y,index:d,payload:u});return e.renderDotItem(i,h)});return F.createElement(At,{className:"recharts-radar-dots"},c)}},{key:"renderPolygonStatically",value:function(r){var s=this.props,i=s.shape,o=s.dot,a=s.isRange,l=s.baseLinePoints,c=s.connectNulls,u;return F.isValidElement(i)?u=F.cloneElement(i,gi(gi({},this.props),{},{points:r})):at(i)?u=i(gi(gi({},this.props),{},{points:r})):u=F.createElement(_ue,O_({},He(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:r,baseLinePoints:a?l:null,connectNulls:c})),F.createElement(At,{className:"recharts-radar-polygon"},u,o?this.renderDots(r):null)}},{key:"renderPolygonWithAnimation",value:function(){var r=this,s=this.props,i=s.points,o=s.isAnimationActive,a=s.animationBegin,l=s.animationDuration,c=s.animationEasing,u=s.animationId,d=this.state.prevPoints;return F.createElement(Do,{begin:a,duration:l,isActive:o,easing:c,from:{t:0},to:{t:1},key:"radar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var p=h.t,m=d&&d.length/i.length,g=i.map(function(y,v){var x=d&&d[Math.floor(v*m)];if(x){var b=On(x.x,y.x),S=On(x.y,y.y);return gi(gi({},y),{},{x:b(p),y:S(p)})}var w=On(y.cx,y.x),C=On(y.cy,y.y);return gi(gi({},y),{},{x:w(p),y:C(p)})});return r.renderPolygonStatically(g)})}},{key:"renderPolygon",value:function(){var r=this.props,s=r.points,i=r.isAnimationActive,o=r.isRange,a=this.state.prevPoints;return i&&s&&s.length&&!o&&(!a||!Pu(a,s))?this.renderPolygonWithAnimation():this.renderPolygonStatically(s)}},{key:"render",value:function(){var r=this.props,s=r.hide,i=r.className,o=r.points,a=r.isAnimationActive;if(s||!o||!o.length)return null;var l=this.state.isAnimationFinished,c=_t("recharts-radar",i);return F.createElement(At,{className:c},this.renderPolygon(),(!a||l)&&ba.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:s.curPoints}:r.points!==s.curPoints?{curPoints:r.points}:null}},{key:"renderDotItem",value:function(r,s){var i;if(F.isValidElement(r))i=F.cloneElement(r,s);else if(at(r))i=r(s);else{var o=s.key,a=oet(s,iet);i=F.createElement(Nv,O_({},a,{key:o,className:_t("recharts-radar-dot",typeof r!="boolean"?r.className:"")}))}return i}}])}(N.PureComponent);ru(py,"displayName","Radar");ru(py,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Ao.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ru(py,"getComposedData",function(t){var e=t.radiusAxis,n=t.angleAxis,r=t.displayedData,s=t.dataKey,i=t.bandSize,o=n.cx,a=n.cy,l=!1,c=[],u=n.type!=="number"?i??0:0;r.forEach(function(h,p){var m=Pn(h,n.dataKey,p),g=Pn(h,s),y=n.scale(m)+u,v=Array.isArray(g)?fue(g):g,x=ht(v)?void 0:e.scale(v);Array.isArray(g)&&g.length>=2&&(l=!0),c.push(gi(gi({},fn(o,a,x,y)),{},{name:m,value:g,cx:o,cy:a,radius:x,angle:y,payload:h}))});var d=[];return l&&c.forEach(function(h){if(Array.isArray(h.value)){var p=set(h.value),m=ht(p)?void 0:e.scale(p);d.push(gi(gi({},h),{},{radius:m},fn(o,a,m,h.angle)))}else d.push(h)}),{points:c,isRange:l,baseLinePoints:d}});var get=Math.ceil,yet=Math.max;function vet(t,e,n,r){for(var s=-1,i=yet(get((e-t)/(n||1)),0),o=Array(i);i--;)o[r?i:++s]=t,t+=n;return o}var xet=vet,bet=Xle,T9=1/0,wet=17976931348623157e292;function Cet(t){if(!t)return t===0?t:0;if(t=bet(t),t===T9||t===-T9){var e=t<0?-1:1;return e*wet}return t===t?t:0}var jue=Cet,Net=xet,_et=iE,_O=jue;function Tet(t){return function(e,n,r){return r&&typeof r!="number"&&_et(e,n,r)&&(n=r=void 0),e=_O(e),n===void 0?(n=e,e=0):n=_O(n),r=r===void 0?e<n?1:-1:_O(r),Net(e,n,r,t)}}var ket=Tet,Eet=ket,$et=Eet(),Aet=$et;const R_=nn(Aet);function Ub(t){"@babel/helpers - typeof";return Ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ub(t)}function k9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function E9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k9(Object(n),!0).forEach(function(r){Mue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mue(t,e,n){return e=Iet(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Iet(t){var e=Oet(t,"string");return Ub(e)=="symbol"?e:e+""}function Oet(t,e){if(Ub(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ub(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pet=["Webkit","Moz","O","ms"],Ret=function(e,n){var r=e.replace(/(\w)/,function(i){return i.toUpperCase()}),s=Pet.reduce(function(i,o){return E9(E9({},i),{},Mue({},o+r,n))},{});return s[e]=n,s};function my(t){"@babel/helpers - typeof";return my=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},my(t)}function D_(){return D_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D_.apply(this,arguments)}function $9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function TO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$9(Object(n),!0).forEach(function(r){go(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Det(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lue(r.key),r)}}function jet(t,e,n){return e&&A9(t.prototype,e),n&&A9(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Met(t,e,n){return e=j_(e),Fet(t,Fue()?Reflect.construct(e,n||[],j_(t).constructor):e.apply(t,n))}function Fet(t,e){if(e&&(my(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Let(t)}function Let(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fue(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fue=function(){return!!t})()}function j_(t){return j_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},j_(t)}function Bet(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cj(t,e)}function Cj(t,e){return Cj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Cj(t,e)}function go(t,e,n){return e=Lue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lue(t){var e=zet(t,"string");return my(e)=="symbol"?e:e+""}function zet(t,e){if(my(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(my(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vet=function(e){var n=e.data,r=e.startIndex,s=e.endIndex,i=e.x,o=e.width,a=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=y0().domain(R_(0,l)).range([i,i+o-a]),u=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(s),scale:c,scaleValues:u}},I9=function(e){return e.changedTouches&&!!e.changedTouches.length},lf=function(t){function e(n){var r;return Det(this,e),r=Met(this,e,[n]),go(r,"handleDrag",function(s){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(s):r.state.isSlideMoving&&r.handleSlideDrag(s)}),go(r,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&r.handleDrag(s.changedTouches[0])}),go(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=r.props,i=s.endIndex,o=s.onDragEnd,a=s.startIndex;o==null||o({endIndex:i,startIndex:a})}),r.detachDragEndListener()}),go(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),go(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),go(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),go(r,"handleSlideDragStart",function(s){var i=I9(s)?s.changedTouches[0]:s;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Bet(e,t),jet(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var s=r.startX,i=r.endX,o=this.state.scaleValues,a=this.props,l=a.gap,c=a.data,u=c.length-1,d=Math.min(s,i),h=Math.max(s,i),p=e.getIndexInRange(o,d),m=e.getIndexInRange(o,h);return{startIndex:p-p%l,endIndex:m===u?u:m-m%l}}},{key:"getTextOfTick",value:function(r){var s=this.props,i=s.data,o=s.tickFormatter,a=s.dataKey,l=Pn(i[r],a,r);return at(o)?o(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var s=this.state,i=s.slideMoveStartX,o=s.startX,a=s.endX,l=this.props,c=l.x,u=l.width,d=l.travellerWidth,h=l.startIndex,p=l.endIndex,m=l.onChange,g=r.pageX-i;g>0?g=Math.min(g,c+u-d-a,c+u-d-o):g<0&&(g=Math.max(g,c-o,c-a));var y=this.getIndex({startX:o+g,endX:a+g});(y.startIndex!==h||y.endIndex!==p)&&m&&m(y),this.setState({startX:o+g,endX:a+g,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,s){var i=I9(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,a=s.endX,l=s.startX,c=this.state[o],u=this.props,d=u.x,h=u.width,p=u.travellerWidth,m=u.onChange,g=u.gap,y=u.data,v={startX:this.state.startX,endX:this.state.endX},x=r.pageX-i;x>0?x=Math.min(x,d+h-p-c):x<0&&(x=Math.max(x,d-c)),v[o]=c+x;var b=this.getIndex(v),S=b.startIndex,w=b.endIndex,C=function(){var T=y.length-1;return o==="startX"&&(a>l?S%g===0:w%g===0)||a<l&&w===T||o==="endX"&&(a>l?w%g===0:S%g===0)||a>l&&w===T};this.setState(go(go({},o,c+x),"brushMoveStartX",r.pageX),function(){m&&C()&&m(b)})}},{key:"handleTravellerMoveKeyboard",value:function(r,s){var i=this,o=this.state,a=o.scaleValues,l=o.startX,c=o.endX,u=this.state[s],d=a.indexOf(u);if(d!==-1){var h=d+r;if(!(h===-1||h>=a.length)){var p=a[h];s==="startX"&&p>=c||s==="endX"&&p<=l||this.setState(go({},s,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,a=r.height,l=r.fill,c=r.stroke;return F.createElement("rect",{stroke:c,fill:l,x:s,y:i,width:o,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,a=r.height,l=r.data,c=r.children,u=r.padding,d=N.Children.only(c);return d?F.cloneElement(d,{x:s,y:i,width:o,height:a,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,s){var i,o,a=this,l=this.props,c=l.y,u=l.travellerWidth,d=l.height,h=l.traveller,p=l.ariaLabel,m=l.data,g=l.startIndex,y=l.endIndex,v=Math.max(r,this.props.x),x=TO(TO({},He(this.props,!1)),{},{x:v,y:c,width:u,height:d}),b=p||"Min value: ".concat((i=m[g])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=m[y])===null||o===void 0?void 0:o.name);return F.createElement(At,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),a.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,s))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,x))}},{key:"renderSlide",value:function(r,s){var i=this.props,o=i.y,a=i.height,l=i.stroke,c=i.travellerWidth,u=Math.min(r,s)+c,d=Math.max(Math.abs(s-r)-c,0);return F.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:o,width:d,height:a})}},{key:"renderText",value:function(){var r=this.props,s=r.startIndex,i=r.endIndex,o=r.y,a=r.height,l=r.travellerWidth,c=r.stroke,u=this.state,d=u.startX,h=u.endX,p=5,m={pointerEvents:"none",fill:c};return F.createElement(At,{className:"recharts-brush-texts"},F.createElement(cp,D_({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-p,y:o+a/2},m),this.getTextOfTick(s)),F.createElement(cp,D_({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+l+p,y:o+a/2},m),this.getTextOfTick(i)))}},{key:"render",value:function(){var r=this.props,s=r.data,i=r.className,o=r.children,a=r.x,l=r.y,c=r.width,u=r.height,d=r.alwaysShowText,h=this.state,p=h.startX,m=h.endX,g=h.isTextActive,y=h.isSlideMoving,v=h.isTravellerMoving,x=h.isTravellerFocused;if(!s||!s.length||!ke(a)||!ke(l)||!ke(c)||!ke(u)||c<=0||u<=0)return null;var b=_t("recharts-brush",i),S=F.Children.count(o)===1,w=Ret("userSelect","none");return F.createElement(At,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(p,m),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(m,"endX"),(g||y||v||x||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var s=r.x,i=r.y,o=r.width,a=r.height,l=r.stroke,c=Math.floor(i+a/2)-1;return F.createElement(F.Fragment,null,F.createElement("rect",{x:s,y:i,width:o,height:a,fill:l,stroke:"none"}),F.createElement("line",{x1:s+1,y1:c,x2:s+o-1,y2:c,fill:"none",stroke:"#fff"}),F.createElement("line",{x1:s+1,y1:c+2,x2:s+o-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,s){var i;return F.isValidElement(r)?i=F.cloneElement(r,s):at(r)?i=r(s):i=e.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(r,s){var i=r.data,o=r.width,a=r.x,l=r.travellerWidth,c=r.updateId,u=r.startIndex,d=r.endIndex;if(i!==s.prevData||c!==s.prevUpdateId)return TO({prevData:i,prevTravellerWidth:l,prevUpdateId:c,prevX:a,prevWidth:o},i&&i.length?Vet({data:i,width:o,x:a,travellerWidth:l,startIndex:u,endIndex:d}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||a!==s.prevX||l!==s.prevTravellerWidth)){s.scale.range([a,a+o-l]);var h=s.scale.domain().map(function(p){return s.scale(p)});return{prevData:i,prevTravellerWidth:l,prevUpdateId:c,prevX:a,prevWidth:o,startX:s.scale(r.startIndex),endX:s.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,s){for(var i=r.length,o=0,a=i-1;a-o>1;){var l=Math.floor((o+a)/2);r[l]>s?a=l:o=l}return s>=r[a]?a:o}}])}(N.PureComponent);go(lf,"displayName","Brush");go(lf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Wet=B3;function Uet(t,e){var n;return Wet(t,function(r,s,i){return n=e(r,s,i),!n}),!!n}var Get=Uet,Het=Sle,qet=Fc,Ket=Get,Xet=uo,Yet=iE;function Qet(t,e,n){var r=Xet(t)?Het:Ket;return n&&Yet(t,e,n)&&(e=void 0),r(t,qet(e))}var Zet=Qet;const Jet=nn(Zet);var fc=function(e,n){var r=e.alwaysShow,s=e.ifOverflow;return r&&(s="extendDomain"),s===n},O9=Ule;function ett(t,e,n){e=="__proto__"&&O9?O9(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var ttt=ett,ntt=ttt,rtt=Vle,stt=Fc;function itt(t,e){var n={};return e=stt(e),rtt(t,function(r,s,i){ntt(n,s,e(r,s,i))}),n}var ott=itt;const att=nn(ott);function ltt(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var ctt=ltt,utt=B3;function dtt(t,e){var n=!0;return utt(t,function(r,s,i){return n=!!e(r,s,i),n}),n}var ftt=dtt,htt=ctt,ptt=ftt,mtt=Fc,gtt=uo,ytt=iE;function vtt(t,e,n){var r=gtt(t)?htt:ptt;return n&&ytt(t,e,n)&&(e=void 0),r(t,mtt(e))}var xtt=vtt;const Bue=nn(xtt);var btt=["x","y"];function Gb(t){"@babel/helpers - typeof";return Gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gb(t)}function Nj(){return Nj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nj.apply(this,arguments)}function P9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function _x(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P9(Object(n),!0).forEach(function(r){wtt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wtt(t,e,n){return e=Stt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Stt(t){var e=Ctt(t,"string");return Gb(e)=="symbol"?e:e+""}function Ctt(t,e){if(Gb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ntt(t,e){if(t==null)return{};var n=_tt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _tt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ttt(t,e){var n=t.x,r=t.y,s=Ntt(t,btt),i="".concat(n),o=parseInt(i,10),a="".concat(r),l=parseInt(a,10),c="".concat(e.height||s.height),u=parseInt(c,10),d="".concat(e.width||s.width),h=parseInt(d,10);return _x(_x(_x(_x(_x({},e),s),o?{x:o}:{}),l?{y:l}:{}),{},{height:u,width:h,name:e.name,radius:e.radius})}function R9(t){return F.createElement(A_,Nj({shapeType:"rectangle",propTransformer:Ttt,activeClassName:"recharts-active-bar"},t))}var ktt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,s){if(typeof e=="number")return e;var i=typeof r=="number";return i?e(r,s):(i||dp(),n)}},Ett=["value","background"],zue;function gy(t){"@babel/helpers - typeof";return gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gy(t)}function $tt(t,e){if(t==null)return{};var n=Att(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Att(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function M_(){return M_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},M_.apply(this,arguments)}function D9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Lr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D9(Object(n),!0).forEach(function(r){kd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Itt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wue(r.key),r)}}function Ott(t,e,n){return e&&j9(t.prototype,e),n&&j9(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ptt(t,e,n){return e=F_(e),Rtt(t,Vue()?Reflect.construct(e,n||[],F_(t).constructor):e.apply(t,n))}function Rtt(t,e){if(e&&(gy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dtt(t)}function Dtt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vue(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vue=function(){return!!t})()}function F_(t){return F_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},F_(t)}function jtt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_j(t,e)}function _j(t,e){return _j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},_j(t,e)}function kd(t,e,n){return e=Wue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wue(t){var e=Mtt(t,"string");return gy(e)=="symbol"?e:e+""}function Mtt(t,e){if(gy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ls=function(t){function e(){var n;Itt(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=Ptt(this,e,[].concat(s)),kd(n,"state",{isAnimationFinished:!1}),kd(n,"id",Tf("recharts-bar-")),kd(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),kd(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return jtt(e,t),Ott(e,[{key:"renderRectanglesStatically",value:function(r){var s=this,i=this.props,o=i.shape,a=i.dataKey,l=i.activeIndex,c=i.activeBar,u=He(this.props,!1);return r&&r.map(function(d,h){var p=h===l,m=p?c:o,g=Lr(Lr(Lr({},u),d),{},{isActive:p,option:m,index:h,dataKey:a,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return F.createElement(At,M_({className:"recharts-bar-rectangle"},af(s.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value)}),F.createElement(R9,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,s=this.props,i=s.data,o=s.layout,a=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,u=s.animationEasing,d=s.animationId,h=this.state.prevData;return F.createElement(Do,{begin:l,duration:c,isActive:a,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var m=p.t,g=i.map(function(y,v){var x=h&&h[v];if(x){var b=On(x.x,y.x),S=On(x.y,y.y),w=On(x.width,y.width),C=On(x.height,y.height);return Lr(Lr({},y),{},{x:b(m),y:S(m),width:w(m),height:C(m)})}if(o==="horizontal"){var _=On(0,y.height),T=_(m);return Lr(Lr({},y),{},{y:y.y+y.height-T,height:T})}var k=On(0,y.width),$=k(m);return Lr(Lr({},y),{},{width:$})});return F.createElement(At,null,r.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var r=this.props,s=r.data,i=r.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!Pu(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var r=this,s=this.props,i=s.data,o=s.dataKey,a=s.activeIndex,l=He(this.props.background,!1);return i.map(function(c,u){c.value;var d=c.background,h=$tt(c,Ett);if(!d)return null;var p=Lr(Lr(Lr(Lr(Lr({},h),{},{fill:"#eee"},d),l),af(r.props,c,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return F.createElement(R9,M_({key:"background-bar-".concat(u),option:r.props.background,isActive:u===a},p))})}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,a=i.xAxis,l=i.yAxis,c=i.layout,u=i.children,d=$i(u,Cv);if(!d)return null;var h=c==="vertical"?o[0].height/2:o[0].width/2,p=function(y,v){var x=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:x,errorVal:Pn(y,v)}},m={clipPath:r?"url(#clipPath-".concat(s,")"):null};return F.createElement(At,m,d.map(function(g){return F.cloneElement(g,{key:"error-bar-".concat(s,"-").concat(g.props.dataKey),data:o,xAxis:a,yAxis:l,layout:c,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,s=r.hide,i=r.data,o=r.className,a=r.xAxis,l=r.yAxis,c=r.left,u=r.top,d=r.width,h=r.height,p=r.isAnimationActive,m=r.background,g=r.id;if(s||!i||!i.length)return null;var y=this.state.isAnimationFinished,v=_t("recharts-bar",o),x=a&&a.allowDataOverflow,b=l&&l.allowDataOverflow,S=x||b,w=ht(g)?this.id:g;return F.createElement(At,{className:v},x||b?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(w)},F.createElement("rect",{x:x?c:c-d/2,y:b?u:u-h/2,width:x?d:d*2,height:b?h:h*2}))):null,F.createElement(At,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(w,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,w),(!p||y)&&ba.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:s.curData}:r.data!==s.curData?{curData:r.data}:null}}])}(N.PureComponent);zue=ls;kd(ls,"displayName","Bar");kd(ls,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ao.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});kd(ls,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,s=t.bandSize,i=t.xAxis,o=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,u=t.dataStartIndex,d=t.displayedData,h=t.offset,p=KKe(r,n);if(!p)return null;var m=e.layout,g=n.type.defaultProps,y=g!==void 0?Lr(Lr({},g),n.props):n.props,v=y.dataKey,x=y.children,b=y.minPointSize,S=m==="horizontal"?o:i,w=c?S.scale.domain():null,C=tXe({numericAxis:S}),_=$i(x,xv),T=d.map(function(k,$){var O,P,D,A,I,R;c?O=XKe(c[u+$],w):(O=Pn(k,v),Array.isArray(O)||(O=[C,O]));var M=ktt(b,zue.defaultProps.minPointSize)(O[1],$);if(m==="horizontal"){var E,j=[o.scale(O[0]),o.scale(O[1])],B=j[0],W=j[1];P=SH({axis:i,ticks:a,bandSize:s,offset:p.offset,entry:k,index:$}),D=(E=W??B)!==null&&E!==void 0?E:void 0,A=p.size;var G=B-W;if(I=Number.isNaN(G)?0:G,R={x:P,y:o.y,width:A,height:o.height},Math.abs(M)>0&&Math.abs(I)<Math.abs(M)){var te=_i(I||M)*(Math.abs(M)-Math.abs(I));D-=te,I+=te}}else{var ne=[i.scale(O[0]),i.scale(O[1])],ue=ne[0],ge=ne[1];if(P=ue,D=SH({axis:o,ticks:l,bandSize:s,offset:p.offset,entry:k,index:$}),A=ge-ue,I=p.size,R={x:i.x,y:D,width:i.width,height:I},Math.abs(M)>0&&Math.abs(A)<Math.abs(M)){var de=_i(A||M)*(Math.abs(M)-Math.abs(A));A+=de}}return Lr(Lr(Lr({},k),{},{x:P,y:D,width:A,height:I,value:c?O:O[1],payload:k,background:R},_&&_[$]&&_[$].props),{},{tooltipPayload:[oue(n,k)],tooltipPosition:{x:P+A/2,y:D+I/2}})});return Lr({data:T,layout:m},h)});function Hb(t){"@babel/helpers - typeof";return Hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hb(t)}function Ftt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Uue(r.key),r)}}function Ltt(t,e,n){return e&&M9(t.prototype,e),n&&M9(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function F9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Qa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F9(Object(n),!0).forEach(function(r){wE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wE(t,e,n){return e=Uue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uue(t){var e=Btt(t,"string");return Hb(e)=="symbol"?e:e+""}function Btt(t,e){if(Hb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SE=function(e,n,r,s,i){var o=e.width,a=e.height,l=e.layout,c=e.children,u=Object.keys(n),d={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},h=!!vo(c,ls);return u.reduce(function(p,m){var g=n[m],y=g.orientation,v=g.domain,x=g.padding,b=x===void 0?{}:x,S=g.mirror,w=g.reversed,C="".concat(y).concat(S?"Mirror":""),_,T,k,$,O;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var P=v[1]-v[0],D=1/0,A=g.categoricalDomain.sort();if(A.forEach(function(ne,ue){ue>0&&(D=Math.min((ne||0)-(A[ue-1]||0),D))}),Number.isFinite(D)){var I=D/P,R=g.layout==="vertical"?r.height:r.width;if(g.padding==="gap"&&(_=I*R/2),g.padding==="no-gap"){var M=Ti(e.barCategoryGap,I*R),E=I*R/2;_=E-M-(E-M)/R*M}}}s==="xAxis"?T=[r.left+(b.left||0)+(_||0),r.left+r.width-(b.right||0)-(_||0)]:s==="yAxis"?T=l==="horizontal"?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(_||0),r.top+r.height-(b.bottom||0)-(_||0)]:T=g.range,w&&(T=[T[1],T[0]]);var j=nue(g,i,h),B=j.scale,W=j.realScaleType;B.domain(v).range(T),rue(B);var G=sue(B,Qa(Qa({},g),{},{realScaleType:W}));s==="xAxis"?(O=y==="top"&&!S||y==="bottom"&&S,k=r.left,$=d[C]-O*g.height):s==="yAxis"&&(O=y==="left"&&!S||y==="right"&&S,k=d[C]-O*g.width,$=r.top);var te=Qa(Qa(Qa({},g),G),{},{realScaleType:W,x:k,y:$,scale:B,width:s==="xAxis"?r.width:g.width,height:s==="yAxis"?r.height:g.height});return te.bandSize=x_(te,G),!g.hide&&s==="xAxis"?d[C]+=(O?-1:1)*te.height:g.hide||(d[C]+=(O?-1:1)*te.width),Qa(Qa({},p),{},wE({},m,te))},{})},Gue=function(e,n){var r=e.x,s=e.y,i=n.x,o=n.y;return{x:Math.min(r,i),y:Math.min(s,o),width:Math.abs(i-r),height:Math.abs(o-s)}},ztt=function(e){var n=e.x1,r=e.y1,s=e.x2,i=e.y2;return Gue({x:n,y:r},{x:s,y:i})},Hue=function(){function t(e){Ftt(this,t),this.scale=e}return Ltt(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.bandAware,i=r.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(s){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),s=r[0],i=r[r.length-1];return s<=i?n>=s&&n<=i:n>=i&&n<=s}}],[{key:"create",value:function(n){return new t(n)}}])}();wE(Hue,"EPS",1e-4);var m4=function(e){var n=Object.keys(e).reduce(function(r,s){return Qa(Qa({},r),{},wE({},s,Hue.create(e[s])))},{});return Qa(Qa({},n),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,a=i.position;return att(s,function(l,c){return n[c].apply(l,{bandAware:o,position:a})})},isInRange:function(s){return Bue(s,function(i,o){return n[o].isInRange(i)})}})};function Vtt(t){return(t%180+180)%180}var Wtt=function(e){var n=e.width,r=e.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Vtt(s),o=i*Math.PI/180,a=Math.atan(r/n),l=o>a&&o<Math.PI-a?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},Utt=Fc,Gtt=G1,Htt=rE;function qtt(t){return function(e,n,r){var s=Object(e);if(!Gtt(e)){var i=Utt(n);e=Htt(e),n=function(a){return i(s[a],a,s)}}var o=t(e,n,r);return o>-1?s[i?e[o]:o]:void 0}}var Ktt=qtt,Xtt=jue;function Ytt(t){var e=Xtt(t),n=e%1;return e===e?n?e-n:e:0}var Qtt=Ytt,Ztt=jle,Jtt=Fc,ent=Qtt,tnt=Math.max;function nnt(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var s=n==null?0:ent(n);return s<0&&(s=tnt(r+s,0)),Ztt(t,Jtt(e),s)}var rnt=nnt,snt=Ktt,int=rnt,ont=snt(int),ant=ont;const lnt=nn(ant);var cnt=DLe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),g4=N.createContext(void 0),y4=N.createContext(void 0),que=N.createContext(void 0),Kue=N.createContext({}),Xue=N.createContext(void 0),Yue=N.createContext(0),Que=N.createContext(0),L9=function(e){var n=e.state,r=n.xAxisMap,s=n.yAxisMap,i=n.offset,o=e.clipPathId,a=e.children,l=e.width,c=e.height,u=cnt(i);return F.createElement(g4.Provider,{value:r},F.createElement(y4.Provider,{value:s},F.createElement(Kue.Provider,{value:i},F.createElement(que.Provider,{value:u},F.createElement(Xue.Provider,{value:o},F.createElement(Yue.Provider,{value:c},F.createElement(Que.Provider,{value:l},a)))))))},unt=function(){return N.useContext(Xue)},Zue=function(e){var n=N.useContext(g4);n==null&&dp();var r=n[e];return r==null&&dp(),r},dnt=function(){var e=N.useContext(g4);return pd(e)},fnt=function(){var e=N.useContext(y4),n=lnt(e,function(r){return Bue(r.domain,Number.isFinite)});return n||pd(e)},Jue=function(e){var n=N.useContext(y4);n==null&&dp();var r=n[e];return r==null&&dp(),r},hnt=function(){var e=N.useContext(que);return e},pnt=function(){return N.useContext(Kue)},v4=function(){return N.useContext(Que)},x4=function(){return N.useContext(Yue)};function yy(t){"@babel/helpers - typeof";return yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yy(t)}function mnt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gnt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tde(r.key),r)}}function ynt(t,e,n){return e&&gnt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vnt(t,e,n){return e=L_(e),xnt(t,ede()?Reflect.construct(e,n||[],L_(t).constructor):e.apply(t,n))}function xnt(t,e){if(e&&(yy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bnt(t)}function bnt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ede(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ede=function(){return!!t})()}function L_(t){return L_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},L_(t)}function wnt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tj(t,e)}function Tj(t,e){return Tj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Tj(t,e)}function B9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function z9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B9(Object(n),!0).forEach(function(r){b4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b4(t,e,n){return e=tde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tde(t){var e=Snt(t,"string");return yy(e)=="symbol"?e:e+""}function Snt(t,e){if(yy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cnt(t,e){return knt(t)||Tnt(t,e)||_nt(t,e)||Nnt()}function Nnt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nt(t,e){if(t){if(typeof t=="string")return V9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V9(t,e)}}function V9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tnt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function knt(t){if(Array.isArray(t))return t}function kj(){return kj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kj.apply(this,arguments)}var Ent=function(e,n){var r;return F.isValidElement(e)?r=F.cloneElement(e,n):at(e)?r=e(n):r=F.createElement("line",kj({},n,{className:"recharts-reference-line-line"})),r},$nt=function(e,n,r,s,i,o,a,l,c){var u=i.x,d=i.y,h=i.width,p=i.height;if(r){var m=c.y,g=e.y.apply(m,{position:o});if(fc(c,"discard")&&!e.y.isInRange(g))return null;var y=[{x:u+h,y:g},{x:u,y:g}];return l==="left"?y.reverse():y}if(n){var v=c.x,x=e.x.apply(v,{position:o});if(fc(c,"discard")&&!e.x.isInRange(x))return null;var b=[{x,y:d+p},{x,y:d}];return a==="top"?b.reverse():b}if(s){var S=c.segment,w=S.map(function(C){return e.apply(C,{position:o})});return fc(c,"discard")&&Jet(w,function(C){return!e.isInRange(C)})?null:w}return null};function Ant(t){var e=t.x,n=t.y,r=t.segment,s=t.xAxisId,i=t.yAxisId,o=t.shape,a=t.className,l=t.alwaysShow,c=unt(),u=Zue(s),d=Jue(i),h=hnt();if(!c||!h)return null;fl(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=m4({x:u.scale,y:d.scale}),m=is(e),g=is(n),y=r&&r.length===2,v=$nt(p,m,g,y,h,t.position,u.orientation,d.orientation,t);if(!v)return null;var x=Cnt(v,2),b=x[0],S=b.x,w=b.y,C=x[1],_=C.x,T=C.y,k=fc(t,"hidden")?"url(#".concat(c,")"):void 0,$=z9(z9({clipPath:k},He(t,!0)),{},{x1:S,y1:w,x2:_,y2:T});return F.createElement(At,{className:_t("recharts-reference-line",a)},Ent(o,$),ps.renderCallByParent(t,ztt({x1:S,y1:w,x2:_,y2:T})))}var w4=function(t){function e(){return mnt(this,e),vnt(this,e,arguments)}return wnt(e,t),ynt(e,[{key:"render",value:function(){return F.createElement(Ant,this.props)}}])}(F.Component);b4(w4,"displayName","ReferenceLine");b4(w4,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Ej(){return Ej=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ej.apply(this,arguments)}function vy(t){"@babel/helpers - typeof";return vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vy(t)}function W9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function U9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W9(Object(n),!0).forEach(function(r){CE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Int(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ont(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rde(r.key),r)}}function Pnt(t,e,n){return e&&Ont(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rnt(t,e,n){return e=B_(e),Dnt(t,nde()?Reflect.construct(e,n||[],B_(t).constructor):e.apply(t,n))}function Dnt(t,e){if(e&&(vy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jnt(t)}function jnt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nde(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nde=function(){return!!t})()}function B_(t){return B_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},B_(t)}function Mnt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$j(t,e)}function $j(t,e){return $j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},$j(t,e)}function CE(t,e,n){return e=rde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rde(t){var e=Fnt(t,"string");return vy(e)=="symbol"?e:e+""}function Fnt(t,e){if(vy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lnt=function(e){var n=e.x,r=e.y,s=e.xAxis,i=e.yAxis,o=m4({x:s.scale,y:i.scale}),a=o.apply({x:n,y:r},{bandAware:!0});return fc(e,"discard")&&!o.isInRange(a)?null:a},NE=function(t){function e(){return Int(this,e),Rnt(this,e,arguments)}return Mnt(e,t),Pnt(e,[{key:"render",value:function(){var r=this.props,s=r.x,i=r.y,o=r.r,a=r.alwaysShow,l=r.clipPathId,c=is(s),u=is(i);if(fl(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var d=Lnt(this.props);if(!d)return null;var h=d.x,p=d.y,m=this.props,g=m.shape,y=m.className,v=fc(this.props,"hidden")?"url(#".concat(l,")"):void 0,x=U9(U9({clipPath:v},He(this.props,!0)),{},{cx:h,cy:p});return F.createElement(At,{className:_t("recharts-reference-dot",y)},e.renderDot(g,x),ps.renderCallByParent(this.props,{x:h-o,y:p-o,width:2*o,height:2*o}))}}])}(F.Component);CE(NE,"displayName","ReferenceDot");CE(NE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});CE(NE,"renderDot",function(t,e){var n;return F.isValidElement(t)?n=F.cloneElement(t,e):at(t)?n=t(e):n=F.createElement(Nv,Ej({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function Aj(){return Aj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Aj.apply(this,arguments)}function xy(t){"@babel/helpers - typeof";return xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xy(t)}function G9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function H9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G9(Object(n),!0).forEach(function(r){_E(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bnt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function znt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ide(r.key),r)}}function Vnt(t,e,n){return e&&znt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wnt(t,e,n){return e=z_(e),Unt(t,sde()?Reflect.construct(e,n||[],z_(t).constructor):e.apply(t,n))}function Unt(t,e){if(e&&(xy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gnt(t)}function Gnt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sde(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sde=function(){return!!t})()}function z_(t){return z_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},z_(t)}function Hnt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ij(t,e)}function Ij(t,e){return Ij=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Ij(t,e)}function _E(t,e,n){return e=ide(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ide(t){var e=qnt(t,"string");return xy(e)=="symbol"?e:e+""}function qnt(t,e){if(xy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Knt=function(e,n,r,s,i){var o=i.x1,a=i.x2,l=i.y1,c=i.y2,u=i.xAxis,d=i.yAxis;if(!u||!d)return null;var h=m4({x:u.scale,y:d.scale}),p={x:e?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(l,{position:"start"}):h.y.rangeMin},m={x:n?h.x.apply(a,{position:"end"}):h.x.rangeMax,y:s?h.y.apply(c,{position:"end"}):h.y.rangeMax};return fc(i,"discard")&&(!h.isInRange(p)||!h.isInRange(m))?null:Gue(p,m)},TE=function(t){function e(){return Bnt(this,e),Wnt(this,e,arguments)}return Hnt(e,t),Vnt(e,[{key:"render",value:function(){var r=this.props,s=r.x1,i=r.x2,o=r.y1,a=r.y2,l=r.className,c=r.alwaysShow,u=r.clipPathId;fl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=is(s),h=is(i),p=is(o),m=is(a),g=this.props.shape;if(!d&&!h&&!p&&!m&&!g)return null;var y=Knt(d,h,p,m,this.props);if(!y&&!g)return null;var v=fc(this.props,"hidden")?"url(#".concat(u,")"):void 0;return F.createElement(At,{className:_t("recharts-reference-area",l)},e.renderRect(g,H9(H9({clipPath:v},He(this.props,!0)),y)),ps.renderCallByParent(this.props,y))}}])}(F.Component);_E(TE,"displayName","ReferenceArea");_E(TE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});_E(TE,"renderRect",function(t,e){var n;return F.isValidElement(t)?n=F.cloneElement(t,e):at(t)?n=t(e):n=F.createElement(p4,Aj({},e,{className:"recharts-reference-area-rect"})),n});function ode(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],s=0;s<t.length;s+=e)r.push(t[s]);return r}function Xnt(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Wtt(r,n)}function Ynt(t,e,n){var r=n==="width",s=t.x,i=t.y,o=t.width,a=t.height;return e===1?{start:r?s:i,end:r?s+o:i+a}:{start:r?s+o:i+a,end:r?s:i}}function V_(t,e,n,r,s){if(t*e<t*r||t*e>t*s)return!1;var i=n();return t*(e-t*i/2-r)>=0&&t*(e+t*i/2-s)<=0}function Qnt(t,e){return ode(t,e+1)}function Znt(t,e,n,r,s){for(var i=(r||[]).slice(),o=e.start,a=e.end,l=0,c=1,u=o,d=function(){var m=r==null?void 0:r[l];if(m===void 0)return{v:ode(r,c)};var g=l,y,v=function(){return y===void 0&&(y=n(m,g)),y},x=m.coordinate,b=l===0||V_(t,x,v,u,a);b||(l=0,u=o,c+=1),b&&(u=x+t*(v()/2+s),l+=c)},h;c<=i.length;)if(h=d(),h)return h.v;return[]}function qb(t){"@babel/helpers - typeof";return qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qb(t)}function q9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Hs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q9(Object(n),!0).forEach(function(r){Jnt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jnt(t,e,n){return e=ert(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ert(t){var e=trt(t,"string");return qb(e)=="symbol"?e:e+""}function trt(t,e){if(qb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nrt(t,e,n,r,s){for(var i=(r||[]).slice(),o=i.length,a=e.start,l=e.end,c=function(h){var p=i[h],m,g=function(){return m===void 0&&(m=n(p,h)),m};if(h===o-1){var y=t*(p.coordinate+t*g()/2-l);i[h]=p=Hs(Hs({},p),{},{tickCoord:y>0?p.coordinate-y*t:p.coordinate})}else i[h]=p=Hs(Hs({},p),{},{tickCoord:p.coordinate});var v=V_(t,p.tickCoord,g,a,l);v&&(l=p.tickCoord-t*(g()/2+s),i[h]=Hs(Hs({},p),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return i}function rrt(t,e,n,r,s,i){var o=(r||[]).slice(),a=o.length,l=e.start,c=e.end;if(i){var u=r[a-1],d=n(u,a-1),h=t*(u.coordinate+t*d/2-c);o[a-1]=u=Hs(Hs({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate});var p=V_(t,u.tickCoord,function(){return d},l,c);p&&(c=u.tickCoord-t*(d/2+s),o[a-1]=Hs(Hs({},u),{},{isShow:!0}))}for(var m=i?a-1:a,g=function(x){var b=o[x],S,w=function(){return S===void 0&&(S=n(b,x)),S};if(x===0){var C=t*(b.coordinate-t*w()/2-l);o[x]=b=Hs(Hs({},b),{},{tickCoord:C<0?b.coordinate-C*t:b.coordinate})}else o[x]=b=Hs(Hs({},b),{},{tickCoord:b.coordinate});var _=V_(t,b.tickCoord,w,l,c);_&&(l=b.tickCoord+t*(w()/2+s),o[x]=Hs(Hs({},b),{},{isShow:!0}))},y=0;y<m;y++)g(y);return o}function S4(t,e,n){var r=t.tick,s=t.ticks,i=t.viewBox,o=t.minTickGap,a=t.orientation,l=t.interval,c=t.tickFormatter,u=t.unit,d=t.angle;if(!s||!s.length||!r)return[];if(ke(l)||Ao.isSsr)return Qnt(s,typeof l=="number"&&ke(l)?l:0);var h=[],p=a==="top"||a==="bottom"?"width":"height",m=u&&p==="width"?g0(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},g=function(b,S){var w=at(c)?c(b.value,S):b.value;return p==="width"?Xnt(g0(w,{fontSize:e,letterSpacing:n}),m,d):g0(w,{fontSize:e,letterSpacing:n})[p]},y=s.length>=2?_i(s[1].coordinate-s[0].coordinate):1,v=Ynt(i,y,p);return l==="equidistantPreserveStart"?Znt(y,v,g,s,o):(l==="preserveStart"||l==="preserveStartEnd"?h=rrt(y,v,g,s,o,l==="preserveStartEnd"):h=nrt(y,v,g,s,o),h.filter(function(x){return x.isShow}))}var srt=["viewBox"],irt=["viewBox"],ort=["ticks"];function by(t){"@babel/helpers - typeof";return by=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},by(t)}function Um(){return Um=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Um.apply(this,arguments)}function K9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function hi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K9(Object(n),!0).forEach(function(r){C4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kO(t,e){if(t==null)return{};var n=art(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function art(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function lrt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lde(r.key),r)}}function crt(t,e,n){return e&&X9(t.prototype,e),n&&X9(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function urt(t,e,n){return e=W_(e),drt(t,ade()?Reflect.construct(e,n||[],W_(t).constructor):e.apply(t,n))}function drt(t,e){if(e&&(by(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return frt(t)}function frt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ade(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ade=function(){return!!t})()}function W_(t){return W_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},W_(t)}function hrt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oj(t,e)}function Oj(t,e){return Oj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Oj(t,e)}function C4(t,e,n){return e=lde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lde(t){var e=prt(t,"string");return by(e)=="symbol"?e:e+""}function prt(t,e){if(by(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(by(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kv=function(t){function e(n){var r;return lrt(this,e),r=urt(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return hrt(e,t),crt(e,[{key:"shouldComponentUpdate",value:function(r,s){var i=r.viewBox,o=kO(r,srt),a=this.props,l=a.viewBox,c=kO(a,irt);return!fg(i,l)||!fg(o,c)||!fg(s,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var s=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var s=this.props,i=s.x,o=s.y,a=s.width,l=s.height,c=s.orientation,u=s.tickSize,d=s.mirror,h=s.tickMargin,p,m,g,y,v,x,b=d?-1:1,S=r.tickSize||u,w=ke(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":p=m=r.coordinate,y=o+ +!d*l,g=y-b*S,x=g-b*h,v=w;break;case"left":g=y=r.coordinate,m=i+ +!d*a,p=m-b*S,v=p-b*h,x=w;break;case"right":g=y=r.coordinate,m=i+ +d*a,p=m+b*S,v=p+b*h,x=w;break;default:p=m=r.coordinate,y=o+ +d*l,g=y+b*S,x=g+b*h,v=w;break}return{line:{x1:p,y1:g,x2:m,y2:y},tick:{x:v,y:x}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,s=r.orientation,i=r.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,s=r.orientation,i=r.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,a=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,d=hi(hi(hi({},He(this.props,!1)),He(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!c||l==="bottom"&&c);d=hi(hi({},d),{},{x1:s,y1:i+h*a,x2:s+o,y2:i+h*a})}else{var p=+(l==="left"&&!c||l==="right"&&c);d=hi(hi({},d),{},{x1:s+p*o,y1:i,x2:s+p*o,y2:i+a})}return F.createElement("line",Um({},d,{className:_t("recharts-cartesian-axis-line",$o(u,"className"))}))}},{key:"renderTicks",value:function(r,s,i){var o=this,a=this.props,l=a.tickLine,c=a.stroke,u=a.tick,d=a.tickFormatter,h=a.unit,p=S4(hi(hi({},this.props),{},{ticks:r}),s,i),m=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),y=He(this.props,!1),v=He(u,!1),x=hi(hi({},y),{},{fill:"none"},He(l,!1)),b=p.map(function(S,w){var C=o.getTickLineCoord(S),_=C.line,T=C.tick,k=hi(hi(hi(hi({textAnchor:m,verticalAnchor:g},y),{},{stroke:"none",fill:c},v),T),{},{index:w,payload:S,visibleTicksCount:p.length,tickFormatter:d});return F.createElement(At,Um({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},af(o.props,S,w)),l&&F.createElement("line",Um({},x,_,{className:_t("recharts-cartesian-axis-tick-line",$o(l,"className"))})),u&&e.renderTickItem(u,k,"".concat(at(d)?d(S.value,w):S.value).concat(h||"")))});return F.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var r=this,s=this.props,i=s.axisLine,o=s.width,a=s.height,l=s.ticksGenerator,c=s.className,u=s.hide;if(u)return null;var d=this.props,h=d.ticks,p=kO(d,ort),m=h;return at(l)&&(m=h&&h.length>0?l(this.props):l(p)),o<=0||a<=0||!m||!m.length?null:F.createElement(At,{className:_t("recharts-cartesian-axis",c),ref:function(y){r.layerReference=y}},i&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),ps.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,s,i){var o;return F.isValidElement(r)?o=F.cloneElement(r,s):at(r)?o=r(s):o=F.createElement(cp,Um({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(N.Component);C4(kv,"displayName","CartesianAxis");C4(kv,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var mrt=["x1","y1","x2","y2","key"],grt=["offset"];function fp(t){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fp(t)}function Y9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Js(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y9(Object(n),!0).forEach(function(r){yrt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yrt(t,e,n){return e=vrt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vrt(t){var e=xrt(t,"string");return fp(e)=="symbol"?e:e+""}function xrt(t,e){if(fp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _h(){return _h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_h.apply(this,arguments)}function Q9(t,e){if(t==null)return{};var n=brt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function brt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var wrt=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,s=e.x,i=e.y,o=e.width,a=e.height,l=e.ry;return F.createElement("rect",{x:s,y:i,ry:l,width:o,height:a,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function cde(t,e){var n;if(F.isValidElement(t))n=F.cloneElement(t,e);else if(at(t))n=t(e);else{var r=e.x1,s=e.y1,i=e.x2,o=e.y2,a=e.key,l=Q9(e,mrt),c=He(l,!1);c.offset;var u=Q9(c,grt);n=F.createElement("line",_h({},u,{x1:r,y1:s,x2:i,y2:o,fill:"none",key:a}))}return n}function Srt(t){var e=t.x,n=t.width,r=t.horizontal,s=r===void 0?!0:r,i=t.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(a,l){var c=Js(Js({},t),{},{x1:e,y1:a,x2:e+n,y2:a,key:"line-".concat(l),index:l});return cde(s,c)});return F.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Crt(t){var e=t.y,n=t.height,r=t.vertical,s=r===void 0?!0:r,i=t.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(a,l){var c=Js(Js({},t),{},{x1:a,y1:e,x2:a,y2:e+n,key:"line-".concat(l),index:l});return cde(s,c)});return F.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Nrt(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,s=t.y,i=t.width,o=t.height,a=t.horizontalPoints,l=t.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var u=a.map(function(h){return Math.round(h+s-s)}).sort(function(h,p){return h-p});s!==u[0]&&u.unshift(0);var d=u.map(function(h,p){var m=!u[p+1],g=m?s+o-h:u[p+1]-h;if(g<=0)return null;var y=p%e.length;return F.createElement("rect",{key:"react-".concat(p),y:h,x:r,height:g,width:i,stroke:"none",fill:e[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return F.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function _rt(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,s=t.fillOpacity,i=t.x,o=t.y,a=t.width,l=t.height,c=t.verticalPoints;if(!n||!r||!r.length)return null;var u=c.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==u[0]&&u.unshift(0);var d=u.map(function(h,p){var m=!u[p+1],g=m?i+a-h:u[p+1]-h;if(g<=0)return null;var y=p%r.length;return F.createElement("rect",{key:"react-".concat(p),x:h,y:o,width:g,height:l,stroke:"none",fill:r[y],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return F.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Trt=function(e,n){var r=e.xAxis,s=e.width,i=e.height,o=e.offset;return tue(S4(Js(Js(Js({},kv.defaultProps),r),{},{ticks:cu(r,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,n)},krt=function(e,n){var r=e.yAxis,s=e.width,i=e.height,o=e.offset;return tue(S4(Js(Js(Js({},kv.defaultProps),r),{},{ticks:cu(r,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,n)},mm={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function si(t){var e,n,r,s,i,o,a=v4(),l=x4(),c=pnt(),u=Js(Js({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:mm.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:mm.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:mm.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:mm.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:mm.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:mm.verticalFill,x:ke(t.x)?t.x:c.left,y:ke(t.y)?t.y:c.top,width:ke(t.width)?t.width:c.width,height:ke(t.height)?t.height:c.height}),d=u.x,h=u.y,p=u.width,m=u.height,g=u.syncWithTicks,y=u.horizontalValues,v=u.verticalValues,x=dnt(),b=fnt();if(!ke(p)||p<=0||!ke(m)||m<=0||!ke(d)||d!==+d||!ke(h)||h!==+h)return null;var S=u.verticalCoordinatesGenerator||Trt,w=u.horizontalCoordinatesGenerator||krt,C=u.horizontalPoints,_=u.verticalPoints;if((!C||!C.length)&&at(w)){var T=y&&y.length,k=w({yAxis:b?Js(Js({},b),{},{ticks:T?y:b.ticks}):void 0,width:a,height:l,offset:c},T?!0:g);fl(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(fp(k),"]")),Array.isArray(k)&&(C=k)}if((!_||!_.length)&&at(S)){var $=v&&v.length,O=S({xAxis:x?Js(Js({},x),{},{ticks:$?v:x.ticks}):void 0,width:a,height:l,offset:c},$?!0:g);fl(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(fp(O),"]")),Array.isArray(O)&&(_=O)}return F.createElement("g",{className:"recharts-cartesian-grid"},F.createElement(wrt,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),F.createElement(Srt,_h({},u,{offset:c,horizontalPoints:C,xAxis:x,yAxis:b})),F.createElement(Crt,_h({},u,{offset:c,verticalPoints:_,xAxis:x,yAxis:b})),F.createElement(Nrt,_h({},u,{horizontalPoints:C})),F.createElement(_rt,_h({},u,{verticalPoints:_})))}si.displayName="CartesianGrid";var Ert=["type","layout","connectNulls","ref"],$rt=["key"];function wy(t){"@babel/helpers - typeof";return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wy(t)}function Z9(t,e){if(t==null)return{};var n=Art(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Art(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function S0(){return S0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},S0.apply(this,arguments)}function J9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function mo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J9(Object(n),!0).forEach(function(r){Za(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gm(t){return Rrt(t)||Prt(t)||Ort(t)||Irt()}function Irt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ort(t,e){if(t){if(typeof t=="string")return Pj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pj(t,e)}}function Prt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Rrt(t){if(Array.isArray(t))return Pj(t)}function Pj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Drt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dde(r.key),r)}}function jrt(t,e,n){return e&&e7(t.prototype,e),n&&e7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mrt(t,e,n){return e=U_(e),Frt(t,ude()?Reflect.construct(e,n||[],U_(t).constructor):e.apply(t,n))}function Frt(t,e){if(e&&(wy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lrt(t)}function Lrt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ude(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ude=function(){return!!t})()}function U_(t){return U_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},U_(t)}function Brt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rj(t,e)}function Rj(t,e){return Rj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Rj(t,e)}function Za(t,e,n){return e=dde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dde(t){var e=zrt(t,"string");return wy(e)=="symbol"?e:e+""}function zrt(t,e){if(wy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ii=function(t){function e(){var n;Drt(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=Mrt(this,e,[].concat(s)),Za(n,"state",{isAnimationFinished:!0,totalLength:0}),Za(n,"generateSimpleStrokeDasharray",function(o,a){return"".concat(a,"px ").concat(o-a,"px")}),Za(n,"getStrokeDasharray",function(o,a,l){var c=l.reduce(function(v,x){return v+x});if(!c)return n.generateSimpleStrokeDasharray(a,o);for(var u=Math.floor(o/c),d=o%c,h=a-o,p=[],m=0,g=0;m<l.length;g+=l[m],++m)if(g+l[m]>d){p=[].concat(gm(l.slice(0,m)),[d-g]);break}var y=p.length%2===0?[0,h]:[h];return[].concat(gm(e.repeat(l,u)),gm(p),y).map(function(v){return"".concat(v,"px")}).join(", ")}),Za(n,"id",Tf("recharts-line-")),Za(n,"pathRef",function(o){n.mainCurve=o}),Za(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Za(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return Brt(e,t),jrt(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,a=i.xAxis,l=i.yAxis,c=i.layout,u=i.children,d=$i(u,Cv);if(!d)return null;var h=function(g,y){return{x:g.x,y:g.y,value:g.value,errorVal:Pn(g.payload,y)}},p={clipPath:r?"url(#clipPath-".concat(s,")"):null};return F.createElement(At,p,d.map(function(m){return F.cloneElement(m,{key:"bar-".concat(m.props.dataKey),data:o,xAxis:a,yAxis:l,layout:c,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,s,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var a=this.props,l=a.dot,c=a.points,u=a.dataKey,d=He(this.props,!1),h=He(l,!0),p=c.map(function(g,y){var v=mo(mo(mo({key:"dot-".concat(y),r:3},d),h),{},{value:g.value,dataKey:u,cx:g.x,cy:g.y,index:y,payload:g.payload});return e.renderDotItem(l,v)}),m={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return F.createElement(At,S0({className:"recharts-line-dots",key:"dots"},m),p)}},{key:"renderCurveStatically",value:function(r,s,i,o){var a=this.props,l=a.type,c=a.layout,u=a.connectNulls;a.ref;var d=Z9(a,Ert),h=mo(mo(mo({},He(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:r},o),{},{type:l,layout:c,connectNulls:u});return F.createElement(Gd,S0({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,s){var i=this,o=this.props,a=o.points,l=o.strokeDasharray,c=o.isAnimationActive,u=o.animationBegin,d=o.animationDuration,h=o.animationEasing,p=o.animationId,m=o.animateNewValues,g=o.width,y=o.height,v=this.state,x=v.prevPoints,b=v.totalLength;return F.createElement(Do,{begin:u,duration:d,isActive:c,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var w=S.t;if(x){var C=x.length/a.length,_=a.map(function(P,D){var A=Math.floor(D*C);if(x[A]){var I=x[A],R=On(I.x,P.x),M=On(I.y,P.y);return mo(mo({},P),{},{x:R(w),y:M(w)})}if(m){var E=On(g*2,P.x),j=On(y/2,P.y);return mo(mo({},P),{},{x:E(w),y:j(w)})}return mo(mo({},P),{},{x:P.x,y:P.y})});return i.renderCurveStatically(_,r,s)}var T=On(0,b),k=T(w),$;if(l){var O="".concat(l).split(/[,\s]+/gim).map(function(P){return parseFloat(P)});$=i.getStrokeDasharray(k,b,O)}else $=i.generateSimpleStrokeDasharray(b,k);return i.renderCurveStatically(a,r,s,{strokeDasharray:$})})}},{key:"renderCurve",value:function(r,s){var i=this.props,o=i.points,a=i.isAnimationActive,l=this.state,c=l.prevPoints,u=l.totalLength;return a&&o&&o.length&&(!c&&u>0||!Pu(c,o))?this.renderCurveWithAnimation(r,s):this.renderCurveStatically(o,r,s)}},{key:"render",value:function(){var r,s=this.props,i=s.hide,o=s.dot,a=s.points,l=s.className,c=s.xAxis,u=s.yAxis,d=s.top,h=s.left,p=s.width,m=s.height,g=s.isAnimationActive,y=s.id;if(i||!a||!a.length)return null;var v=this.state.isAnimationFinished,x=a.length===1,b=_t("recharts-line",l),S=c&&c.allowDataOverflow,w=u&&u.allowDataOverflow,C=S||w,_=ht(y)?this.id:y,T=(r=He(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},k=T.r,$=k===void 0?3:k,O=T.strokeWidth,P=O===void 0?2:O,D=qae(o)?o:{},A=D.clipDot,I=A===void 0?!0:A,R=$*2+P;return F.createElement(At,{className:b},S||w?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(_)},F.createElement("rect",{x:S?h:h-p/2,y:w?d:d-m/2,width:S?p:p*2,height:w?m:m*2})),!I&&F.createElement("clipPath",{id:"clipPath-dots-".concat(_)},F.createElement("rect",{x:h-R/2,y:d-R/2,width:p+R,height:m+R}))):null,!x&&this.renderCurve(C,_),this.renderErrorBar(C,_),(x||o)&&this.renderDots(C,I,_),(!g||v)&&ba.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:s.curPoints}:r.points!==s.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,s){for(var i=r.length%2!==0?[].concat(gm(r),[0]):r,o=[],a=0;a<s;++a)o=[].concat(gm(o),gm(i));return o}},{key:"renderDotItem",value:function(r,s){var i;if(F.isValidElement(r))i=F.cloneElement(r,s);else if(at(r))i=r(s);else{var o=s.key,a=Z9(s,$rt),l=_t("recharts-line-dot",typeof r!="boolean"?r.className:"");i=F.createElement(Nv,S0({key:o},a,{className:l}))}return i}}])}(N.PureComponent);Za(ii,"displayName","Line");Za(ii,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ao.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Za(ii,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,s=t.xAxisTicks,i=t.yAxisTicks,o=t.dataKey,a=t.bandSize,l=t.displayedData,c=t.offset,u=e.layout,d=l.map(function(h,p){var m=Pn(h,o);return u==="horizontal"?{x:ly({axis:n,ticks:s,bandSize:a,entry:h,index:p}),y:ht(m)?null:r.scale(m),value:m,payload:h}:{x:ht(m)?null:n.scale(m),y:ly({axis:r,ticks:i,bandSize:a,entry:h,index:p}),value:m,payload:h}});return mo({points:d,layout:u},c)});var Vrt=["layout","type","stroke","connectNulls","isRange","ref"],Wrt=["key"],fde;function Sy(t){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sy(t)}function hde(t,e){if(t==null)return{};var n=Urt(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Urt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Th(){return Th=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Th.apply(this,arguments)}function t7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function id(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t7(Object(n),!0).forEach(function(r){rc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Grt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mde(r.key),r)}}function Hrt(t,e,n){return e&&n7(t.prototype,e),n&&n7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function qrt(t,e,n){return e=G_(e),Krt(t,pde()?Reflect.construct(e,n||[],G_(t).constructor):e.apply(t,n))}function Krt(t,e){if(e&&(Sy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xrt(t)}function Xrt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pde(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pde=function(){return!!t})()}function G_(t){return G_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},G_(t)}function Yrt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dj(t,e)}function Dj(t,e){return Dj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Dj(t,e)}function rc(t,e,n){return e=mde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mde(t){var e=Qrt(t,"string");return Sy(e)=="symbol"?e:e+""}function Qrt(t,e){if(Sy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oi=function(t){function e(){var n;Grt(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=qrt(this,e,[].concat(s)),rc(n,"state",{isAnimationFinished:!0}),rc(n,"id",Tf("recharts-area-")),rc(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),at(o)&&o()}),rc(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),at(o)&&o()}),n}return Yrt(e,t),Hrt(e,[{key:"renderDots",value:function(r,s,i){var o=this.props.isAnimationActive,a=this.state.isAnimationFinished;if(o&&!a)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,h=He(this.props,!1),p=He(c,!0),m=u.map(function(y,v){var x=id(id(id({key:"dot-".concat(v),r:3},h),p),{},{index:v,cx:y.x,cy:y.y,dataKey:d,value:y.value,payload:y.payload,points:u});return e.renderDotItem(c,x)}),g={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return F.createElement(At,Th({className:"recharts-area-dots"},g),m)}},{key:"renderHorizontalRect",value:function(r){var s=this.props,i=s.baseLine,o=s.points,a=s.strokeWidth,l=o[0].x,c=o[o.length-1].x,u=r*Math.abs(l-c),d=Td(o.map(function(h){return h.y||0}));return ke(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(Td(i.map(function(h){return h.y||0})),d)),ke(d)?F.createElement("rect",{x:l<c?l:l-u,y:0,width:u,height:Math.floor(d+(a?parseInt("".concat(a),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var s=this.props,i=s.baseLine,o=s.points,a=s.strokeWidth,l=o[0].y,c=o[o.length-1].y,u=r*Math.abs(l-c),d=Td(o.map(function(h){return h.x||0}));return ke(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(Td(i.map(function(h){return h.x||0})),d)),ke(d)?F.createElement("rect",{x:0,y:l<c?l:l-u,width:d+(a?parseInt("".concat(a),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(r){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,s,i,o){var a=this.props,l=a.layout,c=a.type,u=a.stroke,d=a.connectNulls,h=a.isRange;a.ref;var p=hde(a,Vrt);return F.createElement(At,{clipPath:i?"url(#clipPath-".concat(o,")"):null},F.createElement(Gd,Th({},He(p,!0),{points:r,connectNulls:d,type:c,baseLine:s,layout:l,stroke:"none",className:"recharts-area-area"})),u!=="none"&&F.createElement(Gd,Th({},He(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:r})),u!=="none"&&h&&F.createElement(Gd,Th({},He(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(r,s){var i=this,o=this.props,a=o.points,l=o.baseLine,c=o.isAnimationActive,u=o.animationBegin,d=o.animationDuration,h=o.animationEasing,p=o.animationId,m=this.state,g=m.prevPoints,y=m.prevBaseLine;return F.createElement(Do,{begin:u,duration:d,isActive:c,easing:h,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var x=v.t;if(g){var b=g.length/a.length,S=a.map(function(T,k){var $=Math.floor(k*b);if(g[$]){var O=g[$],P=On(O.x,T.x),D=On(O.y,T.y);return id(id({},T),{},{x:P(x),y:D(x)})}return T}),w;if(ke(l)&&typeof l=="number"){var C=On(y,l);w=C(x)}else if(ht(l)||mv(l)){var _=On(y,0);w=_(x)}else w=l.map(function(T,k){var $=Math.floor(k*b);if(y[$]){var O=y[$],P=On(O.x,T.x),D=On(O.y,T.y);return id(id({},T),{},{x:P(x),y:D(x)})}return T});return i.renderAreaStatically(S,w,r,s)}return F.createElement(At,null,F.createElement("defs",null,F.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(x))),F.createElement(At,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(a,l,r,s)))})}},{key:"renderArea",value:function(r,s){var i=this.props,o=i.points,a=i.baseLine,l=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.prevBaseLine,h=c.totalLength;return l&&o&&o.length&&(!u&&h>0||!Pu(u,o)||!Pu(d,a))?this.renderAreaWithAnimation(r,s):this.renderAreaStatically(o,a,r,s)}},{key:"render",value:function(){var r,s=this.props,i=s.hide,o=s.dot,a=s.points,l=s.className,c=s.top,u=s.left,d=s.xAxis,h=s.yAxis,p=s.width,m=s.height,g=s.isAnimationActive,y=s.id;if(i||!a||!a.length)return null;var v=this.state.isAnimationFinished,x=a.length===1,b=_t("recharts-area",l),S=d&&d.allowDataOverflow,w=h&&h.allowDataOverflow,C=S||w,_=ht(y)?this.id:y,T=(r=He(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},k=T.r,$=k===void 0?3:k,O=T.strokeWidth,P=O===void 0?2:O,D=qae(o)?o:{},A=D.clipDot,I=A===void 0?!0:A,R=$*2+P;return F.createElement(At,{className:b},S||w?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(_)},F.createElement("rect",{x:S?u:u-p/2,y:w?c:c-m/2,width:S?p:p*2,height:w?m:m*2})),!I&&F.createElement("clipPath",{id:"clipPath-dots-".concat(_)},F.createElement("rect",{x:u-R/2,y:c-R/2,width:p+R,height:m+R}))):null,x?null:this.renderArea(C,_),(o||x)&&this.renderDots(C,I,_),(!g||v)&&ba.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:r.points!==s.curPoints||r.baseLine!==s.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(N.PureComponent);fde=oi;rc(oi,"displayName","Area");rc(oi,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ao.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});rc(oi,"getBaseValue",function(t,e,n,r){var s=t.layout,i=t.baseValue,o=e.props.baseValue,a=o??i;if(ke(a)&&typeof a=="number")return a;var l=s==="horizontal"?r:n,c=l.scale.domain();if(l.type==="number"){var u=Math.max(c[0],c[1]),d=Math.min(c[0],c[1]);return a==="dataMin"?d:a==="dataMax"||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return a==="dataMin"?c[0]:a==="dataMax"?c[1]:c[0]});rc(oi,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,s=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,a=t.bandSize,l=t.dataKey,c=t.stackedData,u=t.dataStartIndex,d=t.displayedData,h=t.offset,p=e.layout,m=c&&c.length,g=fde.getBaseValue(e,n,r,s),y=p==="horizontal",v=!1,x=d.map(function(S,w){var C;m?C=c[u+w]:(C=Pn(S,l),Array.isArray(C)?v=!0:C=[g,C]);var _=C[1]==null||m&&Pn(S,l)==null;return y?{x:ly({axis:r,ticks:i,bandSize:a,entry:S,index:w}),y:_?null:s.scale(C[1]),value:C,payload:S}:{x:_?null:r.scale(C[1]),y:ly({axis:s,ticks:o,bandSize:a,entry:S,index:w}),value:C,payload:S}}),b;return m||v?b=x.map(function(S){var w=Array.isArray(S.value)?S.value[0]:null;return y?{x:S.x,y:w!=null&&S.y!=null?s.scale(w):null}:{x:w!=null?r.scale(w):null,y:S.y}}):b=y?s.scale(g):r.scale(g),id({points:x,baseLine:b,layout:p,isRange:v},h)});rc(oi,"renderDotItem",function(t,e){var n;if(F.isValidElement(t))n=F.cloneElement(t,e);else if(at(t))n=t(e);else{var r=_t("recharts-area-dot",typeof t!="boolean"?t.className:""),s=e.key,i=hde(e,Wrt);n=F.createElement(Nv,Th({},i,{key:s,className:r}))}return n});function Cy(t){"@babel/helpers - typeof";return Cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cy(t)}function Zrt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jrt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vde(r.key),r)}}function est(t,e,n){return e&&Jrt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function tst(t,e,n){return e=H_(e),nst(t,gde()?Reflect.construct(e,n||[],H_(t).constructor):e.apply(t,n))}function nst(t,e){if(e&&(Cy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rst(t)}function rst(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gde(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gde=function(){return!!t})()}function H_(t){return H_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},H_(t)}function sst(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jj(t,e)}function jj(t,e){return jj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},jj(t,e)}function yde(t,e,n){return e=vde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vde(t){var e=ist(t,"string");return Cy(e)=="symbol"?e:e+""}function ist(t,e){if(Cy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Cy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kE=function(t){function e(){return Zrt(this,e),tst(this,e,arguments)}return sst(e,t),est(e,[{key:"render",value:function(){return null}}])}(F.Component);yde(kE,"displayName","ZAxis");yde(kE,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var ost=["option","isActive"];function C0(){return C0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},C0.apply(this,arguments)}function ast(t,e){if(t==null)return{};var n=lst(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lst(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function cst(t){var e=t.option,n=t.isActive,r=ast(t,ost);return typeof e=="string"?F.createElement(A_,C0({option:F.createElement(nE,C0({type:e},r)),isActive:n,shapeType:"symbols"},r)):F.createElement(A_,C0({option:e,isActive:n,shapeType:"symbols"},r))}function Ny(t){"@babel/helpers - typeof";return Ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ny(t)}function N0(){return N0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},N0.apply(this,arguments)}function r7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Jo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r7(Object(n),!0).forEach(function(r){Ed(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ust(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bde(r.key),r)}}function dst(t,e,n){return e&&s7(t.prototype,e),n&&s7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function fst(t,e,n){return e=q_(e),hst(t,xde()?Reflect.construct(e,n||[],q_(t).constructor):e.apply(t,n))}function hst(t,e){if(e&&(Ny(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pst(t)}function pst(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xde(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xde=function(){return!!t})()}function q_(t){return q_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},q_(t)}function mst(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mj(t,e)}function Mj(t,e){return Mj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Mj(t,e)}function Ed(t,e,n){return e=bde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bde(t){var e=gst(t,"string");return Ny(e)=="symbol"?e:e+""}function gst(t,e){if(Ny(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ny(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Y1=function(t){function e(){var n;ust(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=fst(this,e,[].concat(s)),Ed(n,"state",{isAnimationFinished:!1}),Ed(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0})}),Ed(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1})}),Ed(n,"id",Tf("recharts-scatter-")),n}return mst(e,t),dst(e,[{key:"renderSymbolsStatically",value:function(r){var s=this,i=this.props,o=i.shape,a=i.activeShape,l=i.activeIndex,c=He(this.props,!1);return r.map(function(u,d){var h=l===d,p=h?a:o,m=Jo(Jo({},c),u);return F.createElement(At,N0({className:"recharts-scatter-symbol",key:"symbol-".concat(u==null?void 0:u.cx,"-").concat(u==null?void 0:u.cy,"-").concat(u==null?void 0:u.size,"-").concat(d)},af(s.props,u,d),{role:"img"}),F.createElement(cst,N0({option:p,isActive:h,key:"symbol-".concat(d)},m)))})}},{key:"renderSymbolsWithAnimation",value:function(){var r=this,s=this.props,i=s.points,o=s.isAnimationActive,a=s.animationBegin,l=s.animationDuration,c=s.animationEasing,u=s.animationId,d=this.state.prevPoints;return F.createElement(Do,{begin:a,duration:l,isActive:o,easing:c,from:{t:0},to:{t:1},key:"pie-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var p=h.t,m=i.map(function(g,y){var v=d&&d[y];if(v){var x=On(v.cx,g.cx),b=On(v.cy,g.cy),S=On(v.size,g.size);return Jo(Jo({},g),{},{cx:x(p),cy:b(p),size:S(p)})}var w=On(0,g.size);return Jo(Jo({},g),{},{size:w(p)})});return F.createElement(At,null,r.renderSymbolsStatically(m))})}},{key:"renderSymbols",value:function(){var r=this.props,s=r.points,i=r.isAnimationActive,o=this.state.prevPoints;return i&&s&&s.length&&(!o||!Pu(o,s))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(s)}},{key:"renderErrorBar",value:function(){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var s=this.props,i=s.points,o=s.xAxis,a=s.yAxis,l=s.children,c=$i(l,Cv);return c?c.map(function(u,d){var h=u.props,p=h.direction,m=h.dataKey;return F.cloneElement(u,{key:"".concat(p,"-").concat(m,"-").concat(i[d]),data:i,xAxis:o,yAxis:a,layout:p==="x"?"vertical":"horizontal",dataPointFormatter:function(y,v){return{x:y.cx,y:y.cy,value:p==="x"?+y.node.x:+y.node.y,errorVal:Pn(y,v)}}})}):null}},{key:"renderLine",value:function(){var r=this.props,s=r.points,i=r.line,o=r.lineType,a=r.lineJointType,l=He(this.props,!1),c=He(i,!1),u,d;if(o==="joint")u=s.map(function(b){return{x:b.cx,y:b.cy}});else if(o==="fitting"){var h=P3e(s),p=h.xmin,m=h.xmax,g=h.a,y=h.b,v=function(S){return g*S+y};u=[{x:p,y:v(p)},{x:m,y:v(m)}]}var x=Jo(Jo(Jo({},l),{},{fill:"none",stroke:l&&l.fill},c),{},{points:u});return F.isValidElement(i)?d=F.cloneElement(i,x):at(i)?d=i(x):d=F.createElement(Gd,N0({},x,{type:a})),F.createElement(At,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}},{key:"render",value:function(){var r=this.props,s=r.hide,i=r.points,o=r.line,a=r.className,l=r.xAxis,c=r.yAxis,u=r.left,d=r.top,h=r.width,p=r.height,m=r.id,g=r.isAnimationActive;if(s||!i||!i.length)return null;var y=this.state.isAnimationFinished,v=_t("recharts-scatter",a),x=l&&l.allowDataOverflow,b=c&&c.allowDataOverflow,S=x||b,w=ht(m)?this.id:m;return F.createElement(At,{className:v,clipPath:S?"url(#clipPath-".concat(w,")"):null},x||b?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(w)},F.createElement("rect",{x:x?u:u-h/2,y:b?d:d-p/2,width:x?h:h*2,height:b?p:p*2}))):null,o&&this.renderLine(),this.renderErrorBar(),F.createElement(At,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!g||y)&&ba.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:s.curPoints}:r.points!==s.curPoints?{curPoints:r.points}:null}}])}(N.PureComponent);Ed(Y1,"displayName","Scatter");Ed(Y1,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Ao.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Ed(Y1,"getComposedData",function(t){var e=t.xAxis,n=t.yAxis,r=t.zAxis,s=t.item,i=t.displayedData,o=t.xAxisTicks,a=t.yAxisTicks,l=t.offset,c=s.props.tooltipType,u=$i(s.props.children,xv),d=ht(e.dataKey)?s.props.dataKey:e.dataKey,h=ht(n.dataKey)?s.props.dataKey:n.dataKey,p=r&&r.dataKey,m=r?r.range:kE.defaultProps.range,g=m&&m[0],y=e.scale.bandwidth?e.scale.bandwidth():0,v=n.scale.bandwidth?n.scale.bandwidth():0,x=i.map(function(b,S){var w=Pn(b,d),C=Pn(b,h),_=!ht(p)&&Pn(b,p)||"-",T=[{name:ht(e.dataKey)?s.props.name:e.name||e.dataKey,unit:e.unit||"",value:w,payload:b,dataKey:d,type:c},{name:ht(n.dataKey)?s.props.name:n.name||n.dataKey,unit:n.unit||"",value:C,payload:b,dataKey:h,type:c}];_!=="-"&&T.push({name:r.name||r.dataKey,unit:r.unit||"",value:_,payload:b,dataKey:p,type:c});var k=ly({axis:e,ticks:o,bandSize:y,entry:b,index:S,dataKey:d}),$=ly({axis:n,ticks:a,bandSize:v,entry:b,index:S,dataKey:h}),O=_!=="-"?r.scale(_):g,P=Math.sqrt(Math.max(O,0)/Math.PI);return Jo(Jo({},b),{},{cx:k,cy:$,x:k-P,y:$-P,xAxis:e,yAxis:n,zAxis:r,width:2*P,height:2*P,size:O,node:{x:w,y:C,z:_},tooltipPayload:T,tooltipPosition:{x:k,y:$},payload:b},u&&u[S]&&u[S].props)});return Jo({points:x},l)});function _y(t){"@babel/helpers - typeof";return _y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_y(t)}function yst(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vst(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cde(r.key),r)}}function xst(t,e,n){return e&&vst(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bst(t,e,n){return e=K_(e),wst(t,wde()?Reflect.construct(e,n||[],K_(t).constructor):e.apply(t,n))}function wst(t,e){if(e&&(_y(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sst(t)}function Sst(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wde(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wde=function(){return!!t})()}function K_(t){return K_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},K_(t)}function Cst(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fj(t,e)}function Fj(t,e){return Fj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Fj(t,e)}function Sde(t,e,n){return e=Cde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cde(t){var e=Nst(t,"string");return _y(e)=="symbol"?e:e+""}function Nst(t,e){if(_y(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_y(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lj(){return Lj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lj.apply(this,arguments)}function _st(t){var e=t.xAxisId,n=v4(),r=x4(),s=Zue(e);return s==null?null:F.createElement(kv,Lj({},s,{className:_t("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return cu(o,!0)}}))}var _r=function(t){function e(){return yst(this,e),bst(this,e,arguments)}return Cst(e,t),xst(e,[{key:"render",value:function(){return F.createElement(_st,this.props)}}])}(F.Component);Sde(_r,"displayName","XAxis");Sde(_r,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ty(t){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ty(t)}function Tst(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kst(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tde(r.key),r)}}function Est(t,e,n){return e&&kst(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $st(t,e,n){return e=X_(e),Ast(t,Nde()?Reflect.construct(e,n||[],X_(t).constructor):e.apply(t,n))}function Ast(t,e){if(e&&(Ty(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ist(t)}function Ist(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nde(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nde=function(){return!!t})()}function X_(t){return X_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},X_(t)}function Ost(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bj(t,e)}function Bj(t,e){return Bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Bj(t,e)}function _de(t,e,n){return e=Tde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tde(t){var e=Pst(t,"string");return Ty(e)=="symbol"?e:e+""}function Pst(t,e){if(Ty(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ty(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zj(){return zj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zj.apply(this,arguments)}var Rst=function(e){var n=e.yAxisId,r=v4(),s=x4(),i=Jue(n);return i==null?null:F.createElement(kv,zj({},i,{className:_t("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(a){return cu(a,!0)}}))},ar=function(t){function e(){return Tst(this,e),$st(this,e,arguments)}return Ost(e,t),Est(e,[{key:"render",value:function(){return F.createElement(Rst,this.props)}}])}(F.Component);_de(ar,"displayName","YAxis");_de(ar,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function i7(t){return Fst(t)||Mst(t)||jst(t)||Dst()}function Dst(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jst(t,e){if(t){if(typeof t=="string")return Vj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vj(t,e)}}function Mst(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Fst(t){if(Array.isArray(t))return Vj(t)}function Vj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Wj=function(e,n,r,s,i){var o=$i(e,w4),a=$i(e,NE),l=[].concat(i7(o),i7(a)),c=$i(e,TE),u="".concat(s,"Id"),d=s[0],h=n;if(l.length&&(h=l.reduce(function(g,y){if(y.props[u]===r&&fc(y.props,"extendDomain")&&ke(y.props[d])){var v=y.props[d];return[Math.min(g[0],v),Math.max(g[1],v)]}return g},h)),c.length){var p="".concat(d,"1"),m="".concat(d,"2");h=c.reduce(function(g,y){if(y.props[u]===r&&fc(y.props,"extendDomain")&&ke(y.props[p])&&ke(y.props[m])){var v=y.props[p],x=y.props[m];return[Math.min(g[0],v,x),Math.max(g[1],v,x)]}return g},h)}return i&&i.length&&(h=i.reduce(function(g,y){return ke(y)?[Math.min(g[0],y),Math.max(g[1],y)]:g},h)),h},kde={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,d||l,h),m=n?n+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,p=d.length,m=new Array(p);h<p;h++)m[h]=d[h].fn;return m},a.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,h,p,m){var g=n?n+c:c;if(!this._events[g])return!1;var y=this._events[g],v=arguments.length,x,b;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),v){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,p),!0;case 6:return y.fn.call(y.context,u,d,h,p,m),!0}for(b=1,x=new Array(v-1);b<v;b++)x[b-1]=arguments[b];y.fn.apply(y.context,x)}else{var S=y.length,w;for(b=0;b<S;b++)switch(y[b].once&&this.removeListener(c,y[b].fn,void 0,!0),v){case 1:y[b].fn.call(y[b].context);break;case 2:y[b].fn.call(y[b].context,u);break;case 3:y[b].fn.call(y[b].context,u,d);break;case 4:y[b].fn.call(y[b].context,u,d,h);break;default:if(!x)for(w=1,x=new Array(v-1);w<v;w++)x[w-1]=arguments[w];y[b].fn.apply(y[b].context,x)}}return!0},a.prototype.on=function(c,u,d){return i(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return i(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,h){var p=n?n+c:c;if(!this._events[p])return this;if(!u)return o(this,p),this;var m=this._events[p];if(m.fn)m.fn===u&&(!h||m.once)&&(!d||m.context===d)&&o(this,p);else{for(var g=0,y=[],v=m.length;g<v;g++)(m[g].fn!==u||h&&!m[g].once||d&&m[g].context!==d)&&y.push(m[g]);y.length?this._events[p]=y.length===1?y[0]:y:o(this,p)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(kde);var Lst=kde.exports;const Bst=nn(Lst);var EO=new Bst,$O="recharts.syncMouseEvents";function Kb(t){"@babel/helpers - typeof";return Kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kb(t)}function zst(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vst(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ede(r.key),r)}}function Wst(t,e,n){return e&&Vst(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function AO(t,e,n){return e=Ede(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ede(t){var e=Ust(t,"string");return Kb(e)=="symbol"?e:e+""}function Ust(t,e){if(Kb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gst=function(){function t(){zst(this,t),AO(this,"activeIndex",0),AO(this,"coordinateList",[]),AO(this,"layout","horizontal")}return Wst(t,[{key:"setDetails",value:function(n){var r,s=n.coordinateList,i=s===void 0?null:s,o=n.container,a=o===void 0?null:o,l=n.layout,c=l===void 0?null:l,u=n.offset,d=u===void 0?null:u,h=n.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(r=i??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=c??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,a=s.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=i+l+c,h=o+this.offset.top+a/2+u;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function Hst(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],s=t==null?void 0:t[1];if(r&&s&&ke(r)&&ke(s))return!0}return!1}function qst(t,e,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-s,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function $de(t){var e=t.cx,n=t.cy,r=t.radius,s=t.startAngle,i=t.endAngle,o=fn(e,n,r,s),a=fn(e,n,r,i);return{points:[o,a],cx:e,cy:n,radius:r,startAngle:s,endAngle:i}}function Kst(t,e,n){var r,s,i,o;if(t==="horizontal")r=e.x,i=r,s=n.top,o=n.top+n.height;else if(t==="vertical")s=e.y,o=s,r=n.left,i=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,d=e.angle,h=fn(a,l,c,d),p=fn(a,l,u,d);r=h.x,s=h.y,i=p.x,o=p.y}else return $de(e);return[{x:r,y:s},{x:i,y:o}]}function Xb(t){"@babel/helpers - typeof";return Xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xb(t)}function o7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function EC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o7(Object(n),!0).forEach(function(r){Xst(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xst(t,e,n){return e=Yst(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yst(t){var e=Qst(t,"string");return Xb(e)=="symbol"?e:e+""}function Qst(t,e){if(Xb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zst(t){var e,n,r=t.element,s=t.tooltipEventType,i=t.isActive,o=t.activeCoordinate,a=t.activePayload,l=t.offset,c=t.activeTooltipIndex,u=t.tooltipAxisBandSize,d=t.layout,h=t.chartName,p=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!i||!o||h!=="ScatterChart"&&s!=="axis")return null;var m,g=Gd;if(h==="ScatterChart")m=o,g=pZe;else if(h==="BarChart")m=qst(d,o,l,u),g=p4;else if(d==="radial"){var y=$de(o),v=y.cx,x=y.cy,b=y.radius,S=y.startAngle,w=y.endAngle;m={cx:v,cy:x,startAngle:S,endAngle:w,innerRadius:b,outerRadius:b},g=pue}else m={points:Kst(d,o,l)},g=Gd;var C=EC(EC(EC(EC({stroke:"#ccc",pointerEvents:"none"},l),m),He(p,!1)),{},{payload:a,payloadIndex:c,className:_t("recharts-tooltip-cursor",p.className)});return N.isValidElement(p)?N.cloneElement(p,C):N.createElement(g,C)}var Jst=["item"],eit=["children","className","width","height","style","compact","title","desc"];function ky(t){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ky(t)}function Gm(){return Gm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gm.apply(this,arguments)}function a7(t,e){return rit(t)||nit(t,e)||Ide(t,e)||tit()}function tit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nit(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}}function rit(t){if(Array.isArray(t))return t}function l7(t,e){if(t==null)return{};var n=sit(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sit(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function iit(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oit(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ode(r.key),r)}}function ait(t,e,n){return e&&oit(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lit(t,e,n){return e=Y_(e),cit(t,Ade()?Reflect.construct(e,n||[],Y_(t).constructor):e.apply(t,n))}function cit(t,e){if(e&&(ky(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uit(t)}function uit(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ade(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ade=function(){return!!t})()}function Y_(t){return Y_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Y_(t)}function dit(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uj(t,e)}function Uj(t,e){return Uj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Uj(t,e)}function Ey(t){return pit(t)||hit(t)||Ide(t)||fit()}function fit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ide(t,e){if(t){if(typeof t=="string")return Gj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gj(t,e)}}function hit(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pit(t){if(Array.isArray(t))return Gj(t)}function Gj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function fe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c7(Object(n),!0).forEach(function(r){yt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yt(t,e,n){return e=Ode(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ode(t){var e=mit(t,"string");return ky(e)=="symbol"?e:e+""}function mit(t,e){if(ky(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ky(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var git={xAxis:["bottom","top"],yAxis:["left","right"]},yit={width:"100%",height:"100%"},Pde={x:0,y:0};function $C(t){return t}var vit=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},xit=function(e,n,r,s){var i=n.find(function(u){return u&&u.index===r});if(i){if(e==="horizontal")return{x:i.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,a=s.radius;return fe(fe(fe({},s),fn(s.cx,s.cy,a,o)),{},{angle:o,radius:a})}var l=i.coordinate,c=s.angle;return fe(fe(fe({},s),fn(s.cx,s.cy,l,c)),{},{angle:c,radius:l})}return Pde},EE=function(e,n){var r=n.graphicalItems,s=n.dataStartIndex,i=n.dataEndIndex,o=(r??[]).reduce(function(a,l){var c=l.props.data;return c&&c.length?[].concat(Ey(a),Ey(c)):a},[]);return o.length>0?o:e&&e.length&&ke(s)&&ke(i)?e.slice(s,i+1):[]};function Rde(t){return t==="number"?[0,"auto"]:void 0}var Hj=function(e,n,r,s){var i=e.graphicalItems,o=e.tooltipAxis,a=EE(n,e);return r<0||!i||!i.length||r>=a.length?null:i.reduce(function(l,c){var u,d=(u=c.props.data)!==null&&u!==void 0?u:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var p=d===void 0?a:d;h=GN(p,o.dataKey,s)}else h=d&&d[r]||a[r];return h?[].concat(Ey(l),[oue(c,h)]):l},[])},u7=function(e,n,r,s){var i=s||{x:e.chartX,y:e.chartY},o=vit(i,r),a=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=VKe(o,a,c,l);if(u>=0&&c){var d=c[u]&&c[u].value,h=Hj(e,n,u,d),p=xit(r,a,u,i);return{activeTooltipIndex:u,activeLabel:d,activePayload:h,activeCoordinate:p}}return null},bit=function(e,n){var r=n.axes,s=n.graphicalItems,i=n.axisType,o=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,d=e.children,h=e.stackOffset,p=eue(u,i);return r.reduce(function(m,g){var y,v=g.type.defaultProps!==void 0?fe(fe({},g.type.defaultProps),g.props):g.props,x=v.type,b=v.dataKey,S=v.allowDataOverflow,w=v.allowDuplicatedCategory,C=v.scale,_=v.ticks,T=v.includeHidden,k=v[o];if(m[k])return m;var $=EE(e.data,{graphicalItems:s.filter(function(G){var te,ne=o in G.props?G.props[o]:(te=G.type.defaultProps)===null||te===void 0?void 0:te[o];return ne===k}),dataStartIndex:l,dataEndIndex:c}),O=$.length,P,D,A;Hst(v.domain,S,x)&&(P=nj(v.domain,null,S),p&&(x==="number"||C!=="auto")&&(A=v0($,b,"category")));var I=Rde(x);if(!P||P.length===0){var R,M=(R=v.domain)!==null&&R!==void 0?R:I;if(b){if(P=v0($,b,x),x==="category"&&p){var E=O3e(P);w&&E?(D=P,P=R_(0,O)):w||(P=_H(M,P,g).reduce(function(G,te){return G.indexOf(te)>=0?G:[].concat(Ey(G),[te])},[]))}else if(x==="category")w?P=P.filter(function(G){return G!==""&&!ht(G)}):P=_H(M,P,g).reduce(function(G,te){return G.indexOf(te)>=0||te===""||ht(te)?G:[].concat(Ey(G),[te])},[]);else if(x==="number"){var j=qKe($,s.filter(function(G){var te,ne,ue=o in G.props?G.props[o]:(te=G.type.defaultProps)===null||te===void 0?void 0:te[o],ge="hide"in G.props?G.props.hide:(ne=G.type.defaultProps)===null||ne===void 0?void 0:ne.hide;return ue===k&&(T||!ge)}),b,i,u);j&&(P=j)}p&&(x==="number"||C!=="auto")&&(A=v0($,b,"category"))}else p?P=R_(0,O):a&&a[k]&&a[k].hasStack&&x==="number"?P=h==="expand"?[0,1]:iue(a[k].stackGroups,l,c):P=Jce($,s.filter(function(G){var te=o in G.props?G.props[o]:G.type.defaultProps[o],ne="hide"in G.props?G.props.hide:G.type.defaultProps.hide;return te===k&&(T||!ne)}),x,u,!0);if(x==="number")P=Wj(d,P,k,i,_),M&&(P=nj(M,P,S));else if(x==="category"&&M){var B=M,W=P.every(function(G){return B.indexOf(G)>=0});W&&(P=B)}}return fe(fe({},m),{},yt({},k,fe(fe({},v),{},{axisType:i,domain:P,categoricalDomain:A,duplicateDomain:D,originalDomain:(y=v.domain)!==null&&y!==void 0?y:I,isCategorical:p,layout:u})))},{})},wit=function(e,n){var r=n.graphicalItems,s=n.Axis,i=n.axisType,o=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,d=e.children,h=EE(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),p=h.length,m=eue(u,i),g=-1;return r.reduce(function(y,v){var x=v.type.defaultProps!==void 0?fe(fe({},v.type.defaultProps),v.props):v.props,b=x[o],S=Rde("number");if(!y[b]){g++;var w;return m?w=R_(0,p):a&&a[b]&&a[b].hasStack?(w=iue(a[b].stackGroups,l,c),w=Wj(d,w,b,i)):(w=nj(S,Jce(h,r.filter(function(C){var _,T,k=o in C.props?C.props[o]:(_=C.type.defaultProps)===null||_===void 0?void 0:_[o],$="hide"in C.props?C.props.hide:(T=C.type.defaultProps)===null||T===void 0?void 0:T.hide;return k===b&&!$}),"number",u),s.defaultProps.allowDataOverflow),w=Wj(d,w,b,i)),fe(fe({},y),{},yt({},b,fe(fe({axisType:i},s.defaultProps),{},{hide:!0,orientation:$o(git,"".concat(i,".").concat(g%2),null),domain:w,originalDomain:S,isCategorical:m,layout:u})))}return y},{})},Sit=function(e,n){var r=n.axisType,s=r===void 0?"xAxis":r,i=n.AxisComp,o=n.graphicalItems,a=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.children,d="".concat(s,"Id"),h=$i(u,i),p={};return h&&h.length?p=bit(e,{axes:h,graphicalItems:o,axisType:s,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:c}):o&&o.length&&(p=wit(e,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:c})),p},Cit=function(e){var n=pd(e),r=cu(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:z3(r,function(s){return s.coordinate}),tooltipAxis:n,tooltipAxisBandSize:x_(n,r)}},d7=function(e){var n=e.children,r=e.defaultShowTooltip,s=vo(n,lf),i=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},Nit=function(e){return!e||!e.length?!1:e.some(function(n){var r=pu(n&&n.type);return r&&r.indexOf("Bar")>=0})},f7=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},_it=function(e,n){var r=e.props,s=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,a=e.yAxisMap,l=a===void 0?{}:a,c=r.width,u=r.height,d=r.children,h=r.margin||{},p=vo(d,lf),m=vo(d,os),g=Object.keys(l).reduce(function(w,C){var _=l[C],T=_.orientation;return!_.mirror&&!_.hide?fe(fe({},w),{},yt({},T,w[T]+_.width)):w},{left:h.left||0,right:h.right||0}),y=Object.keys(o).reduce(function(w,C){var _=o[C],T=_.orientation;return!_.mirror&&!_.hide?fe(fe({},w),{},yt({},T,$o(w,"".concat(T))+_.height)):w},{top:h.top||0,bottom:h.bottom||0}),v=fe(fe({},y),g),x=v.bottom;p&&(v.bottom+=p.props.height||lf.defaultProps.height),m&&n&&(v=GKe(v,s,r,n));var b=c-v.left-v.right,S=u-v.top-v.bottom;return fe(fe({brushBottom:x},v),{},{width:Math.max(b,0),height:Math.max(S,0)})},Tit=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},Ev=function(e){var n=e.chartName,r=e.GraphicalChild,s=e.defaultTooltipEventType,i=s===void 0?"axis":s,o=e.validateTooltipEventTypes,a=o===void 0?["axis"]:o,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,d=e.defaultProps,h=function(v,x){var b=x.graphicalItems,S=x.stackGroups,w=x.offset,C=x.updateId,_=x.dataStartIndex,T=x.dataEndIndex,k=v.barSize,$=v.layout,O=v.barGap,P=v.barCategoryGap,D=v.maxBarSize,A=f7($),I=A.numericAxisName,R=A.cateAxisName,M=Nit(b),E=[];return b.forEach(function(j,B){var W=EE(v.data,{graphicalItems:[j],dataStartIndex:_,dataEndIndex:T}),G=j.type.defaultProps!==void 0?fe(fe({},j.type.defaultProps),j.props):j.props,te=G.dataKey,ne=G.maxBarSize,ue=G["".concat(I,"Id")],ge=G["".concat(R,"Id")],de={},we=l.reduce(function(Ee,Se){var Ne=x["".concat(Se.axisType,"Map")],qe=G["".concat(Se.axisType,"Id")];Ne&&Ne[qe]||Se.axisType==="zAxis"||dp();var mt=Ne[qe];return fe(fe({},Ee),{},yt(yt({},Se.axisType,mt),"".concat(Se.axisType,"Ticks"),cu(mt)))},de),se=we[R],he=we["".concat(R,"Ticks")],me=S&&S[ue]&&S[ue].hasStack&&nXe(j,S[ue].stackGroups),Y=pu(j.type).indexOf("Bar")>=0,ye=x_(se,he),Ae=[],Re=M&&WKe({barSize:k,stackGroups:S,totalSize:Tit(we,R)});if(Y){var ze,rt,z=ht(ne)?D:ne,Q=(ze=(rt=x_(se,he,!0))!==null&&rt!==void 0?rt:z)!==null&&ze!==void 0?ze:0;Ae=UKe({barGap:O,barCategoryGap:P,bandSize:Q!==ye?Q:ye,sizeList:Re[ge],maxBarSize:z}),Q!==ye&&(Ae=Ae.map(function(Ee){return fe(fe({},Ee),{},{position:fe(fe({},Ee.position),{},{offset:Ee.position.offset-Q/2})})}))}var ie=j&&j.type&&j.type.getComposedData;ie&&E.push({props:fe(fe({},ie(fe(fe({},we),{},{displayedData:W,props:v,dataKey:te,item:j,bandSize:ye,barPosition:Ae,offset:w,stackedData:me,layout:$,dataStartIndex:_,dataEndIndex:T}))),{},yt(yt(yt({key:j.key||"item-".concat(B)},I,we[I]),R,we[R]),"animationId",C)),childIndex:U3e(j,v.children),item:j})}),E},p=function(v,x){var b=v.props,S=v.dataStartIndex,w=v.dataEndIndex,C=v.updateId;if(!x8({props:b}))return null;var _=b.children,T=b.layout,k=b.stackOffset,$=b.data,O=b.reverseStackOrder,P=f7(T),D=P.numericAxisName,A=P.cateAxisName,I=$i(_,r),R=eXe($,I,"".concat(D,"Id"),"".concat(A,"Id"),k,O),M=l.reduce(function(G,te){var ne="".concat(te.axisType,"Map");return fe(fe({},G),{},yt({},ne,Sit(b,fe(fe({},te),{},{graphicalItems:I,stackGroups:te.axisType===D&&R,dataStartIndex:S,dataEndIndex:w}))))},{}),E=_it(fe(fe({},M),{},{props:b,graphicalItems:I}),x==null?void 0:x.legendBBox);Object.keys(M).forEach(function(G){M[G]=u(b,M[G],E,G.replace("Map",""),n)});var j=M["".concat(A,"Map")],B=Cit(j),W=h(b,fe(fe({},M),{},{dataStartIndex:S,dataEndIndex:w,updateId:C,graphicalItems:I,stackGroups:R,offset:E}));return fe(fe({formattedGraphicalItems:W,graphicalItems:I,offset:E,stackGroups:R},B),M)},m=function(y){function v(x){var b,S,w;return iit(this,v),w=lit(this,v,[x]),yt(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),yt(w,"accessibilityManager",new Gst),yt(w,"handleLegendBBoxUpdate",function(C){if(C){var _=w.state,T=_.dataStartIndex,k=_.dataEndIndex,$=_.updateId;w.setState(fe({legendBBox:C},p({props:w.props,dataStartIndex:T,dataEndIndex:k,updateId:$},fe(fe({},w.state),{},{legendBBox:C}))))}}),yt(w,"handleReceiveSyncEvent",function(C,_,T){if(w.props.syncId===C){if(T===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(_)}}),yt(w,"handleBrushChange",function(C){var _=C.startIndex,T=C.endIndex;if(_!==w.state.dataStartIndex||T!==w.state.dataEndIndex){var k=w.state.updateId;w.setState(function(){return fe({dataStartIndex:_,dataEndIndex:T},p({props:w.props,dataStartIndex:_,dataEndIndex:T,updateId:k},w.state))}),w.triggerSyncEvent({dataStartIndex:_,dataEndIndex:T})}}),yt(w,"handleMouseEnter",function(C){var _=w.getMouseInfo(C);if(_){var T=fe(fe({},_),{},{isTooltipActive:!0});w.setState(T),w.triggerSyncEvent(T);var k=w.props.onMouseEnter;at(k)&&k(T,C)}}),yt(w,"triggeredAfterMouseMove",function(C){var _=w.getMouseInfo(C),T=_?fe(fe({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(T),w.triggerSyncEvent(T);var k=w.props.onMouseMove;at(k)&&k(T,C)}),yt(w,"handleItemMouseEnter",function(C){w.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),yt(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),yt(w,"handleMouseMove",function(C){C.persist(),w.throttleTriggeredAfterMouseMove(C)}),yt(w,"handleMouseLeave",function(C){w.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};w.setState(_),w.triggerSyncEvent(_);var T=w.props.onMouseLeave;at(T)&&T(_,C)}),yt(w,"handleOuterEvent",function(C){var _=W3e(C),T=$o(w.props,"".concat(_));if(_&&at(T)){var k,$;/.*touch.*/i.test(_)?$=w.getMouseInfo(C.changedTouches[0]):$=w.getMouseInfo(C),T((k=$)!==null&&k!==void 0?k:{},C)}}),yt(w,"handleClick",function(C){var _=w.getMouseInfo(C);if(_){var T=fe(fe({},_),{},{isTooltipActive:!0});w.setState(T),w.triggerSyncEvent(T);var k=w.props.onClick;at(k)&&k(T,C)}}),yt(w,"handleMouseDown",function(C){var _=w.props.onMouseDown;if(at(_)){var T=w.getMouseInfo(C);_(T,C)}}),yt(w,"handleMouseUp",function(C){var _=w.props.onMouseUp;if(at(_)){var T=w.getMouseInfo(C);_(T,C)}}),yt(w,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),yt(w,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.handleMouseDown(C.changedTouches[0])}),yt(w,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.handleMouseUp(C.changedTouches[0])}),yt(w,"handleDoubleClick",function(C){var _=w.props.onDoubleClick;if(at(_)){var T=w.getMouseInfo(C);_(T,C)}}),yt(w,"handleContextMenu",function(C){var _=w.props.onContextMenu;if(at(_)){var T=w.getMouseInfo(C);_(T,C)}}),yt(w,"triggerSyncEvent",function(C){w.props.syncId!==void 0&&EO.emit($O,w.props.syncId,C,w.eventEmitterSymbol)}),yt(w,"applySyncEvent",function(C){var _=w.props,T=_.layout,k=_.syncMethod,$=w.state.updateId,O=C.dataStartIndex,P=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)w.setState(fe({dataStartIndex:O,dataEndIndex:P},p({props:w.props,dataStartIndex:O,dataEndIndex:P,updateId:$},w.state)));else if(C.activeTooltipIndex!==void 0){var D=C.chartX,A=C.chartY,I=C.activeTooltipIndex,R=w.state,M=R.offset,E=R.tooltipTicks;if(!M)return;if(typeof k=="function")I=k(E,C);else if(k==="value"){I=-1;for(var j=0;j<E.length;j++)if(E[j].value===C.activeLabel){I=j;break}}var B=fe(fe({},M),{},{x:M.left,y:M.top}),W=Math.min(D,B.x+B.width),G=Math.min(A,B.y+B.height),te=E[I]&&E[I].value,ne=Hj(w.state,w.props.data,I),ue=E[I]?{x:T==="horizontal"?E[I].coordinate:W,y:T==="horizontal"?G:E[I].coordinate}:Pde;w.setState(fe(fe({},C),{},{activeLabel:te,activeCoordinate:ue,activePayload:ne,activeTooltipIndex:I}))}else w.setState(C)}),yt(w,"renderCursor",function(C){var _,T=w.state,k=T.isTooltipActive,$=T.activeCoordinate,O=T.activePayload,P=T.offset,D=T.activeTooltipIndex,A=T.tooltipAxisBandSize,I=w.getTooltipEventType(),R=(_=C.props.active)!==null&&_!==void 0?_:k,M=w.props.layout,E=C.key||"_recharts-cursor";return F.createElement(Zst,{key:E,activeCoordinate:$,activePayload:O,activeTooltipIndex:D,chartName:n,element:C,isActive:R,layout:M,offset:P,tooltipAxisBandSize:A,tooltipEventType:I})}),yt(w,"renderPolarAxis",function(C,_,T){var k=$o(C,"type.axisType"),$=$o(w.state,"".concat(k,"Map")),O=C.type.defaultProps,P=O!==void 0?fe(fe({},O),C.props):C.props,D=$&&$[P["".concat(k,"Id")]];return N.cloneElement(C,fe(fe({},D),{},{className:_t(k,D.className),key:C.key||"".concat(_,"-").concat(T),ticks:cu(D,!0)}))}),yt(w,"renderPolarGrid",function(C){var _=C.props,T=_.radialLines,k=_.polarAngles,$=_.polarRadius,O=w.state,P=O.radiusAxisMap,D=O.angleAxisMap,A=pd(P),I=pd(D),R=I.cx,M=I.cy,E=I.innerRadius,j=I.outerRadius;return N.cloneElement(C,{polarAngles:Array.isArray(k)?k:cu(I,!0).map(function(B){return B.coordinate}),polarRadius:Array.isArray($)?$:cu(A,!0).map(function(B){return B.coordinate}),cx:R,cy:M,innerRadius:E,outerRadius:j,key:C.key||"polar-grid",radialLines:T})}),yt(w,"renderLegend",function(){var C=w.state.formattedGraphicalItems,_=w.props,T=_.children,k=_.width,$=_.height,O=w.props.margin||{},P=k-(O.left||0)-(O.right||0),D=Qce({children:T,formattedGraphicalItems:C,legendWidth:P,legendContent:c});if(!D)return null;var A=D.item,I=l7(D,Jst);return N.cloneElement(A,fe(fe({},I),{},{chartWidth:k,chartHeight:$,margin:O,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),yt(w,"renderTooltip",function(){var C,_=w.props,T=_.children,k=_.accessibilityLayer,$=vo(T,Tn);if(!$)return null;var O=w.state,P=O.isTooltipActive,D=O.activeCoordinate,A=O.activePayload,I=O.activeLabel,R=O.offset,M=(C=$.props.active)!==null&&C!==void 0?C:P;return N.cloneElement($,{viewBox:fe(fe({},R),{},{x:R.left,y:R.top}),active:M,label:I,payload:M?A:[],coordinate:D,accessibilityLayer:k})}),yt(w,"renderBrush",function(C){var _=w.props,T=_.margin,k=_.data,$=w.state,O=$.offset,P=$.dataStartIndex,D=$.dataEndIndex,A=$.updateId;return N.cloneElement(C,{key:C.key||"_recharts-brush",onChange:NC(w.handleBrushChange,C.props.onChange),data:k,x:ke(C.props.x)?C.props.x:O.left,y:ke(C.props.y)?C.props.y:O.top+O.height+O.brushBottom-(T.bottom||0),width:ke(C.props.width)?C.props.width:O.width,startIndex:P,endIndex:D,updateId:"brush-".concat(A)})}),yt(w,"renderReferenceElement",function(C,_,T){if(!C)return null;var k=w,$=k.clipPathId,O=w.state,P=O.xAxisMap,D=O.yAxisMap,A=O.offset,I=C.type.defaultProps||{},R=C.props,M=R.xAxisId,E=M===void 0?I.xAxisId:M,j=R.yAxisId,B=j===void 0?I.yAxisId:j;return N.cloneElement(C,{key:C.key||"".concat(_,"-").concat(T),xAxis:P[E],yAxis:D[B],viewBox:{x:A.left,y:A.top,width:A.width,height:A.height},clipPathId:$})}),yt(w,"renderActivePoints",function(C){var _=C.item,T=C.activePoint,k=C.basePoint,$=C.childIndex,O=C.isRange,P=[],D=_.props.key,A=_.item.type.defaultProps!==void 0?fe(fe({},_.item.type.defaultProps),_.item.props):_.item.props,I=A.activeDot,R=A.dataKey,M=fe(fe({index:$,dataKey:R,cx:T.x,cy:T.y,r:4,fill:h4(_.item),strokeWidth:2,stroke:"#fff",payload:T.payload,value:T.value},He(I,!1)),HN(I));return P.push(v.renderActiveDot(I,M,"".concat(D,"-activePoint-").concat($))),k?P.push(v.renderActiveDot(I,fe(fe({},M),{},{cx:k.x,cy:k.y}),"".concat(D,"-basePoint-").concat($))):O&&P.push(null),P}),yt(w,"renderGraphicChild",function(C,_,T){var k=w.filterFormatItem(C,_,T);if(!k)return null;var $=w.getTooltipEventType(),O=w.state,P=O.isTooltipActive,D=O.tooltipAxis,A=O.activeTooltipIndex,I=O.activeLabel,R=w.props.children,M=vo(R,Tn),E=k.props,j=E.points,B=E.isRange,W=E.baseLine,G=k.item.type.defaultProps!==void 0?fe(fe({},k.item.type.defaultProps),k.item.props):k.item.props,te=G.activeDot,ne=G.hide,ue=G.activeBar,ge=G.activeShape,de=!!(!ne&&P&&M&&(te||ue||ge)),we={};$!=="axis"&&M&&M.props.trigger==="click"?we={onClick:NC(w.handleItemMouseEnter,C.props.onClick)}:$!=="axis"&&(we={onMouseLeave:NC(w.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:NC(w.handleItemMouseEnter,C.props.onMouseEnter)});var se=N.cloneElement(C,fe(fe({},k.props),we));function he(Se){return typeof D.dataKey=="function"?D.dataKey(Se.payload):null}if(de)if(A>=0){var me,Y;if(D.dataKey&&!D.allowDuplicatedCategory){var ye=typeof D.dataKey=="function"?he:"payload.".concat(D.dataKey.toString());me=GN(j,ye,I),Y=B&&W&&GN(W,ye,I)}else me=j==null?void 0:j[A],Y=B&&W&&W[A];if(ge||ue){var Ae=C.props.activeIndex!==void 0?C.props.activeIndex:A;return[N.cloneElement(C,fe(fe(fe({},k.props),we),{},{activeIndex:Ae})),null,null]}if(!ht(me))return[se].concat(Ey(w.renderActivePoints({item:k,activePoint:me,basePoint:Y,childIndex:A,isRange:B})))}else{var Re,ze=(Re=w.getItemByXY(w.state.activeCoordinate))!==null&&Re!==void 0?Re:{graphicalItem:se},rt=ze.graphicalItem,z=rt.item,Q=z===void 0?C:z,ie=rt.childIndex,Ee=fe(fe(fe({},k.props),we),{},{activeIndex:ie});return[N.cloneElement(Q,Ee),null,null]}return B?[se,null,null]:[se,null]}),yt(w,"renderCustomized",function(C,_,T){return N.cloneElement(C,fe(fe({key:"recharts-customized-".concat(T)},w.props),w.state))}),yt(w,"renderMap",{CartesianGrid:{handler:$C,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:$C},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:$C},YAxis:{handler:$C},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((b=x.id)!==null&&b!==void 0?b:Tf("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=Yle(w.triggeredAfterMouseMove,(S=x.throttleDelay)!==null&&S!==void 0?S:1e3/60),w.state={},w}return dit(v,y),ait(v,[{key:"componentDidMount",value:function(){var b,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,S=b.children,w=b.data,C=b.height,_=b.layout,T=vo(S,Tn);if(T){var k=T.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var $=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,O=Hj(this.state,w,k,$),P=this.state.tooltipTicks[k].coordinate,D=(this.state.offset.top+C)/2,A=_==="horizontal",I=A?{x:P,y:D}:{y:P,x:D},R=this.state.formattedGraphicalItems.find(function(E){var j=E.item;return j.type.name==="Scatter"});R&&(I=fe(fe({},I),R.props.points[k].tooltipPosition),O=R.props.points[k].tooltipPayload);var M={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:$,activePayload:O,activeCoordinate:I};this.setState(M),this.renderCursor(T),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var w,C;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(b){yD([vo(b.children,Tn)],[vo(this.props.children,Tn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=vo(this.props.children,Tn);if(b&&typeof b.props.shared=="boolean"){var S=b.props.shared?"axis":"item";return a.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var S=this.container,w=S.getBoundingClientRect(),C=gHe(w),_={chartX:Math.round(b.pageX-C.left),chartY:Math.round(b.pageY-C.top)},T=w.width/S.offsetWidth||1,k=this.inRange(_.chartX,_.chartY,T);if(!k)return null;var $=this.state,O=$.xAxisMap,P=$.yAxisMap,D=this.getTooltipEventType();if(D!=="axis"&&O&&P){var A=pd(O).scale,I=pd(P).scale,R=A&&A.invert?A.invert(_.chartX):null,M=I&&I.invert?I.invert(_.chartY):null;return fe(fe({},_),{},{xValue:R,yValue:M})}var E=u7(this.state,this.props.data,this.props.layout,k);return E?fe(fe({},_),E):null}},{key:"inRange",value:function(b,S){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,_=b/w,T=S/w;if(C==="horizontal"||C==="vertical"){var k=this.state.offset,$=_>=k.left&&_<=k.left+k.width&&T>=k.top&&T<=k.top+k.height;return $?{x:_,y:T}:null}var O=this.state,P=O.angleAxisMap,D=O.radiusAxisMap;if(P&&D){var A=pd(P);return EH({x:_,y:T},A)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,S=this.getTooltipEventType(),w=vo(b,Tn),C={};w&&S==="axis"&&(w.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=HN(this.props,this.handleOuterEvent);return fe(fe({},_),C)}},{key:"addListener",value:function(){EO.on($O,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){EO.removeListener($O,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,S,w){for(var C=this.state.formattedGraphicalItems,_=0,T=C.length;_<T;_++){var k=C[_];if(k.item===b||k.props.key===b.key||S===pu(k.item.type)&&w===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,S=this.state.offset,w=S.left,C=S.top,_=S.height,T=S.width;return F.createElement("defs",null,F.createElement("clipPath",{id:b},F.createElement("rect",{x:w,y:C,height:_,width:T})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(S,w){var C=a7(w,2),_=C[0],T=C[1];return fe(fe({},S),{},yt({},_,T.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(S,w){var C=a7(w,2),_=C[0],T=C[1];return fe(fe({},S),{},yt({},_,T.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[b])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(b){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[b])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(b){var S=this.state,w=S.formattedGraphicalItems,C=S.activeItem;if(w&&w.length)for(var _=0,T=w.length;_<T;_++){var k=w[_],$=k.props,O=k.item,P=O.type.defaultProps!==void 0?fe(fe({},O.type.defaultProps),O.props):O.props,D=pu(O.type);if(D==="Bar"){var A=($.data||[]).find(function(E){return XQe(b,E)});if(A)return{graphicalItem:k,payload:A}}else if(D==="RadialBar"){var I=($.data||[]).find(function(E){return EH(b,E)});if(I)return{graphicalItem:k,payload:I}}else if(xE(k,C)||bE(k,C)||Wb(k,C)){var R=qJe({graphicalItem:k,activeTooltipItem:C,itemData:P.data}),M=P.activeIndex===void 0?R:P.activeIndex;return{graphicalItem:fe(fe({},k),{},{childIndex:M}),payload:Wb(k,C)?P.data[R]:k.props.data[R]}}}return null}},{key:"render",value:function(){var b=this;if(!x8(this))return null;var S=this.props,w=S.children,C=S.className,_=S.width,T=S.height,k=S.style,$=S.compact,O=S.title,P=S.desc,D=l7(S,eit),A=He(D,!1);if($)return F.createElement(L9,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},F.createElement(xD,Gm({},A,{width:_,height:T,title:O,desc:P}),this.renderClipPath(),w8(w,this.renderMap)));if(this.props.accessibilityLayer){var I,R;A.tabIndex=(I=this.props.tabIndex)!==null&&I!==void 0?I:0,A.role=(R=this.props.role)!==null&&R!==void 0?R:"application",A.onKeyDown=function(E){b.accessibilityManager.keyboardEvent(E)},A.onFocus=function(){b.accessibilityManager.focus()}}var M=this.parseEventsOfWrapper();return F.createElement(L9,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},F.createElement("div",Gm({className:_t("recharts-wrapper",C),style:fe({position:"relative",cursor:"default",width:_,height:T},k)},M,{ref:function(j){b.container=j}}),F.createElement(xD,Gm({},A,{width:_,height:T,title:O,desc:P,style:yit}),this.renderClipPath(),w8(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(N.Component);yt(m,"displayName",n),yt(m,"defaultProps",fe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),yt(m,"getDerivedStateFromProps",function(y,v){var x=y.dataKey,b=y.data,S=y.children,w=y.width,C=y.height,_=y.layout,T=y.stackOffset,k=y.margin,$=v.dataStartIndex,O=v.dataEndIndex;if(v.updateId===void 0){var P=d7(y);return fe(fe(fe({},P),{},{updateId:0},p(fe(fe({props:y},P),{},{updateId:0}),v)),{},{prevDataKey:x,prevData:b,prevWidth:w,prevHeight:C,prevLayout:_,prevStackOffset:T,prevMargin:k,prevChildren:S})}if(x!==v.prevDataKey||b!==v.prevData||w!==v.prevWidth||C!==v.prevHeight||_!==v.prevLayout||T!==v.prevStackOffset||!fg(k,v.prevMargin)){var D=d7(y),A={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},I=fe(fe({},u7(v,b,_)),{},{updateId:v.updateId+1}),R=fe(fe(fe({},D),A),I);return fe(fe(fe({},R),p(fe({props:y},R),v)),{},{prevDataKey:x,prevData:b,prevWidth:w,prevHeight:C,prevLayout:_,prevStackOffset:T,prevMargin:k,prevChildren:S})}if(!yD(S,v.prevChildren)){var M,E,j,B,W=vo(S,lf),G=W&&(M=(E=W.props)===null||E===void 0?void 0:E.startIndex)!==null&&M!==void 0?M:$,te=W&&(j=(B=W.props)===null||B===void 0?void 0:B.endIndex)!==null&&j!==void 0?j:O,ne=G!==$||te!==O,ue=!ht(b),ge=ue&&!ne?v.updateId:v.updateId+1;return fe(fe({updateId:ge},p(fe(fe({props:y},v),{},{updateId:ge,dataStartIndex:G,dataEndIndex:te}),v)),{},{prevChildren:S,dataStartIndex:G,dataEndIndex:te})}return null}),yt(m,"renderActiveDot",function(y,v,x){var b;return N.isValidElement(y)?b=N.cloneElement(y,v):at(y)?b=y(v):b=F.createElement(Nv,v),F.createElement(At,{className:"recharts-active-dot",key:x},b)});var g=N.forwardRef(function(v,x){return F.createElement(m,Gm({},v,{ref:x}))});return g.displayName=m.displayName,g},$E=Ev({chartName:"LineChart",GraphicalChild:ii,axisComponents:[{axisType:"xAxis",AxisComp:_r},{axisType:"yAxis",AxisComp:ar}],formatAxisMap:SE}),Q1=Ev({chartName:"BarChart",GraphicalChild:ls,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:_r},{axisType:"yAxis",AxisComp:ar}],formatAxisMap:SE}),Dde=Ev({chartName:"PieChart",GraphicalChild:Lc,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Tv},{axisType:"radiusAxis",AxisComp:_v}],formatAxisMap:cue,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),kit=Ev({chartName:"RadarChart",GraphicalChild:py,axisComponents:[{axisType:"angleAxis",AxisComp:Tv},{axisType:"radiusAxis",AxisComp:_v}],formatAxisMap:cue,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),N4=Ev({chartName:"AreaChart",GraphicalChild:oi,axisComponents:[{axisType:"xAxis",AxisComp:_r},{axisType:"yAxis",AxisComp:ar}],formatAxisMap:SE}),Q_=Ev({chartName:"ComposedChart",GraphicalChild:[ii,oi,ls,Y1],axisComponents:[{axisType:"xAxis",AxisComp:_r},{axisType:"yAxis",AxisComp:ar},{axisType:"zAxis",AxisComp:kE}],formatAxisMap:SE});function h7(t,[e,n]){return Math.min(n,Math.max(e,t))}function Eit(t){const e=N.useRef({value:t,previous:t});return N.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var $it=[" ","Enter","ArrowUp","ArrowDown"],Ait=[" ","Enter"],Z1="Select",[AE,IE,Iit]=O1(Z1),[$v,M9t]=$l(Z1,[Iit,Cf]),OE=Cf(),[Oit,Af]=$v(Z1),[Pit,Rit]=$v(Z1),jde=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:h,required:p,form:m}=t,g=OE(e),[y,v]=N.useState(null),[x,b]=N.useState(null),[S,w]=N.useState(!1),C=M1(c),[_=!1,T]=ka({prop:r,defaultProp:s,onChange:i}),[k,$]=ka({prop:o,defaultProp:a,onChange:l}),O=N.useRef(null),P=y?m||!!y.closest("form"):!0,[D,A]=N.useState(new Set),I=Array.from(D).map(R=>R.props.value).join(";");return f.jsx($k,{...g,children:f.jsxs(Oit,{required:p,scope:e,trigger:y,onTriggerChange:v,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:S,onValueNodeHasChildrenChange:w,contentId:to(),value:k,onValueChange:$,open:_,onOpenChange:T,dir:C,triggerPointerDownPosRef:O,disabled:h,children:[f.jsx(AE.Provider,{scope:e,children:f.jsx(Pit,{scope:t.__scopeSelect,onNativeOptionAdd:N.useCallback(R=>{A(M=>new Set(M).add(R))},[]),onNativeOptionRemove:N.useCallback(R=>{A(M=>{const E=new Set(M);return E.delete(R),E})},[]),children:n})}),P?f.jsxs(afe,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:k,onChange:R=>$(R.target.value),disabled:h,form:m,children:[k===void 0?f.jsx("option",{value:""}):null,Array.from(D)]},I):null]})})};jde.displayName=Z1;var Mde="SelectTrigger",Fde=N.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=OE(n),o=Af(Mde,n),a=o.disabled||r,l=Gt(e,o.onTriggerChange),c=IE(n),u=N.useRef("touch"),[d,h,p]=lfe(g=>{const y=c().filter(b=>!b.disabled),v=y.find(b=>b.value===o.value),x=cfe(y,g,v);x!==void 0&&o.onValueChange(x.value)}),m=g=>{a||(o.onOpenChange(!0),p()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return f.jsx(B1,{asChild:!0,...i,children:f.jsx(ct.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":ofe(o.value)?"":void 0,...s,ref:l,onClick:Ie(s.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&m(g)}),onPointerDown:Ie(s.onPointerDown,g=>{u.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(m(g),g.preventDefault())}),onKeyDown:Ie(s.onKeyDown,g=>{const y=d.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&h(g.key),!(y&&g.key===" ")&&$it.includes(g.key)&&(m(),g.preventDefault())})})})});Fde.displayName=Mde;var Lde="SelectValue",Bde=N.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,l=Af(Lde,n),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,d=Gt(e,l.onValueNodeChange);return Rs(()=>{c(u)},[c,u]),f.jsx(ct.span,{...a,ref:d,style:{pointerEvents:"none"},children:ofe(l.value)?f.jsx(f.Fragment,{children:o}):i})});Bde.displayName=Lde;var Dit="SelectIcon",zde=N.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return f.jsx(ct.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});zde.displayName=Dit;var jit="SelectPortal",Vde=t=>f.jsx(ev,{asChild:!0,...t});Vde.displayName=jit;var hp="SelectContent",Wde=N.forwardRef((t,e)=>{const n=Af(hp,t.__scopeSelect),[r,s]=N.useState();if(Rs(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Op.createPortal(f.jsx(Ude,{scope:t.__scopeSelect,children:f.jsx(AE.Slot,{scope:t.__scopeSelect,children:f.jsx("div",{children:t.children})})}),i):null}return f.jsx(Gde,{...t,ref:e})});Wde.displayName=hp;var Wa=10,[Ude,If]=$v(hp),Mit="SelectContentImpl",Gde=N.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:y,...v}=t,x=Af(hp,n),[b,S]=N.useState(null),[w,C]=N.useState(null),_=Gt(e,de=>S(de)),[T,k]=N.useState(null),[$,O]=N.useState(null),P=IE(n),[D,A]=N.useState(!1),I=N.useRef(!1);N.useEffect(()=>{if(b)return Ok(b)},[b]),_k();const R=N.useCallback(de=>{const[we,...se]=P().map(Y=>Y.ref.current),[he]=se.slice(-1),me=document.activeElement;for(const Y of de)if(Y===me||(Y==null||Y.scrollIntoView({block:"nearest"}),Y===we&&w&&(w.scrollTop=0),Y===he&&w&&(w.scrollTop=w.scrollHeight),Y==null||Y.focus(),document.activeElement!==me))return},[P,w]),M=N.useCallback(()=>R([T,b]),[R,T,b]);N.useEffect(()=>{D&&M()},[D,M]);const{onOpenChange:E,triggerPointerDownPosRef:j}=x;N.useEffect(()=>{if(b){let de={x:0,y:0};const we=he=>{var me,Y;de={x:Math.abs(Math.round(he.pageX)-(((me=j.current)==null?void 0:me.x)??0)),y:Math.abs(Math.round(he.pageY)-(((Y=j.current)==null?void 0:Y.y)??0))}},se=he=>{de.x<=10&&de.y<=10?he.preventDefault():b.contains(he.target)||E(!1),document.removeEventListener("pointermove",we),j.current=null};return j.current!==null&&(document.addEventListener("pointermove",we),document.addEventListener("pointerup",se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",we),document.removeEventListener("pointerup",se,{capture:!0})}}},[b,E,j]),N.useEffect(()=>{const de=()=>E(!1);return window.addEventListener("blur",de),window.addEventListener("resize",de),()=>{window.removeEventListener("blur",de),window.removeEventListener("resize",de)}},[E]);const[B,W]=lfe(de=>{const we=P().filter(me=>!me.disabled),se=we.find(me=>me.ref.current===document.activeElement),he=cfe(we,de,se);he&&setTimeout(()=>he.ref.current.focus())}),G=N.useCallback((de,we,se)=>{const he=!I.current&&!se;(x.value!==void 0&&x.value===we||he)&&(k(de),he&&(I.current=!0))},[x.value]),te=N.useCallback(()=>b==null?void 0:b.focus(),[b]),ne=N.useCallback((de,we,se)=>{const he=!I.current&&!se;(x.value!==void 0&&x.value===we||he)&&O(de)},[x.value]),ue=r==="popper"?qj:Hde,ge=ue===qj?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:y}:{};return f.jsx(Ude,{scope:n,content:b,viewport:w,onViewportChange:C,itemRefCallback:G,selectedItem:T,onItemLeave:te,itemTextRefCallback:ne,focusSelectedItem:M,selectedItemText:$,position:r,isPositioned:D,searchRef:B,children:f.jsx(z1,{as:Ii,allowPinchZoom:!0,children:f.jsx(F1,{asChild:!0,trapped:x.open,onMountAutoFocus:de=>{de.preventDefault()},onUnmountAutoFocus:Ie(s,de=>{var we;(we=x.trigger)==null||we.focus({preventScroll:!0}),de.preventDefault()}),children:f.jsx(Pp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:de=>de.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:f.jsx(ue,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:de=>de.preventDefault(),...v,...ge,onPlaced:()=>A(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:Ie(v.onKeyDown,de=>{const we=de.ctrlKey||de.altKey||de.metaKey;if(de.key==="Tab"&&de.preventDefault(),!we&&de.key.length===1&&W(de.key),["ArrowUp","ArrowDown","Home","End"].includes(de.key)){let he=P().filter(me=>!me.disabled).map(me=>me.ref.current);if(["ArrowUp","End"].includes(de.key)&&(he=he.slice().reverse()),["ArrowUp","ArrowDown"].includes(de.key)){const me=de.target,Y=he.indexOf(me);he=he.slice(Y+1)}setTimeout(()=>R(he)),de.preventDefault()}})})})})})})});Gde.displayName=Mit;var Fit="SelectItemAlignedPosition",Hde=N.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Af(hp,n),o=If(hp,n),[a,l]=N.useState(null),[c,u]=N.useState(null),d=Gt(e,_=>u(_)),h=IE(n),p=N.useRef(!1),m=N.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:v,focusSelectedItem:x}=o,b=N.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&g&&y&&v){const _=i.trigger.getBoundingClientRect(),T=c.getBoundingClientRect(),k=i.valueNode.getBoundingClientRect(),$=v.getBoundingClientRect();if(i.dir!=="rtl"){const me=$.left-T.left,Y=k.left-me,ye=_.left-Y,Ae=_.width+ye,Re=Math.max(Ae,T.width),ze=window.innerWidth-Wa,rt=h7(Y,[Wa,Math.max(Wa,ze-Re)]);a.style.minWidth=Ae+"px",a.style.left=rt+"px"}else{const me=T.right-$.right,Y=window.innerWidth-k.right-me,ye=window.innerWidth-_.right-Y,Ae=_.width+ye,Re=Math.max(Ae,T.width),ze=window.innerWidth-Wa,rt=h7(Y,[Wa,Math.max(Wa,ze-Re)]);a.style.minWidth=Ae+"px",a.style.right=rt+"px"}const O=h(),P=window.innerHeight-Wa*2,D=g.scrollHeight,A=window.getComputedStyle(c),I=parseInt(A.borderTopWidth,10),R=parseInt(A.paddingTop,10),M=parseInt(A.borderBottomWidth,10),E=parseInt(A.paddingBottom,10),j=I+R+D+E+M,B=Math.min(y.offsetHeight*5,j),W=window.getComputedStyle(g),G=parseInt(W.paddingTop,10),te=parseInt(W.paddingBottom,10),ne=_.top+_.height/2-Wa,ue=P-ne,ge=y.offsetHeight/2,de=y.offsetTop+ge,we=I+R+de,se=j-we;if(we<=ne){const me=O.length>0&&y===O[O.length-1].ref.current;a.style.bottom="0px";const Y=c.clientHeight-g.offsetTop-g.offsetHeight,ye=Math.max(ue,ge+(me?te:0)+Y+M),Ae=we+ye;a.style.height=Ae+"px"}else{const me=O.length>0&&y===O[0].ref.current;a.style.top="0px";const ye=Math.max(ne,I+g.offsetTop+(me?G:0)+ge)+se;a.style.height=ye+"px",g.scrollTop=we-ne+g.offsetTop}a.style.margin=`${Wa}px 0`,a.style.minHeight=B+"px",a.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[h,i.trigger,i.valueNode,a,c,g,y,v,i.dir,r]);Rs(()=>b(),[b]);const[S,w]=N.useState();Rs(()=>{c&&w(window.getComputedStyle(c).zIndex)},[c]);const C=N.useCallback(_=>{_&&m.current===!0&&(b(),x==null||x(),m.current=!1)},[b,x]);return f.jsx(Bit,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:C,children:f.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:f.jsx(ct.div,{...s,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Hde.displayName=Fit;var Lit="SelectPopperPosition",qj=N.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Wa,...i}=t,o=OE(n);return f.jsx(Ak,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});qj.displayName=Lit;var[Bit,_4]=$v(hp,{}),Kj="SelectViewport",qde=N.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=If(Kj,n),o=_4(Kj,n),a=Gt(e,i.onViewportChange),l=N.useRef(0);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),f.jsx(AE.Slot,{scope:n,children:f.jsx(ct.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ie(s.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const m=window.innerHeight-Wa*2,g=parseFloat(d.style.minHeight),y=parseFloat(d.style.height),v=Math.max(g,y);if(v<m){const x=v+p,b=Math.min(m,x),S=x-b;d.style.height=b+"px",d.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});qde.displayName=Kj;var Kde="SelectGroup",[zit,Vit]=$v(Kde),Wit=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=to();return f.jsx(zit,{scope:n,id:s,children:f.jsx(ct.div,{role:"group","aria-labelledby":s,...r,ref:e})})});Wit.displayName=Kde;var Xde="SelectLabel",Yde=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Vit(Xde,n);return f.jsx(ct.div,{id:s.id,...r,ref:e})});Yde.displayName=Xde;var Z_="SelectItem",[Uit,Qde]=$v(Z_),Zde=N.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=Af(Z_,n),l=If(Z_,n),c=a.value===r,[u,d]=N.useState(i??""),[h,p]=N.useState(!1),m=Gt(e,x=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,x,r,s)}),g=to(),y=N.useRef("touch"),v=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return f.jsx(Uit,{scope:n,value:r,disabled:s,textId:g,isSelected:c,onItemTextChange:N.useCallback(x=>{d(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:f.jsx(AE.ItemSlot,{scope:n,value:r,disabled:s,textValue:u,children:f.jsx(ct.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:m,onFocus:Ie(o.onFocus,()=>p(!0)),onBlur:Ie(o.onBlur,()=>p(!1)),onClick:Ie(o.onClick,()=>{y.current!=="mouse"&&v()}),onPointerUp:Ie(o.onPointerUp,()=>{y.current==="mouse"&&v()}),onPointerDown:Ie(o.onPointerDown,x=>{y.current=x.pointerType}),onPointerMove:Ie(o.onPointerMove,x=>{var b;y.current=x.pointerType,s?(b=l.onItemLeave)==null||b.call(l):y.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ie(o.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:Ie(o.onKeyDown,x=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&x.key===" "||(Ait.includes(x.key)&&v(),x.key===" "&&x.preventDefault())})})})})});Zde.displayName=Z_;var Hx="SelectItemText",Jde=N.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Af(Hx,n),a=If(Hx,n),l=Qde(Hx,n),c=Rit(Hx,n),[u,d]=N.useState(null),h=Gt(e,v=>d(v),l.onItemTextChange,v=>{var x;return(x=a.itemTextRefCallback)==null?void 0:x.call(a,v,l.value,l.disabled)}),p=u==null?void 0:u.textContent,m=N.useMemo(()=>f.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=c;return Rs(()=>(g(m),()=>y(m)),[g,y,m]),f.jsxs(f.Fragment,{children:[f.jsx(ct.span,{id:l.textId,...i,ref:h}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Op.createPortal(i.children,o.valueNode):null]})});Jde.displayName=Hx;var efe="SelectItemIndicator",tfe=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return Qde(efe,n).isSelected?f.jsx(ct.span,{"aria-hidden":!0,...r,ref:e}):null});tfe.displayName=efe;var Xj="SelectScrollUpButton",nfe=N.forwardRef((t,e)=>{const n=If(Xj,t.__scopeSelect),r=_4(Xj,t.__scopeSelect),[s,i]=N.useState(!1),o=Gt(e,r.onScrollButtonChange);return Rs(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;i(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?f.jsx(sfe,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});nfe.displayName=Xj;var Yj="SelectScrollDownButton",rfe=N.forwardRef((t,e)=>{const n=If(Yj,t.__scopeSelect),r=_4(Yj,t.__scopeSelect),[s,i]=N.useState(!1),o=Gt(e,r.onScrollButtonChange);return Rs(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;i(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?f.jsx(sfe,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});rfe.displayName=Yj;var sfe=N.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=If("SelectScrollButton",n),o=N.useRef(null),a=IE(n),l=N.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return N.useEffect(()=>()=>l(),[l]),Rs(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),f.jsx(ct.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ie(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ie(s.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ie(s.onPointerLeave,()=>{l()})})}),Git="SelectSeparator",ife=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return f.jsx(ct.div,{"aria-hidden":!0,...r,ref:e})});ife.displayName=Git;var Qj="SelectArrow",Hit=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=OE(n),i=Af(Qj,n),o=If(Qj,n);return i.open&&o.position==="popper"?f.jsx(Ik,{...s,...r,ref:e}):null});Hit.displayName=Qj;function ofe(t){return t===""||t===void 0}var afe=N.forwardRef((t,e)=>{const{value:n,...r}=t,s=N.useRef(null),i=Gt(e,s),o=Eit(n);return N.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&u){const d=new Event("change",{bubbles:!0});u.call(a,n),a.dispatchEvent(d)}},[o,n]),f.jsx(P1,{asChild:!0,children:f.jsx("select",{...r,ref:i,defaultValue:n})})});afe.displayName="BubbleSelect";function lfe(t){const e=ci(t),n=N.useRef(""),r=N.useRef(0),s=N.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=N.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function cfe(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=qit(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function qit(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Kit=jde,ufe=Fde,Xit=Bde,Yit=zde,Qit=Vde,dfe=Wde,Zit=qde,ffe=Yde,hfe=Zde,Jit=Jde,eot=tfe,pfe=nfe,mfe=rfe,gfe=ife;const sr=Kit,ir=Xit,Yn=N.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(ufe,{ref:r,className:pe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,f.jsx(Yit,{asChild:!0,children:f.jsx(Y0,{className:"h-4 w-4 opacity-50"})})]}));Yn.displayName=ufe.displayName;const yfe=N.forwardRef(({className:t,...e},n)=>f.jsx(pfe,{ref:n,className:pe("flex cursor-default items-center justify-center py-1",t),...e,children:f.jsx(ITe,{className:"h-4 w-4"})}));yfe.displayName=pfe.displayName;const vfe=N.forwardRef(({className:t,...e},n)=>f.jsx(mfe,{ref:n,className:pe("flex cursor-default items-center justify-center py-1",t),...e,children:f.jsx(Y0,{className:"h-4 w-4"})}));vfe.displayName=mfe.displayName;const Qn=N.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>f.jsx(Qit,{children:f.jsxs(dfe,{ref:s,className:pe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[f.jsx(yfe,{}),f.jsx(Zit,{className:pe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),f.jsx(vfe,{})]})}));Qn.displayName=dfe.displayName;const tot=N.forwardRef(({className:t,...e},n)=>f.jsx(ffe,{ref:n,className:pe("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));tot.displayName=ffe.displayName;const Je=N.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(hfe,{ref:r,className:pe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(eot,{children:f.jsx(Vd,{className:"h-4 w-4"})})}),f.jsx(Jit,{children:e})]}));Je.displayName=hfe.displayName;const not=N.forwardRef(({className:t,...e},n)=>f.jsx(gfe,{ref:n,className:pe("-mx-1 my-1 h-px bg-muted",t),...e}));not.displayName=gfe.displayName;const T4={default:{primary:"hsl(var(--primary))",secondary:"#82ca9d",tertiary:"#ffc658",background:"hsl(var(--background))"},warm:{primary:"#ff7300",secondary:"#ff9800",tertiary:"#ffc107",background:"#fff5e6"},cool:{primary:"#00bcd4",secondary:"#03a9f4",tertiary:"#2196f3",background:"#e1f5fe"}};function rot(){const[t,e]=N.useState("default"),[n,r]=N.useState(3e4),[s,i]=N.useState("area"),{data:o=[]}=qt({queryKey:["/api/sales"],refetchInterval:n}),a=N.useMemo(()=>{var p,m;const u=o.reduce((g,y)=>{const v=new Date(y.date).toLocaleDateString("ar-IQ"),x=g.find(b=>b.date===v);return x?(x.amount+=Number(y.priceIqd)*y.quantity,x.count+=1,x.avgOrder=x.amount/x.count):g.push({date:v,amount:Number(y.priceIqd)*y.quantity,count:1,avgOrder:Number(y.priceIqd)*y.quantity}),g},[]).sort((g,y)=>new Date(g.date).getTime()-new Date(y.date).getTime()),d=((p=u[u.length-1])==null?void 0:p.amount)||0,h=.05;for(let g=1;g<=7;g++){const y=new Date((m=u[u.length-1])==null?void 0:m.date);y.setDate(y.getDate()+1),u.push({date:y.toLocaleDateString("ar-IQ"),predictedAmount:d*(1+h*g),isPrediction:!0})}return u},[o]),l=T4[t],c=()=>{switch(s){case"line":return f.jsxs($E,{data:a,children:[f.jsx(si,{strokeDasharray:"3 3"}),f.jsx(_r,{dataKey:"date"}),f.jsx(ar,{}),f.jsx(Tn,{formatter:u=>`${u.toLocaleString()} د.ع`,labelFormatter:u=>`التاريخ: ${u}`}),f.jsx(os,{}),f.jsx(ii,{type:"monotone",dataKey:"amount",name:"المبيعات",stroke:l.primary,strokeWidth:2,dot:{r:4},activeDot:{r:8}}),f.jsx(ii,{type:"monotone",dataKey:"predictedAmount",name:"التنبؤات",stroke:l.tertiary,strokeDasharray:"5 5",dot:{r:4}}),f.jsx(lf,{dataKey:"date",height:30,stroke:l.primary})]});case"composed":return f.jsxs(Q_,{data:a,children:[f.jsx(si,{strokeDasharray:"3 3"}),f.jsx(_r,{dataKey:"date"}),f.jsx(ar,{}),f.jsx(Tn,{formatter:u=>`${u.toLocaleString()} د.ع`,labelFormatter:u=>`التاريخ: ${u}`}),f.jsx(os,{}),f.jsx(oi,{type:"monotone",dataKey:"amount",name:"المبيعات",fill:l.primary,fillOpacity:.3,stroke:l.primary}),f.jsx(ls,{dataKey:"count",name:"عدد الطلبات",fill:l.secondary,barSize:20}),f.jsx(ii,{type:"monotone",dataKey:"avgOrder",name:"متوسط الطلب",stroke:l.tertiary,strokeWidth:2}),f.jsx(Y1,{dataKey:"predictedAmount",name:"التنبؤات",fill:l.tertiary})]});default:return f.jsxs(N4,{data:a,children:[f.jsx("defs",{children:f.jsxs("linearGradient",{id:"colorAmount",x1:"0",y1:"0",x2:"0",y2:"1",children:[f.jsx("stop",{offset:"5%",stopColor:l.primary,stopOpacity:.8}),f.jsx("stop",{offset:"95%",stopColor:l.primary,stopOpacity:0})]})}),f.jsx(si,{strokeDasharray:"3 3"}),f.jsx(_r,{dataKey:"date"}),f.jsx(ar,{}),f.jsx(Tn,{formatter:u=>`${u.toLocaleString()} د.ع`,labelFormatter:u=>`التاريخ: ${u}`}),f.jsx(os,{}),f.jsx(oi,{type:"monotone",dataKey:"amount",name:"المبيعات",stroke:l.primary,fillOpacity:1,fill:"url(#colorAmount)"}),f.jsx(oi,{type:"monotone",dataKey:"predictedAmount",name:"التنبؤات",stroke:l.tertiary,strokeDasharray:"5 5",fill:l.tertiary,fillOpacity:.1})]})}};return f.jsxs(Le,{children:[f.jsx(Ye,{children:f.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[f.jsxs("div",{children:[f.jsx(Qe,{children:"اتجاهات المبيعات"}),f.jsx(Kt,{children:"تحليل المبيعات اليومية والتنبؤات المستقبلية"})]}),f.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[f.jsxs(sr,{value:t,onValueChange:u=>e(u),children:[f.jsx(Yn,{className:"w-[150px]",children:f.jsx(ir,{placeholder:"نمط الألوان"})}),f.jsxs(Qn,{children:[f.jsx(Je,{value:"default",children:"الافتراضي"}),f.jsx(Je,{value:"warm",children:"دافئ"}),f.jsx(Je,{value:"cool",children:"بارد"})]})]}),f.jsxs(sr,{value:n.toString(),onValueChange:u=>r(Number(u)),children:[f.jsx(Yn,{className:"w-[150px]",children:f.jsx(ir,{placeholder:"فترة التحديث"})}),f.jsxs(Qn,{children:[f.jsx(Je,{value:"5000",children:"كل 5 ثواني"}),f.jsx(Je,{value:"30000",children:"كل 30 ثانية"}),f.jsx(Je,{value:"60000",children:"كل دقيقة"})]})]}),f.jsx(Dc,{value:s,onValueChange:u=>i(u),children:f.jsxs(Al,{children:[f.jsx(Ln,{value:"area",children:"مساحي"}),f.jsx(Ln,{value:"line",children:"خطي"}),f.jsx(Ln,{value:"composed",children:"مركب"})]})})]})]})}),f.jsx(Ue,{children:f.jsx("div",{className:"h-[400px] w-full",children:f.jsx(ro,{width:"100%",height:"100%",children:c()})})})]})}function sot(){const[t,e]=N.useState("default"),[n,r]=N.useState(3e4),{data:s=[]}=qt({queryKey:["/api/products"],refetchInterval:n}),{data:i=[]}=qt({queryKey:["/api/sales"]}),o=N.useMemo(()=>s.map(l=>{const c=i.filter(h=>h.productId===l.id),u=c.reduce((h,p)=>h+p.quantity,0),d=c.reduce((h,p)=>h+Number(p.priceIqd)*p.quantity,0);return{name:l.name,quantity:u,revenue:d,stock:l.stock}}).sort((l,c)=>c.revenue-l.revenue).slice(0,5),[s,i]),a=T4[t];return f.jsxs(Le,{children:[f.jsx(Ye,{children:f.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[f.jsx(Qe,{children:"أداء المنتجات"}),f.jsx(Kt,{children:"أفضل 5 منتجات من حيث المبيعات"}),f.jsxs(sr,{value:t,onValueChange:l=>e(l),children:[f.jsx(Yn,{className:"w-[150px]",children:f.jsx(ir,{placeholder:"نمط الألوان"})}),f.jsxs(Qn,{children:[f.jsx(Je,{value:"default",children:"الافتراضي"}),f.jsx(Je,{value:"warm",children:"دافئ"}),f.jsx(Je,{value:"cool",children:"بارد"})]})]}),f.jsxs(sr,{value:n.toString(),onValueChange:l=>r(Number(l)),children:[f.jsx(Yn,{className:"w-[150px]",children:f.jsx(ir,{placeholder:"فترة التحديث"})}),f.jsxs(Qn,{children:[f.jsx(Je,{value:"5000",children:"كل 5 ثواني"}),f.jsx(Je,{value:"30000",children:"كل 30 ثانية"}),f.jsx(Je,{value:"60000",children:"كل دقيقة"})]})]})]})}),f.jsx(Ue,{children:f.jsx("div",{className:"h-[300px]",children:f.jsx(ro,{width:"100%",height:"100%",children:f.jsxs(Q1,{data:o,children:[f.jsx(si,{strokeDasharray:"3 3"}),f.jsx(_r,{dataKey:"name"}),f.jsx(ar,{yAxisId:"left",orientation:"left",stroke:a.primary}),f.jsx(ar,{yAxisId:"right",orientation:"right",stroke:a.secondary}),f.jsx(Tn,{}),f.jsx(os,{}),f.jsx(ls,{yAxisId:"left",dataKey:"revenue",name:"الإيرادات",fill:a.primary}),f.jsx(ls,{yAxisId:"right",dataKey:"quantity",name:"الكمية المباعة",fill:a.secondary})]})})})})]})}function iot(){const[t,e]=N.useState("default"),[n,r]=N.useState(3e4),[s,i]=N.useState("growth"),{data:o=[]}=qt({queryKey:["/api/customers"],refetchInterval:n}),{data:a=[]}=qt({queryKey:["/api/sales"]}),l=N.useMemo(()=>{var v,x;const d=o.reduce((b,S)=>{const w=new Date(S.createdAt).toLocaleDateString("ar-IQ"),C=b.find(_=>_.date===w);return C?(C.total+=1,C.active=(C.active||0)+1):b.push({date:w,total:b.length>0?b[b.length-1].total+1:1,active:1}),b},[]).sort((b,S)=>new Date(b.date).getTime()-new Date(S.date).getTime()),h=((v=d[d.length-1])==null?void 0:v.total)||0,p=.15;for(let b=1;b<=7;b++){const S=new Date((x=d[d.length-1])==null?void 0:x.date);S.setDate(S.getDate()+1),d.push({date:S.toLocaleDateString("ar-IQ"),predicted:Math.round(h*(1+p*b)),isPrediction:!0})}const m=[{name:"عملاء جدد",value:o.filter(b=>new Date(b.createdAt)>new Date(Date.now()-30*24*60*60*1e3)).length},{name:"عملاء نشطون",value:o.filter(b=>a.some(S=>S.customerId===b.id)).length},{name:"عملاء متكررون",value:o.filter(b=>a.filter(S=>S.customerId===b.id).length>1).length},{name:"عملاء مميزون",value:o.filter(b=>a.filter(S=>S.customerId===b.id).reduce((S,w)=>S+Number(w.priceIqd)*w.quantity,0)>1e6).length}],g=o.reduce((b,S)=>{const w=new Date(S.createdAt).toLocaleDateString("ar-IQ",{month:"long",year:"numeric"}),C=b.find(_=>_.month===w);return C?(C.total+=1,C.retained=(C.retained||0)+(a.some(_=>_.customerId===S.id)?1:0)):b.push({month:w,total:1,retained:a.some(_=>_.customerId===S.id)?1:0}),b},[]),y=o.map(b=>{const S=a.filter(T=>T.customerId===b.id),w=S.reduce((T,k)=>T+Number(k.priceIqd)*k.quantity,0),C=S.length,_=S.length>0?new Date(Math.max(...S.map(T=>new Date(T.date).getTime()))):new Date(b.createdAt);return{id:b.id,name:b.name,value:w,frequency:C,recency:Math.round((Date.now()-_.getTime())/(24*60*60*1e3))}}).sort((b,S)=>S.value-b.value);return{growthData:d,segments:m,retentionData:g,customerValue:y}},[o,a]),c=T4[t],u=()=>{switch(s){case"segments":return f.jsxs(Dde,{children:[f.jsx(Lc,{data:l.segments,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:120,label:({name:d,value:h})=>`${d}: ${h}`,children:l.segments.map((d,h)=>f.jsx(xv,{fill:[c.primary,c.secondary,c.tertiary,c.accent][h%4]},`cell-${h}`))}),f.jsx(Tn,{}),f.jsx(os,{})]});case"retention":return f.jsxs(Q_,{data:l.retentionData,children:[f.jsx(si,{strokeDasharray:"3 3"}),f.jsx(_r,{dataKey:"month"}),f.jsx(ar,{}),f.jsx(Tn,{}),f.jsx(os,{}),f.jsx(ls,{dataKey:"total",name:"إجمالي العملاء",fill:c.primary}),f.jsx(ls,{dataKey:"retained",name:"العملاء المحتفظ بهم",fill:c.secondary}),f.jsx(ii,{type:"monotone",dataKey:"retained",name:"معدل الاحتفاظ",stroke:c.tertiary,strokeWidth:2,dot:{r:4}})]});case"value":return f.jsxs(kit,{outerRadius:120,data:l.customerValue.slice(0,5),children:[f.jsx(Tue,{}),f.jsx(Tv,{dataKey:"name"}),f.jsx(_v,{angle:30,domain:[0,"auto"]}),f.jsx(py,{name:"قيمة العميل",dataKey:"value",stroke:c.primary,fill:c.primary,fillOpacity:.6}),f.jsx(py,{name:"تكرار الشراء",dataKey:"frequency",stroke:c.secondary,fill:c.secondary,fillOpacity:.6}),f.jsx(os,{}),f.jsx(Tn,{})]});default:return f.jsxs(Q_,{data:l.growthData,children:[f.jsx(si,{strokeDasharray:"3 3"}),f.jsx(_r,{dataKey:"date"}),f.jsx(ar,{}),f.jsx(Tn,{}),f.jsx(os,{}),f.jsx(oi,{type:"monotone",dataKey:"total",name:"إجمالي العملاء",stroke:c.primary,fill:c.primary,fillOpacity:.3}),f.jsx(ls,{dataKey:"active",name:"العملاء النشطون",fill:c.secondary,barSize:20}),f.jsx(ii,{type:"monotone",dataKey:"predicted",name:"التنبؤات المستقبلية",stroke:c.tertiary,strokeDasharray:"5 5",dot:{r:4}}),f.jsx(lf,{dataKey:"date",height:30,stroke:c.primary})]})}};return f.jsxs(Le,{children:[f.jsx(Ye,{children:f.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[f.jsxs("div",{children:[f.jsx(Qe,{children:"تحليل نمو العملاء"}),f.jsx(Kt,{children:"تحليلات متقدمة لنمو وسلوك العملاء"})]}),f.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[f.jsxs(sr,{value:t,onValueChange:d=>e(d),children:[f.jsx(Yn,{className:"w-[150px]",children:f.jsx(ir,{placeholder:"نمط الألوان"})}),f.jsxs(Qn,{children:[f.jsx(Je,{value:"default",children:"الافتراضي"}),f.jsx(Je,{value:"warm",children:"دافئ"}),f.jsx(Je,{value:"cool",children:"بارد"})]})]}),f.jsxs(sr,{value:n.toString(),onValueChange:d=>r(Number(d)),children:[f.jsx(Yn,{className:"w-[150px]",children:f.jsx(ir,{placeholder:"فترة التحديث"})}),f.jsxs(Qn,{children:[f.jsx(Je,{value:"5000",children:"كل 5 ثواني"}),f.jsx(Je,{value:"30000",children:"كل 30 ثانية"}),f.jsx(Je,{value:"60000",children:"كل دقيقة"})]})]}),f.jsx(Dc,{value:s,onValueChange:d=>i(d),children:f.jsxs(Al,{children:[f.jsx(Ln,{value:"growth",children:"النمو"}),f.jsx(Ln,{value:"segments",children:"الشرائح"}),f.jsx(Ln,{value:"retention",children:"الاحتفاظ"}),f.jsx(Ln,{value:"value",children:"القيمة"})]})})]})]})}),f.jsx(Ue,{children:f.jsx("div",{className:"h-[400px] w-full",children:f.jsx(ro,{width:"100%",height:"100%",children:u()})})})]})}function oot(){const{toast:t}=cs(),[e,n]=N.useState(""),[r,s]=N.useState(!1),{data:i,refetch:o}=qt({queryKey:["/api/exchange-rate"],staleTime:0,refetchInterval:5e3});async function a(){if(!e){t({title:"خطأ",description:"الرجاء إدخال سعر الصرف الجديد",variant:"destructive"});return}const l=Number(e);if(isNaN(l)||l<=0){t({title:"خطأ",description:"الرجاء إدخال رقم صحيح وموجب",variant:"destructive"});return}s(!0);try{await wr("POST","/api/exchange-rate",{usdToIqd:l}),await o(),await Promise.all([ms.invalidateQueries({queryKey:["/api/exchange-rate"]}),ms.invalidateQueries({queryKey:["/api/products"]}),ms.invalidateQueries({queryKey:["/api/sales"]})]),n(""),t({title:"تم التحديث",description:"تم تحديث سعر الصرف بنجاح"})}catch{t({title:"خطأ",description:"فشل تحديث سعر الصرف. الرجاء المحاولة مرة أخرى",variant:"destructive"})}finally{s(!1)}}return f.jsxs(Le,{children:[f.jsxs(Ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[f.jsx(Qe,{className:"text-lg font-medium",children:"سعر صرف الدولار"}),f.jsx(Sre,{className:"h-4 w-4 text-muted-foreground"})]}),f.jsx(Ue,{children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"text-2xl font-bold",children:["1 دولار = ",i==null?void 0:i.usdToIqd," دينار عراقي"]}),f.jsxs("p",{className:"text-xs text-muted-foreground",children:["آخر تحديث: ",i?new Date(i.date).toLocaleString("ar-IQ"):"-"]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(Oe,{type:"number",placeholder:"أدخل السعر الجديد",value:e,onChange:l=>n(l.target.value)}),f.jsx($e,{onClick:a,disabled:r,children:r?"جاري التحديث...":"تحديث"})]})]})})]})}function aot(){return f.jsxs("div",{className:"flex h-screen",children:[f.jsx("div",{className:"w-64 h-full",children:f.jsx(kc,{})}),f.jsx("main",{className:"flex-1 p-8 overflow-auto",children:f.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[f.jsx("h1",{className:"text-3xl font-bold",children:"لوحة التحكم"}),f.jsx(Zje,{}),f.jsxs("div",{className:"grid gap-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[f.jsx(oot,{}),f.jsx("div",{className:"md:col-span-3",children:f.jsx(rot,{})})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsx(sot,{}),f.jsx(iot,{})]})]})]})})]})}const $a=N.forwardRef(({className:t,...e},n)=>f.jsx("div",{className:"relative w-full overflow-auto",children:f.jsx("table",{ref:n,className:pe("w-full caption-bottom text-sm",t),...e})}));$a.displayName="Table";const Aa=N.forwardRef(({className:t,...e},n)=>f.jsx("thead",{ref:n,className:pe("[&_tr]:border-b",t),...e}));Aa.displayName="TableHeader";const Ia=N.forwardRef(({className:t,...e},n)=>f.jsx("tbody",{ref:n,className:pe("[&_tr:last-child]:border-0",t),...e}));Ia.displayName="TableBody";const lot=N.forwardRef(({className:t,...e},n)=>f.jsx("tfoot",{ref:n,className:pe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));lot.displayName="TableFooter";const dn=N.forwardRef(({className:t,...e},n)=>f.jsx("tr",{ref:n,className:pe("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));dn.displayName="TableRow";const tt=N.forwardRef(({className:t,...e},n)=>f.jsx("th",{ref:n,className:pe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));tt.displayName="TableHead";const We=N.forwardRef(({className:t,...e},n)=>f.jsx("td",{ref:n,className:pe("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));We.displayName="TableCell";const cot=N.forwardRef(({className:t,...e},n)=>f.jsx("caption",{ref:n,className:pe("mt-4 text-sm text-muted-foreground",t),...e}));cot.displayName="TableCaption";var k4="Dialog",[xfe,bfe]=$l(k4),[uot,Ol]=xfe(k4),wfe=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=N.useRef(null),l=N.useRef(null),[c=!1,u]=ka({prop:r,defaultProp:s,onChange:i});return f.jsx(uot,{scope:e,triggerRef:a,contentRef:l,contentId:to(),titleId:to(),descriptionId:to(),open:c,onOpenChange:u,onOpenToggle:N.useCallback(()=>u(d=>!d),[u]),modal:o,children:n})};wfe.displayName=k4;var Sfe="DialogTrigger",Cfe=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ol(Sfe,n),i=Gt(e,s.triggerRef);return f.jsx(ct.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":A4(s.open),...r,ref:i,onClick:Ie(t.onClick,s.onOpenToggle)})});Cfe.displayName=Sfe;var E4="DialogPortal",[dot,Nfe]=xfe(E4,{forceMount:void 0}),_fe=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Ol(E4,e);return f.jsx(dot,{scope:e,forceMount:n,children:N.Children.map(r,o=>f.jsx(co,{present:n||i.open,children:f.jsx(ev,{asChild:!0,container:s,children:o})}))})};_fe.displayName=E4;var J_="DialogOverlay",Tfe=N.forwardRef((t,e)=>{const n=Nfe(J_,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Ol(J_,t.__scopeDialog);return i.modal?f.jsx(co,{present:r||i.open,children:f.jsx(fot,{...s,ref:e})}):null});Tfe.displayName=J_;var fot=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ol(J_,n);return f.jsx(z1,{as:Ii,allowPinchZoom:!0,shards:[s.contentRef],children:f.jsx(ct.div,{"data-state":A4(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),pp="DialogContent",kfe=N.forwardRef((t,e)=>{const n=Nfe(pp,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Ol(pp,t.__scopeDialog);return f.jsx(co,{present:r||i.open,children:i.modal?f.jsx(hot,{...s,ref:e}):f.jsx(pot,{...s,ref:e})})});kfe.displayName=pp;var hot=N.forwardRef((t,e)=>{const n=Ol(pp,t.__scopeDialog),r=N.useRef(null),s=Gt(e,n.contentRef,r);return N.useEffect(()=>{const i=r.current;if(i)return Ok(i)},[]),f.jsx(Efe,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ie(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ie(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Ie(t.onFocusOutside,i=>i.preventDefault())})}),pot=N.forwardRef((t,e)=>{const n=Ol(pp,t.__scopeDialog),r=N.useRef(!1),s=N.useRef(!1);return f.jsx(Efe,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),Efe=N.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=Ol(pp,n),l=N.useRef(null),c=Gt(e,l);return _k(),f.jsxs(f.Fragment,{children:[f.jsx(F1,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:f.jsx(Pp,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":A4(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),f.jsxs(f.Fragment,{children:[f.jsx(got,{titleId:a.titleId}),f.jsx(vot,{contentRef:l,descriptionId:a.descriptionId})]})]})}),$4="DialogTitle",$fe=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ol($4,n);return f.jsx(ct.h2,{id:s.titleId,...r,ref:e})});$fe.displayName=$4;var Afe="DialogDescription",Ife=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ol(Afe,n);return f.jsx(ct.p,{id:s.descriptionId,...r,ref:e})});Ife.displayName=Afe;var Ofe="DialogClose",Pfe=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ol(Ofe,n);return f.jsx(ct.button,{type:"button",...r,ref:e,onClick:Ie(t.onClick,()=>s.onOpenChange(!1))})});Pfe.displayName=Ofe;function A4(t){return t?"open":"closed"}var Rfe="DialogTitleWarning",[mot,Dfe]=L_e(Rfe,{contentName:pp,titleName:$4,docsSlug:"dialog"}),got=({titleId:t})=>{const e=Dfe(Rfe),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return N.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},yot="DialogDescriptionWarning",vot=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Dfe(yot).contentName}}.`;return N.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},I4=wfe,O4=Cfe,P4=_fe,J1=Tfe,ew=kfe,tw=$fe,nw=Ife,PE=Pfe;const hl=I4,zp=O4,xot=P4,jfe=N.forwardRef(({className:t,...e},n)=>f.jsx(J1,{ref:n,className:pe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));jfe.displayName=J1.displayName;const wa=N.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(xot,{children:[f.jsx(jfe,{}),f.jsxs(ew,{ref:r,className:pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,f.jsxs(PE,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[f.jsx(gk,{className:"h-4 w-4"}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));wa.displayName=ew.displayName;const Sa=({className:t,...e})=>f.jsx("div",{className:pe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Sa.displayName="DialogHeader";const eT=({className:t,...e})=>f.jsx("div",{className:pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});eT.displayName="DialogFooter";const Ca=N.forwardRef(({className:t,...e},n)=>f.jsx(tw,{ref:n,className:pe("text-lg font-semibold leading-none tracking-tight",t),...e}));Ca.displayName=tw.displayName;const mg=N.forwardRef(({className:t,...e},n)=>f.jsx(nw,{ref:n,className:pe("text-sm text-muted-foreground",t),...e}));mg.displayName=nw.displayName;function bot(){const[t,e]=N.useState(""),[n,r]=N.useState(!1),{toast:s}=cs(),{data:i=[]}=qt({queryKey:["/api/products"]}),{data:o}=qt({queryKey:["/api/exchange-rate"],staleTime:0,refetchInterval:5e3}),a=bl({resolver:bc(EAe),defaultValues:{name:"",description:"",priceIqd:"",stock:0,productCode:"",barcode:"",expiryDate:null}}),l=Vr({mutationFn:async g=>{const y=await wr("DELETE",`/api/products/${g}`);if(!y.ok)throw new Error("فشل في حذف المنتج");return y.json()},onSuccess:()=>{ms.invalidateQueries({queryKey:["/api/products"]}),s({title:"تم الحذف بنجاح",description:"تم حذف المنتج بنجاح"})},onError:g=>{console.error("خطأ في حذف المنتج:",g),s({title:"خطأ",description:"فشل في حذف المنتج. الرجاء المحاولة مرة أخرى",variant:"destructive"})}}),c=Vr({mutationFn:async g=>{const y=await wr("PATCH",`/api/products/${g.id}`,g.updates);if(!y.ok){const v=await y.json().catch(()=>({}));throw new Error(v.message||"فشل في تحديث المنتج")}return y.json()},onSuccess:()=>{ms.invalidateQueries({queryKey:["/api/products"]}),s({title:"تم التحديث",description:"تم تحديث المخزون بنجاح"})},onError:g=>{console.error("خطأ في تحديث المخزون:",g),s({title:"خطأ",description:g instanceof Error?g.message:"فشل في تحديث المخزون. الرجاء المحاولة مرة أخرى",variant:"destructive"})}}),u=async g=>{const y=window.prompt(`أدخل الكمية الجديدة للمخزون (الكمية الحالية: ${g.stock}):`,g.stock.toString());if(y===null)return;const v=Number(y);if(isNaN(v)){s({title:"خطأ",description:"الرجاء إدخال رقم صحيح",variant:"destructive"});return}if(v<0){s({title:"خطأ",description:"لا يمكن أن تكون الكمية سالبة",variant:"destructive"});return}if(window.confirm(`هل أنت متأكد من تحديث المخزون من ${g.stock} إلى ${v}؟`))try{await c.mutateAsync({id:g.id,updates:{stock:v}})}catch{}},d=a.watch("priceIqd"),h=o&&d?Number(d)/Number(o.usdToIqd):0,p=i.filter(g=>g.name.toLowerCase().includes(t.toLowerCase()));async function m(g){try{await wr("POST","/api/products",{name:g.name,description:g.description||"",priceIqd:g.priceIqd.toString(),stock:Number(g.stock),productCode:g.productCode,barcode:g.barcode||null,expiryDate:g.expiryDate}),ms.invalidateQueries({queryKey:["/api/products"]}),r(!1),a.reset(),s({title:"تم بنجاح",description:"تم إضافة المنتج بنجاح"})}catch{s({title:"خطأ",description:"فشل في إضافة المنتج. الرجاء المحاولة مرة أخرى",variant:"destructive"})}}return f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(mk,{className:"h-6 w-6"}),f.jsx("h2",{className:"text-2xl font-bold",children:"المخزون"})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(Oe,{placeholder:"بحث عن المنتجات...",value:t,onChange:g=>e(g.target.value),className:"w-64"}),f.jsxs(hl,{open:n,onOpenChange:r,children:[f.jsx(zp,{asChild:!0,children:f.jsxs($e,{children:[f.jsx(xl,{className:"h-4 w-4 ml-2"}),"إضافة منتج"]})}),f.jsxs(wa,{children:[f.jsx(Sa,{children:f.jsx(Ca,{children:"إضافة منتج جديد"})}),f.jsx(Cc,{...a,children:f.jsxs("form",{onSubmit:a.handleSubmit(m),className:"space-y-4",children:[f.jsx(It,{control:a.control,name:"name",render:({field:g})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"اسم المنتج"}),f.jsx(Ot,{children:f.jsx(Oe,{...g})}),f.jsx($t,{})]})}),f.jsx(It,{control:a.control,name:"productCode",render:({field:g})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"رمز المنتج"}),f.jsx(Ot,{children:f.jsx(Oe,{...g})}),f.jsx($t,{})]})}),f.jsx(It,{control:a.control,name:"barcode",render:({field:g})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"الباركود"}),f.jsx(Ot,{children:f.jsx(Oe,{...g})}),f.jsx($t,{})]})}),f.jsx(It,{control:a.control,name:"description",render:({field:g})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"الوصف"}),f.jsx(Ot,{children:f.jsx(Oe,{...g})}),f.jsx($t,{})]})}),f.jsx(It,{control:a.control,name:"priceIqd",render:({field:g})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"السعر بالدينار العراقي"}),f.jsx(Ot,{children:f.jsx(Oe,{type:"text",...g,onChange:y=>{const v=y.target.value.replace(/[^0-9]/g,"");g.onChange(v)}})}),f.jsxs("div",{className:"text-sm text-muted-foreground",children:["ما يعادل: $",h.toFixed(2)," دولار"]}),f.jsx($t,{})]})}),f.jsx(It,{control:a.control,name:"stock",render:({field:g})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"المخزون"}),f.jsx(Ot,{children:f.jsx(Oe,{type:"number",min:"0",...g,onChange:y=>g.onChange(Number(y.target.value))})}),f.jsx($t,{})]})}),f.jsx(It,{control:a.control,name:"expiryDate",render:({field:g})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"تاريخ الانتهاء"}),f.jsx(Ot,{children:f.jsx(Oe,{type:"date",value:g.value?new Date(g.value).toISOString().split("T")[0]:"",onChange:y=>g.onChange(y.target.value?new Date(y.target.value):void 0)})}),f.jsx($t,{})]})}),f.jsx($e,{type:"submit",className:"w-full",children:"إضافة المنتج"})]})})]})]})]})]}),f.jsx("div",{className:"border rounded-md",children:f.jsxs($a,{children:[f.jsx(Aa,{children:f.jsxs(dn,{children:[f.jsx(tt,{children:"اسم المنتج"}),f.jsx(tt,{children:"رمز المنتج"}),f.jsx(tt,{children:"الباركود"}),f.jsx(tt,{children:"الوصف"}),f.jsx(tt,{children:"السعر"}),f.jsx(tt,{children:"المخزون"}),f.jsx(tt,{children:"تاريخ انتهاء الصلاحية"}),f.jsx(tt,{children:"الإجراءات"})]})}),f.jsx(Ia,{children:p.map(g=>{const y=o?Number(g.priceIqd)/Number(o.usdToIqd):0;return f.jsxs(dn,{children:[f.jsx(We,{children:g.name}),f.jsx(We,{children:g.productCode}),f.jsx(We,{children:g.barcode}),f.jsx(We,{children:g.description}),f.jsxs(We,{children:[Number(g.priceIqd).toLocaleString()," د.ع",f.jsx("br",{}),f.jsxs("span",{className:"text-sm text-muted-foreground",children:["$",y.toFixed(2)]})]}),f.jsx(We,{children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:g.stock<10?"text-red-500":"",children:g.stock}),f.jsxs($e,{variant:"outline",size:"sm",onClick:()=>u(g),children:[f.jsx(Nre,{className:"h-4 w-4 ml-2"}),"تعديل المخزون"]})]})}),f.jsx(We,{children:g.expiryDate?f.jsx("div",{children:new Date(g.expiryDate).toLocaleDateString("ar-IQ")}):f.jsx("div",{children:"-"})}),f.jsx(We,{children:f.jsxs($e,{variant:"destructive",size:"sm",onClick:()=>{confirm("هل أنت متأكد من حذف هذا المنتج؟")&&l.mutate(g.id)},children:[f.jsx(QTe,{className:"h-4 w-4 ml-2"}),"حذف"]})})]},g.id)})})]})})]})}function Mfe(){return f.jsxs("div",{className:"flex h-screen",children:[f.jsx("div",{className:"w-64 h-full",children:f.jsx(kc,{})}),f.jsx("main",{className:"flex-1 p-8 overflow-auto",children:f.jsx("div",{className:"max-w-7xl mx-auto",children:f.jsx(bot,{})})})]})}var Ffe="AlertDialog",[wot,F9t]=$l(Ffe,[bfe]),Gu=bfe(),Lfe=t=>{const{__scopeAlertDialog:e,...n}=t,r=Gu(e);return f.jsx(I4,{...r,...n,modal:!0})};Lfe.displayName=Ffe;var Sot="AlertDialogTrigger",Bfe=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Gu(n);return f.jsx(O4,{...s,...r,ref:e})});Bfe.displayName=Sot;var Cot="AlertDialogPortal",zfe=t=>{const{__scopeAlertDialog:e,...n}=t,r=Gu(e);return f.jsx(P4,{...r,...n})};zfe.displayName=Cot;var Not="AlertDialogOverlay",Vfe=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Gu(n);return f.jsx(J1,{...s,...r,ref:e})});Vfe.displayName=Not;var gg="AlertDialogContent",[_ot,Tot]=wot(gg),Wfe=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=Gu(n),o=N.useRef(null),a=Gt(e,o),l=N.useRef(null);return f.jsx(mot,{contentName:gg,titleName:Ufe,docsSlug:"alert-dialog",children:f.jsx(_ot,{scope:n,cancelRef:l,children:f.jsxs(ew,{role:"alertdialog",...i,...s,ref:a,onOpenAutoFocus:Ie(s.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[f.jsx($L,{children:r}),f.jsx(Eot,{contentRef:o})]})})})});Wfe.displayName=gg;var Ufe="AlertDialogTitle",Gfe=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Gu(n);return f.jsx(tw,{...s,...r,ref:e})});Gfe.displayName=Ufe;var Hfe="AlertDialogDescription",qfe=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Gu(n);return f.jsx(nw,{...s,...r,ref:e})});qfe.displayName=Hfe;var kot="AlertDialogAction",Kfe=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Gu(n);return f.jsx(PE,{...s,...r,ref:e})});Kfe.displayName=kot;var Xfe="AlertDialogCancel",Yfe=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=Tot(Xfe,n),i=Gu(n),o=Gt(e,s);return f.jsx(PE,{...i,...r,ref:o})});Yfe.displayName=Xfe;var Eot=({contentRef:t})=>{const e=`\`${gg}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${gg}\` by passing a \`${Hfe}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${gg}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return N.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},$ot=Lfe,Aot=Bfe,Iot=zfe,Qfe=Vfe,Zfe=Wfe,Jfe=Kfe,ehe=Yfe,the=Gfe,nhe=qfe;const R4=$ot,rhe=Aot,Oot=Iot,she=N.forwardRef(({className:t,...e},n)=>f.jsx(Qfe,{className:pe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));she.displayName=Qfe.displayName;const RE=N.forwardRef(({className:t,...e},n)=>f.jsxs(Oot,{children:[f.jsx(she,{}),f.jsx(Zfe,{ref:n,className:pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));RE.displayName=Zfe.displayName;const DE=({className:t,...e})=>f.jsx("div",{className:pe("flex flex-col space-y-2 text-center sm:text-left",t),...e});DE.displayName="AlertDialogHeader";const jE=({className:t,...e})=>f.jsx("div",{className:pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});jE.displayName="AlertDialogFooter";const ME=N.forwardRef(({className:t,...e},n)=>f.jsx(the,{ref:n,className:pe("text-lg font-semibold",t),...e}));ME.displayName=the.displayName;const FE=N.forwardRef(({className:t,...e},n)=>f.jsx(nhe,{ref:n,className:pe("text-sm text-muted-foreground",t),...e}));FE.displayName=nhe.displayName;const LE=N.forwardRef(({className:t,...e},n)=>f.jsx(Jfe,{ref:n,className:pe(ub(),t),...e}));LE.displayName=Jfe.displayName;const BE=N.forwardRef(({className:t,...e},n)=>f.jsx(ehe,{ref:n,className:pe(ub({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));BE.displayName=ehe.displayName;var ihe={exports:{}};(function(t,e){(function(n,r){t.exports=r(N)})(typeof self<"u"?self:da,function(n){return function(){var r={155:function(x){x.exports=n}},s={};function i(x){var b=s[x];if(b!==void 0)return b.exports;var S=s[x]={exports:{}};return r[x](S,S.exports,i),S.exports}i.d=function(x,b){for(var S in b)i.o(b,S)&&!i.o(x,S)&&Object.defineProperty(x,S,{enumerable:!0,get:b[S]})},i.o=function(x,b){return Object.prototype.hasOwnProperty.call(x,b)},i.r=function(x){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})};var o={};i.r(o),i.d(o,{useReactToPrint:function(){return v}});var a=i(155);function l({level:x="error",messages:b,suppressErrors:S=!1}){S||(x==="error"?console.error(b):x==="warning"?console.warn(b):console.debug(b))}function c(x,b){if(b||!x){const S=document.getElementById("printWindow");S&&document.body.removeChild(S)}}function u(x){return x instanceof Error?x:new Error("Unknown Error")}function d(x,b){const{documentTitle:S,onAfterPrint:w,onPrintError:C,preserveAfterPrint:_,print:T,suppressErrors:k}=b;setTimeout(()=>{var $,O;if(x.contentWindow){let D=function(){w==null||w(),c(_)};var P=D;if(x.contentWindow.focus(),T)T(x).then(D).catch(A=>{C?C("print",u(A)):l({messages:["An error was thrown by the specified `print` function"],suppressErrors:k})});else{if(x.contentWindow.print){const A=(O=($=x.contentDocument)===null||$===void 0?void 0:$.title)!==null&&O!==void 0?O:"",I=x.ownerDocument.title;S&&(x.ownerDocument.title=S,x.contentDocument&&(x.contentDocument.title=S)),x.contentWindow.print(),S&&(x.ownerDocument.title=I,x.contentDocument&&(x.contentDocument.title=A))}else l({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:k});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(A=>{var I,R;return((R=(I=navigator.userAgent)!==null&&I!==void 0?I:navigator.vendor)!==null&&R!==void 0?R:"opera"in window&&window.opera).match(A)})?setTimeout(D,500):D()}}else l({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:k})},500)}function h(x){const b=[],S=document.createTreeWalker(x,NodeFilter.SHOW_ELEMENT,null);let w=S.nextNode();for(;w;)b.push(w),w=S.nextNode();return b}function p(x,b,S){const w=h(x),C=h(b);if(w.length===C.length)for(let _=0;_<w.length;_++){const T=w[_],k=C[_],$=T.shadowRoot;if($!==null){const O=k.attachShadow({mode:$.mode});O.innerHTML=$.innerHTML,p($,O,S)}}else l({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",x,b],suppressErrors:S})}const m=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function g(x,b,S,w){var C,_,T,k,$;const{contentNode:O,clonedContentNode:P,clonedImgNodes:D,clonedVideoNodes:A,numResourcesToLoad:I,originalCanvasNodes:R}=S,{bodyClass:M,fonts:E,ignoreGlobalStyles:j,pageStyle:B,nonce:W,suppressErrors:G,copyShadowRoots:te}=w;x.onload=null;const ne=(C=x.contentDocument)!==null&&C!==void 0?C:(_=x.contentWindow)===null||_===void 0?void 0:_.document;if(ne){const ue=ne.body.appendChild(P);te&&p(O,ue,!!G),E&&(!((T=x.contentDocument)===null||T===void 0)&&T.fonts&&(!((k=x.contentWindow)===null||k===void 0)&&k.FontFace)?E.forEach(Y=>{const ye=new FontFace(Y.family,Y.source,{weight:Y.weight,style:Y.style});x.contentDocument.fonts.add(ye),ye.loaded.then(()=>{b(ye)}).catch(Ae=>{b(ye,["Failed loading the font:",ye,"Load error:",u(Ae)])})}):(E.forEach(Y=>{b(Y)}),l({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:G})));const ge=B??m,de=ne.createElement("style");W&&(de.setAttribute("nonce",W),ne.head.setAttribute("nonce",W)),de.appendChild(ne.createTextNode(ge)),ne.head.appendChild(de),M&&ne.body.classList.add(...M.split(" "));const we=ne.querySelectorAll("canvas");for(let Y=0;Y<R.length;++Y){const ye=R[Y],Ae=we[Y];if(Ae===void 0){l({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",ye],suppressErrors:G});continue}const Re=Ae.getContext("2d");Re&&Re.drawImage(ye,0,0)}for(let Y=0;Y<D.length;Y++){const ye=D[Y],Ae=ye.getAttribute("src");if(Ae){const Re=new Image;Re.onload=()=>{b(ye)},Re.onerror=(ze,rt,z,Q,ie)=>{b(ye,["Error loading <img>",ye,"Error",ie])},Re.src=Ae}else b(ye,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',ye])}for(let Y=0;Y<A.length;Y++){const ye=A[Y];ye.preload="auto";const Ae=ye.getAttribute("poster");if(Ae){const Re=new Image;Re.onload=()=>{b(ye)},Re.onerror=(ze,rt,z,Q,ie)=>{b(ye,["Error loading video poster",Ae,"for video",ye,"Error:",ie])},Re.src=Ae}else ye.readyState>=2?b(ye):ye.src?(ye.onloadeddata=()=>{b(ye)},ye.onerror=(Re,ze,rt,z,Q)=>{b(ye,["Error loading video",ye,"Error",Q])},ye.onstalled=()=>{b(ye,["Loading video stalled, skipping",ye])}):b(ye,["Error loading video, `src` is empty",ye])}const se="select",he=O.querySelectorAll(se),me=ne.querySelectorAll(se);for(let Y=0;Y<he.length;Y++)me[Y].value=he[Y].value;if(!j){const Y=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let ye=0,Ae=Y.length;ye<Ae;++ye){const Re=Y[ye];if(Re.tagName.toLowerCase()==="style"){const ze=ne.createElement(Re.tagName),rt=Re.sheet;if(rt){let z="";try{const Q=rt.cssRules.length;for(let ie=0;ie<Q;++ie)typeof rt.cssRules[ie].cssText=="string"&&(z+=`${rt.cssRules[ie].cssText}\r
`)}catch(Q){l({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",Re,`Original error: ${u(Q).message}`],level:"warning"})}ze.setAttribute("id",`react-to-print-${ye}`),W&&ze.setAttribute("nonce",W),ze.appendChild(ne.createTextNode(z)),ne.head.appendChild(ze)}}else if(Re.getAttribute("href"))if(Re.hasAttribute("disabled"))l({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",Re],level:"warning"}),b(Re);else{const ze=ne.createElement(Re.tagName);for(let rt=0,z=Re.attributes.length;rt<z;++rt){const Q=Re.attributes[rt];Q&&ze.setAttribute(Q.nodeName,($=Q.nodeValue)!==null&&$!==void 0?$:"")}ze.onload=()=>{b(ze)},ze.onerror=(rt,z,Q,ie,Ee)=>{b(ze,["Failed to load",ze,"Error:",Ee])},W&&ze.setAttribute("nonce",W),ne.head.appendChild(ze)}else l({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",Re],level:"warning"}),b(Re)}}}I===0&&d(x,w)}function y(x,b,S,w){x.onload=()=>{g(x,b,S,w)},document.body.appendChild(x)}function v(x){const{contentRef:b,fonts:S,ignoreGlobalStyles:w,onBeforePrint:C,onPrintError:_,preserveAfterPrint:T,suppressErrors:k}=x;return(0,a.useCallback)(O=>{c(T,!0);const P=function({contentRef:ne,optionalContent:ue,suppressErrors:ge}){return ue&&(ne&&l({level:"warning",messages:['"react-to-print" received a `contentRef` option and a optional-content param passed to its callback. The `contentRef` option will be ignored.']}),typeof ue=="function")?ue():ne?ne.current:void l({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:ge})}({contentRef:b,optionalContent:O,suppressErrors:k});if(!P)return void l({messages:["There is nothing to print"],suppressErrors:k});const D=P.cloneNode(!0),A=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),I=D.querySelectorAll("img"),R=D.querySelectorAll("video"),M=S?S.length:0,E=(w?0:A.length)+I.length+R.length+M,j=[],B=[],W=function(){const ne=document.createElement("iframe");return ne.width=`${document.documentElement.clientWidth}px`,ne.height=`${document.documentElement.clientHeight}px`,ne.style.position="absolute",ne.style.top=`-${document.documentElement.clientHeight+100}px`,ne.style.left=`-${document.documentElement.clientWidth+100}px`,ne.id="printWindow",ne.srcdoc="<!DOCTYPE html>",ne}(),G=(ne,ue)=>{j.includes(ne)?l({level:"debug",messages:["Tried to mark a resource that has already been handled",ne],suppressErrors:k}):(ue?(l({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...ue],suppressErrors:k}),B.push(ne)):j.push(ne),j.length+B.length===E&&d(W,x))},te={contentNode:P,clonedContentNode:D,clonedImgNodes:I,clonedVideoNodes:R,numResourcesToLoad:E,originalCanvasNodes:P.querySelectorAll("canvas")};C?C().then(()=>{y(W,G,te,x)}).catch(ne=>{_==null||_("onBeforePrint",u(ne))}):y(W,G,te,x)},[x])}return o}()})})(ihe);var zE=ihe.exports,Ct=function(){return Ct=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ct.apply(this,arguments)};function Pot(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function ohe(t,e,n){for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function rw(t){return t.mode==="multiple"}function sw(t){return t.mode==="range"}function VE(t){return t.mode==="single"}var Rot={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Dot(t,e){return un(t,"LLLL y",e)}function jot(t,e){return un(t,"d",e)}function Mot(t,e){return un(t,"LLLL",e)}function Fot(t){return"".concat(t)}function Lot(t,e){return un(t,"cccccc",e)}function Bot(t,e){return un(t,"yyyy",e)}var zot=Object.freeze({__proto__:null,formatCaption:Dot,formatDay:jot,formatMonthCaption:Mot,formatWeekNumber:Fot,formatWeekdayName:Lot,formatYearCaption:Bot}),Vot=function(t,e,n){return un(t,"do MMMM (EEEE)",n)},Wot=function(){return"Month: "},Uot=function(){return"Go to next month"},Got=function(){return"Go to previous month"},Hot=function(t,e){return un(t,"cccc",e)},qot=function(t){return"Week n. ".concat(t)},Kot=function(){return"Year: "},Xot=Object.freeze({__proto__:null,labelDay:Vot,labelMonthDropdown:Wot,labelNext:Uot,labelPrevious:Got,labelWeekNumber:qot,labelWeekday:Hot,labelYearDropdown:Kot});function Yot(){var t="buttons",e=Rot,n=y3,r={},s={},i=1,o={},a=new Date;return{captionLayout:t,classNames:e,formatters:zot,labels:Xot,locale:n,modifiersClassNames:r,modifiers:s,numberOfMonths:i,styles:o,today:a,mode:"default"}}function Qot(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,s=t.toMonth,i=t.fromDate,o=t.toDate;return r?i=no(r):e&&(i=new Date(e,0,1)),s?o=jk(s):n&&(o=new Date(n,11,31)),{fromDate:i?Yg(i):void 0,toDate:o?Yg(o):void 0}}var ahe=N.createContext(void 0);function Zot(t){var e,n=t.initialProps,r=Yot(),s=Qot(n),i=s.fromDate,o=s.toDate,a=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;a!=="buttons"&&(!i||!o)&&(a="buttons");var l;(VE(n)||rw(n)||sw(n))&&(l=n.onSelect);var c=Ct(Ct(Ct({},r),n),{captionLayout:a,classNames:Ct(Ct({},r.classNames),n.classNames),components:Ct({},n.components),formatters:Ct(Ct({},r.formatters),n.formatters),fromDate:i,labels:Ct(Ct({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Ct(Ct({},r.modifiers),n.modifiers),modifiersClassNames:Ct(Ct({},r.modifiersClassNames),n.modifiersClassNames),onSelect:l,styles:Ct(Ct({},r.styles),n.styles),toDate:o});return f.jsx(ahe.Provider,{value:c,children:t.children})}function Wn(){var t=N.useContext(ahe);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function lhe(t){var e=Wn(),n=e.locale,r=e.classNames,s=e.styles,i=e.formatters.formatCaption;return f.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:i(t.displayMonth,{locale:n})})}function Jot(t){return f.jsx("svg",Ct({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:f.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function che(t){var e,n,r=t.onChange,s=t.value,i=t.children,o=t.caption,a=t.className,l=t.style,c=Wn(),u=(n=(e=c.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:Jot;return f.jsxs("div",{className:a,style:l,children:[f.jsx("span",{className:c.classNames.vhidden,children:t["aria-label"]}),f.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:c.classNames.dropdown,style:c.styles.dropdown,value:s,onChange:r,children:i}),f.jsxs("div",{className:c.classNames.caption_label,style:c.styles.caption_label,"aria-hidden":"true",children:[o,f.jsx(u,{className:c.classNames.dropdown_icon,style:c.styles.dropdown_icon})]})]})}function eat(t){var e,n=Wn(),r=n.fromDate,s=n.toDate,i=n.styles,o=n.locale,a=n.formatters.formatMonthCaption,l=n.classNames,c=n.components,u=n.labels.labelMonthDropdown;if(!r)return f.jsx(f.Fragment,{});if(!s)return f.jsx(f.Fragment,{});var d=[];if(UDe(r,s))for(var h=no(r),p=r.getMonth();p<=s.getMonth();p++)d.push(nO(h,p));else for(var h=no(new Date),p=0;p<=11;p++)d.push(nO(h,p));var m=function(y){var v=Number(y.target.value),x=nO(no(t.displayMonth),v);t.onChange(x)},g=(e=c==null?void 0:c.Dropdown)!==null&&e!==void 0?e:che;return f.jsx(g,{name:"months","aria-label":u(),className:l.dropdown_month,style:i.dropdown_month,onChange:m,value:t.displayMonth.getMonth(),caption:a(t.displayMonth,{locale:o}),children:d.map(function(y){return f.jsx("option",{value:y.getMonth(),children:a(y,{locale:o})},y.getMonth())})})}function tat(t){var e,n=t.displayMonth,r=Wn(),s=r.fromDate,i=r.toDate,o=r.locale,a=r.styles,l=r.classNames,c=r.components,u=r.formatters.formatYearCaption,d=r.labels.labelYearDropdown,h=[];if(!s)return f.jsx(f.Fragment,{});if(!i)return f.jsx(f.Fragment,{});for(var p=s.getFullYear(),m=i.getFullYear(),g=p;g<=m;g++)h.push(i8(Eae(new Date),g));var y=function(x){var b=i8(no(n),Number(x.target.value));t.onChange(b)},v=(e=c==null?void 0:c.Dropdown)!==null&&e!==void 0?e:che;return f.jsx(v,{name:"years","aria-label":d(),className:l.dropdown_year,style:a.dropdown_year,onChange:y,value:n.getFullYear(),caption:u(n,{locale:o}),children:h.map(function(x){return f.jsx("option",{value:x.getFullYear(),children:u(x,{locale:o})},x.getFullYear())})})}function nat(t,e){var n=N.useState(t),r=n[0],s=n[1],i=e===void 0?r:e;return[i,s]}function rat(t){var e=t.month,n=t.defaultMonth,r=t.today,s=e||n||r||new Date,i=t.toDate,o=t.fromDate,a=t.numberOfMonths,l=a===void 0?1:a;if(i&&Zg(i,s)<0){var c=-1*(l-1);s=Nl(i,c)}return o&&Zg(s,o)<0&&(s=o),no(s)}function sat(){var t=Wn(),e=rat(t),n=nat(e,t.month),r=n[0],s=n[1],i=function(o){var a;if(!t.disableNavigation){var l=no(o);s(l),(a=t.onMonthChange)===null||a===void 0||a.call(t,l)}};return[r,i]}function iat(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,s=no(t),i=no(Nl(s,r)),o=Zg(i,s),a=[],l=0;l<o;l++){var c=Nl(s,l);a.push(c)}return n&&(a=a.reverse()),a}function oat(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,o=r?i:1,a=no(t);if(!n)return Nl(a,o);var l=Zg(n,t);if(!(l<i))return Nl(a,o)}}function aat(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,o=r?i:1,a=no(t);if(!n)return Nl(a,-o);var l=Zg(a,n);if(!(l<=0))return Nl(a,-o)}}var uhe=N.createContext(void 0);function lat(t){var e=Wn(),n=sat(),r=n[0],s=n[1],i=iat(r,e),o=oat(r,e),a=aat(r,e),l=function(d){return i.some(function(h){return v3(d,h)})},c=function(d,h){l(d)||(h&&Rae(d,h)?s(Nl(d,1+e.numberOfMonths*-1)):s(d))},u={currentMonth:r,displayMonths:i,goToMonth:s,goToDate:c,previousMonth:a,nextMonth:o,isDateDisplayed:l};return f.jsx(uhe.Provider,{value:u,children:t.children})}function iw(){var t=N.useContext(uhe);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function p7(t){var e,n=Wn(),r=n.classNames,s=n.styles,i=n.components,o=iw().goToMonth,a=function(u){o(Nl(u,t.displayIndex?-t.displayIndex:0))},l=(e=i==null?void 0:i.CaptionLabel)!==null&&e!==void 0?e:lhe,c=f.jsx(l,{id:t.id,displayMonth:t.displayMonth});return f.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[f.jsx("div",{className:r.vhidden,children:c}),f.jsx(eat,{onChange:a,displayMonth:t.displayMonth}),f.jsx(tat,{onChange:a,displayMonth:t.displayMonth})]})}function cat(t){return f.jsx("svg",Ct({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:f.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function uat(t){return f.jsx("svg",Ct({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:f.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var tT=N.forwardRef(function(t,e){var n=Wn(),r=n.classNames,s=n.styles,i=[r.button_reset,r.button];t.className&&i.push(t.className);var o=i.join(" "),a=Ct(Ct({},s.button_reset),s.button);return t.style&&Object.assign(a,t.style),f.jsx("button",Ct({},t,{ref:e,type:"button",className:o,style:a}))});function dat(t){var e,n,r=Wn(),s=r.dir,i=r.locale,o=r.classNames,a=r.styles,l=r.labels,c=l.labelPrevious,u=l.labelNext,d=r.components;if(!t.nextMonth&&!t.previousMonth)return f.jsx(f.Fragment,{});var h=c(t.previousMonth,{locale:i}),p=[o.nav_button,o.nav_button_previous].join(" "),m=u(t.nextMonth,{locale:i}),g=[o.nav_button,o.nav_button_next].join(" "),y=(e=d==null?void 0:d.IconRight)!==null&&e!==void 0?e:uat,v=(n=d==null?void 0:d.IconLeft)!==null&&n!==void 0?n:cat;return f.jsxs("div",{className:o.nav,style:a.nav,children:[!t.hidePrevious&&f.jsx(tT,{name:"previous-month","aria-label":h,className:p,style:a.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:s==="rtl"?f.jsx(y,{className:o.nav_icon,style:a.nav_icon}):f.jsx(v,{className:o.nav_icon,style:a.nav_icon})}),!t.hideNext&&f.jsx(tT,{name:"next-month","aria-label":m,className:g,style:a.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:s==="rtl"?f.jsx(v,{className:o.nav_icon,style:a.nav_icon}):f.jsx(y,{className:o.nav_icon,style:a.nav_icon})})]})}function m7(t){var e=Wn().numberOfMonths,n=iw(),r=n.previousMonth,s=n.nextMonth,i=n.goToMonth,o=n.displayMonths,a=o.findIndex(function(m){return v3(t.displayMonth,m)}),l=a===0,c=a===o.length-1,u=e>1&&(l||!c),d=e>1&&(c||!l),h=function(){r&&i(r)},p=function(){s&&i(s)};return f.jsx(dat,{displayMonth:t.displayMonth,hideNext:u,hidePrevious:d,nextMonth:s,previousMonth:r,onPreviousClick:h,onNextClick:p})}function fat(t){var e,n=Wn(),r=n.classNames,s=n.disableNavigation,i=n.styles,o=n.captionLayout,a=n.components,l=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:lhe,c;return s?c=f.jsx(l,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?c=f.jsx(p7,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?c=f.jsxs(f.Fragment,{children:[f.jsx(p7,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),f.jsx(m7,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):c=f.jsxs(f.Fragment,{children:[f.jsx(l,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),f.jsx(m7,{displayMonth:t.displayMonth,id:t.id})]}),f.jsx("div",{className:r.caption,style:i.caption,children:c})}function hat(t){var e=Wn(),n=e.footer,r=e.styles,s=e.classNames.tfoot;return n?f.jsx("tfoot",{className:s,style:r.tfoot,children:f.jsx("tr",{children:f.jsx("td",{colSpan:8,children:n})})}):f.jsx(f.Fragment,{})}function pat(t,e,n){for(var r=n?lp(new Date):Tc(new Date,{locale:t,weekStartsOn:e}),s=[],i=0;i<7;i++){var o=Xs(r,i);s.push(o)}return s}function mat(){var t=Wn(),e=t.classNames,n=t.styles,r=t.showWeekNumber,s=t.locale,i=t.weekStartsOn,o=t.ISOWeek,a=t.formatters.formatWeekdayName,l=t.labels.labelWeekday,c=pat(s,i,o);return f.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&f.jsx("td",{style:n.head_cell,className:e.head_cell}),c.map(function(u,d){return f.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":l(u,{locale:s}),children:a(u,{locale:s})},d)})]})}function gat(){var t,e=Wn(),n=e.classNames,r=e.styles,s=e.components,i=(t=s==null?void 0:s.HeadRow)!==null&&t!==void 0?t:mat;return f.jsx("thead",{style:r.head,className:n.head,children:f.jsx(i,{})})}function yat(t){var e=Wn(),n=e.locale,r=e.formatters.formatDay;return f.jsx(f.Fragment,{children:r(t.date,{locale:n})})}var D4=N.createContext(void 0);function vat(t){if(!rw(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return f.jsx(D4.Provider,{value:e,children:t.children})}return f.jsx(xat,{initialProps:t.initialProps,children:t.children})}function xat(t){var e=t.initialProps,n=t.children,r=e.selected,s=e.min,i=e.max,o=function(c,u,d){var h,p;(h=e.onDayClick)===null||h===void 0||h.call(e,c,u,d);var m=!!(u.selected&&s&&(r==null?void 0:r.length)===s);if(!m){var g=!!(!u.selected&&i&&(r==null?void 0:r.length)===i);if(!g){var y=r?ohe([],r):[];if(u.selected){var v=y.findIndex(function(x){return Ki(c,x)});y.splice(v,1)}else y.push(c);(p=e.onSelect)===null||p===void 0||p.call(e,y,c,u,d)}}},a={disabled:[]};r&&a.disabled.push(function(c){var u=i&&r.length>i-1,d=r.some(function(h){return Ki(h,c)});return!!(u&&!d)});var l={selected:r,onDayClick:o,modifiers:a};return f.jsx(D4.Provider,{value:l,children:n})}function j4(){var t=N.useContext(D4);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function bat(t,e){var n=e||{},r=n.from,s=n.to;return r&&s?Ki(s,t)&&Ki(r,t)?void 0:Ki(s,t)?{from:s,to:void 0}:Ki(r,t)?void 0:pD(r,t)?{from:t,to:s}:{from:r,to:t}:s?pD(t,s)?{from:s,to:t}:{from:t,to:s}:r?Rae(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var M4=N.createContext(void 0);function wat(t){if(!sw(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return f.jsx(M4.Provider,{value:e,children:t.children})}return f.jsx(Sat,{initialProps:t.initialProps,children:t.children})}function Sat(t){var e=t.initialProps,n=t.children,r=e.selected,s=r||{},i=s.from,o=s.to,a=e.min,l=e.max,c=function(p,m,g){var y,v;(y=e.onDayClick)===null||y===void 0||y.call(e,p,m,g);var x=bat(p,r);(v=e.onSelect)===null||v===void 0||v.call(e,x,p,m,g)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(u.range_start=[i],o?(u.range_end=[o],Ki(i,o)||(u.range_middle=[{after:i,before:o}])):u.range_end=[i]):o&&(u.range_start=[o],u.range_end=[o]),a&&(i&&!o&&u.disabled.push({after:tO(i,a-1),before:Xs(i,a-1)}),i&&o&&u.disabled.push({after:i,before:Xs(i,a-1)}),!i&&o&&u.disabled.push({after:tO(o,a-1),before:Xs(o,a-1)})),l){if(i&&!o&&(u.disabled.push({before:Xs(i,-l+1)}),u.disabled.push({after:Xs(i,l-1)})),i&&o){var d=tc(o,i)+1,h=l-d;u.disabled.push({before:tO(i,h)}),u.disabled.push({after:Xs(o,h)})}!i&&o&&(u.disabled.push({before:Xs(o,-l+1)}),u.disabled.push({after:Xs(o,l-1)}))}return f.jsx(M4.Provider,{value:{selected:r,onDayClick:c,modifiers:u},children:n})}function F4(){var t=N.useContext(M4);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function O2(t){return Array.isArray(t)?ohe([],t):t!==void 0?[t]:[]}function Cat(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],s=n[1];e[r]=O2(s)}),e}var _l;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(_l||(_l={}));var Nat=_l.Selected,Gc=_l.Disabled,_at=_l.Hidden,Tat=_l.Today,IO=_l.RangeEnd,OO=_l.RangeMiddle,PO=_l.RangeStart,kat=_l.Outside;function Eat(t,e,n){var r,s=(r={},r[Nat]=O2(t.selected),r[Gc]=O2(t.disabled),r[_at]=O2(t.hidden),r[Tat]=[t.today],r[IO]=[],r[OO]=[],r[PO]=[],r[kat]=[],r);return t.fromDate&&s[Gc].push({before:t.fromDate}),t.toDate&&s[Gc].push({after:t.toDate}),rw(t)?s[Gc]=s[Gc].concat(e.modifiers[Gc]):sw(t)&&(s[Gc]=s[Gc].concat(n.modifiers[Gc]),s[PO]=n.modifiers[PO],s[OO]=n.modifiers[OO],s[IO]=n.modifiers[IO]),s}var dhe=N.createContext(void 0);function $at(t){var e=Wn(),n=j4(),r=F4(),s=Eat(e,n,r),i=Cat(e.modifiers),o=Ct(Ct({},s),i);return f.jsx(dhe.Provider,{value:o,children:t.children})}function fhe(){var t=N.useContext(dhe);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function Aat(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function Iat(t){return!!(t&&typeof t=="object"&&"from"in t)}function Oat(t){return!!(t&&typeof t=="object"&&"after"in t)}function Pat(t){return!!(t&&typeof t=="object"&&"before"in t)}function Rat(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function Dat(t,e){var n,r=e.from,s=e.to;if(r&&s){var i=tc(s,r)<0;i&&(n=[s,r],r=n[0],s=n[1]);var o=tc(t,r)>=0&&tc(s,t)>=0;return o}return s?Ki(s,t):r?Ki(r,t):!1}function jat(t){return p3(t)}function Mat(t){return Array.isArray(t)&&t.every(p3)}function Fat(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(jat(n))return Ki(t,n);if(Mat(n))return n.includes(t);if(Iat(n))return Dat(t,n);if(Rat(n))return n.dayOfWeek.includes(t.getDay());if(Aat(n)){var r=tc(n.before,t),s=tc(n.after,t),i=r>0,o=s<0,a=pD(n.before,n.after);return a?o&&i:i||o}return Oat(n)?tc(t,n.after)>0:Pat(n)?tc(n.before,t)>0:typeof n=="function"?n(t):!1})}function L4(t,e,n){var r=Object.keys(e).reduce(function(i,o){var a=e[o];return Fat(t,a)&&i.push(o),i},[]),s={};return r.forEach(function(i){return s[i]=!0}),n&&!v3(t,n)&&(s.outside=!0),s}function Lat(t,e){for(var n=no(t[0]),r=jk(t[t.length-1]),s,i,o=n;o<=r;){var a=L4(o,e),l=!a.disabled&&!a.hidden;if(!l){o=Xs(o,1);continue}if(a.selected)return o;a.today&&!i&&(i=o),s||(s=o),o=Xs(o,1)}return i||s}var Bat=365;function hhe(t,e){var n=e.moveBy,r=e.direction,s=e.context,i=e.modifiers,o=e.retry,a=o===void 0?{count:0,lastFocused:t}:o,l=s.weekStartsOn,c=s.fromDate,u=s.toDate,d=s.locale,h={day:Xs,week:hD,month:Nl,year:ORe,startOfWeek:function(y){return s.ISOWeek?lp(y):Tc(y,{locale:d,weekStartsOn:l})},endOfWeek:function(y){return s.ISOWeek?$ae(y):m3(y,{locale:d,weekStartsOn:l})}},p=h[n](t,r==="after"?1:-1);r==="before"&&c?p=PRe([c,p]):r==="after"&&u&&(p=RRe([u,p]));var m=!0;if(i){var g=L4(p,i);m=!g.disabled&&!g.hidden}return m?p:a.count>Bat?a.lastFocused:hhe(p,{moveBy:n,direction:r,context:s,modifiers:i,retry:Ct(Ct({},a),{count:a.count+1})})}var phe=N.createContext(void 0);function zat(t){var e=iw(),n=fhe(),r=N.useState(),s=r[0],i=r[1],o=N.useState(),a=o[0],l=o[1],c=Lat(e.displayMonths,n),u=s??(a&&e.isDateDisplayed(a))?a:c,d=function(){l(s),i(void 0)},h=function(y){i(y)},p=Wn(),m=function(y,v){if(s){var x=hhe(s,{moveBy:y,direction:v,context:p,modifiers:n});Ki(s,x)||(e.goToDate(x,s),h(x))}},g={focusedDay:s,focusTarget:u,blur:d,focus:h,focusDayAfter:function(){return m("day","after")},focusDayBefore:function(){return m("day","before")},focusWeekAfter:function(){return m("week","after")},focusWeekBefore:function(){return m("week","before")},focusMonthBefore:function(){return m("month","before")},focusMonthAfter:function(){return m("month","after")},focusYearBefore:function(){return m("year","before")},focusYearAfter:function(){return m("year","after")},focusStartOfWeek:function(){return m("startOfWeek","before")},focusEndOfWeek:function(){return m("endOfWeek","after")}};return f.jsx(phe.Provider,{value:g,children:t.children})}function B4(){var t=N.useContext(phe);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function Vat(t,e){var n=fhe(),r=L4(t,n,e);return r}var z4=N.createContext(void 0);function Wat(t){if(!VE(t.initialProps)){var e={selected:void 0};return f.jsx(z4.Provider,{value:e,children:t.children})}return f.jsx(Uat,{initialProps:t.initialProps,children:t.children})}function Uat(t){var e=t.initialProps,n=t.children,r=function(i,o,a){var l,c,u;if((l=e.onDayClick)===null||l===void 0||l.call(e,i,o,a),o.selected&&!e.required){(c=e.onSelect)===null||c===void 0||c.call(e,void 0,i,o,a);return}(u=e.onSelect)===null||u===void 0||u.call(e,i,i,o,a)},s={selected:e.selected,onDayClick:r};return f.jsx(z4.Provider,{value:s,children:n})}function mhe(){var t=N.useContext(z4);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function Gat(t,e){var n=Wn(),r=mhe(),s=j4(),i=F4(),o=B4(),a=o.focusDayAfter,l=o.focusDayBefore,c=o.focusWeekAfter,u=o.focusWeekBefore,d=o.blur,h=o.focus,p=o.focusMonthBefore,m=o.focusMonthAfter,g=o.focusYearBefore,y=o.focusYearAfter,v=o.focusStartOfWeek,x=o.focusEndOfWeek,b=function(M){var E,j,B,W;VE(n)?(E=r.onDayClick)===null||E===void 0||E.call(r,t,e,M):rw(n)?(j=s.onDayClick)===null||j===void 0||j.call(s,t,e,M):sw(n)?(B=i.onDayClick)===null||B===void 0||B.call(i,t,e,M):(W=n.onDayClick)===null||W===void 0||W.call(n,t,e,M)},S=function(M){var E;h(t),(E=n.onDayFocus)===null||E===void 0||E.call(n,t,e,M)},w=function(M){var E;d(),(E=n.onDayBlur)===null||E===void 0||E.call(n,t,e,M)},C=function(M){var E;(E=n.onDayMouseEnter)===null||E===void 0||E.call(n,t,e,M)},_=function(M){var E;(E=n.onDayMouseLeave)===null||E===void 0||E.call(n,t,e,M)},T=function(M){var E;(E=n.onDayPointerEnter)===null||E===void 0||E.call(n,t,e,M)},k=function(M){var E;(E=n.onDayPointerLeave)===null||E===void 0||E.call(n,t,e,M)},$=function(M){var E;(E=n.onDayTouchCancel)===null||E===void 0||E.call(n,t,e,M)},O=function(M){var E;(E=n.onDayTouchEnd)===null||E===void 0||E.call(n,t,e,M)},P=function(M){var E;(E=n.onDayTouchMove)===null||E===void 0||E.call(n,t,e,M)},D=function(M){var E;(E=n.onDayTouchStart)===null||E===void 0||E.call(n,t,e,M)},A=function(M){var E;(E=n.onDayKeyUp)===null||E===void 0||E.call(n,t,e,M)},I=function(M){var E;switch(M.key){case"ArrowLeft":M.preventDefault(),M.stopPropagation(),n.dir==="rtl"?a():l();break;case"ArrowRight":M.preventDefault(),M.stopPropagation(),n.dir==="rtl"?l():a();break;case"ArrowDown":M.preventDefault(),M.stopPropagation(),c();break;case"ArrowUp":M.preventDefault(),M.stopPropagation(),u();break;case"PageUp":M.preventDefault(),M.stopPropagation(),M.shiftKey?g():p();break;case"PageDown":M.preventDefault(),M.stopPropagation(),M.shiftKey?y():m();break;case"Home":M.preventDefault(),M.stopPropagation(),v();break;case"End":M.preventDefault(),M.stopPropagation(),x();break}(E=n.onDayKeyDown)===null||E===void 0||E.call(n,t,e,M)},R={onClick:b,onFocus:S,onBlur:w,onKeyDown:I,onKeyUp:A,onMouseEnter:C,onMouseLeave:_,onPointerEnter:T,onPointerLeave:k,onTouchCancel:$,onTouchEnd:O,onTouchMove:P,onTouchStart:D};return R}function Hat(){var t=Wn(),e=mhe(),n=j4(),r=F4(),s=VE(t)?e.selected:rw(t)?n.selected:sw(t)?r.selected:void 0;return s}function qat(t){return Object.values(_l).includes(t)}function Kat(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var s=t.modifiersClassNames[r];if(s)n.push(s);else if(qat(r)){var i=t.classNames["day_".concat(r)];i&&n.push(i)}}),n}function Xat(t,e){var n=Ct({},t.styles.day);return Object.keys(e).forEach(function(r){var s;n=Ct(Ct({},n),(s=t.modifiersStyles)===null||s===void 0?void 0:s[r])}),n}function Yat(t,e,n){var r,s,i,o=Wn(),a=B4(),l=Vat(t,e),c=Gat(t,l),u=Hat(),d=!!(o.onDayClick||o.mode!=="default");N.useEffect(function(){var C;l.outside||a.focusedDay&&d&&Ki(a.focusedDay,t)&&((C=n.current)===null||C===void 0||C.focus())},[a.focusedDay,t,n,d,l.outside]);var h=Kat(o,l).join(" "),p=Xat(o,l),m=!!(l.outside&&!o.showOutsideDays||l.hidden),g=(i=(s=o.components)===null||s===void 0?void 0:s.DayContent)!==null&&i!==void 0?i:yat,y=f.jsx(g,{date:t,displayMonth:e,activeModifiers:l}),v={style:p,className:h,children:y,role:"gridcell"},x=a.focusTarget&&Ki(a.focusTarget,t)&&!l.outside,b=a.focusedDay&&Ki(a.focusedDay,t),S=Ct(Ct(Ct({},v),(r={disabled:l.disabled,role:"gridcell"},r["aria-selected"]=l.selected,r.tabIndex=b||x?0:-1,r)),c),w={isButton:d,isHidden:m,activeModifiers:l,selectedDays:u,buttonProps:S,divProps:v};return w}function Qat(t){var e=N.useRef(null),n=Yat(t.date,t.displayMonth,e);return n.isHidden?f.jsx("div",{role:"gridcell"}):n.isButton?f.jsx(tT,Ct({name:"day",ref:e},n.buttonProps)):f.jsx("div",Ct({},n.divProps))}function Zat(t){var e=t.number,n=t.dates,r=Wn(),s=r.onWeekNumberClick,i=r.styles,o=r.classNames,a=r.locale,l=r.labels.labelWeekNumber,c=r.formatters.formatWeekNumber,u=c(Number(e),{locale:a});if(!s)return f.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:u});var d=l(Number(e),{locale:a}),h=function(p){s(e,n,p)};return f.jsx(tT,{name:"week-number","aria-label":d,className:o.weeknumber,style:i.weeknumber,onClick:h,children:u})}function Jat(t){var e,n,r=Wn(),s=r.styles,i=r.classNames,o=r.showWeekNumber,a=r.components,l=(e=a==null?void 0:a.Day)!==null&&e!==void 0?e:Qat,c=(n=a==null?void 0:a.WeekNumber)!==null&&n!==void 0?n:Zat,u;return o&&(u=f.jsx("td",{className:i.cell,style:s.cell,children:f.jsx(c,{number:t.weekNumber,dates:t.dates})})),f.jsxs("tr",{className:i.row,style:s.row,children:[u,t.dates.map(function(d){return f.jsx("td",{className:i.cell,style:s.cell,role:"presentation",children:f.jsx(l,{displayMonth:t.displayMonth,date:d})},zDe(d))})]})}function g7(t,e,n){for(var r=n!=null&&n.ISOWeek?$ae(e):m3(e,n),s=n!=null&&n.ISOWeek?lp(t):Tc(t,n),i=tc(r,s),o=[],a=0;a<=i;a++)o.push(Xs(s,a));var l=o.reduce(function(c,u){var d=n!=null&&n.ISOWeek?Aae(u):Oae(u,n),h=c.find(function(p){return p.weekNumber===d});return h?(h.dates.push(u),c):(c.push({weekNumber:d,dates:[u]}),c)},[]);return l}function elt(t,e){var n=g7(no(t),jk(t),e);if(e!=null&&e.useFixedWeeks){var r=WDe(t,e);if(r<6){var s=n[n.length-1],i=s.dates[s.dates.length-1],o=hD(i,6-r),a=g7(hD(i,1),o,e);n.push.apply(n,a)}}return n}function tlt(t){var e,n,r,s=Wn(),i=s.locale,o=s.classNames,a=s.styles,l=s.hideHead,c=s.fixedWeeks,u=s.components,d=s.weekStartsOn,h=s.firstWeekContainsDate,p=s.ISOWeek,m=elt(t.displayMonth,{useFixedWeeks:!!c,ISOWeek:p,locale:i,weekStartsOn:d,firstWeekContainsDate:h}),g=(e=u==null?void 0:u.Head)!==null&&e!==void 0?e:gat,y=(n=u==null?void 0:u.Row)!==null&&n!==void 0?n:Jat,v=(r=u==null?void 0:u.Footer)!==null&&r!==void 0?r:hat;return f.jsxs("table",{id:t.id,className:o.table,style:a.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!l&&f.jsx(g,{}),f.jsx("tbody",{className:o.tbody,style:a.tbody,children:m.map(function(x){return f.jsx(y,{displayMonth:t.displayMonth,dates:x.dates,weekNumber:x.weekNumber},x.weekNumber)})}),f.jsx(v,{displayMonth:t.displayMonth})]})}function nlt(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var rlt=nlt()?N.useLayoutEffect:N.useEffect,RO=!1,slt=0;function y7(){return"react-day-picker-".concat(++slt)}function ilt(t){var e,n=t??(RO?y7():null),r=N.useState(n),s=r[0],i=r[1];return rlt(function(){s===null&&i(y7())},[]),N.useEffect(function(){RO===!1&&(RO=!0)},[]),(e=t??s)!==null&&e!==void 0?e:void 0}function olt(t){var e,n,r=Wn(),s=r.dir,i=r.classNames,o=r.styles,a=r.components,l=iw().displayMonths,c=ilt(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),u=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,d=[i.month],h=o.month,p=t.displayIndex===0,m=t.displayIndex===l.length-1,g=!p&&!m;s==="rtl"&&(e=[p,m],m=e[0],p=e[1]),p&&(d.push(i.caption_start),h=Ct(Ct({},h),o.caption_start)),m&&(d.push(i.caption_end),h=Ct(Ct({},h),o.caption_end)),g&&(d.push(i.caption_between),h=Ct(Ct({},h),o.caption_between));var y=(n=a==null?void 0:a.Caption)!==null&&n!==void 0?n:fat;return f.jsxs("div",{className:d.join(" "),style:h,children:[f.jsx(y,{id:c,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),f.jsx(tlt,{id:u,"aria-labelledby":c,displayMonth:t.displayMonth})]},t.displayIndex)}function alt(t){var e=Wn(),n=e.classNames,r=e.styles;return f.jsx("div",{className:n.months,style:r.months,children:t.children})}function llt(t){var e,n,r=t.initialProps,s=Wn(),i=B4(),o=iw(),a=N.useState(!1),l=a[0],c=a[1];N.useEffect(function(){s.initialFocus&&i.focusTarget&&(l||(i.focus(i.focusTarget),c(!0)))},[s.initialFocus,l,i.focus,i.focusTarget,i]);var u=[s.classNames.root,s.className];s.numberOfMonths>1&&u.push(s.classNames.multiple_months),s.showWeekNumber&&u.push(s.classNames.with_weeknumber);var d=Ct(Ct({},s.styles.root),s.style),h=Object.keys(r).filter(function(m){return m.startsWith("data-")}).reduce(function(m,g){var y;return Ct(Ct({},m),(y={},y[g]=r[g],y))},{}),p=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:alt;return f.jsx("div",Ct({className:u.join(" "),style:d,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},h,{children:f.jsx(p,{children:o.displayMonths.map(function(m,g){return f.jsx(olt,{displayIndex:g,displayMonth:m},g)})})}))}function clt(t){var e=t.children,n=Pot(t,["children"]);return f.jsx(Zot,{initialProps:n,children:f.jsx(lat,{children:f.jsx(Wat,{initialProps:n,children:f.jsx(vat,{initialProps:n,children:f.jsx(wat,{initialProps:n,children:f.jsx($at,{children:f.jsx(zat,{children:e})})})})})})})}function ult(t){return f.jsx(clt,Ct({},t,{children:f.jsx(llt,{initialProps:t})}))}function cf({className:t,classNames:e,showOutsideDays:n=!0,...r}){return f.jsx(ult,{showOutsideDays:n,className:pe("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:pe(ub({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:pe(ub({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...s})=>f.jsx(ATe,{className:"h-4 w-4"}),IconRight:({...s})=>f.jsx(bre,{className:"h-4 w-4"})},...r})}cf.displayName="Calendar";var Zj=["Enter"," "],dlt=["ArrowDown","PageUp","Home"],ghe=["ArrowUp","PageDown","End"],flt=[...dlt,...ghe],hlt={ltr:[...Zj,"ArrowRight"],rtl:[...Zj,"ArrowLeft"]},plt={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ow="Menu",[Yb,mlt,glt]=O1(ow),[Vp,yhe]=$l(ow,[glt,Cf,Nk]),WE=Cf(),vhe=Nk(),[ylt,Wp]=Vp(ow),[vlt,aw]=Vp(ow),xhe=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=t,a=WE(e),[l,c]=N.useState(null),u=N.useRef(!1),d=ci(i),h=M1(s);return N.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),f.jsx($k,{...a,children:f.jsx(ylt,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:f.jsx(vlt,{scope:e,onClose:N.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:o,children:r})})})};xhe.displayName=ow;var xlt="MenuAnchor",V4=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=WE(n);return f.jsx(B1,{...s,...r,ref:e})});V4.displayName=xlt;var W4="MenuPortal",[blt,bhe]=Vp(W4,{forceMount:void 0}),whe=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=Wp(W4,e);return f.jsx(blt,{scope:e,forceMount:n,children:f.jsx(co,{present:n||i.open,children:f.jsx(ev,{asChild:!0,container:s,children:r})})})};whe.displayName=W4;var Na="MenuContent",[wlt,U4]=Vp(Na),She=N.forwardRef((t,e)=>{const n=bhe(Na,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Wp(Na,t.__scopeMenu),o=aw(Na,t.__scopeMenu);return f.jsx(Yb.Provider,{scope:t.__scopeMenu,children:f.jsx(co,{present:r||i.open,children:f.jsx(Yb.Slot,{scope:t.__scopeMenu,children:o.modal?f.jsx(Slt,{...s,ref:e}):f.jsx(Clt,{...s,ref:e})})})})}),Slt=N.forwardRef((t,e)=>{const n=Wp(Na,t.__scopeMenu),r=N.useRef(null),s=Gt(e,r);return N.useEffect(()=>{const i=r.current;if(i)return Ok(i)},[]),f.jsx(G4,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ie(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Clt=N.forwardRef((t,e)=>{const n=Wp(Na,t.__scopeMenu);return f.jsx(G4,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),G4=N.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:p,disableOutsideScroll:m,...g}=t,y=Wp(Na,n),v=aw(Na,n),x=WE(n),b=vhe(n),S=mlt(n),[w,C]=N.useState(null),_=N.useRef(null),T=Gt(e,_,y.onContentChange),k=N.useRef(0),$=N.useRef(""),O=N.useRef(0),P=N.useRef(null),D=N.useRef("right"),A=N.useRef(0),I=m?z1:N.Fragment,R=m?{as:Ii,allowPinchZoom:!0}:void 0,M=j=>{var de,we;const B=$.current+j,W=S().filter(se=>!se.disabled),G=document.activeElement,te=(de=W.find(se=>se.ref.current===G))==null?void 0:de.textValue,ne=W.map(se=>se.textValue),ue=Dlt(ne,B,te),ge=(we=W.find(se=>se.textValue===ue))==null?void 0:we.ref.current;(function se(he){$.current=he,window.clearTimeout(k.current),he!==""&&(k.current=window.setTimeout(()=>se(""),1e3))})(B),ge&&setTimeout(()=>ge.focus())};N.useEffect(()=>()=>window.clearTimeout(k.current),[]),_k();const E=N.useCallback(j=>{var W,G;return D.current===((W=P.current)==null?void 0:W.side)&&Mlt(j,(G=P.current)==null?void 0:G.area)},[]);return f.jsx(wlt,{scope:n,searchRef:$,onItemEnter:N.useCallback(j=>{E(j)&&j.preventDefault()},[E]),onItemLeave:N.useCallback(j=>{var B;E(j)||((B=_.current)==null||B.focus(),C(null))},[E]),onTriggerLeave:N.useCallback(j=>{E(j)&&j.preventDefault()},[E]),pointerGraceTimerRef:O,onPointerGraceIntentChange:N.useCallback(j=>{P.current=j},[]),children:f.jsx(I,{...R,children:f.jsx(F1,{asChild:!0,trapped:s,onMountAutoFocus:Ie(i,j=>{var B;j.preventDefault(),(B=_.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:f.jsx(Pp,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:p,children:f.jsx(uoe,{asChild:!0,...b,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:w,onCurrentTabStopIdChange:C,onEntryFocus:Ie(l,j=>{v.isUsingKeyboardRef.current||j.preventDefault()}),preventScrollOnEntryFocus:!0,children:f.jsx(Ak,{role:"menu","aria-orientation":"vertical","data-state":Fhe(y.open),"data-radix-menu-content":"",dir:v.dir,...x,...g,ref:T,style:{outline:"none",...g.style},onKeyDown:Ie(g.onKeyDown,j=>{const W=j.target.closest("[data-radix-menu-content]")===j.currentTarget,G=j.ctrlKey||j.altKey||j.metaKey,te=j.key.length===1;W&&(j.key==="Tab"&&j.preventDefault(),!G&&te&&M(j.key));const ne=_.current;if(j.target!==ne||!flt.includes(j.key))return;j.preventDefault();const ge=S().filter(de=>!de.disabled).map(de=>de.ref.current);ghe.includes(j.key)&&ge.reverse(),Plt(ge)}),onBlur:Ie(t.onBlur,j=>{j.currentTarget.contains(j.target)||(window.clearTimeout(k.current),$.current="")}),onPointerMove:Ie(t.onPointerMove,Qb(j=>{const B=j.target,W=A.current!==j.clientX;if(j.currentTarget.contains(B)&&W){const G=j.clientX>A.current?"right":"left";D.current=G,A.current=j.clientX}}))})})})})})})});She.displayName=Na;var Nlt="MenuGroup",H4=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return f.jsx(ct.div,{role:"group",...r,ref:e})});H4.displayName=Nlt;var _lt="MenuLabel",Che=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return f.jsx(ct.div,{...r,ref:e})});Che.displayName=_lt;var nT="MenuItem",v7="menu.itemSelect",UE=N.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=N.useRef(null),o=aw(nT,t.__scopeMenu),a=U4(nT,t.__scopeMenu),l=Gt(e,i),c=N.useRef(!1),u=()=>{const d=i.current;if(!n&&d){const h=new CustomEvent(v7,{bubbles:!0,cancelable:!0});d.addEventListener(v7,p=>r==null?void 0:r(p),{once:!0}),AL(d,h),h.defaultPrevented?c.current=!1:o.onClose()}};return f.jsx(Nhe,{...s,ref:l,disabled:n,onClick:Ie(t.onClick,u),onPointerDown:d=>{var h;(h=t.onPointerDown)==null||h.call(t,d),c.current=!0},onPointerUp:Ie(t.onPointerUp,d=>{var h;c.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:Ie(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||Zj.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});UE.displayName=nT;var Nhe=N.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,o=U4(nT,n),a=vhe(n),l=N.useRef(null),c=Gt(e,l),[u,d]=N.useState(!1),[h,p]=N.useState("");return N.useEffect(()=>{const m=l.current;m&&p((m.textContent??"").trim())},[i.children]),f.jsx(Yb.ItemSlot,{scope:n,disabled:r,textValue:s??h,children:f.jsx(doe,{asChild:!0,...a,focusable:!r,children:f.jsx(ct.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:Ie(t.onPointerMove,Qb(m=>{r?o.onItemLeave(m):(o.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ie(t.onPointerLeave,Qb(m=>o.onItemLeave(m))),onFocus:Ie(t.onFocus,()=>d(!0)),onBlur:Ie(t.onBlur,()=>d(!1))})})})}),Tlt="MenuCheckboxItem",_he=N.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return f.jsx(Ahe,{scope:t.__scopeMenu,checked:n,children:f.jsx(UE,{role:"menuitemcheckbox","aria-checked":rT(n)?"mixed":n,...s,ref:e,"data-state":K4(n),onSelect:Ie(s.onSelect,()=>r==null?void 0:r(rT(n)?!0:!n),{checkForDefaultPrevented:!1})})})});_he.displayName=Tlt;var The="MenuRadioGroup",[klt,Elt]=Vp(The,{value:void 0,onValueChange:()=>{}}),khe=N.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=ci(r);return f.jsx(klt,{scope:t.__scopeMenu,value:n,onValueChange:i,children:f.jsx(H4,{...s,ref:e})})});khe.displayName=The;var Ehe="MenuRadioItem",$he=N.forwardRef((t,e)=>{const{value:n,...r}=t,s=Elt(Ehe,t.__scopeMenu),i=n===s.value;return f.jsx(Ahe,{scope:t.__scopeMenu,checked:i,children:f.jsx(UE,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":K4(i),onSelect:Ie(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});$he.displayName=Ehe;var q4="MenuItemIndicator",[Ahe,$lt]=Vp(q4,{checked:!1}),Ihe=N.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=$lt(q4,n);return f.jsx(co,{present:r||rT(i.checked)||i.checked===!0,children:f.jsx(ct.span,{...s,ref:e,"data-state":K4(i.checked)})})});Ihe.displayName=q4;var Alt="MenuSeparator",Ohe=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return f.jsx(ct.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});Ohe.displayName=Alt;var Ilt="MenuArrow",Phe=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=WE(n);return f.jsx(Ik,{...s,...r,ref:e})});Phe.displayName=Ilt;var Olt="MenuSub",[L9t,Rhe]=Vp(Olt),qx="MenuSubTrigger",Dhe=N.forwardRef((t,e)=>{const n=Wp(qx,t.__scopeMenu),r=aw(qx,t.__scopeMenu),s=Rhe(qx,t.__scopeMenu),i=U4(qx,t.__scopeMenu),o=N.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:t.__scopeMenu},u=N.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return N.useEffect(()=>u,[u]),N.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),f.jsx(V4,{asChild:!0,...c,children:f.jsx(Nhe,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":Fhe(n.open),...t,ref:dk(e,s.onTriggerChange),onClick:d=>{var h;(h=t.onClick)==null||h.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ie(t.onPointerMove,Qb(d=>{i.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Ie(t.onPointerLeave,Qb(d=>{var p,m;u();const h=(p=n.content)==null?void 0:p.getBoundingClientRect();if(h){const g=(m=n.content)==null?void 0:m.dataset.side,y=g==="right",v=y?-5:5,x=h[y?"left":"right"],b=h[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x,y:h.top},{x:b,y:h.top},{x:b,y:h.bottom},{x,y:h.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ie(t.onKeyDown,d=>{var p;const h=i.searchRef.current!=="";t.disabled||h&&d.key===" "||hlt[r.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});Dhe.displayName=qx;var jhe="MenuSubContent",Mhe=N.forwardRef((t,e)=>{const n=bhe(Na,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Wp(Na,t.__scopeMenu),o=aw(Na,t.__scopeMenu),a=Rhe(jhe,t.__scopeMenu),l=N.useRef(null),c=Gt(e,l);return f.jsx(Yb.Provider,{scope:t.__scopeMenu,children:f.jsx(co,{present:r||i.open,children:f.jsx(Yb.Slot,{scope:t.__scopeMenu,children:f.jsx(G4,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Ie(t.onFocusOutside,u=>{u.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ie(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:Ie(t.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),h=plt[o.dir].includes(u.key);d&&h&&(i.onOpenChange(!1),(p=a.trigger)==null||p.focus(),u.preventDefault())})})})})})});Mhe.displayName=jhe;function Fhe(t){return t?"open":"closed"}function rT(t){return t==="indeterminate"}function K4(t){return rT(t)?"indeterminate":t?"checked":"unchecked"}function Plt(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Rlt(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Dlt(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=Rlt(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function jlt(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function Mlt(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return jlt(n,e)}function Qb(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Flt=xhe,Llt=V4,Blt=whe,zlt=She,Vlt=H4,Wlt=Che,Ult=UE,Glt=_he,Hlt=khe,qlt=$he,Klt=Ihe,Xlt=Ohe,Ylt=Phe,Qlt=Dhe,Zlt=Mhe,X4="DropdownMenu",[Jlt,B9t]=$l(X4,[yhe]),Mi=yhe(),[ect,Lhe]=Jlt(X4),Bhe=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,l=Mi(e),c=N.useRef(null),[u=!1,d]=ka({prop:s,defaultProp:i,onChange:o});return f.jsx(ect,{scope:e,triggerId:to(),triggerRef:c,contentId:to(),open:u,onOpenChange:d,onOpenToggle:N.useCallback(()=>d(h=>!h),[d]),modal:a,children:f.jsx(Flt,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};Bhe.displayName=X4;var zhe="DropdownMenuTrigger",Vhe=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=Lhe(zhe,n),o=Mi(n);return f.jsx(Llt,{asChild:!0,...o,children:f.jsx(ct.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:dk(e,i.triggerRef),onPointerDown:Ie(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:Ie(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});Vhe.displayName=zhe;var tct="DropdownMenuPortal",Whe=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Mi(e);return f.jsx(Blt,{...r,...n})};Whe.displayName=tct;var Uhe="DropdownMenuContent",Ghe=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Lhe(Uhe,n),i=Mi(n),o=N.useRef(!1);return f.jsx(zlt,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:Ie(t.onCloseAutoFocus,a=>{var l;o.current||(l=s.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Ie(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!s.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ghe.displayName=Uhe;var nct="DropdownMenuGroup",rct=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Mi(n);return f.jsx(Vlt,{...s,...r,ref:e})});rct.displayName=nct;var sct="DropdownMenuLabel",Hhe=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Mi(n);return f.jsx(Wlt,{...s,...r,ref:e})});Hhe.displayName=sct;var ict="DropdownMenuItem",qhe=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Mi(n);return f.jsx(Ult,{...s,...r,ref:e})});qhe.displayName=ict;var oct="DropdownMenuCheckboxItem",Khe=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Mi(n);return f.jsx(Glt,{...s,...r,ref:e})});Khe.displayName=oct;var act="DropdownMenuRadioGroup",lct=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Mi(n);return f.jsx(Hlt,{...s,...r,ref:e})});lct.displayName=act;var cct="DropdownMenuRadioItem",Xhe=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Mi(n);return f.jsx(qlt,{...s,...r,ref:e})});Xhe.displayName=cct;var uct="DropdownMenuItemIndicator",Yhe=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Mi(n);return f.jsx(Klt,{...s,...r,ref:e})});Yhe.displayName=uct;var dct="DropdownMenuSeparator",Qhe=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Mi(n);return f.jsx(Xlt,{...s,...r,ref:e})});Qhe.displayName=dct;var fct="DropdownMenuArrow",hct=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Mi(n);return f.jsx(Ylt,{...s,...r,ref:e})});hct.displayName=fct;var pct="DropdownMenuSubTrigger",Zhe=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Mi(n);return f.jsx(Qlt,{...s,...r,ref:e})});Zhe.displayName=pct;var mct="DropdownMenuSubContent",Jhe=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Mi(n);return f.jsx(Zlt,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Jhe.displayName=mct;var gct=Bhe,yct=Vhe,vct=Whe,epe=Ghe,tpe=Hhe,npe=qhe,rpe=Khe,spe=Xhe,ipe=Yhe,ope=Qhe,ape=Zhe,lpe=Jhe;const cpe=gct,upe=yct,xct=N.forwardRef(({className:t,inset:e,children:n,...r},s)=>f.jsxs(ape,{ref:s,className:pe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,f.jsx(bre,{className:"ml-auto h-4 w-4"})]}));xct.displayName=ape.displayName;const bct=N.forwardRef(({className:t,...e},n)=>f.jsx(lpe,{ref:n,className:pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));bct.displayName=lpe.displayName;const Y4=N.forwardRef(({className:t,sideOffset:e=4,...n},r)=>f.jsx(vct,{children:f.jsx(epe,{ref:r,sideOffset:e,className:pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Y4.displayName=epe.displayName;const $d=N.forwardRef(({className:t,inset:e,...n},r)=>f.jsx(npe,{ref:r,className:pe("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...n}));$d.displayName=npe.displayName;const wct=N.forwardRef(({className:t,children:e,checked:n,...r},s)=>f.jsxs(rpe,{ref:s,className:pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(ipe,{children:f.jsx(Vd,{className:"h-4 w-4"})})}),e]}));wct.displayName=rpe.displayName;const Sct=N.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(spe,{ref:r,className:pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(ipe,{children:f.jsx(OTe,{className:"h-2 w-2 fill-current"})})}),e]}));Sct.displayName=spe.displayName;const Cct=N.forwardRef(({className:t,inset:e,...n},r)=>f.jsx(tpe,{ref:r,className:pe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));Cct.displayName=tpe.displayName;const Nct=N.forwardRef(({className:t,...e},n)=>f.jsx(ope,{ref:n,className:pe("-mx-1 my-1 h-px bg-muted",t),...e}));Nct.displayName=ope.displayName;const x7=({children:t,className:e})=>f.jsx("div",{className:`text-sm text-muted-foreground ${e||""}`,children:t}),b7=({children:t,className:e})=>f.jsx("div",{className:`flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 ${e||""}`,children:t});function _ct(){const{toast:t}=cs(),{user:e}=Sf(),n=A1(),[r,s]=N.useState(!1),[i,o]=N.useState(!1);N.useState(!1);const[a,l]=N.useState(new Date),[c,u]=N.useState(""),[d,h]=N.useState(null),[p,m]=N.useState(!1),[g,y]=N.useState(!1),[,v]=kL(),{data:x=[]}=qt({queryKey:["/api/sales"],queryFn:async()=>{try{const A=await wr("GET","/api/sales");return console.log("Fetched sales:",A),A}catch(A){return console.error("Error fetching sales:",A),[]}}}),{data:b=[]}=qt({queryKey:["/api/products"],queryFn:async()=>{try{const A=await wr("GET","/api/products");return console.log("Fetched products:",A),A}catch(A){return console.error("Error fetching products:",A),[]}}}),{data:S=[]}=qt({queryKey:["/api/customers"],queryFn:async()=>{try{const A=await wr("GET","/api/customers");return console.log("Fetched customers:",A),A}catch(A){return console.error("Error fetching customers:",A),[]}}}),{data:w}=qt({queryKey:["/api/exchange-rate"],queryFn:async()=>{try{const A=await wr("GET","/api/exchange-rate");return console.log("Fetched exchange rate:",A),A}catch(A){return console.error("Error fetching exchange rate:",A),{usdToIqd:1500}}}});N.useEffect(()=>{const I=new URLSearchParams(window.location.search).get("search");I&&u(I)},[location]);const C=Vr({mutationFn:async A=>await wr("POST","/api/sales",A),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/sales"]}),s(!1),t({title:"تمت الإضافة",description:"تمت إضافة عملية البيع بنجاح"})},onError:A=>{t({title:"خطأ",description:"فشلت إضافة عملية البيع",variant:"destructive"}),console.error("Error adding sale:",A)}}),_=Vr({mutationFn:async A=>await wr("POST","/api/customers",A),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/customers"]}),o(!1),t({title:"تمت الإضافة",description:"تمت إضافة العميل بنجاح"})},onError:A=>{t({title:"خطأ",description:"فشلت إضافة العميل",variant:"destructive"}),console.error("Error adding customer:",A)}}),T=x.filter(A=>{var R,M,E,j,B,W;const I=c.toLowerCase();return((M=(R=A.product)==null?void 0:R.name)==null?void 0:M.toLowerCase().includes(I))||((j=(E=A.customer)==null?void 0:E.name)==null?void 0:j.toLowerCase().includes(I))||((B=A.paymentStatus)==null?void 0:B.toLowerCase().includes(I))||((W=A.paymentMethod)==null?void 0:W.toLowerCase().includes(I))||A.notes&&A.notes.toLowerCase().includes(I)}),k=N.useRef(null),$=zE.useReactToPrint({content:()=>k.current,onBeforeGetContent:()=>(m(!0),new Promise(A=>{setTimeout(()=>{A()},100)})),onAfterPrint:()=>{m(!1),h(null)}}),O=x.reduce((A,I)=>{const R=I.date||I.saleDate;if(!R)return A;const M=new Date(R).toLocaleDateString(),E=A.find(B=>B.date===M),j=I.totalPrice||(I.priceIqd&&I.quantity?Number(I.priceIqd)*I.quantity:0);return E?(E.sales+=1,E.revenue+=j):A.push({date:M,sales:1,revenue:j}),A},[]),P=A=>{wr("DELETE",`/api/sales/${A}`).then(I=>{n.invalidateQueries({queryKey:["/api/sales"]}),t({title:"تم الحذف",description:"تم حذف عملية البيع بنجاح"})}).catch(I=>{t({title:"خطأ",description:"فشل حذف عملية البيع",variant:"destructive"}),console.error("Error deleting sale:",I)})},D=A=>{v(`/installments?saleId=${A}`)};return f.jsxs("div",{className:"flex flex-col min-h-screen p-4 md:p-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"المبيعات"}),f.jsx("p",{className:"text-muted-foreground",children:"إدارة وتتبع عمليات البيع والفواتير"})]}),f.jsxs("div",{className:"mt-4 md:mt-0 flex flex-col sm:flex-row gap-2",children:[f.jsxs($e,{variant:"outline",className:"gap-1",onClick:()=>y(!g),children:[f.jsx(Y0,{className:"h-4 w-4"}),g?"إخفاء التحليلات":"عرض التحليلات"]}),f.jsxs(hl,{open:r,onOpenChange:s,children:[f.jsx(zp,{asChild:!0,children:f.jsxs($e,{className:"gap-1",children:[f.jsx(xl,{className:"h-4 w-4"}),"إضافة عملية بيع"]})}),f.jsxs(wa,{className:"sm:max-w-[425px]",children:[f.jsxs(Sa,{children:[f.jsx(Ca,{children:"إضافة عملية بيع جديدة"}),f.jsx(x7,{children:"قم بإدخال تفاصيل عملية البيع الجديدة"})]}),f.jsxs("form",{onSubmit:A=>{A.preventDefault();const I=new FormData(A.currentTarget),R=Number(I.get("productId")),M=Number(I.get("customerId")),E=Number(I.get("quantity")),j=b.find(te=>te.id===R),B=j?j.price:0,W=B*E,G={productId:R,customerId:M,quantity:E,unitPrice:B,totalPrice:W,paymentStatus:I.get("paymentStatus"),paymentMethod:I.get("paymentMethod"),saleDate:(a==null?void 0:a.toISOString().split("T")[0])||new Date().toISOString().split("T")[0],notes:I.get("notes"),guarantorName:I.get("guarantorName"),guarantorPhone:I.get("guarantorPhone")};C.mutate(G)},className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"productId",children:"المنتج"}),f.jsxs(sr,{name:"productId",required:!0,children:[f.jsx(Yn,{children:f.jsx(ir,{placeholder:"اختر منتج"})}),f.jsx(Qn,{children:b.map(A=>f.jsx(Je,{value:A.id.toString(),children:A.name},A.id))})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx(ot,{htmlFor:"customerId",children:"العميل"}),f.jsx($e,{type:"button",variant:"ghost",size:"sm",onClick:()=>o(!0),children:"+ جديد"})]}),f.jsxs(sr,{name:"customerId",required:!0,children:[f.jsx(Yn,{children:f.jsx(ir,{placeholder:"اختر عميل"})}),f.jsx(Qn,{children:S.map(A=>f.jsx(Je,{value:A.id.toString(),children:A.name},A.id))})]})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"quantity",children:"الكمية"}),f.jsx(Oe,{id:"quantity",name:"quantity",type:"number",min:"1",defaultValue:"1",required:!0})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"saleDate",children:"تاريخ البيع"}),f.jsxs(ov,{children:[f.jsx(av,{asChild:!0,children:f.jsxs($e,{variant:"outline",className:"w-full flex justify-between",children:[a?un(a,"P"):f.jsx("span",{children:"اختر تاريخ"}),f.jsx(Dp,{className:"ml-auto h-4 w-4"})]})}),f.jsx(jp,{className:"w-auto p-0",children:f.jsx(cf,{mode:"single",selected:a,onSelect:l,initialFocus:!0})})]})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"paymentStatus",children:"حالة الدفع"}),f.jsxs(sr,{name:"paymentStatus",defaultValue:"paid",required:!0,children:[f.jsx(Yn,{children:f.jsx(ir,{placeholder:"اختر حالة الدفع"})}),f.jsxs(Qn,{children:[f.jsx(Je,{value:"paid",children:"مدفوع"}),f.jsx(Je,{value:"pending",children:"قيد الانتظار"}),f.jsx(Je,{value:"installment",children:"تقسيط"})]})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"paymentMethod",children:"طريقة الدفع"}),f.jsxs(sr,{name:"paymentMethod",defaultValue:"cash",required:!0,children:[f.jsx(Yn,{children:f.jsx(ir,{placeholder:"اختر طريقة الدفع"})}),f.jsxs(Qn,{children:[f.jsx(Je,{value:"cash",children:"نقدي"}),f.jsx(Je,{value:"card",children:"بطاقة ائتمان"}),f.jsx(Je,{value:"bank",children:"تحويل بنكي"})]})]})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"notes",children:"ملاحظات"}),f.jsx(Oe,{id:"notes",name:"notes",placeholder:"أي ملاحظات إضافية..."})]}),f.jsxs("div",{className:"space-y-4",id:"guarantorInfo",children:[f.jsx("h4",{className:"text-sm font-medium",children:"معلومات الضامن (للتقسيط فقط)"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"guarantorName",children:"اسم الضامن"}),f.jsx(Oe,{id:"guarantorName",name:"guarantorName",placeholder:"اسم الضامن"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"guarantorPhone",children:"هاتف الضامن"}),f.jsx(Oe,{id:"guarantorPhone",name:"guarantorPhone",placeholder:"رقم هاتف الضامن"})]})]})]}),f.jsx(b7,{children:f.jsx($e,{type:"submit",children:"إضافة"})})]})]})]}),f.jsx(hl,{open:i,onOpenChange:o,children:f.jsxs(wa,{className:"sm:max-w-[425px]",children:[f.jsxs(Sa,{children:[f.jsx(Ca,{children:"إضافة عميل جديد"}),f.jsx(x7,{children:"أدخل معلومات العميل الجديد"})]}),f.jsxs("form",{onSubmit:A=>{A.preventDefault();const I=new FormData(A.currentTarget),R={name:I.get("name"),phone:I.get("phone"),email:I.get("email"),address:I.get("address"),notes:I.get("notes")};_.mutate(R)},className:"space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"name",children:"اسم العميل"}),f.jsx(Oe,{id:"name",name:"name",placeholder:"اسم العميل",required:!0})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"phone",children:"رقم الهاتف"}),f.jsx(Oe,{id:"phone",name:"phone",placeholder:"رقم الهاتف"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"email",children:"البريد الإلكتروني"}),f.jsx(Oe,{id:"email",name:"email",type:"email",placeholder:"البريد الإلكتروني"})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"address",children:"العنوان"}),f.jsx(Oe,{id:"address",name:"address",placeholder:"عنوان العميل"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"customerNotes",children:"ملاحظات"}),f.jsx(Oe,{id:"customerNotes",name:"notes",placeholder:"ملاحظات إضافية..."})]}),f.jsx(b7,{children:f.jsx($e,{type:"submit",children:"إضافة"})})]})]})})]})]}),g&&f.jsxs(Le,{className:"mb-6",children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"تحليلات المبيعات"}),f.jsx(Kt,{children:"نظرة عامة على أداء المبيعات"})]}),f.jsxs(Ue,{children:[f.jsx("div",{className:"h-[300px]",children:f.jsx(ro,{width:"100%",height:"100%",children:f.jsxs(Q_,{data:O,children:[f.jsx(si,{strokeDasharray:"3 3"}),f.jsx(_r,{dataKey:"date"}),f.jsx(ar,{yAxisId:"left",orientation:"left"}),f.jsx(ar,{yAxisId:"right",orientation:"right"}),f.jsx(Tn,{formatter:A=>typeof A=="number"?A.toLocaleString():A}),f.jsx(os,{}),f.jsx(ls,{yAxisId:"left",dataKey:"sales",fill:"#8884d8",name:"عدد المبيعات"}),f.jsx(ii,{yAxisId:"right",type:"monotone",dataKey:"revenue",stroke:"#ff7300",name:"الإيرادات"})]})})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[f.jsx(Le,{children:f.jsxs(Ue,{className:"pt-6",children:[f.jsx("div",{className:"text-2xl font-bold",children:x.length.toLocaleString()}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"إجمالي عمليات البيع"})]})}),f.jsx(Le,{children:f.jsxs(Ue,{className:"pt-6",children:[f.jsxs("div",{className:"text-2xl font-bold",children:[x.reduce((A,I)=>A+I.totalPrice,0).toLocaleString()," $"]}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"إجمالي الإيرادات بالدولار"})]})}),f.jsx(Le,{children:f.jsxs(Ue,{className:"pt-6",children:[f.jsxs("div",{className:"text-2xl font-bold",children:[(x.reduce((A,I)=>A+I.totalPrice,0)*((w==null?void 0:w.usdToIqd)||1500)).toLocaleString()," د.ع"]}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"إجمالي الإيرادات بالدينار العراقي"})]})})]})]})]}),f.jsx("div",{className:"flex items-center mb-4",children:f.jsxs("div",{className:"relative flex-1 max-w-sm",children:[f.jsx(jL,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),f.jsx(Oe,{type:"search",placeholder:"البحث في المبيعات...",className:"pl-8",value:c,onChange:A=>u(A.target.value)})]})}),f.jsxs(Le,{className:"flex-1",children:[f.jsx(Ye,{className:"p-4",children:f.jsx(Qe,{children:"قائمة المبيعات"})}),f.jsx(Ue,{className:"p-0",children:f.jsx("div",{className:"border rounded-md",children:f.jsxs($a,{children:[f.jsx(Aa,{children:f.jsxs(dn,{children:[f.jsx(tt,{children:"رقم الفاتورة"}),f.jsx(tt,{children:"المنتج"}),f.jsx(tt,{children:"العميل"}),f.jsx(tt,{children:"الكمية"}),f.jsx(tt,{children:"السعر"}),f.jsx(tt,{children:"الإجمالي"}),f.jsx(tt,{children:"حالة الدفع"}),f.jsx(tt,{children:"طريقة الدفع"}),f.jsx(tt,{children:"التاريخ"}),f.jsx(tt,{children:"الإجراءات"})]})}),f.jsx(Ia,{children:T.length===0?f.jsx(dn,{children:f.jsx(We,{colSpan:10,className:"text-center",children:"لا توجد بيانات مبيعات"})}):T.map(A=>f.jsxs(dn,{children:[f.jsx(We,{children:A.id}),f.jsx(We,{children:A.product.name}),f.jsx(We,{children:A.customer.name}),f.jsx(We,{children:A.quantity}),f.jsxs(We,{children:["$",A.unitPrice.toLocaleString()]}),f.jsxs(We,{children:["$",A.totalPrice.toLocaleString()]}),f.jsx(We,{children:f.jsx(fu,{variant:A.paymentStatus==="paid"?"default":A.paymentStatus==="pending"?"outline":"secondary",children:A.paymentStatus==="paid"?"مدفوع":A.paymentStatus==="pending"?"قيد الانتظار":"تقسيط"})}),f.jsx(We,{children:A.paymentMethod==="cash"?"نقدي":A.paymentMethod==="card"?"بطاقة ائتمان":"تحويل بنكي"}),f.jsx(We,{children:new Date(A.saleDate).toLocaleDateString()}),f.jsx(We,{children:f.jsxs(cpe,{children:[f.jsx(upe,{asChild:!0,children:f.jsx($e,{variant:"ghost",size:"sm",children:f.jsx(Y0,{className:"h-4 w-4"})})}),f.jsxs(Y4,{align:"end",children:[f.jsx($d,{onClick:()=>{h(A),setTimeout(()=>{$()},100)},children:"طباعة الفاتورة"}),A.paymentStatus==="installment"&&f.jsx($d,{onClick:()=>D(A.id),children:"عرض الأقساط"}),f.jsxs(R4,{children:[f.jsx(rhe,{asChild:!0,children:f.jsx($d,{onSelect:I=>I.preventDefault(),children:"حذف"})}),f.jsxs(RE,{children:[f.jsxs(DE,{children:[f.jsx(ME,{children:"هل أنت متأكد من الحذف؟"}),f.jsx(FE,{children:"سيؤدي هذا إلى حذف عملية البيع بشكل نهائي. هذا الإجراء لا يمكن التراجع عنه."})]}),f.jsxs(jE,{children:[f.jsx(BE,{children:"إلغاء"}),f.jsx(LE,{onClick:()=>P(A.id),children:"حذف"})]})]})]})]})]})})]},A.id))})]})})})]}),f.jsx("div",{className:"hidden",children:f.jsx("div",{ref:k,className:"p-8 bg-white",children:d&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:"فاتورة"}),f.jsxs("p",{className:"text-muted-foreground",children:["رقم الفاتورة: ",d.id]})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("h2",{className:"text-xl font-bold",children:"شركتك"}),f.jsx("p",{children:"العنوان: شارع الرئيسي، المدينة"}),f.jsx("p",{children:"الهاتف: 123-456-789"}),f.jsx("p",{children:"البريد الإلكتروني: info@yourcompany.com"})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-bold mb-2",children:"العميل"}),f.jsx("p",{className:"font-bold",children:d.customer.name}),f.jsx("p",{children:d.customer.phone}),f.jsx("p",{children:d.customer.email})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("h3",{className:"text-lg font-bold mb-2",children:"تفاصيل الفاتورة"}),f.jsxs("p",{children:["تاريخ البيع: ",new Date(d.saleDate).toLocaleDateString()]}),f.jsxs("p",{children:["حالة الدفع: ",d.paymentStatus==="paid"?"مدفوع":d.paymentStatus==="pending"?"قيد الانتظار":"تقسيط"]}),f.jsxs("p",{children:["طريقة الدفع: ",d.paymentMethod==="cash"?"نقدي":d.paymentMethod==="card"?"بطاقة ائتمان":"تحويل بنكي"]})]})]}),f.jsx("div",{className:"border rounded-md overflow-hidden",children:f.jsxs("table",{className:"w-full text-left",children:[f.jsx("thead",{className:"border-b",children:f.jsxs("tr",{className:"border-b",children:[f.jsx("th",{className:"py-2 text-right",children:"المنتج"}),f.jsx("th",{className:"py-2 text-right",children:"الكمية"}),f.jsx("th",{className:"py-2 text-right",children:"سعر الوحدة"}),f.jsx("th",{className:"py-2 text-right",children:"الإجمالي"})]})}),f.jsx("tbody",{children:f.jsxs("tr",{children:[f.jsx("td",{className:"py-2",children:d.product.name}),f.jsx("td",{className:"py-2",children:d.quantity}),f.jsxs("td",{className:"py-2",children:["$",d.unitPrice.toLocaleString()]}),f.jsxs("td",{className:"py-2",children:["$",d.totalPrice.toLocaleString()]})]})})]})}),f.jsx("div",{className:"flex justify-end",children:f.jsxs("div",{className:"border rounded-md p-4 w-72",children:[f.jsxs("div",{className:"flex justify-between mb-2",children:[f.jsx("span",{children:"المجموع:"}),f.jsxs("span",{children:["$",d.totalPrice.toLocaleString()]})]}),f.jsxs("div",{className:"flex justify-between mb-2",children:[f.jsx("span",{children:"الضريبة (0%):"}),f.jsx("span",{children:"$0.00"})]}),f.jsxs("div",{className:"flex justify-between font-bold pt-2 border-t",children:[f.jsx("span",{children:"الإجمالي:"}),f.jsxs("span",{children:["$",d.totalPrice.toLocaleString()]})]}),f.jsxs("div",{className:"flex justify-between mt-2 text-muted-foreground text-sm",children:[f.jsx("span",{children:"بالدينار العراقي:"}),f.jsxs("span",{children:[(d.totalPrice*((w==null?void 0:w.usdToIqd)||1500)).toLocaleString()," د.ع"]})]})]})}),d.notes&&f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-bold mb-2",children:"ملاحظات"}),f.jsx("p",{children:d.notes})]}),d.paymentStatus==="installment"&&f.jsxs("div",{className:"border-t pt-4",children:[f.jsx("h3",{className:"text-lg font-bold mb-2",children:"معلومات التقسيط"}),d.guarantorName&&f.jsxs("p",{children:["الضامن: ",d.guarantorName," ",d.guarantorPhone?`- ${d.guarantorPhone}`:""]}),f.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"* يرجى مراجعة جدول الأقساط المرفق للاطلاع على مواعيد السداد."})]}),f.jsxs("div",{className:"text-center mt-8 pt-8 border-t text-sm text-muted-foreground",children:[f.jsx("p",{children:"شكراً لتعاملكم معنا!"}),f.jsx("p",{children:"هذه الفاتورة أنشئت بواسطة نظام إدارة المبيعات"}),f.jsxs("p",{children:["طبعت بواسطة: ",(e==null?void 0:e.fullName)||"مدير النظام"]})]})]})})})]})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Ad(t,e){return typeof t=="function"?t(e):t}function jo(t,e){return n=>{e.setState(r=>({...r,[t]:Ad(n,r[t])}))}}function GE(t){return t instanceof Function}function Tct(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function kct(t,e){const n=[],r=s=>{s.forEach(i=>{n.push(i);const o=e(i);o!=null&&o.length&&r(o)})};return r(t),n}function bt(t,e,n){let r=[],s;return i=>{let o;n.key&&n.debug&&(o=Date.now());const a=t(i);if(!(a.length!==r.length||a.some((u,d)=>r[d]!==u)))return s;r=a;let c;if(n.key&&n.debug&&(c=Date.now()),s=e(...a),n==null||n.onChange==null||n.onChange(s),n.key&&n.debug&&n!=null&&n.debug()){const u=Math.round((Date.now()-o)*100)/100,d=Math.round((Date.now()-c)*100)/100,h=d/16,p=(m,g)=>{for(m=String(m);m.length<g;)m=" "+m;return m};console.info(`%c⏱ ${p(d,5)} /${p(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*h,120))}deg 100% 31%);`,n==null?void 0:n.key)}return s}}function wt(t,e,n,r){return{debug:()=>{var s;return(s=t==null?void 0:t.debugAll)!=null?s:t[e]},key:!1,onChange:r}}function Ect(t,e,n,r){const s=()=>{var o;return(o=i.getValue())!=null?o:t.options.renderFallbackValue},i={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(r),renderValue:s,getContext:bt(()=>[t,n,e,i],(o,a,l,c)=>({table:o,column:a,row:l,cell:c,getValue:c.getValue,renderValue:c.renderValue}),wt(t.options,"debugCells"))};return t._features.forEach(o=>{o.createCell==null||o.createCell(i,n,e,t)},{}),i}function $ct(t,e,n,r){var s,i;const a={...t._getDefaultColumnDef(),...e},l=a.accessorKey;let c=(s=(i=a.id)!=null?i:l?typeof String.prototype.replaceAll=="function"?l.replaceAll(".","_"):l.replace(/\./g,"_"):void 0)!=null?s:typeof a.header=="string"?a.header:void 0,u;if(a.accessorFn?u=a.accessorFn:l&&(l.includes(".")?u=h=>{let p=h;for(const g of l.split(".")){var m;p=(m=p)==null?void 0:m[g]}return p}:u=h=>h[a.accessorKey]),!c)throw new Error;let d={id:`${String(c)}`,accessorFn:u,parent:r,depth:n,columnDef:a,columns:[],getFlatColumns:bt(()=>[!0],()=>{var h;return[d,...(h=d.columns)==null?void 0:h.flatMap(p=>p.getFlatColumns())]},wt(t.options,"debugColumns")),getLeafColumns:bt(()=>[t._getOrderColumnsFn()],h=>{var p;if((p=d.columns)!=null&&p.length){let m=d.columns.flatMap(g=>g.getLeafColumns());return h(m)}return[d]},wt(t.options,"debugColumns"))};for(const h of t._features)h.createColumn==null||h.createColumn(d,t);return d}const Us="debugHeaders";function w7(t,e,n){var r;let i={id:(r=n.id)!=null?r:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],a=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(a),o.push(l)};return a(i),o},getContext:()=>({table:t,header:i,column:e})};return t._features.forEach(o=>{o.createHeader==null||o.createHeader(i,t)}),i}const Act={createTable:t=>{t.getHeaderGroups=bt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,s)=>{var i,o;const a=(i=r==null?void 0:r.map(d=>n.find(h=>h.id===d)).filter(Boolean))!=null?i:[],l=(o=s==null?void 0:s.map(d=>n.find(h=>h.id===d)).filter(Boolean))!=null?o:[],c=n.filter(d=>!(r!=null&&r.includes(d.id))&&!(s!=null&&s.includes(d.id)));return AC(e,[...a,...c,...l],t)},wt(t.options,Us)),t.getCenterHeaderGroups=bt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,s)=>(n=n.filter(i=>!(r!=null&&r.includes(i.id))&&!(s!=null&&s.includes(i.id))),AC(e,n,t,"center")),wt(t.options,Us)),t.getLeftHeaderGroups=bt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,r)=>{var s;const i=(s=r==null?void 0:r.map(o=>n.find(a=>a.id===o)).filter(Boolean))!=null?s:[];return AC(e,i,t,"left")},wt(t.options,Us)),t.getRightHeaderGroups=bt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,r)=>{var s;const i=(s=r==null?void 0:r.map(o=>n.find(a=>a.id===o)).filter(Boolean))!=null?s:[];return AC(e,i,t,"right")},wt(t.options,Us)),t.getFooterGroups=bt(()=>[t.getHeaderGroups()],e=>[...e].reverse(),wt(t.options,Us)),t.getLeftFooterGroups=bt(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),wt(t.options,Us)),t.getCenterFooterGroups=bt(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),wt(t.options,Us)),t.getRightFooterGroups=bt(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),wt(t.options,Us)),t.getFlatHeaders=bt(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),wt(t.options,Us)),t.getLeftFlatHeaders=bt(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),wt(t.options,Us)),t.getCenterFlatHeaders=bt(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),wt(t.options,Us)),t.getRightFlatHeaders=bt(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),wt(t.options,Us)),t.getCenterLeafHeaders=bt(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),wt(t.options,Us)),t.getLeftLeafHeaders=bt(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),wt(t.options,Us)),t.getRightLeafHeaders=bt(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),wt(t.options,Us)),t.getLeafHeaders=bt(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,r)=>{var s,i,o,a,l,c;return[...(s=(i=e[0])==null?void 0:i.headers)!=null?s:[],...(o=(a=n[0])==null?void 0:a.headers)!=null?o:[],...(l=(c=r[0])==null?void 0:c.headers)!=null?l:[]].map(u=>u.getLeafHeaders()).flat()},wt(t.options,Us))}};function AC(t,e,n,r){var s,i;let o=0;const a=function(h,p){p===void 0&&(p=1),o=Math.max(o,p),h.filter(m=>m.getIsVisible()).forEach(m=>{var g;(g=m.columns)!=null&&g.length&&a(m.columns,p+1)},0)};a(t);let l=[];const c=(h,p)=>{const m={depth:p,id:[r,`${p}`].filter(Boolean).join("_"),headers:[]},g=[];h.forEach(y=>{const v=[...g].reverse()[0],x=y.column.depth===m.depth;let b,S=!1;if(x&&y.column.parent?b=y.column.parent:(b=y.column,S=!0),v&&(v==null?void 0:v.column)===b)v.subHeaders.push(y);else{const w=w7(n,b,{id:[r,p,b.id,y==null?void 0:y.id].filter(Boolean).join("_"),isPlaceholder:S,placeholderId:S?`${g.filter(C=>C.column===b).length}`:void 0,depth:p,index:g.length});w.subHeaders.push(y),g.push(w)}m.headers.push(y),y.headerGroup=m}),l.push(m),p>0&&c(g,p-1)},u=e.map((h,p)=>w7(n,h,{depth:o,index:p}));c(u,o-1),l.reverse();const d=h=>h.filter(m=>m.column.getIsVisible()).map(m=>{let g=0,y=0,v=[0];m.subHeaders&&m.subHeaders.length?(v=[],d(m.subHeaders).forEach(b=>{let{colSpan:S,rowSpan:w}=b;g+=S,v.push(w)})):g=1;const x=Math.min(...v);return y=y+x,m.colSpan=g,m.rowSpan=y,{colSpan:g,rowSpan:y}});return d((s=(i=l[0])==null?void 0:i.headers)!=null?s:[]),l}const Ict=(t,e,n,r,s,i,o)=>{let a={id:e,index:r,original:n,depth:s,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(a._valuesCache.hasOwnProperty(l))return a._valuesCache[l];const c=t.getColumn(l);if(c!=null&&c.accessorFn)return a._valuesCache[l]=c.accessorFn(a.original,r),a._valuesCache[l]},getUniqueValues:l=>{if(a._uniqueValuesCache.hasOwnProperty(l))return a._uniqueValuesCache[l];const c=t.getColumn(l);if(c!=null&&c.accessorFn)return c.columnDef.getUniqueValues?(a._uniqueValuesCache[l]=c.columnDef.getUniqueValues(a.original,r),a._uniqueValuesCache[l]):(a._uniqueValuesCache[l]=[a.getValue(l)],a._uniqueValuesCache[l])},renderValue:l=>{var c;return(c=a.getValue(l))!=null?c:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>kct(a.subRows,l=>l.subRows),getParentRow:()=>a.parentId?t.getRow(a.parentId,!0):void 0,getParentRows:()=>{let l=[],c=a;for(;;){const u=c.getParentRow();if(!u)break;l.push(u),c=u}return l.reverse()},getAllCells:bt(()=>[t.getAllLeafColumns()],l=>l.map(c=>Ect(t,a,c,c.id)),wt(t.options,"debugRows")),_getAllCellsByColumnId:bt(()=>[a.getAllCells()],l=>l.reduce((c,u)=>(c[u.column.id]=u,c),{}),wt(t.options,"debugRows"))};for(let l=0;l<t._features.length;l++){const c=t._features[l];c==null||c.createRow==null||c.createRow(a,t)}return a},Oct={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},dpe=(t,e,n)=>{var r,s;const i=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((s=t.getValue(e))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(i))};dpe.autoRemove=t=>pl(t);const fpe=(t,e,n)=>{var r;return!!(!((r=t.getValue(e))==null||(r=r.toString())==null)&&r.includes(n))};fpe.autoRemove=t=>pl(t);const hpe=(t,e,n)=>{var r;return((r=t.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(n==null?void 0:n.toLowerCase())};hpe.autoRemove=t=>pl(t);const ppe=(t,e,n)=>{var r;return(r=t.getValue(e))==null?void 0:r.includes(n)};ppe.autoRemove=t=>pl(t);const mpe=(t,e,n)=>!n.some(r=>{var s;return!((s=t.getValue(e))!=null&&s.includes(r))});mpe.autoRemove=t=>pl(t)||!(t!=null&&t.length);const gpe=(t,e,n)=>n.some(r=>{var s;return(s=t.getValue(e))==null?void 0:s.includes(r)});gpe.autoRemove=t=>pl(t)||!(t!=null&&t.length);const ype=(t,e,n)=>t.getValue(e)===n;ype.autoRemove=t=>pl(t);const vpe=(t,e,n)=>t.getValue(e)==n;vpe.autoRemove=t=>pl(t);const Q4=(t,e,n)=>{let[r,s]=n;const i=t.getValue(e);return i>=r&&i<=s};Q4.resolveFilterValue=t=>{let[e,n]=t,r=typeof e!="number"?parseFloat(e):e,s=typeof n!="number"?parseFloat(n):n,i=e===null||Number.isNaN(r)?-1/0:r,o=n===null||Number.isNaN(s)?1/0:s;if(i>o){const a=i;i=o,o=a}return[i,o]};Q4.autoRemove=t=>pl(t)||pl(t[0])&&pl(t[1]);const Qc={includesString:dpe,includesStringSensitive:fpe,equalsString:hpe,arrIncludes:ppe,arrIncludesAll:mpe,arrIncludesSome:gpe,equals:ype,weakEquals:vpe,inNumberRange:Q4};function pl(t){return t==null||t===""}const Pct={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:jo("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(t.id);return typeof r=="string"?Qc.includesString:typeof r=="number"?Qc.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?Qc.equals:Array.isArray(r)?Qc.arrIncludes:Qc.weakEquals},t.getFilterFn=()=>{var n,r;return GE(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(r=e.options.filterFns)==null?void 0:r[t.columnDef.filterFn])!=null?n:Qc[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,r,s;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(r=>r.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,r;return(n=(r=e.getState().columnFilters)==null?void 0:r.findIndex(s=>s.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(r=>{const s=t.getFilterFn(),i=r==null?void 0:r.find(u=>u.id===t.id),o=Ad(n,i?i.value:void 0);if(S7(s,o,t)){var a;return(a=r==null?void 0:r.filter(u=>u.id!==t.id))!=null?a:[]}const l={id:t.id,value:o};if(i){var c;return(c=r==null?void 0:r.map(u=>u.id===t.id?l:u))!=null?c:[]}return r!=null&&r.length?[...r,l]:[l]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),r=s=>{var i;return(i=Ad(e,s))==null?void 0:i.filter(o=>{const a=n.find(l=>l.id===o.id);if(a){const l=a.getFilterFn();if(S7(l,o.value,a))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(r)},t.resetColumnFilters=e=>{var n,r;t.setColumnFilters(e?[]:(n=(r=t.initialState)==null?void 0:r.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function S7(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const Rct=(t,e,n)=>n.reduce((r,s)=>{const i=s.getValue(t);return r+(typeof i=="number"?i:0)},0),Dct=(t,e,n)=>{let r;return n.forEach(s=>{const i=s.getValue(t);i!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}),r},jct=(t,e,n)=>{let r;return n.forEach(s=>{const i=s.getValue(t);i!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}),r},Mct=(t,e,n)=>{let r,s;return n.forEach(i=>{const o=i.getValue(t);o!=null&&(r===void 0?o>=o&&(r=s=o):(r>o&&(r=o),s<o&&(s=o)))}),[r,s]},Fct=(t,e)=>{let n=0,r=0;if(e.forEach(s=>{let i=s.getValue(t);i!=null&&(i=+i)>=i&&(++n,r+=i)}),n)return r/n},Lct=(t,e)=>{if(!e.length)return;const n=e.map(i=>i.getValue(t));if(!Tct(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),s=n.sort((i,o)=>i-o);return n.length%2!==0?s[r]:(s[r-1]+s[r])/2},Bct=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),zct=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,Vct=(t,e)=>e.length,DO={sum:Rct,min:Dct,max:jct,extent:Mct,mean:Fct,median:Lct,unique:Bct,uniqueCount:zct,count:Vct},Wct={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:jo("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(r=>r!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,r;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(t.id);if(typeof r=="number")return DO.sum;if(Object.prototype.toString.call(r)==="[object Date]")return DO.extent},t.getAggregationFn=()=>{var n,r;if(!t)throw new Error;return GE(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(r=e.options.aggregationFns)==null?void 0:r[t.columnDef.aggregationFn])!=null?n:DO[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,r;t.setGrouping(e?[]:(n=(r=t.initialState)==null?void 0:r.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const r=e.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(t._groupingValuesCache[n]=r.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,r)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var s;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((s=n.subRows)!=null&&s.length)}}};function Uct(t,e,n){if(!(e!=null&&e.length)||!n)return t;const r=t.filter(i=>!e.includes(i.id));return n==="remove"?r:[...e.map(i=>t.find(o=>o.id===i)).filter(Boolean),...r]}const Gct={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:jo("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=bt(n=>[_0(e,n)],n=>n.findIndex(r=>r.id===t.id),wt(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var r;return((r=_0(e,n)[0])==null?void 0:r.id)===t.id},t.getIsLastColumn=n=>{var r;const s=_0(e,n);return((r=s[s.length-1])==null?void 0:r.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=bt(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,r)=>s=>{let i=[];if(!(e!=null&&e.length))i=s;else{const o=[...e],a=[...s];for(;a.length&&o.length;){const l=o.shift(),c=a.findIndex(u=>u.id===l);c>-1&&i.push(a.splice(c,1)[0])}i=[...i,...a]}return Uct(i,n,r)},wt(t.options,"debugTable"))}},jO=()=>({left:[],right:[]}),Hct={getInitialState:t=>({columnPinning:jO(),...t}),getDefaultOptions:t=>({onColumnPinningChange:jo("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const r=t.getLeafColumns().map(s=>s.id).filter(Boolean);e.setColumnPinning(s=>{var i,o;if(n==="right"){var a,l;return{left:((a=s==null?void 0:s.left)!=null?a:[]).filter(d=>!(r!=null&&r.includes(d))),right:[...((l=s==null?void 0:s.right)!=null?l:[]).filter(d=>!(r!=null&&r.includes(d))),...r]}}if(n==="left"){var c,u;return{left:[...((c=s==null?void 0:s.left)!=null?c:[]).filter(d=>!(r!=null&&r.includes(d))),...r],right:((u=s==null?void 0:s.right)!=null?u:[]).filter(d=>!(r!=null&&r.includes(d)))}}return{left:((i=s==null?void 0:s.left)!=null?i:[]).filter(d=>!(r!=null&&r.includes(d))),right:((o=s==null?void 0:s.right)!=null?o:[]).filter(d=>!(r!=null&&r.includes(d)))}})},t.getCanPin=()=>t.getLeafColumns().some(r=>{var s,i,o;return((s=r.columnDef.enablePinning)!=null?s:!0)&&((i=(o=e.options.enableColumnPinning)!=null?o:e.options.enablePinning)!=null?i:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(a=>a.id),{left:r,right:s}=e.getState().columnPinning,i=n.some(a=>r==null?void 0:r.includes(a)),o=n.some(a=>s==null?void 0:s.includes(a));return i?"left":o?"right":!1},t.getPinnedIndex=()=>{var n,r;const s=t.getIsPinned();return s?(n=(r=e.getState().columnPinning)==null||(r=r[s])==null?void 0:r.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=bt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,r,s)=>{const i=[...r??[],...s??[]];return n.filter(o=>!i.includes(o.column.id))},wt(e.options,"debugRows")),t.getLeftVisibleCells=bt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,r)=>(r??[]).map(i=>n.find(o=>o.column.id===i)).filter(Boolean).map(i=>({...i,position:"left"})),wt(e.options,"debugRows")),t.getRightVisibleCells=bt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,r)=>(r??[]).map(i=>n.find(o=>o.column.id===i)).filter(Boolean).map(i=>({...i,position:"right"})),wt(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,r;return t.setColumnPinning(e?jO():(n=(r=t.initialState)==null?void 0:r.columnPinning)!=null?n:jO())},t.getIsSomeColumnsPinned=e=>{var n;const r=t.getState().columnPinning;if(!e){var s,i;return!!((s=r.left)!=null&&s.length||(i=r.right)!=null&&i.length)}return!!((n=r[e])!=null&&n.length)},t.getLeftLeafColumns=bt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),wt(t.options,"debugColumns")),t.getRightLeafColumns=bt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),wt(t.options,"debugColumns")),t.getCenterLeafColumns=bt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r)=>{const s=[...n??[],...r??[]];return e.filter(i=>!s.includes(i.id))},wt(t.options,"debugColumns"))}},IC={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},MO=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),qct={getDefaultColumnDef:()=>IC,getInitialState:t=>({columnSizing:{},columnSizingInfo:MO(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:jo("columnSizing",t),onColumnSizingInfoChange:jo("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,r,s;const i=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:IC.minSize,(r=i??t.columnDef.size)!=null?r:IC.size),(s=t.columnDef.maxSize)!=null?s:IC.maxSize)},t.getStart=bt(n=>[n,_0(e,n),e.getState().columnSizing],(n,r)=>r.slice(0,t.getIndex(n)).reduce((s,i)=>s+i.getSize(),0),wt(e.options,"debugColumns")),t.getAfter=bt(n=>[n,_0(e,n),e.getState().columnSizing],(n,r)=>r.slice(t.getIndex(n)+1).reduce((s,i)=>s+i.getSize(),0),wt(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:r,...s}=n;return s})},t.getCanResize=()=>{var n,r;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const r=s=>{if(s.subHeaders.length)s.subHeaders.forEach(r);else{var i;n+=(i=s.column.getSize())!=null?i:0}};return r(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const r=e.getColumn(t.column.id),s=r==null?void 0:r.getCanResize();return i=>{if(!r||!s||(i.persist==null||i.persist(),FO(i)&&i.touches&&i.touches.length>1))return;const o=t.getSize(),a=t?t.getLeafHeaders().map(v=>[v.column.id,v.column.getSize()]):[[r.id,r.getSize()]],l=FO(i)?Math.round(i.touches[0].clientX):i.clientX,c={},u=(v,x)=>{typeof x=="number"&&(e.setColumnSizingInfo(b=>{var S,w;const C=e.options.columnResizeDirection==="rtl"?-1:1,_=(x-((S=b==null?void 0:b.startOffset)!=null?S:0))*C,T=Math.max(_/((w=b==null?void 0:b.startSize)!=null?w:0),-.999999);return b.columnSizingStart.forEach(k=>{let[$,O]=k;c[$]=Math.round(Math.max(O+O*T,0)*100)/100}),{...b,deltaOffset:_,deltaPercentage:T}}),(e.options.columnResizeMode==="onChange"||v==="end")&&e.setColumnSizing(b=>({...b,...c})))},d=v=>u("move",v),h=v=>{u("end",v),e.setColumnSizingInfo(x=>({...x,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},p=n||typeof document<"u"?document:null,m={moveHandler:v=>d(v.clientX),upHandler:v=>{p==null||p.removeEventListener("mousemove",m.moveHandler),p==null||p.removeEventListener("mouseup",m.upHandler),h(v.clientX)}},g={moveHandler:v=>(v.cancelable&&(v.preventDefault(),v.stopPropagation()),d(v.touches[0].clientX),!1),upHandler:v=>{var x;p==null||p.removeEventListener("touchmove",g.moveHandler),p==null||p.removeEventListener("touchend",g.upHandler),v.cancelable&&(v.preventDefault(),v.stopPropagation()),h((x=v.touches[0])==null?void 0:x.clientX)}},y=Kct()?{passive:!1}:!1;FO(i)?(p==null||p.addEventListener("touchmove",g.moveHandler,y),p==null||p.addEventListener("touchend",g.upHandler,y)):(p==null||p.addEventListener("mousemove",m.moveHandler,y),p==null||p.addEventListener("mouseup",m.upHandler,y)),e.setColumnSizingInfo(v=>({...v,startOffset:l,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:a,isResizingColumn:r.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?MO():(n=t.initialState.columnSizingInfo)!=null?n:MO())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0}}};let OC=null;function Kct(){if(typeof OC=="boolean")return OC;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return OC=t,OC}function FO(t){return t.type==="touchstart"}const Xct={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:jo("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(r=>({...r,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,r;const s=t.columns;return(n=s.length?s.some(i=>i.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[t.id])!=null?n:!0},t.getCanHide=()=>{var n,r;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((r=e.options.enableHiding)!=null?r:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=bt(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),wt(e.options,"debugRows")),t.getVisibleCells=bt(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,r,s)=>[...n,...r,...s],wt(e.options,"debugRows"))},createTable:t=>{const e=(n,r)=>bt(()=>[r(),r().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(i=>i.getIsVisible==null?void 0:i.getIsVisible()),wt(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var r;t.setColumnVisibility(n?{}:(r=t.initialState.columnVisibility)!=null?r:{})},t.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((s,i)=>({...s,[i.id]:n||!(i.getCanHide!=null&&i.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;t.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function _0(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const Yct={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},Qct={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:jo("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const r=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,r,s,i;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&((i=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?i:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>Qc.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:r}=t.options;return GE(r)?r:r==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[r])!=null?e:Qc[r]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},Zct={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:jo("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var r,s;if(!e){t._queue(()=>{e=!0});return}if((r=(s=t.options.autoResetAll)!=null?s:t.options.autoResetExpanded)!=null?r:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=r=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(r),t.toggleAllRowsExpanded=r=>{r??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=r=>{var s,i;t.setExpanded(r?{}:(s=(i=t.initialState)==null?void 0:i.expanded)!=null?s:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const r=t.getState().expanded;return r===!0||Object.values(r).some(Boolean)},t.getIsAllRowsExpanded=()=>{const r=t.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||t.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},t.getExpandedDepth=()=>{let r=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(i=>{const o=i.split(".");r=Math.max(r,o.length)}),r},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(r=>{var s;const i=r===!0?!0:!!(r!=null&&r[t.id]);let o={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(a=>{o[a]=!0}):o=r,n=(s=n)!=null?s:!i,!i&&n)return{...o,[t.id]:!0};if(i&&!n){const{[t.id]:a,...l}=o;return l}return r})},t.getIsExpanded=()=>{var n;const r=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:r===!0||r!=null&&r[t.id])},t.getCanExpand=()=>{var n,r,s;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((r=e.options.enableExpanding)!=null?r:!0)&&!!((s=t.subRows)!=null&&s.length)},t.getIsAllParentsExpanded=()=>{let n=!0,r=t;for(;n&&r.parentId;)r=e.getRow(r.parentId,!0),n=r.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},Jj=0,eM=10,LO=()=>({pageIndex:Jj,pageSize:eM}),Jct={getInitialState:t=>({...t,pagination:{...LO(),...t==null?void 0:t.pagination}}),getDefaultOptions:t=>({onPaginationChange:jo("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var r,s;if(!e){t._queue(()=>{e=!0});return}if((r=(s=t.options.autoResetAll)!=null?s:t.options.autoResetPageIndex)!=null?r:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=r=>{const s=i=>Ad(r,i);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(s)},t.resetPagination=r=>{var s;t.setPagination(r?LO():(s=t.initialState.pagination)!=null?s:LO())},t.setPageIndex=r=>{t.setPagination(s=>{let i=Ad(r,s.pageIndex);const o=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return i=Math.max(0,Math.min(i,o)),{...s,pageIndex:i}})},t.resetPageIndex=r=>{var s,i;t.setPageIndex(r?Jj:(s=(i=t.initialState)==null||(i=i.pagination)==null?void 0:i.pageIndex)!=null?s:Jj)},t.resetPageSize=r=>{var s,i;t.setPageSize(r?eM:(s=(i=t.initialState)==null||(i=i.pagination)==null?void 0:i.pageSize)!=null?s:eM)},t.setPageSize=r=>{t.setPagination(s=>{const i=Math.max(1,Ad(r,s.pageSize)),o=s.pageSize*s.pageIndex,a=Math.floor(o/i);return{...s,pageIndex:a,pageSize:i}})},t.setPageCount=r=>t.setPagination(s=>{var i;let o=Ad(r,(i=t.options.pageCount)!=null?i:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...s,pageCount:o}}),t.getPageOptions=bt(()=>[t.getPageCount()],r=>{let s=[];return r&&r>0&&(s=[...new Array(r)].fill(null).map((i,o)=>o)),s},wt(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:r}=t.getState().pagination,s=t.getPageCount();return s===-1?!0:s===0?!1:r<s-1},t.previousPage=()=>t.setPageIndex(r=>r-1),t.nextPage=()=>t.setPageIndex(r=>r+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var r;return(r=t.options.pageCount)!=null?r:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var r;return(r=t.options.rowCount)!=null?r:t.getPrePaginationRowModel().rows.length}}},BO=()=>({top:[],bottom:[]}),eut={getInitialState:t=>({rowPinning:BO(),...t}),getDefaultOptions:t=>({onRowPinningChange:jo("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,r,s)=>{const i=r?t.getLeafRows().map(l=>{let{id:c}=l;return c}):[],o=s?t.getParentRows().map(l=>{let{id:c}=l;return c}):[],a=new Set([...o,t.id,...i]);e.setRowPinning(l=>{var c,u;if(n==="bottom"){var d,h;return{top:((d=l==null?void 0:l.top)!=null?d:[]).filter(g=>!(a!=null&&a.has(g))),bottom:[...((h=l==null?void 0:l.bottom)!=null?h:[]).filter(g=>!(a!=null&&a.has(g))),...Array.from(a)]}}if(n==="top"){var p,m;return{top:[...((p=l==null?void 0:l.top)!=null?p:[]).filter(g=>!(a!=null&&a.has(g))),...Array.from(a)],bottom:((m=l==null?void 0:l.bottom)!=null?m:[]).filter(g=>!(a!=null&&a.has(g)))}}return{top:((c=l==null?void 0:l.top)!=null?c:[]).filter(g=>!(a!=null&&a.has(g))),bottom:((u=l==null?void 0:l.bottom)!=null?u:[]).filter(g=>!(a!=null&&a.has(g)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:s}=e.options;return typeof r=="function"?r(t):(n=r??s)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:r,bottom:s}=e.getState().rowPinning,i=n.some(a=>r==null?void 0:r.includes(a)),o=n.some(a=>s==null?void 0:s.includes(a));return i?"top":o?"bottom":!1},t.getPinnedIndex=()=>{var n,r;const s=t.getIsPinned();if(!s)return-1;const i=(n=s==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(o=>{let{id:a}=o;return a});return(r=i==null?void 0:i.indexOf(t.id))!=null?r:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,r;return t.setRowPinning(e?BO():(n=(r=t.initialState)==null?void 0:r.rowPinning)!=null?n:BO())},t.getIsSomeRowsPinned=e=>{var n;const r=t.getState().rowPinning;if(!e){var s,i;return!!((s=r.top)!=null&&s.length||(i=r.bottom)!=null&&i.length)}return!!((n=r[e])!=null&&n.length)},t._getPinnedRows=(e,n,r)=>{var s;return((s=t.options.keepPinnedRows)==null||s?(n??[]).map(o=>{const a=t.getRow(o,!0);return a.getIsAllParentsExpanded()?a:null}):(n??[]).map(o=>e.find(a=>a.id===o))).filter(Boolean).map(o=>({...o,position:r}))},t.getTopRows=bt(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),wt(t.options,"debugRows")),t.getBottomRows=bt(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),wt(t.options,"debugRows")),t.getCenterRows=bt(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,r)=>{const s=new Set([...n??[],...r??[]]);return e.filter(i=>!s.has(i.id))},wt(t.options,"debugRows"))}},tut={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:jo("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const r={...n},s=t.getPreGroupedRowModel().flatRows;return e?s.forEach(i=>{i.getCanSelect()&&(r[i.id]=!0)}):s.forEach(i=>{delete r[i.id]}),r})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const r=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),s={...n};return t.getRowModel().rows.forEach(i=>{tM(s,i.id,r,!0,t)}),s}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=bt(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?zO(t,n):{rows:[],flatRows:[],rowsById:{}},wt(t.options,"debugTable")),t.getFilteredSelectedRowModel=bt(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?zO(t,n):{rows:[],flatRows:[],rowsById:{}},wt(t.options,"debugTable")),t.getGroupedSelectedRowModel=bt(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?zO(t,n):{rows:[],flatRows:[],rowsById:{}},wt(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let r=!!(e.length&&Object.keys(n).length);return r&&e.some(s=>s.getCanSelect()&&!n[s.id])&&(r=!1),r},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:n}=t.getState();let r=!!e.length;return r&&e.some(s=>!n[s.id])&&(r=!1),r},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,r)=>{const s=t.getIsSelected();e.setRowSelection(i=>{var o;if(n=typeof n<"u"?n:!s,t.getCanSelect()&&s===n)return i;const a={...i};return tM(a,t.id,n,(o=r==null?void 0:r.selectChildren)!=null?o:!0,e),a})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return Z4(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return nM(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return nM(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return r=>{var s;n&&t.toggleSelected((s=r.target)==null?void 0:s.checked)}}}},tM=(t,e,n,r,s)=>{var i;const o=s.getRow(e,!0);n?(o.getCanMultiSelect()||Object.keys(t).forEach(a=>delete t[a]),o.getCanSelect()&&(t[e]=!0)):delete t[e],r&&(i=o.subRows)!=null&&i.length&&o.getCanSelectSubRows()&&o.subRows.forEach(a=>tM(t,a.id,n,r,s))};function zO(t,e){const n=t.getState().rowSelection,r=[],s={},i=function(o,a){return o.map(l=>{var c;const u=Z4(l,n);if(u&&(r.push(l),s[l.id]=l),(c=l.subRows)!=null&&c.length&&(l={...l,subRows:i(l.subRows)}),u)return l}).filter(Boolean)};return{rows:i(e.rows),flatRows:r,rowsById:s}}function Z4(t,e){var n;return(n=e[t.id])!=null?n:!1}function nM(t,e,n){var r;if(!((r=t.subRows)!=null&&r.length))return!1;let s=!0,i=!1;return t.subRows.forEach(o=>{if(!(i&&!s)&&(o.getCanSelect()&&(Z4(o,e)?i=!0:s=!1),o.subRows&&o.subRows.length)){const a=nM(o,e);a==="all"?i=!0:(a==="some"&&(i=!0),s=!1)}}),s?"all":i?"some":!1}const rM=/([0-9]+)/gm,nut=(t,e,n)=>xpe(uf(t.getValue(n)).toLowerCase(),uf(e.getValue(n)).toLowerCase()),rut=(t,e,n)=>xpe(uf(t.getValue(n)),uf(e.getValue(n))),sut=(t,e,n)=>J4(uf(t.getValue(n)).toLowerCase(),uf(e.getValue(n)).toLowerCase()),iut=(t,e,n)=>J4(uf(t.getValue(n)),uf(e.getValue(n))),out=(t,e,n)=>{const r=t.getValue(n),s=e.getValue(n);return r>s?1:r<s?-1:0},aut=(t,e,n)=>J4(t.getValue(n),e.getValue(n));function J4(t,e){return t===e?0:t>e?1:-1}function uf(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function xpe(t,e){const n=t.split(rM).filter(Boolean),r=e.split(rM).filter(Boolean);for(;n.length&&r.length;){const s=n.shift(),i=r.shift(),o=parseInt(s,10),a=parseInt(i,10),l=[o,a].sort();if(isNaN(l[0])){if(s>i)return 1;if(i>s)return-1;continue}if(isNaN(l[1]))return isNaN(o)?-1:1;if(o>a)return 1;if(a>o)return-1}return n.length-r.length}const Tx={alphanumeric:nut,alphanumericCaseSensitive:rut,text:sut,textCaseSensitive:iut,datetime:out,basic:aut},lut={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:jo("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const s of n){const i=s==null?void 0:s.getValue(t.id);if(Object.prototype.toString.call(i)==="[object Date]")return Tx.datetime;if(typeof i=="string"&&(r=!0,i.split(rM).length>1))return Tx.alphanumeric}return r?Tx.text:Tx.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(t.id))=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,r;if(!t)throw new Error;return GE(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(r=e.options.sortingFns)==null?void 0:r[t.columnDef.sortingFn])!=null?n:Tx[t.columnDef.sortingFn]},t.toggleSorting=(n,r)=>{const s=t.getNextSortingOrder(),i=typeof n<"u"&&n!==null;e.setSorting(o=>{const a=o==null?void 0:o.find(p=>p.id===t.id),l=o==null?void 0:o.findIndex(p=>p.id===t.id);let c=[],u,d=i?n:s==="desc";if(o!=null&&o.length&&t.getCanMultiSort()&&r?a?u="toggle":u="add":o!=null&&o.length&&l!==o.length-1?u="replace":a?u="toggle":u="replace",u==="toggle"&&(i||s||(u="remove")),u==="add"){var h;c=[...o,{id:t.id,desc:d}],c.splice(0,c.length-((h=e.options.maxMultiSortColCount)!=null?h:Number.MAX_SAFE_INTEGER))}else u==="toggle"?c=o.map(p=>p.id===t.id?{...p,desc:d}:p):u==="remove"?c=o.filter(p=>p.id!==t.id):c=[{id:t.id,desc:d}];return c})},t.getFirstSortDir=()=>{var n,r;return((n=(r=t.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var r,s;const i=t.getFirstSortDir(),o=t.getIsSorted();return o?o!==i&&((r=e.options.enableSortingRemoval)==null||r)&&(!(n&&(s=e.options.enableMultiRemove)!=null)||s)?!1:o==="desc"?"asc":"desc":i},t.getCanSort=()=>{var n,r;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,r;return(n=(r=t.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const r=(n=e.getState().sorting)==null?void 0:n.find(s=>s.id===t.id);return r?r.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,r;return(n=(r=e.getState().sorting)==null?void 0:r.findIndex(s=>s.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return r=>{n&&(r.persist==null||r.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,r;t.setSorting(e?[]:(n=(r=t.initialState)==null?void 0:r.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},cut=[Act,Xct,Gct,Hct,Oct,Pct,Yct,Qct,lut,Wct,Zct,Jct,eut,tut,qct];function uut(t){var e,n;const r=[...cut,...(e=t._features)!=null?e:[]];let s={_features:r};const i=s._features.reduce((h,p)=>Object.assign(h,p.getDefaultOptions==null?void 0:p.getDefaultOptions(s)),{}),o=h=>s.options.mergeOptions?s.options.mergeOptions(i,h):{...i,...h};let l={...{},...(n=t.initialState)!=null?n:{}};s._features.forEach(h=>{var p;l=(p=h.getInitialState==null?void 0:h.getInitialState(l))!=null?p:l});const c=[];let u=!1;const d={_features:r,options:{...i,...t},initialState:l,_queue:h=>{c.push(h),u||(u=!0,Promise.resolve().then(()=>{for(;c.length;)c.shift()();u=!1}).catch(p=>setTimeout(()=>{throw p})))},reset:()=>{s.setState(s.initialState)},setOptions:h=>{const p=Ad(h,s.options);s.options=o(p)},getState:()=>s.options.state,setState:h=>{s.options.onStateChange==null||s.options.onStateChange(h)},_getRowId:(h,p,m)=>{var g;return(g=s.options.getRowId==null?void 0:s.options.getRowId(h,p,m))!=null?g:`${m?[m.id,p].join("."):p}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(h,p)=>{let m=(p?s.getPrePaginationRowModel():s.getRowModel()).rowsById[h];if(!m&&(m=s.getCoreRowModel().rowsById[h],!m))throw new Error;return m},_getDefaultColumnDef:bt(()=>[s.options.defaultColumn],h=>{var p;return h=(p=h)!=null?p:{},{header:m=>{const g=m.header.column.columnDef;return g.accessorKey?g.accessorKey:g.accessorFn?g.id:null},cell:m=>{var g,y;return(g=(y=m.renderValue())==null||y.toString==null?void 0:y.toString())!=null?g:null},...s._features.reduce((m,g)=>Object.assign(m,g.getDefaultColumnDef==null?void 0:g.getDefaultColumnDef()),{}),...h}},wt(t,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:bt(()=>[s._getColumnDefs()],h=>{const p=function(m,g,y){return y===void 0&&(y=0),m.map(v=>{const x=$ct(s,v,y,g),b=v;return x.columns=b.columns?p(b.columns,x,y+1):[],x})};return p(h)},wt(t,"debugColumns")),getAllFlatColumns:bt(()=>[s.getAllColumns()],h=>h.flatMap(p=>p.getFlatColumns()),wt(t,"debugColumns")),_getAllFlatColumnsById:bt(()=>[s.getAllFlatColumns()],h=>h.reduce((p,m)=>(p[m.id]=m,p),{}),wt(t,"debugColumns")),getAllLeafColumns:bt(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(h,p)=>{let m=h.flatMap(g=>g.getLeafColumns());return p(m)},wt(t,"debugColumns")),getColumn:h=>s._getAllFlatColumnsById()[h]};Object.assign(s,d);for(let h=0;h<s._features.length;h++){const p=s._features[h];p==null||p.createTable==null||p.createTable(s)}return s}function dut(){return t=>bt(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(s,i,o){i===void 0&&(i=0);const a=[];for(let c=0;c<s.length;c++){const u=Ict(t,t._getRowId(s[c],c,o),s[c],c,i,void 0,o==null?void 0:o.id);if(n.flatRows.push(u),n.rowsById[u.id]=u,a.push(u),t.options.getSubRows){var l;u.originalSubRows=t.options.getSubRows(s[c],c),(l=u.originalSubRows)!=null&&l.length&&(u.subRows=r(u.originalSubRows,i+1,u))}}return a};return n.rows=r(e),n},wt(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function fut(t){const e=[],n=r=>{var s;e.push(r),(s=r.subRows)!=null&&s.length&&r.getIsExpanded()&&r.subRows.forEach(n)};return t.rows.forEach(n),{rows:e,flatRows:t.flatRows,rowsById:t.rowsById}}function hut(t){return e=>bt(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(n,r)=>{if(!r.rows.length)return r;const{pageSize:s,pageIndex:i}=n;let{rows:o,flatRows:a,rowsById:l}=r;const c=s*i,u=c+s;o=o.slice(c,u);let d;e.options.paginateExpandedRows?d={rows:o,flatRows:a,rowsById:l}:d=fut({rows:o,flatRows:a,rowsById:l}),d.flatRows=[];const h=p=>{d.flatRows.push(p),p.subRows.length&&p.subRows.forEach(h)};return d.rows.forEach(h),d},wt(e.options,"debugTable"))}function put(){return t=>bt(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const r=t.getState().sorting,s=[],i=r.filter(l=>{var c;return(c=t.getColumn(l.id))==null?void 0:c.getCanSort()}),o={};i.forEach(l=>{const c=t.getColumn(l.id);c&&(o[l.id]={sortUndefined:c.columnDef.sortUndefined,invertSorting:c.columnDef.invertSorting,sortingFn:c.getSortingFn()})});const a=l=>{const c=l.map(u=>({...u}));return c.sort((u,d)=>{for(let p=0;p<i.length;p+=1){var h;const m=i[p],g=o[m.id],y=g.sortUndefined,v=(h=m==null?void 0:m.desc)!=null?h:!1;let x=0;if(y){const b=u.getValue(m.id),S=d.getValue(m.id),w=b===void 0,C=S===void 0;if(w||C){if(y==="first")return w?-1:1;if(y==="last")return w?1:-1;x=w&&C?0:w?y:-y}}if(x===0&&(x=g.sortingFn(u,d,m.id)),x!==0)return v&&(x*=-1),g.invertSorting&&(x*=-1),x}return u.index-d.index}),c.forEach(u=>{var d;s.push(u),(d=u.subRows)!=null&&d.length&&(u.subRows=a(u.subRows))}),c};return{rows:a(n.rows),flatRows:s,rowsById:n.rowsById}},wt(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function C7(t,e){return t?mut(t)?N.createElement(t,e):t:null}function mut(t){return gut(t)||typeof t=="function"||yut(t)}function gut(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function yut(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function vut(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=N.useState(()=>({current:uut(e)})),[r,s]=N.useState(()=>n.current.initialState);return n.current.setOptions(i=>({...i,...t,state:{...r,...t.state},onStateChange:o=>{s(o),t.onStateChange==null||t.onStateChange(o)}})),n.current}function xut({columns:t,data:e,onPageChange:n,pagination:r}){var a;const[s,i]=N.useState([]),o=vut({data:e,columns:t,getCoreRowModel:dut(),getPaginationRowModel:hut(),getSortedRowModel:put(),onSortingChange:i,state:{sorting:s}});return f.jsxs("div",{children:[f.jsx("div",{className:"rounded-md border",children:f.jsxs($a,{children:[f.jsx(Aa,{children:o.getHeaderGroups().map(l=>f.jsx(dn,{children:l.headers.map(c=>f.jsx(tt,{children:c.isPlaceholder?null:C7(c.column.columnDef.header,c.getContext())},c.id))},l.id))}),f.jsx(Ia,{children:(a=o.getRowModel().rows)!=null&&a.length?o.getRowModel().rows.map(l=>f.jsx(dn,{children:l.getVisibleCells().map(c=>f.jsx(We,{children:C7(c.column.columnDef.cell,c.getContext())},c.id))},l.id)):f.jsx(dn,{children:f.jsx(We,{colSpan:t.length,className:"h-24 text-center",children:"لا توجد نتائج."})})})]})}),r&&f.jsxs("div",{className:"flex items-center justify-between space-x-2 space-x-reverse py-4",children:[f.jsxs("div",{className:"text-sm text-muted-foreground",children:["إجمالي النتائج: ",r.total]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx($e,{variant:"outline",size:"sm",onClick:()=>n==null?void 0:n(r.page-1),disabled:r.page<=1,children:"السابق"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-sm",children:"الصفحة"}),f.jsx("span",{className:"font-medium",children:r.page}),f.jsx("span",{className:"text-sm",children:"من"}),f.jsx("span",{className:"font-medium",children:r.pages})]}),f.jsx($e,{variant:"outline",size:"sm",onClick:()=>n==null?void 0:n(r.page+1),disabled:r.page>=r.pages,children:"التالي"})]})]})]})}const but=[{accessorKey:"invoiceNumber",header:"رقم الفاتورة"},{accessorKey:"customerName",header:"اسم العميل"},{accessorKey:"totalAmount",header:"المبلغ الإجمالي",cell:({row:t})=>{const e=parseFloat(t.getValue("totalAmount"));return new Intl.NumberFormat("ar-IQ",{style:"currency",currency:"IQD"}).format(e)}},{accessorKey:"status",header:"الحالة",cell:({row:t})=>{const e=t.getValue("status");return f.jsx(fu,{variant:e==="active"?"default":e==="modified"?"secondary":"destructive",children:e==="active"?"نشط":e==="modified"?"معدل":"ملغي"})}},{accessorKey:"createdAt",header:"تاريخ الإنشاء",cell:({row:t})=>new Date(t.getValue("createdAt")).toLocaleDateString("ar-IQ")},{id:"actions",cell:({row:t})=>{const e=t.original;return f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx($e,{variant:"ghost",size:"icon",asChild:!0,children:f.jsx(EL,{to:`/invoices/${e.id}`,children:f.jsx(vN,{className:"h-4 w-4"})})}),f.jsx($e,{variant:"ghost",size:"icon",onClick:()=>window.print(),children:f.jsx(DL,{className:"h-4 w-4"})})]})}}];function wut({className:t,date:e,setDate:n}){return f.jsx("div",{className:pe("grid gap-2",t),children:f.jsxs(ov,{children:[f.jsx(av,{asChild:!0,children:f.jsxs($e,{id:"date",variant:"outline",className:pe("w-full justify-start text-right font-normal",!e&&"text-muted-foreground"),children:[f.jsx(Dp,{className:"ml-2 h-4 w-4"}),e!=null&&e.from?e.to?f.jsxs(f.Fragment,{children:[un(e.from,"LLL dd, y")," - ",un(e.to,"LLL dd, y")]}):un(e.from,"LLL dd, y"):f.jsx("span",{children:"اختر نطاق التاريخ"})]})}),f.jsx(jp,{className:"w-auto p-0",align:"start",children:f.jsx(cf,{initialFocus:!0,mode:"range",defaultMonth:e==null?void 0:e.from,selected:e,onSelect:n,numberOfMonths:2})})]})})}function N7(t,e){const[n,r]=N.useState(t);return N.useEffect(()=>{const s=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(s)}},[t,e]),n}function Sut(){const{toast:t}=cs(),[e,n]=N.useState(null),[r,s]=N.useState(!1),[i,o]=N.useState(""),[a,l]=N.useState({from:Xs(new Date,-30),to:new Date}),[c,u]=N.useState(1),d=N7(i,500),h=N7(a,500),{data:p,isLoading:m}=qt({queryKey:["/api/invoices",{search:d,startDate:h.from,endDate:h.to,page:c,limit:10}],staleTime:3e4,gcTime:5*60*1e3,refetchOnWindowFocus:!1}),g=async()=>{if(e)try{await wr(`/api/invoices/${e.id}/cancel`,{method:"POST"}),t({title:"تم إلغاء الفاتورة",description:`تم إلغاء الفاتورة رقم ${e.invoiceNumber} بنجاح`}),s(!1),n(null)}catch{t({variant:"destructive",title:"خطأ في الإلغاء",description:"حدث خطأ أثناء محاولة إلغاء الفاتورة"})}};return f.jsxs("div",{className:"container mx-auto py-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h1",{className:"text-2xl font-bold",children:"الفواتير"}),f.jsxs($e,{variant:"outline",onClick:()=>window.print(),children:[f.jsx(DL,{className:"ml-2 h-4 w-4"}),"طباعة القائمة"]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[f.jsxs("div",{children:[f.jsx(ot,{htmlFor:"search",children:"بحث"}),f.jsxs("div",{className:"relative",children:[f.jsx(jL,{className:"absolute right-3 top-3 h-4 w-4 text-muted-foreground"}),f.jsx(Oe,{id:"search",className:"pr-10",placeholder:"رقم الفاتورة أو اسم العميل",value:i,onChange:y=>o(y.target.value)})]})]}),f.jsxs("div",{className:"md:col-span-2",children:[f.jsx(ot,{children:"نطاق التاريخ"}),f.jsx(wut,{date:a,setDate:l})]})]}),m?f.jsx("div",{className:"flex justify-center items-center h-32",children:f.jsx("div",{className:"text-lg",children:"جاري تحميل الفواتير..."})}):p!=null&&p.data.length?f.jsx(f.Fragment,{children:f.jsx(xut,{columns:but,data:p.data,onPageChange:u,pagination:p.pagination})}):f.jsx("div",{className:"flex justify-center items-center h-32",children:f.jsx("div",{className:"text-lg",children:"لا توجد فواتير متطابقة مع معايير البحث"})}),f.jsx(R4,{open:r,onOpenChange:s,children:f.jsxs(RE,{children:[f.jsxs(DE,{children:[f.jsx(ME,{children:"تأكيد إلغاء الفاتورة"}),f.jsxs(FE,{children:["هل أنت متأكد من رغبتك في إلغاء الفاتورة رقم ",e==null?void 0:e.invoiceNumber,"؟ لا يمكن التراجع عن هذا الإجراء."]})]}),f.jsxs(jE,{children:[f.jsx(BE,{children:"إلغاء"}),f.jsxs(LE,{onClick:g,children:[f.jsx(pk,{className:"ml-2 h-4 w-4"}),"تأكيد الإلغاء"]})]})]})})]})}function Cut(){var r;const{id:t}=Gne(),{data:e,isLoading:n}=qt({queryKey:["/api/invoices",t]});return n?f.jsx("div",{className:"flex justify-center items-center h-screen",children:f.jsx("div",{className:"text-lg",children:"جاري تحميل تفاصيل الفاتورة..."})}):e?f.jsxs("div",{className:"container mx-auto py-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(EL,{href:"/invoices",children:f.jsxs($e,{variant:"ghost",children:[f.jsx(kTe,{className:"ml-2 h-4 w-4"}),"عودة للفواتير"]})}),f.jsxs("h1",{className:"text-2xl font-bold",children:["فاتورة رقم ",e.invoiceNumber]}),f.jsx(fu,{variant:e.status==="active"?"default":"destructive",children:e.status==="active"?"نشط":"ملغي"})]}),f.jsx("div",{className:"flex gap-2",children:f.jsxs($e,{variant:"outline",onClick:()=>window.print(),children:[f.jsx(DL,{className:"ml-2 h-4 w-4"}),"طباعة"]})})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs(Le,{children:[f.jsx(Ye,{children:f.jsx(Qe,{children:"تفاصيل الفاتورة"})}),f.jsx(Ue,{children:f.jsxs("dl",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("dt",{children:"رقم الفاتورة"}),f.jsx("dd",{children:e.invoiceNumber})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("dt",{children:"اسم العميل"}),f.jsx("dd",{children:e.customerName})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("dt",{children:"تاريخ الإنشاء"}),f.jsx("dd",{children:new Date(e.createdAt).toLocaleDateString("ar-IQ")})]})]})})]}),f.jsxs(Le,{children:[f.jsx(Ye,{children:f.jsx(Qe,{children:"المبالغ"})}),f.jsx(Ue,{children:f.jsx("dl",{className:"space-y-2",children:f.jsxs("div",{className:"flex justify-between",children:[f.jsx("dt",{children:"المبلغ الإجمالي"}),f.jsx("dd",{children:new Intl.NumberFormat("ar-IQ",{style:"currency",currency:"IQD"}).format(e.totalAmount)})]})})})]})]}),f.jsxs(Le,{className:"mt-6",children:[f.jsx(Ye,{children:f.jsx(Qe,{children:"المنتجات"})}),f.jsx(Ue,{children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b",children:[f.jsx("th",{className:"text-right py-2",children:"المنتج"}),f.jsx("th",{className:"text-right py-2",children:"الكمية"}),f.jsx("th",{className:"text-right py-2",children:"السعر"}),f.jsx("th",{className:"text-right py-2",children:"الإجمالي"})]})}),f.jsx("tbody",{children:(r=e.items)==null?void 0:r.map(s=>f.jsxs("tr",{className:"border-b",children:[f.jsx("td",{className:"py-2",children:s.productName||`منتج ${s.productId}`}),f.jsx("td",{className:"py-2",children:s.quantity}),f.jsx("td",{className:"py-2",children:new Intl.NumberFormat("ar-IQ",{style:"currency",currency:"IQD"}).format(s.unitPrice)}),f.jsx("td",{className:"py-2",children:new Intl.NumberFormat("ar-IQ",{style:"currency",currency:"IQD"}).format(s.totalPrice)})]},s.id))})]})})]})]}):f.jsx("div",{className:"flex justify-center items-center h-screen",children:f.jsx("div",{className:"text-lg",children:"الفاتورة غير موجودة"})})}function Nut(){const{data:t=[],deleteUserMutation:e}=qt({queryKey:["/api/users"]}),{toast:n}=cs(),r=bl({resolver:bc(tD),defaultValues:{username:"",password:"",fullName:"",email:"",phone:"",role:"staff",permissions:[]}}),s=async o=>{try{if(!(await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...o,saveToDb:!0})})).ok)throw new Error("فشل إنشاء الحساب");await ms.invalidateQueries({queryKey:["/api/users"]}),n({title:"تم إنشاء الحساب بنجاح",description:"تم إضافة الموظف الجديد إلى النظام"})}catch(a){n({title:"حدث خطأ",description:a instanceof Error?a.message:"فشل إنشاء الحساب",variant:"destructive"})}},i=async o=>{try{await e.mutateAsync(o),n({title:"تم حذف الحساب بنجاح",description:"تم حذف الموظف من النظام"})}catch{n({title:"حدث خطأ",description:"فشل حذف الحساب",variant:"destructive"})}};return f.jsxs("div",{className:"flex h-screen",children:[f.jsx("div",{className:"w-64 h-full",children:f.jsx(kc,{})}),f.jsx("main",{className:"flex-1 p-8 overflow-auto",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsxs("div",{className:"flex items-center justify-between mb-8",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(Eoe,{className:"h-8 w-8",style:{color:"#4285F4"}}),f.jsx("h1",{className:"text-3xl font-bold",children:"إدارة الموظفين"})]}),f.jsxs(hl,{children:[f.jsx(zp,{asChild:!0,children:f.jsxs($e,{children:[f.jsx(mIe,{className:"h-4 w-4 ml-2"}),"إضافة موظف جديد"]})}),f.jsxs(wa,{children:[f.jsxs(Sa,{children:[f.jsx(Ca,{children:"إضافة موظف جديد"}),f.jsx(mg,{children:"أدخل معلومات الموظف الجديد. سيتم إرسال بيانات تسجيل الدخول إلى البريد الإلكتروني المدخل."})]}),f.jsx(Cc,{...r,children:f.jsxs("form",{onSubmit:r.handleSubmit(s),className:"space-y-4",children:[f.jsx(It,{control:r.control,name:"username",render:({field:o})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"اسم المستخدم"}),f.jsx(Ot,{children:f.jsx(Oe,{...o})}),f.jsx($t,{})]})}),f.jsx(It,{control:r.control,name:"fullName",render:({field:o})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"الاسم الكامل"}),f.jsx(Ot,{children:f.jsx(Oe,{...o})}),f.jsx($t,{})]})}),f.jsx(It,{control:r.control,name:"password",render:({field:o})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"كلمة المرور"}),f.jsx(Ot,{children:f.jsx(Oe,{type:"password",...o})}),f.jsx($t,{})]})}),f.jsx(It,{control:r.control,name:"email",render:({field:o})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"البريد الإلكتروني"}),f.jsx(Ot,{children:f.jsx(Oe,{type:"email",...o,value:o.value||""})}),f.jsx($t,{})]})}),f.jsx(It,{control:r.control,name:"phone",render:({field:o})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"رقم الهاتف"}),f.jsx(Ot,{children:f.jsx(Oe,{...o,value:o.value||""})}),f.jsx($t,{})]})}),f.jsx(It,{control:r.control,name:"role",render:({field:o})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"الدور"}),f.jsxs(sr,{onValueChange:o.onChange,defaultValue:o.value,children:[f.jsx(Ot,{children:f.jsx(Yn,{children:f.jsx(ir,{placeholder:"اختر الدور"})})}),f.jsxs(Qn,{children:[f.jsx(Je,{value:"admin",children:"مدير"}),f.jsx(Je,{value:"staff",children:"موظف"})]})]}),f.jsx($t,{})]})}),f.jsx($e,{type:"submit",className:"w-full",children:"إضافة الموظف"})]})})]})]})]}),f.jsxs("div",{className:"grid gap-8",children:[f.jsxs(Le,{children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"قائمة الموظفين"}),f.jsx(Kt,{children:"إدارة الموظفين وأدوارهم في النظام"})]}),f.jsx(Ue,{children:f.jsxs($a,{children:[f.jsx(Aa,{children:f.jsxs(dn,{children:[f.jsx(tt,{children:"اسم المستخدم"}),f.jsx(tt,{children:"الاسم الكامل"}),f.jsx(tt,{children:"الدور"}),f.jsx(tt,{children:"الحالة"}),f.jsx(tt,{className:"text-right",children:"الإجراءات"})]})}),f.jsx(Ia,{children:t.map(o=>f.jsxs(dn,{children:[f.jsx(We,{className:"font-medium",children:o.username}),f.jsx(We,{children:o.fullName}),f.jsx(We,{children:f.jsx(fu,{variant:o.role==="admin"?"default":"secondary",children:o.role==="admin"?"مدير":"موظف"})}),f.jsx(We,{children:f.jsx(fu,{variant:"outline",className:pe("bg-green-50",o.isActive?"text-green-700":"text-red-700"),children:o.isActive?"نشط":"معطل"})}),f.jsx(We,{className:"text-right",children:f.jsxs(cpe,{children:[f.jsx(upe,{asChild:!0,children:f.jsxs($e,{variant:"ghost",size:"sm",children:[f.jsx(RTe,{className:"h-4 w-4"}),f.jsx("span",{className:"sr-only",children:"الإجراءات"})]})}),f.jsxs(Y4,{align:"end",children:[f.jsx($d,{children:"تعديل المعلومات"}),f.jsx($d,{children:"تعديل الدور"}),f.jsx($d,{children:"إدارة الصلاحيات"}),f.jsxs(R4,{children:[f.jsx(rhe,{asChild:!0,children:f.jsx($d,{className:"text-destructive",children:"حذف الحساب"})}),f.jsxs(RE,{children:[f.jsxs(DE,{children:[f.jsx(ME,{children:"هل أنت متأكد من حذف هذا الحساب؟"}),f.jsx(FE,{children:"هذا الإجراء لا يمكن التراجع عنه. سيتم حذف جميع بيانات الموظف نهائياً."})]}),f.jsxs(jE,{children:[f.jsx(BE,{children:"إلغاء"}),f.jsx(LE,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>i(o.id),children:"حذف"})]})]})]})]})]})})]},o.id))})]})})]}),f.jsxs(Le,{children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"سجل النشاط"}),f.jsx(Kt,{children:"آخر نشاطات الموظفين في النظام"})]}),f.jsx(Ue,{children:f.jsx("div",{className:"space-y-4",children:t.map(o=>f.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[f.jsx("div",{className:"font-medium",children:o.fullName}),f.jsx("div",{className:"text-muted-foreground",children:o.lastLoginAt?`آخر تسجيل دخول ${new Date(o.lastLoginAt).toLocaleString("ar-SA")}`:"لم يسجل الدخول بعد"})]},o.id))})})]})]})]})})]})}const _ut=q.object({currentPassword:q.string().min(1,"كلمة المرور الحالية مطلوبة"),newPassword:q.string().min(8,"كلمة المرور الجديدة يجب أن تكون 8 أحرف على الأقل").max(100,"كلمة المرور الجديدة طويلة جداً"),confirmPassword:q.string()}).refine(t=>t.newPassword===t.confirmPassword,{message:"كلمات المرور غير متطابقة",path:["confirmPassword"]});function Tut(){const{toast:t}=cs(),[e,n]=N.useState(!1),r=bl({resolver:bc(_ut),defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}});async function s(i){n(!0);try{await wr("POST","/api/auth/change-password",{currentPassword:i.currentPassword,newPassword:i.newPassword}),t({title:"تم تغيير كلمة المرور",description:"تم تغيير كلمة المرور بنجاح"}),r.reset()}catch{t({title:"خطأ",description:"فشل تغيير كلمة المرور. يرجى التحقق من كلمة المرور الحالية",variant:"destructive"})}finally{n(!1)}}return f.jsx(Cc,{...r,children:f.jsxs("form",{onSubmit:r.handleSubmit(s),className:"space-y-4",children:[f.jsx(It,{control:r.control,name:"currentPassword",render:({field:i})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"كلمة المرور الحالية"}),f.jsx(Ot,{children:f.jsx(Oe,{type:"password",...i})}),f.jsx($t,{})]})}),f.jsx(It,{control:r.control,name:"newPassword",render:({field:i})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"كلمة المرور الجديدة"}),f.jsx(Ot,{children:f.jsx(Oe,{type:"password",...i})}),f.jsx($t,{})]})}),f.jsx(It,{control:r.control,name:"confirmPassword",render:({field:i})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"تأكيد كلمة المرور الجديدة"}),f.jsx(Ot,{children:f.jsx(Oe,{type:"password",...i})}),f.jsx($t,{})]})}),f.jsx($e,{type:"submit",className:"w-full",disabled:e,children:e?"جاري تغيير كلمة المرور...":"تغيير كلمة المرور"})]})})}const bpe=N.createContext({});function kut(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const eB=N.createContext(null),wpe=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Eut(t=!0){const e=N.useContext(eB);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=N.useId();N.useEffect(()=>{t&&s(i)},[t]);const o=N.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const tB=typeof window<"u",$ut=tB?N.useLayoutEffect:N.useEffect,Io=t=>t;let sM=Io;function nB(t){let e;return()=>(e===void 0&&(e=t()),e)}const $y=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},gu=t=>t*1e3,yu=t=>t/1e3,Aut={skipAnimations:!1,useManualTiming:!1};function Iut(t){let e=new Set,n=new Set,r=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){i.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,d=!1)=>{const p=d&&r?e:n;return u&&i.add(c),p.has(c)||p.add(c),c},cancel:c=>{n.delete(c),i.delete(c)},process:c=>{if(o=c,r){s=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,s&&(s=!1,l.process(c))}};return l}const PC=["read","resolveKeyframes","update","preRender","render","postRender"],Out=40;function Spe(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=PC.reduce((v,x)=>(v[x]=Iut(i),v),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:h}=o,p=()=>{const v=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(v-s.timestamp,Out),1),s.timestamp=v,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(p))},m=()=>{n=!0,r=!0,s.isProcessing||t(p)};return{schedule:PC.reduce((v,x)=>{const b=o[x];return v[x]=(S,w=!1,C=!1)=>(n||m(),b.schedule(S,w,C)),v},{}),cancel:v=>{for(let x=0;x<PC.length;x++)o[PC[x]].cancel(v)},state:s,steps:o}}const{schedule:Jn,cancel:df,state:As,steps:VO}=Spe(typeof requestAnimationFrame<"u"?requestAnimationFrame:Io,!0),Cpe=N.createContext({strict:!1}),_7={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ay={};for(const t in _7)Ay[t]={isEnabled:e=>_7[t].some(n=>!!e[n])};function Put(t){for(const e in t)Ay[e]={...Ay[e],...t[e]}}const Rut=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function sT(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Rut.has(t)}let Npe=t=>!sT(t);function Dut(t){t&&(Npe=e=>e.startsWith("on")?!sT(e):t(e))}try{Dut(require("@emotion/is-prop-valid").default)}catch{}function jut(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(Npe(s)||n===!0&&sT(s)||!e&&!sT(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function Mut(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const HE=N.createContext({});function Zb(t){return typeof t=="string"||Array.isArray(t)}function qE(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const rB=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],sB=["initial",...rB];function KE(t){return qE(t.animate)||sB.some(e=>Zb(t[e]))}function _pe(t){return!!(KE(t)||t.variants)}function Fut(t,e){if(KE(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Zb(n)?n:void 0,animate:Zb(r)?r:void 0}}return t.inherit!==!1?e:{}}function Lut(t){const{initial:e,animate:n}=Fut(t,N.useContext(HE));return N.useMemo(()=>({initial:e,animate:n}),[T7(e),T7(n)])}function T7(t){return Array.isArray(t)?t.join(" "):t}const But=Symbol.for("motionComponentSymbol");function Hm(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function zut(t,e,n){return N.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Hm(n)&&(n.current=r))},[e])}const iB=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Vut="framerAppearId",Tpe="data-"+iB(Vut),{schedule:oB,cancel:z9t}=Spe(queueMicrotask,!1),kpe=N.createContext({});function Wut(t,e,n,r,s){var i,o;const{visualElement:a}=N.useContext(HE),l=N.useContext(Cpe),c=N.useContext(eB),u=N.useContext(wpe).reducedMotion,d=N.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,p=N.useContext(kpe);h&&!h.projection&&s&&(h.type==="html"||h.type==="svg")&&Uut(d.current,n,s,p);const m=N.useRef(!1);N.useInsertionEffect(()=>{h&&m.current&&h.update(n,c)});const g=n[Tpe],y=N.useRef(!!g&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,g))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,g)));return $ut(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),oB.render(h.render),y.current&&h.animationState&&h.animationState.animateChanges())}),N.useEffect(()=>{h&&(!y.current&&h.animationState&&h.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,g)}),y.current=!1))}),h}function Uut(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Epe(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&Hm(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function Epe(t){if(t)return t.options.allowProjection!==!1?t.projection:Epe(t.parent)}function Gut({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){var i,o;t&&Put(t);function a(c,u){let d;const h={...N.useContext(wpe),...c,layoutId:Hut(c)},{isStatic:p}=h,m=Lut(c),g=r(c,p);if(!p&&tB){qut();const y=Kut(h);d=y.MeasureLayout,m.visualElement=Wut(s,g,h,e,y.ProjectionNode)}return f.jsxs(HE.Provider,{value:m,children:[d&&m.visualElement?f.jsx(d,{visualElement:m.visualElement,...h}):null,n(s,c,zut(g,m.visualElement,u),g,p,m.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${(o=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&o!==void 0?o:""})`}`;const l=N.forwardRef(a);return l[But]=s,l}function Hut({layoutId:t}){const e=N.useContext(bpe).id;return e&&t!==void 0?e+"-"+t:t}function qut(t,e){N.useContext(Cpe).strict}function Kut(t){const{drag:e,layout:n}=Ay;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Xut=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function aB(t){return typeof t!="string"||t.includes("-")?!1:!!(Xut.indexOf(t)>-1||/[A-Z]/u.test(t))}function k7(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function lB(t,e,n,r){if(typeof e=="function"){const[s,i]=k7(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=k7(r);e=e(n!==void 0?n:t.custom,s,i)}return e}const iM=t=>Array.isArray(t),Yut=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Qut=t=>iM(t)?t[t.length-1]||0:t,ri=t=>!!(t&&t.getVelocity);function P2(t){const e=ri(t)?t.get():t;return Yut(e)?e.toValue():e}function Zut({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,i){const o={latestValues:Jut(r,s,i,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const $pe=t=>(e,n)=>{const r=N.useContext(HE),s=N.useContext(eB),i=()=>Zut(t,e,r,s);return n?i():kut(i)};function Jut(t,e,n,r){const s={},i=r(t,{});for(const h in i)s[h]=P2(i[h]);let{initial:o,animate:a}=t;const l=KE(t),c=_pe(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;if(d&&typeof d!="boolean"&&!qE(d)){const h=Array.isArray(d)?d:[d];for(let p=0;p<h.length;p++){const m=lB(t,h[p]);if(m){const{transitionEnd:g,transition:y,...v}=m;for(const x in v){let b=v[x];if(Array.isArray(b)){const S=u?b.length-1:0;b=b[S]}b!==null&&(s[x]=b)}for(const x in g)s[x]=g[x]}}}return s}const Av=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Up=new Set(Av),Ape=t=>e=>typeof e=="string"&&e.startsWith(t),Ipe=Ape("--"),edt=Ape("var(--"),cB=t=>edt(t)?tdt.test(t.split("/*")[0].trim()):!1,tdt=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ope=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Du=(t,e,n)=>n>e?e:n<t?t:n,Iv={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Jb={...Iv,transform:t=>Du(0,1,t)},RC={...Iv,default:1},lw=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),od=lw("deg"),hc=lw("%"),vt=lw("px"),ndt=lw("vh"),rdt=lw("vw"),E7={...hc,parse:t=>hc.parse(t)/100,transform:t=>hc.transform(t*100)},sdt={borderWidth:vt,borderTopWidth:vt,borderRightWidth:vt,borderBottomWidth:vt,borderLeftWidth:vt,borderRadius:vt,radius:vt,borderTopLeftRadius:vt,borderTopRightRadius:vt,borderBottomRightRadius:vt,borderBottomLeftRadius:vt,width:vt,maxWidth:vt,height:vt,maxHeight:vt,top:vt,right:vt,bottom:vt,left:vt,padding:vt,paddingTop:vt,paddingRight:vt,paddingBottom:vt,paddingLeft:vt,margin:vt,marginTop:vt,marginRight:vt,marginBottom:vt,marginLeft:vt,backgroundPositionX:vt,backgroundPositionY:vt},idt={rotate:od,rotateX:od,rotateY:od,rotateZ:od,scale:RC,scaleX:RC,scaleY:RC,scaleZ:RC,skew:od,skewX:od,skewY:od,distance:vt,translateX:vt,translateY:vt,translateZ:vt,x:vt,y:vt,z:vt,perspective:vt,transformPerspective:vt,opacity:Jb,originX:E7,originY:E7,originZ:vt},$7={...Iv,transform:Math.round},uB={...sdt,...idt,zIndex:$7,size:vt,fillOpacity:Jb,strokeOpacity:Jb,numOctaves:$7},odt={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},adt=Av.length;function ldt(t,e,n){let r="",s=!0;for(let i=0;i<adt;i++){const o=Av[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=Ope(a,uB[o]);if(!l){s=!1;const u=odt[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function dB(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Up.has(l)){o=!0;continue}else if(Ipe(l)){s[l]=c;continue}else{const u=Ope(c,uB[l]);l.startsWith("origin")?(a=!0,i[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=ldt(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=i;r.transformOrigin=`${l} ${c} ${u}`}}const cdt={offset:"stroke-dashoffset",array:"stroke-dasharray"},udt={offset:"strokeDashoffset",array:"strokeDasharray"};function ddt(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?cdt:udt;t[i.offset]=vt.transform(-r);const o=vt.transform(e),a=vt.transform(n);t[i.array]=`${o} ${a}`}function A7(t,e,n){return typeof t=="string"?t:vt.transform(e+n*t)}function fdt(t,e,n){const r=A7(e,t.x,t.width),s=A7(n,t.y,t.height);return`${r} ${s}`}function fB(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d){if(dB(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p,dimensions:m}=t;h.transform&&(m&&(p.transform=h.transform),delete h.transform),m&&(s!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=fdt(m,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),o!==void 0&&ddt(h,o,a,l,!1)}const hB=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Ppe=()=>({...hB(),attrs:{}}),pB=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Rpe(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const Dpe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function jpe(t,e,n,r){Rpe(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(Dpe.has(s)?s:iB(s),e.attrs[s])}const iT={};function hdt(t){Object.assign(iT,t)}function Mpe(t,{layout:e,layoutId:n}){return Up.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!iT[t]||t==="opacity")}function mB(t,e,n){var r;const{style:s}=t,i={};for(const o in s)(ri(s[o])||e.style&&ri(e.style[o])||Mpe(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[o]=s[o]);return i}function Fpe(t,e,n){const r=mB(t,e,n);for(const s in t)if(ri(t[s])||ri(e[s])){const i=Av.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}function pdt(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const I7=["x","y","width","height","cx","cy","r"],mdt={useVisualState:$pe({scrapeMotionValuesFromProps:Fpe,createRenderState:Ppe,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let i=!!t.drag;if(!i){for(const a in s)if(Up.has(a)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let a=0;a<I7.length;a++){const l=I7[a];t[l]!==e[l]&&(o=!0)}o&&Jn.read(()=>{pdt(n,r),Jn.render(()=>{fB(r,s,pB(n.tagName),t.transformTemplate),jpe(n,r)})})}})},gdt={useVisualState:$pe({scrapeMotionValuesFromProps:mB,createRenderState:hB})};function Lpe(t,e,n){for(const r in e)!ri(e[r])&&!Mpe(r,n)&&(t[r]=e[r])}function ydt({transformTemplate:t},e){return N.useMemo(()=>{const n=hB();return dB(n,e,t),Object.assign({},n.vars,n.style)},[e])}function vdt(t,e){const n=t.style||{},r={};return Lpe(r,n,t),Object.assign(r,ydt(t,e)),r}function xdt(t,e){const n={},r=vdt(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function bdt(t,e,n,r){const s=N.useMemo(()=>{const i=Ppe();return fB(i,e,pB(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};Lpe(i,t.style,t),s.style={...i,...s.style}}return s}function wdt(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(aB(n)?bdt:xdt)(r,i,o,n),c=jut(r,typeof n=="string",t),u=n!==N.Fragment?{...c,...l,ref:s}:{},{children:d}=r,h=N.useMemo(()=>ri(d)?d.get():d,[d]);return N.createElement(n,{...u,children:h})}}function Sdt(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...aB(r)?mdt:gdt,preloadedFeatures:t,useRender:wdt(s),createVisualElement:e,Component:r};return Gut(o)}}function Bpe(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function XE(t,e,n){const r=t.getProps();return lB(r,e,n!==void 0?n:r.custom,t)}const Cdt=nB(()=>window.ScrollTimeline!==void 0);class Ndt{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(Cdt()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class _dt extends Ndt{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function gB(t,e){return t?t[e]||t.default||t:void 0}const oM=2e4;function zpe(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<oM;)e+=n,r=t.next(e);return e>=oM?1/0:e}function yB(t){return typeof t=="function"}function O7(t,e){t.timeline=e,t.onfinish=null}const vB=t=>Array.isArray(t)&&typeof t[0]=="number",Tdt={linearEasing:void 0};function kdt(t,e){const n=nB(t);return()=>{var r;return(r=Tdt[e])!==null&&r!==void 0?r:n()}}const oT=kdt(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Vpe=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=t($y(0,s-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function Wpe(t){return!!(typeof t=="function"&&oT()||!t||typeof t=="string"&&(t in aM||oT())||vB(t)||Array.isArray(t)&&t.every(Wpe))}const Kx=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,aM={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Kx([0,.65,.55,1]),circOut:Kx([.55,0,1,.45]),backIn:Kx([.31,.01,.66,-.59]),backOut:Kx([.33,1.53,.69,.99])};function Upe(t,e){if(t)return typeof t=="function"&&oT()?Vpe(t,e):vB(t)?Kx(t):Array.isArray(t)?t.map(n=>Upe(n,e)||aM.easeOut):aM[t]}const Ua={x:!1,y:!1};function Gpe(){return Ua.x||Ua.y}function Edt(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const i=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function Hpe(t,e){const n=Edt(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function P7(t){return e=>{e.pointerType==="touch"||Gpe()||t(e)}}function $dt(t,e,n={}){const[r,s,i]=Hpe(t,n),o=P7(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=P7(d=>{c(d),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,s)});return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const qpe=(t,e)=>e?t===e?!0:qpe(t,e.parentElement):!1,xB=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Adt=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Idt(t){return Adt.has(t.tagName)||t.tabIndex!==-1}const Xx=new WeakSet;function R7(t){return e=>{e.key==="Enter"&&t(e)}}function WO(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Odt=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=R7(()=>{if(Xx.has(n))return;WO(n,"down");const s=R7(()=>{WO(n,"up")}),i=()=>WO(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function D7(t){return xB(t)&&!Gpe()}function Pdt(t,e,n={}){const[r,s,i]=Hpe(t,n),o=a=>{const l=a.currentTarget;if(!D7(a)||Xx.has(l))return;Xx.add(l);const c=e(a),u=(p,m)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),!(!D7(p)||!Xx.has(l))&&(Xx.delete(l),typeof c=="function"&&c(p,{success:m}))},d=p=>{u(p,n.useGlobalTarget||qpe(l,p.target))},h=p=>{u(p,!1)};window.addEventListener("pointerup",d,s),window.addEventListener("pointercancel",h,s)};return r.forEach(a=>{!Idt(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),a.addEventListener("focus",c=>Odt(c,s),s)}),i}function Rdt(t){return t==="x"||t==="y"?Ua[t]?null:(Ua[t]=!0,()=>{Ua[t]=!1}):Ua.x||Ua.y?null:(Ua.x=Ua.y=!0,()=>{Ua.x=Ua.y=!1})}const Kpe=new Set(["width","height","top","left","right","bottom",...Av]);let R2;function Ddt(){R2=void 0}const pc={now:()=>(R2===void 0&&pc.set(As.isProcessing||Aut.useManualTiming?As.timestamp:performance.now()),R2),set:t=>{R2=t,queueMicrotask(Ddt)}};function bB(t,e){t.indexOf(e)===-1&&t.push(e)}function wB(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class SB{constructor(){this.subscriptions=[]}add(e){return bB(this.subscriptions,e),()=>wB(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Xpe(t,e){return e?t*(1e3/e):0}const j7=30,jdt=t=>!isNaN(parseFloat(t));class Mdt{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=pc.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=pc.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=jdt(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new SB);const r=this.events[e].add(n);return e==="change"?()=>{r(),Jn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=pc.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>j7)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,j7);return Xpe(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function e1(t,e){return new Mdt(t,e)}function Fdt(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,e1(n))}function Ldt(t,e){const n=XE(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=Qut(i[o]);Fdt(t,o,a)}}function Bdt(t){return!!(ri(t)&&t.add)}function lM(t,e){const n=t.getValue("willChange");if(Bdt(n))return n.add(e)}function Ype(t){return t.props[Tpe]}const Qpe=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,zdt=1e-7,Vdt=12;function Wdt(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=Qpe(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>zdt&&++a<Vdt);return o}function cw(t,e,n,r){if(t===e&&n===r)return Io;const s=i=>Wdt(i,0,1,t,n);return i=>i===0||i===1?i:Qpe(s(i),e,r)}const Zpe=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Jpe=t=>e=>1-t(1-e),eme=cw(.33,1.53,.69,.99),CB=Jpe(eme),tme=Zpe(CB),nme=t=>(t*=2)<1?.5*CB(t):.5*(2-Math.pow(2,-10*(t-1))),NB=t=>1-Math.sin(Math.acos(t)),rme=Jpe(NB),sme=Zpe(NB),ime=t=>/^0[^.\s]+$/u.test(t);function Udt(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||ime(t):!0}const T0=t=>Math.round(t*1e5)/1e5,_B=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Gdt(t){return t==null}const Hdt=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,TB=(t,e)=>n=>!!(typeof n=="string"&&Hdt.test(n)&&n.startsWith(t)||e&&!Gdt(n)&&Object.prototype.hasOwnProperty.call(n,e)),ome=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(_B);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},qdt=t=>Du(0,255,t),UO={...Iv,transform:t=>Math.round(qdt(t))},kh={test:TB("rgb","red"),parse:ome("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+UO.transform(t)+", "+UO.transform(e)+", "+UO.transform(n)+", "+T0(Jb.transform(r))+")"};function Kdt(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const cM={test:TB("#"),parse:Kdt,transform:kh.transform},qm={test:TB("hsl","hue"),parse:ome("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+hc.transform(T0(e))+", "+hc.transform(T0(n))+", "+T0(Jb.transform(r))+")"},qs={test:t=>kh.test(t)||cM.test(t)||qm.test(t),parse:t=>kh.test(t)?kh.parse(t):qm.test(t)?qm.parse(t):cM.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?kh.transform(t):qm.transform(t)},Xdt=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Ydt(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(_B))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Xdt))===null||n===void 0?void 0:n.length)||0)>0}const ame="number",lme="color",Qdt="var",Zdt="var(",M7="${}",Jdt=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function t1(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(Jdt,l=>(qs.test(l)?(r.color.push(i),s.push(lme),n.push(qs.parse(l))):l.startsWith(Zdt)?(r.var.push(i),s.push(Qdt),n.push(l)):(r.number.push(i),s.push(ame),n.push(parseFloat(l))),++i,M7)).split(M7);return{values:n,split:a,indexes:r,types:s}}function cme(t){return t1(t).values}function ume(t){const{split:e,types:n}=t1(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===ame?i+=T0(s[o]):a===lme?i+=qs.transform(s[o]):i+=s[o]}return i}}const eft=t=>typeof t=="number"?0:t;function tft(t){const e=cme(t);return ume(t)(e.map(eft))}const ff={test:Ydt,parse:cme,createTransformer:ume,getAnimatableNone:tft},nft=new Set(["brightness","contrast","saturate","opacity"]);function rft(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(_B)||[];if(!r)return t;const s=n.replace(r,"");let i=nft.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const sft=/\b([a-z-]*)\(.*?\)/gu,uM={...ff,getAnimatableNone:t=>{const e=t.match(sft);return e?e.map(rft).join(" "):t}},ift={...uB,color:qs,backgroundColor:qs,outlineColor:qs,fill:qs,stroke:qs,borderColor:qs,borderTopColor:qs,borderRightColor:qs,borderBottomColor:qs,borderLeftColor:qs,filter:uM,WebkitFilter:uM},kB=t=>ift[t];function dme(t,e){let n=kB(t);return n!==uM&&(n=ff),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const oft=new Set(["auto","none","0"]);function aft(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!oft.has(i)&&t1(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=dme(n,s)}const F7=t=>t===Iv||t===vt,L7=(t,e)=>parseFloat(t.split(", ")[e]),B7=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return L7(s[1],e);{const i=r.match(/^matrix\((.+)\)$/u);return i?L7(i[1],t):0}},lft=new Set(["x","y","z"]),cft=Av.filter(t=>!lft.has(t));function uft(t){const e=[];return cft.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Iy={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:B7(4,13),y:B7(5,14)};Iy.translateX=Iy.x;Iy.translateY=Iy.y;const Gh=new Set;let dM=!1,fM=!1;function fme(){if(fM){const t=Array.from(Gh).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=uft(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}fM=!1,dM=!1,Gh.forEach(t=>t.complete()),Gh.clear()}function hme(){Gh.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(fM=!0)})}function dft(){hme(),fme()}class EB{constructor(e,n,r,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Gh.add(this),dM||(dM=!0,Jn.read(hme),Jn.resolveKeyframes(fme))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s==null?void 0:s.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Gh.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Gh.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const pme=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),fft=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function hft(t){const e=fft.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function mme(t,e,n=1){const[r,s]=hft(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return pme(o)?parseFloat(o):o}return cB(s)?mme(s,e,n+1):s}const gme=t=>e=>e.test(t),pft={test:t=>t==="auto",parse:t=>t},yme=[Iv,vt,hc,od,rdt,ndt,pft],z7=t=>yme.find(gme(t));class vme extends EB{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),cB(c))){const u=mme(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Kpe.has(r)||e.length!==2)return;const[s,i]=e,o=z7(s),a=z7(i);if(o!==a)if(F7(o)&&F7(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)Udt(e[s])&&r.push(s);r.length&&aft(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Iy[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const i=n.getValue(r);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=Iy[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const V7=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ff.test(t)||t==="0")&&!t.startsWith("url("));function mft(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function gft(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=V7(s,e),a=V7(i,e);return!o||!a?!1:mft(t)||(n==="spring"||yB(n))&&r}const yft=t=>t!==null;function YE(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(yft),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const vft=40;class xme{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=pc.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>vft?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&dft(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=pc.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!gft(e,r,s,i))if(o)this.options.duration=0;else{l&&l(YE(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const fr=(t,e,n)=>t+(e-t)*n;function GO(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function xft({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=GO(l,a,t+1/3),i=GO(l,a,t),o=GO(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function aT(t,e){return n=>n>0?e:t}const HO=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},bft=[cM,kh,qm],wft=t=>bft.find(e=>e.test(t));function W7(t){const e=wft(t);if(!e)return!1;let n=e.parse(t);return e===qm&&(n=xft(n)),n}const U7=(t,e)=>{const n=W7(t),r=W7(e);if(!n||!r)return aT(t,e);const s={...n};return i=>(s.red=HO(n.red,r.red,i),s.green=HO(n.green,r.green,i),s.blue=HO(n.blue,r.blue,i),s.alpha=fr(n.alpha,r.alpha,i),kh.transform(s))},Sft=(t,e)=>n=>e(t(n)),uw=(...t)=>t.reduce(Sft),hM=new Set(["none","hidden"]);function Cft(t,e){return hM.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Nft(t,e){return n=>fr(t,e,n)}function $B(t){return typeof t=="number"?Nft:typeof t=="string"?cB(t)?aT:qs.test(t)?U7:kft:Array.isArray(t)?bme:typeof t=="object"?qs.test(t)?U7:_ft:aT}function bme(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>$B(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function _ft(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=$B(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function Tft(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=t.indexes[o][s[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[i]=l,s[o]++}return r}const kft=(t,e)=>{const n=ff.createTransformer(e),r=t1(t),s=t1(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?hM.has(t)&&!s.values.length||hM.has(e)&&!r.values.length?Cft(t,e):uw(bme(Tft(r,s),s.values),n):aT(t,e)};function wme(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?fr(t,e,n):$B(t)(t,e)}const Eft=5;function Sme(t,e,n){const r=Math.max(e-Eft,0);return Xpe(n-t(r),e-r)}const vr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},qO=.001;function $ft({duration:t=vr.duration,bounce:e=vr.bounce,velocity:n=vr.velocity,mass:r=vr.mass}){let s,i,o=1-e;o=Du(vr.minDamping,vr.maxDamping,o),t=Du(vr.minDuration,vr.maxDuration,yu(t)),o<1?(s=c=>{const u=c*o,d=u*t,h=u-n,p=pM(c,o),m=Math.exp(-d);return qO-h/p*m},i=c=>{const d=c*o*t,h=d*n+n,p=Math.pow(o,2)*Math.pow(c,2)*t,m=Math.exp(-d),g=pM(Math.pow(c,2),o);return(-s(c)+qO>0?-1:1)*((h-p)*m)/g}):(s=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-qO+u*d},i=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=Ift(s,i,a);if(t=gu(t),isNaN(l))return{stiffness:vr.stiffness,damping:vr.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const Aft=12;function Ift(t,e,n){let r=n;for(let s=1;s<Aft;s++)r=r-t(r)/e(r);return r}function pM(t,e){return t*Math.sqrt(1-e*e)}const Oft=["duration","bounce"],Pft=["stiffness","damping","mass"];function G7(t,e){return e.some(n=>t[n]!==void 0)}function Rft(t){let e={velocity:vr.velocity,stiffness:vr.stiffness,damping:vr.damping,mass:vr.mass,isResolvedFromDuration:!1,...t};if(!G7(t,Pft)&&G7(t,Oft))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*Du(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:vr.mass,stiffness:s,damping:i}}else{const n=$ft(t);e={...e,...n,mass:vr.mass},e.isResolvedFromDuration=!0}return e}function Cme(t=vr.visualDuration,e=vr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:p}=Rft({...n,velocity:-yu(n.velocity||0)}),m=h||0,g=c/(2*Math.sqrt(l*u)),y=o-i,v=yu(Math.sqrt(l/u)),x=Math.abs(y)<5;r||(r=x?vr.restSpeed.granular:vr.restSpeed.default),s||(s=x?vr.restDelta.granular:vr.restDelta.default);let b;if(g<1){const w=pM(v,g);b=C=>{const _=Math.exp(-g*v*C);return o-_*((m+g*v*y)/w*Math.sin(w*C)+y*Math.cos(w*C))}}else if(g===1)b=w=>o-Math.exp(-v*w)*(y+(m+v*y)*w);else{const w=v*Math.sqrt(g*g-1);b=C=>{const _=Math.exp(-g*v*C),T=Math.min(w*C,300);return o-_*((m+g*v*y)*Math.sinh(T)+w*y*Math.cosh(T))/w}}const S={calculatedDuration:p&&d||null,next:w=>{const C=b(w);if(p)a.done=w>=d;else{let _=0;g<1&&(_=w===0?gu(m):Sme(b,w,C));const T=Math.abs(_)<=r,k=Math.abs(o-C)<=s;a.done=T&&k}return a.value=a.done?o:C,a},toString:()=>{const w=Math.min(zpe(S),oM),C=Vpe(_=>S.next(w*_).value,w,30);return w+"ms "+C}};return S}function H7({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},p=T=>a!==void 0&&T<a||l!==void 0&&T>l,m=T=>a===void 0?l:l===void 0||Math.abs(a-T)<Math.abs(l-T)?a:l;let g=n*e;const y=d+g,v=o===void 0?y:o(y);v!==y&&(g=v-d);const x=T=>-g*Math.exp(-T/r),b=T=>v+x(T),S=T=>{const k=x(T),$=b(T);h.done=Math.abs(k)<=c,h.value=h.done?v:$};let w,C;const _=T=>{p(h.value)&&(w=T,C=Cme({keyframes:[h.value,m(h.value)],velocity:Sme(b,T,h.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return _(0),{calculatedDuration:null,next:T=>{let k=!1;return!C&&w===void 0&&(k=!0,S(T),_(T)),w!==void 0&&T>=w?C.next(T-w):(!k&&S(T),h)}}}const Dft=cw(.42,0,1,1),jft=cw(0,0,.58,1),Nme=cw(.42,0,.58,1),Mft=t=>Array.isArray(t)&&typeof t[0]!="number",q7={linear:Io,easeIn:Dft,easeInOut:Nme,easeOut:jft,circIn:NB,circInOut:sme,circOut:rme,backIn:CB,backInOut:tme,backOut:eme,anticipate:nme},K7=t=>{if(vB(t)){sM(t.length===4);const[e,n,r,s]=t;return cw(e,n,r,s)}else if(typeof t=="string")return sM(q7[t]!==void 0),q7[t];return t};function Fft(t,e,n){const r=[],s=n||wme,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Io:e;a=uw(l,a)}r.push(a)}return r}function Lft(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(sM(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Fft(e,r,s),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=$y(t[d],t[d+1],u);return a[d](h)};return n?u=>c(Du(t[0],t[i-1],u)):c}function Bft(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=$y(0,e,r);t.push(fr(n,1,s))}}function zft(t){const e=[0];return Bft(e,t.length-1),e}function Vft(t,e){return t.map(n=>n*e)}function Wft(t,e){return t.map(()=>e||Nme).splice(0,t.length-1)}function lT({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=Mft(r)?r.map(K7):K7(r),i={done:!1,value:e[0]},o=Vft(n&&n.length===e.length?n:zft(e),t),a=Lft(o,e,{ease:Array.isArray(s)?s:Wft(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const Uft=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Jn.update(e,!0),stop:()=>df(e),now:()=>As.isProcessing?As.timestamp:pc.now()}},Gft={decay:H7,inertia:H7,tween:lT,keyframes:lT,spring:Cme},Hft=t=>t/100;class AB extends xme{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||EB,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(i,a,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=yB(n)?n:Gft[n]||lT;let l,c;a!==lT&&typeof e[0]!="number"&&(l=uw(Hft,wme(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});i==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=zpe(u));const{calculatedDuration:d}=u,h=d+s,p=h*(r+1)-s;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:h,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=r;if(this.startTime===null)return i.next(0);const{delay:h,repeat:p,repeatType:m,repeatDelay:g,onUpdate:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-h*(this.speed>=0?1:-1),x=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let b=this.currentTime,S=i;if(p){const T=Math.min(this.currentTime,u)/d;let k=Math.floor(T),$=T%1;!$&&T>=1&&($=1),$===1&&k--,k=Math.min(k,p+1),!!(k%2)&&(m==="reverse"?($=1-$,g&&($-=g/d)):m==="mirror"&&(S=o)),b=Du(0,1,$)*d}const w=x?{done:!1,value:l[0]}:S.next(b);a&&(w.value=a(w.value));let{done:C}=w;!x&&c!==null&&(C=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return _&&s!==void 0&&(w.value=YE(l,this.options,s)),y&&y(w.value),_&&this.finish(),w}get duration(){const{resolved:e}=this;return e?yu(e.calculatedDuration):0}get time(){return yu(this.currentTime)}set time(e){e=gu(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=yu(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Uft,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const qft=new Set(["opacity","clipPath","filter","transform"]);function Kft(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=Upe(a,s);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const Xft=nB(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),cT=10,Yft=2e4;function Qft(t){return yB(t.type)||t.type==="spring"||!Wpe(t.ease)}function Zft(t,e){const n=new AB({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let i=0;for(;!r.done&&i<Yft;)r=n.sample(i),s.push(r.value),i+=cT;return{times:void 0,keyframes:s,duration:i-cT,ease:"linear"}}const _me={anticipate:nme,backInOut:tme,circInOut:sme};function Jft(t){return t in _me}class X7 extends xme{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new vme(i,(o,a)=>this.onKeyframesResolved(o,a),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:i,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&oT()&&Jft(i)&&(i=_me[i]),Qft(this.options)){const{onComplete:d,onUpdate:h,motionValue:p,element:m,...g}=this.options,y=Zft(e,g);e=y.keyframes,e.length===1&&(e[1]=e[0]),r=y.duration,s=y.times,i=y.ease,o="keyframes"}const u=Kft(a.owner.current,l,e,{...this.options,duration:r,times:s,ease:i});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(O7(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:d}=this.options;a.set(YE(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:s,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return yu(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return yu(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=gu(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Io;const{animation:r}=n;O7(r,e)}return Io}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:i,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:d,element:h,...p}=this.options,m=new AB({...p,keyframes:r,duration:s,type:i,ease:o,times:a,isGenerator:!0}),g=gu(this.time);c.setWithVelocity(m.sample(g-cT).value,m.sample(g).value,cT)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return Xft()&&r&&qft.has(r)&&!l&&!c&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const eht={type:"spring",stiffness:500,damping:25,restSpeed:10},tht=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),nht={type:"keyframes",duration:.8},rht={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},sht=(t,{keyframes:e})=>e.length>2?nht:Up.has(t)?t.startsWith("scale")?tht(e[1]):eht:rht;function iht({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const IB=(t,e,n,r={},s,i)=>o=>{const a=gB(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-gu(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};iht(a)||(u={...u,...sht(t,u)}),u.duration&&(u.duration=gu(u.duration)),u.repeatDelay&&(u.repeatDelay=gu(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!i&&e.get()!==void 0){const h=YE(u.keyframes,a);if(h!==void 0)return Jn.update(()=>{u.onUpdate(h),u.onComplete()}),new _dt([])}return!i&&X7.supports(u)?new X7(u):new AB(u)};function oht({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Tme(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var i;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in l){const h=t.getValue(d,(i=t.latestValues[d])!==null&&i!==void 0?i:null),p=l[d];if(p===void 0||u&&oht(u,d))continue;const m={delay:n,...gB(o||{},d)};let g=!1;if(window.MotionHandoffAnimation){const v=Ype(t);if(v){const x=window.MotionHandoffAnimation(v,d,Jn);x!==null&&(m.startTime=x,g=!0)}}lM(t,d),h.start(IB(d,h,p,t.shouldReduceMotion&&Kpe.has(d)?{type:!1}:m,t,g));const y=h.animation;y&&c.push(y)}return a&&Promise.all(c).then(()=>{Jn.update(()=>{a&&Ldt(t,a)})}),c}function mM(t,e,n={}){var r;const s=XE(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const o=s?()=>Promise.all(Tme(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=i;return aht(t,e,u+c,d,h,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function aht(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(lht).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(mM(c,e,{...i,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function lht(t,e){return t.sortNodePosition(e)}function cht(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>mM(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=mM(t,e,n);else{const s=typeof e=="function"?XE(t,e,n.custom):e;r=Promise.all(Tme(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const uht=sB.length;function kme(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?kme(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<uht;n++){const r=sB[n],s=t.props[r];(Zb(s)||s===!1)&&(e[r]=s)}return e}const dht=[...rB].reverse(),fht=rB.length;function hht(t){return e=>Promise.all(e.map(({animation:n,options:r})=>cht(t,n,r)))}function pht(t){let e=hht(t),n=Y7(),r=!0;const s=l=>(c,u)=>{var d;const h=XE(t,u,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(h){const{transition:p,transitionEnd:m,...g}=h;c={...c,...g,...m}}return c};function i(l){e=l(t)}function o(l){const{props:c}=t,u=kme(t.parent)||{},d=[],h=new Set;let p={},m=1/0;for(let y=0;y<fht;y++){const v=dht[y],x=n[v],b=c[v]!==void 0?c[v]:u[v],S=Zb(b),w=v===l?x.isActive:null;w===!1&&(m=y);let C=b===u[v]&&b!==c[v]&&S;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),x.protectedKeys={...p},!x.isActive&&w===null||!b&&!x.prevProp||qE(b)||typeof b=="boolean")continue;const _=mht(x.prevProp,b);let T=_||v===l&&x.isActive&&!C&&S||y>m&&S,k=!1;const $=Array.isArray(b)?b:[b];let O=$.reduce(s(v),{});w===!1&&(O={});const{prevResolvedValues:P={}}=x,D={...P,...O},A=M=>{T=!0,h.has(M)&&(k=!0,h.delete(M)),x.needsAnimating[M]=!0;const E=t.getValue(M);E&&(E.liveStyle=!1)};for(const M in D){const E=O[M],j=P[M];if(p.hasOwnProperty(M))continue;let B=!1;iM(E)&&iM(j)?B=!Bpe(E,j):B=E!==j,B?E!=null?A(M):h.add(M):E!==void 0&&h.has(M)?A(M):x.protectedKeys[M]=!0}x.prevProp=b,x.prevResolvedValues=O,x.isActive&&(p={...p,...O}),r&&t.blockInitialAnimation&&(T=!1),T&&(!(C&&_)||k)&&d.push(...$.map(M=>({animation:M,options:{type:v}})))}if(h.size){const y={};h.forEach(v=>{const x=t.getBaseTarget(v),b=t.getValue(v);b&&(b.liveStyle=!0),y[v]=x??null}),d.push({animation:y})}let g=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(d):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Y7(),r=!0}}}function mht(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Bpe(e,t):!1}function Zf(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Y7(){return{animate:Zf(!0),whileInView:Zf(),whileHover:Zf(),whileTap:Zf(),whileDrag:Zf(),whileFocus:Zf(),exit:Zf()}}class Of{constructor(e){this.isMounted=!1,this.node=e}update(){}}class ght extends Of{constructor(e){super(e),e.animationState||(e.animationState=pht(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();qE(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let yht=0;class vht extends Of{constructor(){super(...arguments),this.id=yht++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const xht={animation:{Feature:ght},exit:{Feature:vht}};function n1(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function dw(t){return{point:{x:t.pageX,y:t.pageY}}}const bht=t=>e=>xB(e)&&t(e,dw(e));function k0(t,e,n,r){return n1(t,e,bht(n),r)}const Q7=(t,e)=>Math.abs(t-e);function wht(t,e){const n=Q7(t.x,e.x),r=Q7(t.y,e.y);return Math.sqrt(n**2+r**2)}class Eme{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=XO(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,p=wht(d.offset,{x:0,y:0})>=3;if(!h&&!p)return;const{point:m}=d,{timestamp:g}=As;this.history.push({...m,timestamp:g});const{onStart:y,onMove:v}=this.handlers;h||(y&&y(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=KO(h,this.transformPagePoint),Jn.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:p,onSessionEnd:m,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=XO(d.type==="pointercancel"?this.lastMoveEventInfo:KO(h,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,y),m&&m(d,y)},!xB(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=dw(e),a=KO(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=As;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,XO(a,this.history)),this.removeListeners=uw(k0(this.contextWindow,"pointermove",this.handlePointerMove),k0(this.contextWindow,"pointerup",this.handlePointerUp),k0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),df(this.updatePoint)}}function KO(t,e){return e?{point:e(t.point)}:t}function Z7(t,e){return{x:t.x-e.x,y:t.y-e.y}}function XO({point:t},e){return{point:t,delta:Z7(t,$me(e)),offset:Z7(t,Sht(e)),velocity:Cht(e,.1)}}function Sht(t){return t[0]}function $me(t){return t[t.length-1]}function Cht(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=$me(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>gu(e)));)n--;if(!r)return{x:0,y:0};const i=yu(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const Ame=1e-4,Nht=1-Ame,_ht=1+Ame,Ime=.01,Tht=0-Ime,kht=0+Ime;function Mo(t){return t.max-t.min}function Eht(t,e,n){return Math.abs(t-e)<=n}function J7(t,e,n,r=.5){t.origin=r,t.originPoint=fr(e.min,e.max,t.origin),t.scale=Mo(n)/Mo(e),t.translate=fr(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Nht&&t.scale<=_ht||isNaN(t.scale))&&(t.scale=1),(t.translate>=Tht&&t.translate<=kht||isNaN(t.translate))&&(t.translate=0)}function E0(t,e,n,r){J7(t.x,e.x,n.x,r?r.originX:void 0),J7(t.y,e.y,n.y,r?r.originY:void 0)}function eq(t,e,n){t.min=n.min+e.min,t.max=t.min+Mo(e)}function $ht(t,e,n){eq(t.x,e.x,n.x),eq(t.y,e.y,n.y)}function tq(t,e,n){t.min=e.min-n.min,t.max=t.min+Mo(e)}function $0(t,e,n){tq(t.x,e.x,n.x),tq(t.y,e.y,n.y)}function Aht(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?fr(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?fr(n,t,r.max):Math.min(t,n)),t}function nq(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Iht(t,{top:e,left:n,bottom:r,right:s}){return{x:nq(t.x,n,s),y:nq(t.y,e,r)}}function rq(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Oht(t,e){return{x:rq(t.x,e.x),y:rq(t.y,e.y)}}function Pht(t,e){let n=.5;const r=Mo(t),s=Mo(e);return s>r?n=$y(e.min,e.max-r,t.min):r>s&&(n=$y(t.min,t.max-s,e.min)),Du(0,1,n)}function Rht(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const gM=.35;function Dht(t=gM){return t===!1?t=0:t===!0&&(t=gM),{x:sq(t,"left","right"),y:sq(t,"top","bottom")}}function sq(t,e,n){return{min:iq(t,e),max:iq(t,n)}}function iq(t,e){return typeof t=="number"?t:t[e]||0}const oq=()=>({translate:0,scale:1,origin:0,originPoint:0}),Km=()=>({x:oq(),y:oq()}),aq=()=>({min:0,max:0}),Ir=()=>({x:aq(),y:aq()});function Zo(t){return[t("x"),t("y")]}function Ome({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function jht({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Mht(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function YO(t){return t===void 0||t===1}function yM({scale:t,scaleX:e,scaleY:n}){return!YO(t)||!YO(e)||!YO(n)}function ch(t){return yM(t)||Pme(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Pme(t){return lq(t.x)||lq(t.y)}function lq(t){return t&&t!=="0%"}function uT(t,e,n){const r=t-n,s=e*r;return n+s}function cq(t,e,n,r,s){return s!==void 0&&(t=uT(t,s,r)),uT(t,n,r)+e}function vM(t,e=0,n=1,r,s){t.min=cq(t.min,e,n,r,s),t.max=cq(t.max,e,n,r,s)}function Rme(t,{x:e,y:n}){vM(t.x,e.translate,e.scale,e.originPoint),vM(t.y,n.translate,n.scale,n.originPoint)}const uq=.999999999999,dq=1.0000000000001;function Fht(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Ym(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Rme(t,o)),r&&ch(i.latestValues)&&Ym(t,i.latestValues))}e.x<dq&&e.x>uq&&(e.x=1),e.y<dq&&e.y>uq&&(e.y=1)}function Xm(t,e){t.min=t.min+e,t.max=t.max+e}function fq(t,e,n,r,s=.5){const i=fr(t.min,t.max,s);vM(t,e,n,i,r)}function Ym(t,e){fq(t.x,e.x,e.scaleX,e.scale,e.originX),fq(t.y,e.y,e.scaleY,e.scale,e.originY)}function Dme(t,e){return Ome(Mht(t.getBoundingClientRect(),e))}function Lht(t,e,n){const r=Dme(t,n),{scroll:s}=e;return s&&(Xm(r.x,s.offset.x),Xm(r.y,s.offset.y)),r}const jme=({current:t})=>t?t.ownerDocument.defaultView:null,Bht=new WeakMap;class zht{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ir(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(dw(u).point)},i=(u,d)=>{const{drag:h,dragPropagation:p,onDragStart:m}=this.getProps();if(h&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Rdt(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zo(y=>{let v=this.getAxisMotionValue(y).get()||0;if(hc.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const b=x.layout.layoutBox[y];b&&(v=Mo(b)*(parseFloat(v)/100))}}this.originPoint[y]=v}),m&&Jn.postRender(()=>m(u,d)),lM(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:m,onDrag:g}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:y}=d;if(p&&this.currentDirection===null){this.currentDirection=Vht(y),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",d.point,y),this.updateAxis("y",d.point,y),this.visualElement.render(),g&&g(u,d)},a=(u,d)=>this.stop(u,d),l=()=>Zo(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Eme(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:jme(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Jn.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!DC(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Aht(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&Hm(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=Iht(s.layoutBox,n):this.constraints=!1,this.elastic=Dht(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Zo(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Rht(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Hm(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Lht(r,s.root,this.visualElement.getTransformPagePoint());let o=Oht(s.layout.layoutBox,i);if(n){const a=n(jht(o));this.hasMutatedConstraints=!!a,a&&(o=Ome(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Zo(u=>{if(!DC(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const h=s?200:1e6,p=s?40:1e7,m={type:"inertia",velocity:r?e[u]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(u,m)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return lM(this.visualElement,e),r.start(IB(e,r,0,n,this.visualElement,!1))}stopAnimation(){Zo(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Zo(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Zo(n=>{const{drag:r}=this.getProps();if(!DC(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-fr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Hm(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Zo(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=Pht({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Zo(o=>{if(!DC(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(fr(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;Bht.set(this.visualElement,this);const e=this.visualElement.current,n=k0(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Hm(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Jn.read(r);const o=n1(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Zo(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=gM,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function DC(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Vht(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Wht extends Of{constructor(e){super(e),this.removeGroupControls=Io,this.removeListeners=Io,this.controls=new zht(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Io}unmount(){this.removeGroupControls(),this.removeListeners()}}const hq=t=>(e,n)=>{t&&Jn.postRender(()=>t(e,n))};class Uht extends Of{constructor(){super(...arguments),this.removePointerDownListener=Io}onPointerDown(e){this.session=new Eme(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:jme(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:hq(e),onStart:hq(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Jn.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=k0(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const D2={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pq(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const kx={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(vt.test(t))t=parseFloat(t);else return t;const n=pq(t,e.target.x),r=pq(t,e.target.y);return`${n}% ${r}%`}},Ght={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=ff.parse(t);if(s.length>5)return r;const i=ff.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=fr(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class Hht extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;hdt(qht),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),D2.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Jn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),oB.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Mme(t){const[e,n]=Eut(),r=N.useContext(bpe);return f.jsx(Hht,{...t,layoutGroup:r,switchLayoutGroup:N.useContext(kpe),isPresent:e,safeToRemove:n})}const qht={borderRadius:{...kx,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:kx,borderTopRightRadius:kx,borderBottomLeftRadius:kx,borderBottomRightRadius:kx,boxShadow:Ght};function Kht(t,e,n){const r=ri(t)?t:e1(t);return r.start(IB("",r,e,n)),r.animation}function Xht(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Yht=(t,e)=>t.depth-e.depth;class Qht{constructor(){this.children=[],this.isDirty=!1}add(e){bB(this.children,e),this.isDirty=!0}remove(e){wB(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Yht),this.isDirty=!1,this.children.forEach(e)}}function Zht(t,e){const n=pc.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(df(r),t(i-e))};return Jn.read(r,!0),()=>df(r)}const Fme=["TopLeft","TopRight","BottomLeft","BottomRight"],Jht=Fme.length,mq=t=>typeof t=="string"?parseFloat(t):t,gq=t=>typeof t=="number"||vt.test(t);function ept(t,e,n,r,s,i){s?(t.opacity=fr(0,n.opacity!==void 0?n.opacity:1,tpt(r)),t.opacityExit=fr(e.opacity!==void 0?e.opacity:1,0,npt(r))):i&&(t.opacity=fr(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<Jht;o++){const a=`border${Fme[o]}Radius`;let l=yq(e,a),c=yq(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||gq(l)===gq(c)?(t[a]=Math.max(fr(mq(l),mq(c),r),0),(hc.test(c)||hc.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=fr(e.rotate||0,n.rotate||0,r))}function yq(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const tpt=Lme(0,.5,rme),npt=Lme(.5,.95,Io);function Lme(t,e,n){return r=>r<t?0:r>e?1:n($y(t,e,r))}function vq(t,e){t.min=e.min,t.max=e.max}function qo(t,e){vq(t.x,e.x),vq(t.y,e.y)}function xq(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function bq(t,e,n,r,s){return t-=e,t=uT(t,1/n,r),s!==void 0&&(t=uT(t,1/s,r)),t}function rpt(t,e=0,n=1,r=.5,s,i=t,o=t){if(hc.test(e)&&(e=parseFloat(e),e=fr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=fr(i.min,i.max,r);t===i&&(a-=e),t.min=bq(t.min,e,n,a,s),t.max=bq(t.max,e,n,a,s)}function wq(t,e,[n,r,s],i,o){rpt(t,e[n],e[r],e[s],e.scale,i,o)}const spt=["x","scaleX","originX"],ipt=["y","scaleY","originY"];function Sq(t,e,n,r){wq(t.x,e,spt,n?n.x:void 0,r?r.x:void 0),wq(t.y,e,ipt,n?n.y:void 0,r?r.y:void 0)}function Cq(t){return t.translate===0&&t.scale===1}function Bme(t){return Cq(t.x)&&Cq(t.y)}function Nq(t,e){return t.min===e.min&&t.max===e.max}function opt(t,e){return Nq(t.x,e.x)&&Nq(t.y,e.y)}function _q(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function zme(t,e){return _q(t.x,e.x)&&_q(t.y,e.y)}function Tq(t){return Mo(t.x)/Mo(t.y)}function kq(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class apt{constructor(){this.members=[]}add(e){bB(this.members,e),e.scheduleRender()}remove(e){if(wB(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function lpt(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:h,skewX:p,skewY:m}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `),p&&(r+=`skewX(${p}deg) `),m&&(r+=`skewY(${m}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const uh={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Yx=typeof window<"u"&&window.MotionDebug!==void 0,QO=["","X","Y","Z"],cpt={visibility:"hidden"},Eq=1e3;let upt=0;function ZO(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Vme(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Ype(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Jn,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Vme(r)}function Wme({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=upt++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Yx&&(uh.totalNodes=uh.resolvedTargetDeltas=uh.recalculatedProjection=0),this.nodes.forEach(hpt),this.nodes.forEach(vpt),this.nodes.forEach(xpt),this.nodes.forEach(ppt),Yx&&window.MotionDebug.record(uh)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Qht)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new SB),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Xht(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Zht(h,250),D2.hasAnimatedSinceResize&&(D2.hasAnimatedSinceResize=!1,this.nodes.forEach(Aq))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||Npt,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=u.getProps(),x=!this.targetLayout||!zme(this.targetLayout,m)||p,b=!h&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||h&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,b);const S={...gB(g,"layout"),onPlay:y,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else h||Aq(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,df(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bpt),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Vme(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($q);return}this.isUpdating||this.nodes.forEach(gpt),this.isUpdating=!1,this.nodes.forEach(ypt),this.nodes.forEach(dpt),this.nodes.forEach(fpt),this.clearAllSnapshots();const a=pc.now();As.delta=Du(0,1e3/60,a-As.timestamp),As.timestamp=a,As.isProcessing=!0,VO.update.process(As),VO.preRender.process(As),VO.render.process(As),As.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,oB.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(mpt),this.sharedNodes.forEach(wpt)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Jn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Jn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ir(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Bme(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||ch(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),_pt(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Ir();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(Tpt))){const{scroll:u}=this.root;u&&(Xm(l.x,u.offset.x),Xm(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=Ir();if(qo(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&qo(l,o),Xm(l.x,d.offset.x),Xm(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=Ir();qo(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Ym(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),ch(u.latestValues)&&Ym(l,u.latestValues)}return ch(this.latestValues)&&Ym(l,this.latestValues),l}removeTransform(o){const a=Ir();qo(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!ch(c.latestValues))continue;yM(c.latestValues)&&c.updateSnapshot();const u=Ir(),d=c.measurePageBox();qo(u,d),Sq(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return ch(this.latestValues)&&Sq(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==As.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=As.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ir(),this.relativeTargetOrigin=Ir(),$0(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),qo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ir(),this.targetWithTransforms=Ir()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$ht(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qo(this.target,this.layout.layoutBox),Rme(this.target,this.targetDelta)):qo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ir(),this.relativeTargetOrigin=Ir(),$0(this.relativeTargetOrigin,this.target,p.target),qo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Yx&&uh.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||yM(this.parent.latestValues)||Pme(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===As.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;qo(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;Fht(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ir());const{target:m}=a;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(xq(this.prevProjectionDelta.x,this.projectionDelta.x),xq(this.prevProjectionDelta.y,this.projectionDelta.y)),E0(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!kq(this.projectionDelta.x,this.prevProjectionDelta.x)||!kq(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),Yx&&uh.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Km(),this.projectionDelta=Km(),this.projectionDeltaWithTransform=Km()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=Km();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=Ir(),p=l?l.source:void 0,m=this.layout?this.layout.source:void 0,g=p!==m,y=this.getStack(),v=!y||y.members.length<=1,x=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(Cpt));this.animationProgress=0;let b;this.mixTargetDelta=S=>{const w=S/1e3;Iq(d.x,o.x,w),Iq(d.y,o.y,w),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($0(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Spt(this.relativeTarget,this.relativeTargetOrigin,h,w),b&&opt(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Ir()),qo(b,this.relativeTarget)),g&&(this.animationValues=u,ept(u,c,this.latestValues,w,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(df(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Jn.update(()=>{D2.hasAnimatedSinceResize=!0,this.currentAnimation=Kht(0,Eq,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Eq),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&Ume(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Ir();const d=Mo(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const h=Mo(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}qo(a,l),Ym(a,u),E0(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new apt),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&ZO("z",o,c,this.animationValues);for(let u=0;u<QO.length;u++)ZO(`rotate${QO[u]}`,o,c,this.animationValues),ZO(`skew${QO[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return cpt;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=P2(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=P2(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ch(this.latestValues)&&(g.transform=u?u({},""):"none",this.hasProjected=!1),g}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=lpt(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x:p,y:m}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const g in iT){if(h[g]===void 0)continue;const{correct:y,applyTo:v}=iT[g],x=c.transform==="none"?h[g]:y(h[g],d);if(v){const b=v.length;for(let S=0;S<b;S++)c[v[S]]=x}else c[g]=x}return this.options.layoutId&&(c.pointerEvents=d===this?P2(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach($q),this.root.sharedNodes.clear()}}}function dpt(t){t.updateLayout()}function fpt(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?Zo(d=>{const h=o?n.measuredBox[d]:n.layoutBox[d],p=Mo(h);h.min=r[d].min,h.max=h.min+p}):Ume(i,n.layoutBox,r)&&Zo(d=>{const h=o?n.measuredBox[d]:n.layoutBox[d],p=Mo(r[d]);h.max=h.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const a=Km();E0(a,r,n.layoutBox);const l=Km();o?E0(l,t.applyTransform(s,!0),n.measuredBox):E0(l,r,n.layoutBox);const c=!Bme(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:p}=d;if(h&&p){const m=Ir();$0(m,n.layoutBox,h.layoutBox);const g=Ir();$0(g,r,p.layoutBox),zme(m,g)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=m,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function hpt(t){Yx&&uh.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ppt(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function mpt(t){t.clearSnapshot()}function $q(t){t.clearMeasurements()}function gpt(t){t.isLayoutDirty=!1}function ypt(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Aq(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function vpt(t){t.resolveTargetDelta()}function xpt(t){t.calcProjection()}function bpt(t){t.resetSkewAndRotation()}function wpt(t){t.removeLeadSnapshot()}function Iq(t,e,n){t.translate=fr(e.translate,0,n),t.scale=fr(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Oq(t,e,n,r){t.min=fr(e.min,n.min,r),t.max=fr(e.max,n.max,r)}function Spt(t,e,n,r){Oq(t.x,e.x,n.x,r),Oq(t.y,e.y,n.y,r)}function Cpt(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Npt={duration:.45,ease:[.4,0,.1,1]},Pq=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Rq=Pq("applewebkit/")&&!Pq("chrome/")?Math.round:Io;function Dq(t){t.min=Rq(t.min),t.max=Rq(t.max)}function _pt(t){Dq(t.x),Dq(t.y)}function Ume(t,e,n){return t==="position"||t==="preserve-aspect"&&!Eht(Tq(e),Tq(n),.2)}function Tpt(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const kpt=Wme({attachResizeListener:(t,e)=>n1(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),JO={current:void 0},Gme=Wme({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!JO.current){const t=new kpt({});t.mount(window),t.setOptions({layoutScroll:!0}),JO.current=t}return JO.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Ept={pan:{Feature:Uht},drag:{Feature:Wht,ProjectionNode:Gme,MeasureLayout:Mme}};function jq(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Jn.postRender(()=>i(e,dw(e)))}class $pt extends Of{mount(){const{current:e}=this.node;e&&(this.unmount=$dt(e,n=>(jq(this.node,n,"Start"),r=>jq(this.node,r,"End"))))}unmount(){}}class Apt extends Of{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=uw(n1(this.node.current,"focus",()=>this.onFocus()),n1(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Mq(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Jn.postRender(()=>i(e,dw(e)))}class Ipt extends Of{mount(){const{current:e}=this.node;e&&(this.unmount=Pdt(e,n=>(Mq(this.node,n,"Start"),(r,{success:s})=>Mq(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const xM=new WeakMap,eP=new WeakMap,Opt=t=>{const e=xM.get(t.target);e&&e(t)},Ppt=t=>{t.forEach(Opt)};function Rpt({root:t,...e}){const n=t||document;eP.has(n)||eP.set(n,{});const r=eP.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(Ppt,{root:t,...e})),r[s]}function Dpt(t,e,n){const r=Rpt(e);return xM.set(t,n),r.observe(t),()=>{xM.delete(t),r.unobserve(t)}}const jpt={some:0,all:1};class Mpt extends Of{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:jpt[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=c?u:d;h&&h(l)};return Dpt(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Fpt(e,n))&&this.startObserver()}unmount(){}}function Fpt({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Lpt={inView:{Feature:Mpt},tap:{Feature:Ipt},focus:{Feature:Apt},hover:{Feature:$pt}},Bpt={layout:{ProjectionNode:Gme,MeasureLayout:Mme}},bM={current:null},Hme={current:!1};function zpt(){if(Hme.current=!0,!!tB)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>bM.current=t.matches;t.addListener(e),e()}else bM.current=!1}const Vpt=[...yme,qs,ff],Wpt=t=>Vpt.find(gme(t)),Fq=new WeakMap;function Upt(t,e,n){for(const r in e){const s=e[r],i=n[r];if(ri(s))t.addValue(r,s);else if(ri(i))t.addValue(r,e1(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,e1(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Lq=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Gpt{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=EB,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=pc.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Jn.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=KE(n),this.isVariantNode=_pe(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const m=h[p];l[p]!==void 0&&ri(m)&&m.set(l[p],!1)}}mount(e){this.current=e,Fq.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Hme.current||zpt(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:bM.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Fq.delete(this.current),this.projection&&this.projection.unmount(),df(this.notifyUpdate),df(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Up.has(e),s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Jn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ay){const n=Ay[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ir()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Lq.length;r++){const s=Lq[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=Upt(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=e1(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(pme(s)||ime(s))?s=parseFloat(s):!Wpt(s)&&ff.test(n)&&(s=dme(e,n)),this.setBaseTarget(e,ri(s)?s.get():s)),ri(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const o=lB(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(s=o[e])}if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ri(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new SB),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class qme extends Gpt{constructor(){super(...arguments),this.KeyframeResolver=vme}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ri(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Hpt(t){return window.getComputedStyle(t)}class qpt extends qme{constructor(){super(...arguments),this.type="html",this.renderInstance=Rpe}readValueFromInstance(e,n){if(Up.has(n)){const r=kB(n);return r&&r.default||0}else{const r=Hpt(e),s=(Ipe(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Dme(e,n)}build(e,n,r){dB(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return mB(e,n,r)}}class Kpt extends qme{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ir}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Up.has(n)){const r=kB(n);return r&&r.default||0}return n=Dpe.has(n)?n:iB(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Fpe(e,n,r)}build(e,n,r){fB(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){jpe(e,n,r,s)}mount(e){this.isSVGTag=pB(e.tagName),super.mount(e)}}const Xpt=(t,e)=>aB(t)?new Kpt(e):new qpt(e,{allowProjection:t!==N.Fragment}),Ypt=Sdt({...xht,...Lpt,...Ept,...Bpt},Xpt),Jf=Mut(Ypt),jC=[{name:"العصري",id:"modern",colors:{primary:"hsl(142.1 76.2% 36.3%)",secondary:"hsl(217.2 91.2% 59.8%)",accent:"hsl(316.8 81.2% 43.8%)"},preview:"modern"},{name:"الكلاسيكي",id:"classic",colors:{primary:"hsl(215.3 98.9% 27.8%)",secondary:"hsl(221.2 83.2% 53.3%)",accent:"hsl(262.1 83.3% 57.8%)"},preview:"classic"},{name:"الأنيق",id:"elegant",colors:{primary:"hsl(200.4 15.3% 46.9%)",secondary:"hsl(171.2 76.5% 36.6%)",accent:"hsl(280.1 81.3% 40.8%)"},preview:"elegant"},{name:"النابض بالحياة",id:"vibrant",colors:{primary:"hsl(20.5 90.2% 48.2%)",secondary:"hsl(280.1 65.3% 70.8%)",accent:"hsl(346.8 77.2% 49.8%)"},preview:"vibrant"},{name:"الطبيعي",id:"natural",colors:{primary:"hsl(120.1 40.1% 39.2%)",secondary:"hsl(25.3 95.3% 52.8%)",accent:"hsl(160.1 84.1% 39.2%)"},preview:"natural"}],MC=[{name:"نوتو كوفي",id:"noto-kufi",family:"'Noto Kufi Arabic'",weight:"400,700",style:"modern",preview:"خط عربي حديث وأنيق"},{name:"القاهرة",id:"cairo",family:"'Cairo'",weight:"400,600,700",style:"elegant",preview:"خط عصري متناسق"},{name:"الأميري",id:"amiri",family:"'Amiri'",weight:"400,700",style:"traditional",preview:"خط كلاسيكي جميل"},{name:"تجوال",id:"tajawal",family:"'Tajawal'",weight:"400,500,700",style:"contemporary",preview:"خط عربي معاصر"},{name:"آي بي إم بلكس",id:"ibm-plex",family:"'IBM Plex Sans Arabic'",weight:"400,500,700",style:"modern",preview:"خط عصري للواجهات"},{name:"عارف رقعة",id:"aref-ruqaa",family:"'Aref Ruqaa'",weight:"400,700",style:"calligraphic",preview:"خط رقعة أصيل"},{name:"لطيف",id:"lateef",family:"'Lateef'",weight:"400,700",style:"readable",preview:"خط سهل القراءة"},{name:"ريم الكوفي",id:"reem-kufi",family:"'Reem Kufi'",weight:"400,500,700",style:"geometric",preview:"خط كوفي هندسي"}],tP={small:{base:14,scale:1.2},medium:{base:16,scale:1.25},large:{base:18,scale:1.333},xlarge:{base:20,scale:1.4}},Qpt=()=>{const{toast:t}=cs(),[e,n]=N.useState("theme"),[r,s]=N.useState(jC[0]),[i,o]=N.useState(MC[0]),[a,l]=N.useState("medium"),[c,u]=N.useState("system"),[d,h]=N.useState(!1),p=v=>{const x=window.document.documentElement;if(x.classList.remove("light","dark"),v==="system"){const b=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";x.classList.add(b)}else x.classList.add(v);x.style.setProperty("--current-appearance",v)};N.useEffect(()=>{const v=window.matchMedia("(prefers-color-scheme: dark)"),x=()=>{c==="system"&&p("system")};return v.addEventListener("change",x),()=>v.removeEventListener("change",x)},[c]),N.useEffect(()=>{(async()=>{try{const x=await wr("GET","/api/settings");if(x){const b=jC.find(w=>w.id===x.variant)||jC[0],S=MC.find(w=>w.id===x.fontStyle)||MC[0];s(b),o(S),l(x.fontSize||"medium"),u(x.appearance||"system"),p(x.appearance||"system")}}catch(x){console.error("Error loading settings:",x)}})()},[]);const m=async()=>{h(!0);try{const v={primary:r.colors.primary,variant:r.id,fontStyle:i.id,fontSize:a,appearance:c,radius:.5};await wr("POST","/api/settings",v)&&(document.documentElement.style.setProperty("--primary-color",r.colors.primary),document.documentElement.style.setProperty("--secondary-color",r.colors.secondary),document.documentElement.style.setProperty("--accent-color",r.colors.accent),document.documentElement.style.setProperty("--font-family",i.family),document.documentElement.style.setProperty("--font-size-base",`${tP[a].base}px`),p(c),t({title:"تم الحفظ",description:"تم حفظ إعدادات المظهر بنجاح"}))}catch(v){console.error("Error saving settings:",v),t({title:"خطأ",description:"فشل في حفظ التغييرات",variant:"destructive"})}finally{h(!1)}},g={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},y={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return f.jsxs(Le,{className:"w-full max-w-4xl mx-auto overflow-hidden",children:[f.jsx(Ye,{className:"space-y-2 pb-6",children:f.jsxs(Jf.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[f.jsx(Qe,{className:"text-2xl font-bold",children:"تخصيص المظهر"}),f.jsx(Kt,{className:"text-base",children:"قم بتخصيص مظهر التطبيق حسب تفضيلاتك"})]})}),f.jsxs(Ue,{className:"pb-8",children:[f.jsxs(Dc,{value:e,onValueChange:n,className:"space-y-6",children:[f.jsx(Al,{className:"grid w-full grid-cols-2 md:grid-cols-4 gap-2 mb-8",children:[{value:"theme",icon:f.jsx(WTe,{className:"w-4 h-4"}),label:"الألوان"},{value:"font",icon:f.jsx(ZTe,{className:"w-4 h-4"}),label:"الخطوط"},{value:"size",icon:f.jsx(xl,{className:"w-4 h-4"}),label:"الحجم"},{value:"appearance",icon:f.jsx(sU,{className:"w-4 h-4"}),label:"السطوع"}].map(v=>f.jsxs(Ln,{value:v.value,className:"flex items-center gap-2 py-2 px-4",children:[v.icon,f.jsx("span",{className:"hidden md:inline",children:v.label})]},v.value))}),f.jsxs(Jf.div,{variants:g,initial:"hidden",animate:"visible",children:[f.jsx(Cr,{value:"theme",children:f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:jC.map(v=>f.jsx(Jf.div,{variants:y,whileHover:{scale:1.02},whileTap:{scale:.98},children:f.jsxs(Le,{className:`cursor-pointer transition-all hover:shadow-lg ${r.id===v.id?"ring-2 ring-primary":""}`,onClick:()=>{s(v),document.documentElement.style.setProperty("--primary-color",v.colors.primary),document.documentElement.style.setProperty("--secondary-color",v.colors.secondary),document.documentElement.style.setProperty("--accent-color",v.colors.accent)},children:[f.jsx(Ye,{className:"p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(Qe,{className:"text-lg font-medium",children:v.name}),r.id===v.id&&f.jsx(Vd,{className:"w-5 h-5 text-primary"})]})}),f.jsx(Ue,{className:"p-4 pt-0",children:f.jsx("div",{className:"flex gap-2",children:Object.entries(v.colors).map(([x,b])=>f.jsx("div",{className:"w-8 h-8 rounded-full shadow-inner",style:{backgroundColor:b}},x))})})]})},v.id))})}),f.jsx(Cr,{value:"font",children:f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:MC.map(v=>f.jsx(Jf.div,{variants:y,whileHover:{scale:1.02},whileTap:{scale:.98},children:f.jsxs(Le,{className:`cursor-pointer transition-all hover:shadow-lg ${i.id===v.id?"ring-2 ring-primary":""}`,onClick:()=>{o(v),document.documentElement.style.setProperty("--font-family",v.family)},children:[f.jsx(Ye,{className:"p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(Qe,{className:"text-lg font-medium",children:v.name}),i.id===v.id&&f.jsx(Vd,{className:"w-5 h-5 text-primary"})]})}),f.jsx(Ue,{className:"p-4 pt-0",children:f.jsx("p",{className:"text-xl leading-relaxed",style:{fontFamily:v.family},children:v.preview})})]})},v.id))})}),f.jsx(Cr,{value:"size",children:f.jsxs(Le,{children:[f.jsxs(Ye,{children:[f.jsx(Qe,{className:"text-xl font-medium",children:"حجم الخط"}),f.jsx(Kt,{children:"اختر حجم الخط المناسب للعرض"})]}),f.jsx(Ue,{children:f.jsxs("div",{className:"space-y-8",children:[f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(tP).map(([v,x])=>f.jsx(Jf.div,{variants:y,whileHover:{scale:1.02},whileTap:{scale:.98},children:f.jsx(Le,{className:`cursor-pointer p-4 hover:shadow-lg ${a===v?"ring-2 ring-primary":""}`,onClick:()=>{l(v),document.documentElement.style.setProperty("--font-size-base",`${x.base}px`)},children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"mb-2 font-medium",style:{fontSize:`${x.base}px`},children:"نص تجريبي"}),f.jsxs("div",{className:"text-sm text-muted-foreground",children:[v==="small"&&"صغير",v==="medium"&&"متوسط",v==="large"&&"كبير",v==="xlarge"&&"كبير جداً"]})]})})},v))}),f.jsxs("div",{className:"space-y-4",children:[f.jsx(ot,{className:"text-lg font-medium",children:"معاينة الحجم"}),f.jsxs("div",{className:"space-y-4 p-6 bg-card rounded-lg",style:{fontSize:`${tP[a].base}px`,fontFamily:i.family},children:[f.jsx("h1",{className:"text-2xl font-bold",children:"عنوان رئيسي"}),f.jsx("h2",{className:"text-xl font-semibold",children:"عنوان فرعي"}),f.jsx("p",{className:"leading-relaxed",children:"هذا نص تجريبي لمعاينة حجم الخط المختار. يمكنك رؤية كيف سيظهر النص في مختلف العناصر."})]})]})]})})]})}),f.jsx(Cr,{value:"appearance",children:f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{id:"light",name:"فاتح",icon:sU},{id:"dark",name:"داكن",icon:zTe},{id:"system",name:"تلقائي",icon:BTe}].map(v=>f.jsx(Jf.div,{variants:y,whileHover:{scale:1.02},whileTap:{scale:.98},children:f.jsxs(Le,{className:`cursor-pointer transition-all hover:shadow-lg ${c===v.id?"ring-2 ring-primary":""}`,onClick:()=>{u(v.id),p(v.id)},children:[f.jsx(Ye,{className:"p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(Qe,{className:"text-lg font-medium",children:v.name}),c===v.id&&f.jsx(Vd,{className:"w-5 h-5 text-primary"})]})}),f.jsx(Ue,{className:"p-4 pt-0",children:f.jsx(v.icon,{className:"w-8 h-8"})})]})},v.id))})})]})]}),f.jsx(Jf.div,{className:"mt-8 flex justify-end",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:f.jsx($e,{onClick:m,disabled:d,className:"w-full md:w-auto",children:d?"جارِ الحفظ...":"حفظ التغييرات"})})]})]})},Bq="social_media_api_keys",wM={facebook:{title:"فيسبوك وانستغرام",description:"قم بإنشاء تطبيق على Facebook Developers وأدخل المفاتيح هنا",fields:{appId:{name:"appId",label:"App ID",type:"text",placeholder:"أدخل App ID"},appSecret:{name:"appSecret",label:"App Secret",type:"password",placeholder:"أدخل App Secret"}},instructions:["1. قم بزيارة https://developers.facebook.com","2. أنشئ تطبيقًا جديدًا","3. اختر نوع التطبيق 'Business'","4. قم بتفعيل منتجات Facebook Login و Instagram Graph API","5. أضف عنوان OAuth redirect URI: https://your-domain.com/api/auth/facebook/callback"]},twitter:{title:"تويتر",description:"قم بإنشاء تطبيق على Twitter Developer Portal وأدخل المفاتيح هنا",fields:{apiKey:{name:"apiKey",label:"API Key",type:"text",placeholder:"أدخل API Key"},apiSecret:{name:"apiSecret",label:"API Secret",type:"password",placeholder:"أدخل API Secret"}},instructions:["1. قم بزيارة https://developer.twitter.com","2. أنشئ مشروعًا جديدًا","3. قم بتفعيل صلاحيات OAuth 2.0","4. أضف عنوان OAuth redirect URI: https://your-domain.com/api/auth/twitter/callback"]},tiktok:{title:"تيك توك",description:"قم بإنشاء تطبيق على TikTok for Developers وأدخل المفاتيح هنا",fields:{clientKey:{name:"clientKey",label:"Client Key",type:"text",placeholder:"أدخل Client Key"},clientSecret:{name:"clientSecret",label:"Client Secret",type:"password",placeholder:"أدخل Client Secret"}},instructions:["1. قم بزيارة https://developers.tiktok.com","2. أنشئ تطبيقًا جديدًا","3. قم بتفعيل TikTok Login Kit","4. أضف عنوان OAuth redirect URI: https://your-domain.com/api/auth/tiktok/callback"]},snapchat:{title:"سناب شات",description:"قم بإنشاء تطبيق على Snap Kit Developer Portal وأدخل المفاتيح هنا",fields:{clientId:{name:"clientId",label:"Client ID",type:"text",placeholder:"أدخل Client ID"},clientSecret:{name:"clientSecret",label:"Client Secret",type:"password",placeholder:"أدخل Client Secret"}},instructions:["1. قم بزيارة https://kit.snapchat.com","2. أنشئ تطبيقًا جديدًا","3. قم بتفعيل Login Kit","4. أضف عنوان OAuth redirect URI: https://your-domain.com/api/auth/snapchat/callback"]},linkedin:{title:"لينكد إن",description:"قم بإنشاء تطبيق على LinkedIn Developers وأدخل المفاتيح هنا",fields:{clientId:{name:"clientId",label:"Client ID",type:"text",placeholder:"أدخل Client ID"},clientSecret:{name:"clientSecret",label:"Client Secret",type:"password",placeholder:"أدخل Client Secret"}},instructions:["1. قم بزيارة https://www.linkedin.com/developers","2. أنشئ تطبيقًا جديدًا","3. قم بتفعيل Sign In with LinkedIn","4. أضف عنوان OAuth redirect URI: https://your-domain.com/api/auth/linkedin/callback"]}},Zpt=q.object(Object.fromEntries(Object.entries(wM).map(([t,e])=>[t,q.object(Object.fromEntries(Object.entries(e.fields).map(([n,r])=>[n,q.string().min(1,`${r.label} مطلوب`)])))])));var OB="Collapsible",[Jpt,Kme]=$l(OB),[emt,PB]=Jpt(OB),Xme=N.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:o,...a}=t,[l=!1,c]=ka({prop:r,defaultProp:s,onChange:o});return f.jsx(emt,{scope:n,disabled:i,contentId:to(),open:l,onOpenToggle:N.useCallback(()=>c(u=>!u),[c]),children:f.jsx(ct.div,{"data-state":DB(l),"data-disabled":i?"":void 0,...a,ref:e})})});Xme.displayName=OB;var Yme="CollapsibleTrigger",Qme=N.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=PB(Yme,n);return f.jsx(ct.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":DB(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:Ie(t.onClick,s.onOpenToggle)})});Qme.displayName=Yme;var RB="CollapsibleContent",Zme=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=PB(RB,t.__scopeCollapsible);return f.jsx(co,{present:n||s.open,children:({present:i})=>f.jsx(tmt,{...r,ref:e,present:i})})});Zme.displayName=RB;var tmt=N.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=t,o=PB(RB,n),[a,l]=N.useState(r),c=N.useRef(null),u=Gt(e,c),d=N.useRef(0),h=d.current,p=N.useRef(0),m=p.current,g=o.open||a,y=N.useRef(g),v=N.useRef();return N.useEffect(()=>{const x=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(x)},[]),Rs(()=>{const x=c.current;if(x){v.current=v.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const b=x.getBoundingClientRect();d.current=b.height,p.current=b.width,y.current||(x.style.transitionDuration=v.current.transitionDuration,x.style.animationName=v.current.animationName),l(r)}},[o.open,r]),f.jsx(ct.div,{"data-state":DB(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...i,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":m?`${m}px`:void 0,...t.style},children:g&&s})});function DB(t){return t?"open":"closed"}var nmt=Xme,rmt=Qme,smt=Zme,Hu="Accordion",imt=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[jB,omt,amt]=O1(Hu),[QE,W9t]=$l(Hu,[amt,Kme]),MB=Kme(),Jme=F.forwardRef((t,e)=>{const{type:n,...r}=t,s=r,i=r;return f.jsx(jB.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?f.jsx(dmt,{...i,ref:e}):f.jsx(umt,{...s,ref:e})})});Jme.displayName=Hu;var[ege,lmt]=QE(Hu),[tge,cmt]=QE(Hu,{collapsible:!1}),umt=F.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},collapsible:i=!1,...o}=t,[a,l]=ka({prop:n,defaultProp:r,onChange:s});return f.jsx(ege,{scope:t.__scopeAccordion,value:a?[a]:[],onItemOpen:l,onItemClose:F.useCallback(()=>i&&l(""),[i,l]),children:f.jsx(tge,{scope:t.__scopeAccordion,collapsible:i,children:f.jsx(nge,{...o,ref:e})})})}),dmt=F.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...i}=t,[o=[],a]=ka({prop:n,defaultProp:r,onChange:s}),l=F.useCallback(u=>a((d=[])=>[...d,u]),[a]),c=F.useCallback(u=>a((d=[])=>d.filter(h=>h!==u)),[a]);return f.jsx(ege,{scope:t.__scopeAccordion,value:o,onItemOpen:l,onItemClose:c,children:f.jsx(tge,{scope:t.__scopeAccordion,collapsible:!0,children:f.jsx(nge,{...i,ref:e})})})}),[fmt,ZE]=QE(Hu),nge=F.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:s,orientation:i="vertical",...o}=t,a=F.useRef(null),l=Gt(a,e),c=omt(n),d=M1(s)==="ltr",h=Ie(t.onKeyDown,p=>{var T;if(!imt.includes(p.key))return;const m=p.target,g=c().filter(k=>{var $;return!(($=k.ref.current)!=null&&$.disabled)}),y=g.findIndex(k=>k.ref.current===m),v=g.length;if(y===-1)return;p.preventDefault();let x=y;const b=0,S=v-1,w=()=>{x=y+1,x>S&&(x=b)},C=()=>{x=y-1,x<b&&(x=S)};switch(p.key){case"Home":x=b;break;case"End":x=S;break;case"ArrowRight":i==="horizontal"&&(d?w():C());break;case"ArrowDown":i==="vertical"&&w();break;case"ArrowLeft":i==="horizontal"&&(d?C():w());break;case"ArrowUp":i==="vertical"&&C();break}const _=x%v;(T=g[_].ref.current)==null||T.focus()});return f.jsx(fmt,{scope:n,disabled:r,direction:s,orientation:i,children:f.jsx(jB.Slot,{scope:n,children:f.jsx(ct.div,{...o,"data-orientation":i,ref:l,onKeyDown:r?void 0:h})})})}),dT="AccordionItem",[hmt,FB]=QE(dT),rge=F.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...s}=t,i=ZE(dT,n),o=lmt(dT,n),a=MB(n),l=to(),c=r&&o.value.includes(r)||!1,u=i.disabled||t.disabled;return f.jsx(hmt,{scope:n,open:c,disabled:u,triggerId:l,children:f.jsx(nmt,{"data-orientation":i.orientation,"data-state":cge(c),...a,...s,ref:e,disabled:u,open:c,onOpenChange:d=>{d?o.onItemOpen(r):o.onItemClose(r)}})})});rge.displayName=dT;var sge="AccordionHeader",ige=F.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=ZE(Hu,n),i=FB(sge,n);return f.jsx(ct.h3,{"data-orientation":s.orientation,"data-state":cge(i.open),"data-disabled":i.disabled?"":void 0,...r,ref:e})});ige.displayName=sge;var SM="AccordionTrigger",oge=F.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=ZE(Hu,n),i=FB(SM,n),o=cmt(SM,n),a=MB(n);return f.jsx(jB.ItemSlot,{scope:n,children:f.jsx(rmt,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:i.triggerId,...a,...r,ref:e})})});oge.displayName=SM;var age="AccordionContent",lge=F.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=ZE(Hu,n),i=FB(age,n),o=MB(n);return f.jsx(smt,{role:"region","aria-labelledby":i.triggerId,"data-orientation":s.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});lge.displayName=age;function cge(t){return t?"open":"closed"}var pmt=Jme,mmt=rge,gmt=ige,uge=oge,dge=lge;const ymt=pmt,fge=N.forwardRef(({className:t,...e},n)=>f.jsx(mmt,{ref:n,className:pe("border-b",t),...e}));fge.displayName="AccordionItem";const hge=N.forwardRef(({className:t,children:e,...n},r)=>f.jsx(gmt,{className:"flex",children:f.jsxs(uge,{ref:r,className:pe("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,f.jsx(Y0,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));hge.displayName=uge.displayName;const pge=N.forwardRef(({className:t,children:e,...n},r)=>f.jsx(dge,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:f.jsx("div",{className:pe("pb-4 pt-0",t),children:e})}));pge.displayName=dge.displayName;function vmt(){const{toast:t}=cs(),[e,n]=N.useState(!1),r=bl({resolver:bc(Zpt),defaultValues:Object.fromEntries(Object.entries(wM).map(([i,o])=>[i,Object.fromEntries(Object.entries(o.fields).map(([a])=>[a,""]))]))});N.useEffect(()=>{const i=localStorage.getItem(Bq);if(i)try{const o=JSON.parse(i);r.reset(o)}catch(o){console.error("Error loading saved API keys:",o)}},[r]);async function s(i){n(!0);try{localStorage.setItem(Bq,JSON.stringify(i)),t({title:"تم الحفظ بنجاح",description:"تم حفظ مفاتيح API في المتصفح"})}catch(o){console.error("Error saving API keys:",o),t({title:"خطأ",description:o instanceof Error?o.message:"فشل في حفظ مفاتيح API",variant:"destructive"})}finally{n(!1)}}return f.jsx(Cc,{...r,children:f.jsxs("form",{onSubmit:r.handleSubmit(s),className:"space-y-6",children:[f.jsx(ymt,{type:"single",collapsible:!0,className:"w-full",children:Object.entries(wM).map(([i,o])=>f.jsxs(fge,{value:i,children:[f.jsx(hge,{children:o.title}),f.jsx(pge,{children:f.jsxs(Le,{className:"p-4",children:[f.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:o.description}),f.jsxs("div",{className:"space-y-4",children:[Object.entries(o.fields).map(([a,l])=>f.jsx(It,{control:r.control,name:`${i}.${a}`,render:({field:c})=>f.jsxs(kt,{children:[f.jsx(Et,{children:l.label}),f.jsx(Ot,{children:f.jsx(Oe,{type:l.type,placeholder:l.placeholder,...c,className:"font-mono"})}),f.jsx($t,{})]})},a)),f.jsxs("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:[f.jsx("h4",{className:"font-medium mb-2",children:"تعليمات الإعداد:"}),f.jsx("ul",{className:"text-sm space-y-1 list-none",children:o.instructions.map((a,l)=>f.jsx("li",{children:a},l))})]})]})]})})]},i))}),f.jsx($e,{type:"submit",disabled:e,className:"w-full",children:e?"جاري الحفظ...":"حفظ مفاتيح API"})]})})}function mge(){return f.jsxs("div",{className:"flex h-screen",children:[f.jsx("div",{className:"w-64 h-full",children:f.jsx(kc,{})}),f.jsx("main",{className:"flex-1 p-8 overflow-auto",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[f.jsx(qTe,{className:"h-6 w-6"}),f.jsx("h1",{className:"text-3xl font-bold",children:"الإعدادات"})]}),f.jsxs("div",{className:"grid gap-8 max-w-2xl",children:[f.jsxs(Le,{children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"مفاتيح API للمنصات الاجتماعية"}),f.jsx(Kt,{children:"قم بإضافة مفاتيح API الخاصة بكل منصة تواصل اجتماعي لتتمكن من الربط والتحكم في الحملات الإعلانية"})]}),f.jsx(Ue,{children:f.jsx(vmt,{})})]}),f.jsx(Qpt,{}),f.jsxs(Le,{children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"تغيير كلمة المرور"}),f.jsx(Kt,{children:"قم بتغيير كلمة المرور الخاصة بك. يجب إدخال كلمة المرور الحالية للتحقق."})]}),f.jsx(Ue,{children:f.jsx(Tut,{})})]})]})]})})]})}function gge(t,e){return function(){return t.apply(e,arguments)}}const{toString:xmt}=Object.prototype,{getPrototypeOf:LB}=Object,JE=(t=>e=>{const n=xmt.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Pl=t=>(t=t.toLowerCase(),e=>JE(e)===t),e$=t=>e=>typeof e===t,{isArray:Ov}=Array,r1=e$("undefined");function bmt(t){return t!==null&&!r1(t)&&t.constructor!==null&&!r1(t.constructor)&&Oo(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const yge=Pl("ArrayBuffer");function wmt(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&yge(t.buffer),e}const Smt=e$("string"),Oo=e$("function"),vge=e$("number"),t$=t=>t!==null&&typeof t=="object",Cmt=t=>t===!0||t===!1,j2=t=>{if(JE(t)!=="object")return!1;const e=LB(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Nmt=Pl("Date"),_mt=Pl("File"),Tmt=Pl("Blob"),kmt=Pl("FileList"),Emt=t=>t$(t)&&Oo(t.pipe),$mt=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Oo(t.append)&&((e=JE(t))==="formdata"||e==="object"&&Oo(t.toString)&&t.toString()==="[object FormData]"))},Amt=Pl("URLSearchParams"),[Imt,Omt,Pmt,Rmt]=["ReadableStream","Request","Response","Headers"].map(Pl),Dmt=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fw(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Ov(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function xge(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Eh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,bge=t=>!r1(t)&&t!==Eh;function CM(){const{caseless:t}=bge(this)&&this||{},e={},n=(r,s)=>{const i=t&&xge(e,s)||s;j2(e[i])&&j2(r)?e[i]=CM(e[i],r):j2(r)?e[i]=CM({},r):Ov(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&fw(arguments[r],n);return e}const jmt=(t,e,n,{allOwnKeys:r}={})=>(fw(e,(s,i)=>{n&&Oo(s)?t[i]=gge(s,n):t[i]=s},{allOwnKeys:r}),t),Mmt=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Fmt=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Lmt=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&LB(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Bmt=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},zmt=t=>{if(!t)return null;if(Ov(t))return t;let e=t.length;if(!vge(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Vmt=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&LB(Uint8Array)),Wmt=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},Umt=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Gmt=Pl("HTMLFormElement"),Hmt=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),zq=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),qmt=Pl("RegExp"),wge=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};fw(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},Kmt=t=>{wge(t,(e,n)=>{if(Oo(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Oo(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Xmt=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Ov(t)?r(t):r(String(t).split(e)),n},Ymt=()=>{},Qmt=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,nP="abcdefghijklmnopqrstuvwxyz",Vq="0123456789",Sge={DIGIT:Vq,ALPHA:nP,ALPHA_DIGIT:nP+nP.toUpperCase()+Vq},Zmt=(t=16,e=Sge.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function Jmt(t){return!!(t&&Oo(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const egt=t=>{const e=new Array(10),n=(r,s)=>{if(t$(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Ov(r)?[]:{};return fw(r,(o,a)=>{const l=n(o,s+1);!r1(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},tgt=Pl("AsyncFunction"),ngt=t=>t&&(t$(t)||Oo(t))&&Oo(t.then)&&Oo(t.catch),Cge=((t,e)=>t?setImmediate:e?((n,r)=>(Eh.addEventListener("message",({source:s,data:i})=>{s===Eh&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Eh.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Oo(Eh.postMessage)),rgt=typeof queueMicrotask<"u"?queueMicrotask.bind(Eh):typeof process<"u"&&process.nextTick||Cge,ce={isArray:Ov,isArrayBuffer:yge,isBuffer:bmt,isFormData:$mt,isArrayBufferView:wmt,isString:Smt,isNumber:vge,isBoolean:Cmt,isObject:t$,isPlainObject:j2,isReadableStream:Imt,isRequest:Omt,isResponse:Pmt,isHeaders:Rmt,isUndefined:r1,isDate:Nmt,isFile:_mt,isBlob:Tmt,isRegExp:qmt,isFunction:Oo,isStream:Emt,isURLSearchParams:Amt,isTypedArray:Vmt,isFileList:kmt,forEach:fw,merge:CM,extend:jmt,trim:Dmt,stripBOM:Mmt,inherits:Fmt,toFlatObject:Lmt,kindOf:JE,kindOfTest:Pl,endsWith:Bmt,toArray:zmt,forEachEntry:Wmt,matchAll:Umt,isHTMLForm:Gmt,hasOwnProperty:zq,hasOwnProp:zq,reduceDescriptors:wge,freezeMethods:Kmt,toObjectSet:Xmt,toCamelCase:Hmt,noop:Ymt,toFiniteNumber:Qmt,findKey:xge,global:Eh,isContextDefined:bge,ALPHABET:Sge,generateString:Zmt,isSpecCompliantForm:Jmt,toJSONObject:egt,isAsyncFn:tgt,isThenable:ngt,setImmediate:Cge,asap:rgt};function Rt(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}ce.inherits(Rt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ce.toJSONObject(this.config),code:this.code,status:this.status}}});const Nge=Rt.prototype,_ge={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{_ge[t]={value:t}});Object.defineProperties(Rt,_ge);Object.defineProperty(Nge,"isAxiosError",{value:!0});Rt.from=(t,e,n,r,s,i)=>{const o=Object.create(Nge);return ce.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Rt.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const sgt=null;function NM(t){return ce.isPlainObject(t)||ce.isArray(t)}function Tge(t){return ce.endsWith(t,"[]")?t.slice(0,-2):t}function Wq(t,e,n){return t?t.concat(e).map(function(s,i){return s=Tge(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function igt(t){return ce.isArray(t)&&!t.some(NM)}const ogt=ce.toFlatObject(ce,{},null,function(e){return/^is[A-Z]/.test(e)});function n$(t,e,n){if(!ce.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=ce.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,y){return!ce.isUndefined(y[g])});const r=n.metaTokens,s=n.visitor||u,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&ce.isSpecCompliantForm(e);if(!ce.isFunction(s))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(ce.isDate(m))return m.toISOString();if(!l&&ce.isBlob(m))throw new Rt("Blob is not supported. Use a Buffer instead.");return ce.isArrayBuffer(m)||ce.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,g,y){let v=m;if(m&&!y&&typeof m=="object"){if(ce.endsWith(g,"{}"))g=r?g:g.slice(0,-2),m=JSON.stringify(m);else if(ce.isArray(m)&&igt(m)||(ce.isFileList(m)||ce.endsWith(g,"[]"))&&(v=ce.toArray(m)))return g=Tge(g),v.forEach(function(b,S){!(ce.isUndefined(b)||b===null)&&e.append(o===!0?Wq([g],S,i):o===null?g:g+"[]",c(b))}),!1}return NM(m)?!0:(e.append(Wq(y,g,i),c(m)),!1)}const d=[],h=Object.assign(ogt,{defaultVisitor:u,convertValue:c,isVisitable:NM});function p(m,g){if(!ce.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(m),ce.forEach(m,function(v,x){(!(ce.isUndefined(v)||v===null)&&s.call(e,v,ce.isString(x)?x.trim():x,g,h))===!0&&p(v,g?g.concat(x):[x])}),d.pop()}}if(!ce.isObject(t))throw new TypeError("data must be an object");return p(t),e}function Uq(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function BB(t,e){this._pairs=[],t&&n$(t,this,e)}const kge=BB.prototype;kge.append=function(e,n){this._pairs.push([e,n])};kge.toString=function(e){const n=e?function(r){return e.call(this,r,Uq)}:Uq;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function agt(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ege(t,e,n){if(!e)return t;const r=n&&n.encode||agt;ce.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=ce.isURLSearchParams(e)?e.toString():new BB(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Gq{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ce.forEach(this.handlers,function(r){r!==null&&e(r)})}}const $ge={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lgt=typeof URLSearchParams<"u"?URLSearchParams:BB,cgt=typeof FormData<"u"?FormData:null,ugt=typeof Blob<"u"?Blob:null,dgt={isBrowser:!0,classes:{URLSearchParams:lgt,FormData:cgt,Blob:ugt},protocols:["http","https","file","blob","url","data"]},zB=typeof window<"u"&&typeof document<"u",_M=typeof navigator=="object"&&navigator||void 0,fgt=zB&&(!_M||["ReactNative","NativeScript","NS"].indexOf(_M.product)<0),hgt=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",pgt=zB&&window.location.href||"http://localhost",mgt=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:zB,hasStandardBrowserEnv:fgt,hasStandardBrowserWebWorkerEnv:hgt,navigator:_M,origin:pgt},Symbol.toStringTag,{value:"Module"})),ti={...mgt,...dgt};function ggt(t,e){return n$(t,new ti.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return ti.isNode&&ce.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function ygt(t){return ce.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function vgt(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function Age(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&ce.isArray(s)?s.length:o,l?(ce.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!ce.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&ce.isArray(s[o])&&(s[o]=vgt(s[o])),!a)}if(ce.isFormData(t)&&ce.isFunction(t.entries)){const n={};return ce.forEachEntry(t,(r,s)=>{e(ygt(r),s,n,0)}),n}return null}function xgt(t,e,n){if(ce.isString(t))try{return(e||JSON.parse)(t),ce.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(t)}const hw={transitional:$ge,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=ce.isObject(e);if(i&&ce.isHTMLForm(e)&&(e=new FormData(e)),ce.isFormData(e))return s?JSON.stringify(Age(e)):e;if(ce.isArrayBuffer(e)||ce.isBuffer(e)||ce.isStream(e)||ce.isFile(e)||ce.isBlob(e)||ce.isReadableStream(e))return e;if(ce.isArrayBufferView(e))return e.buffer;if(ce.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return ggt(e,this.formSerializer).toString();if((a=ce.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return n$(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),xgt(e)):e}],transformResponse:[function(e){const n=this.transitional||hw.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(ce.isResponse(e)||ce.isReadableStream(e))return e;if(e&&ce.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Rt.from(a,Rt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ti.classes.FormData,Blob:ti.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ce.forEach(["delete","get","head","post","put","patch"],t=>{hw.headers[t]={}});const bgt=ce.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wgt=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&bgt[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Hq=Symbol("internals");function Ex(t){return t&&String(t).trim().toLowerCase()}function M2(t){return t===!1||t==null?t:ce.isArray(t)?t.map(M2):String(t)}function Sgt(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Cgt=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function rP(t,e,n,r,s){if(ce.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!ce.isString(e)){if(ce.isString(r))return e.indexOf(r)!==-1;if(ce.isRegExp(r))return r.test(e)}}function Ngt(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function _gt(t,e){const n=ce.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class so{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const u=Ex(l);if(!u)throw new Error("header name must be a non-empty string");const d=ce.findKey(s,u);(!d||s[d]===void 0||c===!0||c===void 0&&s[d]!==!1)&&(s[d||l]=M2(a))}const o=(a,l)=>ce.forEach(a,(c,u)=>i(c,u,l));if(ce.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(ce.isString(e)&&(e=e.trim())&&!Cgt(e))o(wgt(e),n);else if(ce.isHeaders(e))for(const[a,l]of e.entries())i(l,a,r);else e!=null&&i(n,e,r);return this}get(e,n){if(e=Ex(e),e){const r=ce.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return Sgt(s);if(ce.isFunction(n))return n.call(this,s,r);if(ce.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Ex(e),e){const r=ce.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||rP(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=Ex(o),o){const a=ce.findKey(r,o);a&&(!n||rP(r,r[a],a,n))&&(delete r[a],s=!0)}}return ce.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||rP(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return ce.forEach(this,(s,i)=>{const o=ce.findKey(r,i);if(o){n[o]=M2(s),delete n[i];return}const a=e?Ngt(i):String(i).trim();a!==i&&delete n[i],n[a]=M2(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return ce.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&ce.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[Hq]=this[Hq]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=Ex(o);r[a]||(_gt(s,o),r[a]=!0)}return ce.isArray(e)?e.forEach(i):i(e),this}}so.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ce.reduceDescriptors(so.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});ce.freezeMethods(so);function sP(t,e){const n=this||hw,r=e||n,s=so.from(r.headers);let i=r.data;return ce.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function Ige(t){return!!(t&&t.__CANCEL__)}function Pv(t,e,n){Rt.call(this,t??"canceled",Rt.ERR_CANCELED,e,n),this.name="CanceledError"}ce.inherits(Pv,Rt,{__CANCEL__:!0});function Oge(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Rt("Request failed with status code "+n.status,[Rt.ERR_BAD_REQUEST,Rt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Tgt(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function kgt(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[i];o||(o=c),n[s]=l,r[s]=c;let d=i,h=0;for(;d!==s;)h+=n[d++],d=d%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const p=u&&c-u;return p?Math.round(h*1e3/p):void 0}}function Egt(t,e){let n=0,r=1e3/e,s,i;const o=(c,u=Date.now())=>{n=u,s=null,i&&(clearTimeout(i),i=null),t.apply(null,c)};return[(...c)=>{const u=Date.now(),d=u-n;d>=r?o(c,u):(s=c,i||(i=setTimeout(()=>{i=null,o(s)},r-d)))},()=>s&&o(s)]}const fT=(t,e,n=3)=>{let r=0;const s=kgt(50,250);return Egt(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-r,c=s(l),u=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(d)},n)},qq=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Kq=t=>(...e)=>ce.asap(()=>t(...e)),$gt=ti.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,ti.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(ti.origin),ti.navigator&&/(msie|trident)/i.test(ti.navigator.userAgent)):()=>!0,Agt=ti.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const o=[t+"="+encodeURIComponent(e)];ce.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),ce.isString(r)&&o.push("path="+r),ce.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Igt(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Ogt(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Pge(t,e){return t&&!Igt(e)?Ogt(t,e):e}const Xq=t=>t instanceof so?{...t}:t;function mp(t,e){e=e||{};const n={};function r(c,u,d,h){return ce.isPlainObject(c)&&ce.isPlainObject(u)?ce.merge.call({caseless:h},c,u):ce.isPlainObject(u)?ce.merge({},u):ce.isArray(u)?u.slice():u}function s(c,u,d,h){if(ce.isUndefined(u)){if(!ce.isUndefined(c))return r(void 0,c,d,h)}else return r(c,u,d,h)}function i(c,u){if(!ce.isUndefined(u))return r(void 0,u)}function o(c,u){if(ce.isUndefined(u)){if(!ce.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,d){if(d in e)return r(c,u);if(d in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,d)=>s(Xq(c),Xq(u),d,!0)};return ce.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=l[u]||s,h=d(t[u],e[u],u);ce.isUndefined(h)&&d!==a||(n[u]=h)}),n}const Rge=t=>{const e=mp({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=so.from(o),e.url=Ege(Pge(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(ce.isFormData(n)){if(ti.hasStandardBrowserEnv||ti.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(ti.hasStandardBrowserEnv&&(r&&ce.isFunction(r)&&(r=r(e)),r||r!==!1&&$gt(e.url))){const c=s&&i&&Agt.read(i);c&&o.set(s,c)}return e},Pgt=typeof XMLHttpRequest<"u",Rgt=Pgt&&function(t){return new Promise(function(n,r){const s=Rge(t);let i=s.data;const o=so.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,u,d,h,p,m;function g(){p&&p(),m&&m(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let y=new XMLHttpRequest;y.open(s.method.toUpperCase(),s.url,!0),y.timeout=s.timeout;function v(){if(!y)return;const b=so.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),w={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:b,config:t,request:y};Oge(function(_){n(_),g()},function(_){r(_),g()},w),y=null}"onloadend"in y?y.onloadend=v:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(v)},y.onabort=function(){y&&(r(new Rt("Request aborted",Rt.ECONNABORTED,t,y)),y=null)},y.onerror=function(){r(new Rt("Network Error",Rt.ERR_NETWORK,t,y)),y=null},y.ontimeout=function(){let S=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const w=s.transitional||$ge;s.timeoutErrorMessage&&(S=s.timeoutErrorMessage),r(new Rt(S,w.clarifyTimeoutError?Rt.ETIMEDOUT:Rt.ECONNABORTED,t,y)),y=null},i===void 0&&o.setContentType(null),"setRequestHeader"in y&&ce.forEach(o.toJSON(),function(S,w){y.setRequestHeader(w,S)}),ce.isUndefined(s.withCredentials)||(y.withCredentials=!!s.withCredentials),a&&a!=="json"&&(y.responseType=s.responseType),c&&([h,m]=fT(c,!0),y.addEventListener("progress",h)),l&&y.upload&&([d,p]=fT(l),y.upload.addEventListener("progress",d),y.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(u=b=>{y&&(r(!b||b.type?new Pv(null,t,y):b),y.abort(),y=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const x=Tgt(s.url);if(x&&ti.protocols.indexOf(x)===-1){r(new Rt("Unsupported protocol "+x+":",Rt.ERR_BAD_REQUEST,t));return}y.send(i||null)})},Dgt=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(c){if(!s){s=!0,a();const u=c instanceof Error?c:this.reason;r.abort(u instanceof Rt?u:new Pv(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,i(new Rt(`timeout ${e} of ms exceeded`,Rt.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),t=null)};t.forEach(c=>c.addEventListener("abort",i));const{signal:l}=r;return l.unsubscribe=()=>ce.asap(a),l}},jgt=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},Mgt=async function*(t,e){for await(const n of Fgt(t))yield*jgt(n,e)},Fgt=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},Yq=(t,e,n,r)=>{const s=Mgt(t,e);let i=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await s.next();if(c){a(),l.close();return}let d=u.byteLength;if(n){let h=i+=d;n(h)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},r$=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Dge=r$&&typeof ReadableStream=="function",Lgt=r$&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),jge=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Bgt=Dge&&jge(()=>{let t=!1;const e=new Request(ti.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),Qq=64*1024,TM=Dge&&jge(()=>ce.isReadableStream(new Response("").body)),hT={stream:TM&&(t=>t.body)};r$&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!hT[e]&&(hT[e]=ce.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Rt(`Response type '${e}' is not supported`,Rt.ERR_NOT_SUPPORT,r)})})})(new Response);const zgt=async t=>{if(t==null)return 0;if(ce.isBlob(t))return t.size;if(ce.isSpecCompliantForm(t))return(await new Request(ti.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(ce.isArrayBufferView(t)||ce.isArrayBuffer(t))return t.byteLength;if(ce.isURLSearchParams(t)&&(t=t+""),ce.isString(t))return(await Lgt(t)).byteLength},Vgt=async(t,e)=>{const n=ce.toFiniteNumber(t.getContentLength());return n??zgt(e)},Wgt=r$&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=Rge(t);c=c?(c+"").toLowerCase():"text";let p=Dgt([s,i&&i.toAbortSignal()],o),m;const g=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let y;try{if(l&&Bgt&&n!=="get"&&n!=="head"&&(y=await Vgt(u,r))!==0){let w=new Request(e,{method:"POST",body:r,duplex:"half"}),C;if(ce.isFormData(r)&&(C=w.headers.get("content-type"))&&u.setContentType(C),w.body){const[_,T]=qq(y,fT(Kq(l)));r=Yq(w.body,Qq,_,T)}}ce.isString(d)||(d=d?"include":"omit");const v="credentials"in Request.prototype;m=new Request(e,{...h,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:v?d:void 0});let x=await fetch(m);const b=TM&&(c==="stream"||c==="response");if(TM&&(a||b&&g)){const w={};["status","statusText","headers"].forEach(k=>{w[k]=x[k]});const C=ce.toFiniteNumber(x.headers.get("content-length")),[_,T]=a&&qq(C,fT(Kq(a),!0))||[];x=new Response(Yq(x.body,Qq,_,()=>{T&&T(),g&&g()}),w)}c=c||"text";let S=await hT[ce.findKey(hT,c)||"text"](x,t);return!b&&g&&g(),await new Promise((w,C)=>{Oge(w,C,{data:S,headers:so.from(x.headers),status:x.status,statusText:x.statusText,config:t,request:m})})}catch(v){throw g&&g(),v&&v.name==="TypeError"&&/fetch/i.test(v.message)?Object.assign(new Rt("Network Error",Rt.ERR_NETWORK,t,m),{cause:v.cause||v}):Rt.from(v,v&&v.code,t,m)}}),kM={http:sgt,xhr:Rgt,fetch:Wgt};ce.forEach(kM,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Zq=t=>`- ${t}`,Ugt=t=>ce.isFunction(t)||t===null||t===!1,Mge={getAdapter:t=>{t=ce.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!Ugt(n)&&(r=kM[(o=String(n)).toLowerCase()],r===void 0))throw new Rt(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(Zq).join(`
`):" "+Zq(i[0]):"as no adapter specified";throw new Rt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:kM};function iP(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Pv(null,t)}function Jq(t){return iP(t),t.headers=so.from(t.headers),t.data=sP.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Mge.getAdapter(t.adapter||hw.adapter)(t).then(function(r){return iP(t),r.data=sP.call(t,t.transformResponse,r),r.headers=so.from(r.headers),r},function(r){return Ige(r)||(iP(t),r&&r.response&&(r.response.data=sP.call(t,t.transformResponse,r.response),r.response.headers=so.from(r.response.headers))),Promise.reject(r)})}const Fge="1.7.9",s$={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{s$[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const eK={};s$.transitional=function(e,n,r){function s(i,o){return"[Axios v"+Fge+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new Rt(s(o," has been removed"+(n?" in "+n:"")),Rt.ERR_DEPRECATED);return n&&!eK[o]&&(eK[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};s$.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function Ggt(t,e,n){if(typeof t!="object")throw new Rt("options must be an object",Rt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new Rt("option "+i+" must be "+l,Rt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Rt("Unknown option "+i,Rt.ERR_BAD_OPTION)}}const F2={assertOptions:Ggt,validators:s$},Ml=F2.validators;class Hh{constructor(e){this.defaults=e,this.interceptors={request:new Gq,response:new Gq}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=mp(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&F2.assertOptions(r,{silentJSONParsing:Ml.transitional(Ml.boolean),forcedJSONParsing:Ml.transitional(Ml.boolean),clarifyTimeoutError:Ml.transitional(Ml.boolean)},!1),s!=null&&(ce.isFunction(s)?n.paramsSerializer={serialize:s}:F2.assertOptions(s,{encode:Ml.function,serialize:Ml.function},!0)),F2.assertOptions(n,{baseUrl:Ml.spelling("baseURL"),withXsrfToken:Ml.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&ce.merge(i.common,i[n.method]);i&&ce.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),n.headers=so.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let u,d=0,h;if(!l){const m=[Jq.bind(this),void 0];for(m.unshift.apply(m,a),m.push.apply(m,c),h=m.length,u=Promise.resolve(n);d<h;)u=u.then(m[d++],m[d++]);return u}h=a.length;let p=n;for(d=0;d<h;){const m=a[d++],g=a[d++];try{p=m(p)}catch(y){g.call(this,y);break}}try{u=Jq.call(this,p)}catch(m){return Promise.reject(m)}for(d=0,h=c.length;d<h;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=mp(this.defaults,e);const n=Pge(e.baseURL,e.url);return Ege(n,e.params,e.paramsSerializer)}}ce.forEach(["delete","get","head","options"],function(e){Hh.prototype[e]=function(n,r){return this.request(mp(r||{},{method:e,url:n,data:(r||{}).data}))}});ce.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(mp(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Hh.prototype[e]=n(),Hh.prototype[e+"Form"]=n(!0)});class VB{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Pv(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new VB(function(s){e=s}),cancel:e}}}function Hgt(t){return function(n){return t.apply(null,n)}}function qgt(t){return ce.isObject(t)&&t.isAxiosError===!0}const EM={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(EM).forEach(([t,e])=>{EM[e]=t});function Lge(t){const e=new Hh(t),n=gge(Hh.prototype.request,e);return ce.extend(n,Hh.prototype,e,{allOwnKeys:!0}),ce.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Lge(mp(t,s))},n}const Kn=Lge(hw);Kn.Axios=Hh;Kn.CanceledError=Pv;Kn.CancelToken=VB;Kn.isCancel=Ige;Kn.VERSION=Fge;Kn.toFormData=n$;Kn.AxiosError=Rt;Kn.Cancel=Kn.CanceledError;Kn.all=function(e){return Promise.all(e)};Kn.spread=Hgt;Kn.isAxiosError=qgt;Kn.mergeConfig=mp;Kn.AxiosHeaders=so;Kn.formToJSON=t=>Age(ce.isHTMLForm(t)?new FormData(t):t);Kn.getAdapter=Mge.getAdapter;Kn.HttpStatusCode=EM;Kn.default=Kn;const s1=I4,$M=O4,Kgt=P4,Bge=N.forwardRef(({className:t,...e},n)=>f.jsx(J1,{className:pe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));Bge.displayName=J1.displayName;const Xgt=Rp("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Oy=N.forwardRef(({side:t="right",className:e,children:n,...r},s)=>f.jsxs(Kgt,{children:[f.jsx(Bge,{}),f.jsxs(ew,{ref:s,className:pe(Xgt({side:t}),e),...r,children:[n,f.jsxs(PE,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[f.jsx(gk,{className:"h-4 w-4"}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Oy.displayName=ew.displayName;const i1=({className:t,...e})=>f.jsx("div",{className:pe("flex flex-col space-y-2 text-center sm:text-left",t),...e});i1.displayName="SheetHeader";const o1=N.forwardRef(({className:t,...e},n)=>f.jsx(tw,{ref:n,className:pe("text-lg font-semibold text-foreground",t),...e}));o1.displayName=tw.displayName;const pT=N.forwardRef(({className:t,...e},n)=>f.jsx(nw,{ref:n,className:pe("text-sm text-muted-foreground",t),...e}));pT.displayName=nw.displayName;const Ygt=({children:t,className:e})=>f.jsx("div",{className:`text-sm text-muted-foreground ${e||""}`,children:t}),Qgt=({children:t,className:e})=>f.jsx("div",{className:`flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 ${e||""}`,children:t});function Zgt(){N.useState("");const{toast:t}=cs(),e=A1(),n=N.useRef(null),[r,s]=N.useState(null),[i,o]=N.useState(null),[a,l]=N.useState(!1),[c,u]=N.useState(!1),{data:d,isLoading:h}=qt({queryKey:["installments"],queryFn:async()=>(await Kn.get("/api/installments")).data}),{data:p,isLoading:m}=qt({queryKey:["installment-payments",r==null?void 0:r.id],queryFn:async()=>r?(await Kn.get(`/api/installment-payments?installmentId=${r.id}`)).data:[],enabled:!!r}),g={amount:"",paymentDate:un(new Date,"yyyy-MM-dd"),notes:"",reset:function(){this.amount="",this.paymentDate=un(new Date,"yyyy-MM-dd"),this.notes=""}},y=zE.useReactToPrint({content:()=>n.current});function v(C){return(C==null?void 0:C.customerName)||"عميل غير معروف"}const x=Vr({mutationFn:async C=>(await Kn.post("/api/installments",C)).data,onSuccess:()=>{t({title:"تم إنشاء التقسيط بنجاح",variant:"default"}),e.invalidateQueries({queryKey:["installments"]})},onError:C=>{var _,T;t({title:"حدث خطأ أثناء إنشاء التقسيط",description:((T=(_=C.response)==null?void 0:_.data)==null?void 0:T.message)||"يرجى المحاولة مرة أخرى",variant:"destructive"})}}),b=Vr({mutationFn:async C=>(await Kn.patch(`/api/installments/${r.id}`,C)).data,onSuccess:()=>{t({title:"تم تحديث التقسيط بنجاح",variant:"default"}),u(!1),e.invalidateQueries({queryKey:["installments"]})},onError:C=>{var _,T;t({title:"حدث خطأ أثناء تحديث التقسيط",description:((T=(_=C.response)==null?void 0:_.data)==null?void 0:T.message)||"يرجى المحاولة مرة أخرى",variant:"destructive"})}}),S=Vr({mutationFn:async C=>(await Kn.post("/api/installment-payments",C)).data,onSuccess:()=>{t({title:"تم إضافة الدفعة بنجاح",variant:"default"}),g.reset(),l(!1),e.invalidateQueries({queryKey:["installment-payments",r==null?void 0:r.id]}),e.invalidateQueries({queryKey:["installments"]})},onError:C=>{var _,T;t({title:"حدث خطأ أثناء إضافة الدفعة",description:((T=(_=C.response)==null?void 0:_.data)==null?void 0:T.message)||"يرجى المحاولة مرة أخرى",variant:"destructive"})}}),w=Vr({mutationFn:async C=>(await Kn.delete(`/api/installment-payments/${C}`)).data,onSuccess:()=>{t({title:"تم حذف الدفعة بنجاح",variant:"default"}),o(null),e.invalidateQueries({queryKey:["installment-payments",r==null?void 0:r.id]}),e.invalidateQueries({queryKey:["installments"]})},onError:C=>{var _,T;t({title:"حدث خطأ أثناء حذف الدفعة",description:((T=(_=C.response)==null?void 0:_.data)==null?void 0:T.message)||"يرجى المحاولة مرة أخرى",variant:"destructive"})}});return f.jsxs("div",{className:"flex h-screen bg-gray-50",children:[f.jsx(kc,{}),f.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[f.jsx("header",{className:"h-14 flex items-center px-4 border-b bg-white",children:f.jsx("h1",{className:"text-lg font-semibold",children:"إدارة التقسيط"})}),f.jsxs("main",{className:"flex-1 overflow-y-auto p-4",children:[f.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[f.jsxs(Le,{children:[f.jsxs(Ye,{className:"pb-2",children:[f.jsx(Qe,{children:"إجمالي التقسيط"}),f.jsx(Kt,{children:"إجمالي المبلغ المتبقي في جميع التقسيطات النشطة"})]}),f.jsx(Ue,{children:f.jsx("div",{className:"text-2xl font-bold",children:h?f.jsx(Zs,{className:"h-5 w-5 animate-spin"}):f.jsxs("span",{children:[d==null?void 0:d.filter(C=>C.status==="active").reduce((C,_)=>C+_.remainingAmount,0).toLocaleString()," ","د.ع"]})})})]}),f.jsxs(Le,{children:[f.jsxs(Ye,{className:"pb-2",children:[f.jsx(Qe,{children:"التقسيطات النشطة"}),f.jsx(Kt,{children:"عدد التقسيطات التي لم يتم سدادها بالكامل"})]}),f.jsx(Ue,{children:f.jsx("div",{className:"text-2xl font-bold",children:h?f.jsx(Zs,{className:"h-5 w-5 animate-spin"}):f.jsx("span",{children:d==null?void 0:d.filter(C=>C.status==="active").length})})})]}),f.jsxs(Le,{children:[f.jsxs(Ye,{className:"pb-2",children:[f.jsx(Qe,{children:"التقسيطات المكتملة"}),f.jsx(Kt,{children:"عدد التقسيطات التي تم سدادها بالكامل"})]}),f.jsx(Ue,{children:f.jsx("div",{className:"text-2xl font-bold",children:h?f.jsx(Zs,{className:"h-5 w-5 animate-spin"}):f.jsx("span",{children:d==null?void 0:d.filter(C=>C.status==="completed").length})})})]})]}),f.jsxs("div",{className:"mt-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h2",{className:"text-lg font-semibold",children:"قائمة التقسيطات"}),f.jsxs(s1,{children:[f.jsx($M,{asChild:!0,children:f.jsxs($e,{children:[f.jsx(xl,{className:"mr-2 h-4 w-4"}),"تقسيط جديد"]})}),f.jsxs(Oy,{side:"right",className:"sm:max-w-md",children:[f.jsxs(i1,{children:[f.jsx(o1,{children:"إضافة تقسيط جديد"}),f.jsx(pT,{children:"أدخل معلومات التقسيط الجديد."})]}),f.jsxs("div",{className:"grid gap-4 py-4",children:[f.jsxs("div",{className:"grid gap-2",children:[f.jsx(ot,{htmlFor:"customerName",children:"اسم العميل"}),f.jsx(Oe,{id:"customerName",placeholder:"أدخل اسم العميل"})]}),f.jsxs("div",{className:"grid gap-2",children:[f.jsx(ot,{htmlFor:"totalAmount",children:"المبلغ الكلي"}),f.jsx(Oe,{id:"totalAmount",type:"number",placeholder:"0"})]}),f.jsxs("div",{className:"grid gap-2",children:[f.jsx(ot,{htmlFor:"initialPayment",children:"الدفعة الأولى"}),f.jsx(Oe,{id:"initialPayment",type:"number",placeholder:"0"})]}),f.jsxs("div",{className:"grid gap-2",children:[f.jsx(ot,{htmlFor:"installmentPeriod",children:"فترة التقسيط (بالأشهر)"}),f.jsx(Oe,{id:"installmentPeriod",type:"number",placeholder:"3"})]}),f.jsxs("div",{className:"grid gap-2",children:[f.jsx(ot,{htmlFor:"notes",children:"ملاحظات"}),f.jsx(Oe,{id:"notes",placeholder:"أي ملاحظات إضافية"})]}),f.jsx($e,{onClick:()=>{const C=document.getElementById("customerName").value,_=parseFloat(document.getElementById("totalAmount").value),T=parseFloat(document.getElementById("initialPayment").value)||0,k=parseInt(document.getElementById("installmentPeriod").value),$=document.getElementById("notes").value;if(!C||isNaN(_)||isNaN(k)||k<=0){t({title:"بيانات غير صالحة",description:"يرجى التأكد من إدخال اسم العميل والمبلغ الكلي وفترة التقسيط بشكل صحيح",variant:"destructive"});return}x.mutate({customerName:C,totalAmount:_,initialPayment:T,remainingAmount:_-T,installmentPeriod:k,startDate:new Date().toISOString(),status:"active",notes:$})},children:"إنشاء التقسيط"})]})]})]})]}),f.jsxs(Dc,{defaultValue:"active",children:[f.jsxs(Al,{className:"mb-4",children:[f.jsx(Ln,{value:"active",children:"التقسيطات النشطة"}),f.jsx(Ln,{value:"completed",children:"التقسيطات المكتملة"})]}),f.jsx(Cr,{value:"active",children:f.jsxs($a,{children:[f.jsx(Aa,{children:f.jsxs(dn,{children:[f.jsx(tt,{children:"العميل"}),f.jsx(tt,{children:"المبلغ الكلي"}),f.jsx(tt,{children:"المبلغ المتبقي"}),f.jsx(tt,{children:"تاريخ البدء"}),f.jsx(tt,{children:"فترة التقسيط"}),f.jsx(tt,{children:"إجراءات"})]})}),f.jsx(Ia,{children:h?f.jsx(dn,{children:f.jsx(We,{colSpan:6,className:"text-center py-4",children:f.jsx(Zs,{className:"h-6 w-6 animate-spin mx-auto"})})}):(d==null?void 0:d.filter(C=>C.status==="active").length)===0?f.jsx(dn,{children:f.jsx(We,{colSpan:6,className:"text-center py-4 text-muted-foreground",children:"لا توجد تقسيطات نشطة"})}):d==null?void 0:d.filter(C=>C.status==="active").map(C=>f.jsxs(dn,{children:[f.jsx(We,{children:v(C)}),f.jsxs(We,{children:[C.totalAmount.toLocaleString()," د.ع"]}),f.jsxs(We,{children:[C.remainingAmount.toLocaleString()," د.ع"]}),f.jsx(We,{children:un(new Date(C.startDate),"yyyy/MM/dd",{locale:xi})}),f.jsxs(We,{children:[C.installmentPeriod," شهر"]}),f.jsx(We,{children:f.jsx("div",{className:"flex gap-2",children:f.jsx($e,{variant:"outline",size:"sm",onClick:()=>{s(C),u(!0)},children:"عرض التفاصيل"})})})]},C.id))})]})}),f.jsx(Cr,{value:"completed",children:f.jsxs($a,{children:[f.jsx(Aa,{children:f.jsxs(dn,{children:[f.jsx(tt,{children:"العميل"}),f.jsx(tt,{children:"المبلغ الكلي"}),f.jsx(tt,{children:"تاريخ البدء"}),f.jsx(tt,{children:"إجراءات"})]})}),f.jsx(Ia,{children:h?f.jsx(dn,{children:f.jsx(We,{colSpan:4,className:"text-center py-4",children:f.jsx(Zs,{className:"h-6 w-6 animate-spin mx-auto"})})}):(d==null?void 0:d.filter(C=>C.status==="completed").length)===0?f.jsx(dn,{children:f.jsx(We,{colSpan:4,className:"text-center py-4 text-muted-foreground",children:"لا توجد تقسيطات مكتملة"})}):d==null?void 0:d.filter(C=>C.status==="completed").map(C=>f.jsxs(dn,{children:[f.jsx(We,{children:v(C)}),f.jsxs(We,{children:[C.totalAmount.toLocaleString()," د.ع"]}),f.jsx(We,{children:un(new Date(C.startDate),"yyyy/MM/dd",{locale:xi})}),f.jsx(We,{children:f.jsx("div",{className:"flex gap-2",children:f.jsx($e,{variant:"outline",size:"sm",onClick:()=>{s(C),u(!0)},children:"عرض التفاصيل"})})})]},C.id))})]})})]})]})]})]}),f.jsx(s1,{open:c,onOpenChange:u,children:f.jsxs(Oy,{side:"right",className:"sm:max-w-md",children:[f.jsx(i1,{children:f.jsx(o1,{children:"تفاصيل التقسيط"})}),r&&f.jsx(f.Fragment,{children:f.jsxs("div",{className:"mt-4 space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx("p",{className:"text-sm font-medium",children:"العميل"}),f.jsx("p",{children:v(r)})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("p",{className:"text-sm font-medium",children:"تاريخ البدء"}),f.jsx("p",{children:un(new Date(r.startDate),"yyyy/MM/dd",{locale:xi})})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("p",{className:"text-sm font-medium",children:"المبلغ الكلي"}),f.jsxs("p",{children:[r.totalAmount.toLocaleString()," د.ع"]})]}),r.status==="active"&&f.jsxs("div",{className:"space-y-1",children:[f.jsx("p",{className:"text-sm font-medium",children:"المبلغ المتبقي"}),f.jsxs("p",{children:[r.remainingAmount.toLocaleString()," د.ع"]})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("p",{className:"text-sm font-medium",children:"فترة التقسيط"}),f.jsxs("p",{children:[r.installmentPeriod," شهر"]})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("p",{className:"text-sm font-medium",children:"الحالة"}),f.jsx("p",{children:r.status==="active"?f.jsx("span",{className:"text-blue-600",children:"نشط"}):f.jsx("span",{className:"text-green-600",children:"مكتمل"})})]})]}),r.notes&&f.jsxs("div",{className:"pt-2 border-t",children:[f.jsx("p",{className:"text-sm font-medium",children:"ملاحظات"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:r.notes})]}),f.jsxs("div",{className:"pt-4 border-t",children:[f.jsxs("div",{className:"flex justify-between items-center mb-2",children:[f.jsx("h3",{className:"text-sm font-medium",children:"دفعات التقسيط"}),r.status==="active"&&f.jsxs(hl,{open:a,onOpenChange:l,children:[f.jsx(zp,{asChild:!0,children:f.jsxs($e,{size:"sm",variant:"outline",children:[f.jsx(xl,{className:"h-4 w-4 mr-1"})," إضافة دفعة"]})}),f.jsxs(wa,{className:"sm:max-w-[425px]",children:[f.jsxs(Sa,{children:[f.jsx(Ca,{children:"إضافة دفعة جديدة"}),f.jsx(Ygt,{children:"أدخل تفاصيل الدفعة الجديدة للتقسيط."})]}),f.jsxs("div",{className:"grid gap-4 py-4",children:[f.jsxs("div",{className:"grid gap-2",children:[f.jsx(ot,{htmlFor:"payment-amount",children:"المبلغ"}),f.jsx(Oe,{id:"payment-amount",type:"number",placeholder:"0",value:g.amount,onChange:C=>g.amount=C.target.value})]}),f.jsxs("div",{className:"grid gap-2",children:[f.jsx(ot,{htmlFor:"payment-date",children:"تاريخ الدفع"}),f.jsx(Oe,{id:"payment-date",type:"date",value:g.paymentDate,onChange:C=>g.paymentDate=C.target.value})]}),f.jsxs("div",{className:"grid gap-2",children:[f.jsx(ot,{htmlFor:"payment-notes",children:"ملاحظات"}),f.jsx(Oe,{id:"payment-notes",placeholder:"ملاحظات إضافية",value:g.notes,onChange:C=>g.notes=C.target.value})]})]}),f.jsx(Qgt,{children:f.jsx($e,{onClick:()=>{const C=parseFloat(g.amount);if(isNaN(C)||C<=0){t({title:"المبلغ غير صالح",description:"يرجى إدخال مبلغ صالح أكبر من الصفر",variant:"destructive"});return}if(C>r.remainingAmount){t({title:"المبلغ أكبر من المتبقي",description:`المبلغ المتبقي هو ${r.remainingAmount.toLocaleString()} د.ع`,variant:"destructive"});return}S.mutate({installmentId:r.id,amount:C,paymentDate:new Date(g.paymentDate).toISOString(),notes:g.notes})},children:"إضافة الدفعة"})})]})]})]}),m?f.jsx("div",{className:"flex justify-center py-4",children:f.jsx(Zs,{className:"h-6 w-6 animate-spin"})}):(p==null?void 0:p.length)===0?f.jsx("p",{className:"text-sm text-muted-foreground py-2",children:"لا توجد دفعات مسجلة"}):f.jsx("div",{className:"space-y-2",children:p==null?void 0:p.map(C=>f.jsxs("div",{className:"flex justify-between items-center border rounded-md p-2",children:[f.jsxs("div",{children:[f.jsxs("p",{className:"font-medium",children:[C.amount.toLocaleString()," د.ع"]}),f.jsx("p",{className:"text-xs text-muted-foreground",children:un(new Date(C.paymentDate),"yyyy/MM/dd",{locale:xi})}),C.notes&&f.jsx("p",{className:"text-xs",children:C.notes})]}),f.jsx($e,{variant:"ghost",size:"sm",onClick:()=>{window.confirm("هل أنت متأكد من حذف هذه الدفعة؟")&&w.mutate(C.id)},children:f.jsx(_re,{className:"h-4 w-4 text-red-500"})})]},C.id))})]}),f.jsx("div",{className:"flex gap-2 pt-4",children:f.jsxs($e,{variant:"outline",onClick:y,className:"flex-1",children:[f.jsx(wre,{className:"mr-2 h-4 w-4"})," طباعة"]})}),r.status==="active"&&f.jsx("div",{className:"pt-4",children:f.jsx($e,{className:"w-full",variant:"default",onClick:()=>{window.confirm("هل أنت متأكد من تغيير حالة التقسيط إلى مكتمل؟")&&b.mutate({status:"completed",remainingAmount:0})},children:"تعيين كمكتمل"})})]})})]})}),f.jsx("div",{className:"hidden",children:f.jsx("div",{ref:n,className:"p-8",children:r&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"text-center mb-6",children:[f.jsx("h1",{className:"text-2xl font-bold",children:"تقرير التقسيط"}),f.jsx("p",{className:"text-muted-foreground",children:un(new Date,"yyyy/MM/dd",{locale:xi})})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h2",{className:"text-xl font-bold mb-2",children:"معلومات العميل"}),f.jsxs("p",{children:["الاسم: ",v(r)]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h2",{className:"text-xl font-bold mb-2",children:"تفاصيل التقسيط"}),f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsxs("p",{children:["المبلغ الكلي: ",r.totalAmount.toLocaleString()," د.ع"]}),f.jsxs("p",{children:["المبلغ المتبقي: ",r.remainingAmount.toLocaleString()," د.ع"]}),f.jsxs("p",{children:["تاريخ البدء:"," ",un(new Date(r.startDate),"yyyy/MM/dd",{locale:xi})]}),f.jsxs("p",{children:["فترة التقسيط: ",r.installmentPeriod," شهر"]}),f.jsxs("p",{children:["الحالة:"," ",r.status==="active"?"نشط":"مكتمل"]})]})]}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold mb-2",children:"دفعات التقسيط"}),(p==null?void 0:p.length)===0?f.jsx("p",{children:"لا توجد دفعات مسجلة"}):f.jsxs("table",{className:"w-full border-collapse",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{className:"border border-gray-300 p-2 text-right",children:"التاريخ"}),f.jsx("th",{className:"border border-gray-300 p-2 text-right",children:"المبلغ"}),f.jsx("th",{className:"border border-gray-300 p-2 text-right",children:"ملاحظات"})]})}),f.jsx("tbody",{children:p==null?void 0:p.map(C=>f.jsxs("tr",{children:[f.jsx("td",{className:"border border-gray-300 p-2",children:un(new Date(C.paymentDate),"yyyy/MM/dd",{locale:xi})}),f.jsxs("td",{className:"border border-gray-300 p-2",children:[C.amount.toLocaleString()," د.ع"]}),f.jsx("td",{className:"border border-gray-300 p-2",children:C.notes||"-"})]},C.id))})]})]})]})})})]})}var Jgt="Separator",tK="horizontal",eyt=["horizontal","vertical"],zge=N.forwardRef((t,e)=>{const{decorative:n,orientation:r=tK,...s}=t,i=tyt(r)?r:tK,a=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return f.jsx(ct.div,{"data-orientation":i,...a,...s,ref:e})});zge.displayName=Jgt;function tyt(t){return eyt.includes(t)}var Vge=zge;const WB=N.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>f.jsx(Vge,{ref:s,decorative:n,orientation:e,className:pe("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));WB.displayName=Vge.displayName;const nK={facebook:{label:"فيسبوك",adManagerUrl:"https://www.facebook.com/adsmanager",color:"#1877F2"},instagram:{label:"انستغرام",adManagerUrl:"https://www.facebook.com/adsmanager",color:"#E1306C"},twitter:{label:"تويتر",adManagerUrl:"https://ads.twitter.com",color:"#1DA1F2"},linkedin:{label:"لينكد إن",adManagerUrl:"https://www.linkedin.com/campaignmanager",color:"#0A66C2"},snapchat:{label:"سناب شات",adManagerUrl:"https://ads.snapchat.com",color:"#FFFC00"},tiktok:{label:"تيك توك",adManagerUrl:"https://ads.tiktok.com",color:"#000000"}};function nyt(){cs();const[t,e]=N.useState(null);bl({resolver:bc($Ae),defaultValues:{name:"",description:"",platforms:[],budget:0,startDate:new Date,endDate:void 0}});const n=r=>{const s=nK[r];if(!s)return;const i=window.open(s.adManagerUrl,"مدير الإعلانات","popup=true,menubar=no,toolbar=no,location=no,status=no,width=1200,height=800");if(i){const o=(window.screen.width-1200)/2,a=(window.screen.height-800)/2;i.moveTo(o,a)}};return f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(nK).map(([r,s])=>f.jsxs("div",{className:"p-4 rounded-lg cursor-pointer transition-all duration-200 border-2",style:{backgroundColor:t===r?s.color:"transparent",borderColor:s.color,color:t===r?"white":"inherit"},onClick:()=>{e(r),n(r)},children:[f.jsx("h3",{className:"font-medium text-center",children:s.label}),f.jsx("p",{className:"text-sm text-center mt-2",children:t===r?"تم الاختيار":"اضغط للاختيار"})]},r))}),f.jsx(WB,{className:"my-4"}),f.jsx("div",{className:"text-center",children:f.jsx("p",{className:"text-sm text-muted-foreground",children:"اختر المنصة التي تريد إنشاء حملة إعلانية عليها"})})]})}function ryt(t){return Fr({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"},child:[]}]})(t)}function syt(t){return Fr({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"},child:[]}]})(t)}function iyt(t){return Fr({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"},child:[]}]})(t)}function oyt(t){return Fr({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.206.793c.99 0 4.347.276 5.93 3.821.529 1.193.403 3.219.299 4.847l-.003.06c-.012.18-.022.345-.03.51.075.045.203.09.401.09.3-.016.659-.12 1.033-.301.165-.088.344-.104.464-.104.182 0 .359.029.509.09.45.149.734.479.734.838.015.449-.39.839-1.213 1.168-.089.029-.209.075-.344.119-.45.135-1.139.36-1.333.81-.09.224-.061.524.12.868l.015.015c.06.136 1.526 3.475 4.791 4.014.255.044.435.27.42.509 0 .075-.015.149-.045.225-.24.569-1.273.988-3.146 1.271-.059.091-.12.375-.164.57-.029.179-.074.36-.134.553-.076.271-.27.405-.555.405h-.03c-.135 0-.313-.031-.538-.074-.36-.075-.765-.135-1.273-.135-.3 0-.599.015-.913.074-.6.104-1.123.464-1.723.884-.853.599-1.826 1.288-3.294 1.288-.06 0-.119-.015-.18-.015h-.149c-1.468 0-2.427-.675-3.279-1.288-.599-.42-1.107-.779-1.707-.884-.314-.045-.629-.074-.928-.074-.54 0-.958.089-1.272.149-.211.043-.391.074-.54.074-.374 0-.523-.224-.583-.42-.061-.192-.09-.389-.135-.567-.046-.181-.105-.494-.166-.57-1.918-.222-2.95-.642-3.189-1.226-.031-.063-.052-.15-.055-.225-.015-.243.165-.465.42-.509 3.264-.54 4.73-3.879 4.791-4.02l.016-.029c.18-.345.224-.645.119-.869-.195-.434-.884-.658-1.332-.809-.121-.029-.24-.074-.346-.119-1.107-.435-1.257-.93-1.197-1.273.09-.479.674-.793 1.168-.793.146 0 .27.029.383.074.42.194.789.3 1.104.3.234 0 .384-.06.465-.105l-.046-.569c-.098-1.626-.225-3.651.307-4.837C7.392 1.077 10.739.807 11.727.807l.419-.015h.06z"},child:[]}]})(t)}function ayt(t){return Fr({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"},child:[]}]})(t)}function lyt(t){return Fr({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"},child:[]}]})(t)}const cyt={facebook:ryt,instagram:syt,twitter:lyt,linkedin:iyt,snapchat:oyt,tiktok:ayt},rK={facebook:{label:"فيسبوك",authUrl:"https://www.facebook.com/login",color:"#1877F2",hoverColor:"#1559b7",textColor:"white"},instagram:{label:"انستغرام",authUrl:"https://www.instagram.com/accounts/login",color:"linear-gradient(45deg, #833AB4, #C13584, #E1306C, #FD1D1D)",hoverColor:"linear-gradient(45deg, #6d2e94, #a02d6e, #bc285a, #d41919)",textColor:"white"},twitter:{label:"تويتر",authUrl:"https://twitter.com/login",color:"#1DA1F2",hoverColor:"#1884c7",textColor:"white"},linkedin:{label:"لينكد إن",authUrl:"https://www.linkedin.com/login",color:"#0A66C2",hoverColor:"#084d94",textColor:"white"},snapchat:{label:"سناب شات",authUrl:"https://accounts.snapchat.com/accounts/login",color:"#FFFC00",hoverColor:"#e6e300",textColor:"black"},tiktok:{label:"تيك توك",authUrl:"https://www.tiktok.com/login",color:"linear-gradient(90deg, #00f2ea, #ff0050)",hoverColor:"linear-gradient(90deg, #00d6cf, #e6004a)",textColor:"white"}};function uyt(){cs(),N.useState({}),qt({queryKey:["/api/marketing/social-accounts"]});const t=async e=>{const n=rK[e];if(!n)return;const r=window.open(n.authUrl,"تسجيل الدخول","popup=true,menubar=no,toolbar=no,location=no,status=no,width=600,height=700");if(r){const s=(window.screen.width-600)/2,i=(window.screen.height-700)/2;r.moveTo(s,i)}};return f.jsxs(Le,{children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"حسابات التواصل الاجتماعي"}),f.jsx(Kt,{children:"قم بتسجيل الدخول إلى حساباتك على منصات التواصل الاجتماعي"})]}),f.jsx(Ue,{children:f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(rK).map(([e,n])=>{const r=cyt[e];return f.jsxs("div",{className:"flex flex-col items-center p-4 border rounded-lg space-y-4",style:{background:n.color,transition:"all 0.3s ease"},children:[f.jsx(r,{className:"h-8 w-8",style:{color:n.textColor}}),f.jsx("h3",{className:"font-medium",style:{color:n.textColor},children:n.label}),f.jsx($e,{className:"hover:opacity-90 transition-opacity",style:{background:"transparent",border:`2px solid ${n.textColor}`,color:n.textColor},onClick:()=>t(e),children:"تسجيل الدخول"})]},e)})})})]})}const dyt={default:{primary:"#8884d8",secondary:"#82ca9d",tertiary:"#ffc658"},warm:{primary:"#ff7300",secondary:"#ff9800",tertiary:"#ffc107"},cool:{primary:"#00bcd4",secondary:"#03a9f4",tertiary:"#2196f3"}};function fyt(){const[t,e]=N.useState("default"),[n,r]=N.useState(3e5),{data:s=[]}=qt({queryKey:["/api/marketing/platform-stats"],refetchInterval:n}),{data:i=[]}=qt({queryKey:["/api/marketing/historical-stats"],refetchInterval:n}),o=dyt[t];return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[f.jsxs(sr,{value:t,onValueChange:a=>e(a),children:[f.jsx(Yn,{className:"w-[180px]",children:f.jsx(ir,{placeholder:"اختر نمط الألوان"})}),f.jsxs(Qn,{children:[f.jsx(Je,{value:"default",children:"الألوان الافتراضية"}),f.jsx(Je,{value:"warm",children:"الألوان الدافئة"}),f.jsx(Je,{value:"cool",children:"الألوان الباردة"})]})]}),f.jsxs(sr,{value:n.toString(),onValueChange:a=>r(Number(a)),children:[f.jsx(Yn,{className:"w-[180px]",children:f.jsx(ir,{placeholder:"فترة التحديث"})}),f.jsxs(Qn,{children:[f.jsx(Je,{value:"30000",children:"كل 30 ثانية"}),f.jsx(Je,{value:"60000",children:"كل دقيقة"}),f.jsx(Je,{value:"300000",children:"كل 5 دقائق"})]})]})]}),f.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[f.jsxs(Le,{className:"w-full",children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"أداء المنصات"}),f.jsx(Kt,{children:"إحصائيات حسب كل منصة تواصل اجتماعي"})]}),f.jsx(Ue,{children:f.jsx("div",{className:"h-[300px] w-full",children:s.length===0?f.jsx("div",{className:"flex h-full items-center justify-center text-muted-foreground",children:"لا توجد بيانات للمنصات. قم بإضافة مفاتيح API للمنصات في الإعدادات."}):f.jsx(ro,{width:"100%",height:"100%",children:f.jsxs(Q1,{data:s,margin:{top:20,right:30,left:20,bottom:5},children:[f.jsx(si,{strokeDasharray:"3 3"}),f.jsx(_r,{dataKey:"platform"}),f.jsx(ar,{}),f.jsx(Tn,{}),f.jsx(os,{}),f.jsx(ls,{dataKey:"impressions",name:"الانطباعات",fill:o.primary}),f.jsx(ls,{dataKey:"engagements",name:"التفاعلات",fill:o.secondary})]})})})})]}),f.jsxs(Le,{className:"w-full",children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"تحليل الأداء عبر الزمن"}),f.jsx(Kt,{children:"تطور الأداء على مدار الوقت"})]}),f.jsx(Ue,{children:f.jsx("div",{className:"h-[300px] w-full",children:i.length===0?f.jsx("div",{className:"flex h-full items-center justify-center text-muted-foreground",children:"لا توجد بيانات تاريخية. سيتم عرض البيانات عند توفرها من المنصات."}):f.jsx(ro,{width:"100%",height:"100%",children:f.jsxs(N4,{data:i,margin:{top:20,right:30,left:20,bottom:5},children:[f.jsx(si,{strokeDasharray:"3 3"}),f.jsx(_r,{dataKey:"date"}),f.jsx(ar,{}),f.jsx(Tn,{}),f.jsx(os,{}),f.jsx(oi,{type:"monotone",dataKey:"impressions",name:"الانطباعات",stroke:o.primary,fill:o.primary,fillOpacity:.3}),f.jsx(oi,{type:"monotone",dataKey:"engagements",name:"التفاعلات",stroke:o.secondary,fill:o.secondary,fillOpacity:.3}),f.jsx(oi,{type:"monotone",dataKey:"spend",name:"الإنفاق",stroke:o.tertiary,fill:o.tertiary,fillOpacity:.3})]})})})})]}),f.jsxs(Le,{className:"md:col-span-2",children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"تحليل المنصات عبر الزمن"}),f.jsx(Kt,{children:"مقارنة أداء المنصات"})]}),f.jsx(Ue,{children:f.jsx("div",{className:"h-[400px] w-full",children:i.length===0?f.jsx("div",{className:"flex h-full items-center justify-center text-muted-foreground",children:"لا توجد بيانات كافية للتحليل التفصيلي."}):f.jsx(ro,{width:"100%",height:"100%",children:f.jsxs($E,{data:i,margin:{top:20,right:30,left:20,bottom:5},children:[f.jsx(si,{strokeDasharray:"3 3"}),f.jsx(_r,{dataKey:"date"}),f.jsx(ar,{}),f.jsx(Tn,{}),f.jsx(os,{}),f.jsx(ii,{type:"monotone",dataKey:"impressions",name:"الانطباعات",stroke:o.primary}),f.jsx(ii,{type:"monotone",dataKey:"engagements",name:"التفاعلات",stroke:o.secondary}),f.jsx(ii,{type:"monotone",dataKey:"spend",name:"الإنفاق",stroke:o.tertiary})]})})})})]})]})]})}function hyt(t,e=[]){let n=[];function r(i,o){const a=N.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:h,children:p,...m}=d,g=(h==null?void 0:h[t][l])||a,y=N.useMemo(()=>m,Object.values(m));return f.jsx(g.Provider,{value:y,children:p})}function u(d,h){const p=(h==null?void 0:h[t][l])||a,m=N.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=n.map(o=>N.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return N.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,pyt(s,...e)]}function pyt(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var UB="Progress",GB=100,[myt,U9t]=hyt(UB),[gyt,yyt]=myt(UB),Wge=N.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=vyt,...o}=t;(s||s===0)&&!sK(s)&&console.error(xyt(`${s}`,"Progress"));const a=sK(s)?s:GB;r!==null&&!iK(r,a)&&console.error(byt(`${r}`,"Progress"));const l=iK(r,a)?r:null,c=mT(l)?i(l,a):void 0;return f.jsx(gyt,{scope:n,value:l,max:a,children:f.jsx(ct.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":mT(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":Hge(l,a),"data-value":l??void 0,"data-max":a,...o,ref:e})})});Wge.displayName=UB;var Uge="ProgressIndicator",Gge=N.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=yyt(Uge,n);return f.jsx(ct.div,{"data-state":Hge(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});Gge.displayName=Uge;function vyt(t,e){return`${Math.round(t/e*100)}%`}function Hge(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function mT(t){return typeof t=="number"}function sK(t){return mT(t)&&!isNaN(t)&&t>0}function iK(t,e){return mT(t)&&!isNaN(t)&&t<=e&&t>=0}function xyt(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${GB}\`.`}function byt(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${GB} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var qge=Wge,wyt=Gge;const AM=N.forwardRef(({className:t,value:e,...n},r)=>f.jsx(qge,{ref:r,className:pe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:f.jsx(wyt,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));AM.displayName=qge.displayName;const Fl=(t,e)=>e>0?t/e*100:0,_s=(t,e)=>t.reduce((n,r)=>n+r[e],0),FC=(t,e)=>t.length>0?_s(t,e)/t.length:0;function Syt(){const[t,e]=N.useState(!0),[n,r]=N.useState(3e4),{data:s=[],isLoading:i,refetch:o}=qt({queryKey:["/api/marketing/platform-stats"],refetchInterval:t?n:!1}),l=(u=>[{title:"معدل المشاركة",icon:KTe,value:`${FC(u,"engagement").toFixed(2)}%`,change:"+12.3%",color:"text-blue-600",progress:Fl(_s(u,"engagement"),u.length*100)},{title:"معدل التفاعل",icon:MTe,value:`${FC(u,"interactions").toFixed(2)}%`,change:"+5.7%",color:"text-rose-500",progress:Fl(_s(u,"interactions"),u.length*100)},{title:"الوصول الكلي",icon:ML,value:_s(u,"reach").toLocaleString(),change:"+28.4%",color:"text-green-500",progress:Fl(_s(u,"reach"),u.length*1e3)},{title:"معدل الردود",icon:LTe,value:`${FC(u,"responseRate").toFixed(2)}%`,change:"+3.2%",color:"text-purple-500",progress:Fl(_s(u,"responseRate"),u.length*100)},{title:"الانطباعات",icon:vN,value:_s(u,"impressions").toLocaleString(),change:"0%",color:"text-cyan-500",progress:Fl(_s(u,"impressions"),u.length*1e4)},{title:"معدل النقر",icon:VTe,value:`${Fl(_s(u,"clicks"),_s(u,"impressions")).toFixed(2)}%`,change:"0%",color:"text-amber-500",progress:Fl(_s(u,"clicks"),_s(u,"impressions"))},{title:"تكلفة النقرة",icon:RL,value:`$${FC(u,"cpc").toFixed(2)}`,change:"0%",color:"text-emerald-500",progress:Fl(_s(u,"cpc"),u.length)},{title:"معدل التحويل",icon:YTe,value:`${Fl(_s(u,"conversions"),_s(u,"clicks")).toFixed(2)}%`,change:"0%",color:"text-indigo-500",progress:Fl(_s(u,"conversions"),_s(u,"clicks"))}])(s),c=["Facebook","Instagram","Twitter","LinkedIn","TikTok","Snapchat"];return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("h2",{className:"text-2xl font-bold",children:"مؤشرات الأداء"}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs($e,{variant:"outline",size:"sm",onClick:()=>e(!t),className:pe("gap-2",t&&"text-green-500 border-green-500"),children:[f.jsx(Sre,{className:pe("h-4 w-4",t&&"animate-spin")}),t?"إيقاف التحديث التلقائي":"تفعيل التحديث التلقائي"]}),f.jsx($e,{variant:"outline",size:"sm",onClick:()=>o(),disabled:i,children:"تحديث يدوي"})]})]}),f.jsx("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:l.map((u,d)=>f.jsxs(Le,{className:"overflow-hidden",children:[f.jsxs(Ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[f.jsx(Qe,{className:"text-sm font-medium",children:u.title}),f.jsx(u.icon,{className:`h-4 w-4 ${u.color}`})]}),f.jsx(Ue,{children:f.jsxs("div",{className:"space-y-2",children:[f.jsx("div",{className:"text-2xl font-bold",children:u.value}),f.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[f.jsx(xN,{className:"mr-1 h-3 w-3 text-green-500"}),u.change," من الشهر الماضي"]}),f.jsx(AM,{value:u.progress,className:"h-1"})]})})]},d))}),f.jsx("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:c.map(u=>f.jsxs(Le,{className:"overflow-hidden",children:[f.jsxs(Ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[f.jsx(Qe,{className:"text-sm font-medium",children:u}),f.jsx(jTe,{className:"h-4 w-4"})]}),f.jsx(Ue,{children:f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-sm text-muted-foreground",children:"النشاط"}),f.jsx(JTe,{className:"h-4 w-4 text-yellow-500"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-muted-foreground",children:"المشاهدات:"}),f.jsx("span",{className:"ml-1",children:Math.floor(Math.random()*1e3)})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-muted-foreground",children:"التفاعلات:"}),f.jsx("span",{className:"ml-1",children:Math.floor(Math.random()*100)})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-muted-foreground",children:"النقرات:"}),f.jsx("span",{className:"ml-1",children:Math.floor(Math.random()*50)})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-muted-foreground",children:"المشاركات:"}),f.jsx("span",{className:"ml-1",children:Math.floor(Math.random()*20)})]})]}),f.jsx(AM,{value:Math.random()*100,className:"h-1"}),f.jsxs("div",{className:"flex items-center justify-between text-xs",children:[f.jsx("span",{className:"text-muted-foreground",children:t?"تحديث تلقائي":"آخر تحديث منذ دقيقة"}),f.jsx(TTe,{className:pe("h-3 w-3",t?"text-green-500":"text-yellow-500")})]})]})})]},u))})]})}function Cyt(){const[t,e]=N.useState(!1),{data:n=[]}=qt({queryKey:["/api/marketing/campaigns"]});qt({queryKey:["/api/marketing/social-accounts"]});const r=n.filter(i=>i.status==="active"),{data:s={impressions:0,engagement:0,spend:0}}=qt({queryKey:["/api/marketing/social-stats"],refetchInterval:3e5});return f.jsxs("div",{className:"flex h-screen",children:[f.jsx("div",{className:"w-64 h-full",children:f.jsx(kc,{})}),f.jsx("main",{className:"flex-1 p-8 overflow-auto",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsxs("div",{className:"flex items-center justify-between mb-8",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(rU,{className:"h-6 w-6"}),f.jsx("h1",{className:"text-3xl font-bold",children:"التسويق"})]}),f.jsxs(hl,{open:t,onOpenChange:e,children:[f.jsx(zp,{asChild:!0,children:f.jsx($e,{children:"إنشاء حملة إعلانية جديدة"})}),f.jsxs(wa,{className:"sm:max-w-[600px]",children:[f.jsxs(Sa,{children:[f.jsx(Ca,{children:"إنشاء حملة إعلانية جديدة"}),f.jsx(mg,{children:"اختر المنصة التي تريد إنشاء حملة إعلانية عليها"})]}),f.jsx(nyt,{})]})]})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsx(uyt,{}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[f.jsxs(Le,{children:[f.jsxs(Ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[f.jsx(Qe,{className:"text-sm font-medium",children:"الحملات النشطة"}),f.jsx(rU,{className:"h-4 w-4 text-muted-foreground"})]}),f.jsx(Ue,{children:f.jsx("div",{className:"text-2xl font-bold",children:r.length})})]}),f.jsxs(Le,{children:[f.jsxs(Ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[f.jsx(Qe,{className:"text-sm font-medium",children:"إجمالي الانطباعات"}),f.jsx(ML,{className:"h-4 w-4 text-muted-foreground"})]}),f.jsx(Ue,{children:f.jsx("div",{className:"text-2xl font-bold",children:s.impressions.toLocaleString()})})]}),f.jsxs(Le,{children:[f.jsxs(Ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[f.jsx(Qe,{className:"text-sm font-medium",children:"معدل التفاعل"}),f.jsx(xN,{className:"h-4 w-4 text-muted-foreground"})]}),f.jsx(Ue,{children:f.jsxs("div",{className:"text-2xl font-bold",children:[(s.engagement*100).toFixed(1),"%"]})})]}),f.jsxs(Le,{children:[f.jsxs(Ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[f.jsx(Qe,{className:"text-sm font-medium",children:"إجمالي الإنفاق"}),f.jsx(RL,{className:"h-4 w-4 text-muted-foreground"})]}),f.jsx(Ue,{children:f.jsxs("div",{className:"text-2xl font-bold",children:["$",s.spend.toLocaleString()]})})]})]}),f.jsx(Syt,{}),f.jsx(fyt,{}),f.jsxs(Le,{children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"الحملات النشطة"}),f.jsx(Kt,{children:"قائمة بجميع الحملات الإعلانية النشطة حالياً"})]}),f.jsx(Ue,{children:f.jsx("div",{className:"space-y-4",children:r.map(i=>f.jsxs(Le,{children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:i.name}),f.jsx(Kt,{children:i.description})]}),f.jsx(Ue,{children:f.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"المنصات"}),f.jsx("p",{children:i.platforms.join(", ")})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"الميزانية"}),f.jsxs("p",{children:["$",Number(i.budget).toLocaleString()]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"تاريخ البدء"}),f.jsx("p",{children:new Date(i.startDate).toLocaleDateString()})]})]})})]},i.id))})})]})]})]})})]})}const Nyt=()=>f.jsx(Le,{children:f.jsxs(Ye,{children:[f.jsx(Qe,{children:"لا توجد بيانات"}),f.jsx(Kt,{children:"لم يتم تسجيل أي حركات مخزون بعد. عندما تبدأ في استخدام النظام، ستظهر هنا تقارير وإحصائيات مفصلة."})]})}),_yt=()=>f.jsx("div",{className:"flex h-[400px] items-center justify-center",children:f.jsx(Zs,{className:"h-8 w-8 animate-spin text-border"})});function Kge(){const[t,e]=N.useState("inventory"),[n,r]=N.useState(new Date),{data:s=[],isLoading:i}=qt({queryKey:["/api/inventory/transactions"]});return f.jsxs("div",{className:"flex h-screen",children:[f.jsx("div",{className:"w-64 h-full",children:f.jsx(kc,{})}),f.jsx("main",{className:"flex-1 p-8 overflow-auto",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsxs("div",{className:"flex items-center justify-between mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold",children:"التقارير"}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs(sr,{value:t,onValueChange:o=>e(o),children:[f.jsx(Yn,{className:"w-[200px]",children:f.jsx(ir,{placeholder:"اختر نوع التقرير"})}),f.jsxs(Qn,{children:[f.jsx(Je,{value:"inventory",children:"تقارير المخزون"}),f.jsx(Je,{value:"sales",children:"تقارير المبيعات"}),f.jsx(Je,{value:"marketing",children:"تقارير التسويق"})]})]}),f.jsxs(ov,{children:[f.jsx(av,{asChild:!0,children:f.jsxs($e,{variant:"outline",className:pe("w-[240px] justify-start text-right font-normal",!n&&"text-muted-foreground"),children:[f.jsx(Dp,{className:"ml-2 h-4 w-4"}),n?un(n,"PPP",{locale:xi}):f.jsx("span",{children:"اختر تاريخ"})]})}),f.jsx(jp,{className:"w-auto p-0",align:"start",children:f.jsx(cf,{mode:"single",selected:n,onSelect:r,initialFocus:!0})})]})]})]}),i?f.jsx(_yt,{}):s.length?f.jsx("div",{className:"grid gap-6",children:f.jsxs(Le,{children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"حركة المخزون"}),f.jsx(Kt,{children:"تحليل حركة الدخول والخروج للمخزون"})]}),f.jsx(Ue,{children:f.jsx("div",{className:"h-[400px]",children:f.jsx(ro,{width:"100%",height:"100%",children:f.jsxs($E,{data:s,children:[f.jsx(si,{strokeDasharray:"3 3"}),f.jsx(_r,{dataKey:"date",tickFormatter:o=>un(new Date(o),"MM/dd")}),f.jsx(ar,{}),f.jsx(Tn,{labelFormatter:o=>un(new Date(o),"PP")}),f.jsx(ii,{type:"monotone",dataKey:"quantity",name:"الكمية",stroke:"#8884d8"})]})})})})]})}):f.jsx(Nyt,{})]})})]})}const Py=N.forwardRef(({className:t,...e},n)=>f.jsx("textarea",{className:pe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Py.displayName="Textarea";function Tyt(){const{toast:t}=cs(),{user:e}=Sf(),[n,r]=N.useState(!1),[s,i]=N.useState(!1),{data:o=[],isLoading:a}=qt({queryKey:["/api/expenses/categories"]}),{data:l=[],isLoading:c}=qt({queryKey:["/api/expenses"]}),u=bl({resolver:bc(IAe),defaultValues:{name:"",description:"",budgetAmount:void 0}}),d=bl({resolver:bc(OAe),defaultValues:{description:"",amount:void 0,date:new Date,categoryId:void 0,isRecurring:!1,recurringPeriod:void 0,recurringDay:void 0,notes:""}}),h=Vr({mutationFn:async m=>{if(!e)throw new Error("يجب تسجيل الدخول أولاً");console.log("Submitting category data:",m);const g=await fetch("/api/expenses/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m.name,description:m.description||null,budgetAmount:m.budgetAmount?Number(m.budgetAmount):null,userId:e.id})});if(!g.ok){const y=await g.json();throw new Error(y.message||"فشل في إنشاء فئة المصروفات")}return g.json()},onSuccess:()=>{ms.invalidateQueries({queryKey:["/api/expenses/categories"]}),r(!1),u.reset(),t({title:"تم بنجاح",description:"تم إضافة فئة المصروفات الجديدة"})},onError:m=>{console.error("Error creating category:",m),t({title:"خطأ",description:m.message,variant:"destructive"})}}),p=Vr({mutationFn:async m=>{if(!e)throw new Error("يجب تسجيل الدخول أولاً");if(!m.categoryId)throw new Error("يجب اختيار فئة المصروف");const g=await fetch("/api/expenses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...m,userId:e.id})});if(!g.ok){const y=await g.json();throw new Error(y.message||"Failed to create expense")}return g.json()},onSuccess:()=>{ms.invalidateQueries({queryKey:["/api/expenses"]}),i(!1),d.reset(),t({title:"تم بنجاح",description:"تم إضافة المصروف الجديد"})},onError:m=>{t({title:"خطأ",description:m.message,variant:"destructive"})}});return a||c?f.jsxs("div",{className:"flex h-screen",children:[f.jsx("div",{className:"w-64 h-full",children:f.jsx(kc,{})}),f.jsx("main",{className:"flex-1 p-8",children:f.jsx("div",{className:"h-[400px] flex items-center justify-center",children:f.jsx(Zs,{className:"h-8 w-8 animate-spin"})})})]}):f.jsxs("div",{className:"flex h-screen",children:[f.jsx("div",{className:"w-64 h-full",children:f.jsx(kc,{})}),f.jsx("main",{className:"flex-1 p-8",children:f.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-3xl font-bold",children:"المصروفات"}),f.jsx("p",{className:"text-muted-foreground",children:"إدارة المصروفات وفئات المصروفات"})]}),f.jsxs("div",{className:"space-x-4 rtl:space-x-reverse",children:[f.jsxs(s1,{open:n,onOpenChange:r,children:[f.jsx($M,{asChild:!0,children:f.jsxs($e,{children:[f.jsx(xl,{className:"h-4 w-4 ml-2"}),"إضافة فئة مصروفات"]})}),f.jsxs(Oy,{children:[f.jsxs(i1,{children:[f.jsx(o1,{children:"إضافة فئة مصروفات جديدة"}),f.jsx(pT,{children:"قم بإدخال معلومات فئة المصروفات الجديدة"})]}),f.jsx("div",{className:"mt-6",children:f.jsx(Cc,{...u,children:f.jsxs("form",{onSubmit:u.handleSubmit(m=>h.mutate(m)),className:"space-y-4",children:[f.jsx(It,{control:u.control,name:"name",render:({field:m})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"اسم الفئة"}),f.jsx(Ot,{children:f.jsx(Oe,{...m,value:m.value||""})}),f.jsx($t,{})]})}),f.jsx(It,{control:u.control,name:"description",render:({field:m})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"الوصف"}),f.jsx(Ot,{children:f.jsx(Oe,{...m,value:m.value||""})}),f.jsx($t,{})]})}),f.jsx(It,{control:u.control,name:"budgetAmount",render:({field:m})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"الميزانية المخصصة"}),f.jsx(Ot,{children:f.jsx(Oe,{type:"number",...m,value:m.value||"",onChange:g=>m.onChange(g.target.valueAsNumber)})}),f.jsx($t,{})]})}),f.jsxs($e,{type:"submit",className:"w-full",disabled:h.isPending,children:[h.isPending&&f.jsx(Zs,{className:"h-4 w-4 animate-spin ml-2"}),"إضافة فئة جديدة"]})]})})})]})]}),f.jsxs(s1,{open:s,onOpenChange:i,children:[f.jsx($M,{asChild:!0,children:f.jsxs($e,{children:[f.jsx(xl,{className:"h-4 w-4 ml-2"}),"إضافة مصروف"]})}),f.jsxs(Oy,{children:[f.jsxs(i1,{children:[f.jsx(o1,{children:"إضافة مصروف جديد"}),f.jsx(pT,{children:"قم بإدخال معلومات المصروف الجديد"})]}),f.jsx("div",{className:"mt-6",children:f.jsx(Cc,{...d,children:f.jsxs("form",{onSubmit:d.handleSubmit(m=>p.mutate(m)),className:"space-y-4",children:[f.jsx(It,{control:d.control,name:"description",render:({field:m})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"الوصف"}),f.jsx(Ot,{children:f.jsx(Oe,{...m,value:m.value||""})}),f.jsx($t,{})]})}),f.jsx(It,{control:d.control,name:"amount",render:({field:m})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"المبلغ"}),f.jsx(Ot,{children:f.jsx(Oe,{type:"number",...m,value:m.value||"",onChange:g=>m.onChange(g.target.valueAsNumber)})}),f.jsx($t,{})]})}),f.jsx(It,{control:d.control,name:"categoryId",render:({field:m})=>{var g;return f.jsxs(kt,{children:[f.jsx(Et,{children:"الفئة"}),f.jsxs(sr,{value:(g=m.value)==null?void 0:g.toString(),onValueChange:y=>m.onChange(parseInt(y)),children:[f.jsx(Ot,{children:f.jsx(Yn,{children:f.jsx(ir,{placeholder:"اختر فئة المصروف"})})}),f.jsx(Qn,{children:o.map(y=>f.jsx(Je,{value:y.id.toString(),children:y.name},y.id))})]}),f.jsx($t,{})]})}}),f.jsx(It,{control:d.control,name:"date",render:({field:m})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"التاريخ"}),f.jsxs(ov,{children:[f.jsx(av,{asChild:!0,children:f.jsx(Ot,{children:f.jsxs($e,{variant:"outline",className:pe("w-full pl-3 text-right font-normal",!m.value&&"text-muted-foreground"),children:[m.value?un(m.value,"PPP",{locale:xi}):f.jsx("span",{children:"اختر تاريخ"}),f.jsx(Dp,{className:"mr-auto h-4 w-4"})]})})}),f.jsx(jp,{className:"w-auto p-0",align:"start",children:f.jsx(cf,{mode:"single",selected:m.value,onSelect:m.onChange,initialFocus:!0})})]}),f.jsx($t,{})]})}),f.jsx(It,{control:d.control,name:"notes",render:({field:m})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"ملاحظات"}),f.jsx(Ot,{children:f.jsx(Py,{...m,value:m.value||""})}),f.jsx($t,{})]})}),f.jsxs($e,{type:"submit",className:"w-full",disabled:p.isPending,children:[p.isPending&&f.jsx(Zs,{className:"h-4 w-4 animate-spin ml-2"}),"إضافة مصروف جديد"]})]})})})]})]})]})]}),f.jsxs("div",{className:"grid gap-6",children:[f.jsxs(Le,{children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"فئات المصروفات"}),f.jsx(Kt,{children:o.length===0?"لم يتم إضافة أي فئات مصروفات بعد":`${o.length} فئات مصروفات`})]}),f.jsx(Ue,{children:o.length===0?f.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"لا توجد فئات مصروفات. قم بإضافة فئة جديدة باستخدام الزر أعلاه."}):f.jsx("div",{className:"divide-y",children:o.map(m=>f.jsxs("div",{className:"py-4 flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-medium",children:m.name}),m.description&&f.jsx("p",{className:"text-sm text-muted-foreground",children:m.description})]}),m.budgetAmount&&f.jsxs("div",{className:"text-lg font-semibold",children:[Number(m.budgetAmount).toLocaleString()," د.ع"]})]},m.id))})})]}),f.jsxs(Le,{children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"المصروفات الحالية"}),f.jsx(Kt,{children:l.length===0?"لم يتم تسجيل أي مصروفات بعد":`${l.length} مصروفات مسجلة`})]}),f.jsx(Ue,{children:l.length===0?f.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"لا توجد مصروفات. قم بإضافة مصروف جديد باستخدام الزر أعلاه."}):f.jsx("div",{className:"divide-y",children:l.map(m=>f.jsxs("div",{className:"py-4 flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-medium",children:m.description}),f.jsx("p",{className:"text-sm text-muted-foreground",children:un(new Date(m.date),"PPP",{locale:xi})})]}),f.jsxs("div",{className:"text-lg font-semibold",children:[Number(m.amount).toLocaleString()," د.ع"]})]},m.id))})})]})]})]})})]})}const oP=768;function kyt(){const[t,e]=N.useState(void 0);return N.useEffect(()=>{const n=window.matchMedia(`(max-width: ${oP-1}px)`),r=()=>{e(window.innerWidth<oP)};return n.addEventListener("change",r),e(window.innerWidth<oP),()=>n.removeEventListener("change",r)},[]),!!t}function oK({className:t,...e}){return f.jsx("div",{className:pe("animate-pulse rounded-md bg-muted",t),...e})}var[i$,G9t]=$l("Tooltip",[Cf]),o$=Cf(),Xge="TooltipProvider",Eyt=700,IM="tooltip.open",[$yt,HB]=i$(Xge),Yge=t=>{const{__scopeTooltip:e,delayDuration:n=Eyt,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,[o,a]=N.useState(!0),l=N.useRef(!1),c=N.useRef(0);return N.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),f.jsx($yt,{scope:e,isOpenDelayed:o,delayDuration:n,onOpen:N.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:N.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:N.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};Yge.displayName=Xge;var a$="Tooltip",[Ayt,l$]=i$(a$),Qge=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=t,l=HB(a$,t.__scopeTooltip),c=o$(e),[u,d]=N.useState(null),h=to(),p=N.useRef(0),m=o??l.disableHoverableContent,g=a??l.delayDuration,y=N.useRef(!1),[v=!1,x]=ka({prop:r,defaultProp:s,onChange:_=>{_?(l.onOpen(),document.dispatchEvent(new CustomEvent(IM))):l.onClose(),i==null||i(_)}}),b=N.useMemo(()=>v?y.current?"delayed-open":"instant-open":"closed",[v]),S=N.useCallback(()=>{window.clearTimeout(p.current),y.current=!1,x(!0)},[x]),w=N.useCallback(()=>{window.clearTimeout(p.current),x(!1)},[x]),C=N.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{y.current=!0,x(!0)},g)},[g,x]);return N.useEffect(()=>()=>window.clearTimeout(p.current),[]),f.jsx($k,{...c,children:f.jsx(Ayt,{scope:e,contentId:h,open:v,stateAttribute:b,trigger:u,onTriggerChange:d,onTriggerEnter:N.useCallback(()=>{l.isOpenDelayed?C():S()},[l.isOpenDelayed,C,S]),onTriggerLeave:N.useCallback(()=>{m?w():window.clearTimeout(p.current)},[w,m]),onOpen:S,onClose:w,disableHoverableContent:m,children:n})})};Qge.displayName=a$;var OM="TooltipTrigger",Zge=N.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=l$(OM,n),i=HB(OM,n),o=o$(n),a=N.useRef(null),l=Gt(e,a,s.onTriggerChange),c=N.useRef(!1),u=N.useRef(!1),d=N.useCallback(()=>c.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),f.jsx(B1,{asChild:!0,...o,children:f.jsx(ct.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Ie(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ie(t.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:Ie(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Ie(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Ie(t.onBlur,s.onClose),onClick:Ie(t.onClick,s.onClose)})})});Zge.displayName=OM;var Iyt="TooltipPortal",[H9t,Oyt]=i$(Iyt,{forceMount:void 0}),Ry="TooltipContent",Jge=N.forwardRef((t,e)=>{const n=Oyt(Ry,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=l$(Ry,t.__scopeTooltip);return f.jsx(co,{present:r||o.open,children:o.disableHoverableContent?f.jsx(eye,{side:s,...i,ref:e}):f.jsx(Pyt,{side:s,...i,ref:e})})}),Pyt=N.forwardRef((t,e)=>{const n=l$(Ry,t.__scopeTooltip),r=HB(Ry,t.__scopeTooltip),s=N.useRef(null),i=Gt(e,s),[o,a]=N.useState(null),{trigger:l,onClose:c}=n,u=s.current,{onPointerInTransitChange:d}=r,h=N.useCallback(()=>{a(null),d(!1)},[d]),p=N.useCallback((m,g)=>{const y=m.currentTarget,v={x:m.clientX,y:m.clientY},x=Myt(v,y.getBoundingClientRect()),b=Fyt(v,x),S=Lyt(g.getBoundingClientRect()),w=zyt([...b,...S]);a(w),d(!0)},[d]);return N.useEffect(()=>()=>h(),[h]),N.useEffect(()=>{if(l&&u){const m=y=>p(y,u),g=y=>p(y,l);return l.addEventListener("pointerleave",m),u.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",m),u.removeEventListener("pointerleave",g)}}},[l,u,p,h]),N.useEffect(()=>{if(o){const m=g=>{const y=g.target,v={x:g.clientX,y:g.clientY},x=(l==null?void 0:l.contains(y))||(u==null?void 0:u.contains(y)),b=!Byt(v,o);x?h():b&&(h(),c())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,u,o,c,h]),f.jsx(eye,{...t,ref:i})}),[Ryt,Dyt]=i$(a$,{isInside:!1}),eye=N.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=l$(Ry,n),c=o$(n),{onClose:u}=l;return N.useEffect(()=>(document.addEventListener(IM,u),()=>document.removeEventListener(IM,u)),[u]),N.useEffect(()=>{if(l.trigger){const d=h=>{const p=h.target;p!=null&&p.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),f.jsx(Pp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:f.jsxs(Ak,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[f.jsx($L,{children:r}),f.jsx(Ryt,{scope:n,isInside:!0,children:f.jsx(rTe,{id:l.contentId,role:"tooltip",children:s||r})})]})})});Jge.displayName=Ry;var tye="TooltipArrow",jyt=N.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=o$(n);return Dyt(tye,n).isInside?null:f.jsx(Ik,{...s,...r,ref:e})});jyt.displayName=tye;function Myt(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Fyt(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Lyt(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function Byt(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function zyt(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Vyt(e)}function Vyt(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Wyt=Yge,Uyt=Qge,Gyt=Zge,nye=Jge;const rye=Wyt,sye=Uyt,iye=Gyt,qB=N.forwardRef(({className:t,sideOffset:e=4,...n},r)=>f.jsx(nye,{ref:r,sideOffset:e,className:pe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));qB.displayName=nye.displayName;const Hyt="sidebar:state",qyt=60*60*24*7,Kyt="16rem",Xyt="18rem",Yyt="3rem",Qyt="b",KB=N.createContext(void 0);function a1(){const t=N.useContext(KB);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}function aK({children:t}){const[e,n]=N.useState(!0);return f.jsx(KB.Provider,{value:{expanded:e,setExpanded:n},children:t})}const Zyt=N.forwardRef(({defaultOpen:t=!0,open:e,onOpenChange:n,className:r,style:s,children:i,...o},a)=>{const l=kyt(),[c,u]=N.useState(!1),[d,h]=N.useState(t),p=e??d,m=N.useCallback(v=>{if(n)return n==null?void 0:n(typeof v=="function"?v(p):v);h(v),document.cookie=`${Hyt}=${p}; path=/; max-age=${qyt}`},[n,p]),g=N.useCallback(()=>l?u(v=>!v):m(v=>!v),[l,m,u]);N.useEffect(()=>{const v=x=>{x.key===Qyt&&(x.metaKey||x.ctrlKey)&&(x.preventDefault(),g())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[g]);const y=N.useMemo(()=>({expanded:p,setExpanded:m}),[p,m]);return f.jsx(KB.Provider,{value:y,children:f.jsx(rye,{delayDuration:0,children:f.jsx("div",{style:{"--sidebar-width":Kyt,"--sidebar-width-icon":Yyt,...s},className:pe("group/sidebar-wrapper flex min-h-svh w-full text-sidebar-foreground has-[[data-variant=inset]]:bg-sidebar",r),ref:a,...o,children:i})})})});Zyt.displayName="SidebarContainer";const PM=N.forwardRef(({side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:r,children:s,...i},o)=>{a1();const{isMobile:a,state:l,openMobile:c,setOpenMobile:u}=a1();return n==="none"?f.jsx("div",{className:pe("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:o,...i,children:s}):a?f.jsx(s1,{open:c,onOpenChange:u,...i,children:f.jsx(Oy,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":Xyt},side:t,children:f.jsx("div",{className:"flex h-full w-full flex-col",children:s})})}):f.jsxs("div",{ref:o,className:"group peer hidden md:block","data-state":l,"data-collapsible":l==="collapsed"?n:"","data-variant":e,"data-side":t,children:[f.jsx("div",{className:pe("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),f.jsx("div",{className:pe("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...i,children:f.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:s})})]})});PM.displayName="Sidebar";const Jyt=N.forwardRef(({className:t,onClick:e,...n},r)=>{const{setExpanded:s}=a1();return f.jsxs($e,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:pe("h-7 w-7",t),onClick:i=>{e==null||e(i),s(o=>!o)},...n,children:[f.jsx(UTe,{}),f.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});Jyt.displayName="SidebarTrigger";const evt=N.forwardRef(({className:t,...e},n)=>{const{setExpanded:r}=a1();return f.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:()=>r(s=>!s),title:"Toggle Sidebar",className:pe("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...e})});evt.displayName="SidebarRail";const tvt=N.forwardRef(({className:t,...e},n)=>f.jsx("main",{ref:n,className:pe("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...e}));tvt.displayName="SidebarInset";const nvt=N.forwardRef(({className:t,...e},n)=>f.jsx(Oe,{ref:n,"data-sidebar":"input",className:pe("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...e}));nvt.displayName="SidebarInput";const rvt=N.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,"data-sidebar":"header",className:pe("flex flex-col gap-2 p-2",t),...e}));rvt.displayName="SidebarHeader";const svt=N.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,"data-sidebar":"footer",className:pe("flex flex-col gap-2 p-2",t),...e}));svt.displayName="SidebarFooter";const ivt=N.forwardRef(({className:t,...e},n)=>f.jsx(WB,{ref:n,"data-sidebar":"separator",className:pe("mx-2 w-auto bg-sidebar-border",t),...e}));ivt.displayName="SidebarSeparator";const ovt=N.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,"data-sidebar":"content",className:pe("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e}));ovt.displayName="SidebarContent";const avt=N.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,"data-sidebar":"group",className:pe("relative flex w-full min-w-0 flex-col p-2",t),...e}));avt.displayName="SidebarGroup";const lvt=N.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const s=e?Ii:"div";return f.jsx(s,{ref:r,"data-sidebar":"group-label",className:pe("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})});lvt.displayName="SidebarGroupLabel";const cvt=N.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const s=e?Ii:"button";return f.jsx(s,{ref:r,"data-sidebar":"group-action",className:pe("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...n})});cvt.displayName="SidebarGroupAction";const uvt=N.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,"data-sidebar":"group-content",className:pe("w-full text-sm",t),...e}));uvt.displayName="SidebarGroupContent";const dvt=N.forwardRef(({className:t,...e},n)=>f.jsx("ul",{ref:n,"data-sidebar":"menu",className:pe("flex w-full min-w-0 flex-col gap-1",t),...e}));dvt.displayName="SidebarMenu";const fvt=N.forwardRef(({className:t,...e},n)=>f.jsx("li",{ref:n,"data-sidebar":"menu-item",className:pe("group/menu-item relative",t),...e}));fvt.displayName="SidebarMenuItem";const hvt=Rp("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),pvt=N.forwardRef(({asChild:t=!1,isActive:e=!1,variant:n="default",size:r="default",tooltip:s,className:i,...o},a)=>{const l=t?Ii:"button",{expanded:c}=a1(),u=f.jsx(l,{ref:a,"data-sidebar":"menu-button","data-size":r,"data-active":e,className:pe(hvt({variant:n,size:r}),i),...o});return s?(typeof s=="string"&&(s={children:s}),f.jsxs(sye,{children:[f.jsx(iye,{asChild:!0,children:u}),f.jsx(qB,{side:"right",align:"center",hidden:c!=="collapsed",...s})]})):u});pvt.displayName="SidebarMenuButton";const mvt=N.forwardRef(({className:t,asChild:e=!1,showOnHover:n=!1,...r},s)=>{const i=e?Ii:"button";return f.jsx(i,{ref:s,"data-sidebar":"menu-action",className:pe("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...r})});mvt.displayName="SidebarMenuAction";const gvt=N.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:pe("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...e}));gvt.displayName="SidebarMenuBadge";const yvt=N.forwardRef(({className:t,showIcon:e=!1,...n},r)=>{const s=N.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return f.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:pe("rounded-md h-8 flex gap-2 px-2 items-center",t),...n,children:[e&&f.jsx(oK,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),f.jsx(oK,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":s}})]})});yvt.displayName="SidebarMenuSkeleton";const vvt=N.forwardRef(({className:t,...e},n)=>f.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:pe("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...e}));vvt.displayName="SidebarMenuSub";const xvt=N.forwardRef(({...t},e)=>f.jsx("li",{ref:e,...t}));xvt.displayName="SidebarMenuSubItem";const bvt=N.forwardRef(({asChild:t=!1,size:e="md",isActive:n,className:r,...s},i)=>{const o=t?Ii:"a";return f.jsx(o,{ref:i,"data-sidebar":"menu-sub-button","data-size":e,"data-active":n,className:pe("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...s})});bvt.displayName="SidebarMenuSubButton";function wvt(){const{toast:t}=cs();Sf();const[e,n]=N.useState([]),[r,s]=N.useState(!0),[i,o]=N.useState(""),[a,l]=N.useState(!1),[c,u]=N.useState(null),[d,h]=N.useState({name:"",phone:"",email:"",address:"",taxNumber:"",companyType:"",contactPerson:"",bankAccount:"",notes:"",categories:""}),[p,m]=N.useState(!1),[g,y]=N.useState([]),[v,x]=N.useState(!0),[b,S]=N.useState(!1),[w,C]=N.useState({type:"purchase",amount:0,reference:"",notes:"",status:"completed"}),_="";N.useEffect(()=>{T()},[]);const T=async()=>{try{s(!0);const E=await fetch(`${_}/api/suppliers`);if(E.ok){const j=await E.json();n(j)}else console.error("Error fetching suppliers:",await E.text()),t({title:"خطأ",description:"فشل في جلب قائمة الموردين",variant:"destructive"})}catch(E){console.error("Error fetching suppliers:",E),t({title:"خطأ",description:"حدث خطأ أثناء الاتصال بالخادم",variant:"destructive"})}finally{s(!1)}},k=async E=>{try{x(!0);const j=await fetch(`${_}/api/suppliers/${E}/transactions`);if(j.ok){const B=await j.json();y(B)}else console.error("Error fetching transactions:",await j.text()),t({title:"خطأ",description:"فشل في جلب سجل المشتريات",variant:"destructive"})}catch(j){console.error("Error fetching transactions:",j),t({title:"خطأ",description:"حدث خطأ أثناء الاتصال بالخادم",variant:"destructive"})}finally{x(!1)}},$=E=>{u(E),m(!0),k(E.id)},O=async E=>{if(E.preventDefault(),!!c)try{const j=await fetch(`${_}/api/suppliers/${c.id}/transactions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...w,date:new Date().toISOString()})});if(j.ok)t({title:"تم بنجاح",description:"تمت إضافة المعاملة بنجاح"}),C({type:"purchase",amount:0,reference:"",notes:"",status:"completed"}),S(!1),k(c.id);else{const B=await j.json();t({title:"خطأ",description:B.message||"فشل في إضافة المعاملة",variant:"destructive"})}}catch(j){console.error("Error adding transaction:",j),t({title:"خطأ",description:"حدث خطأ أثناء الاتصال بالخادم",variant:"destructive"})}},P=async E=>{E.preventDefault();try{const j=c?"PATCH":"POST",B=c?`${_}/api/suppliers/${c.id}`:`${_}/api/suppliers`,W=await fetch(B,{method:j,headers:{"Content-Type":"application/json"},body:JSON.stringify({...d,categories:d.categories.split(",").map(G=>G.trim()).filter(Boolean)})});if(W.ok)t({title:"تم بنجاح",description:c?"تم تحديث بيانات المورد بنجاح":"تمت إضافة المورد بنجاح"}),l(!1),T();else{const G=await W.json();t({title:"خطأ",description:G.message||"فشل في حفظ بيانات المورد",variant:"destructive"})}}catch(j){console.error("Error saving supplier:",j),t({title:"خطأ",description:"حدث خطأ أثناء الاتصال بالخادم",variant:"destructive"})}},D=async E=>{if(confirm("هل أنت متأكد من حذف هذا المورد؟"))try{const j=await fetch(`${_}/api/suppliers/${E}`,{method:"DELETE"});if(j.ok)t({title:"تم بنجاح",description:"تم حذف المورد بنجاح"}),T();else{const B=await j.json();t({title:"خطأ",description:B.message||"فشل في حذف المورد",variant:"destructive"})}}catch(j){console.error("Error deleting supplier:",j),t({title:"خطأ",description:"حدث خطأ أثناء الاتصال بالخادم",variant:"destructive"})}},A=E=>{var j;u(E),h({name:E.name,phone:E.phone,email:E.email||"",address:E.address||"",taxNumber:E.taxNumber||"",companyType:E.companyType||"",contactPerson:E.contactPerson||"",bankAccount:E.bankAccount||"",notes:E.notes||"",categories:((j=E.categories)==null?void 0:j.join(", "))||""}),l(!0)},I=()=>{u(null),h({name:"",phone:"",email:"",address:"",taxNumber:"",companyType:"",contactPerson:"",bankAccount:"",notes:"",categories:""}),l(!0)},R=()=>{S(!0)},M=e.filter(E=>E.name.toLowerCase().includes(i.toLowerCase())||E.phone.includes(i)||E.contactPerson.toLowerCase().includes(i.toLowerCase()));return r?f.jsx(aK,{children:f.jsxs("div",{className:"flex h-screen",children:[f.jsx("div",{className:"w-64 h-full",children:f.jsx(PM,{})}),f.jsx("main",{className:"flex-1 p-8",children:f.jsx("div",{className:"h-[400px] flex items-center justify-center",children:f.jsx(Zs,{className:"h-8 w-8 animate-spin"})})})]})}):f.jsx(aK,{children:f.jsxs("div",{className:"flex h-screen",children:[f.jsx("div",{className:"w-64 h-full",children:f.jsx(PM,{})}),f.jsxs("main",{className:"flex-1 p-8 overflow-y-auto",children:[f.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("h1",{className:"text-2xl font-bold",children:"الموردين"}),f.jsxs("div",{className:"flex space-x-4",children:[f.jsxs($e,{onClick:I,variant:"default",className:"flex items-center gap-2",children:[f.jsx(xl,{className:"h-4 w-4"}),f.jsx("span",{children:"إضافة مورد"})]}),f.jsxs($e,{onClick:R,variant:"outline",className:"flex items-center gap-2",children:[f.jsx(mk,{className:"h-4 w-4"}),f.jsx("span",{children:"إضافة مشتريات"})]})]})]}),f.jsxs(Le,{children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"قائمة الموردين"}),f.jsx(Kt,{children:"إدارة الموردين والمشتريات"}),f.jsx("div",{className:"mt-4",children:f.jsx(Oe,{placeholder:"البحث عن طريق اسم المورد أو رقم الهاتف",value:i,onChange:E=>o(E.target.value),className:"max-w-md"})})]}),f.jsx(Ue,{children:f.jsxs($a,{children:[f.jsx(Aa,{children:f.jsxs(dn,{children:[f.jsx(tt,{children:"الاسم"}),f.jsx(tt,{children:"جهة الاتصال"}),f.jsx(tt,{children:"رقم الهاتف"}),f.jsx(tt,{children:"العنوان"}),f.jsx(tt,{children:"الملاحظات"}),f.jsx(tt,{children:"الإجراءات"})]})}),f.jsx(Ia,{children:M.length===0?f.jsx(dn,{children:f.jsx(We,{colSpan:6,className:"text-center",children:"لا توجد بيانات"})}):M.map(E=>f.jsxs(dn,{children:[f.jsx(We,{className:"font-medium",children:E.name}),f.jsx(We,{children:E.contactPerson}),f.jsx(We,{children:E.phone}),f.jsx(We,{children:E.address}),f.jsx(We,{children:E.notes}),f.jsxs(We,{className:"flex space-x-2",children:[f.jsx($e,{variant:"outline",size:"sm",onClick:()=>A(E),children:f.jsx(Nre,{className:"h-4 w-4"})}),f.jsx($e,{variant:"destructive",size:"sm",onClick:()=>D(E.id),children:f.jsx(_re,{className:"h-4 w-4"})}),f.jsx($e,{variant:"default",size:"sm",onClick:()=>$(E),children:f.jsx(wre,{className:"h-4 w-4"})})]})]},E.id))})]})})]})]}),f.jsx(hl,{open:a,onOpenChange:l,children:f.jsxs(wa,{className:"max-w-lg",children:[f.jsxs(Sa,{children:[f.jsx(Ca,{children:c?"تعديل بيانات المورد":"إضافة مورد جديد"}),f.jsx(mg,{children:"أدخل بيانات المورد بشكل صحيح"})]}),f.jsxs("form",{onSubmit:P,children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"name",children:"اسم المورد"}),f.jsx(Oe,{id:"name",value:d.name,onChange:E=>h({...d,name:E.target.value}),required:!0})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"contactPerson",children:"جهة الاتصال"}),f.jsx(Oe,{id:"contactPerson",value:d.contactPerson,onChange:E=>h({...d,contactPerson:E.target.value}),required:!0})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"phone",children:"رقم الهاتف"}),f.jsx(Oe,{id:"phone",value:d.phone,onChange:E=>h({...d,phone:E.target.value}),required:!0})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"email",children:"البريد الإلكتروني"}),f.jsx(Oe,{id:"email",type:"email",value:d.email,onChange:E=>h({...d,email:E.target.value})})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"address",children:"العنوان"}),f.jsx(Oe,{id:"address",value:d.address,onChange:E=>h({...d,address:E.target.value})})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"taxNumber",children:"الرقم الضريبي"}),f.jsx(Oe,{id:"taxNumber",value:d.taxNumber,onChange:E=>h({...d,taxNumber:E.target.value})})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"companyType",children:"نوع الشركة"}),f.jsx(Oe,{id:"companyType",value:d.companyType,onChange:E=>h({...d,companyType:E.target.value})})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"bankAccount",children:"الحساب البنكي"}),f.jsx(Oe,{id:"bankAccount",value:d.bankAccount,onChange:E=>h({...d,bankAccount:E.target.value})})]}),f.jsxs("div",{className:"space-y-2 col-span-2",children:[f.jsx(ot,{htmlFor:"categories",children:"التصنيفات (مفصولة بفواصل)"}),f.jsx(Oe,{id:"categories",value:d.categories,onChange:E=>h({...d,categories:E.target.value}),placeholder:"أجهزة كهربائية, ألكترونيات, ..."})]}),f.jsxs("div",{className:"space-y-2 col-span-2",children:[f.jsx(ot,{htmlFor:"notes",children:"ملاحظات"}),f.jsx(Py,{id:"notes",value:d.notes,onChange:E=>h({...d,notes:E.target.value}),rows:3})]})]}),f.jsx(eT,{children:f.jsx($e,{type:"submit",children:c?"تحديث":"إضافة"})})]})]})}),f.jsx(hl,{open:p,onOpenChange:m,children:f.jsxs(wa,{className:"max-w-3xl",children:[f.jsxs(Sa,{children:[f.jsxs(Ca,{children:["المعاملات - ",c==null?void 0:c.name]}),f.jsx(mg,{children:"سجل المعاملات والمشتريات مع المورد"})]}),f.jsxs("div",{className:"mt-4",children:[f.jsxs($e,{onClick:()=>{c&&(C({...w,supplierId:c.id}),S(!0))},className:"mb-4",children:[f.jsx(xl,{className:"mr-2 h-4 w-4"})," إضافة معاملة"]}),v?f.jsx("div",{className:"h-[200px] flex items-center justify-center",children:f.jsx(Zs,{className:"h-8 w-8 animate-spin"})}):g.length===0?f.jsx("div",{className:"text-center py-8",children:f.jsx("p",{className:"text-muted-foreground",children:"لا توجد معاملات"})}):f.jsxs($a,{children:[f.jsx(Aa,{children:f.jsxs(dn,{children:[f.jsx(tt,{children:"التاريخ"}),f.jsx(tt,{children:"النوع"}),f.jsx(tt,{children:"المبلغ"}),f.jsx(tt,{children:"المرجع"}),f.jsx(tt,{children:"الحالة"}),f.jsx(tt,{children:"ملاحظات"})]})}),f.jsx(Ia,{children:g.map(E=>f.jsxs(dn,{children:[f.jsx(We,{children:new Date(E.date).toLocaleDateString("ar-IQ")}),f.jsx(We,{children:E.type==="payment"?"دفع":E.type==="refund"?"استرجاع":E.type==="advance"?"دفعة مقدمة":E.type==="purchase"?"مشتريات":"أخرى"}),f.jsx(We,{children:E.amount}),f.jsx(We,{children:E.reference}),f.jsx(We,{children:E.status==="completed"?"مكتمل":E.status==="pending"?"معلق":"ملغي"}),f.jsx(We,{children:E.notes})]},E.id))})]})]})]})}),f.jsx(hl,{open:b,onOpenChange:S,children:f.jsxs(wa,{className:"max-w-md",children:[f.jsxs(Sa,{children:[f.jsx(Ca,{children:"إضافة مشتريات جديدة"}),f.jsx(mg,{children:"أدخل بيانات المشتريات من المورد"})]}),f.jsxs("form",{onSubmit:O,children:[f.jsxs("div",{className:"space-y-4 py-4",children:[!c&&f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"supplier",children:"المورد"}),f.jsxs(sr,{onValueChange:E=>{const j=e.find(B=>B.id===parseInt(E));j&&(u(j),C({...w,supplierId:j.id}))},children:[f.jsx(Yn,{children:f.jsx(ir,{placeholder:"اختر المورد"})}),f.jsx(Qn,{children:e.map(E=>f.jsx(Je,{value:E.id.toString(),children:E.name},E.id))})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"type",children:"نوع المعاملة"}),f.jsxs(sr,{defaultValue:"purchase",onValueChange:E=>C({...w,type:E}),children:[f.jsx(Yn,{children:f.jsx(ir,{placeholder:"اختر نوع المعاملة"})}),f.jsxs(Qn,{children:[f.jsx(Je,{value:"purchase",children:"مشتريات"}),f.jsx(Je,{value:"payment",children:"دفع"}),f.jsx(Je,{value:"refund",children:"استرجاع"}),f.jsx(Je,{value:"advance",children:"دفعة مقدمة"}),f.jsx(Je,{value:"other",children:"أخرى"})]})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"amount",children:"المبلغ"}),f.jsx(Oe,{id:"amount",type:"number",value:w.amount,onChange:E=>C({...w,amount:parseFloat(E.target.value)}),required:!0})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"reference",children:"المرجع"}),f.jsx(Oe,{id:"reference",value:w.reference,onChange:E=>C({...w,reference:E.target.value}),placeholder:"رقم الفاتورة أو المرجع"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"status",children:"الحالة"}),f.jsxs(sr,{defaultValue:"completed",onValueChange:E=>C({...w,status:E}),children:[f.jsx(Yn,{children:f.jsx(ir,{placeholder:"اختر الحالة"})}),f.jsxs(Qn,{children:[f.jsx(Je,{value:"completed",children:"مكتمل"}),f.jsx(Je,{value:"pending",children:"معلق"}),f.jsx(Je,{value:"cancelled",children:"ملغي"})]})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"notes",children:"ملاحظات"}),f.jsx(Py,{id:"notes",value:w.notes,onChange:E=>C({...w,notes:E.target.value}),rows:3})]})]}),f.jsx(eT,{children:f.jsx($e,{type:"submit",disabled:!c||w.amount<=0,children:"إضافة"})})]})]})})]})]})})}var XB={},c$={},fo={};Object.defineProperty(fo,"__esModule",{value:!0});function Svt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Cvt=function t(e,n){Svt(this,t),this.data=e,this.text=n.text||e,this.options=n};fo.default=Cvt;Object.defineProperty(c$,"__esModule",{value:!0});c$.CODE39=void 0;var Nvt=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_vt=fo,Tvt=kvt(_vt);function kvt(t){return t&&t.__esModule?t:{default:t}}function Evt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $vt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Avt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ivt=function(t){Avt(e,t);function e(n,r){return Evt(this,e),n=n.toUpperCase(),r.mod43&&(n+=Rvt(Dvt(n))),$vt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return Nvt(e,[{key:"encode",value:function(){for(var r=aP("*"),s=0;s<this.data.length;s++)r+=aP(this.data[s])+"0";return r+=aP("*"),{data:r,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(Tvt.default),oye=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],Ovt=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function aP(t){return Pvt(aye(t))}function Pvt(t){return Ovt[t].toString(2)}function Rvt(t){return oye[t]}function aye(t){return oye.indexOf(t)}function Dvt(t){for(var e=0,n=0;n<t.length;n++)e+=aye(t[n]);return e=e%43,e}c$.CODE39=Ivt;var sc={},YB={},Rv={},tr={};Object.defineProperty(tr,"__esModule",{value:!0});var $x;function lP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var lye=tr.SET_A=0,cye=tr.SET_B=1,uye=tr.SET_C=2;tr.SHIFT=98;var jvt=tr.START_A=103,Mvt=tr.START_B=104,Fvt=tr.START_C=105;tr.MODULO=103;tr.STOP=106;tr.FNC1=207;tr.SET_BY_CODE=($x={},lP($x,jvt,lye),lP($x,Mvt,cye),lP($x,Fvt,uye),$x);tr.SWAP={101:lye,100:cye,99:uye};tr.A_START_CHAR="Ð";tr.B_START_CHAR="Ñ";tr.C_START_CHAR="Ò";tr.A_CHARS="[\0-_È-Ï]";tr.B_CHARS="[ -È-Ï]";tr.C_CHARS="(Ï*[0-9]{2}Ï*)";tr.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(Rv,"__esModule",{value:!0});var Lvt=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Bvt=fo,zvt=Vvt(Bvt),po=tr;function Vvt(t){return t&&t.__esModule?t:{default:t}}function Wvt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uvt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Gvt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Hvt=function(t){Gvt(e,t);function e(n,r){Wvt(this,e);var s=Uvt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.substring(1),r));return s.bytes=n.split("").map(function(i){return i.charCodeAt(0)}),s}return Lvt(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var r=this.bytes,s=r.shift()-105,i=po.SET_BY_CODE[s];if(i===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&r.unshift(po.FNC1);var o=e.next(r,1,i);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(s)+o.result+e.getBar((o.checksum+s)%po.MODULO)+e.getBar(po.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var r=this.options.ean128||!1;return typeof r=="string"&&(r=r.toLowerCase()==="true"),r}}],[{key:"getBar",value:function(r){return po.BARS[r]?po.BARS[r].toString():""}},{key:"correctIndex",value:function(r,s){if(s===po.SET_A){var i=r.shift();return i<32?i+64:i-32}else return s===po.SET_B?r.shift()-32:(r.shift()-48)*10+r.shift()-48}},{key:"next",value:function(r,s,i){if(!r.length)return{result:"",checksum:0};var o=void 0,a=void 0;if(r[0]>=200){a=r.shift()-105;var l=po.SWAP[a];l!==void 0?o=e.next(r,s+1,l):((i===po.SET_A||i===po.SET_B)&&a===po.SHIFT&&(r[0]=i===po.SET_A?r[0]>95?r[0]-96:r[0]:r[0]<32?r[0]+96:r[0]),o=e.next(r,s+1,i))}else a=e.correctIndex(r,i),o=e.next(r,s+1,i);var c=e.getBar(a),u=a*s;return{result:c+o.result,checksum:u+o.checksum}}}]),e}(zvt.default);Rv.default=Hvt;var QB={};Object.defineProperty(QB,"__esModule",{value:!0});var Hd=tr,dye=function(e){return e.match(new RegExp("^"+Hd.A_CHARS+"*"))[0].length},fye=function(e){return e.match(new RegExp("^"+Hd.B_CHARS+"*"))[0].length},hye=function(e){return e.match(new RegExp("^"+Hd.C_CHARS+"*"))[0]};function ZB(t,e){var n=e?Hd.A_CHARS:Hd.B_CHARS,r=t.match(new RegExp("^("+n+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(r)return r[1]+"Ì"+pye(t.substring(r[1].length));var s=t.match(new RegExp("^"+n+"+"))[0];return s.length===t.length?t:s+String.fromCharCode(e?205:206)+ZB(t.substring(s.length),!e)}function pye(t){var e=hye(t),n=e.length;if(n===t.length)return t;t=t.substring(n);var r=dye(t)>=fye(t);return e+String.fromCharCode(r?206:205)+ZB(t,r)}QB.default=function(t){var e=void 0,n=hye(t).length;if(n>=2)e=Hd.C_START_CHAR+pye(t);else{var r=dye(t)>fye(t);e=(r?Hd.A_START_CHAR:Hd.B_START_CHAR)+ZB(t,r)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(s,i){return"Ë"+i})};Object.defineProperty(YB,"__esModule",{value:!0});var qvt=Rv,Kvt=mye(qvt),Xvt=QB,Yvt=mye(Xvt);function mye(t){return t&&t.__esModule?t:{default:t}}function Qvt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cP(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Zvt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Jvt=function(t){Zvt(e,t);function e(n,r){if(Qvt(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(n))var s=cP(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,Yvt.default)(n),r));else var s=cP(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return cP(s)}return e}(Kvt.default);YB.default=Jvt;var JB={};Object.defineProperty(JB,"__esModule",{value:!0});var ext=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),txt=Rv,nxt=rxt(txt),lK=tr;function rxt(t){return t&&t.__esModule?t:{default:t}}function sxt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ixt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function oxt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var axt=function(t){oxt(e,t);function e(n,r){return sxt(this,e),ixt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,lK.A_START_CHAR+n,r))}return ext(e,[{key:"valid",value:function(){return new RegExp("^"+lK.A_CHARS+"+$").test(this.data)}}]),e}(nxt.default);JB.default=axt;var ez={};Object.defineProperty(ez,"__esModule",{value:!0});var lxt=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),cxt=Rv,uxt=dxt(cxt),cK=tr;function dxt(t){return t&&t.__esModule?t:{default:t}}function fxt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hxt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function pxt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var mxt=function(t){pxt(e,t);function e(n,r){return fxt(this,e),hxt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,cK.B_START_CHAR+n,r))}return lxt(e,[{key:"valid",value:function(){return new RegExp("^"+cK.B_CHARS+"+$").test(this.data)}}]),e}(uxt.default);ez.default=mxt;var tz={};Object.defineProperty(tz,"__esModule",{value:!0});var gxt=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),yxt=Rv,vxt=xxt(yxt),uK=tr;function xxt(t){return t&&t.__esModule?t:{default:t}}function bxt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wxt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Sxt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Cxt=function(t){Sxt(e,t);function e(n,r){return bxt(this,e),wxt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,uK.C_START_CHAR+n,r))}return gxt(e,[{key:"valid",value:function(){return new RegExp("^"+uK.C_CHARS+"+$").test(this.data)}}]),e}(vxt.default);tz.default=Cxt;Object.defineProperty(sc,"__esModule",{value:!0});sc.CODE128C=sc.CODE128B=sc.CODE128A=sc.CODE128=void 0;var Nxt=YB,_xt=u$(Nxt),Txt=JB,kxt=u$(Txt),Ext=ez,$xt=u$(Ext),Axt=tz,Ixt=u$(Axt);function u$(t){return t&&t.__esModule?t:{default:t}}sc.CODE128=_xt.default;sc.CODE128A=kxt.default;sc.CODE128B=$xt.default;sc.CODE128C=Ixt.default;var Gi={},nz={},ja={};Object.defineProperty(ja,"__esModule",{value:!0});ja.SIDE_BIN="101";ja.MIDDLE_BIN="01010";ja.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};ja.EAN2_STRUCTURE=["LL","LG","GL","GG"];ja.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];ja.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var d$={},Gp={};Object.defineProperty(Gp,"__esModule",{value:!0});var Oxt=ja,Pxt=function(e,n,r){var s=e.split("").map(function(o,a){return Oxt.BINARIES[n[a]]}).map(function(o,a){return o?o[e[a]]:""});if(r){var i=e.length-1;s=s.map(function(o,a){return a<i?o+r:o})}return s.join("")};Gp.default=Pxt;Object.defineProperty(d$,"__esModule",{value:!0});var Rxt=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),ym=ja,Dxt=Gp,dK=gye(Dxt),jxt=fo,Mxt=gye(jxt);function gye(t){return t&&t.__esModule?t:{default:t}}function Fxt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lxt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Bxt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var zxt=function(t){Bxt(e,t);function e(n,r){Fxt(this,e);var s=Lxt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return s.fontSize=!r.flat&&r.fontSize>r.width*10?r.width*10:r.fontSize,s.guardHeight=r.height+s.fontSize/2+r.textMargin,s}return Rxt(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(r,s){return this.text.substr(r,s)}},{key:"leftEncode",value:function(r,s){return(0,dK.default)(r,s)}},{key:"rightText",value:function(r,s){return this.text.substr(r,s)}},{key:"rightEncode",value:function(r,s){return(0,dK.default)(r,s)}},{key:"encodeGuarded",value:function(){var r={fontSize:this.fontSize},s={height:this.guardHeight};return[{data:ym.SIDE_BIN,options:s},{data:this.leftEncode(),text:this.leftText(),options:r},{data:ym.MIDDLE_BIN,options:s},{data:this.rightEncode(),text:this.rightText(),options:r},{data:ym.SIDE_BIN,options:s}]}},{key:"encodeFlat",value:function(){var r=[ym.SIDE_BIN,this.leftEncode(),ym.MIDDLE_BIN,this.rightEncode(),ym.SIDE_BIN];return{data:r.join(""),text:this.text}}}]),e}(Mxt.default);d$.default=zxt;Object.defineProperty(nz,"__esModule",{value:!0});var Vxt=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Ax=function t(e,n,r){e===null&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,n);if(s===void 0){var i=Object.getPrototypeOf(e);return i===null?void 0:t(i,n,r)}else{if("value"in s)return s.value;var o=s.get;return o===void 0?void 0:o.call(r)}},Wxt=ja,Uxt=d$,Gxt=Hxt(Uxt);function Hxt(t){return t&&t.__esModule?t:{default:t}}function qxt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kxt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Xxt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var fK=function(e){var n=e.substr(0,12).split("").map(function(r){return+r}).reduce(function(r,s,i){return i%2?r+s*3:r+s},0);return(10-n%10)%10},Yxt=function(t){Xxt(e,t);function e(n,r){qxt(this,e),n.search(/^[0-9]{12}$/)!==-1&&(n+=fK(n));var s=Kxt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return s.lastChar=r.lastChar,s}return Vxt(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===fK(this.data)}},{key:"leftText",value:function(){return Ax(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var r=this.data.substr(1,6),s=Wxt.EAN13_STRUCTURE[this.data[0]];return Ax(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,r,s)}},{key:"rightText",value:function(){return Ax(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var r=this.data.substr(7,6);return Ax(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,r,"RRRRRR")}},{key:"encodeGuarded",value:function(){var r=Ax(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(r.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(r.push({data:"00"}),r.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),r}}]),e}(Gxt.default);nz.default=Yxt;var rz={};Object.defineProperty(rz,"__esModule",{value:!0});var Qxt=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),LC=function t(e,n,r){e===null&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,n);if(s===void 0){var i=Object.getPrototypeOf(e);return i===null?void 0:t(i,n,r)}else{if("value"in s)return s.value;var o=s.get;return o===void 0?void 0:o.call(r)}},Zxt=d$,Jxt=e0t(Zxt);function e0t(t){return t&&t.__esModule?t:{default:t}}function t0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n0t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function r0t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var hK=function(e){var n=e.substr(0,7).split("").map(function(r){return+r}).reduce(function(r,s,i){return i%2?r+s:r+s*3},0);return(10-n%10)%10},s0t=function(t){r0t(e,t);function e(n,r){return t0t(this,e),n.search(/^[0-9]{7}$/)!==-1&&(n+=hK(n)),n0t(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return Qxt(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===hK(this.data)}},{key:"leftText",value:function(){return LC(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var r=this.data.substr(0,4);return LC(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,r,"LLLL")}},{key:"rightText",value:function(){return LC(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var r=this.data.substr(4,4);return LC(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,r,"RRRR")}}]),e}(Jxt.default);rz.default=s0t;var sz={};Object.defineProperty(sz,"__esModule",{value:!0});var i0t=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o0t=ja,a0t=Gp,l0t=yye(a0t),c0t=fo,u0t=yye(c0t);function yye(t){return t&&t.__esModule?t:{default:t}}function d0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f0t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function h0t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var p0t=function(e){var n=e.split("").map(function(r){return+r}).reduce(function(r,s,i){return i%2?r+s*9:r+s*3},0);return n%10},m0t=function(t){h0t(e,t);function e(n,r){return d0t(this,e),f0t(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return i0t(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var r=o0t.EAN5_STRUCTURE[p0t(this.data)];return{data:"1011"+(0,l0t.default)(this.data,r,"01"),text:this.text}}}]),e}(u0t.default);sz.default=m0t;var iz={};Object.defineProperty(iz,"__esModule",{value:!0});var g0t=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y0t=ja,v0t=Gp,x0t=vye(v0t),b0t=fo,w0t=vye(b0t);function vye(t){return t&&t.__esModule?t:{default:t}}function S0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C0t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function N0t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _0t=function(t){N0t(e,t);function e(n,r){return S0t(this,e),C0t(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return g0t(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var r=y0t.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,x0t.default)(this.data,r,"01"),text:this.text}}}]),e}(w0t.default);iz.default=_0t;var pw={};Object.defineProperty(pw,"__esModule",{value:!0});var T0t=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();pw.checksum=RM;var k0t=Gp,vm=xye(k0t),E0t=fo,$0t=xye(E0t);function xye(t){return t&&t.__esModule?t:{default:t}}function A0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I0t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function O0t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var P0t=function(t){O0t(e,t);function e(n,r){A0t(this,e),n.search(/^[0-9]{11}$/)!==-1&&(n+=RM(n));var s=I0t(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return s.displayValue=r.displayValue,r.fontSize>r.width*10?s.fontSize=r.width*10:s.fontSize=r.fontSize,s.guardHeight=r.height+s.fontSize/2+r.textMargin,s}return T0t(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==RM(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var r="";return r+="101",r+=(0,vm.default)(this.data.substr(0,6),"LLLLLL"),r+="01010",r+=(0,vm.default)(this.data.substr(6,6),"RRRRRR"),r+="101",{data:r,text:this.text}}},{key:"guardedEncoding",value:function(){var r=[];return this.displayValue&&r.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),r.push({data:"101"+(0,vm.default)(this.data[0],"L"),options:{height:this.guardHeight}}),r.push({data:(0,vm.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),r.push({data:"01010",options:{height:this.guardHeight}}),r.push({data:(0,vm.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),r.push({data:(0,vm.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&r.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),r}}]),e}($0t.default);function RM(t){var e=0,n;for(n=1;n<11;n+=2)e+=parseInt(t[n]);for(n=0;n<11;n+=2)e+=parseInt(t[n])*3;return(10-e%10)%10}pw.default=P0t;var oz={};Object.defineProperty(oz,"__esModule",{value:!0});var R0t=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),D0t=Gp,j0t=bye(D0t),M0t=fo,F0t=bye(M0t),L0t=pw;function bye(t){return t&&t.__esModule?t:{default:t}}function B0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uP(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function z0t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var V0t=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],W0t=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],U0t=function(t){z0t(e,t);function e(n,r){B0t(this,e);var s=uP(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));if(s.isValid=!1,n.search(/^[0-9]{6}$/)!==-1)s.middleDigits=n,s.upcA=pK(n,"0"),s.text=r.text||""+s.upcA[0]+n+s.upcA[s.upcA.length-1],s.isValid=!0;else if(n.search(/^[01][0-9]{7}$/)!==-1)if(s.middleDigits=n.substring(1,n.length-1),s.upcA=pK(s.middleDigits,n[0]),s.upcA[s.upcA.length-1]===n[n.length-1])s.isValid=!0;else return uP(s);else return uP(s);return s.displayValue=r.displayValue,r.fontSize>r.width*10?s.fontSize=r.width*10:s.fontSize=r.fontSize,s.guardHeight=r.height+s.fontSize/2+r.textMargin,s}return R0t(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var r="";return r+="101",r+=this.encodeMiddleDigits(),r+="010101",{data:r,text:this.text}}},{key:"guardedEncoding",value:function(){var r=[];return this.displayValue&&r.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),r.push({data:"101",options:{height:this.guardHeight}}),r.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),r.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&r.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),r}},{key:"encodeMiddleDigits",value:function(){var r=this.upcA[0],s=this.upcA[this.upcA.length-1],i=W0t[parseInt(s)][parseInt(r)];return(0,j0t.default)(this.middleDigits,i)}}]),e}(F0t.default);function pK(t,e){for(var n=parseInt(t[t.length-1]),r=V0t[n],s="",i=0,o=0;o<r.length;o++){var a=r[o];a==="X"?s+=t[i++]:s+=a}return s=""+e+s,""+s+(0,L0t.checksum)(s)}oz.default=U0t;Object.defineProperty(Gi,"__esModule",{value:!0});Gi.UPCE=Gi.UPC=Gi.EAN2=Gi.EAN5=Gi.EAN8=Gi.EAN13=void 0;var G0t=nz,H0t=Dv(G0t),q0t=rz,K0t=Dv(q0t),X0t=sz,Y0t=Dv(X0t),Q0t=iz,Z0t=Dv(Q0t),J0t=pw,ebt=Dv(J0t),tbt=oz,nbt=Dv(tbt);function Dv(t){return t&&t.__esModule?t:{default:t}}Gi.EAN13=H0t.default;Gi.EAN8=K0t.default;Gi.EAN5=Y0t.default;Gi.EAN2=Z0t.default;Gi.UPC=ebt.default;Gi.UPCE=nbt.default;var Dy={},f$={},mw={};Object.defineProperty(mw,"__esModule",{value:!0});mw.START_BIN="1010";mw.END_BIN="11101";mw.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(f$,"__esModule",{value:!0});var rbt=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),BC=mw,sbt=fo,ibt=obt(sbt);function obt(t){return t&&t.__esModule?t:{default:t}}function abt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lbt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function cbt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ubt=function(t){cbt(e,t);function e(){return abt(this,e),lbt(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return rbt(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var r=this,s=this.data.match(/.{2}/g).map(function(i){return r.encodePair(i)}).join("");return{data:BC.START_BIN+s+BC.END_BIN,text:this.text}}},{key:"encodePair",value:function(r){var s=BC.BINARIES[r[1]];return BC.BINARIES[r[0]].split("").map(function(i,o){return(i==="1"?"111":"1")+(s[o]==="1"?"000":"0")}).join("")}}]),e}(ibt.default);f$.default=ubt;var az={};Object.defineProperty(az,"__esModule",{value:!0});var dbt=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),fbt=f$,hbt=pbt(fbt);function pbt(t){return t&&t.__esModule?t:{default:t}}function mbt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gbt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ybt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var mK=function(e){var n=e.substr(0,13).split("").map(function(r){return parseInt(r,10)}).reduce(function(r,s,i){return r+s*(3-i%2*2)},0);return Math.ceil(n/10)*10-n},vbt=function(t){ybt(e,t);function e(n,r){return mbt(this,e),n.search(/^[0-9]{13}$/)!==-1&&(n+=mK(n)),gbt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return dbt(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===mK(this.data)}}]),e}(hbt.default);az.default=vbt;Object.defineProperty(Dy,"__esModule",{value:!0});Dy.ITF14=Dy.ITF=void 0;var xbt=f$,bbt=wye(xbt),wbt=az,Sbt=wye(wbt);function wye(t){return t&&t.__esModule?t:{default:t}}Dy.ITF=bbt.default;Dy.ITF14=Sbt.default;var ca={},Hp={};Object.defineProperty(Hp,"__esModule",{value:!0});var Cbt=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Nbt=fo,_bt=Tbt(Nbt);function Tbt(t){return t&&t.__esModule?t:{default:t}}function kbt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ebt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function $bt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Abt=function(t){$bt(e,t);function e(n,r){return kbt(this,e),Ebt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return Cbt(e,[{key:"encode",value:function(){for(var r="110",s=0;s<this.data.length;s++){var i=parseInt(this.data[s]),o=i.toString(2);o=Ibt(o,4-o.length);for(var a=0;a<o.length;a++)r+=o[a]=="0"?"100":"110"}return r+="1001",{data:r,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(_bt.default);function Ibt(t,e){for(var n=0;n<e;n++)t="0"+t;return t}Hp.default=Abt;var lz={},qp={};Object.defineProperty(qp,"__esModule",{value:!0});qp.mod10=Obt;qp.mod11=Pbt;function Obt(t){for(var e=0,n=0;n<t.length;n++){var r=parseInt(t[n]);(n+t.length)%2===0?e+=r:e+=r*2%10+Math.floor(r*2/10)}return(10-e%10)%10}function Pbt(t){for(var e=0,n=[2,3,4,5,6,7],r=0;r<t.length;r++){var s=parseInt(t[t.length-1-r]);e+=n[r%n.length]*s}return(11-e%11)%11}Object.defineProperty(lz,"__esModule",{value:!0});var Rbt=Hp,Dbt=Mbt(Rbt),jbt=qp;function Mbt(t){return t&&t.__esModule?t:{default:t}}function Fbt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lbt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Bbt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var zbt=function(t){Bbt(e,t);function e(n,r){return Fbt(this,e),Lbt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,jbt.mod10)(n),r))}return e}(Dbt.default);lz.default=zbt;var cz={};Object.defineProperty(cz,"__esModule",{value:!0});var Vbt=Hp,Wbt=Gbt(Vbt),Ubt=qp;function Gbt(t){return t&&t.__esModule?t:{default:t}}function Hbt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qbt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Kbt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Xbt=function(t){Kbt(e,t);function e(n,r){return Hbt(this,e),qbt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,Ubt.mod11)(n),r))}return e}(Wbt.default);cz.default=Xbt;var uz={};Object.defineProperty(uz,"__esModule",{value:!0});var Ybt=Hp,Qbt=Zbt(Ybt),gK=qp;function Zbt(t){return t&&t.__esModule?t:{default:t}}function Jbt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e1t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function t1t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n1t=function(t){t1t(e,t);function e(n,r){return Jbt(this,e),n+=(0,gK.mod10)(n),n+=(0,gK.mod10)(n),e1t(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return e}(Qbt.default);uz.default=n1t;var dz={};Object.defineProperty(dz,"__esModule",{value:!0});var r1t=Hp,s1t=i1t(r1t),yK=qp;function i1t(t){return t&&t.__esModule?t:{default:t}}function o1t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a1t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function l1t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c1t=function(t){l1t(e,t);function e(n,r){return o1t(this,e),n+=(0,yK.mod11)(n),n+=(0,yK.mod10)(n),a1t(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return e}(s1t.default);dz.default=c1t;Object.defineProperty(ca,"__esModule",{value:!0});ca.MSI1110=ca.MSI1010=ca.MSI11=ca.MSI10=ca.MSI=void 0;var u1t=Hp,d1t=gw(u1t),f1t=lz,h1t=gw(f1t),p1t=cz,m1t=gw(p1t),g1t=uz,y1t=gw(g1t),v1t=dz,x1t=gw(v1t);function gw(t){return t&&t.__esModule?t:{default:t}}ca.MSI=d1t.default;ca.MSI10=h1t.default;ca.MSI11=m1t.default;ca.MSI1010=y1t.default;ca.MSI1110=x1t.default;var h$={};Object.defineProperty(h$,"__esModule",{value:!0});h$.pharmacode=void 0;var b1t=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),w1t=fo,S1t=C1t(w1t);function C1t(t){return t&&t.__esModule?t:{default:t}}function N1t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _1t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function T1t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var k1t=function(t){T1t(e,t);function e(n,r){N1t(this,e);var s=_1t(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return s.number=parseInt(n,10),s}return b1t(e,[{key:"encode",value:function(){for(var r=this.number,s="";!isNaN(r)&&r!=0;)r%2===0?(s="11100"+s,r=(r-2)/2):(s="100"+s,r=(r-1)/2);return s=s.slice(0,-2),{data:s,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(S1t.default);h$.pharmacode=k1t;var p$={};Object.defineProperty(p$,"__esModule",{value:!0});p$.codabar=void 0;var E1t=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),$1t=fo,A1t=I1t($1t);function I1t(t){return t&&t.__esModule?t:{default:t}}function O1t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P1t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function R1t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var D1t=function(t){R1t(e,t);function e(n,r){O1t(this,e),n.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(n="A"+n+"A");var s=P1t(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.toUpperCase(),r));return s.text=s.options.text||s.text.replace(/[A-D]/g,""),s}return E1t(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var r=[],s=this.getEncodings(),i=0;i<this.data.length;i++)r.push(s[this.data.charAt(i)]),i!==this.data.length-1&&r.push("0");return{text:this.text,data:r.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(A1t.default);p$.codabar=D1t;var m$={};Object.defineProperty(m$,"__esModule",{value:!0});m$.GenericBarcode=void 0;var j1t=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),M1t=fo,F1t=L1t(M1t);function L1t(t){return t&&t.__esModule?t:{default:t}}function B1t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z1t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function V1t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var W1t=function(t){V1t(e,t);function e(n,r){return B1t(this,e),z1t(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return j1t(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(F1t.default);m$.GenericBarcode=W1t;Object.defineProperty(XB,"__esModule",{value:!0});var U1t=c$,zC=sc,xm=Gi,vK=Dy,Ix=ca,G1t=h$,H1t=p$,q1t=m$;XB.default={CODE39:U1t.CODE39,CODE128:zC.CODE128,CODE128A:zC.CODE128A,CODE128B:zC.CODE128B,CODE128C:zC.CODE128C,EAN13:xm.EAN13,EAN8:xm.EAN8,EAN5:xm.EAN5,EAN2:xm.EAN2,UPC:xm.UPC,UPCE:xm.UPCE,ITF14:vK.ITF14,ITF:vK.ITF,MSI:Ix.MSI,MSI10:Ix.MSI10,MSI11:Ix.MSI11,MSI1010:Ix.MSI1010,MSI1110:Ix.MSI1110,pharmacode:G1t.pharmacode,codabar:H1t.codabar,GenericBarcode:q1t.GenericBarcode};var jv={};Object.defineProperty(jv,"__esModule",{value:!0});var K1t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};jv.default=function(t,e){return K1t({},t,e)};var fz={};Object.defineProperty(fz,"__esModule",{value:!0});fz.default=X1t;function X1t(t){var e=[];function n(r){if(Array.isArray(r))for(var s=0;s<r.length;s++)n(r[s]);else r.text=r.text||"",r.data=r.data||"",e.push(r)}return n(t),e}var hz={};Object.defineProperty(hz,"__esModule",{value:!0});hz.default=Y1t;function Y1t(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}var pz={},mz={},g$={};Object.defineProperty(g$,"__esModule",{value:!0});g$.default=Q1t;function Q1t(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in e)e.hasOwnProperty(n)&&(n=e[n],typeof t[n]=="string"&&(t[n]=parseInt(t[n],10)));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t}var y$={};Object.defineProperty(y$,"__esModule",{value:!0});var Z1t={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};y$.default=Z1t;Object.defineProperty(mz,"__esModule",{value:!0});var J1t=g$,ewt=Sye(J1t),twt=y$,xK=Sye(twt);function Sye(t){return t&&t.__esModule?t:{default:t}}function nwt(t){var e={};for(var n in xK.default)xK.default.hasOwnProperty(n)&&(t.hasAttribute("jsbarcode-"+n.toLowerCase())&&(e[n]=t.getAttribute("jsbarcode-"+n.toLowerCase())),t.hasAttribute("data-"+n.toLowerCase())&&(e[n]=t.getAttribute("data-"+n.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),e=(0,ewt.default)(e),e}mz.default=nwt;var gz={},yz={},So={};Object.defineProperty(So,"__esModule",{value:!0});So.getTotalWidthOfEncodings=So.calculateEncodingAttributes=So.getBarcodePadding=So.getEncodingHeight=So.getMaximumHeightOfEncodings=void 0;var rwt=jv,swt=iwt(rwt);function iwt(t){return t&&t.__esModule?t:{default:t}}function Cye(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function Nye(t,e,n){if(n.displayValue&&e<t){if(n.textAlign=="center")return Math.floor((t-e)/2);if(n.textAlign=="left")return 0;if(n.textAlign=="right")return Math.floor(t-e)}return 0}function owt(t,e,n){for(var r=0;r<t.length;r++){var s=t[r],i=(0,swt.default)(e,s.options),o;i.displayValue?o=cwt(s.text,i,n):o=0;var a=s.data.length*i.width;s.width=Math.ceil(Math.max(o,a)),s.height=Cye(s,i),s.barcodePadding=Nye(o,a,i)}}function awt(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].width;return e}function lwt(t){for(var e=0,n=0;n<t.length;n++)t[n].height>e&&(e=t[n].height);return e}function cwt(t,e,n){var r;if(n)r=n;else if(typeof document<"u")r=document.createElement("canvas").getContext("2d");else return 0;r.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var s=r.measureText(t);if(!s)return 0;var i=s.width;return i}So.getMaximumHeightOfEncodings=lwt;So.getEncodingHeight=Cye;So.getBarcodePadding=Nye;So.calculateEncodingAttributes=owt;So.getTotalWidthOfEncodings=awt;Object.defineProperty(yz,"__esModule",{value:!0});var uwt=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),dwt=jv,fwt=hwt(dwt),dP=So;function hwt(t){return t&&t.__esModule?t:{default:t}}function pwt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var mwt=function(){function t(e,n,r){pwt(this,t),this.canvas=e,this.encodings=n,this.options=r}return uwt(t,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var n=0;n<this.encodings.length;n++){var r=(0,fwt.default)(this.options,this.encodings[n].options);this.drawCanvasBarcode(r,this.encodings[n]),this.drawCanvasText(r,this.encodings[n]),this.moveCanvasDrawing(this.encodings[n])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var n=this.canvas.getContext("2d");n.save(),(0,dP.calculateEncodingAttributes)(this.encodings,this.options,n);var r=(0,dP.getTotalWidthOfEncodings)(this.encodings),s=(0,dP.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=r+this.options.marginLeft+this.options.marginRight,this.canvas.height=s,n.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(n.fillStyle=this.options.background,n.fillRect(0,0,this.canvas.width,this.canvas.height)),n.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(n,r){var s=this.canvas.getContext("2d"),i=r.data,o;n.textPosition=="top"?o=n.marginTop+n.fontSize+n.textMargin:o=n.marginTop,s.fillStyle=n.lineColor;for(var a=0;a<i.length;a++){var l=a*n.width+r.barcodePadding;i[a]==="1"?s.fillRect(l,o,n.width,n.height):i[a]&&s.fillRect(l,o,n.width,n.height*i[a])}}},{key:"drawCanvasText",value:function(n,r){var s=this.canvas.getContext("2d"),i=n.fontOptions+" "+n.fontSize+"px "+n.font;if(n.displayValue){var o,a;n.textPosition=="top"?a=n.marginTop+n.fontSize-n.textMargin:a=n.height+n.textMargin+n.marginTop+n.fontSize,s.font=i,n.textAlign=="left"||r.barcodePadding>0?(o=0,s.textAlign="left"):n.textAlign=="right"?(o=r.width-1,s.textAlign="right"):(o=r.width/2,s.textAlign="center"),s.fillText(r.text,o,a)}}},{key:"moveCanvasDrawing",value:function(n){var r=this.canvas.getContext("2d");r.translate(n.width,0)}},{key:"restoreCanvas",value:function(){var n=this.canvas.getContext("2d");n.restore()}}]),t}();yz.default=mwt;var vz={};Object.defineProperty(vz,"__esModule",{value:!0});var gwt=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),ywt=jv,vwt=xwt(ywt),fP=So;function xwt(t){return t&&t.__esModule?t:{default:t}}function bwt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var VC="http://www.w3.org/2000/svg",wwt=function(){function t(e,n,r){bwt(this,t),this.svg=e,this.encodings=n,this.options=r,this.document=r.xmlDocument||document}return gwt(t,[{key:"render",value:function(){var n=this.options.marginLeft;this.prepareSVG();for(var r=0;r<this.encodings.length;r++){var s=this.encodings[r],i=(0,vwt.default)(this.options,s.options),o=this.createGroup(n,i.marginTop,this.svg);this.setGroupOptions(o,i),this.drawSvgBarcode(o,i,s),this.drawSVGText(o,i,s),n+=s.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,fP.calculateEncodingAttributes)(this.encodings,this.options);var n=(0,fP.getTotalWidthOfEncodings)(this.encodings),r=(0,fP.getMaximumHeightOfEncodings)(this.encodings),s=n+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(s,r),this.options.background&&this.drawRect(0,0,s,r,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(n,r,s){var i=s.data,o;r.textPosition=="top"?o=r.fontSize+r.textMargin:o=0;for(var a=0,l=0,c=0;c<i.length;c++)l=c*r.width+s.barcodePadding,i[c]==="1"?a++:a>0&&(this.drawRect(l-r.width*a,o,r.width*a,r.height,n),a=0);a>0&&this.drawRect(l-r.width*(a-1),o,r.width*a,r.height,n)}},{key:"drawSVGText",value:function(n,r,s){var i=this.document.createElementNS(VC,"text");if(r.displayValue){var o,a;i.setAttribute("style","font:"+r.fontOptions+" "+r.fontSize+"px "+r.font),r.textPosition=="top"?a=r.fontSize-r.textMargin:a=r.height+r.textMargin+r.fontSize,r.textAlign=="left"||s.barcodePadding>0?(o=0,i.setAttribute("text-anchor","start")):r.textAlign=="right"?(o=s.width-1,i.setAttribute("text-anchor","end")):(o=s.width/2,i.setAttribute("text-anchor","middle")),i.setAttribute("x",o),i.setAttribute("y",a),i.appendChild(this.document.createTextNode(s.text)),n.appendChild(i)}}},{key:"setSvgAttributes",value:function(n,r){var s=this.svg;s.setAttribute("width",n+"px"),s.setAttribute("height",r+"px"),s.setAttribute("x","0px"),s.setAttribute("y","0px"),s.setAttribute("viewBox","0 0 "+n+" "+r),s.setAttribute("xmlns",VC),s.setAttribute("version","1.1"),s.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(n,r,s){var i=this.document.createElementNS(VC,"g");return i.setAttribute("transform","translate("+n+", "+r+")"),s.appendChild(i),i}},{key:"setGroupOptions",value:function(n,r){n.setAttribute("style","fill:"+r.lineColor+";")}},{key:"drawRect",value:function(n,r,s,i,o){var a=this.document.createElementNS(VC,"rect");return a.setAttribute("x",n),a.setAttribute("y",r),a.setAttribute("width",s),a.setAttribute("height",i),o.appendChild(a),a}}]),t}();vz.default=wwt;var xz={};Object.defineProperty(xz,"__esModule",{value:!0});var Swt=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function Cwt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Nwt=function(){function t(e,n,r){Cwt(this,t),this.object=e,this.encodings=n,this.options=r}return Swt(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();xz.default=Nwt;Object.defineProperty(gz,"__esModule",{value:!0});var _wt=yz,Twt=bz(_wt),kwt=vz,Ewt=bz(kwt),$wt=xz,Awt=bz($wt);function bz(t){return t&&t.__esModule?t:{default:t}}gz.default={CanvasRenderer:Twt.default,SVGRenderer:Ewt.default,ObjectRenderer:Awt.default};var Mv={};Object.defineProperty(Mv,"__esModule",{value:!0});function wz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sz(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Cz(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Iwt=function(t){Cz(e,t);function e(n,r){wz(this,e);var s=Sz(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.name="InvalidInputException",s.symbology=n,s.input=r,s.message='"'+s.input+'" is not a valid input for '+s.symbology,s}return e}(Error),Owt=function(t){Cz(e,t);function e(){wz(this,e);var n=Sz(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="InvalidElementException",n.message="Not supported type to render on",n}return e}(Error),Pwt=function(t){Cz(e,t);function e(){wz(this,e);var n=Sz(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="NoElementException",n.message="No element to render on.",n}return e}(Error);Mv.InvalidInputException=Iwt;Mv.InvalidElementException=Owt;Mv.NoElementException=Pwt;Object.defineProperty(pz,"__esModule",{value:!0});var Rwt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dwt=mz,DM=_ye(Dwt),jwt=gz,Qx=_ye(jwt),Mwt=Mv;function _ye(t){return t&&t.__esModule?t:{default:t}}function Nz(t){if(typeof t=="string")return Fwt(t);if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n++)e.push(Nz(t[n]));return e}else{if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLImageElement)return Lwt(t);if(t&&t.nodeName&&t.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&t instanceof SVGElement)return{element:t,options:(0,DM.default)(t),renderer:Qx.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement)return{element:t,options:(0,DM.default)(t),renderer:Qx.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:Qx.default.CanvasRenderer};if(t&&(typeof t>"u"?"undefined":Rwt(t))==="object"&&!t.nodeName)return{element:t,renderer:Qx.default.ObjectRenderer};throw new Mwt.InvalidElementException}}function Fwt(t){var e=document.querySelectorAll(t);if(e.length!==0){for(var n=[],r=0;r<e.length;r++)n.push(Nz(e[r]));return n}}function Lwt(t){var e=document.createElement("canvas");return{element:e,options:(0,DM.default)(t),renderer:Qx.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}}pz.default=Nz;var _z={};Object.defineProperty(_z,"__esModule",{value:!0});var Bwt=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function zwt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Vwt=function(){function t(e){zwt(this,t),this.api=e}return Bwt(t,[{key:"handleCatch",value:function(n){if(n.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw n.message;else throw n;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(n){try{var r=n.apply(void 0,arguments);return this.api._options.valid(!0),r}catch(s){return this.handleCatch(s),this.api}}}]),t}();_z.default=Vwt;var Wwt=XB,qh=Pf(Wwt),Uwt=jv,yw=Pf(Uwt),Gwt=fz,Tye=Pf(Gwt),Hwt=hz,bK=Pf(Hwt),qwt=pz,Kwt=Pf(qwt),Xwt=g$,Ywt=Pf(Xwt),Qwt=_z,Zwt=Pf(Qwt),kye=Mv,Jwt=y$,Eye=Pf(Jwt);function Pf(t){return t&&t.__esModule?t:{default:t}}var vu=function(){},v$=function(e,n,r){var s=new vu;if(typeof e>"u")throw Error("No element to render on was provided.");return s._renderProperties=(0,Kwt.default)(e),s._encodings=[],s._options=Eye.default,s._errorHandler=new Zwt.default(s),typeof n<"u"&&(r=r||{},r.format||(r.format=Aye()),s.options(r)[r.format](n,r).render()),s};v$.getModule=function(t){return qh.default[t]};for(var wK in qh.default)qh.default.hasOwnProperty(wK)&&eSt(qh.default,wK);function eSt(t,e){vu.prototype[e]=vu.prototype[e.toUpperCase()]=vu.prototype[e.toLowerCase()]=function(n,r){var s=this;return s._errorHandler.wrapBarcodeCall(function(){r.text=typeof r.text>"u"?void 0:""+r.text;var i=(0,yw.default)(s._options,r);i=(0,Ywt.default)(i);var o=t[e],a=$ye(n,o,i);return s._encodings.push(a),s})}}function $ye(t,e,n){t=""+t;var r=new e(t,n);if(!r.valid())throw new kye.InvalidInputException(r.constructor.name,t);var s=r.encode();s=(0,Tye.default)(s);for(var i=0;i<s.length;i++)s[i].options=(0,yw.default)(n,s[i].options);return s}function Aye(){return qh.default.CODE128?"CODE128":Object.keys(qh.default)[0]}vu.prototype.options=function(t){return this._options=(0,yw.default)(this._options,t),this};vu.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this};vu.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var t;for(var e in this._renderProperties){t=this._renderProperties[e];var n=(0,yw.default)(this._options,t.options);n.format=="auto"&&(n.format=Aye()),this._errorHandler.wrapBarcodeCall(function(){var r=n.value,s=qh.default[n.format.toUpperCase()],i=$ye(r,s,n);jM(t,i,n)})}}};vu.prototype.render=function(){if(!this._renderProperties)throw new kye.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)jM(this._renderProperties[t],this._encodings,this._options);else jM(this._renderProperties,this._encodings,this._options);return this};vu.prototype._defaults=Eye.default;function jM(t,e,n){e=(0,Tye.default)(e);for(var r=0;r<e.length;r++)e[r].options=(0,yw.default)(n,e[r].options),(0,bK.default)(e[r].options);(0,bK.default)(n);var s=t.renderer,i=new s(t.element,e,n);i.render(),t.afterRender&&t.afterRender()}typeof window<"u"&&(window.JsBarcode=v$);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(t,e){var n=[];return jQuery(this).each(function(){n.push(this)}),v$(n,t,e)});var Iye=v$;const tSt=nn(Iye);function L2(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?L2=function(n){return typeof n}:L2=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},L2(t)}var Nm=Tz(N),nSt=Tz(Iye),gr=Tz(gE);function Tz(t){return t&&t.__esModule?t:{default:t}}function rSt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sSt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function iSt(t,e,n){return e&&sSt(t.prototype,e),t}function oSt(t,e){return e&&(L2(e)==="object"||typeof e=="function")?e:Oye(t)}function MM(t){return MM=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},MM(t)}function Oye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aSt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&FM(t,e)}function FM(t,e){return FM=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},FM(t,e)}var LM,hP=Nm.default.version.split(/[.-]/);hP[0]==="0"&&(hP[1]==="13"||hP[1]==="12")?LM=function(e){return e.getDOMNode()}:LM=function(e){return e};var kz=function(t){aSt(e,t);function e(n){var r;return rSt(this,e),r=oSt(this,MM(e).call(this,n)),r.renderElementRef=Nm.default.createRef(),r.update=r.update.bind(Oye(r)),r}return iSt(e,[{key:"shouldComponentUpdate",value:function(r){var s=this;return Object.keys(e.propTypes).some(function(i){return s.props[i]!==r[i]})}},{key:"componentDidMount",value:function(){this.update()}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"update",value:function(){var r=LM(this.renderElementRef.current);try{new nSt.default(r,this.props.value,Object.assign({},this.props))}catch(s){window.console.error(s)}}},{key:"render",value:function(){var r=this.props,s=r.id,i=r.className;if(this.props.renderer==="svg")return Nm.default.createElement("svg",{ref:this.renderElementRef,id:s,className:i});if(this.props.renderer==="canvas")return Nm.default.createElement("canvas",{ref:this.renderElementRef,id:s,className:i});if(this.props.renderer==="img")return Nm.default.createElement("img",{ref:this.renderElementRef,id:s,className:i})}}]),e}(Nm.default.Component);kz.propTypes={value:gr.default.string.isRequired,renderer:gr.default.string,format:gr.default.string,width:gr.default.number,height:gr.default.number,displayValue:gr.default.bool,fontOptions:gr.default.string,font:gr.default.string,textAlign:gr.default.string,textPosition:gr.default.string,textMargin:gr.default.number,fontSize:gr.default.number,background:gr.default.string,lineColor:gr.default.string,margin:gr.default.number,marginTop:gr.default.number,marginBottom:gr.default.number,marginLeft:gr.default.number,marginRight:gr.default.number,id:gr.default.string,className:gr.default.string,ean128:gr.default.bool};kz.defaultProps={format:"CODE128",renderer:"svg",width:2,height:100,displayValue:!0,fontOptions:"",font:"monospace",textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,className:"",ean128:!1};var lSt=kz;const cSt=nn(lSt);var x$={},Pye={L:1,M:0,Q:3,H:2},Rye={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},uSt=Rye;function Dye(t){this.mode=uSt.MODE_8BIT_BYTE,this.data=t}Dye.prototype={getLength:function(t){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}};var dSt=Dye,WC=Pye;function Jl(t,e){this.totalCount=t,this.dataCount=e}Jl.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Jl.getRSBlocks=function(t,e){var n=Jl.getRsBlockTable(t,e);if(n==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var r=n.length/3,s=new Array,i=0;i<r;i++)for(var o=n[i*3+0],a=n[i*3+1],l=n[i*3+2],c=0;c<o;c++)s.push(new Jl(a,l));return s};Jl.getRsBlockTable=function(t,e){switch(e){case WC.L:return Jl.RS_BLOCK_TABLE[(t-1)*4+0];case WC.M:return Jl.RS_BLOCK_TABLE[(t-1)*4+1];case WC.Q:return Jl.RS_BLOCK_TABLE[(t-1)*4+2];case WC.H:return Jl.RS_BLOCK_TABLE[(t-1)*4+3];default:return}};var fSt=Jl;function jye(){this.buffer=new Array,this.length=0}jye.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1},put:function(t,e){for(var n=0;n<e;n++)this.putBit((t>>>e-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var hSt=jye,il={glog:function(t){if(t<1)throw new Error("glog("+t+")");return il.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return il.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var Is=0;Is<8;Is++)il.EXP_TABLE[Is]=1<<Is;for(var Is=8;Is<256;Is++)il.EXP_TABLE[Is]=il.EXP_TABLE[Is-4]^il.EXP_TABLE[Is-5]^il.EXP_TABLE[Is-6]^il.EXP_TABLE[Is-8];for(var Is=0;Is<255;Is++)il.LOG_TABLE[il.EXP_TABLE[Is]]=Is;var Mye=il,eh=Mye;function B2(t,e){if(t.length==null)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&t[n]==0;)n++;this.num=new Array(t.length-n+e);for(var r=0;r<t.length-n;r++)this.num[r]=t[r+n]}B2.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<t.getLength();r++)e[n+r]^=eh.gexp(eh.glog(this.get(n))+eh.glog(t.get(r)));return new B2(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=eh.glog(this.get(0))-eh.glog(t.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(var r=0;r<t.getLength();r++)n[r]^=eh.gexp(eh.glog(t.get(r))+e);return new B2(n,0).mod(t)}};var Fye=B2,Ko=Rye,SK=Fye,pSt=Mye,nd={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},Ts={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;Ts.getBCHDigit(e)-Ts.getBCHDigit(Ts.G15)>=0;)e^=Ts.G15<<Ts.getBCHDigit(e)-Ts.getBCHDigit(Ts.G15);return(t<<10|e)^Ts.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;Ts.getBCHDigit(e)-Ts.getBCHDigit(Ts.G18)>=0;)e^=Ts.G18<<Ts.getBCHDigit(e)-Ts.getBCHDigit(Ts.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;t!=0;)e++,t>>>=1;return e},getPatternPosition:function(t){return Ts.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case nd.PATTERN000:return(e+n)%2==0;case nd.PATTERN001:return e%2==0;case nd.PATTERN010:return n%3==0;case nd.PATTERN011:return(e+n)%3==0;case nd.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case nd.PATTERN101:return e*n%2+e*n%3==0;case nd.PATTERN110:return(e*n%2+e*n%3)%2==0;case nd.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new SK([1],0),n=0;n<t;n++)e=e.multiply(new SK([1,pSt.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case Ko.MODE_NUMBER:return 10;case Ko.MODE_ALPHA_NUM:return 9;case Ko.MODE_8BIT_BYTE:return 8;case Ko.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case Ko.MODE_NUMBER:return 12;case Ko.MODE_ALPHA_NUM:return 11;case Ko.MODE_8BIT_BYTE:return 16;case Ko.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else if(e<41)switch(t){case Ko.MODE_NUMBER:return 14;case Ko.MODE_ALPHA_NUM:return 13;case Ko.MODE_8BIT_BYTE:return 16;case Ko.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}else throw new Error("type:"+e)},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r++)for(var s=0;s<e;s++){for(var i=0,o=t.isDark(r,s),a=-1;a<=1;a++)if(!(r+a<0||e<=r+a))for(var l=-1;l<=1;l++)s+l<0||e<=s+l||a==0&&l==0||o==t.isDark(r+a,s+l)&&i++;i>5&&(n+=3+i-5)}for(var r=0;r<e-1;r++)for(var s=0;s<e-1;s++){var c=0;t.isDark(r,s)&&c++,t.isDark(r+1,s)&&c++,t.isDark(r,s+1)&&c++,t.isDark(r+1,s+1)&&c++,(c==0||c==4)&&(n+=3)}for(var r=0;r<e;r++)for(var s=0;s<e-6;s++)t.isDark(r,s)&&!t.isDark(r,s+1)&&t.isDark(r,s+2)&&t.isDark(r,s+3)&&t.isDark(r,s+4)&&!t.isDark(r,s+5)&&t.isDark(r,s+6)&&(n+=40);for(var s=0;s<e;s++)for(var r=0;r<e-6;r++)t.isDark(r,s)&&!t.isDark(r+1,s)&&t.isDark(r+2,s)&&t.isDark(r+3,s)&&t.isDark(r+4,s)&&!t.isDark(r+5,s)&&t.isDark(r+6,s)&&(n+=40);for(var u=0,s=0;s<e;s++)for(var r=0;r<e;r++)t.isDark(r,s)&&u++;var d=Math.abs(100*u/e/e-50)/5;return n+=d*10,n}},mSt=Ts,gSt=dSt,Lye=fSt,Bye=hSt,Rf=mSt,ySt=Fye;function ic(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var zo=ic.prototype;zo.addData=function(t){var e=new gSt(t);this.dataList.push(e),this.dataCache=null};zo.isDark=function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]};zo.getModuleCount=function(){return this.moduleCount};zo.make=function(){if(this.typeNumber<1){var t=1;for(t=1;t<40;t++){for(var e=Lye.getRSBlocks(t,this.errorCorrectLevel),n=new Bye,r=0,s=0;s<e.length;s++)r+=e[s].dataCount;for(var s=0;s<this.dataList.length;s++){var i=this.dataList[s];n.put(i.mode,4),n.put(i.getLength(),Rf.getLengthInBits(i.mode,t)),i.write(n)}if(n.getLengthInBits()<=r*8)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())};zo.makeImpl=function(t,e){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=ic.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)};zo.setupPositionProbePattern=function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var r=-1;r<=7;r++)e+r<=-1||this.moduleCount<=e+r||(0<=n&&n<=6&&(r==0||r==6)||0<=r&&r<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=r&&r<=4?this.modules[t+n][e+r]=!0:this.modules[t+n][e+r]=!1)};zo.getBestMaskPattern=function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=Rf.getLostPoint(this);(n==0||t>r)&&(t=r,e=n)}return e};zo.createMovieClip=function(t,e,n){var r=t.createEmptyMovieClip(e,n),s=1;this.make();for(var i=0;i<this.modules.length;i++)for(var o=i*s,a=0;a<this.modules[i].length;a++){var l=a*s,c=this.modules[i][a];c&&(r.beginFill(0,100),r.moveTo(l,o),r.lineTo(l+s,o),r.lineTo(l+s,o+s),r.lineTo(l,o+s),r.endFill())}return r};zo.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)this.modules[6][e]==null&&(this.modules[6][e]=e%2==0)};zo.setupPositionAdjustPattern=function(){for(var t=Rf.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var r=t[e],s=t[n];if(this.modules[r][s]==null)for(var i=-2;i<=2;i++)for(var o=-2;o<=2;o++)i==-2||i==2||o==-2||o==2||i==0&&o==0?this.modules[r+i][s+o]=!0:this.modules[r+i][s+o]=!1}};zo.setupTypeNumber=function(t){for(var e=Rf.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!t&&(e>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(var n=0;n<18;n++){var r=!t&&(e>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}};zo.setupTypeInfo=function(t,e){for(var n=this.errorCorrectLevel<<3|e,r=Rf.getBCHTypeInfo(n),s=0;s<15;s++){var i=!t&&(r>>s&1)==1;s<6?this.modules[s][8]=i:s<8?this.modules[s+1][8]=i:this.modules[this.moduleCount-15+s][8]=i}for(var s=0;s<15;s++){var i=!t&&(r>>s&1)==1;s<8?this.modules[8][this.moduleCount-s-1]=i:s<9?this.modules[8][15-s-1+1]=i:this.modules[8][15-s-1]=i}this.modules[this.moduleCount-8][8]=!t};zo.mapData=function(t,e){for(var n=-1,r=this.moduleCount-1,s=7,i=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var a=0;a<2;a++)if(this.modules[r][o-a]==null){var l=!1;i<t.length&&(l=(t[i]>>>s&1)==1);var c=Rf.getMask(e,r,o-a);c&&(l=!l),this.modules[r][o-a]=l,s--,s==-1&&(i++,s=7)}if(r+=n,r<0||this.moduleCount<=r){r-=n,n=-n;break}}};ic.PAD0=236;ic.PAD1=17;ic.createData=function(t,e,n){for(var r=Lye.getRSBlocks(t,e),s=new Bye,i=0;i<n.length;i++){var o=n[i];s.put(o.mode,4),s.put(o.getLength(),Rf.getLengthInBits(o.mode,t)),o.write(s)}for(var a=0,i=0;i<r.length;i++)a+=r[i].dataCount;if(s.getLengthInBits()>a*8)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+a*8+")");for(s.getLengthInBits()+4<=a*8&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;!(s.getLengthInBits()>=a*8||(s.put(ic.PAD0,8),s.getLengthInBits()>=a*8));)s.put(ic.PAD1,8);return ic.createBytes(s,r)};ic.createBytes=function(t,e){for(var n=0,r=0,s=0,i=new Array(e.length),o=new Array(e.length),a=0;a<e.length;a++){var l=e[a].dataCount,c=e[a].totalCount-l;r=Math.max(r,l),s=Math.max(s,c),i[a]=new Array(l);for(var u=0;u<i[a].length;u++)i[a][u]=255&t.buffer[u+n];n+=l;var d=Rf.getErrorCorrectPolynomial(c),h=new ySt(i[a],d.getLength()-1),p=h.mod(d);o[a]=new Array(d.getLength()-1);for(var u=0;u<o[a].length;u++){var m=u+p.getLength()-o[a].length;o[a][u]=m>=0?p.get(m):0}}for(var g=0,u=0;u<e.length;u++)g+=e[u].totalCount;for(var y=new Array(g),v=0,u=0;u<r;u++)for(var a=0;a<e.length;a++)u<i[a].length&&(y[v++]=i[a][u]);for(var u=0;u<s;u++)for(var a=0;a<e.length;a++)u<o[a].length&&(y[v++]=o[a][u]);return y};var vSt=ic,Ez={};Object.defineProperty(Ez,"__esModule",{value:!0});var xSt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bSt=gE,Xo=Vye(bSt),zye=N,UC=Vye(zye);function Vye(t){return t&&t.__esModule?t:{default:t}}function wSt(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var SSt={bgColor:Xo.default.oneOfType([Xo.default.object,Xo.default.string]).isRequired,bgD:Xo.default.string.isRequired,fgColor:Xo.default.oneOfType([Xo.default.object,Xo.default.string]).isRequired,fgD:Xo.default.string.isRequired,size:Xo.default.number.isRequired,title:Xo.default.string,viewBoxSize:Xo.default.number.isRequired,xmlns:Xo.default.string},$z=(0,zye.forwardRef)(function(t,e){var n=t.bgColor,r=t.bgD,s=t.fgD,i=t.fgColor,o=t.size,a=t.title,l=t.viewBoxSize,c=t.xmlns,u=c===void 0?"http://www.w3.org/2000/svg":c,d=wSt(t,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return UC.default.createElement("svg",xSt({},d,{height:o,ref:e,viewBox:"0 0 "+l+" "+l,width:o,xmlns:u}),a?UC.default.createElement("title",null,a):null,UC.default.createElement("path",{d:r,fill:n}),UC.default.createElement("path",{d:s,fill:i}))});$z.displayName="QRCodeSvg";$z.propTypes=SSt;Ez.default=$z;Object.defineProperty(x$,"__esModule",{value:!0});x$.QRCode=void 0;var CSt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NSt=gE,Hc=vw(NSt),_St=Pye,TSt=vw(_St),kSt=vSt,ESt=vw(kSt),Wye=N,$St=vw(Wye),ASt=Ez,ISt=vw(ASt);function vw(t){return t&&t.__esModule?t:{default:t}}function OSt(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var PSt={bgColor:Hc.default.oneOfType([Hc.default.object,Hc.default.string]),fgColor:Hc.default.oneOfType([Hc.default.object,Hc.default.string]),level:Hc.default.string,size:Hc.default.number,value:Hc.default.string.isRequired},b$=(0,Wye.forwardRef)(function(t,e){var n=t.bgColor,r=n===void 0?"#FFFFFF":n,s=t.fgColor,i=s===void 0?"#000000":s,o=t.level,a=o===void 0?"L":o,l=t.size,c=l===void 0?256:l,u=t.value,d=OSt(t,["bgColor","fgColor","level","size","value"]),h=new ESt.default(-1,TSt.default[a]);h.addData(u),h.make();var p=h.modules;return $St.default.createElement(ISt.default,CSt({},d,{bgColor:r,bgD:p.map(function(m,g){return m.map(function(y,v){return y?"":"M "+v+" "+g+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:i,fgD:p.map(function(m,g){return m.map(function(y,v){return y?"M "+v+" "+g+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:e,size:c,viewBoxSize:p.length}))});x$.QRCode=b$;b$.displayName="QRCode";b$.propTypes=PSt;var RSt=x$.default=b$;const DSt=()=>{const{toast:t}=cs(),[e,n]=N.useState("barcode"),[r,s]=N.useState("123456789012"),[i,o]=N.useState(1),[a,l]=N.useState("medium"),[c,u]=N.useState([]),d=N.useRef(null);N.useRef(null),N.useEffect(()=>{const w=localStorage.getItem("savedCodes");w&&u(JSON.parse(w))},[]),N.useEffect(()=>{localStorage.setItem("savedCodes",JSON.stringify(c))},[c]);const h=zE.useReactToPrint({content:()=>d.current,documentTitle:"باركود",onBeforeGetContent:()=>new Promise(w=>{console.log("التحضير للطباعة..."),console.log("مرجع الطباعة موجود:",!!d.current),d.current||console.error("مرجع الطباعة غير موجود!"),setTimeout(()=>{w()},500)}),onPrintError:(w,C)=>{console.error(`خطأ في الطباعة (${w}):`,C),t({title:"فشل في الطباعة",description:`حدث خطأ أثناء محاولة الطباعة: ${C.message||"خطأ غير معروف"}`,variant:"destructive"})},onAfterPrint:()=>{t({title:"تمت الطباعة بنجاح",description:"تم إرسال الباركود إلى الطابعة"})},removeAfterPrint:!1}),p=()=>{if(!r){t({title:"خطأ",description:"الرجاء إدخال محتوى الباركود",variant:"destructive"});return}const w={id:Date.now(),type:e,content:r,date:new Date().toLocaleString("ar-IQ"),size:a};u([...c,w]),t({title:"تم الحفظ",description:"تم حفظ الباركود بنجاح"})},m=w=>{u(c.filter(C=>C.id!==w)),t({title:"تم الحذف",description:"تم حذف الباركود بنجاح"})},g=w=>{const C=c.find(_=>_.id===w);C&&(n(C.type),s(C.content),l(C.size),setTimeout(()=>{console.log("جاري محاولة الطباعة للباركود:",C.content),console.log("مرجع الطباعة موجود:",!!d.current),d.current?h():t({title:"خطأ في الطباعة",description:"لا يمكن العثور على محتوى للطباعة",variant:"destructive"})},500))},y=()=>{switch(a){case"small":return 1;case"medium":return 2;case"large":return 3;default:return 2}},v=()=>{switch(a){case"small":return 100;case"medium":return 150;case"large":return 200;default:return 150}},x=()=>e==="barcode"?f.jsx(cSt,{value:r||"123456789012",width:y(),height:y()*40,fontSize:y()*8,margin:10}):f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx(RSt,{value:r||"https://example.com",size:v(),level:"M"}),f.jsx("div",{className:"mt-2 text-center",children:r})]}),b=()=>r?Array.from({length:i},(w,C)=>f.jsx("div",{className:"barcode-item print-item",style:{padding:"10px",margin:"5px 0",textAlign:"center",breakInside:"avoid",pageBreakInside:"avoid"},children:x()},C)):f.jsx("div",{children:"لا يوجد محتوى للطباعة"}),S=()=>{if(!r){t({title:"تنبيه",description:"يرجى إدخال محتوى الباركود أولاً",variant:"destructive"});return}console.log("جاري محاولة الطباعة للمحتوى:",r),console.log("مرجع الطباعة موجود:",!!d.current),d.current?h():t({title:"خطأ في الطباعة",description:"لا يمكن العثور على محتوى للطباعة",variant:"destructive"})};return f.jsxs("div",{className:"container mx-auto py-6",children:[f.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"نظام الباركود"}),f.jsx("div",{style:{position:"absolute",left:"-9999px",top:0},className:"print-container",children:f.jsx("div",{ref:d,style:{width:"100%",padding:"20px"},children:f.jsx("div",{className:"flex flex-col items-center justify-center",children:b()})})}),f.jsxs(Dc,{defaultValue:"generate",className:"w-full",children:[f.jsxs(Al,{className:"grid w-full grid-cols-3",children:[f.jsx(Ln,{value:"generate",children:"إنشاء باركود"}),f.jsx(Ln,{value:"saved",children:"الباركودات المحفوظة"}),f.jsx(Ln,{value:"print",children:"صفحة الطباعة"})]}),f.jsx(Cr,{value:"generate",children:f.jsxs(Le,{children:[f.jsx(Ye,{children:f.jsx(Qe,{children:"إنشاء باركود جديد"})}),f.jsx(Ue,{className:"space-y-4",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"barcodeType",children:"نوع الباركود"}),f.jsxs(sr,{value:e,onValueChange:w=>n(w),children:[f.jsx(Yn,{id:"barcodeType",children:f.jsx(ir,{placeholder:"اختر نوع الباركود"})}),f.jsxs(Qn,{children:[f.jsx(Je,{value:"barcode",children:"باركود خطي"}),f.jsx(Je,{value:"qrcode",children:"رمز QR"})]})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"barcodeContent",children:"محتوى الباركود"}),f.jsx(Oe,{id:"barcodeContent",value:r,onChange:w=>s(w.target.value),placeholder:e==="barcode"?"أدخل رقم المنتج أو الباركود":"أدخل النص أو رابط URL"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"barcodeSize",children:"حجم الباركود"}),f.jsxs(sr,{value:a,onValueChange:w=>l(w),children:[f.jsx(Yn,{id:"barcodeSize",children:f.jsx(ir,{placeholder:"اختر حجم الباركود"})}),f.jsxs(Qn,{children:[f.jsx(Je,{value:"small",children:"صغير"}),f.jsx(Je,{value:"medium",children:"متوسط"}),f.jsx(Je,{value:"large",children:"كبير"})]})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"quantity",children:"عدد النسخ للطباعة"}),f.jsx(Oe,{id:"quantity",type:"number",min:1,max:100,value:i,onChange:w=>o(parseInt(w.target.value)||1)})]}),f.jsxs("div",{className:"flex space-x-2 rtl:space-x-reverse",children:[f.jsx($e,{onClick:p,children:"حفظ الباركود"}),f.jsx($e,{variant:"outline",onClick:S,children:f.jsx("span",{children:"طباعة"})})]})]}),f.jsxs("div",{className:"flex flex-col items-center justify-center p-4 border rounded-lg",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:"معاينة الباركود"}),f.jsx("div",{className:"p-4 bg-white rounded-lg shadow-sm",children:x()})]})]})})]})}),f.jsx(Cr,{value:"saved",children:f.jsxs(Le,{children:[f.jsx(Ye,{children:f.jsx(Qe,{children:"الباركودات المحفوظة"})}),f.jsx(Ue,{children:c.length===0?f.jsx("div",{className:"text-center py-4",children:"لا يوجد باركودات محفوظة"}):f.jsxs($a,{children:[f.jsx(Aa,{children:f.jsxs(dn,{children:[f.jsx(tt,{children:"النوع"}),f.jsx(tt,{children:"المحتوى"}),f.jsx(tt,{children:"تاريخ الإنشاء"}),f.jsx(tt,{children:"الحجم"}),f.jsx(tt,{children:"الإجراءات"})]})}),f.jsx(Ia,{children:c.map(w=>f.jsxs(dn,{children:[f.jsx(We,{children:w.type==="barcode"?"باركود خطي":"رمز QR"}),f.jsx(We,{children:w.content}),f.jsx(We,{children:w.date}),f.jsx(We,{children:w.size==="small"?"صغير":w.size==="medium"?"متوسط":"كبير"}),f.jsx(We,{children:f.jsxs("div",{className:"flex space-x-2 rtl:space-x-reverse",children:[f.jsx($e,{variant:"outline",size:"sm",onClick:()=>g(w.id),children:"طباعة"}),f.jsx($e,{variant:"destructive",size:"sm",onClick:()=>m(w.id),children:"حذف"})]})})]},w.id))})]})})]})}),f.jsx(Cr,{value:"print",children:f.jsxs(Le,{children:[f.jsx(Ye,{children:f.jsx(Qe,{children:"صفحة الطباعة"})}),f.jsxs(Ue,{children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("p",{className:"text-muted-foreground mb-2",children:"يمكنك طباعة الباركود الحالي عدة مرات على نفس الصفحة."}),f.jsx("div",{className:"flex space-x-2 rtl:space-x-reverse",children:f.jsx($e,{onClick:S,children:"طباعة الباركود"})})]}),f.jsxs("div",{className:"border p-4 rounded-lg",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:"معاينة الطباعة"}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Array.from({length:Math.min(6,i)}).map((w,C)=>f.jsx("div",{className:"flex flex-col items-center justify-center p-2 border rounded",children:x()},C))}),i>6&&f.jsxs("p",{className:"text-center mt-4 text-sm text-muted-foreground",children:["+ ",i-6," باركود إضافي للطباعة"]})]})]})]})})]})]})};function CK({date:t,onSelect:e}){return f.jsxs(ov,{children:[f.jsx(av,{asChild:!0,children:f.jsxs($e,{variant:"outline",className:pe("w-full justify-start text-right font-normal",!t&&"text-muted-foreground"),children:[f.jsx(Dp,{className:"h-4 w-4 ml-2"}),t?un(t,"PPP"):f.jsx("span",{children:"اختر تاريخ"})]})}),f.jsx(jp,{className:"w-auto p-0",align:"start",children:f.jsx(cf,{mode:"single",selected:t,onSelect:e,initialFocus:!0})})]})}function jSt(){Sf();const{toast:t}=cs(),[e,n]=N.useState(null),[r,s]=N.useState([]),[i,o]=N.useState(!1),a=N.useRef(null),l=N.useRef(null),c=bl({defaultValues:{code:"",discountPercentage:10,validFrom:new Date,validTo:new Date(Date.now()+30*24*60*60*1e3),maxUses:100,description:""}}),u=zE.useReactToPrint({content:()=>a.current,onBeforeGetContent:()=>new Promise(h=>{l.current&&e&&tSt(l.current,e.code,{format:"CODE128",width:2,height:80,displayValue:!0,font:"monospace",fontSize:14,margin:10}),o(!0),h()}),onAfterPrint:()=>{o(!1)},pageStyle:`
      @page {
        size: 80mm 30mm;
        margin: 0;
      }
      @media print {
        body {
          margin: 0;
          padding: 0;
        }
        .discount-code-print {
          width: 100%;
          text-align: center;
        }
      }
    `}),d=async h=>{const p={id:Date.now().toString(),...h,currentUses:0};s([...r,p]),c.reset(),t({title:"تم إنشاء كود الخصم",description:`تم إنشاء كود الخصم ${p.code} بنجاح`})};return f.jsxs("div",{className:"flex h-screen",children:[f.jsx("div",{className:"w-64 h-full",children:f.jsx(kc,{})}),f.jsx("main",{className:"flex-1 p-8",children:f.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-3xl font-bold",children:"أكواد الخصم"}),f.jsx("p",{className:"text-muted-foreground",children:"إنشاء وإدارة أكواد الخصم مع إمكانية طباعة الباركود"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs(Le,{children:[f.jsx(Ye,{children:f.jsx(Qe,{children:"إنشاء كود خصم جديد"})}),f.jsx(Ue,{children:f.jsx(Cc,{...c,children:f.jsxs("form",{onSubmit:c.handleSubmit(d),className:"space-y-4",children:[f.jsx(It,{control:c.control,name:"code",render:({field:h})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"كود الخصم"}),f.jsx(Ot,{children:f.jsx(Oe,{...h,placeholder:"مثال: SALE2025",dir:"ltr"})}),f.jsx($t,{})]})}),f.jsx(It,{control:c.control,name:"discountPercentage",render:({field:h})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"نسبة الخصم (%)"}),f.jsx(Ot,{children:f.jsx(Oe,{...h,type:"number",min:"0",max:"100"})}),f.jsx($t,{})]})}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsx(It,{control:c.control,name:"validFrom",render:({field:h})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"تاريخ البداية"}),f.jsx(Ot,{children:f.jsx(CK,{date:h.value,onSelect:h.onChange})}),f.jsx($t,{})]})}),f.jsx(It,{control:c.control,name:"validTo",render:({field:h})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"تاريخ الانتهاء"}),f.jsx(Ot,{children:f.jsx(CK,{date:h.value,onSelect:h.onChange})}),f.jsx($t,{})]})})]}),f.jsx(It,{control:c.control,name:"maxUses",render:({field:h})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"الحد الأقصى للاستخدام"}),f.jsx(Ot,{children:f.jsx(Oe,{...h,type:"number",min:"1"})}),f.jsx($t,{})]})}),f.jsx(It,{control:c.control,name:"description",render:({field:h})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"الوصف"}),f.jsx(Ot,{children:f.jsx(Oe,{...h,placeholder:"وصف العرض أو الخصم"})}),f.jsx($t,{})]})}),f.jsxs($e,{type:"submit",className:"w-full",children:[f.jsx(xl,{className:"h-4 w-4 ml-2"}),"إنشاء كود خصم"]})]})})})]}),f.jsxs(Le,{children:[f.jsx(Ye,{children:f.jsx(Qe,{children:"أكواد الخصم الحالية"})}),f.jsx(Ue,{children:f.jsxs("div",{className:"space-y-4",children:[r.map(h=>f.jsxs("div",{className:"p-4 border rounded-lg hover:bg-accent cursor-pointer",onClick:()=>n(h),children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(XTe,{className:"h-4 w-4"}),f.jsx("span",{className:"font-medium",children:h.code})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(GTe,{className:"h-4 w-4"}),f.jsxs("span",{children:[h.discountPercentage,"%"]})]})]}),f.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Dp,{className:"h-4 w-4"}),f.jsx("span",{children:new Date(h.validTo).toLocaleDateString()})]}),f.jsxs("div",{children:[h.currentUses," / ",h.maxUses," استخدام"]})]}),f.jsxs($e,{variant:"outline",size:"sm",className:"mt-2",onClick:p=>{p.stopPropagation(),n(h),setTimeout(u,100)},children:[f.jsx(HTe,{className:"h-4 w-4 ml-2"}),"طباعة الباركود"]})]},h.id)),r.length===0&&f.jsx("div",{className:"text-center text-muted-foreground py-8",children:"لا توجد أكواد خصم حالياً"})]})})]})]}),f.jsx("div",{className:"hidden",children:f.jsx("div",{ref:a,className:"discount-code-print p-4",children:e&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"text-center mb-2",children:[f.jsx("div",{className:"font-bold",children:e.code}),f.jsx("div",{className:"text-sm",children:e.description}),f.jsxs("div",{className:"text-sm",children:["خصم ",e.discountPercentage,"%"]})]}),f.jsx("svg",{ref:l,className:"w-full"}),f.jsxs("div",{className:"text-sm mt-2",children:["صالح حتى: ",new Date(e.validTo).toLocaleDateString()]})]})})})]})})]})}const MSt=({children:t,className:e})=>f.jsx("div",{className:`text-sm text-muted-foreground ${e||""}`,children:t}),FSt=({children:t,className:e})=>f.jsx("div",{className:`flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 ${e||""}`,children:t});function LSt(){const{toast:t}=cs(),e=A1(),[n,r]=N.useState({name:"",phone:"",email:"",address:""}),[s,i]=N.useState(null),[o,a]=N.useState(""),{data:l=[],isLoading:c,error:u}=qt({queryKey:["/api/customers"],refetchInterval:3e4,queryFn:async()=>{try{const b=await fetch("/api/customers");if(!b.ok)throw new Error("فشل في جلب قائمة العملاء");const S=await b.json();return Array.isArray(S)?S:[]}catch(b){throw console.error("خطأ في جلب بيانات العملاء:",b),b}}}),d=Vr({mutationFn:async b=>wr("POST","/api/customers",b),onSuccess:()=>{t({title:"تم بنجاح",description:"تم إضافة العميل بنجاح"}),r({name:"",phone:"",email:"",address:""}),e.invalidateQueries({queryKey:["/api/customers"]})},onError:b=>{t({title:"خطأ",description:`فشل إضافة العميل: ${b instanceof Error?b.message:"حدث خطأ غير متوقع"}`,variant:"destructive"})}}),h=Vr({mutationFn:async b=>wr("PUT",`/api/customers/${b.id}`,b),onSuccess:()=>{t({title:"تم بنجاح",description:"تم تحديث بيانات العميل بنجاح"}),i(null),e.invalidateQueries({queryKey:["/api/customers"]})},onError:b=>{t({title:"خطأ",description:`فشل تحديث العميل: ${b instanceof Error?b.message:"حدث خطأ غير متوقع"}`,variant:"destructive"})}}),p=Vr({mutationFn:async b=>wr("DELETE",`/api/customers/${b}`),onSuccess:()=>{t({title:"تم بنجاح",description:"تم حذف العميل بنجاح"}),e.invalidateQueries({queryKey:["/api/customers"]})},onError:b=>{t({title:"خطأ",description:`فشل حذف العميل: ${b instanceof Error?b.message:"حدث خطأ غير متوقع"}`,variant:"destructive"})}}),m=b=>{const{name:S,value:w}=b.target;r(C=>({...C,[S]:w}))},g=b=>{b.preventDefault(),d.mutate(n)},y=b=>{b.preventDefault(),h.mutate(s)},v=b=>{window.confirm("هل أنت متأكد من حذف هذا العميل؟")&&p.mutate(b)},x=l.filter(b=>{var S,w,C;return((S=b.name)==null?void 0:S.toLowerCase().includes(o.toLowerCase()))||((w=b.phone)==null?void 0:w.includes(o))||((C=b.email)==null?void 0:C.toLowerCase().includes(o.toLowerCase()))});return f.jsxs("div",{className:"flex-1 space-y-4 p-4 md:p-8 pt-6",children:[f.jsx("div",{className:"flex items-center justify-between",children:f.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"إدارة العملاء"})}),f.jsxs(Dc,{defaultValue:"all",className:"space-y-4",children:[f.jsxs(Al,{children:[f.jsx(Ln,{value:"all",children:"جميع العملاء"}),f.jsx(Ln,{value:"add",children:"إضافة عميل"})]}),f.jsx(Cr,{value:"all",className:"space-y-4",children:f.jsxs(Le,{children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"قائمة العملاء"}),f.jsx(Kt,{children:"يمكنك البحث وإدارة جميع العملاء من هنا"}),f.jsx("div",{className:"flex w-full max-w-sm items-center space-x-2",children:f.jsx(Oe,{placeholder:"البحث عن عميل...",value:o,onChange:b=>a(b.target.value),className:"ml-2"})})]}),f.jsx(Ue,{children:c?f.jsx("div",{className:"text-center py-4",children:"جاري التحميل..."}):u?f.jsx("div",{className:"flex items-center justify-center h-40",children:f.jsxs("div",{className:"text-center",children:[f.jsx(pk,{className:"w-8 h-8 mx-auto text-red-500"}),f.jsx("p",{className:"mt-2",children:"حدث خطأ أثناء تحميل البيانات"})]})}):x.length===0?f.jsx("div",{className:"text-center py-4",children:"لا يوجد عملاء"}):f.jsxs($a,{children:[f.jsx(Aa,{children:f.jsxs(dn,{children:[f.jsx(tt,{children:"الاسم"}),f.jsx(tt,{children:"رقم الهاتف"}),f.jsx(tt,{children:"البريد الإلكتروني"}),f.jsx(tt,{children:"العنوان"}),f.jsx(tt,{children:"الإجراءات"})]})}),f.jsx(Ia,{children:x.map(b=>f.jsxs(dn,{children:[f.jsx(We,{children:b.name}),f.jsx(We,{children:b.phone}),f.jsx(We,{children:b.email}),f.jsx(We,{children:b.address}),f.jsx(We,{children:f.jsxs("div",{className:"flex space-x-2",children:[f.jsxs(hl,{children:[f.jsx(zp,{asChild:!0,children:f.jsx($e,{variant:"outline",size:"sm",onClick:()=>i(b),children:"تعديل"})}),f.jsxs(wa,{children:[f.jsxs(Sa,{children:[f.jsx(Ca,{children:"تعديل بيانات العميل"}),f.jsx(MSt,{children:"قم بتعديل بيانات العميل ثم اضغط حفظ"})]}),f.jsxs("form",{onSubmit:y,children:[f.jsxs("div",{className:"grid gap-4 py-4",children:[f.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[f.jsx(ot,{htmlFor:"edit-name",className:"text-right",children:"الاسم"}),f.jsx(Oe,{id:"edit-name",name:"name",value:(s==null?void 0:s.name)||"",onChange:S=>i(w=>({...w,name:S.target.value})),className:"col-span-3"})]}),f.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[f.jsx(ot,{htmlFor:"edit-phone",className:"text-right",children:"رقم الهاتف"}),f.jsx(Oe,{id:"edit-phone",name:"phone",value:(s==null?void 0:s.phone)||"",onChange:S=>i(w=>({...w,phone:S.target.value})),className:"col-span-3"})]}),f.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[f.jsx(ot,{htmlFor:"edit-email",className:"text-right",children:"البريد الإلكتروني"}),f.jsx(Oe,{id:"edit-email",name:"email",value:(s==null?void 0:s.email)||"",onChange:S=>i(w=>({...w,email:S.target.value})),className:"col-span-3"})]}),f.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[f.jsx(ot,{htmlFor:"edit-address",className:"text-right",children:"العنوان"}),f.jsx(Oe,{id:"edit-address",name:"address",value:(s==null?void 0:s.address)||"",onChange:S=>i(w=>({...w,address:S.target.value})),className:"col-span-3"})]})]}),f.jsx(FSt,{children:f.jsx($e,{type:"submit",children:"حفظ التغييرات"})})]})]})]}),f.jsx($e,{variant:"destructive",size:"sm",onClick:()=>v(b.id),children:"حذف"})]})})]},b.id))})]})})]})}),f.jsx(Cr,{value:"add",children:f.jsxs(Le,{children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"إضافة عميل جديد"}),f.jsx(Kt,{children:"أدخل بيانات العميل الجديد"})]}),f.jsx(Ue,{children:f.jsxs("form",{onSubmit:g,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"name",children:"الاسم"}),f.jsx(Oe,{id:"name",name:"name",placeholder:"اسم العميل",value:n.name,onChange:m,required:!0})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"phone",children:"رقم الهاتف"}),f.jsx(Oe,{id:"phone",name:"phone",placeholder:"رقم الهاتف",value:n.phone,onChange:m,required:!0})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"email",children:"البريد الإلكتروني"}),f.jsx(Oe,{id:"email",name:"email",type:"email",placeholder:"البريد الإلكتروني",value:n.email,onChange:m})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(ot,{htmlFor:"address",children:"العنوان"}),f.jsx(Oe,{id:"address",name:"address",placeholder:"العنوان",value:n.address,onChange:m})]})]}),f.jsx($e,{type:"submit",className:"mt-4",children:"إضافة العميل"})]})})]})})]})]})}const BSt={scheduled:f.jsx(PTe,{className:"h-4 w-4 text-blue-500"}),completed:f.jsx(GR,{className:"h-4 w-4 text-green-500"}),cancelled:f.jsx(HR,{className:"h-4 w-4 text-red-500"})},NK={scheduled:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"},pP={scheduled:"قيد الانتظار",completed:"مكتمل",cancelled:"ملغي"};function zSt(){var P,D,A;const[t,e]=N.useState(new Date),[n,r]=N.useState(!1),[s,i]=N.useState(null),[o,a]=N.useState("all"),[l,c]=N.useState(""),{toast:u}=cs(),[d,h]=N.useState({startDate:new Date(new Date().setDate(1)),endDate:new Date}),p=bl({resolver:bc(AAe),defaultValues:{title:"",description:"",customerId:0,date:new Date,duration:30,notes:""}}),{data:m=[],isLoading:g}=qt({queryKey:["/api/appointments"],refetchOnWindowFocus:!1,refetchOnMount:!0,retry:2}),{data:y=[]}=qt({queryKey:["/api/customers"],refetchOnWindowFocus:!1}),{data:v,isLoading:x}=qt({queryKey:["/api/reports/appointments",d.startDate,d.endDate],queryFn:async()=>{const I=new URLSearchParams({startDate:d.startDate.toISOString(),endDate:d.endDate.toISOString()}),R=await fetch(`/api/reports/appointments?${I}`);if(!R.ok)throw new Error("فشل في جلب تقرير المواعيد");return R.json()},enabled:!!d.startDate&&!!d.endDate}),b=Vr({mutationFn:async I=>{const R=await fetch("/api/appointments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)});if(!R.ok)throw new Error(await R.text());return R.json()},onSuccess:()=>{u({title:"تم إنشاء الموعد بنجاح",variant:"default"}),r(!1),p.reset(),ms.invalidateQueries({queryKey:["/api/appointments"]})},onError:I=>{u({title:"خطأ في إنشاء الموعد",description:I.message,variant:"destructive"})}}),S=Vr({mutationFn:async({id:I,status:R})=>{const M=await fetch(`/api/appointments/${I}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:R})});if(!M.ok)throw new Error(await M.text());return M.json()},onSuccess:()=>{u({title:"تم تحديث حالة الموعد",variant:"default"}),i(null),ms.invalidateQueries({queryKey:["/api/appointments"]})},onError:I=>{u({title:"خطأ في تحديث حالة الموعد",description:I.message,variant:"destructive"})}}),w=Vr({mutationFn:async I=>{const R=await fetch(`/api/appointments/${I}`,{method:"DELETE"});if(!R.ok)throw new Error(await R.text());return R.json()},onSuccess:()=>{u({title:"تم حذف الموعد بنجاح",variant:"default"}),i(null),ms.invalidateQueries({queryKey:["/api/appointments"]})},onError:I=>{u({title:"خطأ في حذف الموعد",description:I.message,variant:"destructive"})}}),C=I=>{b.mutate(I)},_=(I,R)=>{S.mutate({id:I,newStatus:R})},T=I=>{confirm("هل أنت متأكد من حذف هذا الموعد؟")&&w.mutate(I)},k=m.filter(I=>!(o!=="all"&&I.status!==o||l&&!I.title.includes(l))),$=k.filter(I=>un(new Date(I.date),"yyyy-MM-dd")===un(t,"yyyy-MM-dd")),O=I=>{const R=y.find(M=>M.id===I);return(R==null?void 0:R.name)||"عميل غير معروف"};return f.jsxs("div",{className:"container mx-auto py-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(Dp,{className:"h-6 w-6"}),f.jsx("h1",{className:"text-2xl font-bold",children:"المواعيد"})]}),f.jsx("div",{className:"flex items-center gap-4",children:f.jsxs(hl,{open:n,onOpenChange:r,children:[f.jsx(zp,{asChild:!0,children:f.jsxs($e,{children:[f.jsx(xl,{className:"h-4 w-4 ml-2"}),"إضافة موعد جديد"]})}),f.jsxs(wa,{className:"max-w-sm overflow-y-auto max-h-[90vh]",children:[f.jsx(Sa,{children:f.jsx(Ca,{children:"إضافة موعد جديد"})}),f.jsx(Cc,{...p,children:f.jsxs("form",{onSubmit:p.handleSubmit(C),className:"space-y-2",children:[f.jsx(It,{control:p.control,name:"title",render:({field:I})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"عنوان الموعد"}),f.jsx(Ot,{children:f.jsx(Oe,{...I,placeholder:"أدخل عنوان الموعد"})}),f.jsx($t,{})]})}),f.jsx(It,{control:p.control,name:"description",render:({field:I})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"الوصف"}),f.jsx(Ot,{children:f.jsx(Py,{...I,value:I.value||"",placeholder:"أدخل وصف الموعد"})}),f.jsx($t,{})]})}),f.jsx(It,{control:p.control,name:"customerId",render:({field:I})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"العميل"}),f.jsxs(sr,{onValueChange:R=>I.onChange(Number(R)),defaultValue:I.value?String(I.value):void 0,children:[f.jsx(Ot,{children:f.jsx(Yn,{children:f.jsx(ir,{placeholder:"اختر العميل"})})}),f.jsx(Qn,{children:y.map(R=>f.jsx(Je,{value:String(R.id),children:R.name},R.id))})]}),f.jsx($t,{})]})}),f.jsx(It,{control:p.control,name:"date",render:({field:I})=>f.jsxs(kt,{className:"flex flex-col",children:[f.jsx(Et,{children:"تاريخ الموعد"}),f.jsx(cf,{mode:"single",selected:I.value,onSelect:I.onChange,locale:xi,className:"rounded-md border"}),f.jsx($t,{})]})}),f.jsx(It,{control:p.control,name:"duration",render:({field:I})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"المدة (بالدقائق)"}),f.jsx(Ot,{children:f.jsx(Oe,{...I,type:"number",onChange:R=>I.onChange(parseInt(R.target.value))})}),f.jsx($t,{})]})}),f.jsx(It,{control:p.control,name:"notes",render:({field:I})=>f.jsxs(kt,{children:[f.jsx(Et,{children:"ملاحظات"}),f.jsx(Ot,{children:f.jsx(Py,{...I,value:I.value||"",placeholder:"أدخل ملاحظات إضافية"})}),f.jsx($t,{})]})}),f.jsx(eT,{className:"mt-4",children:f.jsx($e,{type:"submit",disabled:b.isPending,children:b.isPending?"جاري الإضافة...":"إضافة الموعد"})})]})})]})]})})]}),f.jsxs(Dc,{defaultValue:"calendar",className:"w-full",children:[f.jsxs(Al,{className:"mb-4",children:[f.jsx(Ln,{value:"calendar",children:"التقويم"}),f.jsx(Ln,{value:"list",children:"قائمة المواعيد"}),f.jsx(Ln,{value:"analytics",children:"التحليلات"})]}),f.jsx(Cr,{value:"calendar",className:"space-y-4",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsxs(Le,{className:"md:col-span-1",children:[f.jsx(Ye,{children:f.jsx(Qe,{children:"التقويم"})}),f.jsx(Ue,{children:f.jsx(cf,{mode:"single",selected:t,onSelect:I=>e(I||new Date),className:"rounded-md border",locale:xi})}),f.jsx(LL,{children:f.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(DTe,{className:"h-4 w-4"}),f.jsx("span",{children:"تصفية حسب الحالة:"})]}),f.jsxs(sr,{value:o,onValueChange:I=>a(I),children:[f.jsx(Yn,{children:f.jsx(ir,{placeholder:"جميع الحالات"})}),f.jsxs(Qn,{children:[f.jsx(Je,{value:"all",children:"جميع الحالات"}),f.jsx(Je,{value:"scheduled",children:"قيد الانتظار"}),f.jsx(Je,{value:"completed",children:"مكتمل"}),f.jsx(Je,{value:"cancelled",children:"ملغي"})]})]}),f.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[f.jsx(jL,{className:"h-4 w-4"}),f.jsx("span",{children:"بحث:"})]}),f.jsx(Oe,{placeholder:"ابحث عن موعد...",value:l,onChange:I=>c(I.target.value)})]})})]}),f.jsxs(Le,{className:"md:col-span-2",children:[f.jsx(Ye,{children:f.jsxs(Qe,{children:["مواعيد ",un(t,"yyyy/MM/dd",{locale:xi})]})}),f.jsx(Ue,{children:f.jsx("div",{className:"space-y-4",children:g?f.jsx("div",{className:"text-center py-4",children:"جاري التحميل..."}):$.length===0?f.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"لا توجد مواعيد لهذا اليوم"}):$.map(I=>f.jsxs("div",{className:"p-4 border rounded-lg hover:bg-secondary/50 transition-colors",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx(rye,{children:f.jsxs(sye,{children:[f.jsx(iye,{asChild:!0,children:f.jsxs(fu,{className:NK[I.status],children:[BSt[I.status],f.jsx("span",{className:"ml-1",children:pP[I.status]})]})}),f.jsxs(qB,{children:["حالة الموعد: ",pP[I.status]]})]})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-medium",children:I.title}),f.jsx("p",{className:"text-sm text-muted-foreground",children:un(new Date(I.date),"hh:mm a",{locale:xi})})]})]}),f.jsx("div",{children:f.jsx(fu,{variant:"outline",children:O(I.customerId)})})]}),I.description&&f.jsx("p",{className:"text-sm mb-3",children:I.description}),f.jsxs("div",{className:"flex justify-between items-center mt-4",children:[f.jsxs("span",{className:"text-sm text-muted-foreground",children:["المدة: ",I.duration," دقيقة"]}),f.jsxs("div",{className:"flex gap-2",children:[I.status==="scheduled"&&f.jsxs(f.Fragment,{children:[f.jsxs($e,{variant:"outline",size:"sm",className:"text-green-600 hover:text-green-700",onClick:()=>_(I.id,"completed"),children:[f.jsx(GR,{className:"h-4 w-4 ml-1"}),"إكمال"]}),f.jsxs($e,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>_(I.id,"cancelled"),children:[f.jsx(HR,{className:"h-4 w-4 ml-1"}),"إلغاء"]})]}),f.jsx($e,{variant:"ghost",size:"sm",className:"text-red-600 hover:bg-red-100",onClick:()=>T(I.id),children:"حذف"})]})]})]},I.id))})})]})]})}),f.jsx(Cr,{value:"list",className:"space-y-4",children:f.jsx("div",{className:"rounded-md border overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b bg-muted/50",children:[f.jsx("th",{className:"p-2 text-right",children:"العنوان"}),f.jsx("th",{className:"p-2 text-right",children:"العميل"}),f.jsx("th",{className:"p-2 text-right",children:"التاريخ"}),f.jsx("th",{className:"p-2 text-right",children:"المدة"}),f.jsx("th",{className:"p-2 text-right",children:"الحالة"}),f.jsx("th",{className:"p-2 text-right",children:"الإجراءات"})]})}),f.jsx("tbody",{children:k.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:6,className:"p-4 text-center text-muted-foreground",children:"لا توجد مواعيد"})}):k.map(I=>f.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[f.jsx("td",{className:"p-2",children:I.title}),f.jsx("td",{className:"p-2",children:O(I.customerId)}),f.jsx("td",{className:"p-2",children:un(new Date(I.date),"yyyy/MM/dd",{locale:xi})}),f.jsxs("td",{className:"p-2",children:[I.duration," دقيقة"]}),f.jsx("td",{className:"p-2",children:f.jsx(fu,{className:NK[I.status],children:pP[I.status]})}),f.jsx("td",{className:"p-2",children:f.jsxs("div",{className:"flex gap-2 justify-end",children:[I.status==="scheduled"&&f.jsxs(f.Fragment,{children:[f.jsx($e,{variant:"ghost",size:"sm",className:"text-green-600 hover:text-green-700",onClick:()=>_(I.id,"completed"),children:f.jsx(GR,{className:"h-4 w-4"})}),f.jsx($e,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>_(I.id,"cancelled"),children:f.jsx(HR,{className:"h-4 w-4"})})]}),f.jsx($e,{variant:"ghost",size:"sm",className:"text-red-600 hover:bg-red-100",onClick:()=>T(I.id),children:"حذف"})]})})]},I.id))})]})})}),f.jsxs(Cr,{value:"analytics",className:"space-y-4",children:[f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:x?f.jsx("div",{className:"col-span-3 text-center py-8",children:"جاري تحميل التحليلات..."}):v?f.jsxs(f.Fragment,{children:[f.jsx(Le,{children:f.jsxs(Ue,{className:"pt-6",children:[f.jsx("div",{className:"text-2xl font-bold",children:((P=v.summary)==null?void 0:P.totalAppointments)||0}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"إجمالي المواعيد"})]})}),f.jsx(Le,{children:f.jsxs(Ue,{className:"pt-6",children:[f.jsx("div",{className:"text-2xl font-bold text-green-600",children:((D=v.summary)==null?void 0:D.completedAppointments)||0}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"المواعيد المكتملة"})]})}),f.jsx(Le,{children:f.jsxs(Ue,{className:"pt-6",children:[f.jsx("div",{className:"text-2xl font-bold text-red-600",children:((A=v.summary)==null?void 0:A.cancelledAppointments)||0}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"المواعيد الملغاة"})]})})]}):f.jsx("div",{className:"col-span-3 text-center py-8",children:"لا توجد بيانات للتحليل"})}),(v==null?void 0:v.statusDistribution)&&f.jsxs(Le,{children:[f.jsx(Ye,{children:f.jsx(Qe,{children:"توزيع حالات المواعيد"})}),f.jsx(Ue,{children:f.jsx("div",{className:"h-80",children:f.jsx(ro,{width:"100%",height:"100%",children:f.jsxs(Q1,{data:v.statusDistribution,children:[f.jsx(_r,{dataKey:"name"}),f.jsx(ar,{}),f.jsx(Tn,{}),f.jsx(ls,{dataKey:"value",fill:"var(--primary)",radius:[4,4,0,0]})]})})})})]})]})]})]})}function VSt(){return f.jsxs(T_e,{children:[f.jsx(yN,{path:"/auth",component:nIe}),f.jsx(Ws,{path:"/",component:aot}),f.jsx(Ws,{path:"/inventory",component:Mfe}),f.jsx(Ws,{path:"/sales",component:_ct}),f.jsx(Ws,{path:"/invoices",component:Sut}),f.jsx(Ws,{path:"/invoices/:id",component:Cut}),f.jsx(Ws,{path:"/staff",component:Nut}),f.jsx(Ws,{path:"/settings",component:mge}),f.jsx(Ws,{path:"/installments",component:Zgt}),f.jsx(Ws,{path:"/marketing",component:Cyt}),f.jsx(Ws,{path:"/reports",component:Kge}),f.jsx(Ws,{path:"/expenses",component:Tyt}),f.jsx(Ws,{path:"/suppliers",component:wvt}),f.jsx(Ws,{path:"/barcodes",component:DSt}),f.jsx(Ws,{path:"/discount-codes",component:jSt}),f.jsx(Ws,{path:"/customers",component:LSt}),f.jsx(Ws,{path:"/appointments",component:zSt}),f.jsx(yN,{component:Mke})]})}function WSt(){return f.jsx(zNe,{client:ms,children:f.jsxs(jke,{children:[f.jsx(VSt,{}),f.jsx(Dke,{})]})})}var Az={};Object.defineProperty(Az,"__esModule",{value:!0});Az.parse=YSt;Az.serialize=QSt;const USt=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,GSt=/^[\u0021-\u003A\u003C-\u007E]*$/,HSt=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,qSt=/^[\u0020-\u003A\u003D-\u007E]*$/,KSt=Object.prototype.toString,XSt=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function YSt(t,e){const n=new XSt,r=t.length;if(r<2)return n;const s=(e==null?void 0:e.decode)||ZSt;let i=0;do{const o=t.indexOf("=",i);if(o===-1)break;const a=t.indexOf(";",i),l=a===-1?r:a;if(o>l){i=t.lastIndexOf(";",o-1)+1;continue}const c=_K(t,i,o),u=TK(t,o,c),d=t.slice(c,u);if(n[d]===void 0){let h=_K(t,o+1,l),p=TK(t,l,h);const m=s(t.slice(h,p));n[d]=m}i=l+1}while(i<r);return n}function _K(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function TK(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function QSt(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!USt.test(t))throw new TypeError(`argument name is invalid: ${t}`);const s=r(e);if(!GSt.test(s))throw new TypeError(`argument val is invalid: ${e}`);let i=t+"="+s;if(!n)return i;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);i+="; Max-Age="+n.maxAge}if(n.domain){if(!HSt.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);i+="; Domain="+n.domain}if(n.path){if(!qSt.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);i+="; Path="+n.path}if(n.expires){if(!JSt(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);i+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.partitioned&&(i+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return i}function ZSt(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function JSt(t){return KSt.call(t)==="[object Date]"}/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var kK="popstate";function eCt(t={}){function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return BM("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:l1(s)}return nCt(e,n,null,t)}function pr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $c(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tCt(){return Math.random().toString(36).substring(2,10)}function EK(t,e){return{usr:t.state,key:t.key,idx:e}}function BM(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Fv(e):e,state:n,key:e&&e.key||r||tCt()}}function l1({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Fv(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function nCt(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function d(){a="POP";let y=u(),v=y==null?null:y-c;c=y,l&&l({action:a,location:g.location,delta:v})}function h(y,v){a="PUSH";let x=BM(g.location,y,v);c=u()+1;let b=EK(x,c),S=g.createHref(x);try{o.pushState(b,"",S)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;s.location.assign(S)}i&&l&&l({action:a,location:g.location,delta:1})}function p(y,v){a="REPLACE";let x=BM(g.location,y,v);c=u();let b=EK(x,c),S=g.createHref(x);o.replaceState(b,"",S),i&&l&&l({action:a,location:g.location,delta:0})}function m(y){let v=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof y=="string"?y:l1(y);return x=x.replace(/ $/,"%20"),pr(v,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,v)}let g={get action(){return a},get location(){return t(s,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(kK,d),l=y,()=>{s.removeEventListener(kK,d),l=null}},createHref(y){return e(s,y)},createURL:m,encodeLocation(y){let v=m(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:p,go(y){return o.go(y)}};return g}function Uye(t,e,n="/"){return rCt(t,e,n,!1)}function rCt(t,e,n,r){let s=typeof e=="string"?Fv(e):e,i=ju(s.pathname||"/",n);if(i==null)return null;let o=Gye(t);sCt(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=mCt(i);a=hCt(o[l],c,r)}return a}function Gye(t,e=[],n=[],r=""){let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(pr(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=xu([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(pr(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),Gye(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:dCt(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of Hye(i.path))s(i,o,l)}),e}function Hye(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Hye(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function sCt(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:fCt(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var iCt=/^:[\w-]+$/,oCt=3,aCt=2,lCt=1,cCt=10,uCt=-2,$K=t=>t==="*";function dCt(t,e){let n=t.split("/"),r=n.length;return n.some($K)&&(r+=uCt),e&&(r+=aCt),n.filter(s=>!$K(s)).reduce((s,i)=>s+(iCt.test(i)?oCt:i===""?lCt:cCt),r)}function fCt(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function hCt(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=gT({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=gT({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:xu([i,d.pathname]),pathnameBase:xCt(xu([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=xu([i,d.pathnameBase]))}return o}function gT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=pCt(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:d},h)=>{if(u==="*"){let m=a[h]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[h];return d&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function pCt(t,e=!1,n=!0){$c(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function mCt(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $c(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ju(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function gCt(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Fv(t):t;return{pathname:n?n.startsWith("/")?n:yCt(n,e):e,search:bCt(r),hash:wCt(s)}}function yCt(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function mP(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vCt(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function qye(t){let e=vCt(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Kye(t,e,n,r=!1){let s;typeof t=="string"?s=Fv(t):(s={...t},pr(!s.pathname||!s.pathname.includes("?"),mP("?","pathname","search",s)),pr(!s.pathname||!s.pathname.includes("#"),mP("#","pathname","hash",s)),pr(!s.search||!s.search.includes("#"),mP("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=gCt(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var xu=t=>t.join("/").replace(/\/\/+/g,"/"),xCt=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bCt=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,wCt=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function SCt(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Xye=["POST","PUT","PATCH","DELETE"];new Set(Xye);var CCt=["GET",...Xye];new Set(CCt);var Lv=N.createContext(null);Lv.displayName="DataRouter";var w$=N.createContext(null);w$.displayName="DataRouterState";var Yye=N.createContext({isTransitioning:!1});Yye.displayName="ViewTransition";var NCt=N.createContext(new Map);NCt.displayName="Fetchers";var _Ct=N.createContext(null);_Ct.displayName="Await";var Bc=N.createContext(null);Bc.displayName="Navigation";var xw=N.createContext(null);xw.displayName="Location";var qu=N.createContext({outlet:null,matches:[],isDataRoute:!1});qu.displayName="Route";var Iz=N.createContext(null);Iz.displayName="RouteError";function TCt(t,{relative:e}={}){pr(bw(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=N.useContext(Bc),{hash:s,pathname:i,search:o}=ww(t,{relative:e}),a=i;return n!=="/"&&(a=i==="/"?n:xu([n,i])),r.createHref({pathname:a,search:o,hash:s})}function bw(){return N.useContext(xw)!=null}function Kp(){return pr(bw(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(xw).location}var Qye="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Zye(t){N.useContext(Bc).static||N.useLayoutEffect(t)}function kCt(){let{isDataRoute:t}=N.useContext(qu);return t?BCt():ECt()}function ECt(){pr(bw(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(Lv),{basename:e,navigator:n}=N.useContext(Bc),{matches:r}=N.useContext(qu),{pathname:s}=Kp(),i=JSON.stringify(qye(r)),o=N.useRef(!1);return Zye(()=>{o.current=!0}),N.useCallback((l,c={})=>{if($c(o.current,Qye),!o.current)return;if(typeof l=="number"){n.go(l);return}let u=Kye(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:xu([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,i,s,t])}N.createContext(null);function ww(t,{relative:e}={}){let{matches:n}=N.useContext(qu),{pathname:r}=Kp(),s=JSON.stringify(qye(n));return N.useMemo(()=>Kye(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function $Ct(t,e){return Jye(t,e)}function Jye(t,e,n,r){var x;pr(bw(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:i}=N.useContext(Bc),{matches:o}=N.useContext(qu),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",d=a&&a.route;{let b=d&&d.path||"";eve(c,!d||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let h=Kp(),p;if(e){let b=typeof e=="string"?Fv(e):e;pr(u==="/"||((x=b.pathname)==null?void 0:x.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${b.pathname}" was given in the \`location\` prop.`),p=b}else p=h;let m=p.pathname||"/",g=m;if(u!=="/"){let b=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let y=!i&&n&&n.matches&&n.matches.length>0?n.matches:Uye(t,{pathname:g});$c(d||y!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),$c(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=RCt(y&&y.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:xu([u,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:xu([u,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,n,r);return e&&v?N.createElement(xw.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},v):v}function ACt(){let t=LCt(),e=SCt(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=N.createElement(N.Fragment,null,N.createElement("p",null,"💿 Hey developer 👋"),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:i},"ErrorBoundary")," or"," ",N.createElement("code",{style:i},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:s},n):null,o)}var ICt=N.createElement(ACt,null),OCt=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?N.createElement(qu.Provider,{value:this.props.routeContext},N.createElement(Iz.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function PCt({routeContext:t,match:e,children:n}){let r=N.useContext(Lv);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(qu.Provider,{value:t},n)}function RCt(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,i=n==null?void 0:n.errors;if(i!=null){let l=s.findIndex(c=>c.route.id&&(i==null?void 0:i[c.route.id])!==void 0);pr(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let o=!1,a=-1;if(n)for(let l=0;l<s.length;l++){let c=s[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:d}=n,h=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!d||d[c.route.id]===void 0);if(c.route.lazy||h){o=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((l,c,u)=>{let d,h=!1,p=null,m=null;n&&(d=i&&c.route.id?i[c.route.id]:void 0,p=c.route.errorElement||ICt,o&&(a<0&&u===0?(eve("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,m=null):a===u&&(h=!0,m=c.route.hydrateFallbackElement||null)));let g=e.concat(s.slice(0,u+1)),y=()=>{let v;return d?v=p:h?v=m:c.route.Component?v=N.createElement(c.route.Component,null):c.route.element?v=c.route.element:v=l,N.createElement(PCt,{match:c,routeContext:{outlet:l,matches:g,isDataRoute:n!=null},children:v})};return n&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?N.createElement(OCt,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}function Oz(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DCt(t){let e=N.useContext(Lv);return pr(e,Oz(t)),e}function jCt(t){let e=N.useContext(w$);return pr(e,Oz(t)),e}function MCt(t){let e=N.useContext(qu);return pr(e,Oz(t)),e}function Pz(t){let e=MCt(t),n=e.matches[e.matches.length-1];return pr(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function FCt(){return Pz("useRouteId")}function LCt(){var r;let t=N.useContext(Iz),e=jCt("useRouteError"),n=Pz("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function BCt(){let{router:t}=DCt("useNavigate"),e=Pz("useNavigate"),n=N.useRef(!1);return Zye(()=>{n.current=!0}),N.useCallback(async(s,i={})=>{$c(n.current,Qye),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var AK={};function eve(t,e,n){!e&&!AK[t]&&(AK[t]=!0,$c(!1,n))}N.memo(zCt);function zCt({routes:t,future:e,state:n}){return Jye(t,void 0,n,e)}function Ll(t){pr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function VCt({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){pr(!bw(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=N.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=Fv(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:h="default"}=n,p=N.useMemo(()=>{let m=ju(l,o);return m==null?null:{location:{pathname:m,search:c,hash:u,state:d,key:h},navigationType:r}},[o,l,c,u,d,h,r]);return $c(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:N.createElement(Bc.Provider,{value:a},N.createElement(xw.Provider,{children:e,value:p}))}function WCt({children:t,location:e}){return $Ct(zM(t),e)}function zM(t,e=[]){let n=[];return N.Children.forEach(t,(r,s)=>{if(!N.isValidElement(r))return;let i=[...e,s];if(r.type===N.Fragment){n.push.apply(n,zM(r.props.children,i));return}pr(r.type===Ll,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=zM(r.props.children,i)),n.push(o)}),n}var z2="get",V2="application/x-www-form-urlencoded";function S$(t){return t!=null&&typeof t.tagName=="string"}function UCt(t){return S$(t)&&t.tagName.toLowerCase()==="button"}function GCt(t){return S$(t)&&t.tagName.toLowerCase()==="form"}function HCt(t){return S$(t)&&t.tagName.toLowerCase()==="input"}function qCt(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function KCt(t,e){return t.button===0&&(!e||e==="_self")&&!qCt(t)}var GC=null;function XCt(){if(GC===null)try{new FormData(document.createElement("form"),0),GC=!1}catch{GC=!0}return GC}var YCt=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gP(t){return t!=null&&!YCt.has(t)?($c(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${V2}"`),null):t}function QCt(t,e){let n,r,s,i,o;if(GCt(t)){let a=t.getAttribute("action");r=a?ju(a,e):null,n=t.getAttribute("method")||z2,s=gP(t.getAttribute("enctype"))||V2,i=new FormData(t)}else if(UCt(t)||HCt(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?ju(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||z2,s=gP(t.getAttribute("formenctype"))||gP(a.getAttribute("enctype"))||V2,i=new FormData(a,t),!XCt()){let{name:c,type:u,value:d}=t;if(u==="image"){let h=c?`${c}.`:"";i.append(`${h}x`,"0"),i.append(`${h}y`,"0")}else c&&i.append(c,d)}}else{if(S$(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=z2,r=null,s=V2,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}function Rz(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function ZCt(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function JCt(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function e2t(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await ZCt(i,n);return o.links?o.links():[]}return[]}));return s2t(r.flat(1).filter(JCt).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function IK(t,e,n,r,s,i){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):i==="data"?e.filter((l,c)=>{var d;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function t2t(t,e,{includeHydrateFallback:n}={}){return n2t(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function n2t(t){return[...new Set(t)]}function r2t(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function s2t(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(r2t(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function i2t(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&ju(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function tve(){let t=N.useContext(Lv);return Rz(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function o2t(){let t=N.useContext(w$);return Rz(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Dz=N.createContext(void 0);Dz.displayName="FrameworkContext";function nve(){let t=N.useContext(Dz);return Rz(t,"You must render this element inside a <HydratedRouter> element"),t}function a2t(t,e){let n=N.useContext(Dz),[r,s]=N.useState(!1),[i,o]=N.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=e,h=N.useRef(null);N.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let g=v=>{v.forEach(x=>{o(x.isIntersecting)})},y=new IntersectionObserver(g,{threshold:.5});return h.current&&y.observe(h.current),()=>{y.disconnect()}}},[t]),N.useEffect(()=>{if(r){let g=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(g)}}},[r]);let p=()=>{s(!0)},m=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,h,{}]:[i,h,{onFocus:Ox(a,p),onBlur:Ox(l,m),onMouseEnter:Ox(c,p),onMouseLeave:Ox(u,m),onTouchStart:Ox(d,p)}]:[!1,h,{}]}function Ox(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function l2t({page:t,...e}){let{router:n}=tve(),r=N.useMemo(()=>Uye(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?N.createElement(u2t,{page:t,matches:r,...e}):null}function c2t(t){let{manifest:e,routeModules:n}=nve(),[r,s]=N.useState([]);return N.useEffect(()=>{let i=!1;return e2t(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function u2t({page:t,matches:e,...n}){let r=Kp(),{manifest:s,routeModules:i}=nve(),{basename:o}=tve(),{loaderData:a,matches:l}=o2t(),c=N.useMemo(()=>IK(t,e,l,s,r,"data"),[t,e,l,s,r]),u=N.useMemo(()=>IK(t,e,l,s,r,"assets"),[t,e,l,s,r]),d=N.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let m=new Set,g=!1;if(e.forEach(v=>{var b;let x=s.routes[v.route.id];!x||!x.hasLoader||(!c.some(S=>S.route.id===v.route.id)&&v.route.id in a&&((b=i[v.route.id])!=null&&b.shouldRevalidate)||x.hasClientLoader?g=!0:m.add(v.route.id))}),m.size===0)return[];let y=i2t(t,o);return g&&m.size>0&&y.searchParams.set("_routes",e.filter(v=>m.has(v.route.id)).map(v=>v.route.id).join(",")),[y.pathname+y.search]},[o,a,r,s,c,e,t,i]),h=N.useMemo(()=>t2t(u,s),[u,s]),p=c2t(u);return N.createElement(N.Fragment,null,d.map(m=>N.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...n})),h.map(m=>N.createElement("link",{key:m,rel:"modulepreload",href:m,...n})),p.map(({key:m,link:g})=>N.createElement("link",{key:m,...g})))}function d2t(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var rve=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rve&&(window.__reactRouterVersion="7.3.0")}catch{}function f2t({basename:t,children:e,window:n}){let r=N.useRef();r.current==null&&(r.current=eCt({window:n,v5Compat:!0}));let s=r.current,[i,o]=N.useState({action:s.action,location:s.location}),a=N.useCallback(l=>{N.startTransition(()=>o(l))},[o]);return N.useLayoutEffect(()=>s.listen(a),[s,a]),N.createElement(VCt,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var sve=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hh=N.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d,...h},p){let{basename:m}=N.useContext(Bc),g=typeof c=="string"&&sve.test(c),y,v=!1;if(typeof c=="string"&&g&&(y=c,rve))try{let k=new URL(window.location.href),$=c.startsWith("//")?new URL(k.protocol+c):new URL(c),O=ju($.pathname,m);$.origin===k.origin&&O!=null?c=O+$.search+$.hash:v=!0}catch{$c(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=TCt(c,{relative:s}),[b,S,w]=a2t(r,h),C=g2t(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:d});function _(k){e&&e(k),k.defaultPrevented||C(k)}let T=N.createElement("a",{...h,...w,href:y||x,onClick:v||i?e:_,ref:d2t(p,S),target:l,"data-discover":!g&&n==="render"?"true":void 0});return b&&!g?N.createElement(N.Fragment,null,T,N.createElement(l2t,{page:x})):T});hh.displayName="Link";var h2t=N.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...c},u){let d=ww(o,{relative:c.relative}),h=Kp(),p=N.useContext(w$),{navigator:m,basename:g}=N.useContext(Bc),y=p!=null&&w2t(d)&&a===!0,v=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,x=h.pathname,b=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(x=x.toLowerCase(),b=b?b.toLowerCase():null,v=v.toLowerCase()),b&&g&&(b=ju(b,g)||b);const S=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let w=x===v||!s&&x.startsWith(v)&&x.charAt(S)==="/",C=b!=null&&(b===v||!s&&b.startsWith(v)&&b.charAt(v.length)==="/"),_={isActive:w,isPending:C,isTransitioning:y},T=w?e:void 0,k;typeof r=="function"?k=r(_):k=[r,w?"active":null,C?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let $=typeof i=="function"?i(_):i;return N.createElement(hh,{...c,"aria-current":T,className:k,ref:u,style:$,to:o,viewTransition:a},typeof l=="function"?l(_):l)});h2t.displayName="NavLink";var p2t=N.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=z2,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...h},p)=>{let m=x2t(),g=b2t(a,{relative:c}),y=o.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&sve.test(a),x=b=>{if(l&&l(b),b.defaultPrevented)return;b.preventDefault();let S=b.nativeEvent.submitter,w=(S==null?void 0:S.getAttribute("formmethod"))||o;m(S||b.currentTarget,{fetcherKey:e,method:w,navigate:n,replace:s,state:i,relative:c,preventScrollReset:u,viewTransition:d})};return N.createElement("form",{ref:p,method:y,action:g,onSubmit:r?l:x,...h,"data-discover":!v&&t==="render"?"true":void 0})});p2t.displayName="Form";function m2t(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ive(t){let e=N.useContext(Lv);return pr(e,m2t(t)),e}function g2t(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=kCt(),l=Kp(),c=ww(t,{relative:i});return N.useCallback(u=>{if(KCt(u,e)){u.preventDefault();let d=n!==void 0?n:l1(l)===l1(c);a(t,{replace:d,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,c,n,r,e,t,s,i,o])}var y2t=0,v2t=()=>`__${String(++y2t)}__`;function x2t(){let{router:t}=ive("useSubmit"),{basename:e}=N.useContext(Bc),n=FCt();return N.useCallback(async(r,s={})=>{let{action:i,method:o,encType:a,formData:l,body:c}=QCt(r,e);if(s.navigate===!1){let u=s.fetcherKey||v2t();await t.fetch(u,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function b2t(t,{relative:e}={}){let{basename:n}=N.useContext(Bc),r=N.useContext(qu);pr(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...ww(t||".",{relative:e})},o=Kp();if(t==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();i.search=u?`?${u}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:xu([n,i.pathname])),l1(i)}function w2t(t,e={}){let n=N.useContext(Yye);pr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ive("useViewTransitionState"),s=ww(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=ju(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ju(n.nextLocation.pathname,r)||n.nextLocation.pathname;return gT(s.pathname,o)!=null||gT(s.pathname,i)!=null}new TextEncoder;const S2t=({...t})=>f.jsx(Cre,{...t}),OK=({...t})=>f.jsx($Te,{...t});function yT(){return f.jsx("aside",{children:f.jsxs("ul",{children:[f.jsx("li",{children:f.jsxs(hh,{to:"/inventory",children:[f.jsx(mk,{})," المخزون"]})}),f.jsx("li",{children:f.jsxs(hh,{to:"/sales-history",children:[f.jsx(S2t,{})," المبيعات"]})}),f.jsx("li",{children:f.jsxs(hh,{to:"/sales-analytics",children:[f.jsx(OK,{})," تحليلات المبيعات الذكية"]})}),f.jsx("li",{children:f.jsxs(hh,{to:"/reports",children:[f.jsx(OK,{})," التقارير"]})}),f.jsx("li",{children:f.jsxs(hh,{to:"/ai-analytics",children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[f.jsx("path",{d:"M12 2a8 8 0 0 0-8 8c0 3.6 2.4 6.9 6 8.7V22l3.5-3.5a12 12 0 0 0 4.5-.3 8 8 0 0 0 0-16"}),f.jsx("path",{d:"M19 2v6"}),f.jsx("path",{d:"M16 5h6"})]}),f.jsx("span",{children:"تحليلات الذكاء الاصطناعي"})]})})]})})}function C2t(){return f.jsxs("div",{className:"flex h-screen",children:[f.jsx("div",{className:"w-64 h-full",children:f.jsx(yT,{})}),f.jsx("main",{className:"flex-1 p-8 overflow-auto",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"نقطة البيع"}),f.jsxs(Le,{children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"نظام نقطة البيع"}),f.jsx(Kt,{children:"يمكنك من هنا إدارة المبيعات وإصدار الفواتير بطريقة سهلة وسريعة."})]}),f.jsx(Ue,{children:f.jsx("p",{className:"text-muted-foreground",children:"سيتم تطوير واجهة نقطة البيع هنا قريباً."})})]})]})})]})}function N2t(){const{data:t=[],isLoading:e}=qt({queryKey:["/api/sales"]});return e?f.jsxs("div",{className:"flex h-screen",children:[f.jsx("div",{className:"w-64 h-full",children:f.jsx(yT,{})}),f.jsx("main",{className:"flex-1 p-8 overflow-auto",children:f.jsxs("div",{className:"flex justify-center items-center h-64",children:[f.jsx(Zs,{className:"h-12 w-12 animate-spin"}),f.jsx("span",{className:"mr-2 text-lg",children:"جاري تحميل سجل المبيعات..."})]})})]}):f.jsxs("div",{className:"flex h-screen",children:[f.jsx("div",{className:"w-64 h-full",children:f.jsx(yT,{})}),f.jsx("main",{className:"flex-1 p-8 overflow-auto",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"سجل المبيعات"}),f.jsxs(Le,{children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"تاريخ المبيعات"}),f.jsx(Kt,{children:"عرض جميع المعاملات السابقة وتفاصيلها"})]}),f.jsx(Ue,{children:f.jsxs($a,{children:[f.jsx(Aa,{children:f.jsxs(dn,{children:[f.jsx(tt,{children:"التاريخ"}),f.jsx(tt,{children:"المنتج"}),f.jsx(tt,{children:"العميل"}),f.jsx(tt,{children:"الكمية"}),f.jsx(tt,{className:"text-left",children:"السعر (د.ع)"}),f.jsx(tt,{className:"text-left",children:"المجموع (د.ع)"})]})}),f.jsx(Ia,{children:t.length===0?f.jsx(dn,{children:f.jsx(We,{colSpan:6,className:"text-center",children:"لا توجد بيانات مبيعات حتى الآن"})}):t.sort((n,r)=>new Date(r.date).getTime()-new Date(n.date).getTime()).map(n=>f.jsxs(dn,{children:[f.jsx(We,{children:new Date(n.date).toLocaleDateString("ar-IQ")}),f.jsx(We,{children:n.productName}),f.jsx(We,{children:n.customerName||"عميل غير مسجل"}),f.jsx(We,{children:n.quantity}),f.jsx(We,{className:"text-left",children:Number(n.priceIqd).toLocaleString("ar-IQ")}),f.jsx(We,{className:"text-left",children:(Number(n.priceIqd)*n.quantity).toLocaleString("ar-IQ")})]},n.id))})]})})]})]})})]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _2t=1e-7,T2t=1e-4;class ove{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class jz{refCount(e){return Li("refCount")}incRef(e){return Li("incRef")}timerAvailable(){return!0}time(e){return Li("time")}read(e){return Li("read")}readSync(e){return Li("readSync")}readToGPU(e,n){return Li("readToGPU")}numDataIds(){return Li("numDataIds")}disposeData(e,n){return Li("disposeData")}write(e,n,r){return Li("write")}move(e,n,r,s,i){return Li("move")}createTensorFromGPUData(e,n,r){return Li("createTensorFromGPUData")}memory(){return Li("memory")}floatPrecision(){return Li("floatPrecision")}epsilon(){return this.floatPrecision()===32?_2t:T2t}dispose(){return Li("dispose")}}function Li(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k2t(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,_m(t,e,n)}function gp(t,e,n){return Math.max(t,Math.min(e,n))}function Mz(t){return t%2===0?t:t+1}function _m(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function E2t(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function L(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Fz(t,e,n=""){L(cn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function ave(t){L(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function le(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function cn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function jy(t){return t%1===0}function VM(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function yg(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function PK(t,e=s=>0,n,r){return new Promise((s,i)=>{let o=0;const a=()=>{if(t()){s();return}o++;const l=e(o);if(n!=null&&o>=n){i();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function lve(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function Vt(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),L(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),L(t.every(r=>jy(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Df(t,e){const n=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||s?null:Vt(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(i!=null){if(i[o]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(i[o]==null||i[o]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),i[o]<=a&&o++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function Ds(t,e){return Nr(t,e)}function Nr(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function $2t(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function A2t(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function cve(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function vT(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function I2t(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function Sw(t){return typeof t=="string"||t instanceof String}function O2t(t){return typeof t=="boolean"}function WM(t){return typeof t=="number"}function Bv(t){return Array.isArray(t)?Bv(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":WM(t)?"float32":Sw(t)?"string":O2t(t)?"bool":"float32"}function UM(t){return!!(t&&t.constructor&&t.call&&t.apply)}function GM(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function st(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function uve(t,e,n,r=!1){const s=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let o=0;o<i;o++)s[o]=n[t+o]}else{const i=e[0],o=e.slice(1),a=o.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<i;l++)s[l]=uve(t+l*a,o,n,r)}return s}function ml(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,i)=>s*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return uve(0,t,e,n)}function P2t(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function Lz(t,e){const n=js(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function js(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function dve(t,e){const n=t.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return ml(t,new Float32Array(n));if(e==="int32")return ml(t,new Int32Array(n));if(e==="bool")return ml(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Ku(t){t.forEach(e=>{L(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function mc(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function zv(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function Bz(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RK="tfjsflags";class R2t{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=D2t,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(oe().getBool("IS_TEST")||oe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];oe().getBool("IS_TEST")||oe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(Bz(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);RK in e&&e[RK].split(",").forEach(r=>{const[s,i]=r.split(":");this.urlFlags[s]=M2t(s,i)})}}function D2t(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(j2t(e,r[0],r[1]),r.join("="))),e}function j2t(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function M2t(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function oe(){return fve}let fve=null;function F2t(t){fve=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let yP;function hve(){if(yP==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");yP=t}return yP}function L2t(){const t=hve();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function zz(t,e){const n=L2t();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const C$="Abs",Cw="Acos",Nw="Acosh",Vv="Add",Vz="AddN",Wz="All",Uz="Any",N$="ArgMax",_$="ArgMin",_w="Asin",Tw="Asinh",kw="Atan",Ew="Atanh",$w="Atan2",T$="AvgPool",Gz="AvgPoolGrad",k$="AvgPool3D",Hz="AvgPool3DGrad",E$="BatchMatMul",$$="BatchToSpaceND",qz="Bincount",Kz="BitwiseAnd",B2t="BroadcastTo",pve="BroadcastArgs",Aw="Cast",Iw="Ceil",Ow="ClipByValue",Xz="Complex",A$="ComplexAbs",I$="Concat",O$="Conv2D",Yz="Conv2DBackpropFilter",P$="Conv2DBackpropInput",R$="Conv3D",Qz="Conv3DBackpropFilterV2",Zz="Conv3DBackpropInputV2",Pw="Cos",Rw="Cosh",Jz="Cumprod",D$="Cumsum",eV="CropAndResize",tV="DenseBincount",nV="DepthToSpace",j$="DepthwiseConv2dNative",rV="DepthwiseConv2dNativeBackpropFilter",sV="DepthwiseConv2dNativeBackpropInput",mve="Diag",M$="Dilation2D",HM="Dilation2DBackpropInput",qM="Dilation2DBackpropFilter",z2t="Draw",Dw="RealDiv",iV="Einsum",jw="Elu",oV="EluGrad",Mw="Erf",F$="Equal",Fw="Exp",L$="ExpandDims",Lw="Expm1",aV="FFT",lV="Fill",cV="FlipLeftRight",Bw="Floor",zw="FloorDiv",B$="FusedBatchNorm",z$="GatherV2",gve="GatherNd",V$="Greater",Vw="GreaterEqual",Ww="Identity",uV="IFFT",dV="Imag",Uw="IsFinite",Gw="IsInf",Hw="IsNan",W$="LeakyRelu",U$="Less",G$="LessEqual",yve="LinSpace",qw="Log",Kw="Log1p",H$="LogicalAnd",q$="LogicalNot",K$="LogicalOr",V2t="LogSoftmax",X$="LRN",fV="LRNGrad",Y$="Max",Xw="Maximum",Q$="MaxPool",hV="MaxPoolGrad",Z$="MaxPool3D",pV="MaxPool3DGrad",vve="MaxPoolWithArgmax",J$="Mean",eA="Min",Yw="Minimum",tA="MirrorPad",Qw="Mod",xve="Multinomial",Zw="Multiply",nA="Neg",rA="NotEqual",mV="NonMaxSuppressionV3",gV="NonMaxSuppressionV4",yV="NonMaxSuppressionV5",sA="OnesLike",iA="OneHot",oA="Pack",aA="PadV2",Jw="Pow",lA="Prelu",cA="Prod",bve="RaggedGather",wve="RaggedRange",Sve="RaggedTensorToTensor",vV="Range",xV="Real",eS="Reciprocal",tS="Relu",uA="Reshape",dA="ResizeNearestNeighbor",bV="ResizeNearestNeighborGrad",fA="ResizeBilinear",wV="ResizeBilinearGrad",nS="Relu6",hA="Reverse",rS="Round",sS="Rsqrt",Cve="ScatterNd",Nve="TensorScatterUpdate",_ve="SearchSorted",pA="Select",iS="Selu",mA="Slice",oS="Sin",aS="Sinh",lS="Sign",cS="Sigmoid",uS="Softplus",dS="Sqrt",gA="Sum",yA="SpaceToBatchND",vA="SplitV",xA="Softmax",Tve="SparseFillEmptyRows",kve="SparseReshape",Eve="SparseSegmentMean",$ve="SparseSegmentSum",Ave="SparseToDense",fS="SquaredDifference",SV="Square",CV="StaticRegexReplace",NV="StridedSlice",Ive="StringNGrams",Ove="StringSplit",Pve="StringToHashBucketFast",hS="Sub",pS="Tan",mS="Tanh",gS="Tile",_V="TopK",TV="Transform",vg="Transpose",kV="Unique",bA="Unpack",wA="UnsortedSegmentSum",SA="ZerosLike",yS="Step",W2t="FromPixels",EV="RotateWithOffset",xT="_FusedMatMul",bT="FusedConv2D",Rve="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Co(...t){oe().getBool("IS_TEST")||oe().getBool("PROD")||console.warn(...t)}function U2t(...t){oe().getBool("IS_TEST")||oe().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wT=zz("kernelRegistry",()=>new Map),KM=zz("gradRegistry",()=>new Map);function DK(t,e){const n=jve(t,e);return wT.get(n)}function jK(t){return KM.get(t)}function MK(t){const e=wT.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[i,o]=s,[a]=i.split("_");a===t&&n.push(o)}return n}function Dve(t){const{kernelName:e,backendName:n}=t,r=jve(e,n);wT.has(r)&&Co(`The kernel '${e}' for backend '${n}' is already registered`),wT.set(r,t)}function G2t(t){const{kernelName:e}=t;KM.has(e)&&oe().getBool("DEBUG")&&Co(`Overriding the gradient for '${e}'`),KM.set(e,t)}function jve(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mve(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var Fve=zn,pa=null;try{pa=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function zn(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}zn.prototype.__isLong__;Object.defineProperty(zn.prototype,"__isLong__",{value:!0});function ho(t){return(t&&t.__isLong__)===!0}zn.isLong=ho;var FK={},LK={};function Xp(t,e){var n,r,s;return e?(t>>>=0,(s=0<=t&&t<256)&&(r=LK[t],r)?r:(n=Vn(t,(t|0)<0?-1:0,!0),s&&(LK[t]=n),n)):(t|=0,(s=-128<=t&&t<128)&&(r=FK[t],r)?r:(n=Vn(t,t<0?-1:0,!1),s&&(FK[t]=n),n))}zn.fromInt=Xp;function ma(t,e){if(isNaN(t))return e?$h:ga;if(e){if(t<0)return $h;if(t>=Lve)return Vve}else{if(t<=-zK)return Yi;if(t+1>=zK)return zve}return t<0?ma(-t,e).neg():Vn(t%My|0,t/My|0,e)}zn.fromNumber=ma;function Vn(t,e,n){return new zn(t,e,n)}zn.fromBits=Vn;var ST=Math.pow;function $V(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return ga;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return $V(t.substring(1),e,n).neg();for(var s=ma(ST(n,8)),i=ga,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+a),n);if(a<8){var c=ma(ST(n,a));i=i.mul(c).add(ma(l))}else i=i.mul(s),i=i.add(ma(l))}return i.unsigned=e,i}zn.fromString=$V;function Rl(t,e){return typeof t=="number"?ma(t,e):typeof t=="string"?$V(t,e):Vn(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}zn.fromValue=Rl;var BK=65536,H2t=1<<24,My=BK*BK,Lve=My*My,zK=Lve/2,VK=Xp(H2t),ga=Xp(0);zn.ZERO=ga;var $h=Xp(0,!0);zn.UZERO=$h;var Qm=Xp(1);zn.ONE=Qm;var Bve=Xp(1,!0);zn.UONE=Bve;var XM=Xp(-1);zn.NEG_ONE=XM;var zve=Vn(-1,2147483647,!1);zn.MAX_VALUE=zve;var Vve=Vn(-1,-1,!0);zn.MAX_UNSIGNED_VALUE=Vve;var Yi=Vn(0,-2147483648,!1);zn.MIN_VALUE=Yi;var De=zn.prototype;De.toInt=function(){return this.unsigned?this.low>>>0:this.low};De.toNumber=function(){return this.unsigned?(this.high>>>0)*My+(this.low>>>0):this.high*My+(this.low>>>0)};De.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Yi)){var n=ma(e),r=this.div(n),s=r.mul(n).sub(this);return r.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=ma(ST(e,6),this.unsigned),o=this,a="";;){var l=o.div(i),c=o.sub(l.mul(i)).toInt()>>>0,u=c.toString(e);if(o=l,o.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};De.getHighBits=function(){return this.high};De.getHighBitsUnsigned=function(){return this.high>>>0};De.getLowBits=function(){return this.low};De.getLowBitsUnsigned=function(){return this.low>>>0};De.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Yi)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};De.isZero=function(){return this.high===0&&this.low===0};De.eqz=De.isZero;De.isNegative=function(){return!this.unsigned&&this.high<0};De.isPositive=function(){return this.unsigned||this.high>=0};De.isOdd=function(){return(this.low&1)===1};De.isEven=function(){return(this.low&1)===0};De.equals=function(e){return ho(e)||(e=Rl(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};De.eq=De.equals;De.notEquals=function(e){return!this.eq(e)};De.neq=De.notEquals;De.ne=De.notEquals;De.lessThan=function(e){return this.comp(e)<0};De.lt=De.lessThan;De.lessThanOrEqual=function(e){return this.comp(e)<=0};De.lte=De.lessThanOrEqual;De.le=De.lessThanOrEqual;De.greaterThan=function(e){return this.comp(e)>0};De.gt=De.greaterThan;De.greaterThanOrEqual=function(e){return this.comp(e)>=0};De.gte=De.greaterThanOrEqual;De.ge=De.greaterThanOrEqual;De.compare=function(e){if(ho(e)||(e=Rl(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};De.comp=De.compare;De.negate=function(){return!this.unsigned&&this.eq(Yi)?Yi:this.not().add(Qm)};De.neg=De.negate;De.add=function(e){ho(e)||(e=Rl(e));var n=this.high>>>16,r=this.high&65535,s=this.low>>>16,i=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,d=0,h=0,p=0;return p+=i+c,h+=p>>>16,p&=65535,h+=s+l,d+=h>>>16,h&=65535,d+=r+a,u+=d>>>16,d&=65535,u+=n+o,u&=65535,Vn(h<<16|p,u<<16|d,this.unsigned)};De.subtract=function(e){return ho(e)||(e=Rl(e)),this.add(e.neg())};De.sub=De.subtract;De.multiply=function(e){if(this.isZero())return ga;if(ho(e)||(e=Rl(e)),pa){var n=pa.mul(this.low,this.high,e.low,e.high);return Vn(n,pa.get_high(),this.unsigned)}if(e.isZero())return ga;if(this.eq(Yi))return e.isOdd()?Yi:ga;if(e.eq(Yi))return this.isOdd()?Yi:ga;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(VK)&&e.lt(VK))return ma(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,i=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,d=0,h=0,p=0,m=0;return m+=o*u,p+=m>>>16,m&=65535,p+=i*u,h+=p>>>16,p&=65535,p+=o*c,h+=p>>>16,p&=65535,h+=s*u,d+=h>>>16,h&=65535,h+=i*c,d+=h>>>16,h&=65535,h+=o*l,d+=h>>>16,h&=65535,d+=r*u+s*c+i*l+o*a,d&=65535,Vn(p<<16|m,d<<16|h,this.unsigned)};De.mul=De.multiply;De.divide=function(e){if(ho(e)||(e=Rl(e)),e.isZero())throw Error("division by zero");if(pa){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?pa.div_u:pa.div_s)(this.low,this.high,e.low,e.high);return Vn(n,pa.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?$h:ga;var r,s,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return $h;if(e.gt(this.shru(1)))return Bve;i=$h}else{if(this.eq(Yi)){if(e.eq(Qm)||e.eq(XM))return Yi;if(e.eq(Yi))return Qm;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(ga)?e.isNegative()?Qm:XM:(s=this.sub(e.mul(r)),i=r.add(s.div(e)),i)}else if(e.eq(Yi))return this.unsigned?$h:ga;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=ga}for(s=this;s.gte(e);){r=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:ST(2,a-48),c=ma(r),u=c.mul(e);u.isNegative()||u.gt(s);)r-=l,c=ma(r,this.unsigned),u=c.mul(e);c.isZero()&&(c=Qm),i=i.add(c),s=s.sub(u)}return i};De.div=De.divide;De.modulo=function(e){if(ho(e)||(e=Rl(e)),pa){var n=(this.unsigned?pa.rem_u:pa.rem_s)(this.low,this.high,e.low,e.high);return Vn(n,pa.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};De.mod=De.modulo;De.rem=De.modulo;De.not=function(){return Vn(~this.low,~this.high,this.unsigned)};De.and=function(e){return ho(e)||(e=Rl(e)),Vn(this.low&e.low,this.high&e.high,this.unsigned)};De.or=function(e){return ho(e)||(e=Rl(e)),Vn(this.low|e.low,this.high|e.high,this.unsigned)};De.xor=function(e){return ho(e)||(e=Rl(e)),Vn(this.low^e.low,this.high^e.high,this.unsigned)};De.shiftLeft=function(e){return ho(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Vn(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Vn(0,this.low<<e-32,this.unsigned)};De.shl=De.shiftLeft;De.shiftRight=function(e){return ho(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Vn(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Vn(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};De.shr=De.shiftRight;De.shiftRightUnsigned=function(e){if(ho(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return Vn(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?Vn(n,0,this.unsigned):Vn(n>>>e-32,0,this.unsigned)};De.shru=De.shiftRightUnsigned;De.shr_u=De.shiftRightUnsigned;De.toSigned=function(){return this.unsigned?Vn(this.low,this.high,!1):this};De.toUnsigned=function(){return this.unsigned?this:Vn(this.low,this.high,!0)};De.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};De.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};De.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};zn.fromBytes=function(e,n,r){return r?zn.fromBytesLE(e,n):zn.fromBytesBE(e,n)};zn.fromBytesLE=function(e,n){return new zn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};zn.fromBytesBE=function(e,n){return new zn(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const Wve=nn(Fve),q2t=lee({__proto__:null,default:Wve},[Fve]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ph=Wve||q2t;function CA(t){return ph.fromString(t,!0,16)}const Uve=CA("c3a5c85c97cb3127"),dh=CA("b492b66fbe98f273"),ei=CA("9ae16a3b2f90404f");function YM(t){return t.xor(t.shru(47))}function Gve(t,e,n){const r=t.slice(e,e+n);return ph.fromBytes(Array.from(r),!0,!0)}function An(t,e){return Gve(t,e,8)}function WK(t,e){return Gve(t,e,4)}function ts(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function qd(t,e,n=CA("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function K2t(t,e,n,r,s,i){s=s.add(t),i=ts(i.add(s).add(r),21);const o=s;return s=s.add(e),s=s.add(n),i=i.add(ts(s,44)),[s.add(r),i.add(o)]}function HC(t,e,n,r){return K2t(An(t,e),An(t,e+8),An(t,e+16),An(t,e+24),n,r)}function X2t(t,e=t.length){if(e>=8){const n=ei.add(e*2),r=An(t,0).add(ei),s=An(t,e-8),i=ts(s,37).mul(n).add(r),o=ts(r,25).add(s).mul(n);return qd(i,o,n)}if(e>=4){const n=ei.add(e*2),r=WK(t,0);return qd(r.shl(3).add(e),WK(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],i=n+(r<<8),o=e+(s<<2);return YM(ei.mul(i).xor(Uve.mul(o))).mul(ei)}return ei}function Y2t(t,e=t.length){const n=ei.add(e*2),r=An(t,0).mul(dh),s=An(t,8),i=An(t,e-8).mul(n),o=An(t,e-16).mul(ei);return qd(ts(r.add(s),43).add(ts(i,30)).add(o),r.add(ts(s.add(ei),18)).add(i),n)}function Q2t(t,e=t.length){const n=ei.add(e*2),r=An(t,0).mul(ei),s=An(t,8),i=An(t,e-8).mul(n),o=An(t,e-16).mul(ei),a=ts(r.add(s),43).add(ts(i,30)).add(o),l=qd(a,r.add(ts(s.add(ei),18)).add(i),n),c=An(t,16).mul(n),u=An(t,24),d=a.add(An(t,e-32)).mul(n),h=l.add(An(t,e-24)).mul(n);return qd(ts(c.add(u),43).add(ts(d,30)).add(h),c.add(ts(u.add(r),18)).add(d),n)}function Z2t(t,e=t.length){const n=ph.fromNumber(81,!0);if(e<=32)return e<=16?X2t(t,e):Y2t(t,e);if(e<=64)return Q2t(t,e);let r=n,s=n.mul(dh).add(113),i=YM(s.mul(ei).add(113)).mul(ei),o=[ph.UZERO,ph.UZERO],a=[ph.UZERO,ph.UZERO];r=r.mul(ei).add(An(t,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=ts(r.add(s).add(o[0]).add(An(t,l+8)),37).mul(dh),s=ts(s.add(o[1]).add(An(t,l+48)),42).mul(dh),r=r.xor(a[1]),s=s.add(o[0]).add(An(t,l+40)),i=ts(i.add(a[0]),33).mul(dh),o=HC(t,l,o[1].mul(dh),r.add(a[0])),a=HC(t,l+32,i.add(a[1]),s.add(An(t,l+16))),[i,r]=[r,i],l+=64;while(l!==c);const d=dh.add(i.and(255).shl(1));return l=u,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=ts(r.add(s).add(o[0]).add(An(t,l+8)),37).mul(d),s=ts(s.add(o[1]).add(An(t,l+48)),42).mul(d),r=r.xor(a[1].mul(9)),s=s.add(o[0].mul(9).add(An(t,l+40))),i=ts(i.add(a[0]),33).mul(d),o=HC(t,l,o[1].mul(d),r.add(a[0])),a=HC(t,l+32,i.add(a[1]),s.add(An(t,l+16))),[i,r]=[r,i],qd(qd(o[0],a[0],d).add(YM(s).mul(Uve)).add(i),qd(o[1],a[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jf(t,e){return e==="string"?Kd(t):Yp([t],e)}function J2t(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Yp(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=yp(t)),oe().getBool("DEBUG")&&$2t(t,e),J2t(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function bi(){return oe().platform.now()}function Kd(t,e="utf-8"){return e=e||"utf-8",oe().platform.encode(t,e)}function hf(t,e="utf-8"){return e=e||"utf-8",oe().platform.decode(t,e)}function Oa(t){return oe().platform.isTypedArray!=null?oe().platform.isTypedArray(t):Mve(t)}function yp(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||Bz(t)||t==null||Oa(t)&&n)e.push(t);else if(Array.isArray(t)||Oa(t))for(let r=0;r<t.length;++r)yp(t[r],e,n);else{let r=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)yp(t[s],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eNt{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new nNt)}profileKernel(e,n,r){let s;const i=()=>{s=r()};let o;const a=bi();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const c of s)c.dataSync();o=Promise.resolve({kernelMs:bi()-a})}if(oe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<s.length;c++){const u=s[c];u.data().then(d=>{tNt(d,u.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:o.then(c=>c.kernelMs),extraInfo:o.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:i,extraInfo:o}=e;r.forEach(a=>{Promise.all([a.data(),s,o]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],i,l[2])})})}}function tNt(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}class nNt{logKernelProfile(e,n,r,s,i,o){const a=typeof s=="number"?yg(`${s}ms`,9):s.error,l=yg(e,25),c=n.rank,u=n.size,d=yg(n.shape.toString(),14);let h="";for(const p in i){const m=i[p];if(m!=null){const g=m.shape||n.shape,y=g.length;h+=`${p}: ${y}D ${y>0?g:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${d}	%c${u}	%c${h}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rNt(t,e,n){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const d in u){const h=u[d];let p=!1;for(let m=0;m<e.length;m++)if(r[h.id]){c.outputs.forEach(g=>r[g.id]=!0),p=!0,s[c.id]=!0;break}if(p)break}}const i={};i[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(i[c.outputs[d].id]){for(const h in u)i[u[h].id]=!0,o[c.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const c=t[l];if(s[c.id]&&o[c.id]){const u={};for(const h in c.inputs){const p=c.inputs[h];r[p.id]&&(u[h]=p)}const d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,a.push(d)}}return a}function sNt(t,e,n,r){for(let s=e.length-1;s>=0;s--){const i=e[s],o=[];if(i.outputs.forEach(l=>{const c=t[l.id];c!=null?o.push(c):o.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const a=i.gradient(o);for(const l in i.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const c=n(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=i.inputs[l];if(!cn(c.shape,u.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{const d=t[u.id];t[u.id]=r(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UK=20,Px=3,vP=7;function iNt(t,e,n,r){const s=st(e),i=oNt(t,e,n,s),o=e.length,a=W2(t,e,n,s,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function oNt(t,e,n,r){const s=le(e),i=r[r.length-1],o=new Array(i).fill(0),a=e.length,l=n==="complex64"?Jx(t):t;if(a>1)for(let c=0;c<s/i;c++){const u=c*i;for(let d=0;d<i;d++)o[d]=Math.max(o[d],Zx(l[u+d],0,n).length)}return o}function Zx(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(vP))} + ${parseFloat(t[1].toFixed(vP))}j`:Sw(t)?r=`'${t}'`:n==="bool"?r=Hve(t):r=parseFloat(t.toFixed(vP)).toString(),yg(r,e)}function Hve(t){return t===0?"false":"true"}function W2(t,e,n,r,s,i=!0){const o=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const g=Jx(t);return[Zx(g[0],0,n)]}return n==="bool"?[Hve(t[0])]:[t[0].toString()]}if(l===1){if(a>UK){const y=Px*o;let v=Array.from(t.slice(0,y)),x=Array.from(t.slice((a-Px)*o,a*o));return n==="complex64"&&(v=Jx(v),x=Jx(x)),["["+v.map((b,S)=>Zx(b,s[S],n)).join(", ")+", ..., "+x.map((b,S)=>Zx(b,s[a-Px+S],n)).join(", ")+"]"]}return["["+(n==="complex64"?Jx(t):Array.from(t)).map((y,v)=>Zx(y,s[v],n)).join(", ")+"]"]}const c=e.slice(1),u=r.slice(1),d=r[0]*o,h=[];if(a>UK){for(let g=0;g<Px;g++){const y=g*d,v=y+d;h.push(...W2(t.slice(y,v),c,n,u,s,!1))}h.push("...");for(let g=a-Px;g<a;g++){const y=g*d,v=y+d;h.push(...W2(t.slice(y,v),c,n,u,s,g===a-1))}}else for(let g=0;g<a;g++){const y=g*d,v=y+d;h.push(...W2(t.slice(y,v),c,n,u,s,g===a-1))}const p=l===2?",":"";h[0]="["+(a>0?h[0]+p:"");for(let g=1;g<h.length-1;g++)h[g]=" "+h[g]+p;let m=`,
`;for(let g=2;g<l;g++)m+=`
`;return h[h.length-1]=" "+h[h.length-1]+"]"+(i?"":m),h}function Jx(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vs{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=le(e),r!=null){const s=r.length;L(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Nr(n,this.size),this.strides=st(e)}set(e,...n){n.length===0&&(n=[0]),L(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return tl().makeTensor(this.values,this.shape,this.dtype)}}let tl=null,Tm=null;function aNt(t){tl=t}function lNt(t){Tm=t}class Br{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=le(e),this.strides=st(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Tm.buffer(this.shape,this.dtype,e)}bufferSync(){return Tm.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return ml(this.shape,e,this.dtype==="complex64")}arraySync(){return ml(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=tl().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>hf(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),tl().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=tl().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>hf(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await tl().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),tl().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Tm.print(this,e)}clone(){return this.throwIfDisposed(),Tm.clone(this)}toString(e=!1){const n=this.dataSync();return iNt(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Tm.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),tl().makeVariable(this,e,n,r)}}Object.defineProperty(Br,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function ae(){return zz("Tensor",()=>Br)}ae();class CT extends Br{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!cn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);tl().disposeTensor(this),this.dataId=e.dataId,tl().incRef(this,null)}dispose(){tl().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(CT,Symbol.hasInstance,{value:t=>t instanceof Br&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var GK;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(GK||(GK={}));var QM;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(QM||(QM={}));var ZM;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(ZM||(ZM={}));var JM;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(JM||(JM={}));var eF;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(eF||(eF={}));const cNt={float32:JM,int32:QM,bool:ZM,complex64:eF};function oo(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return cNt[t][e]}function AV(t){return oo(t,"int32")}function qve(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function Kve(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kr(t,e){if(t.dtype===e.dtype)return[t,e];const n=oo(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function Xve(t){const e=[];return Yve(t,e,new Set),e}function Yve(t,e,n){if(t==null)return;if(t instanceof Br){e.push(t);return}if(!uNt(t))return;const r=t;for(const s in r){const i=r[s];n.has(i)||(n.add(i),Yve(i,e,n))}}function uNt(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xP(t){return t.kernelName!=null}class HK{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Fy{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new HK}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Co(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new eNt(this.backendInstance),!0}setupRegisteredKernels(){MK(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){MK(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof jz)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,i=r.then(o=>s<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,Co(`Initialization of backend ${e} failed`),Co(o.stack||o.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Co(`Initialization of backend ${e} failed`),Co(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:i}=this.initializeBackend(r);if(i||s)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,i=this.readSync(n),o=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return Fy.nextTensorId++}nextVariableId(){return Fy.nextVariableId++}clone(e){const n=X.runKernel(Ww,{x:e}),r={x:e},s=o=>({x:()=>{const a="float32",l={x:o},c={dtype:a};return X.runKernel(Aw,l,c)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(DK(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=s-n-i-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const c=xP(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(xP(e)){const{kernelName:m,inputs:g,attrs:y}=e;this.backendName==null&&this.backend;const v=DK(m,this.backendName);L(v!=null,()=>`Cannot find registered kernel '${m}' for backend '${this.backendName}'`),a=()=>{const x=this.backend.numDataIds();l=v.kernelFunc({inputs:g,attrs:y,backend:this.backend});const b=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(m,x,b);const S=b.map(w=>w.rank!=null?w:this.makeTensorFromTensorInfo(w));if(s){const w=this.getTensorsForGradient(m,g,S);r=this.saveTensorsForBackwardMode(w)}return S}}else{const{forwardFunc:m}=e,g=y=>{s&&(r=y.map(v=>this.keep(this.clone(v))))};a=()=>{const y=this.backend.numDataIds();l=this.tidy(()=>m(this.backend,g));const v=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,y,v),v}}const{inputs:u,attrs:d}=e,h=xP(e)?null:e.backwardsFunc;let p;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(p=this.profiler.profileKernel(c,u,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(p),n=p.outputs)}),s&&this.addTapeNode(c,u,n,h,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(m=>u[m]!=null?u[m].shape:null),outputShapes:n.map(m=>m.shape),kernelTimeMs:p.timeMs,extraInfo:p.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=jK(e);if(s!=null){const i=s.inputsToSave||[],o=s.outputsToSave||[];let a;s.saveAllInputs?(L(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(c=>n[c])):a=i.map(c=>n[c]);const l=r.filter((c,u)=>o[u]);return a.concat(l)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let i=e;r==="string"&&Sw(e[0])&&(i=e.map(l=>Kd(l)));const o=s.write(i,n,r),a=new Br(n,r,o,this.nextTensorId());if(this.trackTensor(a,s),r==="string"){const l=this.state.tensorInfo.get(o),c=I2t(i);this.state.numBytes+=c-l.bytes,l.bytes=c}return a}makeTensorFromDataId(e,n,r,s){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:i}=e,o=new Br(s,i,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const i=new CT(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*vT(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof CT||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*vT(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,i,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=jK(e);l!=null&&(s=l.gradFunc),s!=null&&(a.gradient=c=>(c=c.map((u,d)=>{if(u==null){const h=r[d],p=js(h.size,h.dtype);return this.makeTensor(p,h.shape,h.dtype)}return u}),s(c.length>1?c:c[0],i,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=Xve(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const o=this.state.activeScope.track[i];!o.kept&&!r.has(o.id)&&o.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===s.id&&this.track(i)})}gradients(e,n,r,s=!1){if(L(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));L(i instanceof Br,()=>"The result y returned by f() must be a tensor.");const o=rNt(this.state.activeTape,n,i);if(!s&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[i.id]=r??dNt(i.shape),sNt(a,o,c=>this.tidy(c),fNt);const l=n.map(c=>a[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return L(UM(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{L(n.every(a=>a instanceof Br),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((a,l)=>{s[l]=a});const i=(a,l)=>(r=e(...n,l),L(r.value instanceof Br,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),L(UM(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(a,l)=>{const c=r.gradFunc(a,l),u=Array.isArray(c)?c:[c];L(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),L(u.every(h=>h instanceof Br),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return u.forEach((h,p)=>{d[p]=()=>h}),d};return this.runKernelFunc({forwardFunc:i,backwardsFunc:o,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=bi(),r=await this.backend.time(e);return r.wallMs=bi()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new HK;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Fy.nextTensorId=0;Fy.nextVariableId=0;function dNt(t){const e=Lz(le(t),"float32");return X.makeTensor(e,t,"float32")}function Qve(){const t=hve();if(t._tfengine==null){const e=new R2t(t);t._tfengine=new Fy(e)}return F2t(t._tfengine.ENV),aNt(()=>t._tfengine),t._tfengine}const X=Qve();function fNt(t,e){const n={a:t,b:e};return X.runKernel(Vv,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hNt(){return typeof navigator<"u"&&navigator!=null}function Zve(t){if(t||hNt()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function Jve(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pi=oe();Pi.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Pi.registerFlag("IS_BROWSER",()=>Jve());Pi.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Pi.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Pi.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Pi.registerFlag("PROD",()=>!1);Pi.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Pi.getBool("DEBUG"));Pi.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Pi.registerFlag("IS_TEST",()=>!1);Pi.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Pi.getBool("DEBUG"));Pi.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Pi.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Pi.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NA(t,e){let n=t;if(Oa(t))return e==="string"?[]:[t.length];if(qve(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(Kve(t))return[t.buffer.size/(e==null?4:vT(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Oa(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&oe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&exe(t,r,[]),r}function exe(t,e,n){if(n=n||[],!Array.isArray(t)&&!Oa(t)){L(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}L(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),L(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)exe(t[s],r,n.concat(s))}function qK(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function V(t,e,n,r="numeric"){if(t instanceof ae())return qK(r,t.dtype,e,n),t;let s=Bv(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),qK(r,s,e,n),t==null||!Oa(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const i=NA(t,s);!Oa(t)&&!Array.isArray(t)&&(t=[t]);const a=s!=="string"?Yp(t,s):yp(t,[],!0);return X.makeTensor(a,i,s)}function txe(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,o)=>V(i,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pNt="__op";function J(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+pNt;const s=(...i)=>{X.startScope(n);try{const o=r(...i);return Bz(o)&&console.error("Cannot return a Promise inside of tidy."),X.endScope(o),o}catch(o){throw X.endScope(null),o}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mNt(t,e){const n=V(t,"real","complex"),r=V(e,"imag","complex");Fz(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return X.runKernel(Xz,s)}const Ly=J({complex_:mNt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _A(t,e,n,r){if(r==null)r=Bv(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(Kve(t)||qve(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return X.backend.createTensorFromGPUData(t,e||n,r)}if(!Oa(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Ku(e);const s=le(e),i=le(n);L(s===i,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${i}`);for(let o=0;o<n.length;++o){const a=n[o],l=o===n.length-1?a!==le(e.slice(o)):!0;L(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Oa(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Yp(t,r):yp(t,[],!0),X.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nxe(t,e,n){const r=NA(t,n);return _A(t,e,r,n)}class Wv{static join(e){return new Wv(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Oa(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+s.byteLength;this.shards.push({buffer:s,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,i=new ArrayBuffer(s),o=new Uint8Array(i);let a=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],d=e+a-c.start,h=a,m=Math.min(n,c.end)-c.start,g=new Uint8Array(c.buffer,d,m-d);if(o.set(g,h),a+=g.length,n<c.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=gNt(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function gNt(t,e){let n=0,r=t.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,i=e(t[s]);if(i===0)return s;i<0?r=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zl(){return X}function KK(){return X.memory()}function re(t,e){return X.tidy(t,e)}function Ut(t){Xve(t).forEach(n=>n.dispose())}function gc(t){return X.keep(t)}function rxe(t,e,n=1){return X.registerBackend(t,e,n)}function yNt(){return X.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XK=4;async function YK(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<s.length;++o){const a=s[o],l=Array.isArray(t)?t[o].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async d=>{const h=await l.bytes(),p=h.reduce((y,v)=>y+v.length,0)+XK*h.length,m=new Uint8Array(p);let g=0;for(let y=0;y<h.length;y++){const v=h[y],x=new Uint8Array(new Uint32Array([v.length]).buffer);m.set(x,g),g+=XK,m.set(v,g),g+=v.length}d(m)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const i=await Promise.all(r);return{data:vNt(i),specs:n}}function vNt(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),r.buffer}const IV=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function QK(t){return IV?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function xNt(t){if(IV)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function bNt(t){if(IV){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function wNt(t){return Wv.join(t)}function sxe(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:QK(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:QK(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Wv(t.weightData).byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ks{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Ks.instance==null&&(Ks.instance=new Ks),Ks.instance}static registerSaveRouter(e){Ks.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Ks.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Ks.getHandlers(e,"save")}static getLoadHandlers(e,n){return Ks.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?Ks.getInstance().loadRouters:Ks.getInstance().saveRouters).forEach(o=>{const a=o(e,r);a!==null&&s.push(a)}),s}}const SNt=t=>Ks.getSaveHandlers(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tF="tensorflowjs",nF=1,Ah="models_store",Id="model_info_store";function ixe(){if(!oe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function rF(t){const e=t.result;e.createObjectStore(Ah,{keyPath:"modelPath"}),e.createObjectStore(Id,{keyPath:"modelPath"})}class vp{constructor(e){if(this.indexedDB=ixe(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const i=this.indexedDB.open(tF,nF);i.onupgradeneeded=()=>rF(i),i.onsuccess=()=>{const o=i.result;if(n==null){const a=o.transaction(Ah,"readonly"),c=a.objectStore(Ah).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return o.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=u=>(o.close(),s(c.error)),a.oncomplete=()=>o.close()}else{n.weightData=Wv.join(n.weightData);const a=sxe(n),l=o.transaction(Id,"readwrite");let c=l.objectStore(Id),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(h){return s(h)}let d;u.onsuccess=()=>{d=o.transaction(Ah,"readwrite");const h=d.objectStore(Ah);let p;try{p=h.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(m){return s(m)}p.onsuccess=()=>r({modelArtifactsInfo:a}),p.onerror=m=>{c=l.objectStore(Id);const g=c.delete(this.modelPath);g.onsuccess=()=>(o.close(),s(p.error)),g.onerror=y=>(o.close(),s(p.error))}},u.onerror=h=>(o.close(),s(u.error)),l.oncomplete=()=>{d==null?o.close():d.oncomplete=()=>o.close()}}},i.onerror=o=>s(i.error)})}}vp.URL_SCHEME="indexeddb://";const oxe=t=>oe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(vp.URL_SCHEME)?CNt(t.slice(vp.URL_SCHEME.length)):null;Ks.registerSaveRouter(oxe);Ks.registerLoadRouter(oxe);function CNt(t){return new vp(t)}function NNt(t){return t.startsWith(vp.URL_SCHEME)?t.slice(vp.URL_SCHEME.length):t}class _Nt{constructor(){this.indexedDB=ixe()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(tF,nF);r.onupgradeneeded=()=>rF(r),r.onsuccess=()=>{const s=r.result,i=s.transaction(Id,"readonly"),a=i.objectStore(Id).getAll();a.onsuccess=()=>{const l={};for(const c of a.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},a.onerror=l=>(s.close(),n(a.error)),i.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=NNt(e),new Promise((n,r)=>{const s=this.indexedDB.open(tF,nF);s.onupgradeneeded=()=>rF(s),s.onsuccess=()=>{const i=s.result,o=i.transaction(Id,"readwrite"),a=o.objectStore(Id),l=a.get(e);let c;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=a.delete(e),d=()=>{c=i.transaction(Ah,"readwrite");const p=c.objectStore(Ah).delete(e);p.onsuccess=()=>n(l.result.modelArtifactsInfo),p.onerror=m=>r(l.error)};u.onsuccess=d,u.onerror=h=>(d(),i.close(),r(l.error))}},l.onerror=u=>(i.close(),r(l.error)),o.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}},s.onerror=i=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const su="/",km="tensorflowjs_models",axe="info",TNt="model_topology",kNt="weight_specs",ENt="weight_data",$Nt="model_metadata";function lxe(t){return{info:[km,t,axe].join(su),topology:[km,t,TNt].join(su),weightSpecs:[km,t,kNt].join(su),weightData:[km,t,ENt].join(su),modelMetadata:[km,t,$Nt].join(su)}}function cxe(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function ANt(t){const e=t.split(su);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(su)}function INt(t){return t.startsWith(xp.URL_SCHEME)?t.slice(xp.URL_SCHEME.length):t}class xp{constructor(e){if(!oe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=lxe(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=sxe(e),i=Wv.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,xNt(i));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:s}}catch{throw cxe(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const a=JSON.parse(i);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=bNt(o),n}}xp.URL_SCHEME="localstorage://";const uxe=t=>oe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(xp.URL_SCHEME)?ONt(t.slice(xp.URL_SCHEME.length)):null;Ks.registerSaveRouter(uxe);Ks.registerLoadRouter(uxe);function ONt(t){return new xp(t)}class PNt{constructor(){L(oe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),L(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=km+su,r=su+axe;for(let s=0;s<this.LS.length;++s){const i=this.LS.key(s);if(i.startsWith(n)&&i.endsWith(r)){const o=ANt(i);e[o]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=INt(e);const n=lxe(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return cxe(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZK="://";class Vl{constructor(){this.managers={}}static getInstance(){return Vl.instance==null&&(Vl.instance=new Vl),Vl.instance}static registerManager(e,n){L(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(ZK)&&(e=e.slice(0,e.indexOf(ZK))),L(e.length>0,()=>"scheme must not be an empty string.");const r=Vl.getInstance();L(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Vl.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Vl.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RNt{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!oe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return Mve(e)}}if(oe().get("IS_BROWSER")){oe().setPlatform("browser",new RNt);try{Vl.registerManager(xp.URL_SCHEME,new PNt)}catch{}try{Vl.registerManager(vp.URL_SCHEME,new _Nt)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DNt={importFetch:()=>require("node-fetch")};let bP;class jNt{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return oe().global.fetch!=null?oe().global.fetch(e,n):(bP==null&&(bP=DNt.importFetch()),bP(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}oe().get("IS_NODE")&&!oe().get("IS_BROWSER")&&oe().setPlatform("node",new jNt);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zt(t,e="float32",n){return e=e||"float32",Ku(t),new vs(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MNt(t,e){const n=V(t,"x","cast");if(!A2t(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return X.runKernel(Aw,r,s)}const Be=J({cast_:MNt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FNt(t){const n={x:V(t,"x","clone","string_or_numeric")};return X.runKernel(Ww,n)}const Kh=J({clone_:FNt});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LNt(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Qve();const BNt={buffer:zt,cast:Be,clone:Kh,print:LNt};lNt(BNt);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zNt(t,e){let n=V(t,"a","add"),r=V(e,"b","add");[n,r]=kr(n,r);const s={a:n,b:r};return X.runKernel(Vv,s)}const Ce=J({add_:zNt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VNt(t,e){let n=V(t,"a","floorDiv"),r=V(e,"b","floorDiv");[n,r]=kr(n,r);const s={a:n,b:r};return X.runKernel(zw,s)}const dxe=J({floorDiv_:VNt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WNt(t,e){let n=V(t,"a","div"),r=V(e,"b","div");if([n,r]=kr(n,r),n.dtype==="int32"&&r.dtype==="int32")return dxe(n,r);const s={a:n,b:r},i={};return X.runKernel(Dw,s,i)}const lt=J({div_:WNt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UNt(t,e){let n=V(t,"a","mul"),r=V(e,"b","mul");[n,r]=kr(n,r);const s={a:n,b:r};return X.runKernel(Zw,s)}const K=J({mul_:UNt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GNt(t){const e=V(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return X.runKernel(A$,n)}else{const n={x:e};return X.runKernel(C$,n)}}const Ys=J({abs_:GNt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HNt(t){const n={x:V(t,"x","acos")};return X.runKernel(Cw,n)}const qNt=J({acos_:HNt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KNt(t){const n={x:V(t,"x","acosh")};return X.runKernel(Nw,n)}const XNt=J({acosh_:KNt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YNt(t,e=null,n=!1){const s={x:V(t,"x","all","bool")},i={axis:e,keepDims:n};return X.runKernel(Wz,s,i)}const fxe=J({all_:YNt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QNt(t,e=null,n=!1){const s={x:V(t,"x","any","bool")},i={axis:e,keepDims:n};return X.runKernel(Uz,s,i)}const sF=J({any_:QNt});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZNt(t,e=0){const r={x:V(t,"x","argMax")},s={axis:e};return X.runKernel(N$,r,s)}const c1=J({argMax_:ZNt});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JNt(t,e=0){const r={x:V(t,"x","argMin")},s={axis:e};return X.runKernel(_$,r,s)}const e_t=J({argMin_:JNt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t_t(t){const n={x:V(t,"x","asin")};return X.runKernel(_w,n)}const n_t=J({asin_:t_t});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r_t(t){const n={x:V(t,"x","asinh")};return X.runKernel(Tw,n)}const s_t=J({asinh_:r_t});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i_t(t){const n={x:V(t,"x","atan")};return X.runKernel(kw,n)}const o_t=J({atan_:i_t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a_t(t,e){let n=V(t,"a","atan2"),r=V(e,"b","atan2");[n,r]=kr(n,r);const s={a:n,b:r};return X.runKernel($w,s)}const l_t=J({atan2_:a_t});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c_t(t){const n={x:V(t,"x","atanh")};return X.runKernel(Ew,n)}const u_t=J({atanh_:c_t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vS(t,e,n,r,s="NHWC",i){const o=t[3],a=[...e,o],l=Yu(s);return ws(t,a,n,i,r,null,null,l)}function Ma(t,e,n,r,s,i,o="channelsLast"){const[a,l]=u1(e);let c;if(o==="channelsLast")c=[a,l,t[3],t[3]];else if(o==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return ws(t,c,n,r,s,i,!1,o)}function Xu(t,e,n,r,s,i,o="NDHWC"){const[a,l,c]=iF(e);let u,d;if(o==="NDHWC")d="channelsLast",u=[a,l,c,t[4],t[4]];else if(o==="NCDHW")d="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Mf(t,u,n,r,s,!1,d,i)}function ws(t,e,n,r,s,i,o=!1,a="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d]=t;else if(a==="channelsFirst")[l,d,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);const[h,p,,m]=e,[g,y]=u1(n),[v,x]=u1(r),b=xg(h,v),S=xg(p,x),{padInfo:w,outHeight:C,outWidth:_}=h_t(s,c,u,g,y,b,S,i,a),T=o?m*d:m;let k;return a==="channelsFirst"?k=[l,T,C,_]:a==="channelsLast"&&(k=[l,C,_,T]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:d,outHeight:C,outWidth:_,outChannels:T,padInfo:w,strideHeight:g,strideWidth:y,filterHeight:h,filterWidth:p,effectiveFilterHeight:b,effectiveFilterWidth:S,dilationHeight:v,dilationWidth:x,inShape:t,outShape:k,filterShape:e}}function Mf(t,e,n,r,s,i=!1,o="channelsLast",a){let[l,c,u,d,h]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,c,u,d,h]=t;else if(o==="channelsFirst")[l,h,c,u,d]=t;else throw new Error(`Unknown dataFormat ${o}`);const[p,m,g,,y]=e,[v,x,b]=iF(n),[S,w,C]=iF(r),_=xg(p,S),T=xg(m,w),k=xg(g,C),{padInfo:$,outDepth:O,outHeight:P,outWidth:D}=p_t(s,c,u,d,v,x,b,_,T,k,a),A=i?y*h:y;let I;return o==="channelsFirst"?I=[l,A,O,P,D]:o==="channelsLast"&&(I=[l,O,P,D,A]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:u,inWidth:d,inChannels:h,outDepth:O,outHeight:P,outWidth:D,outChannels:A,padInfo:$,strideDepth:v,strideHeight:x,strideWidth:b,filterDepth:p,filterHeight:m,filterWidth:g,effectiveFilterDepth:_,effectiveFilterHeight:T,effectiveFilterWidth:k,dilationDepth:S,dilationHeight:w,dilationWidth:C,inShape:t,outShape:I,filterShape:e}}function d_t(t,e,n,r,s){r==null&&(r=OV(t,e,n));const i=t[0],o=t[1],a=d1((i-e+2*r)/n+1,s),l=d1((o-e+2*r)/n+1,s);return[a,l]}function f_t(t,e,n,r,s,i){s==null&&(s=OV(t,e[0],r[0]));const o=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*s>=e[a]&&(o[a]=d1((t[a]-e[a]+2*s)/r[a]+1,i));return o}function OV(t,e,n,r=1){const s=xg(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function u1(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function iF(t){return typeof t=="number"?[t,t,t]:t}function xg(t,e){return e<=1?t:t+(t-1)*(e-1)}function h_t(t,e,n,r,s,i,o,a,l){let c,u,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const p=d_t([e,n],i,r,t,a);u=p[0],d=p[1]}else if(t==="same"){u=Math.ceil(e/r),d=Math.ceil(n/s);const h=Math.max(0,(u-1)*r+i-e),p=Math.max(0,(d-1)*s+o-n),m=Math.floor(h/2),g=h-m,y=Math.floor(p/2),v=p-y;c={top:m,bottom:g,left:y,right:v,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-i+1)/r),d=Math.ceil((n-o+1)/s);else if(typeof t=="object"){const h=l==="channelsLast"?t[1][0]:t[2][0],p=l==="channelsLast"?t[1][1]:t[2][1],m=l==="channelsLast"?t[2][0]:t[3][0],g=l==="channelsLast"?t[2][1]:t[3][1];c={top:h,bottom:p,left:m,right:g,type:h===0&&p===0&&m===0&&g===0?"VALID":"EXPLICIT"},u=d1((e-i+h+p)/r+1,a),d=d1((n-o+m+g)/s+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:d}}function p_t(t,e,n,r,s,i,o,a,l,c,u){let d,h,p,m;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const y=f_t([e,n,r,1],[a,l,c],1,[s,i,o],t,u);h=y[0],p=y[1],m=y[2]}else if(t==="same"){h=Math.ceil(e/s),p=Math.ceil(n/i),m=Math.ceil(r/o);const g=(h-1)*s+a-e,y=(p-1)*i+l-n,v=(m-1)*o+c-r,x=Math.floor(g/2),b=g-x,S=Math.floor(y/2),w=y-S,C=Math.floor(v/2),_=v-C;d={top:S,bottom:w,left:C,right:_,front:x,back:b,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:h,outHeight:p,outWidth:m}}function d1(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function bp(t){const[e,n,r]=u1(t);return e===1&&n===1&&r===1}function Fs(t,e){return bp(t)||bp(e)}function wp(t){return u1(t).every(e=>e>0)}function Yu(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Fi(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")L(jy(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{L(jy(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m_t(t,e){const r={x:V(t,"x","reshape","string_or_numeric")},s={shape:e};return X.runKernel(uA,r,s)}const Z=J({reshape_:m_t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g_t(t,e,n,r,s){const i=V(t,"x","avgPool","float32"),o=1;L(Fs(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let a=i,l=!1;i.rank===3&&(l=!0,a=Z(i,[1,i.shape[0],i.shape[1],i.shape[2]])),L(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Fi("avgPool",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s};let d=X.runKernel(T$,c,u);return d=Be(d,i.dtype),l?Z(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const PV=J({avgPool_:g_t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y_t(t,e,n,r,s,i="NDHWC"){const o=V(t,"x","avgPool3d","float32");let a=o,l=!1;o.rank===4&&(l=!0,a=Z(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),L(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),L(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),L(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Fi("avgPool3d",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i};let d=X.runKernel(k$,c,u);return d=Be(d,a.dtype),l?Z(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const v_t=J({avgPool3d_:y_t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x_t(t,e=0){L(t.length>=1,()=>"Pass at least one tensor to concat");const n=txe(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return Kh(n[0]);const r=n,s={axis:e};return X.runKernel(I$,r,s)}const Ai=J({concat_:x_t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b_t(t,e,n=!1,r=!1){let s=V(t,"a","matMul"),i=V(e,"b","matMul");[s,i]=kr(s,i);const o={a:s,b:i},a={transposeA:n,transposeB:r};return X.runKernel(E$,o,a)}const on=J({matMul_:b_t});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w_t(t){const n={x:V(t,"x","sigmoid","float32")};return X.runKernel(cS,n)}const Uv=J({sigmoid_:w_t});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S_t(t,e,n){const r=V(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},i={begin:e,size:n};return X.runKernel(mA,s,i)}const In=J({slice_:S_t});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C_t(t){const n={x:V(t,"x","tanh","float32")};return X.runKernel(mS,n)}const TA=J({tanh_:C_t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N_t(t,e,n){const r=V(t,"x","batchToSpaceND"),s=e.reduce((a,l)=>a*l);L(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),L(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),L(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const i={x:r},o={blockShape:e,crops:n};return X.runKernel($$,i,o)}const RV=J({batchToSpaceND_:N_t});function __t(t){let e;return t.rank===0||t.rank===1?e=Z(t,[1,1,1,t.size]):t.rank===2?e=Z(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=Z(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T_t(t,e,n,r,s,i){i==null&&(i=.001);const o=V(t,"x","batchNorm"),a=V(e,"mean","batchNorm"),l=V(n,"variance","batchNorm");let c;s!=null&&(c=V(s,"scale","batchNorm"));let u;r!=null&&(u=V(r,"offset","batchNorm")),L(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),L(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),L(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h={x:__t(o),scale:c,offset:u,mean:a,variance:l},p={varianceEpsilon:i},m=X.runKernel(B$,h,p);return Z(m,o.shape)}const kA=J({batchNorm_:T_t});function k_t(t,e,n,r,s,i){const o=V(t,"x","batchNorm"),a=V(e,"mean","batchNorm"),l=V(n,"variance","batchNorm");let c;s!=null&&(c=V(s,"scale","batchNorm"));let u;return r!=null&&(u=V(r,"offset","batchNorm")),L(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),L(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),L(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&L(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&L(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),kA(o,a,l,u,c,i)}const E_t=J({batchNorm2d_:k_t});function $_t(t,e,n,r,s,i){const o=V(t,"x","batchNorm"),a=V(e,"mean","batchNorm"),l=V(n,"variance","batchNorm");let c;s!=null&&(c=V(s,"scale","batchNorm"));let u;return r!=null&&(u=V(r,"offset","batchNorm")),L(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),L(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),L(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&L(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&L(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),kA(o,a,l,u,c,i)}const A_t=J({batchNorm3d_:$_t});function I_t(t,e,n,r,s,i){const o=V(t,"x","batchNorm"),a=V(e,"mean","batchNorm"),l=V(n,"variance","batchNorm");let c;s!=null&&(c=V(s,"scale","batchNorm"));let u;return r!=null&&(u=V(r,"offset","batchNorm")),L(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),L(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),L(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&L(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&L(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),kA(o,a,l,u,c,i)}const O_t=J({batchNorm4d_:I_t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P_t(t,e,n){const r=V(t,"x","bincount"),s=V(e,"weights","bincount");L(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),L(n>=0,()=>`size must be non-negative, but got ${n}.`),L(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const i={x:r,weights:s},o={size:n};return X.runKernel(qz,i,o)}const R_t=J({bincount_:P_t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D_t(t,e){let n=V(t,"broadcastTo","x");const r=n.shape;if(Ku(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=Z(n,c)}const s=n.shape,i=Array.from(e);for(let c=e.length-1;c>=0;c--)if(s[c]===e[c])i[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return Kh(n);const a={x:n},l={reps:i};return X.runKernel(gS,a,l)}const A0=J({broadcastTo_:D_t});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j_t(t){const n={x:V(t,"x","ceil","float32")};return X.runKernel(Iw,n)}const M_t=J({ceil_:j_t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EA(t,e,n){Ku(t),n=n||Bv(e);const r={shape:t,value:e,dtype:n};return X.runKernel(lV,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F_t(t,e,n){const r=V(t,"x","clipByValue");if(L(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return EA(r.shape,e,r.dtype);const s={x:r},i={clipValueMin:e,clipValueMax:n};return X.runKernel(Ow,s,i)}const Fo=J({clipByValue_:F_t});function L_t(t){return Ai(t,0)}const B_t=J({concat1d_:L_t});function z_t(t,e){return Ai(t,e)}const V_t=J({concat2d_:z_t});function W_t(t,e){return Ai(t,e)}const U_t=J({concat3d_:W_t});function G_t(t,e){return Ai(t,e)}const H_t=J({concat4d_:G_t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q_t(t,e,n,r,s="NHWC",i=[1,1],o){const a=V(t,"x","conv2d","float32"),l=V(e,"filter","conv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=Z(a,[1,a.shape[0],a.shape[1],a.shape[2]])),L(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),L(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Fi("conv2d",r,o);const d=s==="NHWC"?c.shape[3]:c.shape[1];L(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),L(Fs(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),L(wp(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),L(wp(n),()=>"Error in conv2D: Strides should be larger than 0.");const h={x:c,filter:l},p={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},m=X.runKernel(O$,h,p);return u?Z(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const Sp=J({conv2d_:q_t});function K_t(t,e,n,r,s="NWC",i=1,o){const a=V(t,"x","conv1d"),l=V(e,"filter","conv1d");let c=a,u=!1;a.rank===2&&(u=!0,c=Z(a,[1,a.shape[0],a.shape[1]])),L(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),L(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Fi("conv1d",r,o),L(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),L(Fs(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),L(wp(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),L(wp(n),()=>"Error in conv1D: Stride should be larger than 0."),L(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const d=Z(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=Z(c,[c.shape[0],1,c.shape[1],c.shape[2]]),y=Sp(h,d,[1,n],r,"NHWC",[1,i],o);return u?Z(y,[y.shape[2],y.shape[3]]):Z(y,[y.shape[0],y.shape[2],y.shape[3]])}const hxe=J({conv1d_:K_t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X_t(t,e,n,r,s,i="NHWC",o){L(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,c=!1;e.rank===3&&(c=!0,l=Z(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),L(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),L(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),L(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=i==="NHWC"?a[3]:a[1],d=i==="NHWC"?l.shape[3]:l.shape[1];L(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),L(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Fi("conv2dDerInput",s,o);const h={dy:l,filter:n},p={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,inputShape:a},m=X.runKernel(P$,h,p);return c?Z(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const DV=J({conv2DBackpropInput_:X_t});function Y_t(t,e,n,r,s,i){const o=V(t,"x","conv2dTranspose"),a=V(e,"filter","conv2dTranspose");return DV(n,o,a,r,s,"NHWC",i)}const pxe=J({conv2dTranspose_:Y_t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q_t(t,e,n,r,s="NDHWC",i=[1,1,1]){const o=V(t,"x","conv3d"),a=V(e,"filter","conv3d");let l=o,c=!1;o.rank===4&&(c=!0,l=Z(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),L(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),L(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),L(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),L(Fs(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),L(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),L(wp(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),L(wp(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:a},d={strides:n,pad:r,dataFormat:s,dilations:i},h=X.runKernel(R$,u,d);return c?Z(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const Z_t=J({conv3d_:Q_t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J_t(t,e,n,r,s){L(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,o=e,a=!1;e.rank===4&&(a=!0,o=Z(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],c=o.shape[4];L(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),L(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),L(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),L(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),L(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const u={dy:o,filter:n},d={pad:s,strides:r,inputShape:i},h=X.runKernel(Zz,u,d);return a?Z(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const mxe=J({conv3DBackpropInput_:J_t});function eTt(t,e,n,r,s){const i=V(t,"x","conv3dTranspose"),o=V(e,"filter","conv3dTranspose");return mxe(n,i,o,r,s)}const tTt=J({conv3dTranspose_:eTt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nTt(t){const n={x:V(t,"x","cos","float32")};return X.runKernel(Pw,n)}const jV=J({cos_:nTt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rTt(t){const n={x:V(t,"x","cosh","float32")};return X.runKernel(Rw,n)}const gxe=J({cosh_:rTt});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sTt(t,e=0,n=!1,r=!1){const i={x:V(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return X.runKernel(Jz,i,o)}const oF=J({cumprod_:sTt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iTt(t,e=0,n=!1,r=!1){const i={x:V(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return X.runKernel(D$,i,o)}const yxe=J({cumsum_:iTt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oTt(t,e,n,r=!1){const s=V(t,"x","denseBincount"),i=V(e,"weights","denseBincount");L(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),L(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),L(n>=0,()=>`size must be non-negative, but got ${n}.`),L(i.size===s.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${i.shape}.`);const o={x:s,weights:i},a={size:n,binaryOutput:r};return X.runKernel(tV,o,a)}const JK=J({denseBincount_:oTt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aTt(t,e,n="NHWC"){const r=V(t,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];L(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),L(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),L(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),L(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return X.runKernel(nV,a,l)}const lTt=J({depthToSpace_:aTt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cTt(t,e,n,r,s="NHWC",i=[1,1],o){const a=V(t,"x","depthwiseConv2d","float32"),l=V(e,"filter","depthwiseConv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=Z(a,[1,a.shape[0],a.shape[1],a.shape[2]])),L(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),L(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=s==="NHWC"?c.shape[3]:c.shape[1];L(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),Fi("depthwiseConv2d",r,o);const h={x:c,filter:l},p={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},m=X.runKernel(j$,h,p);return u?Z(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const MV=J({depthwiseConv2d_:cTt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uTt(t,e,n,r,s=[1,1],i="NHWC"){const o=V(t,"x","dilation2d"),a=V(e,"filter","dilation2d");L(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),L(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),L(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=o,c=!1;o.rank===3&&(l=Z(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0),L(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const u={x:l,filter:a},d={strides:n,pad:r,dilations:s},h=X.runKernel(M$,u,d);return c?Z(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const dTt=J({dilation2d_:uTt});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function By(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const i=n-1-s,o=t[i]||1;(e[e.length-1-s]||1)>1&&o===1&&r.unshift(i)}return r}function Xr(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],i=e.length-r-1,o=e[i];(s==null||s===1&&o>1)&&n.unshift(i)}return n}function Pt(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let s=0;s<n;s++){let i=t[t.length-s-1];i==null&&(i=1);let o=e[e.length-s-1];if(o==null&&(o=1),i===1)r[n-s-1]=o;else if(o===1)r[n-s-1]=i;else if(i!==o){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-s-1]=i}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fTt(t,e){let n=V(t,"a","equal","string_or_numeric"),r=V(e,"b","equal","string_or_numeric");[n,r]=kr(n,r),Pt(n.shape,r.shape);const s={a:n,b:r};return X.runKernel(F$,s)}const Ac=J({equal_:fTt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hTt(t,e,n){const r=V(e,"a","where"),s=V(n,"b","where"),i=V(t,"condition","where","bool"),o=Pt(Pt(i.shape,r.shape),s.shape),a=A0(i,o),l=A0(r,o),c=A0(s,o),u={condition:a,t:l,e:c};return X.runKernel(pA,u)}const ai=J({where_:hTt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pTt(t){const n={x:V(t,"x","zerosLike")};return X.runKernel(SA,n)}const Zt=J({zerosLike_:pTt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mTt(t,e){let n=V(t,"a","div"),r=V(e,"b","div");[n,r]=kr(n,r);const s=lt(n,r),i=Zt(s),o=Ac(r,i);return ai(o,i,s)}const gTt=J({divNoNan_:mTt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yTt(t,e){const n=V(t,"t1","dot"),r=V(e,"t2","dot");L((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(L(s===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${i}.`),n.rank===1&&r.rank===1){const o=Z(n,[1,-1]),a=Z(r,[-1,1]),l=on(o,a);return Z(l,[])}else if(n.rank===1&&r.rank===2){const o=Z(n,[1,-1]),a=Z(r,[r.shape[0],r.shape[1]]),l=on(o,a);return Z(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=Z(r,[-1,1]),a=on(n,o);return Z(a,[a.size])}else{const o=Z(r,[r.shape[0],r.shape[1]]);return on(n,o)}}const vTt=J({dot_:yTt});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xTt(t,...e){const n=e.map((s,i)=>V(s,`tensors${i}`,"einsum")),r={equation:t};return X.runKernel(iV,n,r)}const Rx=J({einsum_:xTt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bTt(t){const n={x:V(t,"x","elu","float32")};return X.runKernel(jw,n)}const $A=J({elu_:bTt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wTt(t){let e=V(t,"x","erf");L(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Be(e,"float32"));const n={x:e};return X.runKernel(Mw,n)}const vxe=J({erf_:wTt});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FV(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function xxe(t,e,n){const r=t.length+e.length,s=[];let i=0,o=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?s.push(t[i++]):s.push(e[o++]);return s}function ds(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const s=e.map(i=>t[i]);return[n,s]}function Mr(t,e){const n=e.map(r=>1);return xxe(t,n,e)}function Ss(t,e,n){L(FV(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function lr(t,e){if(FV(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Ff(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Er(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function STt(t,e=null,n=!1){const s={x:V(t,"x","max")},i={reductionIndices:e,keepDims:n};return X.runKernel(Y$,s,i)}const gl=J({max_:STt});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CTt(t,e=null,n=!1){const s={x:V(t,"x","min")},i={axis:e,keepDims:n};return X.runKernel(eA,s,i)}const NT=J({min_:CTt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NTt(t,e){let n=V(t,"base","pow"),r=V(e,"exp","pow");[n,r]=kr(n,r);const s={a:n,b:r};return X.runKernel(Jw,s)}const Cp=J({pow_:NTt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function an(t,e){if((Oa(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Oa(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return _A(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Tt(t){const n={x:V(t,"x","sqrt","float32")};return X.runKernel(dS,n)}const Ms=J({sqrt_:_Tt});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TTt(t){const e=V(t,"x","square"),n={};return X.runKernel("Square",{x:e},n)}const Bn=J({square_:TTt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kTt(t,e=null,n=!1){let r=V(t,"x","sum");r.dtype==="bool"&&(r=Be(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return X.runKernel(gA,s,i)}const it=J({sum_:kTt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ETt(t,e="euclidean",n=null,r=!1){t=V(t,"x","norm");const s=bxe(t,e,n);let i=s.shape;if(r){const o=Vt(n,t.shape);i=Mr(s.shape,o)}return Z(s,i)}function bxe(t,e,n=null){if(t.rank===0)return Ys(t);if(t.rank!==1&&n===null)return bxe(Z(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return it(Ys(t),n);if(e===1/0)return gl(Ys(t),n);if(e===-1/0)return NT(Ys(t),n);if(e==="euclidean"||e===2)return Ms(it(Cp(Ys(t),an(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return gl(it(Ys(t),n[0]),n[1]-1);if(e===1/0)return gl(it(Ys(t),n[1]),n[0]);if(e===-1/0)return NT(it(Ys(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Ms(it(Bn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const AA=J({norm_:ETt});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Tt(t,e=null,n=!1){return AA(t,"euclidean",e,n)}const ATt=J({euclideanNorm_:$Tt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ITt(t){const n={x:V(t,"x","exp")};return X.runKernel(Fw,n)}const Ic=J({exp_:ITt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OTt(t,e=0){const n=V(t,"x","expandDims","string_or_numeric");L(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:e};return X.runKernel(L$,r,s)}const wi=J({expandDims_:OTt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PTt(t){const n={x:V(t,"x","expm1")};return X.runKernel(Lw,n)}const RTt=J({expm1_:PTt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DTt(t,e){const n=V(t,"x","tile","string_or_numeric");L(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},s={reps:e};return X.runKernel(gS,r,s)}const al=J({tile_:DTt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jTt(t,e,n,r="float32"){e==null&&(e=t);const s=zt([t,e],r),i=t<=e?t:e;for(let a=0;a<i;++a)s.set(1,a,a);const o=Z(s.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return al(wi(o,0),[n[0],1,1]);if(n.length===2)return al(wi(wi(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return al(wi(wi(wi(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const wxe=J({eye_:jTt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MTt(t){const n={x:V(t,"x","floor","float32")};return X.runKernel(Bw,n)}const IA=J({floor_:MTt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FTt(t,e,n=0,r=0){const s=V(t,"x","gather"),i=V(e,"indices","gather","int32"),o={x:s,indices:i},a={axis:n,batchDims:r};return X.runKernel(z$,o,a)}const LV=J({gather_:FTt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LTt(t,e){let n=V(t,"a","greater","string_or_numeric"),r=V(e,"b","greater","string_or_numeric");[n,r]=kr(n,r),Pt(n.shape,r.shape);const s={a:n,b:r};return X.runKernel(V$,s)}const Vo=J({greater_:LTt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BTt(t,e){let n=V(t,"a","greaterEqual","string_or_numeric"),r=V(e,"b","greaterEqual","string_or_numeric");[n,r]=kr(n,r),Pt(n.shape,r.shape);const s={a:n,b:r};return X.runKernel(Vw,s)}const Qp=J({greaterEqual_:BTt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zTt(t){const n={input:V(t,"input","imag")};return X.runKernel(dV,n)}const BV=J({imag_:zTt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VTt(t){const n={x:V(t,"x","isFinite")};return X.runKernel(Uw,n)}const WTt=J({isFinite_:VTt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UTt(t){const n={x:V(t,"x","isInf")};return X.runKernel(Gw,n)}const GTt=J({isInf_:UTt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HTt(t){const n={x:V(t,"x","isNaN")};return X.runKernel(Hw,n)}const qTt=J({isNaN_:HTt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KTt(t,e=.2){const r={x:V(t,"x","leakyRelu")},s={alpha:e};return X.runKernel(W$,r,s)}const zV=J({leakyRelu_:KTt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XTt(t,e){let n=V(t,"a","less","string_or_numeric"),r=V(e,"b","less","string_or_numeric");[n,r]=kr(n,r),Pt(n.shape,r.shape);const s={a:n,b:r};return X.runKernel(U$,s)}const _T=J({less_:XTt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YTt(t,e){let n=V(t,"a","lessEqual","string_or_numeric"),r=V(e,"b","lessEqual","string_or_numeric");[n,r]=kr(n,r),Pt(n.shape,r.shape);const s={a:n,b:r};return X.runKernel(G$,s)}const Gv=J({lessEqual_:YTt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QTt(t,e=5,n=1,r=1,s=.5){const i=V(t,"x","localResponseNormalization");L(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),L(jy(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=i,a=!1;i.rank===3&&(a=!0,o=Z(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:o},c={depthRadius:e,bias:n,alpha:r,beta:s},u=X.runKernel(X$,l,c);return a?Z(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const ZTt=J({localResponseNormalization_:QTt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JTt(t){const n={x:V(t,"x","log","float32")};return X.runKernel(qw,n)}const Oc=J({log_:JTt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ekt(t){const n={x:V(t,"x","log1p")};return X.runKernel(Kw,n)}const Sxe=J({log1p_:ekt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tkt(t,e){L(UM(t),()=>"The f passed in variableGrads(f) must be a function"),L(e==null||Array.isArray(e)&&e.every(c=>c instanceof CT),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in X.registeredVariables)e.push(X.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,s=e.length;e=e.filter(c=>c.trainable),L(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const i=!0,{value:o,grads:a}=X.gradients(t,e,null,i);L(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),L(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:o,grads:l}}function zy(t){return X.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nkt(t){const n={x:V(t,"x","neg")};return X.runKernel(nA,n)}const Tr=J({neg_:nkt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rkt(t){const n={x:V(t,"x","softplus")};return X.runKernel(uS,n)}const xS=J({softplus_:rkt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function skt(t){const e=V(t,"x","logSigmoid");return zy(r=>({value:Tr(xS(Tr(r))),gradFunc:o=>K(o,Uv(Tr(r)))}))(e)}const ikt=J({logSigmoid_:skt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function okt(t,e){let n=V(t,"a","sub"),r=V(e,"b","sub");[n,r]=kr(n,r);const s={a:n,b:r};return X.runKernel(hS,s)}const gt=J({sub_:okt});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function akt(t,e=-1){const n=V(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return zy((s,i)=>{const a=gl(s,e,!0),l=gt(s,a),c=gt(Be(l,"float32"),Oc(it(Ic(l),e,!0)));return i([c]),{value:c,gradFunc:(d,h)=>{const[p]=h,m=!0,g=Ic(p);return gt(d,K(it(d,e,m),g))}}})(n)}const Cxe=J({logSoftmax_:akt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lkt(t,e=null,n=!1){const r=V(t,"x","logSumExp"),s=Vt(e,r.shape),i=gl(r,s,!0),o=gt(r,i),a=Ic(o),l=it(a,s),c=Oc(l),u=Ce(Z(i,c.shape),c);if(n){const d=Mr(u.shape,s);return Z(u,d)}return u}const Nxe=J({logSumExp_:lkt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ckt(t,e){const n=V(t,"a","logicalAnd","bool"),r=V(e,"b","logicalAnd","bool");Pt(n.shape,r.shape);const s={a:n,b:r};return X.runKernel(H$,s)}const Mu=J({logicalAnd_:ckt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ukt(t){const n={x:V(t,"x","logicalNot","bool")};return X.runKernel(q$,n)}const VV=J({logicalNot_:ukt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dkt(t,e){const n=V(t,"a","logicalOr","bool"),r=V(e,"b","logicalOr","bool");Pt(n.shape,r.shape);const s={a:n,b:r};return X.runKernel(K$,s)}const _xe=J({logicalOr_:dkt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fkt(t,e){const n=V(t,"a","logicalXor","bool"),r=V(e,"b","logicalXor","bool");return Pt(n.shape,r.shape),Mu(_xe(t,e),VV(Mu(t,e)))}const hkt=J({logicalXor_:fkt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pkt(t,e,n,r,s){const i=V(t,"x","maxPool"),o=1;let a=i,l=!1;i.rank===3&&(l=!0,a=Z(i,[1,i.shape[0],i.shape[1],i.shape[2]])),L(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),L(Fs(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Fi("maxPool",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s},d=X.runKernel(Q$,c,u);return l?Z(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const WV=J({maxPool_:pkt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mkt(t,e=[1,1,1],n,r,s,i="NDHWC"){const o=V(t,"x","maxPool3d");let a=o,l=!1;o.rank===4&&(l=!0,a=Z(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),L(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),L(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Fi("maxPool3d",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i},d=X.runKernel(Z$,c,u);return l?Z(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const gkt=J({maxPool3d_:mkt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ykt(t,e){let n=V(t,"a","maximum"),r=V(e,"b","maximum");[n,r]=kr(n,r),n.dtype==="bool"&&(n=Be(n,"int32"),r=Be(r,"int32")),Pt(n.shape,r.shape);const s={a:n,b:r};return X.runKernel(Xw,s)}const Lf=J({maximum_:ykt});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vkt(t,e=null,n=!1){const s={x:V(t,"x","mean")},i={axis:e,keepDims:n};return X.runKernel(J$,s,i)}const Dr=J({mean_:vkt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ns(t,e="float32"){if(Ku(t),e==="complex64"){const r=ns(t,"float32"),s=ns(t,"float32");return Ly(r,s)}const n=js(le(t),e);return X.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bf(t,e="float32"){if(Ku(t),e==="complex64"){const r=Bf(t,"float32"),s=ns(t,"float32");return Ly(r,s)}const n=Lz(le(t),e);return X.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xkt(t,e){let n=V(t,"a","minimum"),r=V(e,"b","minimum");[n,r]=kr(n,r),n.dtype==="bool"&&(n=Be(n,"int32"),r=Be(r,"int32")),Pt(n.shape,r.shape);const s={a:n,b:r};return X.runKernel(Yw,s)}const f1=J({minimum_:xkt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bkt(t,e,n){L(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=V(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");L(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)L(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),L(e[a][0]>=0&&e[a][0]<=r.shape[a]-s&&e[a][1]>=0&&e[a][1]<=r.shape[a]-s,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-s} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},o={x:r};return X.runKernel(tA,o,i)}const wkt=J({mirrorPad_:bkt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Skt(t,e){let n=V(t,"a","mod"),r=V(e,"b","mod");[n,r]=kr(n,r);const s={a:n,b:r};return X.runKernel(Qw,s)}const Ckt=J({mod_:Skt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nkt(t,e=null,n=!1){t=V(t,"x","moments");const r=Vt(e,t.shape),s=Dr(t,r,n);let i=s.shape;n||(i=Mr(s.shape,r));const o=Bn(gt(Be(t,"float32"),Z(s,i))),a=Dr(o,r,n);return{mean:s,variance:a}}const UV=J({moments_:Nkt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _kt(t,e){let n=V(t,"a","notEqual","string_or_numeric"),r=V(e,"b","notEqual","string_or_numeric");[n,r]=kr(n,r),Pt(n.shape,r.shape);const s={a:n,b:r};return X.runKernel(rA,s)}const TT=J({notEqual_:_kt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tkt(t,e,n=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:V(t,"indices","oneHot","int32")},a={dtype:s,depth:e,onValue:n,offValue:r};return X.runKernel(iA,o,a)}const Txe=J({oneHot_:Tkt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kkt(t){const n={x:V(t,"x","onesLike")};return X.runKernel(sA,n)}const Pa=J({onesLike_:kkt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ekt(t,e,n=0){const r=V(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},i={x:r};return X.runKernel(aA,i,s)}const GV=J({pad_:Ekt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $kt(t,e,n){const r=V(t,"x","spaceToBatchND");L(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),L(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),L(r.shape.reduce((o,a,l)=>l>0&&l<=e.length?o&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},i={blockShape:e,paddings:n};return X.runKernel(yA,s,i)}const HV=J({spaceToBatchND_:$kt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Akt(t,e,n,r,s,i,o){s==null&&(s=[1,1]),i==null&&(i=1),r===0&&(r="valid");const a=V(t,"x","maxPool");let l=a,c=!1;a.rank===3&&(c=!0,l=Z(a,[1,a.shape[0],a.shape[1],a.shape[2]])),L(Fs(i,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${s}'`);const u=Ma(l.shape,e,i,s,r),d=[u.dilationHeight,u.dilationWidth];let h;r==="same"?h=Okt([u.filterHeight,u.filterWidth],d):h=[[0,0],[0,0]];const p=d[0]===1&&d[1]===1,[m,g]=Ikt([u.inHeight,u.inWidth],d,h),y=p?r:"valid",v=p?l:HV(l,d,m),b=(n==="avg"?()=>PV(v,e,i,y,o):()=>WV(v,e,i,y,o))(),S=p?b:RV(b,d,g);return c?Z(S,[S.shape[1],S.shape[2],S.shape[3]]):S}function Ikt(t,e,n){const r=n.map(u=>u[0]),s=n.map(u=>u[1]),i=t.concat(r,s),o=e.map((u,d)=>(u-i[d]%u)%u),a=s.map((u,d)=>u+o[d]),l=e.map((u,d)=>[r[d],a[d]]),c=e.map((u,d)=>[0,o[d]]);return[l,c]}function Okt(t,e){const r=t.map((o,a)=>o+(o-1)*(e[a]-1)).map(o=>o-1),s=r.map(o=>Math.floor(o/2)),i=r.map((o,a)=>o-s[a]);return r.map((o,a)=>[s[a],i[a]])}const Pkt=J({pool_:Akt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rkt(t,e){const n=V(t,"x","prelu"),r=V(e,"alpha","prelu"),s={x:n,alpha:r};return X.runKernel(lA,s)}const qV=J({prelu_:Rkt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dkt(t,e=null,n=!1){let r=V(t,"x","prod");r.dtype==="bool"&&(r=Be(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return X.runKernel(cA,s,i)}const jkt=J({prod_:Dkt});var KV={exports:{}};KV.exports;(function(t){(function(e,n,r){function s(l){var c=this,u=a();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function i(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var u=new s(l),d=c&&c.state,h=u.next;return h.int32=function(){return u.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,d&&(typeof d=="object"&&i(d,u),h.state=function(){return i(u,{})}),h}function a(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var h=.02519603282416938*l;l=h>>>0,h-=l,h*=l,l=h>>>0,h-=l,l+=h*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=o:this.alea=o})(da,t)})(KV);var Mkt=KV.exports,XV={exports:{}};XV.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,p=(c.next()>>>0)/4294967296,m=(h+p)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.xor128=o})(da,t)})(XV);var Fkt=XV.exports,YV={exports:{}};YV.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,p=(c.next()>>>0)/4294967296,m=(h+p)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.xorwow=o})(da,t)})(YV);var Lkt=YV.exports,QV={exports:{}};QV.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var u=l.x,d=l.i,h,p;return h=u[d],h^=h>>>7,p=h^h<<24,h=u[d+1&7],p^=h^h>>>10,h=u[d+3&7],p^=h^h>>>3,h=u[d+4&7],p^=h^h<<7,h=u[d+7&7],h=h^h<<13,p^=h^h<<9,u[d]=p,l.i=d+1&7,p};function c(u,d){var h,p=[];if(d===(d|0))p[0]=d;else for(d=""+d,h=0;h<d.length;++h)p[h&7]=p[h&7]<<15^d.charCodeAt(h)+p[h+1&7]<<13;for(;p.length<8;)p.push(0);for(h=0;h<8&&p[h]===0;++h);for(h==8?p[7]=-1:p[h],u.x=p,u.i=0,h=256;h>0;--h)u.next()}c(l,a)}function i(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,p=(c.next()>>>0)/4294967296,m=(h+p)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,u&&(u.x&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.xorshift7=o})(da,t)})(QV);var Bkt=QV.exports,ZV={exports:{}};ZV.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var u=l.w,d=l.X,h=l.i,p,m;return l.w=u=u+1640531527|0,m=d[h+34&127],p=d[h=h+1&127],m^=m<<13,p^=p<<17,m^=m>>>15,p^=p>>>12,m=d[h]=m^p,l.i=h,m+(u^u>>>16)|0};function c(u,d){var h,p,m,g,y,v=[],x=128;for(d===(d|0)?(p=d,d=null):(d=d+"\0",p=0,x=Math.max(x,d.length)),m=0,g=-32;g<x;++g)d&&(p^=d.charCodeAt((g+32)%d.length)),g===0&&(y=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,g>=0&&(y=y+1640531527|0,h=v[g&127]^=p+y,m=h==0?m+1:0);for(m>=128&&(v[(d&&d.length||0)&127]=-1),m=127,g=4*128;g>0;--g)p=v[m+34&127],h=v[m=m+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,v[m]=p^h;u.w=y,u.X=v,u.i=m}c(l,a)}function i(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,p=(c.next()>>>0)/4294967296,m=(h+p)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,u&&(u.X&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.xor4096=o})(da,t)})(ZV);var zkt=ZV.exports,JV={exports:{}};JV.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var d=l.b,h=l.c,p=l.d,m=l.a;return d=d<<25^d>>>7^h,h=h-p|0,p=p<<24^p>>>8^m,m=m-d|0,l.b=d=d<<20^d>>>12^h,l.c=h=h-p|0,l.d=p<<16^h>>>16^m,l.a=m-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function i(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,p=(c.next()>>>0)/4294967296,m=(h+p)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.tychei=o})(da,t)})(JV);var Vkt=JV.exports,kxe={exports:{}};const Wkt={},Ukt=Object.freeze(Object.defineProperty({__proto__:null,default:Wkt},Symbol.toStringTag,{value:"Module"})),Gkt=XSe(Ukt);(function(t){(function(e,n,r){var s=256,i=6,o=52,a="random",l=r.pow(s,i),c=r.pow(2,o),u=c*2,d=s-1,h;function p(S,w,C){var _=[];w=w==!0?{entropy:!0}:w||{};var T=v(y(w.entropy?[S,b(n)]:S??x(),3),_),k=new m(_),$=function(){for(var O=k.g(i),P=l,D=0;O<c;)O=(O+D)*s,P*=s,D=k.g(1);for(;O>=u;)O/=2,P/=2,D>>>=1;return(O+D)/P};return $.int32=function(){return k.g(4)|0},$.quick=function(){return k.g(4)/4294967296},$.double=$,v(b(k.S),n),(w.pass||C||function(O,P,D,A){return A&&(A.S&&g(A,k),O.state=function(){return g(k,{})}),D?(r[a]=O,P):O})($,T,"global"in w?w.global:this==r,w.state)}function m(S){var w,C=S.length,_=this,T=0,k=_.i=_.j=0,$=_.S=[];for(C||(S=[C++]);T<s;)$[T]=T++;for(T=0;T<s;T++)$[T]=$[k=d&k+S[T%C]+(w=$[T])],$[k]=w;(_.g=function(O){for(var P,D=0,A=_.i,I=_.j,R=_.S;O--;)P=R[A=d&A+1],D=D*s+R[d&(R[A]=R[I=d&I+P])+(R[I]=P)];return _.i=A,_.j=I,D})(s)}function g(S,w){return w.i=S.i,w.j=S.j,w.S=S.S.slice(),w}function y(S,w){var C=[],_=typeof S,T;if(w&&_=="object")for(T in S)try{C.push(y(S[T],w-1))}catch{}return C.length?C:_=="string"?S:S+"\0"}function v(S,w){for(var C=S+"",_,T=0;T<C.length;)w[d&T]=d&(_^=w[d&T]*19)+C.charCodeAt(T++);return b(w)}function x(){try{var S;return h&&(S=h.randomBytes)?S=S(s):(S=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(S)),b(S)}catch{var w=e.navigator,C=w&&w.plugins;return[+new Date,e,C,e.screen,b(n)]}}function b(S){return String.fromCharCode.apply(0,S)}if(v(r.random(),n),t.exports){t.exports=p;try{h=Gkt}catch{}}else r["seed"+a]=p})(typeof self<"u"?self:da,[],Math)})(kxe);var Hkt=kxe.exports,qkt=Mkt,Kkt=Fkt,Xkt=Lkt,Ykt=Bkt,Qkt=zkt,Zkt=Vkt,Zp=Hkt;Zp.alea=qkt;Zp.xor128=Kkt;Zp.xorwow=Xkt;Zp.xorshift7=Ykt;Zp.xor4096=Qkt;Zp.tychei=Zkt;var e5=Zp;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Exe{constructor(e,n,r,s,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=i||Math.random();this.random=e5.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,r=!1;for(;!r;){let s,i,o;do s=2*this.random()-1,i=2*this.random()-1,o=s*s+i*i;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*s*a,n=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Jkt{constructor(e=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=e5.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eEt(t,e=0,n=1,r,s){if(Ku(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new Exe(e,n,r,!1,s),o=zt(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const tEt=J({randomNormal_:eEt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nEt(t,e=0,n=1,r="float32",s){Ku(t);const i=zt(t,r),o=new Jkt(e,n,null,s);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const bS=J({randomUniform_:nEt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h1(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:r};return X.runKernel(vV,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rEt(t){const n={input:V(t,"input","real")};return X.runKernel(xV,n)}const kT=J({real_:rEt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sEt(t){const n={x:V(t,"x","reciprocal")};return X.runKernel(eS,n)}const iEt=J({reciprocal_:sEt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oEt(t){const n={x:V(t,"x","relu")};return X.runKernel(tS,n)}const Jp=J({relu_:oEt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aEt(t){const n={x:V(t,"x","relu6")};return X.runKernel(nS,n)}const $xe=J({relu6_:aEt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lEt(t,e){const r={x:V(t,"x","reverse")},s={dims:e};return X.runKernel(hA,r,s)}const Np=J({reverse_:lEt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cEt(t){const n={x:V(t,"x","round")};return X.runKernel(rS,n)}const Axe=J({round_:cEt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uEt(t){const n={x:V(t,"x","rsqrt","float32")};return X.runKernel(sS,n)}const Ixe=J({rsqrt_:uEt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dEt(t){const n={x:V(t,"x","selu")};return X.runKernel(iS,n)}const Oxe=J({selu_:dEt});function fEt(t,e,n,r,s,i=[1,1],o="NHWC"){const a=V(t,"x","separableConv2d"),l=V(e,"depthwiseFilter","separableConv2d"),c=V(n,"pointwiseFilter","separableConv2d");let u=a,d=!1;if(a.rank===3&&(d=!0,u=Z(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");L(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),L(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),L(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),L(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),L(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const h=l.shape[2],p=l.shape[3];L(c.shape[2]===h*p,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*p}, but got ${c.shape[2]}.`);const m=MV(u,l,r,s,o,i),y=Sp(m,c,1,"valid",o);return d?Z(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const Pxe=J({separableConv2d_:fEt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hEt(t){const n={x:V(t,"x","sign")};return X.runKernel(lS,n)}const pEt=J({sign_:hEt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mEt(t){const n={x:V(t,"x","sin","float32")};return X.runKernel(oS,n)}const Rxe=J({sin_:mEt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gEt(t){const n={x:V(t,"x","sinh")};return X.runKernel(aS,n)}const Dxe=J({sinh_:gEt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yEt(t,e,n){const r=V(t,"x","slice1d");return L(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),In(r,[e],[n])}const t5=J({slice1d_:yEt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vEt(t,e,n){const r=V(t,"x","slice2d");return L(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),In(r,e,n)}const jxe=J({slice2d_:vEt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xEt(t,e,n){const r=V(t,"x","slice3d");return L(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),In(r,e,n)}const n5=J({slice3d_:xEt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bEt(t,e,n){const r=V(t,"x","slice4d");return L(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),In(r,e,n)}const ET=J({slice4d_:bEt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wEt(t,e=-1){const n=V(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},s={dim:e};return X.runKernel(xA,r,s)}const r5=J({softmax_:wEt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SEt(t){L(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return X.runKernel(aV,e)}const Mxe=J({fft_:SEt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CEt(t){L(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return X.runKernel(uV,e)}const aF=J({ifft_:CEt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NEt(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=Z(t,[n,e]);r=aF(s)}else{const s=[n,2*(e-1)],i=Z(kT(t),[n,e]),o=Z(BV(t),[n,e]),a=Np(In(i,[0,1],[n,e-2]),1),l=K(Np(In(o,[0,1],[n,e-2]),1),an(-1)),c=Ai([i,a],1),u=Ai([o,l],1),d=Z(Ly(c,u),[s[0],s[1]]);r=aF(d)}if(r=kT(r),t.rank===3&&t.shape[0]!==0){const s=r,i=t.shape[0];r=Z(r,[i,r.shape[0]/i,r.shape[1]]),s.dispose()}return r}const _Et=J({irfft_:NEt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TEt(t,e,n=0){const s={x:V(t,"x","split")},i={numOrSizeSplits:e,axis:n};return X.runKernel(vA,s,i)}const Po=J({split_:TEt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kEt(t,e){L(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(e!=null&&e<n){const m=t.shape.map(y=>0),g=t.shape.map(y=>y);g[t.shape.length-1]=e,s=In(t,m,g),n=e}else if(e!=null&&e>n){const m=t.shape.map(g=>g);m[t.shape.length-1]=e-n,s=Ai([t,ns(m)],t.shape.length-1),n=e}else s=t;const i=Zt(s),o=Z(Ly(s,i),[r,n]),a=Mxe(o),l=Math.floor(n/2)+1,c=kT(a),u=BV(a),d=Po(c,[l,n-l],c.shape.length-1),h=Po(u,[l,n-l],u.shape.length-1),p=s.shape.slice();return p[s.shape.length-1]=l,Z(Ly(d[0],h[0]),p)}const EEt=J({rfft_:kEt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Et(t,e){let n=V(t,"a","squaredDifference"),r=V(e,"b","squaredDifference");[n,r]=kr(n,r),Pt(n.shape,r.shape);const s={a:n,b:r},i={};return X.runKernel(fS,s,i)}const AEt=J({squaredDifference_:$Et});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IEt(t,e){const n=V(t,"x","squeeze","string_or_numeric");return Z(n,Df(n.shape,e).newShape)}const wS=J({squeeze_:IEt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OEt(t,e=0){const n=txe(t,"tensors","stack","string_or_numeric");L(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&L(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:e};return X.runKernel(oA,r,s)}const Fu=J({stack_:OEt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PEt(t,e=0){const r={x:V(t,"x","step")},s={alpha:e};return X.runKernel(yS,r,s)}const SS=J({step_:PEt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function REt(t,e,n,r,s=0,i=0,o=0,a=0,l=0){const u={x:V(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};return X.runKernel(NV,u,d)}const DEt=J({stridedSlice_:REt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jEt(t){const n={x:V(t,"x","tan","float32")};return X.runKernel(pS,n)}const MEt=J({tan_:jEt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qi(t,e){ave(t);const n=NA(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return _A(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bg(t,e,n){if(ave(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=NA(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return _A(t,e,r,n)}function Fxe(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(i+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(i+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(i+` update.rank != ${s+t.length-r}`);for(let o=0;o<s;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-s;++o)if(n.shape[o+s]!==t[o+r])throw new Error(i+` updates.shape[${o+s}] (${n.shape[o+s]}) != shape[${o+s}] (${t[o+s]})`)}function FEt(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}Fxe(n,e,t)}function em(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,i=n.length;let o=1;for(let d=s;d<i;++d)o*=n[d];const a=s<1?1:s,l=le(e.shape)/a,c=[...st(n.slice(0,s)),1],u=le(n);return{sliceRank:s,numUpdates:l,sliceSize:o,strides:c,outputSize:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LEt(t,e=1,n=!0){const r=V(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const i={x:r},o={k:e,sorted:n},[a,l]=X.runKernel(_V,i,o);return{values:a,indices:l}}const BEt=J({topk_:LEt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zEt(t,e=0,n=1,r,s){if(Ku(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new Exe(e,n,r,!0,s),o=zt(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const Lxe=J({truncatedNormal_:zEt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VEt(t,e=0){const n=V(t,"x","unique","string_or_numeric");L(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[i,o]=X.runKernel(kV,r,s);return{values:i,indices:o}}const WEt=J({unique_:VEt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UEt(t,e,n){const r=V(t,"x","unsortedSegmentSum"),s=V(e,"segmentIds","unsortedSegmentSum","int32");L(jy(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:s},o={numSegments:n};return X.runKernel(wA,i,o)}const Bxe=J({unsortedSegmentSum_:UEt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GEt(t,e=0){const n=V(t,"x","unstack","string_or_numeric");L(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:e};return X.runKernel(bA,r,s)}const _p=J({unstack_:GEt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HEt(t,e=!0,n,r){return X.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zxe(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=zt(t,"int32"),s=zt([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const o=r.indexToLoc(n[i]),a=i*t.length;s.values.set(o,a)}return s.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qEt(t,e,n){const r=V(t,"x","transpose");if(e==null&&(e=r.shape.map((o,a)=>a).reverse()),L(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{L(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},i={perm:e};return r.dtype==="complex64"?re(()=>{let o=kT(r),a=BV(r);return o=X.runKernel(vg,{x:o},i),a=X.runKernel(vg,{x:a},i),n&&(a=Tr(a)),Ly(o,a)}):X.runKernel(vg,s,i)}const Qt=J({transpose_:qEt});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KEt(t,e){if(e==null)return t.shape.slice();if(cn(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XEt(t,e,n,r){const s=V(t,"x","dropout");if(L(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),L(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Br?s.clone():s;const i=KEt(s,n),o=1-e,a=lt(IA(Ce(bS(i,0,1,"float32",r),o)),o);return K(s,a)}const YEt=J({dropout_:XEt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QEt(t,e,n,r,s,i="NHWC",o){let a=t;t.rank===3&&(a=Z(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Z(e,[1,e.shape[0],e.shape[1],e.shape[2]])),L(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),L(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),L(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=i==="NHWC"?a.shape[3]:a.shape[1],u=i==="NHWC"?l.shape[3]:l.shape[1];L(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),L(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),Fi("conv2dDerFilter",s,o);const d={x:a,dy:l},h={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,filterShape:n};return X.runKernel(Yz,d,h)}const s5=J({conv2DBackpropFilter_:QEt});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i5(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return K(t,SS(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function o5(t,e){let n=e;const r=Xr(t.shape,e.shape);return r.length>0&&(n=it(n,r)),Z(n,t.shape)}function a5(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Jp(t);if(e==="elu")return $A(t);if(e==="relu6")return $xe(t);if(e==="prelu")return qV(t,n);if(e==="leakyrelu")return zV(t,r);if(e==="sigmoid")return Uv(t);throw new Error(`Unknown fused activation ${e}.`)}const l5=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZEt({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",l5(X.state.gradientDepth,l)===!1){L(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let C=Sp(t,e,n,r,s,i,o);return a!=null&&(C=Ce(C,a)),a5(C,l,c,u)}const d=V(t,"x","conv2d","float32"),h=V(e,"filter","conv2d","float32");let p=d,m=!1;d.rank===3&&(m=!0,p=Z(d,[1,d.shape[0],d.shape[1],d.shape[2]])),L(p.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${p.rank}.`),L(h.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),Fi("fused conv2d",r,o);const g=s==="NHWC"?p.shape[3]:p.shape[1];L(h.shape[2]===g,()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${h.shape[2]}.`),L(Fs(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const y=ws(p.shape,h.shape,n,i,r,o);let v;a!=null&&(v=V(a,"bias","fused conv2d"),[v]=kr(v,d),s==="NHWC"?Pt(y.outShape,v.shape):(L(v.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${v.shape.length}.`),L(v.shape.length===0||v.shape[0]===y.outChannels||v.shape[0]===1,()=>`Error in fused conv2d: bias shape (${v.shape}) is not compatible with the number of output channels (${y.outChannels})`)));let x;if(c!=null){const C=c.shape;if(L(C.length<=1||C.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${C.length}.`),C.length===1)L(C[0]===1||C[0]===y.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the number of output channels (${y.outChannels}).`);else if(C.length===3)try{Pt(C,y.outShape)}catch{const T=`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error(T)}x=V(c,"prelu weights","fused conv2d")}const b=(C,_)=>{L(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[T,k,$,O]=_,P=i5(C,$,l);L(bp(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const D=DV(k.shape,P,T,n,r),A=s5(k,P,T.shape,n,r),I=[D,A];if(O!=null){const R=o5(O,P);I.push(R)}return I},S={x:p,filter:h,bias:v,preluActivationWeights:x},w={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return a==null?zy((_,T,k)=>{let $=X.runKernel(bT,S,w);return k([T,_,$]),m&&($=Z($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:b}})(p,h):zy((_,T,k,$)=>{let O=X.runKernel(bT,S,w);return $([T,_,O,k]),m&&(O=Z(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:b}})(p,h,v)}const JEt=J({fusedConv2d_:ZEt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e$t(t,e,n,r,s,i=[1,1],o){let a=t;t.rank===3&&(a=Z(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Z(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:a,dy:l},u={strides:r,pad:s,dimRoundingMode:o,dilations:i,filterShape:n};return X.runKernel(rV,c,u)}const t$t=J({depthwiseConv2dNativeBackpropFilter_:e$t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n$t(t,e,n,r,s,i=[1,1],o){let a=e,l=!1;e.rank===3&&(l=!0,a=Z(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:a,filter:n},u={strides:r,pad:s,dimRoundingMode:o,dilations:i,inputShape:t},d=X.runKernel(sV,c,u);return l?Z(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const r$t=J({depthwiseConv2dNativeBackpropInput_:n$t});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s$t({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(l5(X.state.gradientDepth,i)===!1){let O=on(t,e,n,r);return s!=null&&(O=Ce(O,s)),a5(O,i,o,a)}let l=V(t,"a","fused matMul"),c=V(e,"b","fused matMul");[l,c]=kr(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],h=n?l.shape[l.rank-1]:l.shape[l.rank-2],p=r?c.shape[c.rank-2]:c.shape[c.rank-1],m=l.shape.slice(0,-2),g=c.shape.slice(0,-2),y=le(m),v=le(g);L(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const b=Pt(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([h,p]),S=n?Z(l,[y,u,h]):Z(l,[y,h,u]),w=r?Z(c,[v,p,d]):Z(c,[v,d,p]);let C;s!=null&&(C=V(s,"bias","fused matMul"),[C]=kr(C,l),Pt(b,C.shape));let _;o!=null&&(_=V(o,"prelu weights","fused matMul"));const T=(O,P)=>{const[D,A,I,R]=P,M=i5(Z(O,I.shape),I,i);let E,j;if(!n&&!r?(E=on(M,A,!1,!0),j=on(D,M,!0,!1)):!n&&r?(E=on(M,A,!1,!1),j=on(M,D,!0,!1)):n&&!r?(E=on(A,M,!1,!0),j=on(D,M,!1,!1)):(E=on(A,M,!0,!0),j=on(M,D,!0,!0)),s!=null){const B=o5(R,M);return[E,j,B]}else return[E,j]},k={a:S,b:w,bias:C,preluActivationWeights:_},$={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:a};return s==null?zy((P,D,A)=>{const I=X.runKernel(xT,k,$);return A([P,D,I]),{value:Z(I,b),gradFunc:T}})(S,w):zy((P,D,A,I)=>{const R=X.runKernel(xT,k,$);return I([P,D,R,A]),{value:Z(R,b),gradFunc:T}})(S,w,C)}const eX=J({fusedMatMul_:s$t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i$t(t,e,n,r,s="bilinear",i=0){const o=V(t,"image","cropAndResize"),a=V(e,"boxes","cropAndResize","float32"),l=V(n,"boxInd","cropAndResize","int32"),c=a.shape[0];L(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),L(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),L(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),L(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),L(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),L(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const u={image:o,boxes:a,boxInd:l},d={method:s,extrapolationValue:i,cropSize:r};return X.runKernel(eV,u,d)}const o$t=J({cropAndResize_:i$t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a$t(t){const e=V(t,"image","flipLeftRight","float32");L(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return X.runKernel(cV,n,{})}const l$t=J({flipLeftRight_:a$t});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c$t(t){const e=V(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];L(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),L(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,al(e,s)}const u$t=J({grayscaleToRGB_:c$t});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d$t(t){const e=V(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];L(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),L(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,i=Be(e,"float32"),o=Qi([.2989,.587,.114]);let a;switch(e.rank){case 2:a=Rx("ij,j->i",i,o);break;case 3:a=Rx("ijk,k->ij",i,o);break;case 4:a=Rx("ijkl,l->ijk",i,o);break;case 5:a=Rx("ijklm,m->ijkl",i,o);break;case 6:a=Rx("ijklmn,n->ijklm",i,o);break;default:throw new Error("Not a valid tensor rank.")}return a=wi(a,-1),Be(a,s)}const f$t=J({rgbToGrayscale_:d$t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h$t(t,e,n=0,r=.5){const s=V(t,"image","rotateWithOffset","float32");L(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const i={image:s},o={radians:e,fillValue:n,center:r};return X.runKernel(EV,i,o)}const p$t=J({rotateWithOffset_:h$t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hv(t,e,n,r,s,i){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);const o=t.shape[0];return n=Math.min(n,o),L(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),L(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),L(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),L(e.rank===1,()=>"scores must be a 1D tensor"),L(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),L(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m$t(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=V(t,"boxes","nonMaxSuppression","float32"),o=V(e,"scores","nonMaxSuppression","float32"),a=Hv(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return X.runKernel(mV,{boxes:i,scores:o},l)}const g$t=J({nonMaxSuppression_:m$t});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y$t(t,e,n){const r=v$t(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function v$t(t,e,n){return b$t(t,e,n||x$t)}function x$t(t,e){return t>e?1:t<e?-1:0}function b$t(t,e,n){let r=0,s=t.length,i=0,o=!1;for(;r<s;){i=r+(s-r>>>1);const a=n(e,t[i]);a>0?r=i+1:(s=i,o=!a)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c5(t,e,n,r,s){return f5(t,e,n,r,s,0)}function u5(t,e,n,r,s,i){return f5(t,e,n,r,s,0,!1,i,!0)}function d5(t,e,n,r,s,i){return f5(t,e,n,r,s,i,!0)}function f5(t,e,n,r,s,i,o=!1,a=!1,l=!1){const c=[];for(let y=0;y<e.length;y++)e[y]>s&&c.push({score:e[y],boxIndex:y,suppressBeginIndex:0});c.sort(tX);const u=i>0?-.5/i:0,d=[],h=[];for(;d.length<n&&c.length>0;){const y=c.pop(),{score:v,boxIndex:x,suppressBeginIndex:b}=y;if(v<s)break;let S=!1;for(let w=d.length-1;w>=b;--w){const C=w$t(t,x,d[w]);if(C>=r){S=!0;break}if(y.score=y.score*S$t(r,u,C),y.score<=s)break}y.suppressBeginIndex=d.length,S||(y.score===v?(d.push(x),h.push(y.score)):y.score>s&&y$t(c,y,tX))}const p=d.length,m=n-p;a&&m>0&&(d.push(...new Array(m).fill(0)),h.push(...new Array(m).fill(0)));const g={selectedIndices:d};return o&&(g.selectedScores=h),l&&(g.validOutputs=p),g}function w$t(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),d=Math.max(s[0],s[2]),h=Math.max(s[1],s[3]),p=(a-i)*(l-o),m=(d-c)*(h-u);if(p<=0||m<=0)return 0;const g=Math.max(i,c),y=Math.max(o,u),v=Math.min(a,d),x=Math.min(l,h),b=Math.max(v-g,0)*Math.max(x-y,0);return b/(p+m-b)}function S$t(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function tX(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function C$t(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=V(t,"boxes","nonMaxSuppressionAsync"),o=V(e,"scores","nonMaxSuppressionAsync"),a=Hv(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l=await Promise.all([i.data(),o.data()]),c=l[0],u=l[1],{selectedIndices:d}=c5(c,u,n,r,s);return i!==t&&i.dispose(),o!==e&&o.dispose(),Qi(d,"int32")}const N$t=C$t;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _$t(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=V(t,"boxes","nonMaxSuppression"),a=V(e,"scores","nonMaxSuppression"),l=Hv(o,a,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const c={boxes:o,scores:a},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i},d=X.runKernel(yV,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}const T$t=J({nonMaxSuppressionWithScore_:_$t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function k$t(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=V(t,"boxes","nonMaxSuppressionAsync"),a=V(e,"scores","nonMaxSuppressionAsync"),l=Hv(o,a,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const c=await Promise.all([o.data(),a.data()]),u=c[0],d=c[1],{selectedIndices:h,selectedScores:p}=d5(u,d,n,r,s,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:Qi(h,"int32"),selectedScores:Qi(p)}}const E$t=k$t;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $$t(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=V(t,"boxes","nonMaxSuppression"),a=V(e,"scores","nonMaxSuppression"),l=Hv(o,a,n,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,h={boxes:o,scores:a},p={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:i},m=X.runKernel(gV,h,p);return{selectedIndices:m[0],validOutputs:m[1]}}const A$t=J({nonMaxSuppressionPadded_:$$t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function I$t(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=V(t,"boxes","nonMaxSuppressionAsync"),a=V(e,"scores","nonMaxSuppressionAsync"),l=Hv(o,a,n,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[h,p]=await Promise.all([o.data(),a.data()]),{selectedIndices:m,validOutputs:g}=u5(h,p,c,u,d,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:Qi(m,"int32"),validOutputs:an(g,"int32")}}const O$t=I$t;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P$t(t,e,n=!1,r=!1){const s=V(t,"images","resizeBilinear");L(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),L(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),L(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=Z(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=X.runKernel(fA,a,l);return o?Z(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Vxe=J({resizeBilinear_:P$t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R$t(t,e,n=!1,r=!1){const s=V(t,"images","resizeNearestNeighbor");L(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),L(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),L(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),L(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=Z(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=X.runKernel(dA,a,l);return o?Z(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Wxe=J({resizeNearestNeighbor_:R$t});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D$t(t,e="binary",n=!1,r=.5){const s=V(t,"image","threshold"),i=.2989,o=.587,a=.114,l=s.shape[0]*s.shape[1];let c=K(Qi([r]),255),u,d,h,p;if(L(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),L(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),L(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),L(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[u,d,h]=Po(s,[1,1,1],-1);const y=K(u,i),v=K(d,o),x=K(h,a);p=Ce(Ce(y,v),x)}else p=t;if(e==="otsu"){const y=R_t(Be(Axe(p),"int32"),nxe([]),256);c=j$t(y,l)}const m=n?Gv(p,c):Vo(p,c);return Be(K(m,255),"int32")}function j$t(t,e){let n=Qi([-1]),r=Qi([0]),s=Qi([0]),i,o,a,l,c,u;for(let d=0;d<t.size-1;d++){i=In(t,0,d+1),o=In(t,d+1),c=lt(it(i),e),u=lt(it(o),e);const h=it(K(i,h1(0,i.size)));a=lt(h,it(i));const p=EA(o.shape,i.size),m=Ce(h1(0,o.size),p),g=K(o,m);l=lt(it(g),it(o));const y=gt(a,l),v=gt(a,l),x=K(c,u);s=K(K(x,y),v);const b=Vo(s,r);r=ai(b,s,r),n=ai(b,Qi([d]),n)}return n}const M$t=J({threshold_:D$t});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F$t(t,e,n="nearest",r="constant",s=0,i){const o=V(t,"image","transform","float32"),a=V(e,"transforms","transform","float32");L(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),L(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),L(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:o,transforms:a},c={interpolation:n,fillMode:r,fillValue:s,outputShape:i};return X.runKernel(TV,l,c)}const L$t=J({transform_:F$t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B$t(t,e,n){const r=V(t,"a","bandPart");L(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[i,o]=r.shape.slice(-2);let a,l;typeof e=="number"?(L(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),L(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),a=V(e<0?i:e,"numLower","bandPart")):(L(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=ai(_T(e,0),i,f1(e,i))),typeof n=="number"?(L(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),L(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),l=V(n<0?o:n,"numUpper","bandPart")):(L(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=ai(_T(n,0),o,f1(n,o)));const c=Z(h1(0,i,1,"int32"),[-1,1]),u=h1(0,o,1,"int32"),d=gt(c,u),h=Mu(Gv(d,a),Qp(d,Tr(l))),p=ns([i,o],r.dtype);return Z(Fu(_p(Z(r,[-1,i,o])).map(m=>ai(h,m,p))),s)}const z$t=J({bandPart_:B$t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V$t(t){let e;if(Array.isArray(t)){e=!1,L(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let i=1;i<t.length;++i)L(t[i].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${s})`)}else e=!0,t=Po(t,t.shape[0],0).map(s=>wS(s,[0]));L(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(X.tidy(()=>{let i=r[s];if(s>0)for(let o=0;o<s;++o){const a=K(it(K(n[o],i)),n[o]);i=gt(i,a)}return lt(i,AA(i,"euclidean"))}));return e?Fu(n,0):n}const W$t=J({gramSchmidt_:V$t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U$t(t,e=!1){if(L(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return nX(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=_p(Z(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],i=[];r.forEach(l=>{const[c,u]=nX(l,e);s.push(c),i.push(u)});const o=Z(Fu(s,0),t.shape),a=Z(Fu(i,0),t.shape);return[o,a]}}function nX(t,e=!1){return X.tidy(()=>{L(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=wxe(n),i=Kh(t);const o=bg([[1]],[1,1]);let a=Kh(o);const l=n>=r?r:n;for(let c=0;c<l;++c){const u=i,d=a,h=s;[a,i,s]=X.tidy(()=>{const p=In(i,[c,c],[n-c,1]),m=AA(p),g=In(i,[c,c],[1,1]),y=ai(Vo(g,0),bg([[-1]]),bg([[1]])),v=gt(g,K(y,m)),x=lt(p,v);x.shape[0]===1?a=Kh(o):a=Ai([o,In(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);const b=Tr(lt(on(y,v),m)),S=In(i,[c,0],[n-c,r]),w=K(b,a),C=Qt(a);if(c===0)i=gt(S,on(w,on(C,S)));else{const k=gt(S,on(w,on(C,S)));i=Ai([In(i,[0,0],[c,r]),k],0)}const _=Qt(w),T=In(s,[0,c],[n,s.shape[1]-c]);if(c===0)s=gt(T,on(on(T,a),_));else{const k=gt(T,on(on(T,a),_));s=Ai([In(s,[0,0],[n,c]),k],1)}return[a,i,s]}),Ut([u,d,h])}return!e&&n>r&&(s=In(s,[0,0],[n,r]),i=In(i,[0,0],[r,r])),[s,i]})}const G$t=J({qr_:U$t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uu={flipLeftRight:l$t,grayscaleToRGB:u$t,resizeNearestNeighbor:Wxe,resizeBilinear:Vxe,rgbToGrayscale:f$t,rotateWithOffset:p$t,cropAndResize:o$t,nonMaxSuppression:g$t,nonMaxSuppressionAsync:N$t,nonMaxSuppressionWithScore:T$t,nonMaxSuppressionWithScoreAsync:E$t,nonMaxSuppressionPadded:A$t,nonMaxSuppressionPaddedAsync:O$t,threshold:M$t,transform:L$t},H$t={bandPart:z$t,gramSchmidt:W$t,qr:G$t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q$t=new Map,K$t=new Map;class qv{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class ua{constructor(){this.classNameMap={}}static getMap(){return ua.instance==null&&(ua.instance=new ua),ua.instance}static register(e){ua.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function xe(t,e,n){L(t.className!=null,()=>"Class being registered does not have the static className property defined."),L(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),L(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,s=e+">"+r;return ua.register(t),q$t.set(s,t),K$t.set(t,s),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zf extends qv{minimize(e,n=!1,r){const{value:s,grads:i}=this.computeGradients(e,r);if(r!=null){const o=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(o)}else this.applyGradients(i);return Ut(i),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return tkt(e,n)}dispose(){this.iterations_!=null&&Ut(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:an(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(zf,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uxe extends zf{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=X.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=X.registeredVariables[r],o=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:re(()=>Zt(i).variable(o))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:re(()=>Zt(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[s].variable,c=this.accumulatedUpdates[s].variable;re(()=>{const u=Ce(K(l,this.rho),K(Bn(a),1-this.rho)),d=K(lt(Ms(Ce(c,this.epsilon)),Ms(Ce(l,this.epsilon))),a),h=Ce(K(c,this.rho),K(Bn(d),1-this.rho));l.assign(u),c.assign(h);const p=Ce(K(d,-this.learningRate),i);i.assign(p)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Ut(this.accumulatedGrads.map(e=>e.variable)),Ut(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gxe extends zf{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=X.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:re(()=>EA(i.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const a=this.accumulatedGrads[s].variable;re(()=>{const l=Ce(a,Bn(o));a.assign(l);const c=Ce(K(lt(o,Ms(Ce(l,X.backend.epsilon()))),-this.learningRate),i);i.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Ut(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hxe extends zf{static get className(){return"Adam"}constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],re(()=>{this.accBeta1=an(n).variable(),this.accBeta2=an(r).variable()}),s==null&&(this.epsilon=X.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);re(()=>{const r=gt(1,this.accBeta1),s=gt(1,this.accBeta2);n.forEach((i,o)=>{const a=X.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:re(()=>Zt(a).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${i}/v`,variable:re(()=>Zt(a).variable(l))});const c=Array.isArray(e)?e[o].tensor:e[i];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,h=Ce(K(u,this.beta1),K(c,1-this.beta1)),p=Ce(K(d,this.beta2),K(Bn(c),1-this.beta2)),m=lt(h,r),g=lt(p,s);u.assign(h),d.assign(p);const y=Ce(K(lt(m,Ce(Ms(g),this.epsilon)),-this.learningRate),a);a.assign(y)}),this.accBeta1.assign(K(this.accBeta1,this.beta1)),this.accBeta2.assign(K(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Ut(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Ut(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),re(()=>{this.accBeta1.assign(Cp(this.beta1,this.iterations_+1)),this.accBeta2.assign(Cp(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qxe extends zf{static get className(){return"Adamax"}constructor(e,n,r,s=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],re(()=>{this.iteration=an(0).variable(),this.accBeta1=an(n).variable()}),s==null&&(this.epsilon=X.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);re(()=>{const r=gt(1,this.accBeta1),s=lt(-this.learningRate,Ce(K(this.iteration,this.decay),1));n.forEach((i,o)=>{const a=X.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:Zt(a).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${i}/v`,variable:Zt(a).variable(l)});const c=Array.isArray(e)?e[o].tensor:e[i];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,h=Ce(K(u,this.beta1),K(c,1-this.beta1)),p=K(d,this.beta2),m=Ys(c),g=Lf(p,m);u.assign(h),d.assign(g);const y=Ce(K(lt(s,r),lt(h,Ce(g,this.epsilon))),a);a.assign(y)}),this.iteration.assign(Ce(this.iteration,1)),this.accBeta1.assign(K(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Ut(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Ut(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h5 extends zf{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const o=X.registeredVariables[r];re(()=>{const a=Ce(K(this.c,i),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=gc(an(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kxe extends h5{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=an(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=X.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:re(()=>Zt(i).variable(!1))});const o=this.accumulations[s].variable,a=Array.isArray(e)?e[s].tensor:e[r];a!=null&&re(()=>{let l;const c=Ce(K(this.m,o),a);this.useNesterov?l=Ce(K(this.c,Ce(a,K(c,this.m))),i):l=Ce(K(this.c,c),i),o.assign(c),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Ut(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xxe extends zf{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,s=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,s==null&&(this.epsilon=X.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=X.registeredVariables[r],o=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:re(()=>Zt(i).variable(o))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:re(()=>Zt(i).variable(o))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:re(()=>Zt(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[s].variable,c=this.accumulatedMoments[s].variable;re(()=>{const u=Ce(K(l,this.decay),K(Bn(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[s].variable,h=Ce(K(d,this.decay),K(a,1-this.decay)),p=lt(K(a,this.learningRate),Ms(gt(u,Ce(Bn(h),this.epsilon)))),m=Ce(K(c,this.momentum),p);l.assign(u),d.assign(h),c.assign(m);const g=gt(i,m);i.assign(g)}else{const d=Ce(K(l,this.decay),K(Bn(a),1-this.decay)),h=Ce(K(c,this.momentum),lt(K(a,this.learningRate),Ms(Ce(d,this.epsilon))));l.assign(d),c.assign(h);const p=gt(i,h);i.assign(p)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Ut(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Ut(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Ut(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X$t=[Uxe,Gxe,Hxe,qxe,Kxe,Xxe,h5];function Y$t(){for(const t of X$t)xe(t)}function p5(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(le(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,i=s[s.length-1];let o=1;for(let d=0;d<s.length-1;++d)o*=s[d];const a=t.shape,l=s.slice();l.pop();let c=1;for(let d=i;d<n;++d)c*=a[d],l.push(a[d]);const u=[...st(t.shape).map(d=>d/c),1].slice(0,i);return[l,o,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lF=-2,Q$t=-1;function m5(t,e,n){const r=t.shape.length;L(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),L(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)L(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function Z$t(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function g5(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function Yxe(t,e,n,r){const s=[...t];for(let i=s.length;i<r.length;i++)s.push(1);for(let i=0;i<n;i++)i===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function Qxe(t,e,n){return n<=t?n:n-(e-1)}function Zxe(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function J$t(t,e,n,r,s,i,o,a,l){const c=t.length;let u=new Array(c),d=new Array(c),h=new Array(c);if(e.length&&n>0){const p=e[0],m=n+1;u=Jxe(o,p,m,r,t),d=e0e(a,p,m,s,t),h=Yxe(i,p,m,t)}else for(let p=0;p<c;p++)u[p]=n0e(o,r,i,t,p,l),d[p]=r0e(a,s,i,t,p,l),h[p]=t0e(i,p,l);return{begin:u,end:d,strides:h}}function Jxe(t,e,n,r,s){const i=[...s],o=Zxe(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=0;else{const l=Qxe(e,n,a);let c=r[l];t&1<<l&&(c=0),i[a]=c}return i}function e0e(t,e,n,r,s){const i=[...s],o=Zxe(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{const l=Qxe(e,n,a);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),i[a]=c}for(let a=0;a<i.length;a++){const l=s[a];i[a]<0&&(i[a]+=l),i[a]=gp(0,i[a],s[a])}return i}function t0e(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function n0e(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),o=gp(0,o,l-1),o}function r0e(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),a>0?o=gp(0,o,l):o=gp(-1,o,l-1),o}function y5(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function v5(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function OA(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(o=>{L(o!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(s).fill(-1):typeof n=="number"?i=[n,...new Array(s-1).fill(-1)]:n.length<s?i=n.concat(new Array(s-n.length).fill(-1)):i=n,i=i.map((o,a)=>o>=0?o:(L(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,i]}function x5(t,e,n,r,s,i,o,a,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let b=0;b<d.dims;b++)u&&1<<b&a&&d.numAddAxisAfterEllipsis++,1<<b&o&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};eAt(d,h);let p=!0,m=!0,g=!0;const y=[],v=[];for(let b=0;b<t.length;++b){if(h.strides[b]===0)throw Error(`strides[${b}] must be non-zero`);const S=!!(h.shrinkAxisMask&1<<b),w=t[b];if(w===-1){y.push(S?1:-1);continue}const C=[h.beginMask&1<<b,h.endMask&1<<b],_=[h.strides[b]>0?0:-1,h.strides[b]>0?w:w-1];if(S&&h.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&h.strides[b]===1;const T=!!(h.beginMask&1<<b&&h.endMask&1<<b);if(h.beginValid&&h.endValid){if(S){const P=h.begin[b]<0?w+h.begin[b]:h.begin[b];if(h.begin[b]=P,h.end[b]=h.begin[b]+1,P<0||P>=w)throw Error(`slice index ${h.begin[b]} of dimension ${b} out of bounds.`)}else h.begin[b]=rX(h.begin[b],0,h.strides[b],w,C,_),h.end[b]=rX(h.end[b],1,h.strides[b],w,C,_);const O=h.strides[b]===1&&h.begin[b]===0&&h.end[b]===w;p=p&&O,m=m&&(b===0&&h.strides[b]===1||O)}else p=p&&h.strides[b]===1&&T,m=m&&(b===0&&h.strides[b]===1||T);let k,$=!1;if(h.beginValid&&h.endValid?(k=h.end[b]-h.begin[b],$=!0):S?(k=1,$=!0):T&&w>=0&&(h.strides[b]<0?k=-w:k=w,$=!0),$){let O;k===0||k<0!=h.strides[b]<0?O=0:O=Math.trunc(k/h.strides[b])+(k%h.strides[b]!==0?1:0),y.push(O)}else y.push(-1)}for(let b=0;b<h.finalShapeGatherIndices.length;++b){const S=h.finalShapeGatherIndices[b];S>=0?v.push(y[S]):S===lF&&v.push(1)}return{finalShapeSparse:v.filter((b,S)=>h.finalShapeGatherIndices[S]!==lF),finalShape:v,isIdentity:p,sliceDim0:m,isSimpleSlice:g,begin:h.begin,end:h.end,strides:h.strides}}function eAt(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(lF),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(Q$t),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function rX(t,e,n,r,s,i){if(s[e])return n>0?i[e]:i[e+1&1];{const o=t<0?r+t:t;return o<i[0]?i[0]:o>i[1]?i[1]:o}}const tAt=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:m5,computeFlatOffset:v5,computeOutShape:g5,getNormalizedAxes:J$t,isSliceContinous:y5,maskToAxes:Z$t,parseSliceParams:OA,sliceInfo:x5,startForAxis:n0e,startIndicesWithElidedDims:Jxe,stopForAxis:r0e,stopIndicesWithElidedDims:e0e,stridesForAxis:t0e,stridesWithElidedDims:Yxe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nAt{static sgd(e){return new h5(e)}static momentum(e,n,r=!1){return new Kxe(e,n,r)}static rmsprop(e,n=.9,r=0,s=null,i=!1){return new Xxe(e,n,r,s,i)}static adam(e=.001,n=.9,r=.999,s=null){return new Hxe(e,n,r,s)}static adadelta(e=.001,n=.95,r=null){return new Uxe(e,n,r)}static adamax(e=.002,n=.9,r=.999,s=null,i=0){return new qxe(e,n,r,s,i)}static adagrad(e,n=.1){return new Gxe(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bm=nAt;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rAt=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function s0e(){return new Promise(t=>rAt(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b5(t,e){const n=t[0].length;t.forEach((s,i)=>{L(s.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),L(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,i)=>{for(let o=0;o<n;o++)L(o===e||s[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function yc(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var nl;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(nl||(nl={}));function i0e(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const i=n[s],o=r[r.length-n.length+s],a=r[o];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${i} but shape[${s+t}] = ${a}`)}else r[o]=i}return r}function o0e(t){const e={FIRST_DIM_SIZE:nl.FIRST_DIM_SIZE,VALUE_ROWIDS:nl.VALUE_ROWIDS,ROW_LENGTHS:nl.ROW_LENGTHS,ROW_SPLITS:nl.ROW_SPLITS,ROW_LIMITS:nl.ROW_LIMITS,ROW_STARTS:nl.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function a0e(t){return t.length===0?0:t[0]===nl.FIRST_DIM_SIZE?t.length-1:t.length}function l0e(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const i=t[s],o=e[s+1];if(i>=0&&o>=0&&i!==1&&i!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${i} but ragged tensor input.flatValues.shape[${s-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w5=30;function PA(t){return t<=w5?t:GM(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S5(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CS(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const i=e.length;for(let o=0;o<i;++o)s=s.concat([t[o+1]/e[o],e[o]]);s=s.concat(t.slice(i+1))}return s}function NS(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],i=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?i.push(o):s.push(o);r.push(...s),r.push(0),r.push(...i)}return r}function _S(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?s.push(e[i-1]*t[i]):s.push(t[i]/e[i-1]):s.push(t[i]);return s}function C5(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function N5(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RA=1.7580993408473768,DA=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _5=.3275911,T5=.254829592,k5=-.284496736,E5=1.421413741,$5=-1.453152027,A5=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lu(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function c0e(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function u0e(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function d0e(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function I5(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function f0e(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function h0e(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const i=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(i),r[s]=Math.sin(i)}return{real:n,imag:r}}function p0e(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),i=Math.sin(r);return{real:s,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wP="->",sAt=/->/g,sX=",",iX="...";function O5(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(sAt,"").length)/wP.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${wP}").`);const[r,s]=t.split(wP);L(r.indexOf(iX)===-1,()=>`The ellipsis notation ("${iX}") is not supported yet.`);const i=r.split(sX),o=i.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let h=0;h<s.length;++h){const p=s[h];if(!i.some(m=>m.indexOf(p)!==-1))throw new Error(`Output subscripts contain the label ${p} not present in the input subscripts.`);a.indexOf(p)===-1&&a.push(p)}for(let h=0;h<r.length;++h){const p=r[h];a.indexOf(p)===-1&&p!==sX&&a.push(p)}const l=new Array(i.length);for(let h=0;h<o;++h){if(new Set(i[h].split("")).size!==i[h].length)throw new Error(`Found duplicate axes in input component ${i[h]}. Support for duplicate axes in input is not implemented yet.`);l[h]=[];for(let p=0;p<i[h].length;++p)l[h].push(a.indexOf(i[h][p]))}const c=a.length,u=s.length,d=[];for(let h=u;h<c;++h)d.push(h);return{allDims:a,summedDims:d,idDims:l}}function P5(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function R5(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const i=n[s].shape;for(let o=0;o<e[s].length;++o)r[e[s][o]]===void 0?r[e[s][o]]=i[o]:L(r[e[s][o]]===i[o],()=>`Expected dimension ${r[e[s][o]]} at axis ${o} of input shaped ${JSON.stringify(i)}, but got dimension ${i[o]}`)}}function D5(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let o=0;o<s;++o)r.push([]);const i=[];for(let o=0;o<n.length;++o){const a=n[o],l=iAt(e,a);for(const c of l)i.indexOf(c)===-1&&(r[o].push(c),i.push(c))}return{path:n,steps:r}}function j5(t){return t.every((e,n)=>e===n)}function iAt(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function M5(t,e,n=0){let r=[];if(typeof e=="number")L(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((o,a)=>(a===-1&&(o+=1),o),0);L(s<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const o=e.reduce((a,l)=>l>0?a+l:a);e[i]=t.shape[n]-o}L(t.shape[n]===e.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m0e(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function g0e(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function y0e(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v0e(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function x0e(t,e){return`size ${t} must be non-negative, not ${e}`}function b0e(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function w0e(t,e){const n=le(t),r=le(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function S0e(t,e){const n=le(t),r=le(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cF(){return"segment ids must be >= 0"}function C0e(){return"segment ids are not increasing"}function N0e(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function _0e(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T0e(t,e){let n=!1,r;for(t<=w5?(r=t,n=!0):r=GM(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=GM(t,r+1);return r}function k0e(t,e,n){const r=[],s=t.length;for(let i=0;i<s;i++)i!==e?r.push(t[i]):r.push(n);return r}function F5(t,e,n,r){const s=e.shape.length,i=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const o=t.shape[n],a=[];let l=1,c=1,u=1;for(let d=0;d<r;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)a.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<s;d++)a.push(e.shape[d]);for(let d=n+1;d<i;d++)a.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:o,outputShape:a}}const oAt=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:F5,computeOutShape:k0e,segOpComputeOptimalWindowSize:T0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bu(t){try{return t.map(e=>hf(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function E0e(t){return t.map(e=>Kd(e))}const aAt=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:T5,ERF_A2:k5,ERF_A3:E5,ERF_A4:$5,ERF_A5:A5,ERF_P:_5,PARALLELIZE_THRESHOLD:w5,get RowPartitionType(){return nl},SELU_SCALE:DA,SELU_SCALEALPHA:RA,applyActivation:a5,assertAndGetBroadcastShape:Pt,assertAxesAreInnerMostDims:Ss,assertParamsConsistent:b5,assignToTypedArray:f0e,axesAreInnerMostDims:FV,calculateShapes:em,checkEinsumDimSizes:R5,checkPadOnDimRoundingMode:Fi,combineLocations:xxe,combineRaggedTensorToTensorShapes:i0e,complexWithEvenIndex:u0e,complexWithOddIndex:d0e,computeConv2DInfo:ws,computeConv3DInfo:Mf,computeDefaultPad:OV,computeDilation2DInfo:vS,computeOptimalWindowSize:PA,computeOutAndReduceShapes:ds,computeOutShape:yc,computePool2DInfo:Ma,computePool3DInfo:Xu,convertConv2DDataFormat:Yu,decodeEinsumEquation:O5,eitherStridesOrDilationsAreOne:Fs,expandShapeToKeepDim:Mr,exponent:p0e,exponents:h0e,fromStringArrayToUint8:E0e,fromUint8ToStringArray:Bu,getAxesPermutation:lr,getBroadcastDims:By,getComplexWithIndex:I5,getEinsumComputePath:D5,getEinsumPermutation:P5,getFusedBiasGradient:o5,getFusedDyActivation:i5,getImageCenter:S5,getInnerMostAxes:Er,getPermuted:NS,getRaggedRank:a0e,getReductionAxes:Xr,getReshaped:CS,getReshapedPermuted:_S,getRowPartitionTypesHelper:o0e,getSliceBeginCoords:C5,getSliceSize:N5,getSparseFillEmptyRowsIndicesDenseShapeMismatch:m0e,getSparseFillEmptyRowsNegativeIndexErrorMessage:g0e,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:y0e,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:b0e,getSparseReshapeInputOutputMismatchErrorMessage:S0e,getSparseReshapeInputOutputMultipleErrorMessage:w0e,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:v0e,getSparseReshapeNegativeOutputDimErrorMessage:x0e,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:_0e,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:cF,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:C0e,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:N0e,getUndoAxesPermutation:Ff,isIdentityPermutation:j5,log:U2t,mergeRealAndImagArrays:Lu,prepareAndValidate:p5,prepareSplitSize:M5,segment_util:oAt,shouldFuse:l5,slice_util:tAt,splitRealAndImagArrays:c0e,stridesOrDilationsArePositive:wp,tupleValuesAreOne:bp,upcastType:oo,validateDefaultValueShape:l0e,validateInput:FEt,validateUpdateShape:Fxe,warn:Co},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y$t();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $0e={kernelName:C$,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(t,SS(Be(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lAt={kernelName:Cw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Bn(Be(n,"float32")),s=Ms(gt(an(1),r));return Tr(lt(t,s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cAt={kernelName:Nw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Ms(gt(Bn(Be(n,"float32")),1));return lt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uAt={kernelName:Vv,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Pt(n.shape,r.shape);return{a:()=>{let a=t;const l=Xr(n.shape,s);return l.length>0&&(a=it(a,l)),Z(a,n.shape)},b:()=>{let a=t;const l=Xr(r.shape,s);return l.length>0&&(a=it(a,l)),Z(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dAt={kernelName:Vz,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,s)=>{n[s]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fAt={kernelName:N$,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Zt(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hAt={kernelName:_$,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Zt(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pAt={kernelName:_w,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>lt(t,Ms(gt(an(1),Bn(Be(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mAt={kernelName:Tw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Ms(Ce(an(1),Bn(Be(n,"float32"))));return lt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gAt={kernelName:$w,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Pt(n.shape,r.shape);return{a:()=>{const a=Ce(Bn(n),Bn(r));let l=K(t,lt(r,a));const c=Xr(n.shape,s);return c.length>0&&(l=it(l,c)),Z(l,n.shape)},b:()=>{const a=Ce(Bn(n),Bn(r));let l=Tr(K(t,lt(n,a)));const c=Xr(r.shape,s);return c.length>0&&(l=it(l,c)),Z(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yAt={kernelName:kw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>lt(t,Ce(Bn(Be(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vAt={kernelName:Ew,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>lt(t,gt(an(1),Bn(Be(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xAt(t,e,n,r,s,i){const o=V(t,"dy","avgPool3dGrad"),a=V(e,"input","avgPool3dGrad");let l=o,c=a,u=!1;a.rank===4&&(u=!0,l=Z(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=Z(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),L(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),L(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Fi("avgPool3dGrad",s,i);const d={dy:l,input:c},h={filterSize:n,strides:r,pad:s,dimRoundingMode:i},p=X.runKernel(Hz,d,h);return u?Z(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const bAt=J({avgPool3dGrad_:xAt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wAt={kernelName:k$,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:o,dimRoundingMode:a}=n;return{x:()=>bAt(t,r,s,i,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SAt(t,e,n,r,s){const i=V(t,"dy","avgPoolGrad"),o=V(e,"input","avgPoolGrad");L(o.rank===i.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${i.rank})`);let a=o,l=i,c=!1;o.rank===3&&(c=!0,a=Z(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=Z(i,[1,i.shape[0],i.shape[1],i.shape[2]])),L(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),L(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const u={dy:l,input:a},d={filterSize:n,strides:r,pad:s},h=X.runKernel(Gz,u,d);return c?Z(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const CAt=J({avgPoolGrad_:SAt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NAt={kernelName:T$,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:o}=n;return{x:()=>CAt(t,r,s,i,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _At={kernelName:E$,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,s]=e,{transposeA:i,transposeB:o}=n;return!i&&!o?{a:()=>on(t,s,!1,!0),b:()=>on(r,t,!0,!1)}:!i&&o?{a:()=>on(t,s,!1,!1),b:()=>on(t,r,!0,!1)}:i&&!o?{a:()=>on(s,t,!1,!0),b:()=>on(r,t,!1,!1)}:{a:()=>on(s,t,!0,!0),b:()=>on(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TAt={kernelName:$$,gradFunc:(t,e,n)=>{const{blockShape:r,crops:s}=n;return{x:()=>HV(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kAt={kernelName:B2t,gradFunc:(t,e,n)=>{const r=n,s=r.inputShape,i=r.shape,o=Array.from(i);for(let l=s.length-1;l>=0;l--)if(s[l]===i[l])o[l]=1;else if(s[l]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${i}].`);const a=[];for(let l=0;l<o.length;l++)o[l]>1&&a.push(l);return{x:()=>it(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EAt={kernelName:Aw,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $At={kernelName:Iw,gradFunc:t=>({x:()=>Zt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AAt={kernelName:Ow,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:s,clipValueMax:i}=n;return{x:()=>ai(Mu(Qp(r,s),Gv(r,i)),t,Zt(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IAt={kernelName:A$,inputsToSave:["x"],gradFunc:$0e.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OAt={kernelName:I$,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:s}=n,i=Vt(s,e[0].shape)[0],o=r.map(l=>l[i]);return Po(t,o,i).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PAt={kernelName:O$,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{dilations:i,strides:o,pad:a,dataFormat:l}=n;return L(bp(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>DV(r.shape,t,s,o,a,l),filter:()=>s5(r,t,s.shape,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RAt={kernelName:P$,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{strides:i,pad:o,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>Sp(t,s,i,o,a,1,l),filter:()=>s5(t,r,s.shape,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DAt(t,e,n,r,s){let i=t;t.rank===4&&(i=Z(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;o.rank===4&&(o=Z(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),L(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),L(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),L(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),L(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),L(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:i,dy:o},l={strides:r,pad:s,filterShape:n};return X.runKernel(Qz,a,l)}const jAt=J({conv3DBackpropFilter_:DAt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MAt={kernelName:R$,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i}=n;L(bp(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,a]=e;return{x:()=>mxe(o.shape,t,a,s,i),filter:()=>jAt(o,t,a.shape,s,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FAt={kernelName:Pw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(Tr(Rxe(Be(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LAt={kernelName:Rw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(Dxe(Be(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BAt={kernelName:D$,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s,exclusive:i,reverse:o}=n;return{x:()=>{const a=lr([s],r.rank);let l=yxe(t,s,i,!o);return a!=null&&(l=Qt(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zAt={kernelName:j$,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i,dimRoundingMode:o}=n,a=r??[1,1];L(bp(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,c]=e;return L(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),L(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),L(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),L(Fs(s,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${a}'.`),Fi("depthwiseConv2d",i,o),{x:()=>r$t(l.shape,t,c,s,i,a,o),filter:()=>t$t(l,t,c.shape,s,i,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VAt={kernelName:M$,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,i={x:r,filter:s,dy:t},o={x:r,filter:s,dy:t};return{x:()=>X.runKernel(HM,i,n),filter:()=>X.runKernel(qM,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WAt={kernelName:jw,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>X.runKernel(oV,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UAt={kernelName:Mw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=K(Ic(Tr(Bn(n))),2/Math.sqrt(Math.PI));return{x:()=>K(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GAt={kernelName:Fw,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HAt={kernelName:L$,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>Z(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qAt={kernelName:Lw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(t,Ic(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KAt={kernelName:Bw,gradFunc:t=>({x:()=>Zt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XAt={kernelName:zw,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Pt(n.shape,r.shape);return{a:()=>{const a=lt(t,Be(r,"float32")),l=Xr(n.shape,s);return l.length>0?Z(it(a,l),n.shape):a},b:()=>{let a=K(t,Be(n,"float32"));const l=Xr(r.shape,s);l.length>0&&(a=Z(it(a,l),r.shape));const c=Bn(r);return Tr(lt(a,Be(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YAt={kernelName:B$,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[s,i,o,a]=e,l=a??an(1),c=Xr(i.shape,s.shape),u=[];if(i.rank===1){for(let S=0;S<s.shape.length-1;++S)u.push(s.shape[S]);u.push(1)}const d=gt(s,i),h=K(t,l),p=Ixe(Ce(o,an(r))),m=K(K(K(p,p),p),an(-.5));return{x:()=>i.rank===1?Z(K(K(t,al(Z(p,[1,1,1,i.shape[0]]),u)),l),s.shape):Z(K(K(t,p),l),s.shape),mean:()=>{let S=K(K(p,an(-1)),h);return i.rank===1&&(S=it(S,c)),Z(S,i.shape)},variance:()=>{let S=K(K(m,d),h);return i.rank===1&&(S=it(S,c)),Z(S,i.shape)},scale:()=>{const S=K(d,p);let w=K(t,S);return i.rank===1&&(w=it(w,c)),Z(w,i.shape)},offset:()=>{let S=t;return i.rank===1&&(S=it(S,c)),Z(S,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QAt={kernelName:z$,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,s]=e,{axis:i,batchDims:o}=n,a=Vt(i,r.shape)[0],l=(c,u,d)=>()=>{const h=c.shape,p=u.size,m=h.slice(0,a),g=m.length,y=h.slice(i,h.length).slice(1),v=y.length,x=oX(0,g),b=oX(g+1,g+1+v),S=aX([m,[p],y]),w=Z(d,S),C=Z(u,[p]),_=aX([[g],x,b]),T=Qt(w,_);let k=Bxe(T,C,c.shape[a]);const $=Ff(_);return k=Qt(k,$),k};if(o===1){const c=r.shape[0],u=r.split(c,0);return{x:()=>Fu(u.map((p,m)=>l(p,s.slice(m,1),t.slice(m,1))())).reshape(r.shape),indices:()=>s}}else return{x:l(r,s,t),indices:()=>s}}};function oX(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function aX(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZAt={kernelName:Vw,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Zt(n),b:()=>Zt(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JAt={kernelName:Ww,gradFunc:t=>({x:()=>Be(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eIt={kernelName:Uw,gradFunc:t=>({x:()=>Zt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tIt={kernelName:Gw,gradFunc:t=>({x:()=>Zt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nIt={kernelName:Hw,gradFunc:t=>({x:()=>Zt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rIt={kernelName:W$,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:s}=n,i=Vo(r,0);return{x:()=>ai(i,t,K(t,s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sIt={kernelName:Kw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>lt(t,Ce(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iIt={kernelName:qw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>lt(t,Be(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oIt={kernelName:V2t,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;return{logits:()=>{const o=Ic(r);return gt(t,K(it(t,s,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aIt(t,e,n,r=5,s=1,i=1,o=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:s,alpha:i,beta:o};return X.runKernel(fV,a,l)}const lIt=J({localResponseNormalizationBackprop_:aIt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cIt={kernelName:X$,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{depthRadius:i,bias:o,alpha:a,beta:l}=n;return{x:()=>lIt(r,s,t,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A0e(t,e,n,r){return e.rank<n.rank&&(e=Z(e,Mr(e.shape,r))),t.rank<n.rank&&(t=Z(t,Mr(t.shape,r))),{x:()=>K(t,Be(Ac(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lX={kernelName:Y$,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:s}=r,i=e[0],o=e[1],a=Vt(s,i.shape),l=A0e(t,o,i,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uIt={kernelName:Xw,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>K(t,Be(Qp(n,r),"float32")),b:()=>K(t,Be(_T(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dIt(t,e,n,r,s,i,o){const a=V(t,"dy","maxPool3dGrad"),l=V(e,"input","maxPool3dGrad"),c=V(n,"output","maxPool3dGrad");let u=a,d=l,h=c,p=!1;l.rank===4&&(p=!0,u=Z(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=Z(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=Z(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),L(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),L(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),L(h.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`),Fi("maxPool3dGrad",i,o);const m={dy:u,input:d,output:h},g={filterSize:r,strides:s,pad:i,dimRoundingMode:o},y=X.runKernel(pV,m,g);return p?Z(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const fIt=J({maxPool3dGrad_:dIt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hIt={kernelName:Z$,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=n;return{x:()=>fIt(t,r,s,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pIt(t,e,n,r,s,i,o){const a=V(t,"dy","maxPoolGrad"),l=V(e,"input","maxPoolGrad"),c=V(n,"output","maxPoolGrad");L(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),L(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),L(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Fi("maxPoolGrad",i,o);const u={dy:a,input:l,output:c},d={filterSize:r,strides:s,pad:i,dimRoundingMode:o};return X.runKernel(hV,u,d)}const mIt=J({maxPoolGrad_:pIt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gIt={kernelName:Q$,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:o,pad:a}=n;return{x:()=>mIt(t,r,s,i,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yIt={kernelName:J$,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n,i=Vt(s,r.shape),a=ds(r.shape,i)[1],l=le(a);return{x:()=>{const u=r.shape.slice();i.forEach(p=>{u[p]=1});const d=Z(t,u);return lt(K(d,Bf(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vIt={kernelName:eA,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:s}=r,[i,o]=e,a=Vt(s,i.shape),l=A0e(t,o,i,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xIt={kernelName:Yw,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>K(t,Be(Gv(n,r),"float32")),b:()=>K(t,Be(Vo(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bIt={kernelName:tA,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(o=>o[0]);return{x:()=>In(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wIt={kernelName:Qw,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Pt(n.shape,r.shape);return{a:()=>{const a=Xr(n.shape,s);return a.length>0?Z(it(t,a),n.shape):t},b:()=>{const a=K(t,Tr(IA(lt(n,r)))),l=Xr(r.shape,s);return l.length>0?Z(it(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SIt={kernelName:Zw,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Pt(n.shape,r.shape);return{a:()=>{const a=K(t,Be(r,"float32")),l=Xr(n.shape,s);return l.length>0?Z(it(a,l),n.shape):a},b:()=>{const a=K(t,Be(n,"float32")),l=Xr(r.shape,s);return l.length>0?Z(it(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CIt={kernelName:nA,gradFunc:t=>({x:()=>Tr(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NIt={kernelName:iA,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>ns(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _It={kernelName:sA,gradFunc:t=>({x:()=>Zt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TIt={kernelName:oA,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return _p(t,r).map(i=>()=>i)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cX={kernelName:aA,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(o=>o[0]);return{x:()=>In(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kIt={kernelName:Jw,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,s]=e,i=n,o=r,a=Pt(i.shape,o.shape);return{a:()=>{const u=Be(o,"float32");let d=K(t,K(u,Cp(i,gt(u,an(1)))));const h=Xr(i.shape,a);return h.length>0&&(d=it(d,h)),Z(d,i.shape)},b:()=>{const u=Vo(i,0),d=ai(u,Oc(i),Zt(i));let h=K(t,K(s,d));const p=Xr(o.shape,a);return p.length>0&&(h=it(h,p)),Z(h,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EIt={kernelName:lA,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,s=Vo(n,0);return{x:()=>ai(s,t,K(t,r)),alpha:()=>{let i=ai(s,Zt(t),K(t,n));const o=Xr(r.shape,t.shape);return o.length>0&&(i=it(i,o)),Z(i,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $It(t,e,n){const r=t.shape.slice();r[n]=1;const s=Z(e,r),i=oF(t,n,!0,!1),o=oF(t,n,!0,!0),a=K(i,o);return K(s,a)}function AIt(t,e,n){const r=t.shape.length,s=r-n.length,i=lr(n,r);let o=t;i!=null&&(o=Qt(t,i));const a=o.shape.slice(),c=a.splice(r-n.length,n.length).reduce((h,p)=>h*p,1);a.push(c);const u=o.reshape(a);let d=$It(u,e,s);if(d=d.reshape(o.shape),i!=null){const h=Ff(i);d=Qt(d,h)}return d}const IIt={kernelName:cA,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;let i=[];return s==null?i=r.shape.map((o,a)=>a):typeof s=="number"?i=[s]:i=s,{x:()=>AIt(r,t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OIt={kernelName:Dw,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Pt(n.shape,r.shape);return{a:()=>{const a=lt(t,Be(r,"float32")),l=Xr(n.shape,s);return l.length>0?Z(it(a,l),n.shape):a},b:()=>{let a=K(t,Be(n,"float32"));const l=Xr(r.shape,s);l.length>0&&(a=Z(it(a,l),r.shape));const c=Bn(r);return Tr(lt(a,Be(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PIt={kernelName:eS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>lt(t,Tr(Bn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RIt={kernelName:nS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=K(Gv(n,6),SS(n));return{x:()=>K(t,Be(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DIt={kernelName:tS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(t,Be(SS(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jIt={kernelName:uA,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Z(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MIt={kernelName:fA,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>X.runKernel(wV,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FIt={kernelName:dA,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>X.runKernel(bV,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LIt={kernelName:hA,gradFunc:(t,e,n)=>{const{dims:r}=n,s=Vt(r,t.shape);return{x:()=>Np(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BIt={kernelName:rS,gradFunc:t=>({x:()=>Zt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zIt={kernelName:sS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Tr(lt(t,K(Cp(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VIt={kernelName:pA,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Be(Zt(n),"float32"),t:()=>K(t,Be(n,t.dtype)),e:()=>K(t,Be(VV(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WIt={kernelName:iS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Vo(n,an(0)),s=an(RA),i=an(DA),o=K(t,i),a=K(K(t,s),Ic(Be(n,"float32")));return ai(r,o,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UIt={kernelName:cS,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(t,K(n,gt(an(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GIt={kernelName:lS,gradFunc:t=>({x:()=>Zt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HIt={kernelName:oS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(jV(Be(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qIt={kernelName:aS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(gxe(Be(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KIt={kernelName:mA,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:s,size:i}=n,o=r.shape,[a,l]=OA(r,s,i),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],o[u]-a[u]-l[u]]);return{x:()=>GV(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XIt={kernelName:xA,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:s}=n,i=!0,o=K(t,r);return{logits:()=>gt(o,K(it(o,[s],i),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YIt={kernelName:uS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(t,Uv(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uX={kernelName:yA,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:s}=n;return{x:()=>RV(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dX={kernelName:vA,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Ai(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QIt={kernelName:dS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>lt(t,K(Ms(Be(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZIt={kernelName:SV,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(t,K(Be(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JIt={kernelName:fS,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=an(2);return{a:()=>K(t,K(s,gt(n,r))),b:()=>K(t,K(s,gt(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eOt={kernelName:yS,gradFunc:t=>({x:()=>Zt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tOt={kernelName:hS,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Pt(n.shape,r.shape);return{a:()=>{let a=t;const l=Xr(n.shape,s);return l.length>0&&(a=it(a,l)),Z(a,n.shape)},b:()=>{let a=t;const l=Xr(r.shape,s);return l.length>0&&(a=it(a,l)),Z(Tr(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nOt={kernelName:gA,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,s=r.shape.slice(),{axis:i}=n;Vt(i,r.shape).forEach(c=>{s[c]=1});const a=Z(t,s),l=K(a,Bf(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rOt={kernelName:pS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>lt(t,Bn(jV(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sOt={kernelName:mS,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(gt(an(1),Bn(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iOt={kernelName:gS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:s}=n;return{x:()=>{let o=Zt(r);if(r.rank===1)for(let a=0;a<s[0];++a)o=Ce(o,In(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)o=Ce(o,In(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)o=Ce(o,In(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)for(let u=0;u<s[3];++u)o=Ce(o,In(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oOt={kernelName:vg,gradFunc:(t,e,n)=>{const r=n,{perm:s}=r,i=Ff(s);return{x:()=>Qt(t,i)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aOt={kernelName:bA,gradFunc:(t,e,n)=>{const r=n,{axis:s}=r;return{value:()=>Fu(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lOt={kernelName:wA,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>cOt(t,n)}}};function cOt(t,e){const n=Lf(e,Zt(e)),r=LV(t,n);let s=Qp(e,an(0,"int32"));const i=r.rank-s.rank;for(let a=0;a<i;++a)s=wi(s,a+1);s=Mu(s,Bf(r.shape,"bool"));const o=Zt(r);return ai(s,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uOt={kernelName:SA,gradFunc:t=>({x:()=>Zt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dOt=[$0e,lAt,cAt,uAt,dAt,fAt,hAt,pAt,mAt,gAt,yAt,vAt,wAt,NAt,_At,TAt,kAt,EAt,$At,AAt,IAt,OAt,RAt,PAt,MAt,FAt,LAt,BAt,zAt,VAt,OIt,WAt,UAt,GAt,HAt,qAt,XAt,KAt,YAt,QAt,ZAt,JAt,eIt,tIt,nIt,rIt,sIt,iIt,oIt,cIt,lX,lX,uIt,hIt,gIt,yIt,vIt,xIt,bIt,wIt,SIt,CIt,NIt,_It,TIt,cX,cX,kIt,EIt,IIt,PIt,RIt,DIt,jIt,MIt,FIt,LIt,BIt,zIt,VIt,WIt,UIt,GIt,HIt,qIt,KIt,XIt,YIt,uX,uX,dX,dX,QIt,JIt,ZIt,eOt,tOt,nOt,rOt,sOt,iOt,oOt,aOt,lOt,uOt];for(const t of dOt)G2t(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.abs=function(){return this.throwIfDisposed(),Ys(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.acos=function(){return this.throwIfDisposed(),qNt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.acosh=function(){return this.throwIfDisposed(),XNt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.add=function(t){return this.throwIfDisposed(),Ce(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.all=function(t,e){return this.throwIfDisposed(),fxe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.any=function(t,e){return this.throwIfDisposed(),sF(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.argMax=function(t){return this.throwIfDisposed(),c1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.argMin=function(t){return this.throwIfDisposed(),e_t(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.asScalar=function(){return this.throwIfDisposed(),L(this.size===1,()=>"The array must have only 1 element."),Z(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.asType=function(t){return this.throwIfDisposed(),Be(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.as1D=function(){return this.throwIfDisposed(),Z(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.as2D=function(t,e){return this.throwIfDisposed(),Z(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),Z(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),Z(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.as5D=function(t,e,n,r,s){return this.throwIfDisposed(),Z(this,[t,e,n,r,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.asin=function(){return this.throwIfDisposed(),n_t(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.asinh=function(){return this.throwIfDisposed(),s_t(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.atan=function(){return this.throwIfDisposed(),o_t(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.atan2=function(t){return this.throwIfDisposed(),l_t(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.atanh=function(){return this.throwIfDisposed(),u_t(this)};ae().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),PV(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),RV(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.batchNorm=function(t,e,n,r,s){return this.throwIfDisposed(),kA(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.broadcastTo=function(t){return this.throwIfDisposed(),A0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.cast=function(t){return this.throwIfDisposed(),Be(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.ceil=function(){return this.throwIfDisposed(),M_t(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Fo(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Br&&(t=[t]),Ai([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.conv1d=function(t,e,n,r,s,i){return this.throwIfDisposed(),hxe(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.conv2dTranspose=function(t,e,n,r,s){return this.throwIfDisposed(),pxe(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.conv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),Sp(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.cos=function(){return this.throwIfDisposed(),jV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.cosh=function(){return this.throwIfDisposed(),gxe(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),oF(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),yxe(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),lTt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.depthwiseConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),MV(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.dilation2d=function(t,e,n,r,s){return this.throwIfDisposed(),dTt(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.divNoNan=function(t){return this.throwIfDisposed(),gTt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.div=function(t){return this.throwIfDisposed(),lt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.dot=function(t){return this.throwIfDisposed(),vTt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.elu=function(){return this.throwIfDisposed(),$A(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.equal=function(t){return this.throwIfDisposed(),Ac(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.erf=function(){return this.throwIfDisposed(),vxe(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),ATt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.exp=function(){return this.throwIfDisposed(),Ic(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.expandDims=function(t){return this.throwIfDisposed(),wi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.expm1=function(){return this.throwIfDisposed(),RTt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.fft=function(){return this.throwIfDisposed(),Mxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.flatten=function(){return this.throwIfDisposed(),Z(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.floor=function(){return this.throwIfDisposed(),IA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.floorDiv=function(t){return this.throwIfDisposed(),dxe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.gather=function(t,e,n){return this.throwIfDisposed(),LV(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.greaterEqual=function(t){return this.throwIfDisposed(),Qp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.greater=function(t){return this.throwIfDisposed(),Vo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.ifft=function(){return this.throwIfDisposed(),aF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.irfft=function(){return this.throwIfDisposed(),_Et(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.isFinite=function(){return this.throwIfDisposed(),WTt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.isInf=function(){return this.throwIfDisposed(),GTt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.isNaN=function(){return this.throwIfDisposed(),qTt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.leakyRelu=function(t){return this.throwIfDisposed(),zV(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.lessEqual=function(t){return this.throwIfDisposed(),Gv(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.less=function(t){return this.throwIfDisposed(),_T(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),ZTt(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logSigmoid=function(){return this.throwIfDisposed(),ikt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logSoftmax=function(t){return this.throwIfDisposed(),Cxe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),Nxe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.log=function(){return this.throwIfDisposed(),Oc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.log1p=function(){return this.throwIfDisposed(),Sxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Mu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logicalNot=function(){return this.throwIfDisposed(),VV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logicalOr=function(t){return this.throwIfDisposed(),_xe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logicalXor=function(t){return this.throwIfDisposed(),hkt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),on(this,t,e,n)};ae().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),WV(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.max=function(t,e){return this.throwIfDisposed(),gl(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.maximum=function(t){return this.throwIfDisposed(),Lf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.mean=function(t,e){return this.throwIfDisposed(),Dr(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.min=function(t,e){return this.throwIfDisposed(),NT(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.minimum=function(t){return this.throwIfDisposed(),f1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),wkt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.mod=function(t){return this.throwIfDisposed(),Ckt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.mul=function(t){return this.throwIfDisposed(),K(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.neg=function(){return this.throwIfDisposed(),Tr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.norm=function(t,e,n){return this.throwIfDisposed(),AA(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.notEqual=function(t){return this.throwIfDisposed(),TT(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),Txe(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.onesLike=function(){return this.throwIfDisposed(),Pa(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.pad=function(t,e){return this.throwIfDisposed(),GV(this,t,e)};ae().prototype.pool=function(t,e,n,r,s,i){return this.throwIfDisposed(),Pkt(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.pow=function(t){return this.throwIfDisposed(),Cp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.prelu=function(t){return this.throwIfDisposed(),qV(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.prod=function(t,e){return this.throwIfDisposed(),jkt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.reciprocal=function(){return this.throwIfDisposed(),iEt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.relu=function(){return this.throwIfDisposed(),Jp(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.relu6=function(){return this.throwIfDisposed(),$xe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.reshapeAs=function(t){return this.throwIfDisposed(),Z(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.reshape=function(t){return this.throwIfDisposed(),Z(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),Vxe(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),Wxe(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.reverse=function(t){return this.throwIfDisposed(),Np(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.rfft=function(){return this.throwIfDisposed(),EEt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.round=function(){return this.throwIfDisposed(),Axe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.rsqrt=function(){return this.throwIfDisposed(),Ixe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.selu=function(){return this.throwIfDisposed(),Oxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.separableConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),Pxe(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sigmoid=function(){return this.throwIfDisposed(),Uv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sign=function(){return this.throwIfDisposed(),pEt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sin=function(){return this.throwIfDisposed(),Rxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sinh=function(){return this.throwIfDisposed(),Dxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.slice=function(t,e){return this.throwIfDisposed(),In(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.softmax=function(t){return this.throwIfDisposed(),r5(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.softplus=function(){return this.throwIfDisposed(),xS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),HV(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.split=function(t,e){return this.throwIfDisposed(),Po(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sqrt=function(){return this.throwIfDisposed(),Ms(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.square=function(){return this.throwIfDisposed(),Bn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.squaredDifference=function(t){return this.throwIfDisposed(),AEt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.squeeze=function(t){return this.throwIfDisposed(),wS(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Br?[this,t]:[this,...t];return Fu(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.step=function(t){return this.throwIfDisposed(),SS(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.stridedSlice=function(t,e,n,r,s,i,o,a){return this.throwIfDisposed(),DEt(this,t,e,n,r,s,i,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sub=function(t){return this.throwIfDisposed(),gt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sum=function(t,e){return this.throwIfDisposed(),it(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.tan=function(){return this.throwIfDisposed(),MEt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.tanh=function(){return this.throwIfDisposed(),TA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.tile=function(t){return this.throwIfDisposed(),al(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.toBool=function(){return this.throwIfDisposed(),Be(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.toFloat=function(){return this.throwIfDisposed(),Be(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.toInt=function(){return this.throwIfDisposed(),Be(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.topk=function(t,e){return this.throwIfDisposed(),BEt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.transpose=function(t){return this.throwIfDisposed(),Qt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.unique=function(t){return this.throwIfDisposed(),WEt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),Bxe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.unstack=function(t){return this.throwIfDisposed(),_p(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.where=function(t,e){return this.throwIfDisposed(),ai(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.zerosLike=function(){return this.throwIfDisposed(),Zt(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ql extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ql.prototype)}}class ya extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ya.prototype)}}class H extends Error{constructor(e){super(e),Object.setPrototypeOf(this,H.prototype)}}class Dt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Dt.prototype)}}class L5 extends Error{constructor(e){super(e),Object.setPrototypeOf(this,L5.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class I0e{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Tp(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Kl(t,e){if(!t)throw new L5(e)}function fX(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Si(t){return t.length===1?t[0]:t}function gn(t){return Array.isArray(t)?t:[t]}function eu(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function mh(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Yo={};function B5(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function uF(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>uF(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:uF(r))}}}function TS(t,e={},n={},r="object",s=!1){if(typeof t=="string"){const i=t;let o;if(i in n)o=n[i];else if(i in Yo)o=Yo[i];else if(o=e[i],o==null)throw new H(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const i=t;if(i.className==null||i.config==null)throw new H(`${r}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);const o=i.className;let a,l;if(o in n?[a,l]=n[o]:o in Yo?[a,l]=Yo.className:o in e&&([a,l]=e[o]),a==null)throw new H(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const p of Object.keys(Yo))c[p]=Yo[p];for(const p of Object.keys(n))c[p]=n[p];const u=i.config;u.customObjects=c;const d=Object.assign({},Yo);for(const p of Object.keys(n))Yo[p]=n[p];uF(i.config);const h=l(a,i.config,n,s);return Yo=Object.assign({},d),h}else{const c=Object.assign({},Yo);for(const d of Object.keys(n))Yo[d]=n[d];const u=new a(i.config);return Yo=Object.assign({},c),u}}}function fOt(t,e){return t<e?-1:t>e?1:0}function qC(t,e){return-1*fOt(t,e)}function Xd(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function hOt(t){if(t==null)throw new H(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function tm(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new H(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function z5(t,e,n=0,r=1/0){return Kl(n>=0),Kl(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(s=>typeof s===e)}function as(t,e){Array.isArray(t)?(L(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>as(n,`element ${r+1} of ${e}`))):L(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${O0e(t)}.`)}function O0e(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>O0e(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function pOt(t,e,n){let r=n!=null?n():bi(),s;return(...o)=>{const a=n!=null?n():bi();return a-r<e||(r=a,s=t(...o)),s}}function P0e(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let mOt=0;function R0e(){return mOt++}const KC={};function jA(t=""){return t in KC||(KC[t]=0),KC[t]+=1,t+KC[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const gOt=["channelsFirst","channelsLast"],yOt=["nearest","bilinear"],vOt=["valid","same","causal"],xOt=["max","avg"],bOt=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const wm=new Map;function $r(t){tm(gOt,"DataFormat",t)}function wOt(t){tm(yOt,"InterpolationFormat",t)}function Wo(t){tm(vOt,"PaddingMode",t)}function D0e(t){tm(xOt,"PoolMode",t)}const I0=[],hX="/";function Xh(t,e){I0.push(t);try{const n=e();return I0.pop(),n}catch(n){throw I0.pop(),n}}function SOt(){return I0.length===0?"":I0.join(hX)+hX}function j0e(t){if(!F0e(t))throw new Error("Not a valid tensor name: '"+t+"'");return SOt()+t}function M0e(t){if(!F0e(t))throw new Error("Not a valid tensor name: '"+t+"'");wm.has(t)||wm.set(t,0);const e=wm.get(t);if(wm.set(t,wm.get(t)+1),e>0){const n=`${t}_${e}`;return wm.set(n,1),n}else return t}const COt=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function F0e(t){return!!t.match(COt)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function NOt(t){return t===parseInt(t.toString(),10)}function Yd(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let s=e;s<n;++s)r*=t[s];return r}function Vy(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function pf(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Tl(t,e){if(e<t)throw new H(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let SP;function Ur(){return SP==null&&(SP=yNt().epsilon()),SP}function kl(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vc(t,e){return Be(t,e)}function kS(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),Z(t,n)}function _Ot(t,e){return re(()=>{if(t.shape.length!==2)throw new H(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=kS(t,1);return dF(n,[1,e,1])})}function TOt(t){const e=[Yd(t.shape)];return Z(t,e)}function kOt(t){if(t.rank<=1)throw new H(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Yd(t.shape,1)];return Z(t,e)}function Yh(t,e,n){return re(()=>{switch(t.rank){case 1:return t5(t,e,n);case 2:return jxe(t,[e,0],[n,t.shape[1]]);case 3:return n5(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return ET(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return In(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return In(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new H(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function CP(t,e,n){return re(()=>{switch(t.rank){case 1:return t5(t,e,n);case 2:return jxe(t,[0,e],[t.shape[0],n]);case 3:return n5(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return ET(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new H(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function XC(t,e,n,r){return re(()=>{switch(t.rank){case 1:return t5(t,e,n);case 2:switch(r){case 1:return Yh(t,e,n);case 2:return CP(t,e,n);default:throw new H(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Yh(t,e,n);case 2:return n5(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return CP(t,e,n);default:throw new H(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Yh(t,e,n);case 2:return ET(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return ET(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return CP(t,e,n);default:throw new H(`The axis is not within the rank of the tensor ${r}`)}default:throw new H(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function V5(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Ai(t,e)}function pX(t,e){switch(t.rank){case 1:return B_t([t,e]);case 2:return V_t([t,e],0);case 3:return U_t([t,e],0);case 4:return H_t([t,e],0);default:throw new H(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function dF(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new H(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return al(t,e)}function MA(t,e=0,n=1,r,s){return tEt(t,e,n,r,s)}function xc(t,e,n,r){if(t.rank<2||e.rank<2)throw new Dt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=t.shape.slice(-1)[0],i=e.shape.slice(-2)[0];if(s!==i)throw new Dt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return eX({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?fF(t.rank,r,kl()):null,activation:n});{const s=t.shape.slice(),i=s.pop();t=Z(t,[-1,i]);const o=e.shape.slice(),a=o.pop(),l=o.pop(),c=[...o,a],u=Array.from({length:e.rank},(m,g)=>g===0?e.rank-2:g<=e.rank-2?g-1:g);e=Z(Qt(e,u),[l,-1]);const d=[...s,...c];return Z(eX({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?fF(t.rank,r,kl()):null,activation:n}),d)}}function L0e(t,e,n){return re(()=>(Array.isArray(e)?e=Qi(e,"int32"):e=Be(e,"int32"),LV(t,e,n)))}function ES(t){return K(t,t)}function fF(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new H(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?Z(e,[1,r[0],1,1,1]):Z(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?Z(e,[1,1,1,1,r[0]]):Z(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?Z(e,[1,r[0],1,1]):Z(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?Z(e,[1,1,1,r[0]]):Z(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?Z(e,[1,r[0],1]):Z(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?Z(e,[1,1,r[0]]):Z(e,[1].concat(r))}else if(t<3)return e;throw new H(`Unsupported input rank by biasAdd: ${e.rank}`)}function Dl(t,e,n){return re(()=>(n==null&&(n=kl()),$r(n),Ce(t,fF(t.rank,e,n))))}function EOt(t,e=1){if(e!==1)throw new Dt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return $A(t)}function $Ot(t){return re(()=>lt(t,Ce(Ys(t),1)))}function B0e(t,e,n,r){return re(()=>YEt(t,e,n,r))}function AOt(t){return re(()=>{const e=Ce(.5,K(.2,t));return Fo(e,0,1)})}function $S(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const IOt=["fanIn","fanOut","fanAvg"],OOt=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function POt(t){tm(IOt,"FanMode",t)}function ROt(t){tm(OOt,"Distribution",t)}class Fa extends qv{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class z0e extends Fa{apply(e,n){return ns(e,n)}}z0e.className="Zeros";xe(z0e);class W5 extends Fa{apply(e,n){return Bf(e,n)}}W5.className="Ones";xe(W5);class V0e extends Fa{constructor(e){if(super(),typeof e!="object")throw new H(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new H(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return re(()=>K(an(this.value),Bf(e,n)))}getConfig(){return{value:this.value}}}V0e.className="Constant";xe(V0e);class W0e extends Fa{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return bS(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}W0e.className="RandomUniform";xe(W0e);class U0e extends Fa{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Dt(`randomNormal does not support dType ${n}.`);return MA(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}U0e.className="RandomNormal";xe(U0e);class G0e extends Fa{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Dt(`truncatedNormal does not support dType ${n}.`);return Lxe(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}G0e.className="TruncatedNormal";xe(G0e);class H0e extends Fa{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return re(()=>{if(e.length!==2||e[0]!==e[1])throw new H("Identity matrix initializer can only be used for 2D square matrices.");return K(this.gain,wxe(e[0]))})}getConfig(){return{gain:this.gain}}}H0e.className="Identity";xe(H0e);function DOt(t,e="channelsLast"){let n,r;if($r(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const s=Yd(t,2);n=t[1]*s,r=t[0]*s}else if(e==="channelsLast"){const s=Yd(t,0,t.length-2);n=t[t.length-2]*s,r=t[t.length-1]*s}}else{const s=Yd(t);n=Math.sqrt(s),r=Math.sqrt(s)}return[n,r]}class ao extends Fa{constructor(e){if(super(),e.scale<0)throw new H(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,POt(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,ROt(this.distribution),this.seed=e.seed}apply(e,n){const r=DOt(e),s=r[0],i=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,s):this.mode==="fanOut"?o/=Math.max(1,i):o/=Math.max(1,(s+i)/2),this.distribution==="normal"){const a=Math.sqrt(o);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Dt(`${this.getClassName()} does not support dType ${n}.`);return Lxe(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*o);return bS(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}ao.className="VarianceScaling";xe(ao);class U5 extends ao{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ao.className}}U5.className="GlorotUniform";xe(U5);class G5 extends ao{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ao.className}}G5.className="GlorotNormal";xe(G5);class H5 extends ao{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ao.className}}H5.className="HeNormal";xe(H5);class q5 extends ao{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ao.className}}q5.className="HeUniform";xe(q5);class K5 extends ao{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ao.className}}K5.className="LeCunNormal";xe(K5);class X5 extends ao{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ao.className}}X5.className="LeCunUniform";xe(X5);class q0e extends Fa{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return re(()=>{if(e.length<2)throw new Dt("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=le(e.slice(0,-1)),s=e[e.length-1],i=r*s;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const o=[Math.max(s,r),Math.min(s,r)],a=MA(o,0,1,n,this.seed),l=H$t.qr(a,!1);let c=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(s,r)*Math.min(s,r)],[Math.min(s,r)+1]);return c=K(c,d.sign()),r<s&&(c=c.transpose()),K(an(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}q0e.className="Orthogonal";xe(q0e);const mX={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function gX(t,e={}){return TS(t,ua.getMap().classNameMap,e,"initializer")}function or(t){return B5(t)}function Zn(t){if(typeof t=="string"){const e=t in mX?mX[t]:t;if(e==="GlorotNormal")return new G5;if(e==="GlorotUniform")return new U5;if(e==="HeNormal")return new H5;if(e==="HeUniform")return new q5;if(e==="LeCunNormal")return new K5;if(e==="LeCunUniform")return new X5;{const n={};return n.className=e,n.config={},gX(n)}}else return t instanceof Fa?t:gX(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hF(t){return Array.isArray(t)&&Array.isArray(t[0])}function $T(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function xt(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new H(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function tn(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new H(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function AT(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,s)=>r*s);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const yX="Variable";class jOt{constructor(e,n="float32",r=yX,s=!0,i=null){this.dtype=n??"float32",this.shape=e.shape,this.id=R0e(),r=r??yX,this.originalName=j0e(r),this.name=M0e(this.originalName),this.trainable_=s,this.constraint=i,this.val=HEt(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),MOt(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function MOt(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function pF(t){return t.map(e=>e.read())}function Y5(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Gr{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Pc{constructor(e,n,r,s,i,o,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=s,this.callArgs=i,this.outputTensorIndex=a,this.id=R0e(),o!=null&&(this.originalName=j0e(o),this.name=M0e(this.originalName)),this.rank=n.length}}let FOt=0,FA=class{constructor(e,n){this.callArgs=n,this.id=FOt++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},LOt=0;class Wt extends qv{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=LOt++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=eu(r)+"_"+jA(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),r=[i].concat(e.inputShape)}this.batchInputShape=r;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new ya(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new H(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Si(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Si(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new ql(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new ql(`Layer ${this.name} is not connected, no input to return.`);return Si(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new ql(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new ql(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Si(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=gn(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=gn(this.inputSpec);if(n.length!==r.length)throw new H(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let s=0;s<n.length;s++){const i=n[s],o=r[s];if(o==null)continue;const a=i.rank;if(o.ndim!=null&&a!==o.ndim)throw new H(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(o.maxNDim!=null&&a>o.maxNDim)throw new H(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(o.minNDim!=null&&a<o.minNDim)throw new H(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(o.dtype!=null&&i.dtype!==o.dtype)throw new H(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${i.dtype}.`);if(o.axes){const l=i.shape;for(const c in o.axes){const u=Number(c),d=o.axes[c],h=u>=0?l[u]:l[l.length+u];if(d!=null&&[d,null].indexOf(h)===-1)throw new H(`Input ${s} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(o.shape!=null)for(let l=0;l<o.shape.length;++l){const c=o.shape[l],u=i.shape[l];if(c!=null&&u!=null&&c!==u)throw new H(`Input ${s} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${i.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=gn(e),s=VOt(e),i=WOt(e);if(s===i)throw new H("Arguments to apply() must be all SymbolicTensors or all Tensors");return Xh(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const a of gn(e))o.push(a.shape);this.build(Si(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let o=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,o);const a=gn(o),l=[];for(let c of a)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(o=Si(l),this.activityRegularizer!=null)throw new Dt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=BOt(e),a=this.computeOutputShape(o);let l;const c=zOt(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,d)=>new Pc(c,u,this,gn(e),n,this.name,d)):l=new Pc(c,a,this,gn(e),n,this.name),this.addInboundNode(e,l,null,null,o,a,n),this._refCount++,this.activityRegularizer!=null)throw new Dt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,s)=>{r!=null&&e[s]!=null&&e[s]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new ql(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new ql(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new ya(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return AT(this.weights)}build(e){this.built=!0}getWeights(e=!1){return pF(e?this.trainableWeights:this.weights)}setWeights(e){re(()=>{const n=this.weights;if(n.length!==e.length)throw new H(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],s=pF(n);for(let i=0;i<s.length;++i){const o=s[i],a=n[i],l=e[i];if(!cn(o.shape,l.shape))throw new H(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}Y5(r)})}addWeight(e,n,r,s,i,o,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new H(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(s=l!=null?l():Zn("zeros"));const c=s.apply(n,r),u=new jOt(c,r,e,o,a);return c.dispose(),i!=null&&this.addLoss(()=>i.apply(u.read())),o==null&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=gn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const s=this.computeMask(e,r),i=gn(n),o=gn(s);if(i.length!==o.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let a=0;a<i.length;a++)i[a].kerasMask=o[a]}addInboundNode(e,n,r,s,i,o,a=null){const l=gn(e);n=gn(n),r=gn(r),s=gn(s),i=$T(i),o=$T(o);const c=[],u=[],d=[];for(const h of l)c.push(h.sourceLayer),u.push(h.nodeIndex),d.push(h.tensorIndex);new FA({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:s,inputShapes:i,outputShapes:o},a);for(let h=0;h<n.length;h++)n[h].sourceLayer=this,n[h].nodeIndex=this.inboundNodes.length-1,n[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function BOt(t){t=gn(t);const e=[];for(const n of t)e.push(n.shape);return Si(e)}function zOt(t){return"float32"}function K0e(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const s=[];for(let i=0;i<r.inboundLayers.length;i++){const o=r.inputTensors[i],a=r.inboundLayers[i],l=r.nodeIndices[i],c=K0e(o,a,l);for(const u of c)s.indexOf(u)===-1&&s.push(u)}return s}}}function VOt(t){let e=!0;for(const n of gn(t))if(!(n instanceof Pc)){e=!1;break}return e}function WOt(t){let e=!0;for(const n of gn(t))if(n instanceof Pc){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class AS extends Wt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:jA("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new H("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new H("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new H("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const s=new Pc(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new FA({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new H(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}AS.className="InputLayer";xe(AS);function UOt(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new H("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new AS({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function GOt(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Be(e,t.dtype)}catch{throw new H(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Od{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Od)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=GOt(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new H(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Pc){if(this.id2Value[e.id]==null)throw new H(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new H(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof Pc){if(this.id2Value[e.id]==null)throw new H(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new H(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&Ut(this.id2Mask)}}const IT=new I0e,OT=new I0e;function HOt(t){IT!=null&&IT.setMaxEntries(t),OT!=null&&OT.setMaxEntries(t)}function e0(t,e,n,r){const s=n==null?!1:n.training,i=Array.isArray(t),o=i?t:[t],a=o.map(m=>m.name),l=[],c=e.names();for(const m of a)c.indexOf(m)!==-1?l.push(e.getValue(m)):l.push(null);const u=a.join(",")+"|"+e.names().sort().join(",");let d=IT.get(u),h;if(d==null){const m=qOt(o,e);d=m.sorted,h=m.recipientCounts,IT.put(u,d),OT.put(u,h)}h={},s||Object.assign(h,OT.get(u));const p=new Od(e);for(let m=0;m<d.length;++m){const g=d[m],y=g.sourceLayer;if(y instanceof AS)continue;const v=[],x=[],b=[];let S=!1;for(const k of g.inputs){const $=p.getValue(k),O=p.getMask(k);v.push($),x.push(O),O!=null&&(S=!0),s||(h[k.name]--,h[k.name]===0&&!e.hasKey(k)&&a.indexOf(k.name)===-1&&!$.isDisposed&&k.sourceLayer.stateful!==!0&&b.push($))}S&&(n=n||{},n.mask=x[0]);const w=gn(y.apply(v,n));let C=null;y.supportsMasking&&(C=y.computeMask(v,x));const _=XOt(g),T=Array.isArray(_)?_:[_];for(let k=0;k<T.length;++k){p.hasKey(T[k])||p.add(T[k],w[k],Array.isArray(C)?C[0]:C);const $=a.indexOf(T[k].name);$!==-1&&(l[$]=w[k])}s||Ut(b)}return p.disposeMasks(),i?l:l[0]}function qOt(t,e){L(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const s=vX(t[0],e);n=s.sorted,r=s.recipientMap}else{const s=new Set;for(const i of t){const{sorted:o,recipientMap:a}=vX(i,e);for(const l of o)s.has(l.name)||(n.push(l),s.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:KOt(r)}}function KOt(t){const e={};for(const n in t)e[n]=t[n].size;return e}function vX(t,e){const n=new Set,r=[],s={};for(const a of e.names())n.add(a);const i=[],o=[];for(i.push(t);i.length>0;){const a=i[i.length-1];if(n.has(a.name)){i.pop();continue}const l=o[o.length-1]===i.length-1;if(a.inputs.length===0||l)i.pop(),r.push(a),n.add(a.name),l&&o.pop();else{o.push(i.length-1);for(const c of a.inputs)s[c.name]==null&&(s[c.name]=new Set),s[c.name].add(a.name),!n.has(c.name)&&i.push(c)}}return{sorted:r,recipientMap:s}}function XOt(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const s of t.sourceLayer.inboundNodes[r].outputTensors)if(s.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YOt=oe();YOt.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,HOt);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Q5(t,e){return re(()=>Ms(it(K(t,t),e,!0)))}class IS extends qv{getConfig(){return{}}}class X0e extends IS{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return re(()=>{const n=Q5(e,this.axis),r=Fo(n,0,this.maxValue);return K(e,lt(r,Ce(Ur(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}X0e.className="MaxNorm";xe(X0e);class Y0e extends IS{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return re(()=>lt(e,Ce(Ur(),Q5(e,this.axis))))}getConfig(){return{axis:this.axis}}}Y0e.className="UnitNorm";xe(Y0e);class Q0e extends IS{apply(e){return Jp(e)}}Q0e.className="NonNeg";xe(Q0e);class Z0e extends IS{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return re(()=>{const n=Q5(e,this.axis),r=Ce(K(this.rate,Fo(n,this.minValue,this.maxValue)),K(1-this.rate,n));return K(e,lt(r,Ce(Ur(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}Z0e.className="MinMaxNorm";xe(Z0e);const xX={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function qr(t){return B5(t)}function bX(t,e={}){return TS(t,ua.getMap().classNameMap,e,"constraint")}function Kr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in xX?xX[t]:t,config:{}};return bX(n)}else return t instanceof IS?t:bX(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function th(t){if(t==null)return;const e=[],n=[],r=[];for(const s in t){const i=t[s];if(typeof i!="number"){const o=i;e.push(o.data()),n.push(s),r.push(o)}}if(e.length>0){const s=await Promise.all(e);for(let i=0;i<s.length;++i)t[n[i]]=s[i][0];Ut(r)}}function J0e(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var wX;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(wX||(wX={}));const QOt=125;class p1{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class ZOt{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class JOt extends p1{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const s in n){const i=n[s];if(typeof i=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+i*r;else{let o;s in this.totals?o=this.totals[s]:this.totals[s]=0;const a=re(()=>Ce(this.totals[s],K(i,r)));this.totals[s]=a,o!=null&&o.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:re(()=>{const s=K(lt(1,this.seen),this.totals[r]);n[r]=s,this.totals[r].dispose(),gc(n[r])}))}}class ePt extends p1{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const i in this.history){const o=this.history[i];for(let a=0;a<o.length;++a)if(typeof o[a]!="number"){const l=o[a];e.push(l.data()),n.push(i),r.push(a)}}const s=await Promise.all(e);for(let i=0;i<s.length;++i)this.history[n[i]][r[i]].dispose(),this.history[n[i]][r[i]]=s[i][0]}}class tPt extends p1{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||s0e,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=QOt),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");WM(this.yieldEvery)&&(this.maybeWait=pOt(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const s=[];this.yield!=null&&(await th(r),s.push(this.yield(e,n,r))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await th(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await th(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await th(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await th(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):WM(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await th(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await th(e),await this.trainEnd(e))}}function ebe(t,e){return t==null&&(t={}),t instanceof p1?[t]:Array.isArray(t)&&t[0]instanceof p1?t:gn(t).map(r=>new tPt(r,e))}class ea{constructor(){}static registerCallbackConstructor(e,n){L(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),ea.checkForDuplicate(n),ea.constructors[e]==null&&(ea.constructors[e]=[]),ea.constructors[e].push(n)}static checkForDuplicate(e){for(const n in ea.constructors)ea.constructors[+n].forEach(s=>{if(s===e)throw new H("Duplicate callback constructor.")})}static clear(){ea.constructors={}}static createCallbacks(e){const n=[];for(const r in ea.constructors){const s=+r;e>=s&&n.push(...ea.constructors[s])}return n.map(r=>new r)}}ea.constructors={};function tbe(t,e,n,r,s,i,o,a,l){const c=new ePt,u=[new JOt,...ea.createCallbacks(e)];t!=null&&u.push(...t),u.push(c);const d=new ZOt(u);return d.setParams({epochs:n,initialEpoch:r,samples:s,steps:i,batchSize:o,verbose:e,doValidation:a,metrics:l}),{callbackList:d,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bu(t,e={},n=!1){return TS(t,ua.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function PT(t,e){return re(()=>{t.dtype!=="float32"&&(t=Be(t,"float32"));const n=it(ES(t),e,!0),r=EA(n.shape,Ur()),s=Ms(Lf(n,r));return lt(t,s)})}function LA(t,e){return re(()=>Dr(ES(gt(e,t)),-1))}function Z5(t,e){return re(()=>Dr(Ys(gt(e,t)),-1))}function J5(t,e){return re(()=>{const n=gt(t,e),r=Fo(Ys(t),Ur(),Number.MAX_VALUE),s=Ys(lt(n,r));return K(100,Dr(s,-1))})}function nPt(t,e){return re(()=>{const n=Fo(e,Ur(),Number.MAX_VALUE),r=Oc(Ce(1,n)),s=Fo(t,Ur(),Number.MAX_VALUE),i=Oc(Ce(1,s));return Dr(ES(gt(r,i)),-1)})}function rPt(t,e){return re(()=>{const n=Lf(0,gt(1,K(t,e)));return Dr(ES(n),-1)})}function sPt(t,e){return re(()=>{const n=Lf(0,gt(1,K(t,e)));return Dr(n,-1)})}function iPt(t,e){return re(()=>{const n=it(K(t,e),-1),r=gl(K(gt(1,t),e),-1);return Lf(0,Ce(1,gt(r,n)))})}function oPt(t,e){return re(()=>{const n=Math.log(2),r=gt(e,t),s=gt(Ce(r,xS(K(-2,r))),n);return Dr(s,-1)})}function m1(t,e,n=!1){return re(()=>{if(n)e=r5(e);else{const r=it(e,e.shape.length-1,!0);e=lt(e,r)}return e=Fo(e,Ur(),1-Ur()),Tr(it(K(Be(t,"float32"),Oc(e)),e.shape.length-1))})}function RT(t,e,n=!1){return re(()=>{const r=Be(IA(TOt(t)),"int32");e=Fo(e,Ur(),1-Ur());const s=e.shape,i=Z(Txe(r,s[s.length-1]),s);return m1(i,e,n)})}function aPt(t,e){if(!cn(t.shape,e.shape))throw new H(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return re(()=>{const n=Jp(e),r=Tr(Ys(e));return Ce(gt(n,K(e,t)),Sxe(Ic(r)))})}function BA(t,e){return re(()=>{let n;return n=Fo(e,Ur(),1-Ur()),n=Oc(lt(n,gt(1,n))),Dr(aPt(t,n),-1)})}function lPt(t,e){return re(()=>{const n=Fo(t,Ur(),1),r=Fo(e,Ur(),1);return it(K(t,Oc(lt(n,r))),-1)})}function cPt(t,e){return re(()=>{const n=Oc(Ce(Ur(),e));return Dr(gt(e,K(t,n)),-1)})}function nbe(t,e){return re(()=>{const n=PT(t,-1),r=PT(e,-1),s=K(n,r);return Tr(it(s,-1))})}const DT={meanSquaredError:LA,meanAbsoluteError:Z5,meanAbsolutePercentageError:J5,meanSquaredLogarithmicError:nPt,squaredHinge:rPt,hinge:sPt,categoricalHinge:iPt,logcosh:oPt,categoricalCrossentropy:m1,sparseCategoricalCrossentropy:RT,binaryCrossentropy:BA,kullbackLeiblerDivergence:lPt,poisson:cPt,cosineProximity:nbe};function NP(t){if(typeof t=="string"){if(t in DT)return DT[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new H(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function rbe(t,e){return re(()=>{const n=K(.5,Pa(e)),r=vc(Vo(e,n),t.dtype);return Dr(Ac(t,r),-1)})}function sbe(t,e){return re(()=>vc(Ac(c1(t,-1),c1(e,-1)),"float32"))}function uPt(t,e){return re(()=>Be(it(Mu(Ac(t,1),Ac(e,1))),"float32"))}function dPt(t,e){return re(()=>Be(it(Mu(Ac(t,0),Ac(e,1))),"float32"))}function fPt(t,e){return re(()=>{const n=uPt(t,e),r=dPt(t,e),s=Ce(n,r);return Be(ai(Vo(s,0),lt(n,s),0),"float32")})}function hPt(t,e){return BA(t,e)}function pPt(t,e){return t.rank===e.rank&&(t=wS(t,[t.rank-1])),e=c1(e,-1),e.dtype!==t.dtype&&(e=Be(e,t.dtype)),Be(Ac(t,e),"float32")}const mPt=LA,gPt=LA,yPt=Z5,vPt=Z5,xPt=J5,bPt=J5,ibe=m1,wPt=nbe,obe=RT,jT={binaryAccuracy:rbe,categoricalAccuracy:sbe,precision:fPt,categoricalCrossentropy:ibe,sparseCategoricalCrossentropy:obe,mse:mPt,MSE:gPt,mae:yPt,MAE:vPt,mape:xPt,MAPE:bPt,cosine:wPt};function SPt(t){if(typeof t=="string"&&t in jT)return jT[t];if(typeof t!="string"&&t!=null)return t;throw new H(`Unknown metric ${t}`)}function YC(t){if(Kl(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(DT))if(DT[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(jT))if(jT[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function CPt(t){const e={Adagrad:()=>bm.adagrad(.01),Adadelta:()=>bm.adadelta(1,.95,Ur()),Adam:()=>bm.adam(.001,.9,.999,Ur()),Adamax:()=>bm.adamax(.002,.9,.999,Ur(),0),RMSProp:()=>bm.rmsprop(.001,.9,0,Ur()),SGD:()=>bm.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new H(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const SX=1*1024*1024;function CX(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!mF(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>SX&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${SX}.`)}}function mF(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!mF(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!mF(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function NPt(t,e,n,r=console.log){const s=TPt(t),i=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(e*u)));let o;if(!s){i.push("Receives inputs"),o=[];for(const u in t.nodesByDepth)o.push(...t.nodesByDepth[u])}r("_".repeat(e)),MT(i,n,r),r("=".repeat(e));const a=t.layers;for(let u=0;u<a.length;++u)s?kPt(a[u],n,r):EPt(a[u],n,o,r),r((u===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=_Pt(t),c=AT(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function _Pt(t){let e;return t.collectedTrainableWeights!=null?e=AT(t.collectedTrainableWeights):e=AT(t.trainableWeights),e}function TPt(t){let e=!0;const n=[],r=[];for(const s in t.nodesByDepth)n.push(t.nodesByDepth[s]);for(const s of n){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of t.layers){let i=!1;for(const o of s.inboundNodes)if(r.indexOf(o)!==-1)if(i){e=!1;break}else i=!0;if(!e)break}return e}function MT(t,e,n=console.log){let r="";for(let s=0;s<t.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=t[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);n(r)}function kPt(t,e,n){let r,s;try{s=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{s="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const i=t.name,o=t.getClassName(),a=[`${i} (${o})`,s,r,t.countParams().toString()];MT(a,e,n)}function EPt(t,e,n,r){let s,i;try{i=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{i="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const o=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let h=0;h<d.inboundLayers.length;++h){const p=d.inboundLayers[h].name,m=d.nodeIndices[h],g=d.tensorIndices[h];o.push(`${p}[${m}][${g}]`)}const a=t.name,l=t.getClassName(),c=o.length===0?"":o[0],u=[`${a} (${l})`,i,s,t.countParams().toString(),c];MT(u,e,r);for(let d=1;d<o.length;++d)MT(["","","","",o[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function abe(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function gF(t,e){if(t===null)return null;if(typeof t=="string")return mh(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];abe(e,s,i)?n.push(i):n.push(gF(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r];if(r==="name"&&typeof s=="string")n[r]=s;else{const i=mh(r);n[i]=gF(s,i)}}return n}}function yF(t,e){if(t==null)return null;if(typeof t=="string")return eu(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];abe(e,s,i)?n.push(i):n.push(yF(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r],i=eu(r);(r==="name"||r==="className")&&typeof s=="string"?n[i]=s:n[i]=yF(s,r)}return n}}/** @license See the LICENSE file. */const lbe="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const $Pt=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Ga extends Wt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const x=this.getClassName().toLowerCase();this.name=jA(x)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Xd(this.inputs).length!==this.inputs.length)throw new H(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(x=>x.name)}`);Xd(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(x=>x.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const x of this.outputs){const b=x.sourceLayer,S=x.nodeIndex,w=x.tensorIndex;this.outputLayers.push(b),this.outputLayersNodeIndices.push(S),this.outputLayersTensorIndices.push(w)}for(const x of this.inputs){const b=x.sourceLayer,S=x.nodeIndex,w=x.tensorIndex;Kl(S===0,"input layer has >1 nodes"),Kl(w===0,"input layer has >1 tensors"),this.inputLayers.push(b),this.inputLayersNodeIndices.push(S),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let x=0;x<this.inputLayers.length;x++){const b=this.inputLayers[x];if(!(b instanceof AS))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${x} (0-based) originates from layer type ${b.getClassName()}.`);this.inputNames.push(b.name),this.feedInputShapes.push(b.batchInputShape),this.feedInputNames.push(b.name)}for(const x of this.outputLayers)this.outputNames.push(x.name);this.internalInputShapes=this.inputs.map(x=>x.shape),this.internalOutputShapes=this.outputs.map(x=>x.shape);const n={},r={},s={},i={},o={},a=[],l=(x,b,S,w,C,_)=>{(w==null||C==null||_==null)&&(w=x.sourceLayer,C=x.nodeIndex,_=x.tensorIndex);const T=w.inboundNodes[C];if(S.indexOf(T)!==-1)throw new ya(`The tensor ${x.name} at layer "${w.name}" is part of a cycle.`);if(b.indexOf(T)!==-1)return;this.containerNodes.add(Ga.nodeKey(w,C)),w.id in o||(o[w.id]=Object.keys(o).length),S.indexOf(T)===-1&&S.push(T);const k=T.inboundLayers.length;for(let $=0;$<k;$++){const O=T.inputTensors[$],P=T.inboundLayers[$],D=T.nodeIndices[$],A=T.tensorIndices[$];l(O,b,S,P,D,A)}for(b.push(T);S.indexOf(T)>=0;)S.splice(S.indexOf(T),1);a.push(T)},c=[],u=[];for(const x of this.outputs)l(x,c,u);const d=a.slice().reverse();for(const x of d){r[x.id]=x,x.id in n||(n[x.id]=0);let b=n[x.id];const S=s[x.outboundLayer.id]==null?0:s[x.outboundLayer.id];b=Math.max(b,S),s[x.outboundLayer.id]=b,i[x.outboundLayer.id]=x.outboundLayer,n[x.id]=b;for(let w=0;w<x.inboundLayers.length;w++){const C=x.inboundLayers[w],_=x.nodeIndices[w],T=C.inboundNodes[_],k=n[T.id]==null?0:n[T.id];n[T.id]=Math.max(b+1,k),r[T.id]=T}}const h={};for(const x in n){const b=n[x];b in h||(h[b]=[]),h[b].push(r[x])}const p={};for(const x in s){const b=s[x];b in p||(p[b]=[]),p[b].push(i[x])}let m=Object.keys(p).map(x=>parseInt(x,10)).sort(qC);this.layers=[];for(const x of m){const b=p[x];b.sort((S,w)=>{const C=o[S.id],_=o[w.id];return C<_?-1:C>_?1:0});for(const S of b)S instanceof Ga&&this.internalContainerRefs.push(S),this.layers.push(S)}this.layersByDepth=p,m=Object.keys(h).map(x=>parseInt(x,10)).sort(qC);const g=this.inputs.slice(),y=[];for(const x of m)for(const b of h[x]){const S=b.outboundLayer;if(S!=null){for(const w of b.inputTensors)if(g.indexOf(w)===-1)throw new ya(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${S.name}". The following previous layers were accessed without issue: ${y}`);for(const w of b.outputTensors)g.push(w);y.push(S.name)}}this.nodesByDepth=h;const v=this.layers.map(x=>x.name);for(const x of v){const b=v.filter(S=>S===x).length;if(b!==1)throw new ya(`The name "${x}" is used ${b} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(v))}this.outboundNodes=[],this.inboundNodes=[],new FA({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(x=>null),outputMasks:this.outputs.map(x=>null),inputShapes:this.inputs.map(x=>x.shape),outputShapes:this.outputs.map(x=>x.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new H("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let s=0;const i=$Pt(e);i&&this.parseWeights(e);for(const a of this.layers)for(const[l,c]of a.weights.entries()){const u=i?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new H(`Duplicate weight name: ${u}`);r[u]=c,s++}const o=[];for(const a in e){let l=a;if(r[a]==null){const c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)o.push([r[l],e[a]]);else if(n)throw new H(`Provided weight data has no target variable: ${a}`);delete r[l]}if(n){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new H(`${a.length} of ${s} weights are not set: ${a}`)}Y5(o)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),s=["vars","layer_checkpoint_dependencies"],i=r.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!s.includes(o)).join("/");i!==n&&(e[i]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${lbe}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=yF(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return re(()=>{e=gn(e);const r=new Od;for(let s=0;s<this.inputs.length;++s)r.add(this.inputs[s],e[s]);return e0(this.outputs,r,n)})}computeMask(e,n){return re(()=>{e=gn(e);let r;return n==null?r=Tp(null,e.length):r=gn(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=$T(e);if(n.length!==this.inputLayers.length)throw new H(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],c=n[a],u=l.name+"_0_0";r[u]=c}const s=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(qC);if(s.length>1)for(const a of s){const l=this.nodesByDepth[a];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(g=>g.id).indexOf(u.id)!==-1)continue;const d=[];for(let g=0;g<c.inboundLayers.length;g++){const y=c.inboundLayers[g],v=c.nodeIndices[g],x=c.tensorIndices[g],b=`${y.name}_${v}_${x}`,S=r[b];d.push(S)}const h=u.computeOutputShape(Si(d)),p=$T(h),m=u.inboundNodes.indexOf(c);for(let g=0;g<p.length;g++){const y=`${u.name}_${m}_${g}`;r[y]=p[g]}}}const i=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],d=`${l.name}_${c}_${u}`;o.push(d)}for(let a=0;a<o.length;a++){const l=o[a];Kl(l in r),i.push(r[l])}return Si(i)}runInternalGraph(e,n){n==null&&(n=Tp(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],d=n[l];r[c.id]=[u,d]}const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(qC);for(const l of s){const c=this.nodesByDepth[l];for(const u of c){const d=u.outboundLayer,h=u.inputTensors,p=u.outputTensors,m=new Array;for(const g of h)g.id in r&&m.push(r[g.id]);if(m.length===h.length){let g={},y,v,x,b;if(u.callArgs!=null&&(g=u.callArgs),m.length===1){const[S,w]=m[0];g.mask==null&&(g.mask=w),x=gn(d.call(S,g)),b=gn(d.computeMask(S,w)),y=[S],v=[w]}else y=m.map(S=>S[0]),v=m.map(S=>S[1]),g.mask==null&&(g.mask=v),x=gn(d.call(y,g)),b=gn(d.computeMask(y,v));if(d.activityRegularizer)throw new Dt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let S=0;S<p.length;++S){const w=p[S],C=x[S],_=b[S];r[w.id]=[C,_]}}}}const i=[],o=[],a=[];for(const l of this.outputs){Kl(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=r[l.id];a.push(c.shape),i.push(c),o.push(u)}return[i,o,a]}buildNodeConversionMap(e){const n={};let r;for(const s of this.layers){r=s instanceof Ga?1:0;for(let i=0;i<s.inboundNodes.length;i++){const o=Ga.nodeKey(s,i);this.containerNodes.has(o)&&(n[o]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new H("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new H(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new H(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return re(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const s=Ga.nodeKey(n,r);this.containerNodes.has(s)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const a=o.getClassName(),l=o.getConfig(),c=[];for(let d=0;d<o.inboundNodes.length;d++){const h=o.inboundNodes[d],p=Ga.nodeKey(o,d);let m={};if(this.containerNodes.has(p)){if(h.callArgs)try{JSON.stringify(h.callArgs),m=h.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${h.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),m={}}if(h.inboundLayers.length>0){const g=[];for(let y=0;y<h.inboundLayers.length;y++){const v=h.inboundLayers[y],x=h.nodeIndices[y],b=h.tensorIndices[y],S=Ga.nodeKey(v,x);let w=n[S];w==null&&(w=0),g.push([v.name,w,b,m])}c.push(g)}}}const u={};u.name=o.name,u.className=a,u.config=l,u.inboundNodes=c,r.push(u)}e.layers=r;const s=[];for(let o=0;o<this.inputLayers.length;o++){const a=this.inputLayers[o],l=this.inputLayersNodeIndices[o],c=Ga.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.inputLayersTensorIndices[o];s.push([a.name,u,d])}e.inputLayers=s;const i=[];for(let o=0;o<this.outputLayers.length;o++){const a=this.outputLayers[o],l=this.outputLayersNodeIndices[o],c=Ga.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.outputLayersTensorIndices[o];i.push([a.name,u,d])}return e.outputLayers=i,e}static fromConfig(e,n,r={},s=!1){const i={},o={};function a(y,v){y.name in o?o[y.name].push(v):o[y.name]=[v]}function l(y,v){const x=[];let b;for(const S of v){const w=S[0],C=S[1],_=S[2];if(b=S[3]==null?{}:S[3],!(w in i)){a(y,v);return}const T=i[w];if(T.inboundNodes.length<=C){a(y,v);return}const k=T.inboundNodes[C];x.push(k.outputTensors[_])}x.length>0&&y.apply(Si(x),b)}function c(y){const v=y.name,x=bu(y,n.customObjects!=null?n.customObjects:{});x.setFastWeightInitDuringBuild(s),i[v]=x,y.inboundNodes.forEach(S=>{if(!(S instanceof Array))throw new H(`Corrupted configuration, expected array for nodeData: ${S}`);a(x,S)})}const u=n.name,d=n.layers;for(const y of d)c(y);for(;!hOt(o);)for(const y of d){const v=i[y.name];if(v.name in o){const x=o[v.name];delete o[v.name];for(const b of x)l(v,b)}}const h=[],p=[],m=n.inputLayers;for(const y of m){const v=y[0],x=y[1],b=y[2];Kl(v in i);const w=i[v].inboundNodes[x].outputTensors;h.push(w[b])}const g=n.outputLayers;for(const y of g){const v=y[0],x=y[1],b=y[2];Kl(v in i);const w=i[v].inboundNodes[x].outputTensors;p.push(w[b])}return new e({inputs:h,outputs:p,name:u})}get stateful(){if(this._stateful)throw new H("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){re(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function APt(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const s=[];return e.forEach(i=>{i in t?s.push(t[i]):s.push(null)}),s}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function cbe(t,e){return APt(t,e,"classWeight")}async function ube(t,e,n,r){if(n!=null){const s=re(()=>{if(t.shape.length===1)return Kh(t);if(t.shape.length===2){if(t.shape[1]>1)return c1(t,1);if(t.shape[1]===1)return Z(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await s.data());Ut(s);const o=[];return i.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);o.push(n[a])}),Qi(o,"float32")}else return null}function IPt(t,e){return K(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const OPt=32;function dbe(t,e){let n,r;const s=e;n=s.xs,r=s.ys,L(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const i=NX("input",t.inputNames,n),o=NX("output",t.outputNames,r),a=i[0].shape[0];L(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),L(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<i.length;l++)L(i[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)L(o[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:i,ys:o}}function NX(t,e,n){if(n instanceof Br)return[n];if(Array.isArray(n))return L(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const s of e){if(n[s]==null)throw new H(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);r.push(n[s])}return r}}function PPt(t){if(t.length===3)throw new Dt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function RPt(t,e,n){const r=n.batchesPerEpoch!=null;if(L(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),L(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),L(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),L(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),L(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=n.validationData!=null;let i,o;if(s)if(_X(n.validationData))L(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const y=PPt(n.validationData);i=y.xs,o=y.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;s?c=l.slice().concat(l.map(y=>"val_"+y)):c=l.slice();const u=ebe(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:h,history:p}=tbe(u,d,n.epochs,null,null,DPt(e,n),null,s,c);h.setModel(t),t.history=p,await h.onTrainBegin(),t.stopTraining_=!1;let m=n.initialEpoch==null?0:n.initialEpoch,g=await e.iterator();for(;m<n.epochs;){const y={};await h.onEpochBegin(m);let v=0,x=0;for(r||(g=await e.iterator());!r||v<n.batchesPerEpoch;){const b=await g.next();if(r&&b.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${v} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(b.value!=null){const{xs:S,ys:w}=dbe(t,b.value),C={};C.batch=x,C.size=S[0].shape[0],await h.onBatchBegin(x,C);const _=[];if(n.classWeight!=null){const $=cbe(n.classWeight,t.outputNames);for(let O=0;O<$.length;++O)_.push(await ube(w[O],null,$[O]))}const T=S.concat(w).concat(_),k=a(T);Ut(T);for(let $=0;$<l.length;++$){const O=l[$],P=k[$];C[O]=P,gc(P)}await h.onBatchEnd(x,C),J0e(C),x++,v++}if(r?v>=n.batchesPerEpoch:b.done){if(s){let S;_X(n.validationData)?S=gn(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):S=gn(t.evaluate(i,o,{batchSize:n.validationBatchSize==null?OPt:n.validationBatchSize,verbose:0}));for(let w=0;w<t.metricsNames.length;++w)y[`val_${t.metricsNames[w]}`]=S[w]}break}if(t.stopTraining_)break}if(await h.onEpochEnd(m,y),m++,t.stopTraining_)break}return await h.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function DPt(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function _X(t){return typeof t.iterator=="function"}function jPt(t){return typeof t.next=="function"}async function MPt(t,e,n){n=n||{};const r=n.batches!=null,s=t.testFunction;let i=[];if(n.verbose>0)throw new Dt("Verbose mode is not implemented yet.");L(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const o=jPt(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const c=await o.next();if(i=re(()=>{if(c.value){const{xs:u,ys:d}=dbe(t,c.value),h=u.concat(d),p=re(()=>s(h));if(Ut(h),l===0)for(let g=0;g<p.length;++g)i.push(an(0));const m=h[0].shape[0];for(let g=0;g<p.length;++g){const y=p[g],v=i[g];i[g]=re(()=>Ce(i[g],K(m,y))),l>0&&Ut(v)}Ut(p),a+=m,++l}return i}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<i.length;++c){const u=i[c];i[c]=lt(i[c],a),Ut(u)}return Si(i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _P(t){L(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Dx(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>Yh(r,e,n-e)):Yh(t,e,n-e)}function vF(t,e){return re(()=>t==null?null:Array.isArray(t)?t.map(n=>vF(n,e)):L0e(t,e.dtype==="int32"?e:Be(e,"int32")))}function TP(t,e){const n=[];let r=0,s=null;for(;r<t;)s=r+e,s>=t&&(s=t),n.push([r,s]),r=s;return n}function fbe(t){const e=[];t instanceof Br&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(kS(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Va(t,e){if(t==null)return;const n=[];if(e instanceof Br)n.push(e.id);else if(Array.isArray(e))e.forEach(s=>n.push(s.id));else if(e!=null)for(const s in e){const i=e[s];n.push(i.id)}const r=[];if(t instanceof Br)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(s=>{n.indexOf(s.id)===-1&&r.push(s)});else if(t!=null)for(const s in t){const i=t[s];n.indexOf(i.id)===-1&&r.push(i)}r.forEach(s=>{s.isDisposed||s.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function FPt(t){return t instanceof Br}function xF(t){return Array.isArray(t)}function TX(t){return!FPt(t)&&!xF(t)}function kX(t,e,n,r=!0,s=""){if(e==null||e.length===0){if(t!=null){let o=!1;if(xF(t)&&t.length>0)o=!0;else if(TX(t)){for(const a in t)if(t.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new H(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(o=>null);let i;if(TX(t)){t=t,i=[];for(const o of e){if(t[o]==null)throw new H(`No data provided for "${o}". Need data for each key in: ${e}`);i.push(t[o])}}else if(xF(t)){if(t=t,t.length!==e.length)throw new H(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,e.length>1)throw new H(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=fbe(i),n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=i[o];if(a.shape.length!==n[o].length)throw new H(`Error when checking ${s}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[o][l];if(u!=null&&u>=0&&c!==u)throw new H(`${s} expected a batch of elements where each example has shape [${n[o].slice(1,n[o].length)}] (i.e.,tensor shape [*,${n[o].slice(1,n[o].length)}]) but the ${s} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return i}function LPt(t,e,n){const r=Xd(t.map(i=>i.shape[0]));r.sort();const s=Xd(e.map(i=>i.shape[0]));if(s.sort(),r.length>1)throw new H(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(s.length>1)throw new H(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(i=>i.shape))}`);if(r.length>0&&s.length>0&&!cn(r,s))throw new H(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${s[0]} target sample(s).`)}function BPt(t,e,n){const r=[LA,BA,m1];for(let s=0;s<t.length;++s){const i=t[s],o=e[s],a=n[s];if(o!=null){if(o===m1&&i.shape[i.shape.length-1]===1)throw new H(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const l=i.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){const d=l[u],h=c[u];if(h!=null&&d!==h)throw new H(`A target Tensor with shape ${i.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function EX(t,e,n,r=!0,s=""){let i;if(Array.isArray(t)){if(t.length!==e.length)throw new H(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(e.length>1)throw new H(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=i[o];if(a.shape.length!==n[o].length)throw new H(`Error when checking ${s}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[o][l];if(u!=null&&u!==c)throw new H(`Error when checking ${s}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function zPt(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const s of e){let i=n.hasOwnProperty(s)?n[s]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}const VPt="layers-model";class wg extends Ga{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new H("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");NPt(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=CPt(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof zf))throw new H("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new H(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),n.push(NP(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new H(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>NP(a))}else{const o=NP(e.loss);this.outputs.forEach(a=>{n.push(o)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const a=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Xh("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([a,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const s=zPt(e.metrics,this.outputNames),i=(o,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[o]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,o])};Xh("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=s[o];(c=>{const u="";let d,h,p;for(const m of c){if(typeof m=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(m)!==-1){const y=this.internalOutputShapes[o];y[y.length-1]===1||this.lossFunctions[o]===BA?["accuracy","acc"].indexOf(m)!==-1?h=rbe:["crossentropy","ce"].indexOf(m)!==-1&&(h=hPt):this.lossFunctions[o]===RT?["accuracy","acc"].indexOf(m)!==-1?h=pPt:["crossentropy","ce"].indexOf(m)!==-1&&(h=obe):["accuracy","acc"].indexOf(m)!==-1?h=sbe:["crossentropy","ce"].indexOf(m)!==-1&&(h=ibe);let v;["accuracy","acc"].indexOf(m)!==-1?v="acc":["crossentropy","ce"].indexOf(m)!==-1&&(v="ce"),p=h,d=u+v}else p=SPt(m),d=u+YC(m);let g;Xh(d,()=>{g=p}),i(o,d,g)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const s=r.batchSize==null?32:r.batchSize;_P(s);const o=this.standardizeUserDataXY(e,n,!0,s);try{const a=o[0].concat(o[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,a,s,r.verbose,r.steps);return Si(c)}finally{Va(o[0],e),Va(o[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),MPt(this,e,n)}checkNumSamples(e,n,r,s="steps"){let i;if(r!=null){if(i=null,n!=null)throw new H(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new H(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return i}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new H("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),s=r?n:[n],i=this.retrieveSymbolicTensors(s),o=new Od;if(e instanceof Br&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new H(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new H(`No value is provided for the model's input ${l.name}`);o.add(l,c)}const a=e0(i,o);return r?a:a[0]}retrieveSymbolicTensors(e){const n=Tp(null,e.length);let r=e.length;for(const s of this.layers){const i=Array.isArray(s.output)?s.output:[s.output],o=i.map(a=>a.name);for(let a=0;a<e.length;++a){const l=o.indexOf(e[a]);if(l!==-1&&(n[a]=i[l],r--),r===0)break}if(r===0)break}if(r>0){const s=[];throw n.forEach((i,o)=>{i==null&&s.push(e[o])}),new H(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return n}predictLoop(e,n=32,r=!1){return re(()=>{const s=this.checkNumSamples(e);if(r)throw new Dt("Verbose predictLoop() is not implemented yet.");const i=TP(s,n),o=this.outputs.map(a=>[]);for(let a=0;a<i.length;++a)re(()=>{const c=i[a][0],u=i[a][1],d=Dx(e,c,u),h=[];if(Array.isArray(d))for(let m=0;m<d.length;++m)h.push({key:this.inputs[m],value:d[m]});else h.push({key:this.inputs[0],value:d});const p=new Od(h);return e0(this.outputs,p)}).forEach((c,u)=>o[u].push(c));return Si(o.map(a=>Ai(a,0)))})}predict(e,n={}){const r=fbe(e);EX(r,this.inputNames,this.feedInputShapes,!1);try{const s=n.batchSize==null?32:n.batchSize;return _P(s),this.predictLoop(r,s)}finally{Va(r,e)}}predictOnBatch(e){EX(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,s){if(this.optimizer_==null)throw new ya("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let o=0;o<this.feedOutputShapes.length;++o){const a=this.feedOutputShapes[o];this.feedLossFns[o]===RT?i.push(a.slice(0,a.length-1).concat([1])):i.push(a)}if(e=kX(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=kX(n,this.feedOutputNames,i,!1,"target"),LPt(e,n),BPt(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new H(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,s,i=!0,o){const[a,l]=this.standardizeUserDataXY(e,n,i,o);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(s!=null){const u=cbe(s,this.outputNames);c=[];for(let d=0;d<u.length;++d)c.push(await ube(l[d],null,u[d]))}return[a,l,c]}testLoop(e,n,r,s=0,i){return re(()=>{const o=this.checkNumSamples(n,r,i,"steps"),a=[];if(s>0)throw new Dt("Verbose mode is not implemented yet.");if(i!=null)throw new Dt("steps mode in testLoop() is not implemented yet");{const l=TP(o,r),c=Qi(Tl(0,o));for(let u=0;u<l.length;++u){const d=l[u][0],h=l[u][1],p=Yh(c,d,h-d),m=vF(n,p),g=e(m);if(u===0)for(let y=0;y<g.length;++y)a.push(an(0));for(let y=0;y<g.length;++y){const v=g[y];a[y]=Ce(a[y],K(h-d,v))}}for(let u=0;u<a.length;++u)a[u]=lt(a[u],o)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const s=e[r];let i=s;if(fX(e,s)>1){const o=fX(e.slice(0,r),s);i+=`_${o}`}n.push(i)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],a=()=>{const d=[];for(let g=0;g<this.inputs.length;++g)d.push({key:this.inputs[g],value:r[g]});const h=new Od(d),p=e0(this.outputs,h,{training:!0});let m;for(let g=0;g<this.lossFunctions.length;++g){const y=this.lossFunctions[g];let v=y(s[g],p[g]);i[g]!=null&&(v=IPt(v,i[g]));const x=Dr(v);n.push(x),g===0?m=v:m=Ce(m,v)}for(let g=0;g<this.metricsTensors.length;++g){let y;if(this.outputs.length>1&&g<this.outputs.length)y=n[g];else{const v=this.metricsTensors[g][0],x=this.metricsTensors[g][1];y=Dr(v(s[x],p[x]))}gc(y),o.push(y)}return m=Dr(m),this.calculateLosses().forEach(g=>{m=Ce(m,g)}),m},l=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(a,!0,l)].concat(o)}}makeTestFunction(){this.testFunction=e=>re(()=>{const n=[];let r;const s=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let c=0;c<this.inputs.length;++c)o.push({key:this.inputs[c],value:s[c]});const a=new Od(o),l=e0(this.outputs,a);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],d=Dr(u(i[c],l[c]));c===0?r=d:r=Ce(r,d),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],d=this.metricsTensors[c][1],h=Dr(u(i[d],l[d]));n.push(h)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,i,o,a,l,c,u,d,h;try{const p=r.batchSize==null?32:r.batchSize;_P(p);const g=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,p);s=g[0],i=g[1],h=g[2];let y=!1,v;if(r.validationData!=null&&r.validationData.length>0){if(y=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new Dt("validationData including sample weights is not supported yet."):new H(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const $=await this.standardizeUserData(l,c,null,null,!0,p);u=$[0],d=$[1],v=u.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){y=!0;const k=Math.floor(s[0].shape[0]*(1-r.validationSplit)),$=s[0].shape[0];u=Dx(s,k,$),o=s,s=Dx(s,0,k),d=Dx(i,k,$),a=i,i=Dx(i,0,k),v=u.concat(d)}else r.validationSteps!=null&&(y=!0);const x=s.concat(i).concat(h);this.checkTrainableWeightsConsistency();const b=this.makeTrainFunction(),S=this.getDedupedMetricsNames();let w,C;y?(this.makeTestFunction(),w=this.testFunction,C=S.slice().concat(S.map(k=>"val_"+k))):(w=null,v=[],C=S.slice());const _=ebe(r.callbacks,r.yieldEvery);return await this.fitLoop(b,x,S,p,r.epochs,r.verbose,_,w,v,r.shuffle,C,r.initialEpoch,null,null)}finally{this.isTraining=!1,Va(s,e),Va(i,n),Va(o,e),Va(a,n),Va(u,l),Va(d,c),h!=null&&Ut(h)}}async fitLoop(e,n,r,s,i,o,a,l,c,u,d,h,p,m){s==null&&(s=32),i==null&&(i=1),u==null&&(u=!0),h==null&&(h=0);let g=!1;if(l!=null&&c!=null&&(g=!0),m!=null&&(g=!0,p==null))throw new H("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const y=this.checkNumSamples(n,s,p,"steps_per_epoch");let v;y!=null&&(v=Tl(0,y)),o==null&&(o=1);const{callbackList:x,history:b}=tbe(a,o,i,h,y,p,s,g,d);x.setModel(this),this.history=b,await x.onTrainBegin(),this.stopTraining_=!1;for(let S=h;S<i;++S){await x.onEpochBegin(S);const w={};if(p!=null)throw new Dt("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new Dt("batch shuffling is not implemneted yet");u&&k2t(v);const C=Qi(v),_=TP(y,s);for(let T=0;T<_.length;++T){const k={};if(await x.onBatchBegin(T,k),re(()=>{const $=_[T][0],O=_[T][1],P=Yh(C,$,O-$);k.batch=T,k.size=O-$;const D=vF(n,P),A=e(D);for(let I=0;I<r.length;++I){const R=r[I],M=A[I];k[R]=M,gc(M)}if(T===_.length-1&&g){const I=this.testLoop(l,c,s);for(let R=0;R<r.length;++R){const M=r[R],E=I[R];gc(E),w["val_"+M]=E}}}),await x.onBatchEnd(T,k),J0e(k),this.stopTraining_)break}C.dispose()}if(await x.onEpochEnd(S,w),this.stopTraining_)break}return await x.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return RPt(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),s=r[0],i=r[1],a=this.makeTrainFunction()(s.concat(i)),l=[];for(const c of a){const u=await c.data();l.push(u[0])}return Ut(a),Va(r[0],e),Va(r[1],n),Si(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,s=r?this.trainableWeights:this.weights,i=this.getWeights(r);for(let o=0;o<s.length;++o)r&&!s[o].trainable||n.push({name:s[o].originalName,tensor:i[o]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=KK().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-KK().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=eu(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>eu(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const s of n)if(typeof r[s]=="string")e[s]=eu(r[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[eu(YC(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>eu(YC(e)));{const e={};for(const n in this.metrics)e[n]=eu(YC(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=gF(e.optimizer_config),r=bu(n);let s;if(typeof e.loss=="string")s=mh(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(o=>mh(o));else if(e.loss!=null){s={};for(const o in e.loss)s[o]=mh(e.loss[o])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(o=>mh(o));else if(e.metrics!=null){i={};for(const o in e.metrics)i[o]=mh(e.metrics[o])}this.compile({loss:s,metrics:i,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=SNt(e);if(c.length===0)throw new H(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new H(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new H("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await YK(this.getNamedWeights(n)),a={modelTopology:this.toJSON(null,!1),format:VPt,generatedBy:`TensorFlow.js tfjs-layers v${lbe}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:d}=await YK(await this.optimizer.getWeights(),c);r.specs.push(...d),r.data=wNt([r.data,u])}return this.userDefinedMetadata!=null&&(CX(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){CX(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}wg.className="Model";xe(wg);class hbe extends wg{}hbe.className="Functional";xe(hbe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Wy extends wg{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:jA("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new H(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Wy||e instanceof wg;let r;if(n){if(r=e,r.outputs.length!==1)throw new H("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new H("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new H("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=UOt({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new H(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new H("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=K0e(this.outputs[0])}this.inboundNodes=[],new FA({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Tp(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(tn(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new wg({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new ya("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new ya("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new ya("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new ya("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},s=!1){let i,o={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new H("Legacy serialization format not supported yet.");i=n}else L(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=n.layers,delete n.layers,o=n;const a=new e(o);if(!(a instanceof Wy))throw new Dt(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of i){const u=bu(l,void 0,s);s&&u.setFastWeightInitDuringBuild(!0),a.add(u)}return a}set stopTraining(e){if(this.model==null)throw new H("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new H("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Wy.className="Sequential";xe(Wy);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pbe(t){return new Wy(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Ls=class extends qv{getConfig(){return{}}};class mbe extends Ls{apply(e,n=1){return EOt(e,n)}}mbe.className="elu";xe(mbe);class gbe extends Ls{apply(e){return Oxe(e)}}gbe.className="selu";xe(gbe);class ybe extends Ls{apply(e){return Jp(e)}}ybe.className="relu";xe(ybe);class vbe extends Ls{apply(e){return re(()=>f1(6,Jp(e)))}}vbe.className="relu6";xe(vbe);class xbe extends Ls{apply(e){return e}}xbe.className="linear";xe(xbe);class bbe extends Ls{apply(e){return Uv(e)}}bbe.className="sigmoid";xe(bbe);class wbe extends Ls{apply(e){return AOt(e)}}wbe.className="hardSigmoid";xe(wbe);class Sbe extends Ls{apply(e){return xS(e)}}Sbe.className="softplus";xe(Sbe);class Cbe extends Ls{apply(e){return $Ot(e)}}Cbe.className="softsign";xe(Cbe);class Nbe extends Ls{apply(e){return TA(e)}}Nbe.className="tanh";xe(Nbe);let e6=class extends Ls{apply(e,n=-1){return r5(e,n)}};e6.className="softmax";xe(e6);class _be extends Ls{apply(e,n=-1){return Cxe(e,n)}}_be.className="logSoftmax";xe(_be);class Tbe extends Ls{apply(e){return re(()=>re(()=>{const n=Math.sqrt(2),r=K(.5,Ce(1,vxe(lt(e,n))));return K(e,r)}))}}Tbe.className="gelu";xe(Tbe);class kbe extends Ls{apply(e){return re(()=>K(.5,K(e,Ce(1,TA(K(Ms(lt(2,Math.PI)),Ce(e,K(.044715,Cp(e,3)))))))))}}kbe.className="gelu_new";xe(kbe);class Ebe extends Ls{apply(e){return re(()=>K(e,TA(xS(e))))}}Ebe.className="mish";xe(Ebe);class $be extends Ls{apply(e,n=1){return re(()=>K(Uv(K(e,n)),e))}}$be.className="swish";xe($be);function mf(t){return t.getClassName()}function kP(t,e={}){return TS(t,ua.getMap().classNameMap,e,"activation")}function gf(t){if(t==null){const e={};return e.className="linear",e.config={},kP(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},kP(e)}else return t instanceof Ls?t:kP(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function WPt(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class Abe extends qv{}class Ibe extends Abe{constructor(e){super(),WPt(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return re(()=>{let n=ns([1]);return this.hasL1&&(n=Ce(n,it(K(this.l1,Ys(e))))),this.hasL2&&(n=Ce(n,it(K(this.l2,ES(e))))),Z(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}Ibe.className="L1L2";xe(Ibe);const $X={l1l2:"L1L2"};function kn(t){return B5(t)}function AX(t,e={}){return TS(t,ua.getMap().classNameMap,e,"regularizer")}function er(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in $X?$X[t]:t,config:{}};return AX(n)}else return t instanceof Abe?t:AX(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Obe extends Wt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=xt(e);let r=Jp(e);return this.maxValue!=null&&(r=Fo(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}Obe.className="ReLU";xe(Obe);class Pbe extends Wt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=xt(e);return zV(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}Pbe.className="LeakyReLU";xe(Pbe);class Rbe extends Wt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Zn(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=er(e.alphaRegularizer),this.alphaConstraint=Kr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new H(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=tn(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)n[s-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)r[s]=e[s];this.inputSpec=[new Gr({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=xt(e),qV(e,this.alpha.read())}getConfig(){const e={alphaInitializer:or(this.alphaInitializer),alphaRegularizer:kn(this.alphaRegularizer),alphaConstraint:qr(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}Rbe.className="PReLU";xe(Rbe);let Dbe=class extends Wt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Dt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=xt(e);return $A(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};Dbe.className="ELU";xe(Dbe);class jbe extends Wt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=xt(e);return K(r,Be(Vo(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}jbe.className="ThresholdedReLU";xe(jbe);class Mbe extends Wt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new e6().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return re(()=>{let r=xt(e);const s=n.mask;if(s!=null){const i=K(gt(Bf(r.shape),Be(s,r.dtype)),an(-1e9));r=Ce(r,i)}return this.axis instanceof Array?this.axis.length>1?Ic(gt(r,Nxe(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}Mbe.className="Softmax";xe(Mbe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Sg(t,e,n){if(typeof t=="number")return Tp(t,e);if(t.length!==e)throw new H(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const s=t[r];if(!NOt(s))throw new H(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${s}`)}return t}function yl(t,e,n,r,s=1){if(t==null)return t;const i=e+(e-1)*(s-1);let o;return n==="same"?o=t:o=t-i+1,Math.floor((o+r-1)/r)}function Xl(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+pf([n-e,0]);else if(r==="same")t=t*e;else throw new H(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function t6(t,e){return re(()=>($r(e),e==="channelsFirst"?Qt(t,[0,2,3,1]):t))}function Fbe(t,e){return re(()=>($r(e),e==="channelsFirst"?Qt(t,[0,2,3,4,1]):t))}function UPt(t,e,n,r=1,s="valid",i,o=1){return re(()=>{if(i==null&&(i=kl()),$r(i),t.shape.length!==3)throw new H(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new H(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new H(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(i==="channelsFirst"&&(t=Qt(t,[0,2,1])),s==="causal")throw new Dt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=hxe(t,e,r,s==="same"?"same":"valid","NWC",o);return n!=null&&(a=Dl(a,n)),a})}function IX(t,e,n,r=[1,1],s="valid",i,o,a=null){return re(()=>{if(i==null&&(i=kl()),$r(i),t.rank!==3&&t.rank!==4)throw new H(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new H(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=t6(t,i);if(s==="causal")throw new Dt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=JEt({x:l,filter:e,strides:r,pad:s==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:a}),i==="channelsFirst"&&(l=Qt(l,[0,3,1,2])),l})}function GPt(t,e,n,r=[1,1,1],s="valid",i,o){return re(()=>{if(i==null&&(i=kl()),$r(i),t.rank!==4&&t.rank!==5)throw new H(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new H(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=Fbe(t,i);if(s==="causal")throw new Dt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=Z_t(a,e,r,s==="same"?"same":"valid","NDHWC",o),n!=null&&(a=Dl(a,n)),i==="channelsFirst"&&(a=Qt(a,[0,4,1,2,3])),a})}class zA extends Wt{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",zA.verifyArgs(n),this.rank=e,as(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Dt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Sg(n.kernelSize,e,"kernelSize"),this.strides=Sg(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,Wo(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,$r(this.dataFormat),this.activation=gf(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Zn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Kr(n.biasConstraint),this.biasRegularizer=er(n.biasRegularizer),this.activityRegularizer=er(n.activityRegularizer),this.dilationRate=Sg(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new H(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new H(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new H(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Kl("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!z5(e.kernelSize,"number",1,3))throw new H(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:mf(this.activation),useBias:this.useBias,biasInitializer:or(this.biasInitializer),biasRegularizer:kn(this.biasRegularizer),activityRegularizer:kn(this.activityRegularizer),biasConstraint:qr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Kv extends zA{constructor(e,n){super(e,n),this.kernel=null,Kv.verifyArgs(n),this.filters=n.filters,as(this.filters,"filters"),this.kernelInitializer=Zn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Kr(n.kernelConstraint),this.kernelRegularizer=er(n.kernelRegularizer)}build(e){e=tn(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new H(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],s=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return re(()=>{e=xt(e);let r;const s=this.bias==null?null:this.bias.read(),i=P0e(this.activation.getClassName());if(i!=null&&this.rank===2)r=IX(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)r=UPt(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=IX(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=GPt(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Dt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=tn(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<r.length;++i){const o=yl(r[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);n.push(o)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(n),s.push(this.filters)):(s.push(this.filters),s=s.concat(n)),s}getConfig(){const e={filters:this.filters,kernelInitializer:or(this.kernelInitializer),kernelRegularizer:kn(this.kernelRegularizer),kernelConstraint:qr(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new H(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class OS extends Kv{constructor(e){super(2,e),OS.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!z5(e.kernelSize,"number",1,2))throw new H(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}OS.className="Conv2D";xe(OS);class PS extends Kv{constructor(e){super(3,e),PS.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new H(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}PS.className="Conv3D";xe(PS);class Lbe extends OS{constructor(e){if(super(e),this.inputSpec=[new Gr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new H(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=tn(e),e.length!==4)throw new H("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new H("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Gr({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return re(()=>{let r=xt(e);if(r.shape.length!==4)throw new H(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let o,a;this.dataFormat==="channelsFirst"?(o=2,a=3):(o=1,a=2);const l=s[o],c=s[a],u=this.kernelSize[0],d=this.kernelSize[1],h=this.strides[0],p=this.strides[1],m=Xl(l,h,u,this.padding),g=Xl(c,p,d,this.padding),y=[i,m,g,this.filters];this.dataFormat!=="channelsLast"&&(r=Qt(r,[0,2,3,1]));let v=pxe(r,this.kernel.read(),y,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(v=Qt(v,[0,3,1,2])),this.bias!=null&&(v=Dl(v,this.bias.read(),this.dataFormat)),this.activation!=null&&(v=this.activation.apply(v)),v})}computeOutputShape(e){e=tn(e);const n=e.slice();let r,s,i;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3):(r=3,s=1,i=2);const o=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[s]=Xl(n[s],l,o,this.padding),n[i]=Xl(n[i],c,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Lbe.className="Conv2DTranspose";xe(Lbe);class Bbe extends PS{constructor(e){if(super(e),this.inputSpec=[new Gr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new H(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=tn(e),e.length!==5)throw new H("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new H("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Gr({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return re(()=>{let r=xt(e);if(r.shape.length!==5)throw new H(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let o,a,l;this.dataFormat==="channelsFirst"?(l=2,o=3,a=4):(l=1,o=2,a=3);const c=s[l],u=s[o],d=s[a],h=this.kernelSize[0],p=this.kernelSize[1],m=this.kernelSize[2],g=this.strides[0],y=this.strides[1],v=this.strides[2],x=Xl(c,g,h,this.padding),b=Xl(u,y,p,this.padding),S=Xl(d,v,m,this.padding),w=[i,x,b,S,this.filters];this.dataFormat!=="channelsLast"&&(r=Qt(r,[0,2,3,4,1]));let C=tTt(r,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=Qt(C,[0,4,1,2,3])),this.bias!==null&&(C=Dl(C,this.bias.read(),this.dataFormat)),this.activation!==null&&(C=this.activation.apply(C)),C})}computeOutputShape(e){e=tn(e);const n=e.slice();let r,s,i,o;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3,o=4):(r=4,s=1,i=2,o=3);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],d=this.strides[1],h=this.strides[2];return n[r]=this.filters,n[s]=Xl(n[s],u,a,this.padding),n[i]=Xl(n[i],d,l,this.padding),n[o]=Xl(n[o],h,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Bbe.className="Conv3DTranspose";xe(Bbe);class zbe extends Kv{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new H("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new H("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new H(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Zn(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=er(n.depthwiseRegularizer),this.depthwiseConstraint=Kr(n.depthwiseConstraint),this.pointwiseInitializer=Zn(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=er(n.pointwiseRegularizer),this.pointwiseConstraint=Kr(n.pointwiseConstraint)}build(e){if(e=tn(e),e.length<this.rank+2)throw new H(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new H(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],s=this.kernelSize.concat([r,this.depthMultiplier]),i=[];for(let a=0;a<this.rank;++a)i.push(1);i.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new Gr({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return re(()=>{e=xt(e);let r;if(this.rank===1)throw new Dt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Qt(e,[0,2,3,1])),r=Pxe(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Dl(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=Qt(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=or(this.depthwiseInitializer),e.pointwiseInitializer=or(this.pointwiseInitializer),e.depthwiseRegularizer=kn(this.depthwiseRegularizer),e.pointwiseRegularizer=kn(this.pointwiseRegularizer),e.depthwiseConstraint=qr(this.depthwiseConstraint),e.pointwiseConstraint=qr(this.pointwiseConstraint),e}}zbe.className="SeparableConv";class Vbe extends zbe{constructor(e){super(2,e)}}Vbe.className="SeparableConv2D";xe(Vbe);class VA extends Kv{constructor(e){super(1,e),VA.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!z5(e.kernelSize,"number",1,1))throw new H(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}VA.className="Conv1D";xe(VA);class Wbe extends Wt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return re(()=>{if(e=xt(e),this.dataFormat==="channelsLast"){const r=XC(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return XC(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=XC(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return XC(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}Wbe.className="Cropping2D";xe(Wbe);class Ube extends Wt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,$r(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,wOt(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return re(()=>{let r=xt(e);const s=r.shape;if(this.dataFormat==="channelsFirst"){r=Qt(r,[0,2,3,1]);const i=this.size[0]*s[2],o=this.size[1]*s[3],a=this.interpolation==="nearest"?uu.resizeNearestNeighbor(r,[i,o]):uu.resizeBilinear(r,[i,o]);return Qt(a,[0,3,1,2])}else{const i=this.size[0]*s[1],o=this.size[1]*s[2];return this.interpolation==="nearest"?uu.resizeNearestNeighbor(r,[i,o]):uu.resizeBilinear(r,[i,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}Ube.className="UpSampling2D";xe(Ube);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function HPt(t,e,n=[1,1],r="valid",s,i){return re(()=>{s==null&&(s=kl()),$r(s);let o=t6(t,s);if(t.rank!==4)throw new H(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new H(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=MV(o,e,n,r==="same"?"same":"valid","NHWC",i),s==="channelsFirst"&&(o=Qt(o,[0,3,1,2])),o})}class Gbe extends zA{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Zn(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Kr(e.depthwiseConstraint),this.depthwiseRegularizer=er(e.depthwiseRegularizer)}build(e){if(e=tn(e),e.length<4)throw new H(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new H(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],s=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return re(()=>{e=xt(e);let r=HPt(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Dl(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=tn(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=yl(n,this.kernelSize[0],this.padding,this.strides[0]),o=yl(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,i,o]:[e[0],i,o,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=or(this.depthwiseInitializer),e.depthwiseRegularizer=kn(this.depthwiseRegularizer),e.depthwiseConstraint=qr(this.depthwiseRegularizer),e}}Gbe.className="DepthwiseConv2D";xe(Gbe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Hbe(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new H("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(i){return i==null||Array.isArray(i)?i:[i]}return e=s(e),n=s(n),{inputs:t,initialState:e,constants:n}}function qbe(t,e,n,r=!1,s,i,o=!1,a=!1){return re(()=>{const l=e.shape.length;if(l<3)throw new H(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(Tl(2,l));e=Qt(e,c),o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=Be(Be(s,"bool"),"float32"),s.rank===l-1&&(s=wi(s,-1)),s=Qt(s,c)),r&&(e=Np(e,0),s!=null&&(s=Np(s,0)));const u=[];let d,h=n;const p=e.shape[0],m=_p(e);let g;s!=null&&(g=_p(s));for(let v=0;v<p;++v){const x=m[v],b=re(()=>t(x,h));if(s==null)d=b[0],h=b[1];else{const S=re(()=>{const w=g[v],C=gt(Pa(w),w),_=Ce(K(b[0],w),K(h[0],C)),T=h.map((k,$)=>Ce(K(b[1][$],w),K(k,C)));return{output:_,newStates:T}});d=S.output,h=S.newStates}a&&u.push(d)}let y;return a&&(y=Fu(u,1)),[d,y,h]})}class Vf extends Wt{constructor(e){super(e);let n;if(e.cell==null)throw new H("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new s6({cells:e.cell}):n=e.cell,n.stateSize==null)throw new H("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Gr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Tl(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){hF(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let s;if(this.returnSequences?s=[e[0],e[1],r]:s=[e[0],r],this.returnState){const i=[];for(const o of n)i.push([e[0],o]);return[s].concat(i)}else return s}computeMask(e,n){return re(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const s=this.states.map(i=>null);return[r].concat(s)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Dt("Constants support is not implemented in RNN yet.");hF(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Gr({shape:[n,null,...r]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let i;if(Array.isArray(this.cell.stateSize)?i=this.cell.stateSize:i=[this.cell.stateSize],this.stateSpec!=null){if(!cn(this.stateSpec.map(o=>o.shape[o.shape.length-1]),i))throw new H(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map(o=>new Gr({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){re(()=>{if(!this.stateful)throw new ql("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new H("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>ns([r,s])):this.states_=[ns([r,this.cell.stateSize])];else if(e==null)Ut(this.states_),this.keptStates!=null&&(Ut(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>ns([r,s])):this.states_[0]=ns([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new H(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):Ut(this.states_);for(let s=0;s<this.states_.length;++s){const i=e[s],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,a=[r,o];if(!cn(i.shape,a))throw new H(`State ${s} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${i.shape}`);this.states_[s]=i}}this.states_=this.states_.map(s=>gc(s.clone()))})}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=Hbe(e,r,s,this.numConstants);e=i.inputs,r=i.initialState,s=i.constants;let o=[],a=[];if(r!=null){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new Gr({shape:c.shape}));a=a.concat(this.stateSpec)}if(s!=null&&(n.constants=s,o=o.concat(s),this.numConstants=s.length),o[0]instanceof Pc){const c=[e].concat(o),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const h=super.apply(c,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return re(()=>{const r=n==null?null:n.mask,s=n==null?null:n.training;let i=n==null?null:n.initialState;e=xt(e),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==o)throw new H(`RNN Layer has ${o} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:s},c=qbe((m,g)=>{const y=this.cell.call([m].concat(g),a);return[y[0],y.slice(1)]},e,i,this.goBackwards,r,null,this.unroll,this.returnSequences),u=c[0],d=c[1],h=c[2];this.stateful&&this.resetStates(h,s);const p=this.returnSequences?d:u;return this.returnState?[p].concat(h):p})}getInitialState(e){return re(()=>{let n=ns(e.shape);return n=it(n,[1,2]),n=kS(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?dF(n,[1,r]):n):this.cell.stateSize>1?[dF(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Vf.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const s=n.cell,i=bu(s,r);return new e(Object.assign(n,{cell:i}))}}Vf.className="RNN";xe(Vf);class WA extends Wt{}class n6 extends WA{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,as(this.units,"units"),this.activation=gf(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Zn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Zn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Zn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=er(e.kernelRegularizer),this.recurrentRegularizer=er(e.recurrentRegularizer),this.biasRegularizer=er(e.biasRegularizer),this.kernelConstraint=Kr(e.kernelConstraint),this.recurrentConstraint=Kr(e.recurrentConstraint),this.biasConstraint=Kr(e.biasConstraint),this.dropout=Vy([1,pf([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Vy([1,pf([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=tn(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return re(()=>{if(e=e,e.length!==2)throw new H(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const s=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=yf({ones:()=>Pa(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=yf({ones:()=>Pa(r),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let i;const o=this.dropoutMask,a=this.recurrentDropoutMask;o!=null?i=xc(K(e,o),this.kernel.read()):i=xc(e,this.kernel.read()),this.bias!=null&&(i=Dl(i,this.bias.read())),a!=null&&(r=K(r,a));let l=Ce(i,xc(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:mf(this.activation),useBias:this.useBias,kernelInitializer:or(this.kernelInitializer),recurrentInitializer:or(this.recurrentInitializer),biasInitializer:or(this.biasInitializer),kernelRegularizer:kn(this.kernelRegularizer),recurrentRegularizer:kn(this.recurrentRegularizer),biasRegularizer:kn(this.biasRegularizer),activityRegularizer:kn(this.activityRegularizer),kernelConstraint:qr(this.kernelConstraint),recurrentConstraint:qr(this.recurrentConstraint),biasConstraint:qr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}n6.className="SimpleRNNCell";xe(n6);class Kbe extends Vf{constructor(e){e.cell=new n6(e),super(e)}call(e,n){return re(()=>{this.cell.dropoutMask!=null&&(Ut(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Ut(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return new e(n)}}Kbe.className="SimpleRNN";xe(Kbe);class r6 extends WA{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new H("GRUCell does not support reset_after parameter set to true.");this.units=e.units,as(this.units,"units"),this.activation=gf(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=gf(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Zn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Zn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Zn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=er(e.kernelRegularizer),this.recurrentRegularizer=er(e.recurrentRegularizer),this.biasRegularizer=er(e.biasRegularizer),this.kernelConstraint=Kr(e.kernelConstraint),this.recurrentConstraint=Kr(e.recurrentConstraint),this.biasConstraint=Kr(e.biasConstraint),this.dropout=Vy([1,pf([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Vy([1,pf([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=tn(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return re(()=>{if(e=e,e.length!==2)throw new H(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=yf({ones:()=>Pa(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=yf({ones:()=>Pa(s),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=this.recurrentDropoutMask;let a,l,c;0<this.dropout&&this.dropout<1&&(e=K(e,i[0]));let u=xc(e,this.kernel.read());this.useBias&&(u=Dl(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=K(s,o[0]));const d=this.recurrentKernel.read(),[h,p]=Po(d,[2*this.units,this.units],d.rank-1),m=xc(s,h),[g,y,v]=Po(u,3,u.rank-1),[x,b]=Po(m,2,m.rank-1);a=this.recurrentActivation.apply(Ce(g,x)),l=this.recurrentActivation.apply(Ce(y,b));const S=xc(K(l,s),p);c=this.activation.apply(Ce(v,S));const w=Ce(K(a,s),K(Ce(1,Tr(a)),c));return[w,w]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:mf(this.activation),recurrentActivation:mf(this.recurrentActivation),useBias:this.useBias,kernelInitializer:or(this.kernelInitializer),recurrentInitializer:or(this.recurrentInitializer),biasInitializer:or(this.biasInitializer),kernelRegularizer:kn(this.kernelRegularizer),recurrentRegularizer:kn(this.recurrentRegularizer),biasRegularizer:kn(this.biasRegularizer),activityRegularizer:kn(this.activityRegularizer),kernelConstraint:qr(this.kernelConstraint),recurrentConstraint:qr(this.recurrentConstraint),biasConstraint:qr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}r6.className="GRUCell";xe(r6);class Xbe extends Vf{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new r6(e),super(e)}call(e,n){return re(()=>{this.cell.dropoutMask!=null&&(Ut(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Ut(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}Xbe.className="GRU";xe(Xbe);class UA extends WA{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,as(this.units,"units"),this.activation=gf(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=gf(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Zn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Zn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Zn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=er(e.kernelRegularizer),this.recurrentRegularizer=er(e.recurrentRegularizer),this.biasRegularizer=er(e.biasRegularizer),this.kernelConstraint=Kr(e.kernelConstraint),this.recurrentConstraint=Kr(e.recurrentConstraint),this.biasConstraint=Kr(e.biasConstraint),this.dropout=Vy([1,pf([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Vy([1,pf([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=tn(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const i=this.biasInitializer,o=this.units;s=new(n=class extends Fa{apply(l,c){const u=i.apply([o]),d=new W5().apply([o]),h=i.apply([o*2]);return pX(pX(u,d),h)}},n.className="CustomInit",n)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return re(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new H(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=yf({ones:()=>Pa(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=yf({ones:()=>Pa(s),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let l,c,u,d;0<this.dropout&&this.dropout<1&&(e=K(e,o[0]));let h=xc(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=K(s,a[0])),h=Ce(h,xc(s,this.recurrentKernel.read())),this.useBias&&(h=Dl(h,this.bias.read()));const[p,m,g,y]=Po(h,4,h.rank-1);l=this.recurrentActivation.apply(p),c=this.recurrentActivation.apply(m),u=Ce(K(c,i),K(l,this.activation.apply(g))),d=this.recurrentActivation.apply(y);const v=K(d,this.activation.apply(u));return[v,v,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:mf(this.activation),recurrentActivation:mf(this.recurrentActivation),useBias:this.useBias,kernelInitializer:or(this.kernelInitializer),recurrentInitializer:or(this.recurrentInitializer),biasInitializer:or(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:kn(this.kernelRegularizer),recurrentRegularizer:kn(this.recurrentRegularizer),biasRegularizer:kn(this.biasRegularizer),activityRegularizer:kn(this.activityRegularizer),kernelConstraint:qr(this.kernelConstraint),recurrentConstraint:qr(this.recurrentConstraint),biasConstraint:qr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}UA.className="LSTMCell";xe(UA);class Ybe extends Vf{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new UA(e),super(e)}call(e,n){return re(()=>{this.cell.dropoutMask!=null&&(Ut(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Ut(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}Ybe.className="LSTM";xe(Ybe);class s6 extends WA{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return re(()=>{e=e;let r=e.slice(1);const s=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?s.push(r.splice(0,a.stateSize.length)):s.push(r.splice(0,1));s.reverse();const i=[];let o;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=s[a],a===0?o=[e[0]].concat(r):o=[o[0]].concat(r),o=l.call(o,n),i.push(o.slice(1))}r=[];for(const a of i.slice().reverse())r.push(...a);return[o[0]].concat(r)})}build(e){hF(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,s)=>{Xh(`RNNCell_${s}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=i=>({className:i.getClassName(),config:i.getConfig()}),s={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,n,r={}){const s=[];for(const i of n.cells)s.push(bu(i,r));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return pF(e)}setWeights(e){const n=[];for(const r of this.cells){const s=r.weights.length,i=e.splice(s);for(let o=0;o<r.weights.length;++o)n.push([r.weights[o],i[o]])}Y5(n)}}s6.className="StackedRNNCells";xe(s6);function yf(t){const{ones:e,rate:n,training:r=!1,count:s=1,dropoutFunc:i}=t,o=()=>i!=null?i(e(),n):B0e(e(),n),a=()=>$S(o,e,r);return!s||s<=1?gc(a().clone()):Array(s).fill(void 0).map(a).map(c=>gc(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var qPt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class Qbe extends Vf{constructor(e){if(e.unroll)throw new Dt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Dt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Gr({ndim:5})]}call(e,n){return re(()=>{if(this.cell.dropoutMask!=null&&(Ut(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Ut(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new H("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return re(()=>{const{stateSize:n}=this.cell,r=e.shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)],o=ns(i);return Array.isArray(n)?Array(n.length).fill(o):[o]})}resetStates(e,n=!1){re(()=>{if(!this.stateful)throw new ql("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)];if(r[0]==null)throw new H("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>ns(i)):this.states_=[ns(i)];else if(e==null)Ut(this.states_),this.keptStates!=null&&(Ut(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>ns(i)):this.states_[0]=ns(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new H(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):Ut(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],c=i;if(!cn(l.shape,c))throw new H(`State ${a} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>gc(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:s,padding:i,strides:o,dilationRate:a}=this.cell,l=n==="channelsFirst",c=e[l?3:2],u=e[l?4:3],d=yl(c,s[0],i,o[0],a[0]),h=yl(u,s[1],i,o[1],a[1]);return[...e.slice(0,2),...l?[r,d,h]:[d,h,r]]}}Qbe.className="ConvRNN2D";class i6 extends UA{constructor(e){const{filters:n,kernelSize:r,strides:s,padding:i,dataFormat:o,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,as(this.filters,"filters"),this.kernelSize=Sg(r,2,"kernelSize"),this.kernelSize.forEach(l=>as(l,"kernelSize")),this.strides=Sg(s||1,2,"strides"),this.strides.forEach(l=>as(l,"strides")),this.padding=i||"valid",Wo(this.padding),this.dataFormat=o||"channelsLast",$r(this.dataFormat),this.dilationRate=Sg(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>as(l,"dilationRate"))}build(e){var n;e=tn(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new H(`The channel dimension of the input should be defined. Found ${e[r]}`);const s=e[r],i=4,o=this.kernelSize.concat([s,this.filters*i]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(n=class extends Fa{apply(h,p){const m=c.apply([u]),g=Bf([u]),y=c.apply([u*2]);return V5([m,g,y])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return re(()=>{if(e.length!==3)throw new H(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,s=e[0],i=e[1],o=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=yf({ones:()=>Pa(s),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(B,W,G)=>!W||!W[G]?B:K(W[G],B);let u=c(s,l,0),d=c(s,l,1),h=c(s,l,2),p=c(s,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=yf({ones:()=>Pa(i),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const m=this.recurrentDropoutMask;let g=c(i,m,0),y=c(i,m,1),v=c(i,m,2),x=c(i,m,3);const b=3,[S,w,C,_]=Po(this.kernel.read(),a,b),[T,k,$,O]=this.useBias?Po(this.bias.read(),a):[null,null,null,null];u=this.inputConv(u,S,T,this.padding),d=this.inputConv(d,w,k,this.padding),h=this.inputConv(h,C,$,this.padding),p=this.inputConv(p,_,O,this.padding);const[P,D,A,I]=Po(this.recurrentKernel.read(),a,b);g=this.recurrentConv(g,P),y=this.recurrentConv(y,D),v=this.recurrentConv(v,A),x=this.recurrentConv(x,I);const R=this.recurrentActivation.apply(Ce(u,g)),M=this.recurrentActivation.apply(Ce(d,y)),E=Ce(K(M,o),K(R,this.activation.apply(Ce(h,v)))),j=K(this.recurrentActivation.apply(Ce(p,x)),this.activation.apply(E));return[j,j,E]})}getConfig(){const e=super.getConfig(),n=qPt(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,s){const i=Sp(e,n,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Dl(i,r,this.dataFormat):i}recurrentConv(e,n){return Sp(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}i6.className="ConvLSTM2DCell";xe(i6);class Zbe extends Qbe{constructor(e){const n=new i6(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}Zbe.className="ConvLSTM2D";xe(Zbe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class o6 extends Wt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let s=0;s<this.noiseShape.length;++s)r.push(this.noiseShape[s]==null?n[s]:this.noiseShape[s]);return r}call(e,n){return re(()=>{this.invokeCallHook(e,n);const r=xt(e);if(0<this.rate&&this.rate<1){const s=n.training==null?!1:n.training,i=this.getNoiseShape(r);return $S(()=>B0e(r,this.rate,i,this.seed),()=>r,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}o6.className="Dropout";xe(o6);class Jbe extends o6{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}Jbe.className="SpatialDropout1D";xe(Jbe);class a6 extends Wt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,as(this.units,"units"),this.activation=gf(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Zn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Zn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Kr(e.kernelConstraint),this.biasConstraint=Kr(e.biasConstraint),this.kernelRegularizer=er(e.kernelRegularizer),this.biasRegularizer=er(e.biasRegularizer),this.activityRegularizer=er(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=tn(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=tn(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return re(()=>{this.invokeCallHook(e,n);const r=xt(e),s=P0e(this.activation.getClassName());let i;return s!=null?i=xc(r,this.kernel.read(),s,this.bias?this.bias.read():null):(i=xc(r,this.kernel.read()),this.bias!=null&&(i=Dl(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){const e={units:this.units,activation:mf(this.activation),useBias:this.useBias,kernelInitializer:or(this.kernelInitializer),biasInitializer:or(this.biasInitializer),kernelRegularizer:kn(this.kernelRegularizer),biasRegularizer:kn(this.biasRegularizer),activityRegularizer:kn(this.activityRegularizer),kernelConstraint:qr(this.kernelConstraint),biasConstraint:qr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}a6.className="Dense";xe(a6);class e1e extends Wt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=tn(e);for(const n of e.slice(1))if(n==null)throw new H(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Yd(e,1)]}call(e,n){return re(()=>{this.invokeCallHook(e,n);let r=xt(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const s=[0];for(let i=2;i<r.rank;++i)s.push(i);s.push(1),r=Qt(r,s)}return kOt(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}e1e.className="Flatten";xe(e1e);class t1e extends Wt{constructor(e){super(e),this.supportsMasking=!0,this.activation=gf(e.activation)}call(e,n){return re(()=>{this.invokeCallHook(e,n);const r=xt(e);return this.activation.apply(r)})}getConfig(){const e={activation:mf(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}t1e.className="Activation";xe(t1e);class n1e extends Wt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return re(()=>(e=xt(e),_Ot(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}n1e.className="RepeatVector";xe(n1e);class r1e extends Wt{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",s=n.slice();let i=1,o=null;for(let l=0;l<s.length;++l){const c=s[l];if(this.isUnknown(c))if(o===null)o=l;else throw new H("Can only specifiy one unknown dimension.");else i*=c}const a=Yd(e);if(o!==null){if(i===0||a%i!==0)throw new H(r);s[o]=a/i}else if(a!==i)throw new H(r);return s}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return re(()=>{this.invokeCallHook(e,n);const r=xt(e),s=r.shape,i=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return Z(r,i)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}r1e.className="Reshape";xe(r1e);class s1e extends Wt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Tl(1,e.dims.length+1);if(!cn(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Gr({ndim:this.dims.length+1})]}computeOutputShape(e){e=tn(e);const n=e.slice();return this.dims.forEach((r,s)=>{n[s+1]=e[r]}),n}call(e,n){return Qt(xt(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}s1e.className="Permute";xe(s1e);class i1e extends Wt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=xt(e);return sF(TT(r,this.maskValue),-1)}call(e,n){return re(()=>{this.invokeCallHook(e,n);const r=xt(e),o=sF(TT(r,this.maskValue),-1,!0);return K(r,Be(o,r.dtype))})}}i1e.className="Masking";xe(i1e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class o1e extends Wt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(gn(e.inputLength))}this.inputDim=e.inputDim,as(this.inputDim,"inputDim"),this.outputDim=e.outputDim,as(this.outputDim,"outputDim"),this.embeddingsInitializer=Zn(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=er(e.embeddingsRegularizer),this.activityRegularizer=er(e.activityRegularizer),this.embeddingsConstraint=Kr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return re(()=>this.maskZero?(e=xt(e),TT(e,Zt(e))):null)}computeOutputShape(e){if(e=tn(e),this.inputLength==null)return[...e,this.outputDim];const n=gn(this.inputLength);if(n.length!==e.length-1)throw new H(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let s=0;s<n.length;++s){const i=n[s],o=e[s+1];if(i!=null&&o!=null&&i!==o)throw new H(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(n[r]=o),r++}}return[e[0],...n,this.outputDim]}call(e,n){return re(()=>{this.invokeCallHook(e,n);let r=xt(e);r.dtype!=="int32"&&(r=vc(r,"int32"));const s=L0e(this.embeddings.read(),Z(r,[r.size]));return Z(s,tn(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:or(this.embeddingsInitializer),embeddingsRegularizer:kn(this.embeddingsRegularizer),activityRegularizer:kn(this.activityRegularizer),embeddingsConstraint:qr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}o1e.className="Embedding";xe(o1e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class nm extends Wt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Dt}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let s=0;s<n.length;++s){const i=e[e.length-n.length+s],o=n[s];if(i==null||o==null||i<0||o<0)r.push(null);else if(i===1)r.push(o);else if(o===1)r.push(i);else{if(i!==o)throw new H("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(i)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[tn(e)]),e=e,e.length<2)throw new H(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const i of e)i!=null&&i[0]!==null&&n.push(i[0]);if(n=Xd(n),n.length>1)throw new H(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let i=1;i<e.length;++i){const o=e[i]==null?null:e[i].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const s=e.map(i=>i.length);e.indexOf(null)===-1&&Xd(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return re(()=>{if(e=e,this.reshapeRequired){const r=[],s=e.map(i=>i.rank);if(s.indexOf(null)===-1){const i=pf(s);for(let o of e){const a=o.rank;for(let l=0;l<i-a;++l)o=kS(o,1);r.push(o)}return this.mergeFunction(r)}else{let i=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,d=u[0],h=u.slice(1).concat([d]);let p=Z(l,[d].concat(Yd(u.slice(1))));p=Qt(p,[1,0]),p=Z(p,h),r.push(p),i=!0}else if(c>1){const u=Tl(1,c).concat([0]);r.push(Qt(l,u)),i=!0}else r.push(l)}let o=this.mergeFunction(r);const a=o.rank;if(i){if(a==null){const l=o.shape,c=l.length,u=l[c-1],d=[u].concat(l.slice(0,l.length-1));o=Z(Qt(Z(o,[-1,u]),[1,0]),d)}else if(a>1){const l=[a-1].concat(Tl(0,a-1));o=Qt(o,l)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let s=1;s<e.length;++s){const i=e[s]==null?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let r=[];for(const s of e)s!=null&&s[0]!==null&&r.push(s[0]);return r=Xd(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return re(()=>{if(n==null)return null;if(!Array.isArray(n))throw new H("`mask` should be an Array");if(!Array.isArray(e))throw new H("`inputs` should be an Array");if(n.length!==e.length)throw new H(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(s=>s==null))return null;n=n.map(s=>s==null?s:wi(s,0));let r=n[0];for(let s=1;s<n.length-1;++s)r=Mu(r,n[s]);return r})}}class a1e extends nm{constructor(e){super(e)}mergeFunction(e){return re(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ce(n,e[r]);return n})}}a1e.className="Add";xe(a1e);class l1e extends nm{constructor(e){super(e)}mergeFunction(e){return re(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=K(n,e[r]);return n})}}l1e.className="Multiply";xe(l1e);class c1e extends nm{constructor(e){super(e)}mergeFunction(e){return re(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ce(n,e[r]);return K(1/e.length,n)})}}c1e.className="Average";xe(c1e);class u1e extends nm{constructor(e){super(e)}mergeFunction(e){return re(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Lf(n,e[r]);return n})}}u1e.className="Maximum";xe(u1e);class d1e extends nm{constructor(e){super(e)}mergeFunction(e){return re(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=f1(n,e[r]);return n})}}d1e.className="Minimum";xe(d1e);class f1e extends nm{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new H("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const s of e)if(s!=null){n=!1;break}if(n)return;const r=[];for(let s=0;s<e.length;++s){const i=e[s].slice();i.splice(this.axis,1);let o=!1;for(const a of r)if(cn(a,i)){o=!0;break}o||r.push(i)}if(r.length>1)throw new H("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return re(()=>V5(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new H("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const i of n.slice(1)){if(r[s]==null||i[s]==null){r[s]=null;break}r[s]+=i[s]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new H("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new H("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new H(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return re(()=>{let r=!0;if(n.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const s=[];for(let o=0;o<e.length;++o)n[o]==null?s.push(Be(Pa(e[o]),"bool")):n[o].rank<e[o].rank?s.push(wi(n[o],-1)):s.push(n[o]);const i=Ai(s,this.axis);return fxe(i,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}f1e.className="Concatenate";xe(f1e);function jx(t,e){for(;t<0;)t+=e;return t}function KPt(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Dt("batchDot is not implemented for tensors of 4D or higher rank yet");if(L(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),L(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new Dt("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,s=e.shape.length;n==null&&(n=[r-1,s-2]);const i=n;return re(()=>{let o;if(r>s){o=r-s;const l=[];for(let c=0;c<o;++c)l.push(1);e=Z(e,e.shape.concat(l))}else if(s>r){o=s-r;const l=[];for(let c=0;c<o;++c)l.push(1);t=Z(t,t.shape.concat(l))}else o=0;let a;if(t.shape.length===2&&e.shape.length===2)i[0]===i[1]?a=it(K(t,e),i[0]):a=it(K(Qt(t,[1,0]),e),i[1]);else{const l=i[0]!==t.shape.length-1,c=i[1]===e.shape.length-1;a=on(t,e,l,c)}if(o>0){let l;r>s?l=r+s-3:l=r-1;const c=[];for(let u=l;u<l+o;++u)c.push(u);a=wS(a,c)}return a.shape.length===1&&(a=wi(a,1)),a})}class h1e extends nm{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){L(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new Dt("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);if(n[s[0]]!==r[s[1]])throw new H(`Dimension incompatibility: ${n[s[0]]} !== ${r[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new H(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((i,o)=>jx(i,e[o].shape.length)):s=[jx(this.axes,n.shape.length),jx(this.axes,r.shape.length)],this.normalize&&(n=PT(n,s[0]),r=PT(r,s[1])),KPt(n,r,s)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[jx(this.axes,e.length),jx(this.axes,n.length)],r}computeOutputShape(e){L(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new Dt("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);n.splice(s[0],1),r.splice(s[1],1),r.splice(0,1);const i=n.concat(r);return i.length===1&&i.push(1),i}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}h1e.className="Dot";xe(h1e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class p1e extends Wt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return re(()=>{this.invokeCallHook(e,n);const r=xt(e);return $S(()=>Ce(MA(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}p1e.className="GaussianNoise";xe(p1e);class m1e extends Wt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return re(()=>{this.invokeCallHook(e,n);const r=xt(e);return this.rate>0&&this.rate<1?$S(()=>{const i=Math.sqrt(this.rate/(1-this.rate));return K(r,MA(r.shape,1,i))},()=>r,n.training||!1):r})}}m1e.className="GaussianDropout";xe(m1e);class g1e extends Wt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||xt(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return re(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return $S(()=>{const i=xt(e),l=-1.6732632423543772*1.0507009873554805;let c=Qp(bS(r),this.rate);c=vc(c,"float32");const u=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-u*l*this.rate,h=Ce(K(i,c),K(Ce(c,-1),l));return Ce(K(h,u),d)},()=>xt(e),n.training||!1)}return e})}}g1e.className="AlphaDropout";xe(g1e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function g1(t,e,n,r,s,i=.001){let o;if(t.rank===2)o=E_t(t,e,n,r,s,i);else if(t.rank===3)o=A_t(t,e,n,r,s,i);else if(t.rank===4)o=O_t(t,e,n,r,s,i);else throw new Dt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return o}function XPt(t,e,n,r,s=.001){return re(()=>{const i=UV(t,r),o=i.mean,a=i.variance;return[g1(t,o,a,n,e,s),o,a]})}function YPt(t,e,n,r,s=.001){return re(()=>{const i=UV(t,r),o=i.mean,a=i.variance,l=[];for(const m of Tl(0,t.rank))r.indexOf(m)!==-1?l.push(1):l.push(t.shape[m]);const c=Z(o,l),u=Z(a,l),d=e==null?null:Z(e,l),h=n==null?null:Z(n,l);return[g1(t,c,u,h,d,s),o,a]})}function QPt(t,e,n,r,s=.001){return cn(r.slice().sort(),Tl(0,t.rank-1))?XPt(t,e,n,r,s):YPt(t,e,n,r,s)}class y1e extends Wt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Zn(e.betaInitializer||"zeros"),this.gammaInitializer=Zn(e.gammaInitializer||"ones"),this.movingMeanInitializer=Zn(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Zn(e.movingVarianceInitializer||"ones"),this.betaConstraint=Kr(e.betaConstraint),this.gammaConstraint=Kr(e.gammaConstraint),this.betaRegularizer=er(e.betaRegularizer),this.gammaRegularizer=er(e.gammaRegularizer)}build(e){e=tn(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new H(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Gr({ndim:e.length,axes:{[n]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return re(()=>{const r=n.training==null?!1:n.training,s=xt(e),i=s.shape,o=i.length,a=Tl(0,o),l=this.axis>=0?this.axis:this.axis+o;a.splice(l,1);const c=Tp(1,o);c[l]=i[l];const u=a.slice();u.sort();const d=!cn(u,Tl(0,o).slice(0,o-1)),h=()=>{if(d){const x=Z(this.movingMean.read(),c),b=Z(this.movingVariance.read(),c),S=this.center?Z(this.beta.read(),c):null,w=this.scale?Z(this.gamma.read(),c):null;return g1(s,x,b,S,w,this.epsilon)}else return g1(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return h();const[p,m,g]=QPt(s,this.gamma.read(),this.beta.read(),a,this.epsilon),y=(x,b,S)=>{re(()=>{const w=1-S,C=x.read(),_=K(gt(C,b),w);x.write(gt(C,_))})};return(()=>{y(this.movingMean,m,this.momentum),y(this.movingVariance,g,this.momentum)})(),p})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:or(this.betaInitializer),gammaInitializer:or(this.gammaInitializer),movingMeanInitializer:or(this.movingMeanInitializer),movingVarianceInitializer:or(this.movingVarianceInitializer),betaRegularizer:kn(this.betaRegularizer),gammaRegularizer:kn(this.gammaRegularizer),betaConstraint:qr(this.betaConstraint),gammaConstraint:qr(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}y1e.className="BatchNormalization";xe(y1e);class v1e extends Wt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Zn(e.betaInitializer||"zeros"),this.gammaInitializer=Zn(e.gammaInitializer||"ones"),this.betaRegularizer=er(e.betaRegularizer),this.gammaRegularizer=er(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=tn(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=n);for(const i of this.axis)if(i<0||i>=n)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==Xd(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(i=>e[i]),s=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,n){const r=xt(e),s=r.shape,i=s.length;return re(()=>{let{mean:a,variance:l}=UV(r,this.axis,!0);const c=Tp(1,i);for(const g of this.axis)c[g]=s[g];const u=g=>g!=null&&g.shape.length!==i?Z(g,c):g;let d=this.scale?u(this.gamma.read()):null,h=this.center?u(this.beta.read()):null;const p=[],m=[];for(let g=0;g<i;++g)this.axis.indexOf(g)!==-1?(p.push(s[g]),m.push(1)):(p.push(1),m.push(s[g]));return a=al(a,p),l=al(l,p),d!=null&&(d=al(d,m)),h!=null&&(h=al(h,m)),g1(r,a,l,h,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:or(this.betaInitializer),gammaInitializer:or(this.gammaInitializer),betaRegularizer:kn(this.betaRegularizer),gammaRegularizer:kn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}v1e.className="LayerNormalization";xe(v1e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ZPt(t,e,n){return re(()=>{if(t.rank!==4)throw new H(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new H("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=kl()),n!=="channelsLast"&&n!=="channelsFirst")throw new H(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],GV(t,r)})}class x1e extends Wt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?kl():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new H(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new H(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new H(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new Gr({ndim:4})]}computeOutputShape(e){e=tn(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return re(()=>ZPt(xt(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}x1e.className="ZeroPadding2D";xe(x1e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function GA(t,e,n,r,s,i){return re(()=>{$r(s),D0e(i),Wo(r),n==null&&(n=[1,1]),r==null&&(r="valid"),s==null&&(s=kl()),i==null&&(i="max"),t=t6(t,s);let o;const a=r==="same"?"same":"valid";return i==="max"?o=WV(t,e,n,a):o=PV(t,e,n,a),s==="channelsFirst"&&(o=Qt(o,[0,3,1,2])),o})}function b1e(t,e,n,r,s,i){return re(()=>{$r(s),D0e(i),Wo(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),s==null&&(s=kl()),i==null&&(i="max"),t=Fbe(t,s);let o;const a=r==="same"?"same":"valid";return i==="max"?o=gkt(t,e,n,a):o=v_t(t,e,n,a),s==="channelsFirst"&&(o=Qt(o,[0,4,1,2,3])),o})}class w1e extends Wt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new H(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(as(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new H(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);as(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,Wo(this.padding),this.inputSpec=[new Gr({ndim:3})]}computeOutputShape(e){e=tn(e);const n=yl(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return re(()=>{this.invokeCallHook(e,n),e=kS(xt(e),2);const r=this.poolingFunction(xt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return wS(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class S1e extends w1e{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return $r(i),Wo(s),GA(e,n,r,s,i,"max")}}S1e.className="MaxPooling1D";xe(S1e);class C1e extends w1e{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return $r(i),Wo(s),GA(e,n,r,s,i,"avg")}}C1e.className="AveragePooling1D";xe(C1e);class N1e extends Wt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new H(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];as(this.poolSize,"poolSize"),as(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,$r(this.dataFormat),Wo(this.padding),this.inputSpec=[new Gr({ndim:4})]}computeOutputShape(e){e=tn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=yl(n,this.poolSize[0],this.padding,this.strides[0]),r=yl(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return re(()=>(this.invokeCallHook(e,n),this.poolingFunction(xt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class _1e extends N1e{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return $r(i),Wo(s),GA(e,n,r,s,i,"max")}}_1e.className="MaxPooling2D";xe(_1e);class T1e extends N1e{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return $r(i),Wo(s),GA(e,n,r,s,i,"avg")}}T1e.className="AveragePooling2D";xe(T1e);class k1e extends Wt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new H(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];as(this.poolSize,"poolSize"),as(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,$r(this.dataFormat),Wo(this.padding),this.inputSpec=[new Gr({ndim:5})]}computeOutputShape(e){e=tn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=yl(n,this.poolSize[0],this.padding,this.strides[0]),r=yl(r,this.poolSize[1],this.padding,this.strides[1]),s=yl(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,s]:[e[0],n,r,s,e[4]]}call(e,n){return re(()=>(this.invokeCallHook(e,n),this.poolingFunction(xt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class E1e extends k1e{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return $r(i),Wo(s),b1e(e,n,r,s,i,"max")}}E1e.className="MaxPooling3D";xe(E1e);class $1e extends k1e{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return $r(i),Wo(s),b1e(e,n,r,s,i,"avg")}}$1e.className="AveragePooling3D";xe($1e);class A1e extends Wt{constructor(e){super(e),this.inputSpec=[new Gr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new Dt}}class I1e extends A1e{constructor(e){super(e||{})}call(e,n){return re(()=>{const r=xt(e);return Dr(r,1)})}}I1e.className="GlobalAveragePooling1D";xe(I1e);class O1e extends A1e{constructor(e){super(e||{})}call(e,n){return re(()=>{const r=xt(e);return gl(r,1)})}}O1e.className="GlobalMaxPooling1D";xe(O1e);class P1e extends Wt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,$r(this.dataFormat),this.inputSpec=[new Gr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new Dt}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class R1e extends P1e{call(e,n){return re(()=>{const r=xt(e);return this.dataFormat==="channelsLast"?Dr(r,[1,2]):Dr(r,[2,3])})}}R1e.className="GlobalAveragePooling2D";xe(R1e);class D1e extends P1e{call(e,n){return re(()=>{const r=xt(e);return this.dataFormat==="channelsLast"?gl(r,[1,2]):gl(r,[2,3])})}}D1e.className="GlobalMaxPooling2D";xe(D1e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class j1e extends Wt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const s=n.layer,i=bu(s,r);delete n.layer;const o={layer:i};return Object.assign(o,n),new e(o)}}class M1e extends j1e{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=tn(e),e.length<3)throw new H(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=tn(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),s=e[1];return[r[0],s].concat(r.slice(1))}call(e,n){return re(()=>(e=xt(e),qbe((o,a)=>[xt(this.layer.call(o,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}M1e.className="TimeDistributed";xe(M1e);function JPt(t){tm(bOt,"BidirectionalMergeMode",t)}const eRt="concat";class F1e extends j1e{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=bu(r),n.goBackwards=n.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=n,this.backwardLayer=bu(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?eRt:e.mergeMode,JPt(this.mergeMode),e.weights)throw new Dt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,s,i;return this.returnState&&(i=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,s=[r]):this.mergeMode==null?s=[r,r.slice()]:s=[r],this.returnState?this.mergeMode==null?s.concat(i).concat(i.slice()):[r].concat(i).concat(i.slice()):Si(s)}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=Hbe(e,r,s,this.numConstants);if(e=i.inputs,r=i.initialState,s=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&s==null)return super.apply(e,n);const o=[],a=[];if(r!=null){const c=r.length;if(c%2>0)throw new H("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push(...r);const u=r.map(d=>new Gr({shape:d.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),a.push(...u)}if(s!=null)throw new Dt("Support for constants in Bidirectional layers is not implemented yet.");const l=o[0]instanceof Pc;for(const c of o)if(c instanceof Pc!==l)throw new H("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(o),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const h=super.apply(c,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return re(()=>{const r=n.initialState;let s,i;if(r==null)s=this.forwardLayer.call(e,n),i=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);s=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),i=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let o;this.returnState&&(Array.isArray(s)&&(o=s.slice(1).concat(i.slice(1))),s=s[0],i=i[0]),this.returnSequences&&(i=Np(i,1));let a;return this.mergeMode==="concat"?a=V5([s,i]):this.mergeMode==="sum"?a=Ce(s,i):this.mergeMode==="ave"?a=K(.5,Ce(s,i)):this.mergeMode==="mul"?a=K(s,i):this.mergeMode==null&&(a=[s,i]),this.returnState?this.mergeMode==null?a.concat(o):[a].concat(o):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Xh(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Xh(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const i=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(i).concat(i):[r].concat(i).concat(i)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=bu(n.layer);if(delete n.layer,n.numConstants!=null)throw new Dt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=n;return s.layer=r,new e(s)}}F1e.className="Bidirectional";xe(F1e);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class L1e extends Wt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return re(()=>(e=xt(e),e.dtype!=="float32"&&(e=vc(e,"float32")),Ce(K(e,this.scale),this.offset)))}}L1e.className="Rescaling";xe(L1e);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:tRt,cropAndResize:nRt}=uu;class B1e extends Wt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,s,i,o,a,l){return re(()=>{let c,u=!1;const d=n/o,h=r/a,p=(s+n)/o,m=(i+r)/a,g=[d,h,p,m],y=[];e.rank===3?(u=!0,c=Fu([e])):c=e;for(let w=0;w<c.shape[0];w++)y.push(g);const v=nxe(y,[y.length,4]),x=h1(0,y.length,1,"int32"),S=nRt(c,v,x,[s,i],"nearest");return vc(u?xt(_p(S)):S,l)})}upsize(e,n,r,s){return re(()=>{const i=tRt(e,[n,r]);return vc(i,s)})}call(e,n){return re(()=>{const r=xt(e),s=r.dtype,i=r.shape,o=i[i.length-3],a=i[i.length-2];let l=0;o!==this.height&&(l=Math.floor((o-this.height)/2));let c=0;return a!==this.width&&(c=Math.floor((a-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,o,a,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=tn(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}B1e.className="CenterCrop";xe(B1e);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function rRt(t,e,n,r){let s=xt(t);if(s.dtype!=="int32"&&(s=vc(s,"int32")),e==="int")return s;const i=s.shape;if(s.rank===0&&(s=wi(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=wi(s,-1)),s.rank>2)throw new H(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${i} which would result in output rank ${s.rank}.`);const o=["multiHot","oneHot"].includes(e),a=s;let l;if(typeof r<"u"&&e==="count"?l=JK(a,r,n,o):l=JK(a,[],n,o),e!=="tfIdf")return l;if(r)return K(l,r);throw new H("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class z1e extends Wt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=tn(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return re(()=>{e=xt(e),e.dtype!=="int32"&&(e=vc(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new H(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=xt(n.countWeights)}const s=gl(e),i=NT(e),o=Vo(this.numTokens,s).bufferSync().get(0),a=Qp(i,0).bufferSync().get(0);if(!(o&&a))throw new H(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return rRt(e,this.outputMode,this.numTokens,r)})}}z1e.className="CategoryEncoding";xe(z1e);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const sRt=["bilinear","nearest"],OX=new Set(sRt);class V1e extends Wt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(OX.has(e.interpolation))this.interpolation=e.interpolation;else throw new H(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=tn(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return re(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return uu.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return uu.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...OX]} are supported`)})}}V1e.className="Resizing";xe(V1e);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class W1e{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}W1e.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class U1e extends Wt{constructor(e){super(e),this.randomGenerator=new W1e(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}U1e.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const iRt=["bilinear","nearest"],PX=new Set(iRt);class G1e extends U1e{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new H(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new H(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new H(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(PX.has(r))this.interpolation=r;else throw new H(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=tn(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return re(()=>{const r=xt(e);this.imgHeight=r.shape[r.shape.length-3];const s=r.shape[r.shape.length-2];this.widthFactor=bS([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*s;i=Math.round(i);const o=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return uu.resizeBilinear(e,o);case"nearest":return uu.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...PX]} are supported`)}})}}G1e.className="RandomWidth";xe(G1e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function FT(t){return new a6(t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oRt=oe();oRt.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var RX;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(RX||(RX={}));var DX;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(DX||(DX={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var jX;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(jX||(jX={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ze(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&L(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aRt=zxe;class HA extends jz{nextDataId(){return HA.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new ove(this,zl())}write(e,n,r){this.firstUse&&(this.firstUse=!1,oe().get("IS_NODE")&&Co(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:r,refCount:1}),s}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&Sw(r[0])){const i=r.map(o=>Kd(o));s=this.write(i,e,n)}else s=this.write(r,e,n);return{dataId:s,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,s,i){this.data.set(e,{values:n,dtype:s,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const s=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return Lu(s,i)}return P2t(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>hf(s));return zt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return zt(e.shape,e.dtype,n)}makeOutput(e,n,r){return zl().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=bi();return e(),{kernelMs:bi()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Ze([e],"where");const n=this.readSync(e.dataId);return aRt(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}HA.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H1e(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const lRt=t=>{const{x:e}=t.inputs,n=t.backend;Ze(e,"abs");let r=new Float32Array(le(e.shape));const s=n.data.get(e.dataId).values;return r=H1e(s),n.makeOutput(r,e.shape,e.dtype)},cRt={kernelName:C$,backendName:"cpu",kernelFunc:lRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ar(t){return(e,n,r,s,i)=>{const o=Pt(e,n),a=o.length,l=st(o),c=le(o),u=Ds(i,c),d=e.length,h=n.length,p=st(e),m=st(n),g=By(e,o),y=By(n,o);if(g.length+y.length===0)for(let v=0;v<u.length;++v)u[v]=t(r[v%r.length],s[v%s.length]);else for(let v=0;v<u.length;++v){const x=zv(v,a,l),b=x.slice(-d);g.forEach(_=>b[_]=0);const S=mc(b,d,p),w=x.slice(-h);y.forEach(_=>w[_]=0);const C=mc(w,h,m);u[v]=t(r[S],s[C])}return[u,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hi(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(s.shape,"float32",o)},a}const uRt={kernelName:Xz,backendName:"cpu",kernelFunc:Hi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LT(t,e,n="float32"){if(n==="complex64"){const s=LT(t,e,"float32"),i=LT(t,e,"float32");return Hi({inputs:{real:s,imag:i},backend:t})}const r=js(le(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rc(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const dRt={kernelName:Ww,backendName:"cpu",kernelFunc:Rc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kp(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const fRt={kernelName:xV,backendName:"cpu",kernelFunc:kp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q1e(t,e,n,r){if(r==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(r==="bool"){const s=Yp([0],n),[i,o]=Ar((a,l)=>a!==l?1:0)(e,[],t,s,"bool");return[o,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function vf(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return Rc({inputs:{x:s},backend:n});const u=LT(n,s.shape,s.dtype),d=vf({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),h=Hi({inputs:{real:d,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),h}if(s.dtype==="complex64"){const u=kp({inputs:{input:s},backend:n}),d=vf({inputs:{x:u},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(u),d}if(!cve(s.dtype,i)){const u=Rc({inputs:{x:s},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:i}}const o=n.data.get(s.dataId).values,[a,l,c]=q1e(o,s.shape,s.dtype,i);return n.makeTensorInfo(a,l,c)}const hRt={kernelName:Aw,backendName:"cpu",kernelFunc:vf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yr(t,e,n,r){return n==null?({inputs:s,backend:i})=>{const{a:o,b:a}=s,l=i;Ze([o,a],t);const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,d=o.dtype==="string"?Bu(c):c,h=o.dtype==="string"?Bu(u):u,p=r||o.dtype,[m,g]=e(o.shape,a.shape,d,h,p);return l.makeTensorInfo(g,p,m)}:({inputs:s,backend:i})=>{const{a:o,b:a}=s,l=i;if(o.dtype==="complex64"||a.dtype==="complex64"){const c=vf({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,h=u.complexTensorInfos.imag,p=l.data.get(d.dataId).values,m=l.data.get(h.dataId).values,g=vf({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),y=l.data.get(g.dataId),v=y.complexTensorInfos.real,x=y.complexTensorInfos.imag,b=l.data.get(v.dataId).values,S=l.data.get(x.dataId).values,[w,C,_]=n(o.shape,a.shape,p,m,b,S),T=l.makeTensorInfo(_,"float32",w),k=l.makeTensorInfo(_,"float32",C),$=Hi({inputs:{real:T,imag:k},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(g),l.disposeIntermediateTensorInfo(T),l.disposeIntermediateTensorInfo(k),$}else{const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,d=r||o.dtype,[h,p]=e(o.shape,a.shape,c,u,d);return l.makeTensorInfo(p,d,h)}}}function l6(t){return(e,n,r,s,i,o)=>{const a=Pt(e,n),l=le(a),c=a.length,u=st(a),d=Ds("float32",l),h=Ds("float32",l),p=By(e,a),m=By(n,a),g=Lu(r,s),y=Lu(i,o),v=e.length,x=st(e),b=n.length,S=st(n);if(p.length+m.length===0)for(let w=0;w<d.length;w++){const C=w%g.length,_=w%y.length,T=t(g[C*2],g[C*2+1],y[_*2],y[_*2+1]);d[w]=T.real,h[w]=T.imag}else for(let w=0;w<d.length;w++){const C=zv(w,c,u),_=C.slice(-v);p.forEach(P=>_[P]=0);const T=mc(_,v,x),k=C.slice(-b);m.forEach(P=>k[P]=0);const $=mc(k,b,S),O=t(g[T*2],g[T*2+1],y[$*2],y[$*2+1]);d[w]=O.real,h[w]=O.imag}return[d,h,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K1e=Ar((t,e)=>t+e),pRt=l6((t,e,n,r)=>({real:t+n,imag:e+r})),Uy=Yr(Vv,K1e,pRt),mRt={kernelName:Vv,backendName:"cpu",kernelFunc:Uy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c6(t,e,n,r,s){const i=le(r),o=js(s,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(i>0?o[l]+=e[a]:o[l]+=1)}return o}function X1e(t,e,n,r=!1){const s=t.shape[0],i=t.shape[1],o=zt([s,n],e.dtype);for(let a=0;a<s;a++)for(let l=0;l<i;l++){const c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,a,c):e.size>0?o.set(o.get(a,c)+e.get(a,l),a,c):o.set(o.get(a,c)+1,a,c))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y1e=Ar((t,e)=>t&e),gRt=Yr(Kz,Y1e),yRt={kernelName:Kz,backendName:"cpu",kernelFunc:gRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zc(t){return(e,n,r)=>{const s=Nr(n,e.length);for(let i=0;i<e.length;++i)s[i]=t(e[i],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xn(t,e,n){const r=zc(e);return Wf(t,r,n)}function Wf(t,e,n){return({inputs:r,attrs:s,backend:i})=>{const{x:o}=r;Ze(o,t);const a=i,l=a.data.get(o.dataId).values;let c;if(o.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=Bu(l)}else c=l;const u=n||o.dtype,d=e(c,u,s);return a.makeTensorInfo(o.shape,u,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q1e=zc(t=>Math.ceil(t)),vRt=Wf(Iw,Q1e),xRt={kernelName:Iw,backendName:"cpu",kernelFunc:vRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z1e(t,e,n,r){const s=Nr(n,le(e));if(r&&n!=="string"){let i=0;t.forEach(o=>{const a=le(o.shape);s.set(o.vals,i),i+=a})}else{let i=0;t.forEach(o=>{const a=n==="string"?Bu(o.vals):o.vals;let l=0;for(let c=0;c<o.shape[0];++c){const u=c*e[1]+i;for(let d=0;d<o.shape[1];++d)s[u+d]=a[l++]}i+=o.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J1e=Ar((t,e)=>t===e?1:0),ewe=Yr(F$,J1e,null,"bool"),bRt={kernelName:F$,backendName:"cpu",kernelFunc:ewe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const twe=zc(t=>Math.exp(t)),nwe=Wf(Fw,twe,"float32"),wRt={kernelName:Fw,backendName:"cpu",kernelFunc:nwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rwe=zc(t=>Math.expm1(t)),SRt=Wf(Lw,rwe),CRt={kernelName:Lw,backendName:"cpu",kernelFunc:SRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const swe=zc(t=>Math.floor(t)),NRt=Wf(Bw,swe),_Rt={kernelName:Bw,backendName:"cpu",kernelFunc:NRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iwe=Ar((t,e)=>Math.floor(t/e)),TRt=Yr(zw,iwe,null,"int32"),kRt={kernelName:zw,backendName:"cpu",kernelFunc:TRt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function owe(t,e,n,r,s,i,o,a,l){const c=zt([r,i],n);for(let u=0;u<r;u++){const d=[];let h=0;for(let p=0;p<s;p++){const m=t[u*s+p];h+=m*o[p],d.push(m)}if(h<0||h>=l/i)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let p=0;p<i;p++)c.values[u*i+p]=e.get(...e.indexToLoc(h*i+p))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function awe(t,e,n){const r=zt(n,t.dtype);for(let s=0;s<r.size;++s){const o=r.indexToLoc(s).slice(),a=o[0],l=o[2],c=e.locToIndex([a,l]);o[2]=e.values[c];const u=t.locToIndex(o);0<=u&&u<t.values.length&&(r.values[s]=t.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lwe=Ar((t,e)=>t>e?1:0),ERt=Yr(V$,lwe,null,"bool"),$Rt={kernelName:V$,backendName:"cpu",kernelFunc:ERt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cwe=Ar((t,e)=>t>=e?1:0),ARt=Yr(Vw,cwe,null,"bool"),IRt={kernelName:Vw,backendName:"cpu",kernelFunc:ARt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uwe=Ar((t,e)=>t<e?1:0),ORt=Yr(U$,uwe,null,"bool"),PRt={kernelName:U$,backendName:"cpu",kernelFunc:ORt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dwe=Ar((t,e)=>t<=e?1:0),RRt=Yr(G$,dwe,null,"bool"),DRt={kernelName:G$,backendName:"cpu",kernelFunc:RRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fwe(t,e,n){const r=(e-t)/(n-1),s=js(n,"float32");s[0]=t;for(let i=1;i<s.length;i++)s[i]=s[i-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hwe=zc(t=>Math.log(t)),jRt=Wf(qw,hwe),MRt={kernelName:qw,backendName:"cpu",kernelFunc:jRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pwe(t,e,n,r){const s=Ds(r,le(n));for(let i=0;i<s.length;++i){const o=i*e;let a=t[o];for(let l=0;l<e;++l){const c=t[o+l];(Number.isNaN(c)||c>a)&&(a=c)}s[i]=a}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mwe=Ar((t,e)=>Math.max(t,e)),FRt=Yr(Xw,mwe),LRt={kernelName:Xw,backendName:"cpu",kernelFunc:FRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gwe=Ar((t,e)=>Math.min(t,e)),BRt=Yr(Yw,gwe),zRt={kernelName:Yw,backendName:"cpu",kernelFunc:BRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u6=Ar((t,e)=>t*e),VRt=l6((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),qA=Yr(Zw,u6,VRt),WRt={kernelName:Zw,backendName:"cpu",kernelFunc:qA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ywe(t,e,n){const r=jf(-1,n);return u6([],e,r,t,n)}function URt(t){const{inputs:e,backend:n}=t,{x:r}=e;Ze(r,"neg");const s=n.data.get(r.dataId).values,[i,o]=ywe(s,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}const GRt={kernelName:nA,backendName:"cpu",kernelFunc:URt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vwe=Ar((t,e)=>t!==e?1:0),HRt=Yr(rA,vwe,null,"bool"),qRt={kernelName:rA,backendName:"cpu",kernelFunc:HRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d6(t,e,n,r,s){const i=e.length,o=le(e),a=st(e),l=st(s),c=Ds(n,le(s));for(let u=0;u<o;++u){const d=zv(u,i,a),h=new Array(d.length);for(let m=0;m<h.length;m++)h[m]=d[r[m]];const p=mc(h,i,l);c[p]=t[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ri(t){const{inputs:e,attrs:n,backend:r}=t,{x:s}=e,{perm:i}=n;Ze(s,"transpose");const o=s.shape.length,a=new Array(o);for(let d=0;d<a.length;d++)a[d]=s.shape[i[d]];const l=r.data.get(s.dataId).values,c=d6(l,s.shape,s.dtype,i,a);return{dataId:r.write(c,a,s.dtype),shape:a,dtype:s.dtype}}const KRt={kernelName:vg,backendName:"cpu",kernelFunc:Ri};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xwe(t,e,n,r){const[s,i]=ds(t,r),o=oo(e,"int32"),a=js(le(s),o),l=le(i);for(let c=0;c<a.length;++c){const u=c*l;let d=1;for(let h=0;h<l;++h)d*=n[u+h];a[c]=d}return{outVals:a,outShape:s,outDtype:o}}function XRt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ze(s,"prod");const a=s.shape.length,l=Vt(i,s.shape),c=lr(l,a);let u=l,d=s;const h=[];c!=null&&(d=Ri({inputs:{x:s},backend:n,attrs:{perm:c}}),h.push(d),u=Er(u.length,a));const p=n.data.get(d.dataId).values,{outVals:m,outShape:g,outDtype:y}=xwe(d.shape,d.dtype,p,u);let v=g;return o&&(v=Mr(g,l)),h.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(v,y,m)}const YRt={kernelName:cA,backendName:"cpu",kernelFunc:XRt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QRt(t,e,n){t.forEach((r,s)=>{if(r<0||r>=n){const i=zv(s,e.length,st(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function ZRt(t,e){for(let n=0;n<t.length;++n){const r=t[n],s=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function JRt(t,e,n,r){const s=[];let i=0;const o=e.length-1+n.length,a=new Array(o).fill(null).map(()=>[0]);ZRt(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let d=1;d<l+1;++d)a[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let h=0;h<n.length;++h){const p=n[h],m=h+e.length-1;if(m>=0){const g=a[m],y=g[g.length-1]-p[u];for(let v=u;v<d;++v)a[m].push(p[v+1]+y)}u=p[u],d=p[d]}d!==u&&(s.push([u,d]),i+=d-u)}return{outSplits:a,valueSlices:s,numValues:i}}function eDt(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,s=Nr("int32",r);e.push(s),t[n].forEach((i,o)=>s[o]=i)}return e}function MX(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function tDt(t,e,n,r,s,i){const o=MX(e,2)[1],a=MX(i,2)[1];let l=0;for(const c of n)for(let u=c[0];u<c[1];++u){for(let d=0;d<r;++d)s[l*a+d]=t[u*o+d];++l}}function nDt(t,e,n,r,s){const i=e.slice();i[0]=s;const o=Nr(n,le(i)),a=t.length,l=a===0?0:a/e[0];return tDt(t,e,r,l,o,i),[o,i]}function bwe(t,e,n,r,s,i,o,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(QRt(i,o,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:d,numValues:h}=JRt(i,o,t,c),p=eDt(u),m=nDt(n,r,s,d,h);return[p,m[0],m[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FX=2147483647;function wwe(t,e,n,r,s,i,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=s.length===0,c=o.length===0,u=[];a||u.push(e[0]),l||u.push(s[0]),c||u.push(o[0]);for(let y=1;y<u.length;++y)if(u[y]!==u[y-1])throw new Error("starts, limits, and deltas must have the same shape");const d=u.length===0?1:u[0],h=Nr("int32",d+1);h[0]=0;for(let y=0;y<d;++y){const v=a?t[0]:t[y],x=l?r[0]:r[y],b=c?i[0]:i[y];if(b===0)throw new Error("Requires delta != 0");let S;if(b>0&&x<v||b<0&&x>v)S=0;else if(S=Math.ceil(Math.abs((x-v)/b)),S>FX)throw new Error(`Requires ((limit - start) / delta) <= ${FX}`);h[y+1]=h[y]+S}const p=h[d],m=Nr(n,p);let g=0;for(let y=0;y<d;++y){const v=h[y+1]-h[y];let x=a?t[0]:t[y];const b=c?i[0]:i[y];for(let S=0;S<v;++S)m[g++]=x,x+=b}return[h,m]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Qo=nl;class BT{constructor(e,n,r,s,i,o,a,l,c,u){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=o0e(u),this.raggedRank=a0e(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Qo.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Qo.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Qo.VALUE_ROWIDS:return BT.getMaxWidthValueRowID(n);case Qo.ROW_SPLITS:return BT.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Qo[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const i=e[s+1]-e[s];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,s=e[0],i=0;for(let o=1;o<n;++o){const a=e[o];a!==s&&(s=a,i=Math.max(o-r,i),r=o)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return BX(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;l0e(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=i0e(this.raggedRank,s,n);o[0]<0&&(o[0]=e);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(e,n,r){const s=Math.min(e,r),i=[];let o=0;for(let a=0;a<s;++a,o+=n)i.push(o);for(let a=s;a<e;++a)i.push(-1);return L(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,s){const i=e.length,o=[];for(let a=0;a<i-1;++a){const l=e[a+1]-e[a];let c=Math.min(s,l),u=n[a];u===-1&&(c=0);for(let d=0;d<c;++d)o.push(u),u+=r;for(let d=0;d<l-c;++d)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,s){const i=e.length,o=[];if(i===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];o.push(c);for(let u=1;u<i;++u){const d=e[u];if(d===l)c>=0&&(++a,a<s?c+=r:c=-1);else{if(a=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}o.push(c)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,s){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case Qo.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,s);case Qo.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,s);default:throw new Error(`Unsupported partition type: ${Qo[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Qo.FIRST_DIM_SIZE:return e[0];case Qo.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Qo.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Qo[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*r[l+1];const i=BX(r,!1),o=Nr(this.valuesDType,le(i));if(s[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,s[c],r[c]);this.setOutput(this.raggedRank,l,o,i)}return[i,o]}setOutput(e,n,r,s){if(r.length===0)return;const i=this.values,o=r;let a=s.slice();a=a.slice(e+1);const l=le(a),c=n.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const m=this.defaultValueShape;re(()=>{const g=Z(u,m);u=A0(g,a).dataSync()})}let d=0,h=0,p=0;for(let m=0;m<=c;++m){let g=m<c?n[m]:-1;if(g===p){++p;continue}if(h<p){const y=i.subarray(d*l),v=o.subarray(h*l),x=(p-h)*l;LX(v,y,x)}if(m>=c){const y=r.length;g=Math.floor(y/l)}if(g>p)if(this.defaultValue.length===1)o.subarray(p*l,g*l).fill(this.defaultValue[0]),p=g;else for(;g>p;){const y=o.slice(p*l);LX(y,u,l),++p}g<0?(d=m+1,h=p):(d=m,h=p,p=h+1)}}}function LX(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function BX(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function Swe(t,e,n,r,s,i,o,a,l,c){return new BT(t,e,n,r,s,i,o,a,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cwe(t,e,n,r){const s=t===e,i=t<e&&n<0,o=e<t&&n>1;if(s||i||o)return js(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=js(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nwe=zc(t=>1/Math.sqrt(t)),rDt=Wf(sS,Nwe),sDt={kernelName:sS,backendName:"cpu",kernelFunc:rDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ih(t,e,n,r,s,i,o,a,l,c){const u=[r/s,s],d=t.values,h=e.values;if(r===0)return zt(n,e.dtype);const p=l instanceof vs?l:zt(u,e.dtype);typeof l=="string"||typeof l=="number"?p.values.fill(l):typeof l=="boolean"&&p.values.fill(+l);for(let m=0;m<i;m++){const g=[];let y=0;for(let v=0;v<o;v++){const x=d[m*o+v];g.push(x),y+=x*a[v]}if(y<0||y>=r/s)throw new Error(`Invalid indices: ${g} does not index into ${n}`);for(let v=0;v<s;v++)c?p.values[y*s+v]+=h[m*s+v]:p.values[y*s+v]=e.rank===0?h[0]:h[m*s+v]}return p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iDt=zc(t=>1/(1+Math.exp(-t))),_we=xn(cS,t=>1/(1+Math.exp(-t))),oDt={kernelName:cS,backendName:"cpu",kernelFunc:_we};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Twe(t,e,n,r,s){const i=y5(r,e,n),o=le(n),a=st(r);if(i){const d=v5(e,a);return s==="string"?t.slice(d,d+o):t.subarray(d,d+o)}const l=s==="string"?Bu(t):t,c=zt(r,s,l),u=zt(n,s);for(let d=0;d<u.size;++d){const h=u.indexToLoc(d),p=h.map((m,g)=>m+e[g]);u.set(c.get(...p),...h)}return s==="string"?E0e(u.values):u.values}function Ep(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:o}=r;Ze(s,"slice");const[a,l]=OA(s,i,o);m5(s,a,l);const c=n.data.get(s.dataId).values,u=Twe(c,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,u)}const aDt={kernelName:mA,backendName:"cpu",kernelFunc:Ep};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kwe(t,e,n,r,s,i,o){const a=e[0],l=i[0],c=new Array(l),u=new Array(a),d=e[1];if(l===0){if(a!==0)throw new Error(m0e(a));const y=Nr(n,0),v=Nr(s,0);return[y,[0,d],v,c,u]}let h=!0,p=0;const m=new Array(l).fill(0);for(let y=0;y<a;++y){const v=t[y*d];if(v<0)throw new Error(g0e(y,v));if(v>=l)throw new Error(y0e(y,v,l));++m[v],h=h&&v>=p,p=v}let g=!0;for(let y=0;y<l;++y){const v=m[y]===0;c[y]=v,g=g&&!v,m[y]=Math.max(m[y],1),y>0&&(m[y]+=m[y-1])}if(g&&h){const y=t,v=r;for(let x=0;x<a;++x)u[x]=x;return[y,[a,d],v,c,u]}else{const y=m[l-1],v=Nr(n,y*d),x=Nr(s,y),b=new Array(l).fill(0);for(let S=0;S<a;++S){const w=t[S*d],C=b[w],_=(w===0?0:m[w-1])+C;b[w]++;for(let T=0;T<d;++T)v[_*d+T]=t[S*d+T];x[_]=r[S],u[S]=_}for(let S=0;S<l;++S)if(b[S]===0){const C=S===0?0:m[S-1];v[C*d+0]=S;for(let _=1;_<d;++_)v[C*d+_]=0;x[C]=o}return[v,[y,d],x,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ewe(t,e,n,r,s){const i=le(r),o=e[0],a=s.length,l=[];let c=1,u=-1;for(let y=0;y<a;++y){const v=s[y];if(v===-1){if(u!==-1)throw new Error(v0e(u,y));u=y,l.push(1)}else{if(v<0)throw new Error(x0e(y,v));c*=v,l.push(v)}}if(u!==-1){if(c<=0)throw new Error(b0e());const y=Math.trunc(i/c);if(c*y!==i)throw new Error(w0e(r,l));l[u]=y}if(le(l)!==i)throw new Error(S0e(r,l));const h=r.length,p=[];if(h>0){p[h-1]=1;for(let y=h-2;y>=0;--y)p[y]=p[y+1]*r[y+1]}const m=[];if(a>0){m[a-1]=1;for(let y=a-2;y>=0;--y)m[y]=m[y+1]*l[y+1]}const g=Nr(n,o*a);for(let y=0;y<o;++y){let v=0;for(let x=0;x<h;++x)v+=t[y*h+x]*p[x];for(let x=0;x<a;++x)g[y*a+x]=Math.trunc(v/m[x]),v%=m[x]}return[g,[o,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f6(t,e,n,r,s,i=!1,o=0){const a=r.length,l=[e[0],t.length/e[0]],c=l[1],d=a>0?s[a-1]+1:0;if(d<0)throw new Error(cF());const h=e.slice();h[0]=d;const p=h.reduce((b,S)=>b*S,1),m=Nr(n,p);if(a===0)return d>0&&m.fill(o),[m,h];if(d<=0)throw new Error(cF());let g=0,y=1,v=0,x=s[g];for(;;){let b=0;if(y<a){if(b=s[y],x===b){++y;continue}if(x>=b)throw new Error(C0e())}if(x<0||x>=d)throw new Error(N0e(x,d));x>v&&m.fill(o,v*c,x*c);for(let S=g;S<y;++S){const w=r[S];if(w<0||w>=l[0])throw new Error(_0e(S,r[S],l[0]));for(let C=0;C<c;C++)m[x*c+C]+=t[w*c+C]}if(i)for(let S=0;S<c;S++)m[x*c+S]/=y-g;if(g=y,++y,v=x+1,x=b,y>a)break}return v<d&&m.fill(o,v*c,d*c),[m,h]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lDt=zc(t=>Math.sqrt(t)),cDt=xn(dS,t=>Math.sqrt(t)),uDt={kernelName:dS,backendName:"cpu",kernelFunc:cDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $we=Ar((t,e)=>{const n=t-e;return n*n}),dDt=Yr(fS,$we),fDt={kernelName:fS,backendName:"cpu",kernelFunc:dDt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Awe=zc((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=e;return t.replace(new RegExp(n,r?"g":""),s)}),hDt=Wf(CV,Awe),pDt={kernelName:CV,backendName:"cpu",kernelFunc:hDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iwe(t,e,n,r){const s=zt(t,e.dtype);for(let i=0;i<s.size;i++){const o=s.indexToLoc(i),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*n[l]+r[l];s.set(e.get(...a),...o)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mDt{constructor(e,n,r,s,i,o){this.separator=Kd(e),this.nGramWidths=n,this.leftPad=Kd(r),this.rightPad=Kd(s),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,s,i,o){for(let a=0;a<i;++a){const l=this.getPadWidth(o),c=Math.max(0,l-a),u=Math.max(0,l-(i-(a+1))),d=o-(c+u),h=n+(c>0?0:a-l);let p=0;p+=c*this.leftPad.length;for(let x=0;x<d;++x)p+=e[h+x].length;p+=u*this.rightPad.length;const m=c+u+d-1;p+=m*this.separator.length,r[s+a]=new Uint8Array(p);const g=r[s+a];let y=0;const v=x=>x.forEach(b=>g[y++]=b);for(let x=0;x<c;++x)v(this.leftPad),v(this.separator);for(let x=0;x<d-1;++x)v(e[h+x]),v(this.separator);if(d>0){v(e[h+d-1]);for(let x=0;x<u;++x)v(this.separator),v(this.rightPad)}else{for(let x=0;x<u-1;++x)v(this.rightPad),v(this.separator);v(this.rightPad)}}}compute(e,n){const r=e.length,s=n.length;if(s>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<s;++c){let u=n[c]>=l;if(u=u&&n[c]<=r,!u)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=s-1,o=Nr("int32",s);if(r===0||s===0){const l=new Array(r);for(let c=0;c<=i;++c)o[c]=0;return[l,o]}o[0]=0;for(let l=1;l<=i;++l){const c=n[l]-n[l-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),o[l]=o[l-1]+u}const a=new Array(o[i]);for(let l=0;l<i;++l){const c=n[l];let u=o[l];if(this.nGramWidths.forEach(d=>{const h=n[l+1]-n[l],p=this.getNumNGrams(h,d);this.createNGrams(e,c,a,u,p,d),u+=p}),this.preserveShort&&u===o[l]){const d=n[l+1]-n[l];if(d===0)continue;const h=d+2*this.padWidth;this.createNGrams(e,c,a,u,1,h)}}return[a,o]}}function Owe(t,e,n,r,s,i,o,a){return new mDt(n,r,s,i,o,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gDt(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let o=t.indexOf(i);for(;o!==-1;){const a=t.subarray(0,o);(!n||a.length!==0)&&r.push(a),t=t.subarray(o+1),o=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let s=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const o=t.subarray(s,i);(!n||o.length!==0)&&r.push(o),s=i+1}}function Pwe(t,e,n){const r=t.length,s=[];let i=0,o=0;const a=new Array(r);for(let h=0;h<r;++h){const p=s.length;gDt(t[h],e,n,s);const m=s.length-p;a[h]=m,i+=m,o=Math.max(o,m)}const l=Nr("int32",i*2),c=new Array(i),u=[r,o];let d=0;for(let h=0;h<r;++h)for(let p=0;p<a[h];++p)l[d*2]=h,l[d*2+1]=p,c[d]=s[d],++d;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rwe(t,e){const n=Nr("int32",t.length);for(let r=0;r<t.length;++r)n[r]=Z2t(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dwe=Ar((t,e)=>t-e),yDt=l6((t,e,n,r)=>({real:t-n,imag:e-r})),h6=Yr(hS,Dwe,yDt),vDt={kernelName:hS,backendName:"cpu",kernelFunc:h6};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jwe(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=zt(n,t.dtype);for(let s=0;s<r.values.length;++s){const i=r.indexToLoc(s),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=i[l]%t.shape[l];const a=t.locToIndex(o);r.values[s]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t0=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function Mwe(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,c=Math.log(a),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),h=Math.max(n,Math.floor(e-l*u/a+d)),p=Math.min(r,Math.floor(e+(a-l)*u/a+d));Mwe(t,e,h,p)}const s=t[e];let i=n,o=r;for(_m(t,n,e),t0(t[r],s)>0&&_m(t,n,r);i<o;){for(_m(t,i,o),i++,o--;t0(t[i],s)<0;)i=i+1;for(;t0(t[o],s)>0;)o=o-1}t0(t[n],s)===0?_m(t,n,o):(o=o+1,_m(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function Fwe(t,e,n,r,s){const i=e[e.length-1],[o,a]=[t.length/i,i],l=Ds(n,o*r),c=Ds("int32",o*r);for(let d=0;d<o;d++){const h=d*a,p=t.subarray(h,h+a);let m=new Array(p.length);p.forEach((x,b)=>m[b]={value:x,index:b}),r<m.length&&(Mwe(m,r),m=m.slice(0,r)),s&&m.sort(t0);const g=d*r,y=l.subarray(g,g+r),v=c.subarray(g,g+r);for(let x=0;x<r;x++)y[x]=m[x].value,v[x]=m[x].index}const u=e.slice();return u[u.length-1]=r,[zt(u,n,l),zt(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lwe(t,e,n,r){const s=Vt(e,n)[0],i=[1,n[0],1];for(let m=0;m<s;m++)i[0]*=n[m];i[1]=n[s];for(let m=s+1;m<n.length;m++)i[2]*=n[m];const o=new Map,a=new Int32Array(n[s]),l=new vs(i,r,t),c=[],u=i[0]===1&&i[2]===1;for(let m=0;m<n[s];m++){let g;if(u)g=t[m].toString();else{const v=[];for(let x=0;x<i[0];x++)for(let b=0;b<i[2];b++)v.push(l.get(x,m,b));g=v.join(",")}const y=o.get(g);if(y!=null)a[m]=y;else{const v=o.size;o.set(g,v),a[m]=v,c.push(m)}}const d=i.slice();d[1]=o.size;const h=new vs(d,r);c.forEach((m,g)=>{for(let y=0;y<i[0];y++)for(let v=0;v<i[2];v++)h.set(l.get(y,m,v),y,g,v)});const p=n.slice();return p[s]=d[1],{outputValues:h.values,outputShape:p,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xDt=Object.freeze(Object.defineProperty({__proto__:null,addImpl:K1e,bincountImpl:c6,bincountReduceImpl:X1e,bitwiseAndImpl:Y1e,castImpl:q1e,ceilImpl:Q1e,concatImpl:Z1e,equalImpl:J1e,expImpl:twe,expm1Impl:rwe,floorDivImpl:iwe,floorImpl:swe,gatherNdImpl:owe,gatherV2Impl:awe,greaterEqualImpl:cwe,greaterImpl:lwe,lessEqualImpl:dwe,lessImpl:uwe,linSpaceImpl:fwe,logImpl:hwe,maxImpl:pwe,maximumImpl:mwe,minimumImpl:gwe,multiplyImpl:u6,negImpl:ywe,notEqualImpl:vwe,prodImpl:xwe,raggedGatherImpl:bwe,raggedRangeImpl:wwe,raggedTensorToTensorImpl:Swe,rangeImpl:Cwe,rsqrtImpl:Nwe,scatterImpl:Ih,sigmoidImpl:iDt,simpleAbsImpl:H1e,sliceImpl:Twe,sparseFillEmptyRowsImpl:kwe,sparseReshapeImpl:Ewe,sparseSegmentReductionImpl:f6,sqrtImpl:lDt,squaredDifferenceImpl:$we,staticRegexReplaceImpl:Awe,stridedSliceImpl:Iwe,stringNGramsImpl:Owe,stringSplitImpl:Pwe,stringToHashBucketFastImpl:Rwe,subImpl:Dwe,tileImpl:jwe,topKImpl:Fwe,transposeImpl:d6,uniqueImpl:Lwe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rxe("cpu",()=>new HA,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bwe=xn(jw,t=>t>=0?t:Math.exp(t)-1),bDt={kernelName:jw,backendName:"cpu",kernelFunc:Bwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r;Ze([s],"leakyRelu");const o=le(s.shape),a=n.data.get(s.dataId).values,l=Ds("float32",o);for(let c=0;c<a.length;c++)l[c]=a[c]<0?i*a[c]:a[c];return n.makeTensorInfo(s.shape,"float32",l)}const wDt={kernelName:W$,backendName:"cpu",kernelFunc:zwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SDt=Ar((t,e)=>t<0?e*t:t);function Vwe(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e;Ze([r,s],"prelu");const i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,[a,l]=SDt(r.shape,s.shape,i,o,"float32");return n.makeTensorInfo(l,"float32",a)}const CDt={kernelName:lA,backendName:"cpu",kernelFunc:Vwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wwe=xn(tS,t=>Math.max(0,t)),NDt={kernelName:tS,backendName:"cpu",kernelFunc:Wwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uwe=xn(nS,t=>Math.min(Math.max(0,t),6)),_Dt={kernelName:nS,backendName:"cpu",kernelFunc:Uwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zT(t,e,n,r,s){if(n==="linear")return Rc({inputs:{x:e},backend:t});if(n==="relu")return Wwe({inputs:{x:e},backend:t});if(n==="elu")return Bwe({inputs:{x:e},backend:t});if(n==="relu6")return Uwe({inputs:{x:e},backend:t});if(n==="prelu")return Vwe({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return zwe({inputs:{x:e},backend:t,attrs:{alpha:s}});if(n==="sigmoid")return _we({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dn(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,o=le(s.shape),a=lve(i,o),l=le(a);L(o===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${s.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(s.dataId);const c=n.data.get(s.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=a,d.shape=a}return{dataId:s.dataId,shape:a,dtype:s.dtype}}const TDt={kernelName:uA,backendName:"cpu",kernelFunc:Dn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gwe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:o,transposeB:a}=r;Ze([s,i],"matMul");const l=s.shape.length,c=i.shape.length,u=o?s.shape[l-2]:s.shape[l-1],d=a?i.shape[c-1]:i.shape[c-2],h=o?s.shape[l-1]:s.shape[l-2],p=a?i.shape[c-2]:i.shape[c-1],m=s.shape.slice(0,-2),g=i.shape.slice(0,-2),y=le(m),v=le(g),b=Pt(s.shape.slice(0,-2),i.shape.slice(0,-2)).concat([h,p]);L(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${s.shape} and ${i.shape} and transposeA=${o} and transposeB=${a} must match.`);const S=o?[y,u,h]:[y,h,u],w=a?[v,p,d]:[v,d,p],C=Dn({inputs:{x:s},backend:n,attrs:{shape:S}}),_=Dn({inputs:{x:i},backend:n,attrs:{shape:w}}),T=o?C.shape[1]:C.shape[2],k=o?C.shape[2]:C.shape[1],$=a?_.shape[1]:_.shape[2],O=Math.max(y,v),P=n.data.get(C.dataId).values,D=n.data.get(_.dataId).values,A=st(C.shape),I=st(_.shape),[R,M,E]=o?[A[0],1,A[1]]:[A[0],A[1],1],[j,B,W]=a?[1,I[1],I[0]]:[I[1],1,I[0]],G=k*$,te=zt([O,k,$],C.dtype),ne=te.values,ue=n.blockSize;for(let ge=0;ge<O;ge++){const de=ge%y,we=ge%v;for(let se=0;se<k;se+=ue){const he=Math.min(se+ue,k);for(let me=0;me<$;me+=ue){const Y=Math.min(me+ue,$);for(let ye=0;ye<T;ye+=ue){const Ae=Math.min(ye+ue,T);for(let Re=se;Re<he;Re++)for(let ze=me;ze<Y;ze++){let rt=0;for(let z=ye;z<Ae;z++){const Q=P[de*R+Re*M+z*E],ie=D[z*j+ze*B+we*W];rt+=Q*ie}ne[ge*G+(Re*$+ze)]+=rt}}}}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(_),n.makeTensorInfo(b,te.dtype,te.values)}const kDt={kernelName:E$,backendName:"cpu",kernelFunc:Gwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EDt(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;let h,p,m;const g=[];h=Gwe({inputs:{a:s,b:i},attrs:{transposeA:l,transposeB:c},backend:n}),o&&(p=Uy({inputs:{a:h,b:o},backend:n}),g.push(h),h=p),u&&(m=zT(n,h,u,a,d),g.push(h),h=m);for(const v of g)n.disposeIntermediateTensorInfo(v);return h}const $Dt={kernelName:xT,backendName:"cpu",kernelFunc:EDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ADt=xn(Cw,t=>Math.acos(t)),IDt={kernelName:Cw,backendName:"cpu",kernelFunc:ADt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ODt=xn(Nw,t=>Math.acosh(t)),PDt={kernelName:Nw,backendName:"cpu",kernelFunc:ODt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RDt(t){const{inputs:e,backend:n}=t,r=e;Ze(e,"addN");const s=r.map(a=>n.data.get(a.dataId).values),i=zt(r[0].shape,r[0].dtype),o=i.values;for(let a=0;a<r.length;a++){const l=s[a];for(let c=0;c<o.length;c++)o[c]+=l[c]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const DDt={kernelName:Vz,backendName:"cpu",kernelFunc:RDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jDt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ze(s,"all");const a=Vt(i,s.shape);let l=a;const c=lr(l,s.shape.length);let u=s;c!=null&&(u=Ri({inputs:{x:s},backend:n,attrs:{perm:c}}),l=Er(l.length,s.shape.length)),Ss("all",l,u.shape.length);const[d,h]=ds(u.shape,l),p=le(h),m=js(le(d),u.dtype),g=n.data.get(u.dataId).values;for(let v=0;v<m.length;++v){const x=v*p;let b=g[x];for(let S=0;S<p;++S){const w=g[x+S];b=b&&w}m[v]=b}c!=null&&n.disposeIntermediateTensorInfo(u);const y=n.makeTensorInfo(d,u.dtype,m);if(o){const v=Mr(d,a),x=Dn({inputs:{x:y},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(y),x}return y}const MDt={kernelName:Wz,backendName:"cpu",kernelFunc:jDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FDt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ze(s,"any");const a=Vt(i,s.shape);let l=a;const c=lr(l,s.shape.length);let u=s;c!=null&&(u=Ri({inputs:{x:s},backend:n,attrs:{perm:c}}),l=Er(l.length,s.shape.length)),Ss("any",l,u.shape.length);const[d,h]=ds(u.shape,l),p=le(h),m=js(le(d),u.dtype),g=n.data.get(u.dataId).values;for(let v=0;v<m.length;++v){const x=v*p;let b=g[x];for(let S=0;S<p;++S){const w=g[x+S];b=b||w}m[v]=b}c!=null&&n.disposeIntermediateTensorInfo(u);const y=n.makeTensorInfo(d,u.dtype,m);if(o){const v=Mr(d,a),x=Dn({inputs:{x:y},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(y),x}return y}const LDt={kernelName:Uz,backendName:"cpu",kernelFunc:FDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BDt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;Ze(s,"argMax");let o=Vt(i,s.shape);const a=lr(o,s.shape.length);let l=s;const c=[];a!=null&&(l=Ri({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=Er(o.length,l.shape.length)),o=[o[0]],Ss("argMax",o,l.shape.length);const[u,d]=ds(l.shape,o),h=le(u),p=js(h,"int32"),m=le(d),g=n.data.get(l.dataId).values;for(let y=0;y<p.length;++y){const v=y*m;let x=g[v],b=0;for(let S=0;S<m;++S){const w=g[v+S];w>x&&(x=w,b=S)}p[y]=b}return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(u,"int32",p)}const zDt={kernelName:N$,backendName:"cpu",kernelFunc:BDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VDt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;Ze(s,"argMin");let o=Vt(i,s.shape);const a=lr(o,s.shape.length);let l=s;const c=[];a!=null&&(l=Ri({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=Er(o.length,l.shape.length)),o=[o[0]],Ss("argMin",o,l.shape.length);const[u,d]=ds(l.shape,o),h=le(u),p=js(h,"int32"),m=le(d),g=n.data.get(l.dataId).values;for(let y=0;y<p.length;++y){const v=y*m;let x=g[v],b=0;for(let S=0;S<m;++S){const w=g[v+S];w<x&&(x=w,b=S)}p[y]=b}return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(u,"int32",p)}const WDt={kernelName:_$,backendName:"cpu",kernelFunc:VDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UDt=xn(_w,t=>Math.asin(t)),GDt={kernelName:_w,backendName:"cpu",kernelFunc:UDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HDt=xn(Tw,t=>Math.asinh(t)),qDt={kernelName:Tw,backendName:"cpu",kernelFunc:HDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KDt=xn(kw,t=>Math.atan(t)),XDt={kernelName:kw,backendName:"cpu",kernelFunc:KDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YDt=Ar((t,e)=>Math.atan2(t,e)),QDt=Yr($w,YDt),ZDt={kernelName:$w,backendName:"cpu",kernelFunc:QDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JDt=xn(Ew,t=>Math.atanh(t)),ejt={kernelName:Ew,backendName:"cpu",kernelFunc:JDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p6(t,e,n,r,s,i){const o=s.strideHeight,a=s.strideWidth,l=s.dilationHeight,c=s.dilationWidth,u=s.effectiveFilterHeight,d=s.effectiveFilterWidth,h=s.padInfo.top,p=s.padInfo.left,m=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=zt(s.outShape,n),y=g.values,v=s.outShape[1]*s.outShape[2]*s.outShape[3],x=s.outShape[2]*s.outShape[3],b=s.outShape[3];for(let S=0;S<s.batchSize;++S){const w=S*v,C=S*r[0];for(let _=0;_<s.inChannels;++_)for(let T=0;T<s.outHeight;++T){const k=T*o-h,$=Math.max(0,k),O=Math.min(s.inHeight,u+k),P=w+T*x;for(let D=0;D<s.outWidth;++D){const A=D*a-p,I=Math.max(0,A),R=Math.min(s.inWidth,d+A);let M=m,E=0,j=0;for(let W=$;W<O;W+=l){const G=C+W*r[1];for(let te=I;te<R;te+=c){const ne=G+te*r[2],ue=t[ne+_];i==="max"&&ue>M?M=ue:i==="avg"&&(E+=ue,j++)}if(isNaN(M))break}const B=P+D*b+_;y[B]=i==="avg"?E/j:M}}}return g}function Hwe(t,e,n,r,s=!1,i=!1){const o=zt(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,m=r.padInfo.left,g=zt(e,n,t);for(let y=0;y<r.batchSize;++y)for(let v=0;v<r.inChannels;++v)for(let x=0;x<r.outHeight;++x){const b=x*a-p;let S=b;for(;S<0;)S+=c;const w=Math.min(r.inHeight,d+b);for(let C=0;C<r.outWidth;++C){const _=C*l-m;let T=_;for(;T<0;)T+=u;const k=Math.min(r.inWidth,h+_);let $=Number.NEGATIVE_INFINITY,O=-1;for(let P=S;P<w;P+=c){const D=P-b;for(let A=T;A<k;A+=u){const I=A-_,R=g.get(y,P,A,v);R>$&&($=R,s?O=i?((y*r.inHeight+P)*r.inWidth+A)*r.inChannels+v:(P*r.inWidth+A)*r.inChannels+v:O=D*h+I)}}o.set(O,y,x,C,v)}}return o}function qwe(t,e,n,r,s,i){const o=s.strideDepth,a=s.strideHeight,l=s.strideWidth,c=s.dilationDepth,u=s.dilationHeight,d=s.dilationWidth,h=s.effectiveFilterDepth,p=s.effectiveFilterHeight,m=s.effectiveFilterWidth,g=s.padInfo.front,y=s.padInfo.top,v=s.padInfo.left,x=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=zt(s.outShape,n),S=b.values,w=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],C=s.outShape[2]*s.outShape[3]*s.outShape[4],_=s.outShape[3]*s.outShape[4],T=s.outShape[4];for(let k=0;k<s.batchSize;++k){const $=k*w,O=k*r[0];for(let P=0;P<s.inChannels;++P)for(let D=0;D<s.outDepth;++D){const A=D*o-g;let I=A;for(;I<0;)I+=c;const R=Math.min(s.inDepth,h+A),M=$+D*C;for(let E=0;E<s.outHeight;++E){const j=E*a-y;let B=j;for(;B<0;)B+=u;const W=Math.min(s.inHeight,p+j),G=M+E*_;for(let te=0;te<s.outWidth;++te){const ne=te*l-v;let ue=ne;for(;ue<0;)ue+=d;const ge=Math.min(s.inWidth,m+ne),de=G+te*T;let we=x,se=0,he=0;for(let Y=I;Y<R;Y+=c){const ye=O+Y*r[1];for(let Ae=B;Ae<W;Ae+=u){const Re=ye+Ae*r[2];for(let ze=ue;ze<ge;ze+=d){const rt=Re+ze*r[3],z=t[rt+P];if(i==="max"&&z>we?we=z:i==="avg"&&(se+=z,he++),isNaN(we))break}if(isNaN(we))break}if(isNaN(we))break}const me=de+P;S[me]=i==="avg"?se/Math.max(he,1):we}}}}return b}function tjt(t,e){const n=zt(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.front,p=e.padInfo.top,m=e.padInfo.left;for(let g=0;g<e.batchSize;++g)for(let y=0;y<e.inChannels;++y)for(let v=0;v<e.outDepth;++v){const x=v*r-h;let b=x;for(;b<0;)b+=o;const S=Math.min(e.inDepth,c+x);for(let w=0;w<e.outHeight;++w){const C=w*s-p;let _=C;for(;_<0;)_+=a;const T=Math.min(e.inHeight,u+C);for(let k=0;k<e.outWidth;++k){const $=k*i-m;let O=$;for(;O<0;)O+=l;const P=Math.min(e.inWidth,d+$);let D=Number.NEGATIVE_INFINITY,A=-1;for(let I=b;I<S;I+=o){const R=I-x;for(let M=_;M<T;M+=a){const E=M-C;for(let j=O;j<P;j+=l){const B=j-$,W=t.get(g,I,M,j,y);W>=D&&(D=W,A=R*u*d+E*u+B)}}}n.set(A,g,v,w,k,y)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function njt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Ze(s,"avgPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;L(Fs(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Ma(s.shape,i,o,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&cn(u.inShape,u.outShape))d=Rc({inputs:{x:s},backend:n});else{const h=n.data.get(s.dataId).values,p=st(s.shape),m=p6(h,s.shape,s.dtype,p,u,"avg");d=n.makeTensorInfo(u.outShape,s.dtype,m.values)}return d}const rjt={kernelName:T$,backendName:"cpu",kernelFunc:njt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sjt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r;Ze(s,"avgPool3d");const u=Xu(s.shape,i,o,1,a,l,c),d=n.data.get(s.dataId).values,h=qwe(d,s.shape,s.dtype,st(s.shape),u,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}const ijt={kernelName:k$,backendName:"cpu",kernelFunc:sjt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ojt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=r;Ze([s,i],"avgPool3DGrad");const u=Xu(i.shape,o,a,1,l,c),d=u.strideDepth,h=u.strideHeight,p=u.strideWidth,m=u.filterDepth,g=u.filterHeight,y=u.filterWidth,v=u.dilationDepth,x=u.dilationHeight,b=u.dilationWidth,S=u.effectiveFilterDepth,w=u.effectiveFilterHeight,C=u.effectiveFilterWidth,_=S-1-u.padInfo.front,T=C-1-u.padInfo.left,k=w-1-u.padInfo.top,$=zt(i.shape,"float32"),O=1/(m*g*y),P=n.bufferSync(s);for(let D=0;D<u.batchSize;++D)for(let A=0;A<u.inChannels;++A)for(let I=0;I<u.inDepth;++I)for(let R=0;R<u.inHeight;++R)for(let M=0;M<u.inWidth;++M){const E=I-_,j=R-k,B=M-T;let W=0;for(let G=0;G<S;G+=v){const te=(E+G)/d;if(!(te<0||te>=u.outDepth||Math.floor(te)!==te))for(let ne=0;ne<w;ne+=x){const ue=(j+ne)/h;if(!(ue<0||ue>=u.outHeight||Math.floor(ue)!==ue))for(let ge=0;ge<C;ge+=b){const de=(B+ge)/p;if(de<0||de>=u.outWidth||Math.floor(de)!==de)continue;const we=P.get(D,te,ue,de,A);W+=we}}}$.set(W*O,D,I,R,M,A)}return n.makeTensorInfo($.shape,$.dtype,$.values)}const ajt={kernelName:Hz,backendName:"cpu",kernelFunc:ojt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ljt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i;Ze([s,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=Ma(o.shape,a,l,1,c),d=u.strideHeight,h=u.strideWidth,p=u.filterHeight,m=u.filterWidth,g=u.dilationHeight,y=u.dilationWidth,v=u.effectiveFilterHeight,x=u.effectiveFilterWidth,b=x-1-u.padInfo.left,S=v-1-u.padInfo.top,w=zt(o.shape,"float32"),C=1/(p*m),_=n.data.get(s.dataId).values,T=zt(s.shape,"float32",_);for(let k=0;k<u.batchSize;++k)for(let $=0;$<u.inChannels;++$)for(let O=0;O<u.inHeight;++O)for(let P=0;P<u.inWidth;++P){const D=O-S,A=P-b;let I=0;for(let R=0;R<v;R+=g){const M=(D+R)/d;if(!(M<0||M>=u.outHeight||Math.floor(M)!==M))for(let E=0;E<x;E+=y){const j=(A+E)/h;if(j<0||j>=u.outWidth||Math.floor(j)!==j)continue;const B=T.get(k,M,j,$);I+=B}}w.set(I*C,k,O,P,$)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const cjt={kernelName:Gz,backendName:"cpu",kernelFunc:ljt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ujt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,scale:i,offset:o,mean:a,variance:l}=e;L(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),L(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),L(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Ze([s,a,l,i,o],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const u=n.data.get(s.dataId).values,d=n.data.get(a.dataId).values,h=n.data.get(l.dataId).values,p=i?n.data.get(i.dataId).values:new Float32Array([1]),m=o?n.data.get(o.dataId).values:new Float32Array([0]),g=new Float32Array(u.length),y=m.length,v=p.length,x=h.length,b=d.length;let S=0,w=0,C=0,_=0;for(let T=0;T<u.length;++T)g[T]=m[S++]+(u[T]-d[w++])*p[C++]/Math.sqrt(h[_++]+c),S>=y&&(S=0),w>=b&&(w=0),C>=v&&(C=0),_>=x&&(_=0);return n.makeTensorInfo(s.shape,s.dtype,g)}const djt={kernelName:B$,backendName:"cpu",kernelFunc:ujt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fjt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:o}=r;Ze([s],"batchToSpaceND");const a=i.reduce((v,x)=>v*x),l=CS(s.shape,i,a),c=NS(l.length,i.length),u=_S(s.shape,i,a),d=C5(o,i.length),h=N5(u,o,i.length),p=Dn({inputs:{x:s},backend:n,attrs:{shape:l}}),m=Ri({inputs:{x:p},backend:n,attrs:{perm:c}}),g=Dn({inputs:{x:m},backend:n,attrs:{shape:u}}),y=Ep({inputs:{x:g},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}const hjt={kernelName:$$,backendName:"cpu",kernelFunc:fjt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pjt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o}=r,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,c=c6(a,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}const mjt={kernelName:qz,backendName:"cpu",kernelFunc:pjt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gjt(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,a=Pt(Array.from(i),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const yjt={kernelName:pve,backendName:"cpu",kernelFunc:gjt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vjt=xn(Ow,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),xjt={kernelName:Ow,backendName:"cpu",kernelFunc:vjt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bjt=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(le(e.shape)),s=n.data.get(e.dataId),i=s.complexTensorInfos.real,o=s.complexTensorInfos.imag,a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values;for(let c=0;c<a.length;c++){const u=a[c],d=l[c];r[c]=Math.hypot(u,d)}return n.makeOutput(r,e.shape,"float32")},wjt={kernelName:A$,backendName:"cpu",kernelFunc:bjt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gy(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const Sjt={kernelName:dV,backendName:"cpu",kernelFunc:Gy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hy(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=Vt(s,e[0].shape)[0],o=e.map(g=>g.shape);b5(o,i);let a=yc(e.map(g=>g.shape),i);if(le(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(g=>le(g.shape)>0);if(l.length===1)return Rc({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const g=l.map(S=>kp({inputs:{input:S},backend:n})),y=l.map(S=>Gy({inputs:{input:S},backend:n})),v=Hy({inputs:g,backend:n,attrs:{axis:i}}),x=Hy({inputs:y,backend:n,attrs:{axis:i}}),b=Hi({inputs:{real:v,imag:x},backend:n});return g.forEach(S=>n.disposeIntermediateTensorInfo(S)),y.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),b}const c=l.map(g=>{const v=[-1,le(g.shape.slice(i))];return Dn({inputs:{x:g},backend:n,attrs:{shape:v}})}),u=c.map(g=>({vals:n.data.get(g.dataId).values,shape:g.shape}));a=yc(c.map(g=>g.shape),1);const d=c[0].shape[0]===1,h=Z1e(u,a,e[0].dtype,d),p=yc(l.map(g=>g.shape),i),m=n.makeTensorInfo(p,e[0].dtype,h);return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const Cjt={kernelName:I$,backendName:"cpu",kernelFunc:Hy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r;Ze([s,i],"conv2d");const d=Yu(l),h=ws(s.shape,i.shape,o,c,a,u,!1,d),p=h.filterHeight,m=h.filterWidth,g=h.dilationHeight,y=h.dilationWidth,v=h.padInfo.left,x=h.padInfo.top,b=h.dataFormat==="channelsLast",S=new vs(h.outShape,s.dtype),w=st(s.shape),C=st(i.shape),_=w[0],T=b?w[1]:w[2],k=b?w[2]:1,$=b?1:w[1],O=S.strides[0],P=b?S.strides[1]:S.strides[2],D=b?S.strides[2]:1,A=b?1:S.strides[1],I=n.data.get(s.dataId).values,R=n.data.get(i.dataId).values,M=S.values;for(let E=0;E<h.batchSize;++E){const j=E*_,B=E*O;for(let W=0;W<h.outHeight;++W){const G=B+W*P,te=W*h.strideHeight-x;for(let ne=0;ne<p;++ne){const ue=te+ne*g;if(ue<0||ue>=h.inHeight)continue;const ge=ne*C[0],de=j+ue*T;for(let we=0;we<h.outWidth;++we){const se=G+we*D,he=we*h.strideWidth-v;for(let me=0;me<m;++me){const Y=he+me*y;if(Y<0||Y>=h.inWidth)continue;const ye=ge+me*C[1],Ae=de+Y*k;let Re=ye;for(let ze=0;ze<h.inChannels;++ze){const rt=I[Ae+ze*$];for(let z=0;z<h.outChannels;++z)M[se+z*A]+=rt*R[Re+z];Re+=h.outChannels}}}}}}return n.makeTensorInfo(S.shape,S.dtype,M)}const Njt={kernelName:O$,backendName:"cpu",kernelFunc:Kwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _jt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;Ze([s,i],"conv2dBackpropFilter");const d=Yu(l),h=ws(s.shape,u,o,1,a,c,!1,d),{strideHeight:p,strideWidth:m,filterHeight:g,filterWidth:y}=h,v=h.dataFormat==="channelsLast",x=new vs(h.filterShape,"float32"),b=h.padInfo.left,S=h.padInfo.top,w=n.data.get(s.dataId).values,C=n.data.get(i.dataId).values,_=new vs(s.shape,s.dtype,w),T=new vs(i.shape,i.dtype,C);for(let k=0;k<g;++k){const $=Math.max(0,Math.ceil((S-k)/p)),O=Math.min(h.outHeight,(h.inHeight+S-k)/p);for(let P=0;P<y;++P){const D=Math.max(0,Math.ceil((b-P)/m)),A=Math.min(h.outWidth,(h.inWidth+b-P)/m);for(let I=0;I<h.inChannels;++I)for(let R=0;R<h.outChannels;++R){let M=0;for(let E=0;E<h.batchSize;++E)for(let j=$;j<O;++j){const B=k+j*p-S;for(let W=D;W<A;++W){const G=P+W*m-b;v?M+=_.get(E,B,G,I)*T.get(E,j,W,R):M+=_.get(E,I,B,G)*T.get(E,R,j,W)}}x.set(M,k,P,I,R)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const Tjt={kernelName:Yz,backendName:"cpu",kernelFunc:_jt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kjt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r;Ze([s,i],"conv2dBackpropInput");const d=st(i.shape),h=st(s.shape);let p=Yu(c);const m=ws(o,i.shape,a,1,l,u,!1,p),g=new vs(m.inShape,"float32"),y=g.values,v=n.data.get(s.dataId).values,x=n.data.get(i.dataId).values,[b,S,w]=d,{batchSize:C,filterHeight:_,filterWidth:T,inChannels:k,inHeight:$,inWidth:O,outChannels:P,outHeight:D,outWidth:A,strideHeight:I,strideWidth:R}=m;p=m.dataFormat;const M=_-1-m.padInfo.top,E=T-1-m.padInfo.left,j=p==="channelsLast",B=g.strides[0],W=j?g.strides[1]:g.strides[2],G=j?g.strides[2]:1,te=j?1:g.strides[1],ne=h[0],ue=j?h[1]:h[2],ge=j?h[2]:1,de=j?1:h[1];for(let we=0;we<C;++we)for(let se=0;se<k;++se)for(let he=0;he<$;++he){const me=he-M,Y=Math.max(0,Math.ceil(me/I)),ye=Math.min(D,(_+me)/I);for(let Ae=0;Ae<O;++Ae){const Re=Ae-E,ze=Math.max(0,Math.ceil(Re/R)),rt=Math.min(A,(T+Re)/R);let z=0;for(let ie=Y;ie<ye;++ie){const Ee=ie*I-me;for(let Se=ze;Se<rt;++Se){const Ne=Se*R-Re,qe=ne*we+ue*ie+ge*Se,mt=b*(_-1-Ee)+S*(T-1-Ne)+w*se;for(let En=0;En<P;++En){const $n=v[qe+de*En],Ns=x[mt+En];z+=$n*Ns}}}const Q=B*we+W*he+G*Ae+te*se;y[Q]=z}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const Ejt={kernelName:P$,backendName:"cpu",kernelFunc:kjt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $jt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r;Ze([s,i],"conv3d");const c=Mf(s.shape,i.shape,o,l,a),{filterDepth:u,filterHeight:d,filterWidth:h,dilationDepth:p,dilationHeight:m,dilationWidth:g,padInfo:y}=c,v=y.front,x=y.left,b=y.top,S=new vs(c.outShape,s.dtype),w=n.data.get(s.dataId).values,C=n.data.get(i.dataId).values,_=S.values,T=st(s.shape),k=st(i.shape);for(let $=0;$<c.batchSize;++$){const O=$*T[0],P=$*S.strides[0];for(let D=0;D<c.outDepth;++D){const A=P+D*S.strides[1],I=D*c.strideDepth-v;for(let R=0;R<u;++R){const M=I+R*p;if(M<0||M>=c.inDepth)continue;const E=R*k[0],j=O+M*T[1];for(let B=0;B<c.outHeight;++B){const W=A+B*S.strides[2],G=B*c.strideHeight-b;for(let te=0;te<d;++te){const ne=G+te*m;if(ne<0||ne>=c.inHeight)continue;const ue=E+te*k[1],ge=j+ne*T[2];for(let de=0;de<c.outWidth;++de){const we=W+de*c.outChannels,se=de*c.strideWidth-x;for(let he=0;he<h;++he){const me=se+he*g;if(me<0||me>=c.inWidth)continue;const Y=ue+he*k[2],ye=ge+me*c.inChannels;let Ae=Y;for(let Re=0;Re<c.inChannels;++Re){const ze=w[ye+Re];for(let rt=0;rt<c.outChannels;++rt)_[we+rt]+=ze*C[Ae+rt];Ae+=c.outChannels}}}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const Ajt={kernelName:R$,backendName:"cpu",kernelFunc:$jt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ijt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,filterShape:l}=r;Ze([s,i],"conv3dBackpropFilterV2");const c=st(s.shape),u=st(i.shape),d=Mf(s.shape,l,o,1,a),h=d.strideDepth,p=d.strideHeight,m=d.strideWidth,g=d.filterDepth,y=d.filterHeight,v=d.filterWidth,x=new vs(d.filterShape,"float32"),b=x.values,[S,w,C,_]=x.strides,T=n.data.get(i.dataId).values,[k,$,O,P]=u,D=n.data.get(s.dataId).values,[A,I,R,M]=c,E=d.padInfo.front,j=d.padInfo.left,B=d.padInfo.top;for(let W=0;W<g;++W){const G=Math.max(0,Math.ceil((E-W)/h)),te=Math.min(d.outDepth,(d.inDepth+E-W)/h),ne=W*S;for(let ue=0;ue<y;++ue){const ge=Math.max(0,Math.ceil((B-ue)/p)),de=Math.min(d.outHeight,(d.inHeight+B-ue)/p),we=ue*w+ne;for(let se=0;se<v;++se){const he=Math.max(0,Math.ceil((j-se)/m)),me=Math.min(d.outWidth,(d.inWidth+j-se)/m),Y=se*C+we;for(let ye=0;ye<d.inChannels;++ye){const Ae=ye*_+Y;for(let Re=0;Re<d.outChannels;++Re){let ze=0;for(let rt=0;rt<d.batchSize;++rt){const z=rt*A,Q=rt*k;for(let ie=G;ie<te;++ie){const Se=(W+ie*h-E)*I+z,Ne=ie*$+Q;for(let qe=ge;qe<de;++qe){const En=(ue+qe*p-B)*R+Se,$n=qe*O+Ne;for(let Ns=he;Ns<me;++Ns){const Hf=(se+Ns*m-j)*M+En,qf=Ns*P+$n;ze+=D[Hf+ye]*T[qf+Re]}}}}b[Ae+Re]=ze}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const Ojt={kernelName:Qz,backendName:"cpu",kernelFunc:Ijt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pjt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:o,strides:a,inputShape:l}=r;Ze([s],"conv3dBackpropInputV2");const c=st(s.shape),u=st(i.shape),d=Mf(l,i.shape,a,1,o),h=new vs(d.inShape,"float32"),p=h.values,[m,g,y,v]=h.strides,x=n.data.get(s.dataId).values,[b,S,w,C]=c,_=n.data.get(i.dataId).values,[T,k,$,O]=u,{batchSize:P,filterDepth:D,filterHeight:A,filterWidth:I,inChannels:R,inDepth:M,inHeight:E,inWidth:j,outChannels:B,outDepth:W,outHeight:G,outWidth:te,strideDepth:ne,strideHeight:ue,strideWidth:ge}=d,de=D-1-d.padInfo.front,we=A-1-d.padInfo.top,se=I-1-d.padInfo.left;for(let he=0;he<P;++he)for(let me=0;me<R;++me)for(let Y=0;Y<M;++Y){const ye=Y-de,Ae=Math.max(0,Math.ceil(ye/ne)),Re=Math.min(W,(D+ye)/ne);for(let ze=0;ze<E;++ze){const rt=ze-we,z=Math.max(0,Math.ceil(rt/ue)),Q=Math.min(G,(A+rt)/ue);for(let ie=0;ie<j;++ie){const Ee=ie-se,Se=Math.max(0,Math.ceil(Ee/ge)),Ne=Math.min(te,(I+Ee)/ge);let qe=0;for(let mt=Ae;mt<Re;++mt){const En=mt*ne-ye;for(let $n=z;$n<Q;++$n){const Ns=$n*ue-rt;for(let Gf=Se;Gf<Ne;++Gf){const Hf=Gf*ge-Ee,qf=b*he+S*mt+w*$n+C*Gf,JA=T*(D-1-En)+k*(A-1-Ns)+$*(I-1-Hf)+O*me;for(let Kf=0;Kf<B;++Kf){const eI=x[qf+Kf],BS=_[JA+Kf];qe+=eI*BS}}}}p[m*he+g*Y+y*ze+v*ie+me]=qe}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const Rjt={kernelName:Zz,backendName:"cpu",kernelFunc:Pjt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Djt=xn(Pw,t=>Math.cos(t)),jjt={kernelName:Pw,backendName:"cpu",kernelFunc:Djt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mjt=xn(Rw,t=>Math.cosh(t)),Fjt={kernelName:Rw,backendName:"cpu",kernelFunc:Mjt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ljt(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=r,[u,d,h,p]=s.shape,m=i.shape[0],[g,y]=a,v=zt([m,g,y,p],"float32"),x=n.data.get(i.dataId).values,b=n.data.get(o.dataId).values,S=n.data.get(s.dataId).values,w=st(s.shape),C=st(v.shape);for(let _=0;_<m;_++){const T=_*4,k=x[T],$=x[T+1],O=x[T+2],P=x[T+3],D=b[_];if(D>=u)continue;const A=g>1?(O-k)*(d-1)/(g-1):0,I=y>1?(P-$)*(h-1)/(y-1):0;for(let R=0;R<g;R++){const M=g>1?k*(d-1)+R*A:.5*(k+O)*(d-1);if(M<0||M>d-1){for(let E=0;E<y;E++)for(let j=0;j<p;j++){const B=j+E*C[2]+R*C[1]+_*C[0];v.values[B]=c}continue}if(l==="bilinear"){const E=Math.floor(M),j=Math.ceil(M),B=M-E;for(let W=0;W<y;W++){const G=y>1?$*(h-1)+W*I:.5*($+P)*(h-1);if(G<0||G>h-1){for(let ge=0;ge<p;ge++){const de=ge+W*C[2]+R*C[1]+_*C[0];v.values[de]=c}continue}const te=Math.floor(G),ne=Math.ceil(G),ue=G-te;for(let ge=0;ge<p;ge++){let de=ge+te*w[2]+E*w[1]+D*w[0];const we=S[de];de=ge+ne*w[2]+E*w[1]+D*w[0];const se=S[de];de=ge+te*w[2]+j*w[1]+D*w[0];const he=S[de];de=ge+ne*w[2]+j*w[1]+D*w[0];const me=S[de],Y=we+(se-we)*ue,ye=he+(me-he)*ue;de=ge+W*C[2]+R*C[1]+_*C[0],v.values[de]=Y+(ye-Y)*B}}}else for(let E=0;E<y;++E){const j=y>1?$*(h-1)+E*I:.5*($+P)*(h-1);if(j<0||j>h-1){for(let G=0;G<p;G++){const te=G+E*C[2]+R*C[1]+_*C[0];v.values[te]=c}continue}const B=Math.round(j),W=Math.round(M);for(let G=0;G<p;G++){const te=G+B*w[2]+W*w[1]+D*w[0],ne=G+E*C[2]+R*C[1]+_*C[0];v.values[ne]=S[te]}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const Bjt={kernelName:eV,backendName:"cpu",kernelFunc:Ljt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zjt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;Ze(s,"cumprod");const l=lr([i],s.shape.length);let c=s;l!=null&&(c=Ri({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=Er(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=oo(c.dtype,"int32"),h=Lz(le(c.shape),d),p=n.data.get(c.dataId).values,m=c.shape[c.shape.length-1],g=a?(v,x)=>v+m-x-1:(v,x)=>v+x;for(let v=0;v<p.length;v+=m)for(let x=0;x<m;x++){const b=g(v,x);if(x===0)h[b]=o?1:p[b];else{const S=g(v,x-1);h[b]=o?p[S]*h[S]:p[b]*h[S]}}const y=n.makeTensorInfo(c.shape,d,h);if(l!=null){const v=Ff(l),x=Ri({inputs:{x:y},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(c),x}return y}const Vjt={kernelName:Jz,backendName:"cpu",kernelFunc:zjt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wjt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;Ze(s,"cumsum");const l=lr([i],s.shape.length);let c=s;l!=null&&(c=Ri({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=Er(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=oo(c.dtype,"int32"),h=js(le(c.shape),d),p=n.data.get(c.dataId).values,m=c.shape[c.shape.length-1],g=a?(v,x)=>v+m-x-1:(v,x)=>v+x;for(let v=0;v<p.length;v+=m)for(let x=0;x<m;x++){const b=g(v,x);if(x===0)h[b]=o?0:p[b];else{const S=g(v,x-1);h[b]=o?p[S]+h[S]:p[b]+h[S]}}const y=n.makeTensorInfo(c.shape,d,h);if(l!=null){const v=Ff(l),x=Ri({inputs:{x:y},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(c),x}return y}const Ujt={kernelName:D$,backendName:"cpu",kernelFunc:Wjt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gjt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o,binaryOutput:a}=r;if(s.shape.length===1){const l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=c6(l,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(i),u=X1e(l,c,o,a);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const Hjt={kernelName:tV,backendName:"cpu",kernelFunc:Gjt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qjt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:o}=r;L(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const a=s.shape[0],l=s.shape[1],c=s.shape[2],u=s.shape[3],d=l*i,h=c*i,p=u/(i*i),m=n.data.get(s.dataId).values,g=new Float32Array(a*d*h*p);let y=0;for(let v=0;v<a;++v)for(let x=0;x<d;++x){const b=Math.floor(x/i),S=x%i;for(let w=0;w<h;++w){const C=Math.floor(w/i),_=w%i,T=(S*i+_)*p;for(let k=0;k<p;++k){const O=k+T+u*(C+c*(b+l*v));g[y++]=m[O]}}}return n.makeTensorInfo([a,d,h,p],s.dtype,g)}const Kjt={kernelName:nV,backendName:"cpu",kernelFunc:qjt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;Ze([s,i],"depthwiseConv2DNative");const u=st(s.shape),d=st(i.shape);let h=l;h==null&&(h=[1,1]),L(Fs(o,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${h}'`);const p=ws(s.shape,i.shape,o,h,a,c,!0),{filterHeight:m,filterWidth:g,dilationHeight:y,dilationWidth:v,padInfo:x}=p,b=x.left,S=x.top,w=p.outChannels/p.inChannels,C=new vs(p.outShape,s.dtype),_=n.data.get(s.dataId).values,T=n.data.get(i.dataId).values,k=C.values;for(let $=0;$<p.batchSize;++$){const O=$*u[0],P=$*C.strides[0];for(let D=0;D<p.outHeight;++D){const A=P+D*C.strides[1],I=D*p.strideHeight-S;for(let R=0;R<m;++R){const M=I+R*y;if(M<0||M>=p.inHeight)continue;const E=R*d[0],j=O+M*u[1];for(let B=0;B<p.outWidth;++B){const W=A+B*C.strides[2],G=B*p.strideWidth-b;for(let te=0;te<g;++te){const ne=G+te*v;if(ne<0||ne>=p.inWidth)continue;const ue=E+te*d[1],ge=j+ne*p.inChannels;let de=W,we=ue;for(let se=0;se<p.inChannels;++se){const he=_[ge+se];for(let me=0;me<w;++me)k[de+me]+=he*T[we+me];de+=w,we+=w}}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const Xjt={kernelName:j$,backendName:"cpu",kernelFunc:Xwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yjt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r;Ze([s,i],"depthwiseConv2dNativeBackpropFilter");const d=ws(s.shape,u,o,a,l,c,!0),{strideHeight:h,strideWidth:p,filterHeight:m,filterWidth:g}=d,y=new vs(d.filterShape,"float32"),v=d.padInfo.left,x=d.padInfo.top,b=d.outChannels/d.inChannels,S=n.data.get(s.dataId).values,w=new vs(s.shape,s.dtype,S),C=n.data.get(i.dataId).values,_=new vs(i.shape,i.dtype,C);for(let T=0;T<m;++T){const k=Math.max(0,Math.ceil((x-T)/h)),$=Math.min(d.outHeight,(d.inHeight+x-T)/h);for(let O=0;O<g;++O){const P=Math.max(0,Math.ceil((v-O)/p)),D=Math.min(d.outWidth,(d.inWidth+v-O)/p);for(let A=0;A<d.outChannels;++A){const I=Math.trunc(A/b),R=A%b;let M=0;for(let E=0;E<d.batchSize;++E)for(let j=k;j<$;++j){const B=T+j*h-x;for(let W=P;W<D;++W){const G=O+W*p-v;M+=w.get(E,B,G,I)*_.get(E,j,W,A)}}y.set(M,T,O,I,R)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const Qjt={kernelName:rV,backendName:"cpu",kernelFunc:Yjt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zjt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r;Ze([s,i],"depthwiseConv2DNativeBackpropInput");const d=st(s.shape),h=st(i.shape),p=ws(u,i.shape,o,a,l,c,!0),m=new vs(p.inShape,"float32"),g=m.values,[y,v,x]=m.strides,b=n.data.get(s.dataId).values,[S,w,C]=d,_=n.data.get(i.dataId).values,[T,k,$]=h,{batchSize:O,filterHeight:P,filterWidth:D,inChannels:A,inHeight:I,inWidth:R,outChannels:M,outHeight:E,outWidth:j,strideHeight:B,strideWidth:W}=p,G=P-1-p.padInfo.top,te=D-1-p.padInfo.left,ne=M/A;for(let ue=0;ue<O;++ue)for(let ge=0;ge<A;++ge)for(let de=0;de<I;++de){const we=de-G,se=Math.max(0,Math.ceil(we/B)),he=Math.min(E,(P+we)/B);for(let me=0;me<R;++me){const Y=me-te,ye=Math.max(0,Math.ceil(Y/W)),Ae=Math.min(j,(D+Y)/W);let Re=0;for(let ze=se;ze<he;++ze){const rt=ze*B-we;for(let z=ye;z<Ae;++z){const Q=z*W-Y,ie=S*ue+w*ze+C*z,Ee=T*(P-1-rt)+k*(D-1-Q)+$*ge;for(let Se=0;Se<ne;++Se){const Ne=ge*ne+Se,qe=b[ie+Ne],mt=_[Ee+Se];Re+=qe*mt}}}g[y*ue+v*de+x*me+ge]=Re}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const Jjt={kernelName:sV,backendName:"cpu",kernelFunc:Zjt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eMt(t){const{inputs:e,backend:n}=t,{x:r}=e,s=le(r.shape),i=n.data.get(r.dataId).values,o=zt([s,s],r.dtype),a=o.values;for(let c=0;c<i.length;c++)a[c*s+c]=i[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const tMt={kernelName:mve,backendName:"cpu",kernelFunc:eMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nMt={kernelName:M$,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s}=t,{strides:i,pad:o,dilations:a}=n,l=e,c=l.data.get(r.dataId).values,u=r.shape.length,d=l.data.get(s.dataId).values,h=s.shape.length,{batchSize:p,inHeight:m,inWidth:g,inChannels:y,outHeight:v,outWidth:x,padInfo:b,strideHeight:S,strideWidth:w,filterHeight:C,filterWidth:_,dilationHeight:T,dilationWidth:k,outShape:$}=vS(r.shape,s.shape,i,o,"NHWC",a),O=le($),P=$.length,D=Nr(r.dtype,O);for(let I=0;I<p;++I)for(let R=0;R<v;++R){const M=R*S-b.top;for(let E=0;E<x;++E){const j=E*w-b.left;for(let B=0;B<y;++B){let W=Number.MIN_SAFE_INTEGER;for(let te=0;te<C;++te){const ne=M+te*T;if(ne>=0&&ne<m)for(let ue=0;ue<_;++ue){const ge=j+ue*k;if(ge>=0&&ge<g){const de=mc([I,ne,ge,B],u,st(r.shape)),we=mc([te,ue,B],h,st(s.shape)),se=c[de]+d[we];se>W&&(W=se)}}}const G=mc([I,R,E,B],P,st($));D[G]=W}}}return{dataId:l.write(Yp(D,r.dtype),$,r.dtype),shape:$,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rMt={kernelName:qM,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:o,pad:a,dilations:l}=n,c=e,u=ml(r.shape,c.data.get(r.dataId).values),d=ml(s.shape,c.data.get(s.dataId).values),{batchSize:h,inHeight:p,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:x,strideHeight:b,strideWidth:S,filterHeight:w,filterWidth:C,dilationHeight:_,dilationWidth:T,outShape:k}=vS(r.shape,s.shape,o,a,"NHWC",l);L(i.rank===k.length,()=>`Error in ${qM}, dy must have the same rank as output ${k.length}, but got ${i.rank}`);const $=ml(k,c.data.get(i.dataId).values),O=dve(s.shape,s.dtype);for(let D=0;D<h;++D)for(let A=0;A<y;++A){const I=A*b-x.top;for(let R=0;R<v;++R){const M=R*S-x.left;for(let E=0;E<g;++E){let j=Number.MIN_SAFE_INTEGER,B=0,W=0;for(let G=0;G<w;++G){const te=I+G*_;if(te>=0&&te<p)for(let ne=0;ne<C;++ne){const ue=M+ne*T;if(ue>=0&&ue<m){const ge=u[D][te][ue][E]+d[G][ne][E];ge>j&&(j=ge,B=G,W=ne)}}}O[B][W][E]+=$[D][A][R][E]}}}return{dataId:c.write(Yp(O,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sMt={kernelName:HM,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:o,pad:a,dilations:l}=n,c=e,u=ml(r.shape,c.data.get(r.dataId).values),d=ml(s.shape,c.data.get(s.dataId).values),{batchSize:h,inHeight:p,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:x,strideHeight:b,strideWidth:S,filterHeight:w,filterWidth:C,dilationHeight:_,dilationWidth:T,outShape:k}=vS(r.shape,s.shape,o,a,"NHWC",l);L(i.rank===k.length,()=>`Error in ${HM}, dy must have the same rank as output ${k.length}, but got ${i.rank}`);const $=ml(k,c.data.get(i.dataId).values),O=dve(r.shape,r.dtype);for(let D=0;D<h;++D)for(let A=0;A<y;++A){const I=A*b-x.top;for(let R=0;R<v;++R){const M=R*S-x.left;for(let E=0;E<g;++E){let j=Number.MIN_SAFE_INTEGER,B=I<0?0:I,W=M<0?0:M;for(let G=0;G<w;++G){const te=I+G*_;if(te>=0&&te<p)for(let ne=0;ne<C;++ne){const ue=M+ne*T;if(ue>=0&&ue<m){const ge=u[D][te][ue][E]+d[G][ne][E];ge>j&&(j=ge,B=te,W=ue)}}}O[D][B][W][E]+=$[D][A][R][E]}}}return{dataId:c.write(Yp(O,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iMt(t){const{inputs:e,backend:n,attrs:r}=t,{image:s}=e,{canvas:i,options:o}=r,{contextOptions:a,imageOptions:l}=o||{},c=(l==null?void 0:l.alpha)||1,u=(a==null?void 0:a.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=i.getContext(u,(a==null?void 0:a.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);const[h,p]=s.shape.slice(0,2),m=s.shape.length===2?1:s.shape[2],g=n.data.get(s.dataId).values,y=s.dtype==="float32"?255:1,v=new Uint8ClampedArray(p*h*4);for(let b=0;b<h*p;++b){const S=[0,0,0,255*c];for(let C=0;C<m;C++){const _=g[b*m+C];if(s.dtype==="float32"){if(_<0||_>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${_}.`)}else if(s.dtype==="int32"&&(_<0||_>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${_}.`);m===1?(S[0]=_*y,S[1]=_*y,S[2]=_*y):S[C]=_*y}const w=b*4;v[w+0]=Math.round(S[0]),v[w+1]=Math.round(S[1]),v[w+2]=Math.round(S[2]),v[w+3]=Math.round(S[3])}i.width=p,i.height=h;const x=new ImageData(v,p,h);return d.putImageData(x,0,0),s}const oMt={kernelName:z2t,backendName:"cpu",kernelFunc:iMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RS(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ze(s,"sum");let a;s.dtype==="bool"?a=vf({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):a=Rc({inputs:{x:s},backend:n});const l=a.shape.length,c=Vt(i,a.shape),u=lr(c,l);let d=c,h=a;u!=null&&(h=Ri({inputs:{x:a},backend:n,attrs:{perm:u}}),d=Er(d.length,l)),Ss("sum",d,h.shape.length);const[p,m]=ds(h.shape,d),g=oo(h.dtype,"int32");let y=LT(n,p,g);const v=le(m),x=n.data.get(y.dataId).values,b=n.data.get(h.dataId).values;for(let S=0;S<x.length;++S){const w=S*v;let C=0;for(let _=0;_<v;++_)C+=b[w+_];x[S]=C}if(o){const S=Mr(y.shape,c),w=y;y=Dn({inputs:{x:y},backend:n,attrs:{shape:S}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(a),u!=null&&n.disposeIntermediateTensorInfo(h),y}const aMt={kernelName:gA,backendName:"cpu",kernelFunc:RS};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lMt(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:o,summedDims:a,idDims:l}=O5(s,i.length);R5(o.length,l,i);const{path:c,steps:u}=D5(a,l),d=u.length;let h=null,p=o.length;const m=[];for(let g=0;g<d;++g){for(const y of u[g]){const{permutationIndices:v,expandDims:x}=P5(p,l[y]);let b;j5(v)?b=i[y]:(b=Ri({inputs:{x:i[y]},backend:n,attrs:{perm:v}}),m.push(b));const S=b.shape.slice();for(let w=0;w<x.length;++w)S.splice(x[w],0,1);cn(b.shape,S)||(b=Dn({inputs:{x:b},backend:n,attrs:{shape:S}}),m.push(b)),h===null?h=b:(h=qA({inputs:{a:b,b:h},backend:n}),m.push(h))}g<d-1&&(c[g]>=0&&(h=RS({inputs:{x:h},backend:n,attrs:{axis:c[g]-(o.length-p),keepDims:!1}}),m.push(h)),p--)}for(const g of m)g!==h&&n.disposeIntermediateTensorInfo(g);return h}const cMt={kernelName:iV,backendName:"cpu",kernelFunc:lMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uMt(t){const{inputs:e,backend:n}=t,{dy:r,y:s}=e;Ze([r,s],"eluGrad");const i=new Float32Array(le(s.shape)),o=n.data.get(s.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const c=o[l];c>=0?i[l]=a[l]:i[l]=a[l]*(c+1)}return n.makeTensorInfo(s.shape,"float32",i)}const dMt={kernelName:oV,backendName:"cpu",kernelFunc:uMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fMt=_5,hMt=T5,pMt=k5,mMt=E5,gMt=$5,yMt=A5,vMt=xn(Mw,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+fMt*n);return e*(1-((((yMt*r+gMt)*r+mMt)*r+pMt)*r+hMt)*r*Math.exp(-n*n))}),xMt={kernelName:Mw,backendName:"cpu",kernelFunc:vMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VT(t){const{inputs:e,backend:n,attrs:r}=t,{input:s}=e,{dim:i}=r,o=s.shape.length,a=s.shape.slice();let l=i;return i<0&&(L(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),a.splice(l,0,1),Dn({inputs:{x:s},backend:n,attrs:{shape:a}})}const bMt={kernelName:L$,backendName:"cpu",kernelFunc:VT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wMt=Ar((t,e)=>t/e),m6=Yr(Dw,wMt),bF={kernelName:Dw,backendName:"cpu",kernelFunc:m6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ywe(t,e,n){const r=t.shape,s=r[0],i=r[1],o=n.data.get(t.dataId),a=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,c=[s,i],u=le(c),d=Ds("float32",u),h=Ds("float32",u);for(let y=0;y<s;y++){const v=Ep({inputs:{x:a},backend:n,attrs:{begin:[y,0],size:[1,i]}}),x=Ep({inputs:{x:l},backend:n,attrs:{begin:[y,0],size:[1,i]}}),b=Hi({inputs:{real:v,imag:x},backend:n}),{real:S,imag:w}=SMt(b,e,n),C=Lu(S,w);for(let _=0;_<i;_++){const T=I5(C,_);d[y*i+_]=T.real,h[y*i+_]=T.imag}n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b)}const p=n.makeTensorInfo(c,"float32",d),m=n.makeTensorInfo(c,"float32",h),g=Hi({inputs:{real:p,imag:m},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}function SMt(t,e,n){const r=le(t.shape),s=n.data.get(t.dataId),i=n.data.get(s.complexTensorInfos.real.dataId).values,o=n.data.get(s.complexTensorInfos.imag.dataId).values;if(CMt(r)){const a=wF(i,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",a.real),u=n.makeTensorInfo(l,"float32",a.imag),d=n.makeTensorInfo([],"float32",jf(r,"float32")),h=Rc({inputs:{x:d},backend:n}),p=bF.kernelFunc({inputs:{a:c,b:d},backend:n}),m=bF.kernelFunc({inputs:{a:u,b:h},backend:n}),g=n.data.get(p.dataId).values,y=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),{real:g,imag:y}}return a}else{const a=Lu(i,o),l=NMt(a,r,e);return c0e(l)}}function CMt(t){return(t&t-1)===0}function wF(t,e,n,r,s){if(n===1)return{real:t,imag:e};const i=Lu(t,e),o=n/2,a=u0e(i),l=a.real,c=a.imag,u=[l.length],d=s.makeTensorInfo(u,"float32",l),h=s.makeTensorInfo(u,"float32",c),p=Hi({inputs:{real:d,imag:h},backend:s}),m=d0e(i),g=m.real,y=m.imag,v=[g.length],x=s.makeTensorInfo(v,"float32",g),b=s.makeTensorInfo(v,"float32",y),S=Hi({inputs:{real:x,imag:b},backend:s}),w=wF(l,c,o,r,s),C=w.real,_=w.imag,T=[C.length],k=s.makeTensorInfo(T,"float32",C),$=s.makeTensorInfo(T,"float32",_),O=Hi({inputs:{real:k,imag:$},backend:s}),P=wF(g,y,o,r,s),D=P.real,A=P.imag,I=[D.length],R=s.makeTensorInfo(I,"float32",D),M=s.makeTensorInfo(I,"float32",A),E=Hi({inputs:{real:R,imag:M},backend:s}),j=h0e(n,r),B=[j.real.length],W=s.makeTensorInfo(B,"float32",j.real),G=s.makeTensorInfo(B,"float32",j.imag),te=Hi({inputs:{real:W,imag:G},backend:s}),ne=qA({inputs:{a:te,b:E},backend:s}),ue=Uy({inputs:{a:O,b:ne},backend:s}),ge=h6({inputs:{a:O,b:ne},backend:s}),de=kp({inputs:{input:ue},backend:s}),we=kp({inputs:{input:ge},backend:s}),se=Gy({inputs:{input:ue},backend:s}),he=Gy({inputs:{input:ge},backend:s}),me=Hy({inputs:[de,we],backend:s,attrs:{axis:0}}),Y=Hy({inputs:[se,he],backend:s,attrs:{axis:0}}),ye=s.data.get(me.dataId).values,Ae=s.data.get(Y.dataId).values;return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(p),s.disposeIntermediateTensorInfo(x),s.disposeIntermediateTensorInfo(b),s.disposeIntermediateTensorInfo(S),s.disposeIntermediateTensorInfo(k),s.disposeIntermediateTensorInfo($),s.disposeIntermediateTensorInfo(O),s.disposeIntermediateTensorInfo(R),s.disposeIntermediateTensorInfo(M),s.disposeIntermediateTensorInfo(E),s.disposeIntermediateTensorInfo(W),s.disposeIntermediateTensorInfo(G),s.disposeIntermediateTensorInfo(te),s.disposeIntermediateTensorInfo(ne),s.disposeIntermediateTensorInfo(ue),s.disposeIntermediateTensorInfo(ge),s.disposeIntermediateTensorInfo(de),s.disposeIntermediateTensorInfo(se),s.disposeIntermediateTensorInfo(we),s.disposeIntermediateTensorInfo(he),s.disposeIntermediateTensorInfo(me),s.disposeIntermediateTensorInfo(Y),{real:ye,imag:Ae}}function NMt(t,e,n){const r=new Float32Array(e*2);for(let s=0;s<e;s++){let i=0,o=0;for(let a=0;a<e;a++){const l=p0e(s*a,e,n),c=I5(t,a);i+=c.real*l.real-c.imag*l.imag,o+=c.real*l.imag+c.imag*l.real}n&&(i/=e,o/=e),f0e(r,i,o,s)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Mt(t){const{inputs:e,backend:n}=t,{input:r}=e,s=le(r.shape),i=r.shape[r.shape.length-1],o=s/i,a=Dn({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=Ywe(a,!1,n),c=Dn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const TMt={kernelName:aV,backendName:"cpu",kernelFunc:_Mt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g6(t){const{backend:e,attrs:n}=t,{shape:r,value:s,dtype:i}=n,o=i||Bv(s),a=Nr(o,le(r));return EMt(a,s,o),e.makeTensorInfo(r,o,a)}const kMt={kernelName:lV,backendName:"cpu",kernelFunc:g6};function EMt(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Mt={kernelName:cV,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,s=n,i=Ds(r.dtype,le(r.shape)),[o,a,l,c]=r.shape,u=s.data.get(r.dataId).values;for(let h=0;h<o;h++){const p=h*l*a*c;for(let m=0;m<a;m++){const g=m*(l*c);for(let y=0;y<l;y++){const v=y*c;for(let x=0;x<c;x++){const b=Math.round(l-y-1),S=p+g+v+x;let w=u[S];if(b>=0&&b<l){const C=b*c,_=p+g+C+x;w=u[_]}i[S]=w}}}}return{dataId:s.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AMt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:m}=r;let g=Kwe({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(o){const y=g;if(u==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const v=Dn({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});g=Uy({inputs:{a:g,b:v},backend:n}),n.disposeIntermediateTensorInfo(v)}else g=Uy({inputs:{a:g,b:o},backend:n});n.disposeIntermediateTensorInfo(y)}if(p){const y=g;if(u==="NCHW"&&p==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const v=Dn({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});g=zT(n,g,p,v,m),n.disposeIntermediateTensorInfo(v)}else g=zT(n,g,p,a,m);n.disposeIntermediateTensorInfo(y)}return g}const IMt={kernelName:bT,backendName:"cpu",kernelFunc:AMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OMt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:m}=r;let g=Xwe({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(o){const y=g;g=Uy({inputs:{a:g,b:o},backend:n}),n.disposeIntermediateTensorInfo(y)}if(p){const y=g;g=zT(n,g,p,a,m),n.disposeIntermediateTensorInfo(y)}return g}const PMt={kernelName:Rve,backendName:"cpu",kernelFunc:OMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RMt(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=le(r.shape),o=s.shape,a=o[o.length-1],[l,c,u,d]=p5(r,s);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const h=n.data.get(s.dataId).values,p=n.bufferSync(r),m=owe(h,p,r.dtype,c,a,u,d,r.shape,i);return n.makeTensorInfo(l,r.dtype,m.values)}const DMt={kernelName:gve,backendName:"cpu",kernelFunc:RMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jMt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:o,batchDims:a}=r;Ze([s,i],"gatherV2");const l=Vt(o,s.shape)[0],c=n.data.get(i.dataId).values,u=s.shape[l];for(let S=0;S<c.length;++S){const w=c[S];L(w<=u-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${u-1}]`)}let d=a;a==null&&(d=0);const h=le(i.shape),p=F5(s,i,l,d),m=Dn({inputs:{x:s},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),g=Dn({inputs:{x:i},backend:n,attrs:{shape:[p.batchSize,h/p.batchSize]}}),y=[p.batchSize,p.outerSize,h/p.batchSize,p.sliceSize],v=n.bufferSync(g),x=n.bufferSync(m),b=awe(x,v,y);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(p.outputShape,b.dtype,b.values)}const MMt={kernelName:z$,backendName:"cpu",kernelFunc:jMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FMt(t){const{inputs:e,backend:n}=t,{input:r}=e,s=le(r.shape),i=r.shape[r.shape.length-1],o=s/i,a=Dn({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=Ywe(a,!0,n),c=Dn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const LMt={kernelName:uV,backendName:"cpu",kernelFunc:FMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BMt=xn(Uw,t=>Number.isFinite(t)?1:0,"bool"),zMt={kernelName:Uw,backendName:"cpu",kernelFunc:BMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VMt=xn(Gw,t=>Math.abs(t)===1/0?1:0,"bool"),WMt={kernelName:Gw,backendName:"cpu",kernelFunc:VMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UMt=xn(Hw,t=>Number.isNaN(t)?1:0,"bool"),GMt={kernelName:Hw,backendName:"cpu",kernelFunc:UMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HMt(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,o=fwe(r,s,i);return e.makeTensorInfo([o.length],"float32",o)}const qMt={kernelName:yve,backendName:"cpu",kernelFunc:HMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KMt=xn(Kw,t=>Math.log1p(t)),XMt={kernelName:Kw,backendName:"cpu",kernelFunc:KMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YMt=Ar((t,e)=>t&&e),QMt=Yr(H$,YMt,null,"bool"),ZMt={kernelName:H$,backendName:"cpu",kernelFunc:QMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JMt=xn(q$,t=>t?0:1,"bool"),eFt={kernelName:q$,backendName:"cpu",kernelFunc:JMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tFt=Ar((t,e)=>t||e),nFt=Yr(K$,tFt,null,"bool"),rFt={kernelName:K$,backendName:"cpu",kernelFunc:nFt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sFt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:o,alpha:a,beta:l}=r;Ze(s,"LRN");const c=s.shape[3],u=c-1,d=n.data.get(s.dataId).values,h=le(s.shape),p=new Float32Array(h);function m(g){const y=g%c;let v=g-y+Math.max(0,y-i);const x=g-y+Math.min(y+i,u);let b=0;for(;v<=x;v++){const S=d[v];b+=S*S}return b}for(let g=0;g<h;g++){const y=m(g),v=d[g]*Math.pow(o+a*y,-l);p[g]=v}return n.makeTensorInfo(s.shape,s.dtype,p)}const iFt={kernelName:X$,backendName:"cpu",kernelFunc:sFt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oFt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r;Ze(o,"LRNGrad");const d=le(o.shape),h=o.shape[3],p=n.data.get(o.dataId).values,m=n.data.get(s.dataId).values,g=n.data.get(i.dataId).values,y=new Float32Array(d),v=d;for(let x=0;x<v;x++){const b=x%h,S=x-b+Math.max(0,b-a),w=x-b+Math.min(h,b+a+1);let C=0;for(let _=S;_<w;_++)C+=Math.pow(m[_],2);C=c*C+l;for(let _=S;_<w;_++){let T=-2*c*u*m[_]*g[x]/C;x===_&&(T+=Math.pow(C,-u)),T*=p[x],y[_]+=T}}return n.makeTensorInfo(o.shape,s.dtype,y)}const aFt={kernelName:fV,backendName:"cpu",kernelFunc:oFt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:o}=r,a=n;let l=s.shape;const c=l.length,u=Vt(i,l);let d=u;const h=lr(d,c);let p=a.data.get(s.dataId).values;if(h!=null){const S=new Array(c);for(let w=0;w<S.length;w++)S[w]=l[h[w]];p=d6(p,l,s.dtype,h,S),d=Er(d.length,c),l=S}Ze(s,"max"),Ss("max",d,c);const[m,g]=ds(l,d),y=le(g),v=pwe(p,y,m,s.dtype),x=a.write(v,m,s.dtype);let b=m;return o&&(b=Mr(m,u)),{dataId:x,shape:b,dtype:s.dtype}}const lFt={kernelName:Y$,backendName:"cpu",kernelFunc:Qwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cFt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Ze(s,"maxPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;L(Fs(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Ma(s.shape,i,o,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&cn(u.inShape,u.outShape))d=Rc({inputs:{x:s},backend:n});else{const h=n.data.get(s.dataId).values,p=st(s.shape),m=p6(h,s.shape,s.dtype,p,u,"max");d=n.makeTensorInfo(u.outShape,s.dtype,m.values)}return d}const uFt={kernelName:Q$,backendName:"cpu",kernelFunc:cFt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dFt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r;Ze(s,"maxPool3d");const u=Xu(s.shape,i,o,1,a,l,c),d=n.data.get(s.dataId).values,h=qwe(d,s.shape,s.dtype,st(s.shape),u,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}const fFt={kernelName:Z$,backendName:"cpu",kernelFunc:dFt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hFt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=r;Ze([s,i],"maxPool3DGrad");const u=Xu(i.shape,o,a,1,l,c),d=n.bufferSync(i),h=tjt(d,u),p=u.strideDepth,m=u.strideHeight,g=u.strideWidth,y=u.dilationDepth,v=u.dilationHeight,x=u.dilationWidth,b=u.effectiveFilterDepth,S=u.effectiveFilterHeight,w=u.effectiveFilterWidth,C=b-1-u.padInfo.front,_=w-1-u.padInfo.left,T=S-1-u.padInfo.top,k=zt(i.shape,"float32"),$=n.bufferSync(s);for(let O=0;O<u.batchSize;++O)for(let P=0;P<u.inChannels;++P)for(let D=0;D<u.inDepth;++D)for(let A=0;A<u.inHeight;++A)for(let I=0;I<u.inWidth;++I){const R=D-C,M=A-T,E=I-_;let j=0;for(let B=0;B<b;B+=y){const W=(R+B)/p;if(!(W<0||W>=u.outDepth||Math.floor(W)!==W))for(let G=0;G<S;G+=v){const te=(M+G)/m;if(!(te<0||te>=u.outHeight||Math.floor(te)!==te))for(let ne=0;ne<w;ne+=x){const ue=(E+ne)/g;if(ue<0||ue>=u.outWidth||Math.floor(ue)!==ue)continue;const ge=b*S*w-1-h.get(O,W,te,ue,P),de=B*S*w+G*w+ne,we=ge===de?1:0;if(we===0)continue;const se=$.get(O,W,te,ue,P);j+=se*we}}}k.set(j,O,D,A,I,P)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const pFt={kernelName:pV,backendName:"cpu",kernelFunc:hFt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mFt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:o}=e,a=i;Ze([i,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,h=Ma(a.shape,l,c,1,u,d),p=n.data.get(a.dataId).values,m=zt(h.outShape,a.dtype,Hwe(p,a.shape,a.dtype,h).values),g=h.strideHeight,y=h.strideWidth,v=h.dilationHeight,x=h.dilationWidth,b=h.effectiveFilterHeight,S=h.effectiveFilterWidth,w=S-1-h.padInfo.left,C=b-1-h.padInfo.top,_=zt(a.shape,"float32"),T=n.data.get(s.dataId).values,k=zt(s.shape,"float32",T);for(let $=0;$<h.batchSize;++$)for(let O=0;O<h.inChannels;++O)for(let P=0;P<h.inHeight;++P)for(let D=0;D<h.inWidth;++D){const A=P-C,I=D-w;let R=0;for(let M=0;M<b;M+=v){const E=(A+M)/g;if(!(E<0||E>=h.outHeight||Math.floor(E)!==E))for(let j=0;j<S;j+=x){const B=(I+j)/y;if(B<0||B>=h.outWidth||Math.floor(B)!==B)continue;const W=b*S-1-m.get($,E,B,O),G=M*S+j,te=W===G?1:0;if(te===0)continue;const ne=k.get($,E,B,O);R+=ne*te}}_.set(R,$,P,D,O)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const gFt={kernelName:hV,backendName:"cpu",kernelFunc:mFt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yFt(t,e,n,r,s){const i=st(e),o=p6(t,e,n,i,s,"max"),a=Hwe(t,e,n,s,!0,r);return[o.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vFt={kernelName:vve,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:o,includeBatchInIndex:a}=e,l=n;Ze(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,u=Ma(r.shape,s,i,[1,1],o),[d,h]=yFt(c,r.shape,r.dtype,a,u),p=l.write(d,u.outShape,r.dtype),m=l.write(h,u.outShape,r.dtype);return[{dataId:p,shape:u.outShape,dtype:r.dtype},{dataId:m,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xFt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=Vt(i,s.shape),c=ds(s.shape,a)[1],u=le(c),d=[],h=n.makeTensorInfo([],"float32",new Float32Array([u]));d.push(h);const p=vf({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});d.push(p);const m=m6({inputs:{a:p,b:h},backend:n});d.push(m);const g=RS({inputs:{x:m},backend:n,attrs:{axis:i,keepDims:o}});return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const bFt={kernelName:J$,backendName:"cpu",kernelFunc:xFt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wFt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ze(s,"min");const a=Vt(i,s.shape);let l=a;const c=lr(l,s.shape.length);let u=s;c!=null&&(u=Ri({inputs:{x:s},backend:n,attrs:{perm:c}}),l=Er(l.length,s.shape.length)),Ss("min",l,u.shape.length);const[d,h]=ds(u.shape,l),p=le(h),m=js(le(d),u.dtype),g=n.data.get(u.dataId).values;for(let v=0;v<m.length;++v){const x=v*p;let b=g[x];for(let S=0;S<p;++S){const w=g[x+S];(Number.isNaN(w)||w<b)&&(b=w)}m[v]=b}c!=null&&n.disposeIntermediateTensorInfo(u);const y=n.makeTensorInfo(d,u.dtype,m);if(o){const v=Mr(d,a),x=Dn({inputs:{x:y},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(y),x}return y}const SFt={kernelName:eA,backendName:"cpu",kernelFunc:wFt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CFt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,mode:o}=r;Ze(s,"mirrorPad");const a=i.map((b,S)=>b[0]+s.shape[S]+b[1]),l=i.map(b=>b[0]),c=i.map((b,S)=>b[0]+s.shape[S]),u=o==="reflect"?0:1,d=n.data.get(s.dataId).values,h=s.shape.length,p=st(s.shape),m=le(a),g=a.length,y=st(a),v=Ds(s.dtype,m);for(let b=0;b<m;b++){let S=zv(b,g,y);for(let C=0;C<g;C++)S[C]<l[C]?S[C]=l[C]*2-S[C]-u:S[C]>=c[C]&&(S[C]=(c[C]-1)*2-S[C]+u);S=S.map((C,_)=>C-l[_]);const w=mc(S,h,p);v[b]=d[w]}return{dataId:n.write(v,a,s.dtype),shape:a,dtype:s.dtype}}const NFt={kernelName:tA,backendName:"cpu",kernelFunc:CFt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ft=Ar((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),TFt=Yr(Qw,_Ft),kFt={kernelName:Qw,backendName:"cpu",kernelFunc:TFt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zwe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,o=s.shape.length;let a=i;if(a===-1&&(a=o-1),a!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${a}`);const l=Vt([a],s.shape),c=Qwe({inputs:{x:s},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=Mr(c.shape,l),d=Dn({inputs:{x:c},backend:n,attrs:{shape:u}}),h=h6({inputs:{a:s,b:d},backend:n}),p=nwe({inputs:{x:h},backend:n}),m=RS({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),g=Dn({inputs:{x:m},backend:n,attrs:{shape:u}}),y=m6({inputs:{a:p,b:g},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}const EFt={kernelName:xA,backendName:"cpu",kernelFunc:Zwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ft(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:o,normalized:a}=r;Ze(s,"multinomial");const l=a?s:Zwe({inputs:{logits:s},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=n.data.get(l.dataId).values,h=[c,i],p=js(le(h),"int32");for(let m=0;m<c;++m){const g=m*u,y=new Float32Array(u-1);y[0]=d[g];for(let b=1;b<y.length;++b)y[b]=y[b-1]+d[g+b];const v=e5.alea(o.toString()),x=m*i;for(let b=0;b<i;++b){const S=v();p[x+b]=y.length;for(let w=0;w<y.length;w++)if(S<y[w]){p[x+b]=w;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",p)}const AFt={kernelName:xve,backendName:"cpu",kernelFunc:$Ft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IFt=c5;function OFt(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r;Ze(s,"NonMaxSuppression");const c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,{selectedIndices:d}=IFt(c,u,o,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const PFt={kernelName:mV,backendName:"cpu",kernelFunc:OFt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RFt=u5;function DFt(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r;Ze(s,"NonMaxSuppressionPadded");const u=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,{selectedIndices:h,validOutputs:p}=RFt(u,d,o,a,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}const jFt={kernelName:gV,backendName:"cpu",kernelFunc:DFt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MFt=d5;function FFt(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r;Ze(s,"NonMaxSuppressionWithScore");const u=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,h=o,p=a,m=l,g=c,{selectedIndices:y,selectedScores:v}=MFt(u,d,h,p,m,g);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const LFt={kernelName:yV,backendName:"cpu",kernelFunc:FFt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BFt(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:o,onValue:a,offValue:l}=r;Ze(s,"oneHot");const c=le(s.shape),u=new Float32Array(c*o);u.fill(l);const d=n.data.get(s.dataId).values;for(let h=0;h<c;++h)d[h]>=0&&d[h]<o&&(u[h*o+d[h]]=a);return n.makeTensorInfo([...s.shape,o],i,u)}const zFt={kernelName:iA,backendName:"cpu",kernelFunc:BFt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WT(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=kp({inputs:{input:r},backend:n}),i=WT({inputs:{x:s},backend:n}),o=Gy({inputs:{input:r},backend:n}),a=WT({inputs:{x:o},backend:n}),l=Hi({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return g6({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const VFt={kernelName:SA,backendName:"cpu",kernelFunc:WT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jwe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=kp({inputs:{input:r},backend:n}),i=Jwe({inputs:{x:s},backend:n}),o=Gy({inputs:{input:r},backend:n}),a=WT({inputs:{x:o},backend:n}),l=Hi({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return g6({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const WFt={kernelName:sA,backendName:"cpu",kernelFunc:Jwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eSe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return VT({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,o=e[0].dtype;e.forEach(u=>{Fz(i,u.shape,"All tensors passed to stack must have matching shapes"),L(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=VT({inputs:{input:u},backend:n,attrs:{dim:s}});return a.push(d),d}),c=Hy({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const UFt={kernelName:oA,backendName:"cpu",kernelFunc:eSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GFt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:o}=r;Ze(s,"pad");const a=i.map((x,b)=>x[0]+s.shape[b]+x[1]),l=i.map(x=>x[0]),c=n.data.get(s.dataId).values,u=le(s.shape),d=s.shape.length,h=st(s.shape),p=le(a),m=a.length,g=st(a),y=Ds(s.dtype,p);o!==0&&y.fill(o);for(let x=0;x<u;x++){const S=zv(x,d,h).map((C,_)=>C+l[_]),w=mc(S,m,g);y[w]=c[x]}return{dataId:n.write(y,a,s.dtype),shape:a,dtype:s.dtype}}const tSe={kernelName:aA,backendName:"cpu",kernelFunc:GFt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HFt=Ar((t,e)=>Math.pow(t,e)),qFt=Yr(Jw,HFt),KFt={kernelName:Jw,backendName:"cpu",kernelFunc:qFt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XFt(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:o}=e,a=s.map(y=>n.data.get(y.dataId).values),l=s.map(y=>y.shape),c=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,[d,h,p]=bwe(a,l,c,i.shape,i.dtype,u,o.shape),m=d.map(y=>n.makeTensorInfo([y.length],"int32",y)),g=n.makeTensorInfo(p,i.dtype,h);return m.concat([g])}const YFt={kernelName:bve,backendName:"cpu",kernelFunc:XFt};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QFt(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=wwe(o,r.shape,r.dtype,a,s.shape,l,i.shape),d=n.makeTensorInfo([c.length],"int32",c),h=n.makeTensorInfo([u.length],r.dtype,u);return[d,h]}const ZFt={kernelName:wve,backendName:"cpu",kernelFunc:QFt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JFt(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values,h=a.map(y=>n.data.get(y.dataId).values),p=a.map(y=>y.shape),[m,g]=Swe(c,s.shape,u,i.shape,i.dtype,d,o.shape,h,p,l);return n.makeTensorInfo(m,i.dtype,g)}const eLt={kernelName:Sve,backendName:"cpu",kernelFunc:JFt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tLt(t){const{backend:e,attrs:n}=t,{start:r,stop:s,dtype:i,step:o}=n,a=Cwe(r,s,o,i);return e.makeTensorInfo([a.length],i,a)}const nLt={kernelName:vV,backendName:"cpu",kernelFunc:tLt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rLt=xn(eS,t=>1/t),sLt={kernelName:eS,backendName:"cpu",kernelFunc:rLt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iLt(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r;Ze(s,"resizeBilinear");const l=st(s.shape),[c,u]=a,[d,h,p,m]=s.shape,g=n.data.get(s.dataId).values,y=new Float32Array(le([d,c,u,m])),v=[i&&c>1?h-1:h,i&&u>1?p-1:p],x=[i&&c>1?c-1:c,i&&u>1?u-1:u];let b=0;const S=v[0]/x[0],w=v[1]/x[1];for(let C=0;C<d;C++)for(let _=0;_<c;_++){let T;o?T=S*(_+.5)-.5:T=S*_;const k=Math.max(0,Math.floor(T)),$=T-k,O=Math.min(h-1,Math.ceil(T)),P=C*l[0]+k*l[1],D=C*l[0]+O*l[1];for(let A=0;A<u;A++){let I;o?I=w*(A+.5)-.5:I=w*A;const R=Math.max(0,Math.floor(I)),M=I-R,E=Math.min(p-1,Math.ceil(I)),j=P+R*l[2],B=D+R*l[2],W=P+E*l[2],G=D+E*l[2];for(let te=0;te<m;te++){const ne=g[j+te],ue=g[B+te],ge=g[W+te],de=g[G+te],we=ne+(ge-ne)*M,se=ue+(de-ue)*M,he=we+(se-we)*$;y[b++]=he}}}return n.makeTensorInfo([d,c,u,m],"float32",y)}const oLt={kernelName:fA,backendName:"cpu",kernelFunc:iLt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aLt(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r;Ze([i,s],"resizeBilinearGrad");const a=st(s.shape),[l,c,u,d]=s.shape,[,h,p]=i.shape,m=new Float32Array(l*c*u*d),g=[o&&h>1?c-1:c,o&&p>1?u-1:u],y=[o&&h>1?h-1:h,o&&p>1?p-1:p],v=g[0]/y[0],x=g[1]/y[1],b=n.data.get(i.dataId).values;let S=0;for(let w=0;w<l;w++){const C=w*a[0];for(let _=0;_<h;_++){const T=_*v,k=Math.floor(T),$=Math.min(Math.ceil(T),c-1),O=C+k*a[1],P=C+$*a[1],D=T-k,A=1-D;for(let I=0;I<p;I++){const R=I*x,M=Math.floor(R),E=Math.min(Math.ceil(R),u-1),j=R-M,B=1-j,W=O+M*a[2],G=O+E*a[2],te=P+M*a[2],ne=P+E*a[2],ue=A*B,ge=A*j,de=D*B,we=D*j;for(let se=0;se<d;se++){const he=b[S++];m[W+se]+=he*ue,m[G+se]+=he*ge,m[te+se]+=he*de,m[ne+se]+=he*we}}}}return n.makeTensorInfo([l,u,c,d],"float32",m)}const lLt={kernelName:wV,backendName:"cpu",kernelFunc:aLt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cLt(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r;Ze(s,"resizeNearestNeighbor");const l=st(s.shape),[c,u]=a,[d,h,p,m]=s.shape,g=n.data.get(s.dataId).values,y=new Float32Array(d*c*u*m),v=[i&&c>1?h-1:h,i&&u>1?p-1:p],x=[i&&c>1?c-1:c,i&&u>1?u-1:u],b=v[0]/x[0],S=v[1]/x[1];let w=0;for(let C=0;C<d;C++){const _=C*l[0];for(let T=0;T<c;T++){const k=o?b*(T+.5):b*T;let $=Math.min(h-1,i?Math.round(k):Math.floor(k));o&&($=Math.max(0,$));const O=_+$*l[1];for(let P=0;P<u;P++){const D=o?S*(P+.5):S*P;let A=Math.min(p-1,i?Math.round(D):Math.floor(D));o&&(A=Math.max(0,A));const I=O+A*l[2];for(let R=0;R<m;R++){const M=g[I+R];y[w++]=M}}}}return n.makeTensorInfo([d,c,u,m],s.dtype,y)}const uLt={kernelName:dA,backendName:"cpu",kernelFunc:cLt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dLt(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r;Ze([i,s],"resizeNearestNeighborGrad");const a=st(s.shape),l=st(i.shape),[c,u,d,h]=s.shape,[,p,m]=i.shape,g=new Float32Array(c*u*d*h),y=n.data.get(i.dataId).values,v=[o&&p>1?u-1:u,o&&m>1?d-1:d],x=[o&&p>1?p-1:p,o&&m>1?m-1:m],b=v[0]/x[0],S=v[1]/x[1],w=1/b,C=1/S,_=Math.ceil(w)*2+2,T=Math.ceil(C)*2+2;for(let k=0;k<c;k++){const $=k*a[0];for(let O=0;O<u;O++){const P=$+O*a[1],D=Math.floor(O*w),A=Math.floor(D-_/2);for(let I=0;I<d;I++){const R=P+I*a[2],M=Math.floor(I*C),E=Math.floor(M-T/2);for(let j=0;j<h;j++){let B=0;for(let W=0;W<_;W++){const G=W+A;if(G<0||G>=p)continue;const te=$+G*l[1],ne=G*b,ue=Math.min(u-1,o?Math.round(ne):Math.floor(ne));if(O===ue)for(let ge=0;ge<T;ge++){const de=ge+E;if(de<0||de>=m)continue;const we=te+de*l[2],se=de*S,he=Math.min(d-1,o?Math.round(se):Math.floor(se));I===he&&(B+=y[we+j])}}g[R+j]=B}}}}return n.makeTensorInfo(s.shape,s.dtype,g)}const fLt={kernelName:bV,backendName:"cpu",kernelFunc:dLt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hLt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r;Ze(s,"reverse");const o=s.shape.length,a=Vt(i,s.shape);if(o===0)return Rc({inputs:{x:s},backend:n});const l=new vs(s.shape,s.dtype),c=n.bufferSync(s);for(let u=0;u<l.size;u++){const d=l.indexToLoc(u),h=d.slice();a.forEach(p=>h[p]=s.shape[p]-1-h[p]),l.set(c.get(...h),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const pLt={kernelName:hA,backendName:"cpu",kernelFunc:hLt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mLt={kernelName:EV,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:o}=e,a=n,l=Ds(r.dtype,le(r.shape)),[c,u,d,h]=r.shape,[p,m]=S5(o,u,d),g=255,y=Math.sin(s),v=Math.cos(s),x=a.data.get(r.dataId).values;for(let S=0;S<c;S++){const w=S*d*u*h;for(let C=0;C<u;C++){const _=C*(d*h);for(let T=0;T<d;T++){const k=T*h;for(let $=0;$<h;$++){const O=[c,C,T,$],P=O[2],D=O[1];let A=(P-p)*v-(D-m)*y,I=(P-p)*y+(D-m)*v;A=Math.round(A+p),I=Math.round(I+m);let R=i;if(typeof i!="number"&&($===3?R=g:R=i[$]),A>=0&&A<d&&I>=0&&I<u){const E=I*(d*h),j=A*h,B=w+E+j+$;R=x[B]}const M=w+_+k+$;l[M]=R}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gLt=xn(rS,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),yLt={kernelName:rS,backendName:"cpu",kernelFunc:gLt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vLt(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=em(i,s,o),h=!0,p=n.bufferSync(s),m=n.bufferSync(i),g=Ih(p,m,o,d,c,l,a,u,0,h);return n.makeTensorInfo(o,g.dtype,g.values)}const xLt={kernelName:Cve,backendName:"cpu",kernelFunc:vLt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bLt(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<e?n=s+1:r=s;return r}function wLt(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<=e?n=s+1:r=s;return r}function SLt(t,e,n,r,s,i){const o=Nr("int32",n*s);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),c=a*s;for(let u=0;u<s;++u)o[c+u]=i==="left"?bLt(l,e[u+c]):wLt(l,e[u+c])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CLt(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:o}=r,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,c=SLt(a,l,s.shape[0],s.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",c)}const NLt={kernelName:_ve,backendName:"cpu",kernelFunc:CLt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Lt(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e;Ze([r,s,i],"select");const o=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=oo(s.dtype,i.dtype),d=js(le(s.shape),u);let h=0;const p=o===0||o>1||s.shape.length===1?1:le(s.shape.slice(1));for(let m=0;m<a.length;m++)for(let g=0;g<p;g++)a[m]===1?d[h++]=l[m]:d[h++]=c[m];return n.makeTensorInfo(s.shape,u,d)}const TLt={kernelName:pA,backendName:"cpu",kernelFunc:_Lt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kLt=RA,ELt=DA,$Lt=xn(iS,t=>t>=0?ELt*t:kLt*(Math.exp(t)-1)),ALt={kernelName:iS,backendName:"cpu",kernelFunc:$Lt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ILt=xn(lS,t=>t<0?-1:t>0?1:0),OLt={kernelName:lS,backendName:"cpu",kernelFunc:ILt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PLt=xn(oS,t=>Math.sin(t)),RLt={kernelName:oS,backendName:"cpu",kernelFunc:PLt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DLt=xn(aS,t=>Math.sinh(t)),jLt={kernelName:aS,backendName:"cpu",kernelFunc:DLt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MLt=11920928955078125e-23,zX=Math.log(MLt)+2,FLt=xn(uS,t=>{const e=t>-zX,n=t<zX,r=Math.exp(t);let s;return n?s=r:e?s=t:s=Math.log(1+r),s}),LLt={kernelName:uS,backendName:"cpu",kernelFunc:FLt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BLt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:o}=r;Ze([s],"spaceToBatchND");const a=le(i),l=[[0,0]];l.push(...o);for(let C=1+i.length;C<s.shape.length;++C)l.push([0,0]);const c=tSe.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),u=CS(c.shape,i,a,!1),d=NS(u.length,i.length,!1),h=_S(c.shape,i,a,!1),g=Dn({inputs:{x:c},backend:n,attrs:{shape:u}}),x=Ri({inputs:{x:g},backend:n,attrs:{perm:d}}),w=Dn({inputs:{x},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),w}const zLt={kernelName:yA,backendName:"cpu",kernelFunc:BLt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VLt(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values[0],[d,h,p,m,g]=kwe(a,r.shape,r.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],s.dtype,p),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(y=>Number(y)))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}const WLt={kernelName:Tve,backendName:"cpu",kernelFunc:VLt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ULt(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.data.get(s.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[c,u,d]=Ewe(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const GLt={kernelName:kve,backendName:"cpu",kernelFunc:ULt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HLt(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=f6(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const qLt={kernelName:Eve,backendName:"cpu",kernelFunc:HLt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KLt(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=f6(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const XLt={kernelName:$ve,backendName:"cpu",kernelFunc:KLt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YLt(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=em(i,s,a),p=!1,m=n.bufferSync(s);let g;switch(i.dtype){case"bool":{const y=n.bufferSync(i),v=!!n.data.get(o.dataId).values[0];g=Ih(m,y,a,h,u,c,l,d,v,p);break}case"float32":{const y=n.bufferSync(i),v=n.data.get(o.dataId).values[0];g=Ih(m,y,a,h,u,c,l,d,v,p);break}case"int32":{const y=n.bufferSync(i),v=n.data.get(o.dataId).values[0];g=Ih(m,y,a,h,u,c,l,d,v,p);break}case"string":{const y=n.bufferSync(i),v=hf(n.data.get(o.dataId).values[0]);g=Ih(m,y,a,h,u,c,l,d,v,p);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(a,g.dtype,g.values)}const QLt={kernelName:Ave,backendName:"cpu",kernelFunc:YLt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZLt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:o}=r,a=Vt(o,s.shape)[0],l=M5(s,i,a),c=new Array(s.shape.length).fill(0),u=s.shape.slice();return l.map(d=>{const h=[...u];h[a]=d;const p=Ep({inputs:{x:s},backend:n,attrs:{begin:c,size:h}});return c[a]+=d,p})}const JLt={kernelName:vA,backendName:"cpu",kernelFunc:ZLt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e3t={kernelName:SV,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Ze(n,"square");const s=r.data.get(n.dataId).values,i=new Float32Array(s.length);for(let a=0;a<s.length;++a){const l=s[a];i[a]=l*l}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t3t=xn(yS,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),n3t={kernelName:yS,backendName:"cpu",kernelFunc:t3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r3t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=r;Ze(s,"stridedSlice");const{finalShapeSparse:p,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:v,begin:x,end:b,strides:S}=x5(s.shape,i,o,a,l,c,u,d,h);let w;if(g)w=Dn({inputs:{x:s},backend:n,attrs:{shape:m}});else if(y||v){L(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const C=g5(x,b,S),_=Ep({inputs:{x:s},backend:n,attrs:{begin:x,size:C}});w=Dn({inputs:{x:_},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(_)}else{const C=n.bufferSync(s),_=Iwe(p,C,S,x);w=n.makeTensorInfo(m,_.dtype,_.values)}return w}const s3t={kernelName:NV,backendName:"cpu",kernelFunc:r3t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i3t(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,h=n.data.get(u.dataId).values,p=n.data.get(d.dataId).values,[m,g]=Owe(h,p,s,i,o,a,l,c);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",g)]}const o3t={kernelName:Ive,backendName:"cpu",kernelFunc:i3t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a3t(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],[c,u,d]=Pwe(a,l,s),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const l3t={kernelName:Ove,backendName:"cpu",kernelFunc:a3t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c3t(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(i.dataId).values,a=Rwe(o,s);return n.makeTensorInfo(i.shape,"int32",a)}const u3t={kernelName:Pve,backendName:"cpu",kernelFunc:c3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d3t=xn(pS,t=>Math.tan(t)),f3t={kernelName:pS,backendName:"cpu",kernelFunc:d3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h3t=xn(mS,t=>Math.tanh(t)),p3t={kernelName:mS,backendName:"cpu",kernelFunc:h3t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m3t(t){const{inputs:e,backend:n}=t,{tensor:r,indices:s,updates:i}=e,{sliceRank:o,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=em(i,s,r.shape),d=!1,h=n.bufferSync(s),p=n.bufferSync(i),m=n.bufferSync(r),g=Ih(h,p,r.shape,u,l,a,o,c,m,d);return n.makeTensorInfo(r.shape,g.dtype,g.values)}const g3t={kernelName:Nve,backendName:"cpu",kernelFunc:m3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y3t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;Ze(s,"tile");const o=jwe(n.bufferSync(s),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const v3t={kernelName:gS,backendName:"cpu",kernelFunc:y3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x3t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:o}=r;Ze(s,"topk");const a=n.data.get(s.dataId).values,[l,c]=Fwe(a,s.shape,s.dtype,i,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const b3t={kernelName:_V,backendName:"cpu",kernelFunc:x3t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w3t(t){const{inputs:e,attrs:n,backend:r}=t,{image:s,transforms:i}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=n,[u,d,h,p]=s.shape,[m,g]=c??[d,h],y=[u,m,g,p],v=st(s.shape),x=v[0],b=v[1],S=v[2],w=st(y),C=w[0],_=w[1],T=w[2],k=Ds(s.dtype,le(y));k.fill(l);const $=r.data.get(s.dataId).values,O=r.data.get(i.dataId).values;for(let D=0;D<u;++D){const A=i.shape[0]===1?O:O.subarray(D*8,D*8+8);for(let I=0;I<m;++I)for(let R=0;R<g;++R)for(let M=0;M<p;++M){let E;const j=A[6]*R+A[7]*I+1;if(j===0)continue;const B=(A[0]*R+A[1]*I+A[2])/j,W=(A[3]*R+A[4]*I+A[5])/j,G=VX(B,h,a),te=VX(W,d,a);switch(o){case"nearest":E=k3t($,d,h,x,b,S,D,te,G,M,l);break;case"bilinear":E=E3t($,d,h,x,b,S,D,te,G,M,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const ne=D*C+I*_+R*T+M;k[ne]=E}return r.makeTensorInfo(y,s.dtype,k)}return{dataId:r.write(k,y,s.dtype),shape:s.shape,dtype:s.dtype}}const S3t={kernelName:TV,backendName:"cpu",kernelFunc:w3t};function VX(t,e,n){switch(n){case"reflect":return C3t(t,e);case"wrap":return N3t(t,e);case"nearest":return T3t(t,e);case"constant":default:return _3t(t)}}function C3t(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return gp(0,n,e-1)}function N3t(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return gp(0,n,e-1)}function _3t(t,e){return t}function T3t(t,e){return gp(0,t,e-1)}function n0(t,e,n,r,s,i,o,a,l,c,u){const d=o*r+a*s+l*i+c;return 0<=a&&a<e&&0<=l&&l<n?t[d]:u}function k3t(t,e,n,r,s,i,o,a,l,c,u){const d=Math.round(a),h=Math.round(l);return n0(t,e,n,r,s,i,o,d,h,c,u)}function E3t(t,e,n,r,s,i,o,a,l,c,u){const d=Math.floor(a),h=Math.floor(l),p=d+1,m=h+1,g=(m-l)*n0(t,e,n,r,s,i,o,d,h,c,u)+(l-h)*n0(t,e,n,r,s,i,o,d,m,c,u),y=(m-l)*n0(t,e,n,r,s,i,o,p,h,c,u)+(l-h)*n0(t,e,n,r,s,i,o,p,m,c,u);return(p-a)*g+(a-d)*y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $3t(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;Ze(i,"unique");const o=r.data.get(i.dataId).values,{outputValues:a,outputShape:l,indices:c}=Lwe(o,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const A3t={kernelName:kV,backendName:"cpu",kernelFunc:$3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I3t(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const o=s.shape.length,a=s.shape[i],l=new Array(o-1);let c=0;for(let p=0;p<o;p++)p!==i&&(l[c++]=s.shape[p]);const u=new Array(o).fill(0),d=s.shape.slice();d[i]=1;const h=new Array(a);for(let p=0;p<h.length;p++){u[i]=p;const m=Ep({inputs:{x:s},backend:n,attrs:{begin:u,size:d}});h[p]=Dn({inputs:{x:m},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(m)}return h}const O3t={kernelName:bA,backendName:"cpu",kernelFunc:I3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P3t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:o}=r;Ze(s,"unsortedSegmentSum");const a=s.shape.length,l=i.shape.length,c=[],u=[],d=a-l;let h=i;for(let m=0;m<d;++m){const g=VT({inputs:{input:h},backend:n,attrs:{dim:m+1}});h=g,u.push(g)}for(let m=0;m<o;++m){const g=jf(m,"int32"),y=n.makeTensorInfo([],"int32",g),v=ewe({inputs:{a:y,b:h},backend:n}),x=vf({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),b=qA({inputs:{a:x,b:s},backend:n}),S=RS({inputs:{x:b},backend:n,attrs:{axis:0,keepDims:!1}});c.push(S),u.push(y),u.push(v),u.push(x),u.push(b),u.push(S)}const p=eSe({inputs:c,backend:n,attrs:{axis:0}});return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const R3t={kernelName:wA,backendName:"cpu",kernelFunc:P3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D3t=[$Dt,cRt,IDt,PDt,mRt,DDt,MDt,LDt,zDt,WDt,GDt,qDt,XDt,ZDt,ejt,rjt,ijt,ajt,cjt,kDt,djt,hjt,mjt,yRt,yjt,hRt,xRt,xjt,uRt,wjt,Cjt,Njt,Tjt,Ejt,Ajt,Ojt,Rjt,jjt,Fjt,Bjt,Vjt,Ujt,Hjt,Kjt,Xjt,Qjt,Jjt,tMt,nMt,rMt,sMt,oMt,cMt,bDt,dMt,bRt,xMt,wRt,bMt,CRt,TMt,kMt,$Mt,_Rt,kRt,IMt,PMt,DMt,MMt,$Rt,IRt,dRt,LMt,Sjt,zMt,WMt,GMt,wDt,PRt,DRt,qMt,MRt,XMt,ZMt,eFt,rFt,iFt,aFt,lFt,LRt,uFt,fFt,pFt,gFt,vFt,bFt,SFt,zRt,NFt,kFt,AFt,WRt,GRt,PFt,jFt,LFt,qRt,zFt,WFt,UFt,tSe,KFt,CDt,YRt,YFt,ZFt,eLt,nLt,fRt,bF,sLt,NDt,_Dt,TDt,oLt,lLt,uLt,fLt,pLt,mLt,yLt,sDt,xLt,NLt,TLt,ALt,oDt,OLt,RLt,jLt,aDt,EFt,LLt,zLt,WLt,GLt,qLt,XLt,QLt,JLt,uDt,e3t,fDt,pDt,n3t,s3t,o3t,l3t,u3t,vDt,aMt,f3t,p3t,g3t,v3t,b3t,S3t,KRt,A3t,O3t,R3t,VFt];for(const t of D3t)Dve(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gh={},QC={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function j3t(t,e){gh[t]=e}function El(t,e){if(!(t in gh)||e!=null){const r=F3t(t,e);if(r!==null)gh[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=gh[t];return n==null||n.isContextLost()?(delete gh[t],El(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),gh[t])}function M3t(t){if(!oe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function F3t(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??M3t(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete gh[t]},!1),oe().getBool("SOFTWARE_WEBGL_ENABLED")&&(QC.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",QC)||n.getContext("experimental-webgl",QC):n.getContext("webgl2",QC)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var y1;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(y1||(y1={}));var _o;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(_o||(_o={}));var gs;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(gs||(gs={}));function DS(t,e){return[e,t]}function L3t(t,e){return t*e}function ZC(t){const e=le(t),n=Math.ceil(e/4);return VM(n)}function Xv(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function B3t(t,e){const[n,r]=Xv(t,e);return n*r*4}function y6(t,e){const n=t;let r,s,i,o,a,l,c,u,d,h;return oe().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,i=n.RGBA16F,o=n.RGBA32F,a=n.RED,c=4,u=1,d=n.HALF_FLOAT,h=n.FLOAT,l=n.RGBA8):(r=t.RGBA,s=t.RGBA,i=t.RGBA,o=n.RGBA,a=t.RGBA,c=4,u=4,d=e!=null?e.HALF_FLOAT_OES:null,h=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:h}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fe(t,e){const n=e();return oe().getBool("DEBUG")&&z3t(t),n}function z3t(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+G3t(t,e))}const V3t=596e-10,W3t=65504;function U3t(t){return!!(oe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||V3t<Math.abs(t)&&Math.abs(t)<W3t)}function G3t(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function JC(t,e){return Qu(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function H3t(t,e){const n=Qu(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Fe(t,()=>t.shaderSource(n,e)),Fe(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function q3t(t,e){const n=Qu(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Fe(t,()=>t.shaderSource(n,e)),Fe(t,()=>t.compileShader(n)),oe().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw nSe(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const K3t=/ERROR: [0-9]+:([0-9]+):/g;function nSe(t,e){const n=K3t.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],s=t.split(`
`),i=s.length.toString().length+2,o=s.map((d,h)=>yg((h+1).toString(),i)+d);let a=0;for(let d=0;d<o.length;d++)a=Math.max(o[d].length,a);const l=o.slice(0,r-1),c=o.slice(r-1,r),u=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${yg(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function X3t(t){return Qu(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function Y3t(t,e){if(Fe(t,()=>t.linkProgram(e)),!oe().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function EP(t,e){if(Fe(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function Q3t(t,e){const n=Qu(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Fe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Fe(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function Z3t(t,e){const n=Qu(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Fe(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Fe(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function J3t(t){return Qu(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function e4t(t,e){const n=oe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function t4t(t){return Qu(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function WX(t,e,n,r,s,i,o){const a=t.getAttribLocation(e,n);return a===-1?!1:(Fe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Fe(t,()=>t.vertexAttribPointer(a,s,t.FLOAT,!1,i,o)),Fe(t,()=>t.enableVertexAttribArray(a)),!0)}function n4t(t,e,n){a4t(t,n),Fe(t,()=>t.activeTexture(t.TEXTURE0+n)),Fe(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function r4t(t,e,n){return Qu(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function s4t(t,e,n){return t.getUniformLocation(e,n)}function i4t(t,e,n,r){Fe(t,()=>n4t(t,e,r)),Fe(t,()=>t.uniform1i(n,r))}function $P(t,e,n){Fe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Fe(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function UX(t,e){Fe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Fe(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function e2(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+o4t(t,e))}function o4t(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Qu(t,e,n){const r=Fe(t,()=>e());if(r==null)throw new Error(n);return r}function a4t(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function qy(t,e=2){return le(t.slice(0,t.length-e))}function Ky(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function t2(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[qy(t),...Ky(t)]),e}function l4t(t,e=!1){let n=oe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=oe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&oe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?Mz(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Df(t).newShape);let s=le(t),i=null;t.length<=1&&s<=n?i=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const o=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||o)if(e){const a=qy(t);let l=2,c=2;t.length&&([l,c]=Ky(t)),s=a*(l/2)*(c/2),i=VM(s).map(u=>u*2)}else i=VM(s);return i}function n2(t){return t%2===0}function UT(t,e){if(t=t.slice(-2),e=e.slice(-2),cn(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||n2(n)&&n2(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&n2(t[0])&&n2(e[0])}let AP,IP;function c4t(t){if(AP==null){const e=El(t);AP=e.getParameter(e.MAX_TEXTURE_SIZE)}return AP}function u4t(t){if(IP==null){const e=El(t);IP=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,IP)}function d4t(t){if(t===0)return 0;let e;const n=El(t);return va(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:va(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function va(t,e){return t.getExtension(e)!=null}function GX(t){try{if(El(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function f4t(t){if(t===0)return!1;const e=El(t);if(t===1){if(!va(e,"OES_texture_float"))return!1}else if(!va(e,"EXT_color_buffer_float"))return!1;return SF(e)}function h4t(t){if(t===0)return!1;const e=El(t);if(t===1){if(!va(e,"OES_texture_float")||!va(e,"WEBGL_color_buffer_float"))return!1}else{if(va(e,"EXT_color_buffer_float"))return SF(e);const r="EXT_color_buffer_half_float";if(va(e,r)){const s=e.getExtension(r);return p4t(e,s)}return!1}return SF(e)}function SF(t){const e=y6(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),o}function p4t(t,e){const n=y6(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),a}function m4t(t){return t!==2?!1:El(t).fenceSync!=null}function jS(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&L(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const et=oe();et.registerFlag("HAS_WEBGL",()=>et.getNumber("WEBGL_VERSION")>0);et.registerFlag("WEBGL_VERSION",()=>GX(2)?2:GX(1)?1:0);et.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);et.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>et.get("WEBGL_VERSION")===2);et.registerFlag("WEBGL_CPU_FORWARD",()=>!0);et.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);et.registerFlag("WEBGL_PACK",()=>et.getBool("HAS_WEBGL"));et.registerFlag("WEBGL_PACK_NORMALIZATION",()=>et.getBool("WEBGL_PACK"));et.registerFlag("WEBGL_PACK_CLIP",()=>et.getBool("WEBGL_PACK"));et.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>et.getBool("WEBGL_PACK"));et.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>et.getBool("WEBGL_PACK"));et.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>et.getBool("WEBGL_PACK"));et.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>et.getBool("WEBGL_PACK"));et.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>et.getBool("WEBGL_PACK"));et.registerFlag("WEBGL_PACK_REDUCE",()=>et.getBool("WEBGL_PACK"));et.registerFlag("WEBGL_LAZILY_UNPACK",()=>et.getBool("WEBGL_PACK"));et.registerFlag("WEBGL_CONV_IM2COL",()=>et.getBool("WEBGL_PACK"));et.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>et.getBool("WEBGL_PACK"));et.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>c4t(et.getNumber("WEBGL_VERSION")));et.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>u4t(et.getNumber("WEBGL_VERSION")));et.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=et.getNumber("WEBGL_VERSION");return t===0?0:d4t(t)});et.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>et.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Zve());et.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>f4t(et.getNumber("WEBGL_VERSION")));et.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>et.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:et.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));et.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>h4t(et.getNumber("WEBGL_VERSION")));et.registerFlag("WEBGL_FENCE_API_ENABLED",()=>m4t(et.getNumber("WEBGL_VERSION")));et.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>et.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);et.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});et.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Zve()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});et.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);et.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);et.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);et.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);et.registerFlag("WEBGL_EXP_CONV",()=>!1);et.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>et.getBool("IS_TEST"));et.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);et.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);et.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);et.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fi(){let t,e,n,r,s,i,o,a,l,c;return oe().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",s="texture",i="outputColor",o="out vec4 outputColor;",a=oe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",s="texture2D",i="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:i,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rm(t,e,n="index"){const r=st(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / ${s}`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${s}`:`index -= ${t[i]} * ${s}`;return`${o}; ${a};`}).join("")}function KA(t,e,n="index"){const r=st(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${o}; ${a};`}).join("")}function g4t(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let i=n-3;i>=0;--i)s[i]=`(${s[i+1]} * ${r[i+1]})`;return s}function y4t(t,e,n="index"){const r=t.map((i,o)=>o),s=g4t(r,e);return s.map((i,o)=>{const a=`int ${t[o]} = ${n} / ${s[o]}`,l=o===s.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${s[o]}`:`index -= ${t[o]} * ${s[o]}`;return`${a}; ${l};`}).join("")}function v6(t){const e=st(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function x6(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const rSe=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:sSe}=aAt;function v4t(t,e,n){const r=[];if(t.forEach(p=>{const m=le(p.shapeInfo.logicalShape);if(p.shapeInfo.isUniform?r.push(`uniform float ${p.name}${m>1?`[${m}]`:""};`):(r.push(`uniform sampler2D ${p.name};`),r.push(`uniform int offset${p.name};`)),n.enableShapeUniforms){const{uniformShape:g}=b6(n.packedInputs,p.shapeInfo.logicalShape,p.shapeInfo.texShape);switch(g.length){case 1:r.push(`uniform int ${p.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${p.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${p.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${p.name}Shape;`);break}r.push(`uniform ivec2 ${p.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(p=>{r.push(`uniform ${p.type} ${p.name}${p.arrayIndex?`[${p.arrayIndex}]`:""};`)});const s=r.join(`
`),i=t.map(p=>x4t(p,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,a=fi(),l=S4t(a);let c,u,d=_4t(a);return e.isPacked?(c=b4t(e.logicalShape,o,n.enableShapeUniforms),u=N4t(a)):(c=w4t(e.logicalShape,o,n.enableShapeUniforms),u=C4t(a)),n.packedInputs&&(d+=$4t),[d,l,u,s,c,i,n.userCode].join(`
`)}function Yv(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return z4t(t,e);case 1:return W4t(t,e);case 2:return G4t(t,e);case 3:return q4t(t,e);case 4:return X4t(t,e);case 5:return Y4t(t);case 6:return Q4t(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function iSe(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return B4t(t);case 1:return V4t(t,e);case 2:return U4t(t,e);case 3:return H4t(t,e);default:return K4t(t,e)}}function x4t(t,e,n=!1,r){let s="";n?s+=iSe(t,r):s+=Yv(t,r);const i=t.shapeInfo.logicalShape,o=e.logicalShape;return i.length<=o.length&&(n?s+=Z4t(t,e):s+=J4t(t,e)),s}function b4t(t,e,n){switch(t.length){case 0:return oSe();case 1:return A4t(t,e,n);case 2:return F4t(t,e,n);case 3:return O4t(t,e,n);default:return R4t(t,e,n)}}function w4t(t,e,n){switch(t.length){case 0:return oSe();case 1:return I4t(t,e,n);case 2:return L4t(t,e,n);case 3:return P4t(t,e,n);case 4:return D4t(t,e,n);case 5:return j4t(t,e);case 6:return M4t(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function S4t(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function C4t(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function N4t(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function _4t(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${T4t}
    ${k4t}
    ${E4t}
  `}const T4t=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,k4t=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,E4t=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,$4t=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function oSe(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function A4t(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function I4t(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function O4t(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),i=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function P4t(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${KA(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=rm(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function R4t(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),i=s*Math.ceil(t[t.length-2]/2);let o=i,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)o*=t[t.length-c-1],a=`
      int b${c} = index / ${o};
      index -= b${c} * ${o};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${l});
    }
  `}function D4t(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${KA(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=rm(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function j4t(t,e){const n=rm(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function M4t(t,e){const n=rm(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function F4t(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(cn(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function L4t(t,e,n){return cn(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function sm(t){return`offset${t}`}function B4t(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=fi();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function z4t(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,i]=t.shapeInfo.texShape;if(s===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=sm(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function V4t(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,i=fi();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function W4t(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Qv(t)}
      }
    `;const s=t.shapeInfo.texShape,i=s[0],o=s[1];if(o===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=sm(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${o}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function U4t(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=i[0],a=i[1],l=fi();if(i!=null&&cn(n,i))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function G4t(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&cn(n,i)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const h=i[0],p=i[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${p}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:a}=Df(n),l=o;if(l.length<n.length){const h=Zv(t,l),p=["row","col"];return`
      ${Yv(h,e)}
      float ${s}(int row, int col) {
        return ${s}(${Jv(p,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Qv(t)}
      }
    `;const c=i[0],u=i[1],d=sm(r);return u===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function H4t(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const h=n.slice(1),p=[1,2],m=Zv(t,h),g=["b","row","col"];return`
        ${iSe(m,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${Jv(g,p)});
        }
      `}const a=fi();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=o[0],c=o[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function q4t(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],{newShape:a,keptDims:l}=Df(n),c=a;if(c.length<n.length){const g=Zv(t,c),y=["row","col","depth"];return`
        ${Yv(g,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${Jv(y,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${o}, 1)));
        ${Qv(t)}
      }
    `;const u=t.shapeInfo.texShape,d=u[0],h=u[1],p=t.shapeInfo.flatOffset;if(h===i&&p==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${h}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(h===o&&p==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const m=sm(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${m};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${o} + depth + ${m};
        vec2 uv = uvFromFlat(${d}, ${h}, index);
        return sampleTexture(${r}, uv);
      }
  `}function K4t(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=fi();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,o=i.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],d=Math.ceil(i[o-1]/2);let h=d*Math.ceil(i[o-2]/2),p="int b, int row, int col",m=`b * ${h} + (row / 2) * ${d} + (col / 2)`;for(let g=2;g<o-1;g++)p=`int b${g}, `+p,h*=i[o-g-1],m=`b${g} * ${h} + `+m;return`
    vec4 ${r}(${p}) {
      int index = ${m};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${s.texture2D}(${n}, uv);
    }
  `}function X4t(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,a=n[1]*o,{newShape:l,keptDims:c}=Df(n);if(l.length<n.length){const x=Zv(t,l),b=["row","col","depth","depth2"];return`
      ${Yv(x,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${Jv(b,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${i}, 1)));
        ${Qv(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],p=d[1],m=`int stride2 = ${r}Shape[3];`,g=`int stride1 = ${r}Shape[2] * stride2;`,y=`int stride0 = ${r}Shape[1] * stride1;`;if(p===a&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${m}
        ${g}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(p===i&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;const v=sm(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${m}
      ${g}
      ${y}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${v});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${h}, ${p}, index + ${v});
      return sampleTexture(${r}, uv);
    }
  `}function Y4t(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],i=e[3]*s,o=e[2]*i,a=e[1]*o,{newShape:l,keptDims:c}=Df(e);if(l.length<e.length){const g=Zv(t,l),y=["row","col","depth","depth2","depth3"];return`
      ${Yv(g)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Jv(y,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${i}, ${s})) +
          depth3;
        ${Qv(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],p=d[1];if(p===a&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===s&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=sm(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${i} +
          depth2 * ${s} + depth3 + ${m};
      vec2 uv = uvFromFlat(${h}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Q4t(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:i}=Df(e);if(s.length<e.length){const y=Zv(t,s),v=["row","col","depth","depth2","depth3","depth4"];return`
      ${Yv(y)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Jv(v,i)});
      }
    `}const o=e[5],a=e[4]*o,l=e[3]*a,c=e[2]*l,u=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${Qv(t)}
      }
    `;const d=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,p=h[0],m=h[1];if(m===u&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===o&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const g=sm(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${g};
      vec2 uv = uvFromFlat(${p}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Qv(t){const e=t.name,n=le(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function Z4t(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,a=sSe(t.shapeInfo.logicalShape,e.logicalShape),l=Sn(o),c=o-i;let u;const d=["x","y","z","w","u","v"];i===0?u="":o<2&&a.length>=1?u="coords = 0;":u=a.map(x=>`coords.${d[x+c]} = 0;`).join(`
`);let h="";o<2&&i>0?h="coords":h=t.shapeInfo.logicalShape.map((x,b)=>`coords.${d[b+c]}`).join(", ");let p="return outputValue;";const g=le(t.shapeInfo.logicalShape)===1,v=le(e.logicalShape)===1;if(i===1&&!g&&!v)p=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(g&&!v)o===1?p=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:p=`
        return vec4(outputValue.x);
      `;else if(a.length){const x=i-2,b=i-1;a.indexOf(x)>-1&&a.indexOf(b)>-1?p="return vec4(outputValue.x);":a.indexOf(x)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(b)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${h});
      ${p}
    }
  `}function J4t(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=e.texShape,o=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&cn(o,i))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=Sn(l),u=sSe(t.shapeInfo.logicalShape,e.logicalShape),d=l-a;let h;const p=["x","y","z","w","u","v"];a===0?h="":l<2&&u.length>=1?h="coords = 0;":h=u.map(g=>`coords.${p[g+d]} = 0;`).join(`
`);let m="";return l<2&&a>0?m="coords":m=t.shapeInfo.logicalShape.map((g,y)=>`coords.${p[y+d]}`).join(", "),`
    float ${s}() {
      ${c} coords = getOutputCoords();
      ${h}
      return get${r}(${m});
    }
  `}function Sn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function b6(t,e,n){const{newShape:r,keptDims:s}=Df(e),i=e.length,o=t&&i===3&&e[0]===1,a=o?e.slice(1):r,l=!t&&i>1&&!cn(e,n)&&r.length<i||o;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:s}}function Zv(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Jv(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eBt(t,e,n,r){const s=n.map((u,d)=>{const h={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(h.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:h}}),i=s.map(u=>u.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=v4t(s,o,e),l=q3t(t.gl,a),c=t.createProgram(l);return oe().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:o},aSe(t,e,c)))}function aSe(t,e,n){const r=[],s=[];let i,o,a,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),oe().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const d of e.variableNames){const h={name:d,uniform:t.getUniformLocation(n,d,u),offset:t.getUniformLocation(n,`offset${d}`,u)};e.enableShapeUniforms&&(h.shape=t.getUniformLocation(n,`${d}Shape`,u),h.texShape=t.getUniformLocation(n,`${d}TexShape`,u)),r.push(h)}if(e.enableShapeUniforms&&(i=t.getUniformLocation(n,"outShape",u),a=t.getUniformLocation(n,"outShapeStrides",u),o=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const d of e.customUniforms)s.push(t.getUniformLocation(n,d.name,u));return{variablesLocations:r,customUniformLocations:s,infLoc:l,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:o}}function HX(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const s=n.logicalShape,i=e[r],o=i.shape;if(!cn(s,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${o} must match`);if(n.isUniform&&i.isUniform)return;const a=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!cn(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function tBt(t,e,n,r,s){e.program.enableShapeUniforms||(HX(e.inShapeInfos,n),HX([e.outShapeInfo],[r]));const i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):t.setOutputMatrixTexture(i.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),oe().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:u,offset:d,shape:h,texShape:p}=e.variablesLocations[l];if(h){const{uniformShape:m}=b6(e.program.packedInputs,c.shape,c.texData.texShape);switch(m.length){case 1:t.gl.uniform1iv(h,new Int32Array(m));break;case 2:t.gl.uniform2iv(h,new Int32Array(m));break;case 3:t.gl.uniform3iv(h,new Int32Array(m));break;case 4:t.gl.uniform4iv(h,new Int32Array(m));break}}if(p&&t.gl.uniform2i(p,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(le(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let m=c.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),t.gl.uniform1fv(u,m)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=st(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],d=s[l];if(c.type==="float")t.gl.uniform1fv(u,d);else if(c.type==="vec2")t.gl.uniform2fv(u,d);else if(c.type==="vec3")t.gl.uniform3fv(u,d);else if(c.type==="vec4")t.gl.uniform4fv(u,d);else if(c.type==="int")t.gl.uniform1iv(u,d);else if(c.type==="ivec2")t.gl.uniform2iv(u,d);else if(c.type==="ivec3")t.gl.uniform3iv(u,d);else if(c.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function nBt(t,e,n){let r="";e.concat(n).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=b6(t.packedInputs,o.shape,l);let h="",p="",m="";if(u.length===1&&t.packedInputs){const w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];h=`${w[0]>1}_${w[1]>1}`}else if(u.length===2&&!t.packedInputs)p=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){const w=st(u);m=`${w[0]===l[1]}_${w[w.length-1]===l[1]}`}const g=o.shape.length,y=u.length===2&&cn(o.shape,l),v=le(o.shape)===1,x=By(o.shape,n.shape),b=!t.packedInputs&&g===n.shape.length&&cn(l,n.texData.texShape),S=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${g}_${b}_${c?d:""}_${u.length}_${v}_${x}_${y}_${h}_${p}_${m}_${S}_${a}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${a}`}});const s=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+s+`${oe().getNumber("WEBGL_VERSION")}`,i}function Bs(t){return oe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rBt{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=y1.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=fi();this.outputShape=e,this.enableShapeUniforms=Bs(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?KA(["r","c","d"],e):rm(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sBt{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=y1.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=fi();this.outputShape=e,this.enableShapeUniforms=Bs(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?KA(["r","c","d"],e):rm(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iBt{constructor(e){this.variableNames=["A"],this.outTexUsage=_o.DOWNLOAD;const n=fi();this.outputShape=e,this.userCode=`
      ${rSe}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oBt{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=_o.DOWNLOAD;const n=fi();this.outputShape=e,this.userCode=`
      ${rSe}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aBt={R:0,G:1,B:2,A:3};class qX{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=fi();this.outputShape=e,this.enableShapeUniforms=Bs(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let o="";for(let a=0;a<r.length;a++){const l=r[a];o+=`
          if(offset == ${a}) {
            result = values[${aBt[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?x6():v6(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${o}
        }
        ${s.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lBt{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=fi();this.outputShape=e,this.enableShapeUniforms=Bs(this.outputShape.length);let s="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=o*2+a;s+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?x6():v6(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cBt(t){const e=fi(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return H3t(t,n)}function uBt(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Q3t(t,e)}function dBt(t){const e=new Uint16Array([0,1,2,2,1,3]);return Z3t(t,e)}function MS(t,e,n,r,s,i){e4t(e,n);const o=J3t(t),a=t.TEXTURE_2D;return Fe(t,()=>t.bindTexture(a,o)),Fe(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Fe(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Fe(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Fe(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),oe().getNumber("WEBGL_VERSION")===1?Fe(t,()=>t.texImage2D(a,0,r,e,n,0,s,i,null)):Fe(t,()=>t.texStorage2D(a,1,r,e,n)),Fe(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function lSe(t){return t.internalFormatFloat}function fBt(t,e,n,r){const[s,i]=DS(e,n);return MS(t,s,i,lSe(r),r.textureFormatFloat,t.FLOAT)}function cSe(t){return t.internalFormatHalfFloat}function hBt(t,e,n,r){const[s,i]=DS(e,n);return MS(t,s,i,cSe(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function uSe(t){return t.downloadTextureFormat}function pBt(t,e,n,r){const[s,i]=DS(e,n);return MS(t,s,i,uSe(r),t.RGBA,t.UNSIGNED_BYTE)}function dSe(t){return t.internalFormatPackedFloat}function mBt(t,e,n,r){const[s,i]=Xv(e,n);return MS(t,s,i,dSe(r),t.RGBA,t.FLOAT)}function fSe(t){return t.internalFormatPackedHalfFloat}function gBt(t,e,n,r){const[s,i]=Xv(e,n);return MS(t,s,i,fSe(r),t.RGBA,r.textureTypeHalfFloat)}function yBt(t,e,n){return Fe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),WX(t,e,"clipSpacePos",n,3,20,0)&&WX(t,e,"uv",n,2,20,12)}function vBt(t,e,n,r,s,i){Fe(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,a,l;s instanceof Uint8Array?(o=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),a=t.FLOAT,l=i.internalFormatPackedFloat),o.set(s),oe().getNumber("WEBGL_VERSION")===2?Fe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,o)):Fe(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,o)),Fe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function xBt(t,e,n){Fe(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?oe().getNumber("WEBGL_VERSION")===2?Fe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Fe(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):oe().getNumber("WEBGL_VERSION")===2?Fe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Fe(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Fe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function bBt(t,e,n,r){const s=t.createBuffer();Fe(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const a=4*4*e*n;return Fe(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Fe(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Fe(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function wBt(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function SBt(t,e,n,r){const[s,i]=DS(e,n),o=4,a=new Uint8Array(L3t(e*n,o));return Fe(t,()=>t.readPixels(0,0,s,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function CBt(t,e,n,r,s,i,o,a){const l=t,c=new Float32Array(B3t(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function NBt(t,e,n){const r=new Float32Array(e*n*4);return Fe(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OP{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=oe().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,j3t(n,e)):this.gl=El(n),e=this.gl,oe().getNumber("WEBGL_VERSION")===2){const i=e;this.createVertexArray=()=>Fe(i,()=>i.createVertexArray()),this.bindVertexArray=o=>Fe(i,()=>i.bindVertexArray(o)),this.deleteVertexArray=o=>Fe(i,()=>i.deleteVertexArray(o)),this.getVertexArray=()=>Fe(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){const i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Fe(e,()=>i.createVertexArrayOES()),this.bindVertexArray=o=>Fe(e,()=>i.bindVertexArrayOES(o)),this.deleteVertexArray=o=>Fe(e,()=>i.deleteVertexArrayOES(o)),this.getVertexArray=()=>Fe(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),oe().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=JC(this.gl,i),va(this.gl,o))this.textureHalfFloatExtension=JC(this.gl,o);else if(oe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),va(this.gl,s))this.colorBufferHalfFloatExtension=JC(this.gl,s);else if(oe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",va(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(va(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=uBt(this.gl),this.indexBuffer=dBt(this.gl),this.framebuffer=t4t(this.gl),this.textureConfig=y6(this.gl,this.textureHalfFloatExtension)}get debug(){return oe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Fe(e,()=>e.finish()),Fe(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Fe(e,()=>e.deleteFramebuffer(this.framebuffer)),Fe(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Fe(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Fe(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),fBt(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),hBt(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),pBt(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),xBt(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,s){this.throwIfDisposed(),vBt(this.gl,e,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),gBt(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),mBt(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(UX(this.gl,this.framebuffer),this.outputTexture=null),Fe(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>SBt(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,s,i,o){return CBt(this.gl,e,n,r,s,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return wBt(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const s=bBt(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(oe().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,i=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=s.clientWaitSync(i,0,0);return o===s.ALREADY_SIGNALED||o===s.CONDITION_SATISFIED},n=i}else oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>NBt(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=cBt(n));const r=X3t(n);Fe(n,()=>n.attachShader(r,this.vertexShader)),Fe(n,()=>n.attachShader(r,e)),Y3t(n,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&EP(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;Fe(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),yBt(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Fe(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&EP(this.gl,this.program),Fe(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?r4t(this.gl,e,n):s4t(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Fe(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),i4t(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[s,i]=Xv(n,r);this.setOutputMatrixTextureDriver(e,s,i)}setOutputMatrixWriteRegion(e,n,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&EP(this.gl,this.program),e2(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Fe(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Fe(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=JC(this.gl,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await PK(()=>this.disposed||this.isQueryAvailable(e,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=_Bt(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in oe().platform&&(r=oe().platform.setTimeoutCustom.bind(oe().platform)),PK(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),$P(this.gl,e,this.framebuffer),this.debug&&e2(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?($P(this.gl,this.outputTexture,this.framebuffer),this.debug&&e2(this.gl)):UX(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const s=this.gl;$P(s,e,this.framebuffer),this.debug&&e2(s),this.outputTexture=e,Fe(s,()=>s.viewport(0,0,n,r)),Fe(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,s){this.throwIfDisposed(),Fe(this.gl,()=>this.gl.scissor(e,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function _Bt(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:TBt,bincountImpl:hSe,bincountReduceImpl:kBt,bitwiseAndImpl:EBt,castImpl:$Bt,ceilImpl:ABt,concatImpl:IBt,equalImpl:OBt,expImpl:PBt,expm1Impl:RBt,floorImpl:DBt,gatherNdImpl:jBt,gatherV2Impl:MBt,greaterImpl:FBt,greaterEqualImpl:LBt,lessImpl:BBt,lessEqualImpl:zBt,linSpaceImpl:VBt,logImpl:WBt,maxImpl:UBt,maximumImpl:GBt,minimumImpl:HBt,multiplyImpl:qBt,negImpl:KBt,notEqualImpl:XBt,prodImpl:YBt,raggedGatherImpl:QBt,raggedRangeImpl:ZBt,raggedTensorToTensorImpl:JBt,rangeImpl:ezt,rsqrtImpl:tzt,scatterImpl:nzt,sigmoidImpl:rzt,simpleAbsImpl:pSe,sliceImpl:szt,sparseFillEmptyRowsImpl:izt,sparseReshapeImpl:ozt,sparseSegmentReductionImpl:mSe,sqrtImpl:azt,staticRegexReplaceImpl:lzt,stridedSliceImpl:czt,stringNGramsImpl:uzt,stringSplitImpl:dzt,stringToHashBucketFastImpl:fzt,subImpl:hzt,tileImpl:pzt,topKImpl:mzt,transposeImpl:w6,uniqueImpl:gzt}=xDt;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gSe(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function ni(t,e){return e===1?[t]:gSe(t,e)}function yzt(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vzt{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Bs(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=ni("rc",this.rank),r=Sn(this.rank),s=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let i=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)i=`${e[e.length-1-o]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ySe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Bs(this.outputShape.length);let r="";for(let s=0;s<4;s++){let i="thisRC = rc;";s%2===1&&(i+="thisRC.z += 1;"),s>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${xzt(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?x6():v6(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function xzt(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?y4t(["r","c","d"],"inputShape"):rm(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bzt{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const s=XX(n,r),i=YX(e,s,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=KX(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[i].pop();return this.usedTextures[i].push(l),l}let a;return s===gs.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===gs.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===gs.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===gs.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===gs.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,n,r,s){if(this.freeTextures==null)return;const i=XX(r,s),o=YX(n,i,s);o in this.freeTextures||(this.freeTextures[o]=[]);const a=KX(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=oe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[o],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function wzt(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function KX(t,e,n,r,s){const i=Szt(e,r);let o;if(s){const[l,c]=Xv(t[0],t[1]);o=l*c}else{const[l,c]=DS(t[0],t[1]);o=l*c}const a=wzt(n,i);return o*a}function Szt(t,e){switch(t){case gs.PACKED_2X2_FLOAT32:return dSe(e);case gs.PACKED_2X2_FLOAT16:return fSe(e);case gs.UNPACKED_FLOAT32:return lSe(e);case gs.UNPACKED_FLOAT16:return cSe(e);case gs.PACKED_4X1_UNSIGNED_BYTE:return uSe(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function Czt(t){return oe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?gs.PACKED_2X2_FLOAT32:gs.UNPACKED_FLOAT32:t?gs.PACKED_2X2_FLOAT16:gs.UNPACKED_FLOAT16}function XX(t,e){if(t===_o.UPLOAD)return gs.PACKED_2X2_FLOAT32;if(t===_o.RENDER||t==null)return Czt(e);if(t===_o.DOWNLOAD||t===_o.PIXELS)return gs.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function YX(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oc{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Bs(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const La="if (isnan(x)) return x;",Nzt="return x;",QX="return abs(x);",_zt="return (x >= 0.0) ? x : (exp(x) - 1.0);",Tzt=La+`
  return (x < 0.0) ? 0.0 : x;
`,kzt=La+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,ud="return x;",Ezt="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $zt="return x;",Azt=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Izt=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Ozt=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Pzt="return 1.0 / (1.0 + exp(-1.0 * x));";class Pd{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Bs(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rzt{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Bs(this.outputShape.length);const n=e.length,r=ni("rc",n),s=Sn(n),i=yzt(n,r),o=r.slice(-2),a=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dzt=zxe,jzt=1e-7,Mzt=1e-4,r2={};function Fzt(t){return t in r2||(r2[t]={}),r2[t]}const Lzt=oe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Bzt=600;function zzt(){return oe().global.screen==null?1024:oe().global.screen.height*oe().global.screen.width*window.devicePixelRatio*Bzt/1024/1024}class XA extends jz{nextDataId(){return XA.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!oe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof OP)n=e;else{const r=El(oe().getNumber("WEBGL_VERSION"),e);n=new OP(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=El(oe().getNumber("WEBGL_VERSION"));n=new OP(r),this.binaryCache=Fzt(oe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new bzt(this.gpgpu),this.numMBBeforeWarning=zzt(),this.texData=new ove(this,zl())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,s,i,o){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[s,i]},l.texShape=[s,i];const c=t2(n),u=new qX(c,!1,o),d=this.runWebGLProgram(u,[a],r,[[s,i]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,r){if((oe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||oe().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:e,usage:_o.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,s,i){if(oe().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:n,usage:_o.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:i,slice:o,shape:a,isPacked:l}=n;if(o!=null){let h;l?h=new Pd(a,ud):h=new oc(a,ud);const p=this.runWebGLProgram(h,[{dataId:e,shape:a,dtype:s}],s),m=this.readSync(p.dataId);return this.disposeIntermediateTensorInfo(p),m}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const c=this.activeTimers!=null;let u;c&&(u=bi());let d;if(s==="complex64"){const h=this.readSync(i.real.dataId),p=this.readSync(i.imag.dataId);d=Lu(h,p)}else d=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=bi()-u),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const m=this.pendingRead.get(e);return new Promise(g=>m.push(g))}const n=this.texData.get(e),{values:r,shape:s,slice:i,dtype:o,complexTensorInfos:a,isPacked:l}=n;if(i!=null){let m;l?m=new Pd(s,ud):m=new oc(s,ud);const g=this.runWebGLProgram(m,[{dataId:e,shape:s,dtype:o}],o),y=this.read(g.dataId);return this.disposeIntermediateTensorInfo(g),y}if(r!=null)return this.convertAndCacheOnCPU(e);if(oe().getBool("DEBUG")&&!oe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&oe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(o!=="complex64"&&oe().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const m=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(m.texture.texture,...ZC(s))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(o==="complex64"){const m=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),g=m[0],y=m[1];d=Lu(g,y)}else if(c==null)d=this.getValuesFromTexture(e);else{const m=le(s);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,m)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const m=this.gpgpu.gl;Fe(m,()=>m.deleteBuffer(c))}const h=this.convertAndCacheOnCPU(e,d),p=this.pendingRead.get(e);return this.pendingRead.delete(e),p.forEach(m=>m(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&zl().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e,n={}){const r=this.texData.get(e),{values:s,shape:i,slice:o,dtype:a,isPacked:l,texture:c}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let p;l?p=new Pd(i,ud):p=new oc(i,ud);const m=this.runWebGLProgram(p,[{dataId:e,shape:i,dtype:a}],a),g=this.readToGPU(m,n);return this.disposeIntermediateTensorInfo(m),g}if(c==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),d=zl().makeTensorFromTensorInfo(u),h=this.texData.get(u.dataId);return Object.assign({tensorRef:d},h.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>hf(s));return zt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return zt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!U3t(r))throw oe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:s}=this.texData.get(e),i=le(n);if(oe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const h=this.decode(e),p=this.texData.get(h.dataId),m=this.gpgpu.downloadMatrixFromPackedTexture(p.texture.texture,...ZC(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(h),m}const o=oe().getBool("WEBGL_PACK")&&s===!0,a=o?t2(n):n,l=o?new oBt(a):new iBt(a),c=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),u=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=yp(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=yp(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);a.kernelMs=E2t(l),a.getExtraProfileInfo=()=>l.map((c,u)=>({name:o[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:bi(),endMs:null}}endTimer(e){return oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=bi(),e)}async getQueryTime(e){if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:s,usage:i,isPacked:o,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,i,o)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=Lzt){return oe().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&le(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Co("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return Dzt(e.shape,n)}packedUnaryOp(e,n,r){const s=new Pd(e.shape,n),i=this.compileAndRun(s,[e],r);return zl().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=pSe(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(oe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,QX,e.dtype);const n=new oc(e.shape,QX),r=this.compileAndRun(n,[e]);return zl().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&Sw(r[0])){const i=r.map(o=>Kd(o));s=this.write(i,e,n)}else s=this.write(r,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,r){return zl().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new Rzt(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new vzt(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[qy(e.shape),...Ky(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},i=[qy(n),...Ky(n)],o=new ySe(i,r),a=!0,l=[r],c=this.runWebGLProgram(o,[s],e.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:s,shape:i,dtype:o}=r;if(n!=null){const h=le(i),p=n[0]*n[1]*4;L(h<=p,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=t2(i);let l;s?l=new sBt(a):l=new rBt(a);const c=!0,u=[n??ZC(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:o,dataId:e}],o,u,c,n);return{dtype:o,shape:i,dataId:d.dataId}}runWebGLProgram(e,n,r,s,i=!1,o){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===y1.DENSE){const v=o??ZC(e.outputShape);l.texShape=v.map(x=>x*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),le(a.shape)===0)return l.values=Ds(a.dtype,0),a;const c=[],u=n.map(v=>{if(v.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let x=this.texData.get(v.dataId);if(x.texture==null){if(!e.packedInputs&&le(v.shape)<=oe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:v.shape,texData:null,isUniform:!0,uniformValues:x.values};e.packedInputs&&(x.isPacked=!0,x.shape=v.shape)}if(this.uploadToGPU(v.dataId),!!x.isPacked!=!!e.packedInputs)v=x.isPacked?this.unpackTensor(v):this.packTensor(v),c.push(v),x=this.texData.get(v.dataId);else if(x.isPacked&&!UT(x.shape,v.shape)){const b=v,S=v.shape;v.shape=x.shape,v=this.packedReshape(v,S),c.push(v),x=this.texData.get(v.dataId),b.shape=S}return{shape:v.shape,texData:x,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},h=nBt(e,u,d),p=this.getAndSaveBinary(h,()=>eBt(this.gpgpu,e,u,d)),m=this.activeTimers!=null;let g;m&&(g=this.startTimer()),oe().get("ENGINE_COMPILE_ONLY")||tBt(this.gpgpu,p,u,d,s),c.forEach(v=>this.disposeIntermediateTensorInfo(v)),m&&(g=this.endTimer(g),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(g)}));const y=oe().getNumber("WEBGL_FLUSH_THRESHOLD");if(y>0){const v=bi();v-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=v)}if(!oe().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const v=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),v}return a}compileAndRun(e,n,r,s,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,s,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(oe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=re(()=>{if(!oe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=oe().getBool("DEBUG");oe().set("DEBUG",!1);const n=this.abs(an(1e-8)).dataSync()[0];if(oe().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?jzt:Mzt}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:s,values:i,texture:o,usage:a,isPacked:l}=n;if(o!=null)return;const c=this.activeTimers!=null;let u;c&&(u=bi());let d=n.texShape;if(d==null&&(d=l4t(r,l),n.texShape=d),i!=null){const h=t2(r);let p,m=d[1],g=d[0];const y=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!y)&&([m,g]=Xv(d[0],d[1])),l?p=new lBt(h,y):p=new qX(h,y);const v=y?[g,m]:d,x=this.makeTensorInfo(v,s),b=this.texData.get(x.dataId);y?b.usage=_o.PIXELS:b.usage=_o.UPLOAD,b.texShape=v,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),m,g,i);const S=[[g,m]],C=this.runWebGLProgram(p,[x],s,S,!0),_=this.texData.get(C.dataId);n.texShape=_.texShape,n.isPacked=_.isPacked,n.usage=_.usage,oe().get("ENGINE_COMPILE_ONLY")?this.disposeData(C.dataId):(n.texture=_.texture,n.values=null,this.texData.delete(C.dataId)),this.disposeIntermediateTensorInfo(x),c&&(this.uploadWaitMs+=bi()-u)}else{const h=this.acquireTexture(d,a,s,l);n.texture=h}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:s}=r;return n!=null&&(r.values=Vzt(n,s)),r.values}acquireTexture(e,n,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*vT(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await s0e(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(nSe(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:s,nanLoc:i,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:l}=aSe(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=i,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:s,height:i,width:o,channels:a}=e,l=zl().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(s,n,r,i,o,a);return zl().makeTensorFromDataId(c,n,r,l)}}XA.nextDataId=0;function Vzt(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Jve()&&rxe("webgl",()=>new XA,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S6=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class $p{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=Pt(n,r),this.enableShapeUniforms=Bs(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const im=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class ex{constructor(e,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Pt(n,r);const i=this.outputShape.length;this.enableShapeUniforms=Bs(i);let o="";if(s)if(i===0||le(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${Sn(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=ni("coords",i);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lo(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Wzt={kernelName:Ww,backendName:"webgl",kernelFunc:lo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uf(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),a=lo({inputs:{x:r},backend:n}),l=lo({inputs:{x:s},backend:n});return o.complexTensorInfos={real:a,imag:l},i}const Uzt={kernelName:Xz,backendName:"webgl",kernelFunc:Uf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vSe="return (a < 0.) ? b * a : a;",xSe=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Gzt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r,o=n.makeTensorInfo([],"float32",jf(i,"float32")),a=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ex(xSe,s.shape,o.shape):new $p(vSe,s.shape,o.shape),l=n.runWebGLProgram(a,[s,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const Hzt={kernelName:W$,backendName:"webgl",kernelFunc:Gzt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bSe="return (a < 0.) ? b * a : a;",wSe=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function qzt(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,i=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ex(wSe,r.shape,s.shape):new $p(bSe,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],"float32")}const Kzt={kernelName:lA,backendName:"webgl",kernelFunc:qzt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tx="if (isnan(x)) return x;";function Jt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:i})=>{const{x:o}=s,a=i,l=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&n!=null){const d=a.texData.get(o.dataId),h=n(d.values,l);return a.makeTensorInfo(o.shape,l,h)}const c=oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new Pd(o.shape,e):u=new oc(o.shape,t),a.runWebGLProgram(u,[o],l)}}function Cs({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:i}){return({inputs:o,backend:a})=>{const{a:l,b:c}=o,u=a;if(r&&l.dtype==="complex64"){const m=u.texData.get(l.dataId),g=u.texData.get(c.dataId),[y,v]=[[m.complexTensorInfos.real,g.complexTensorInfos.real],[m.complexTensorInfos.imag,g.complexTensorInfos.imag]].map(b=>{const[S,w]=b,C={dataId:S.dataId,dtype:S.dtype,shape:l.shape},_={dataId:w.dataId,dtype:w.dtype,shape:c.shape},T=new $p(t,l.shape,c.shape);return u.runWebGLProgram(T,[C,_],oo(S.dtype,w.dtype))}),x=Uf({inputs:{real:y,imag:v},backend:u});return u.disposeIntermediateTensorInfo(y),u.disposeIntermediateTensorInfo(v),x}const d=i||oo(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&s!=null){const m=u.texData.get(l.dataId).values,g=u.texData.get(c.dataId).values,y=l.dtype==="string"?Bu(m):m,v=l.dtype==="string"?Bu(g):g,[x,b]=s(l.shape,c.shape,y,v,d),S=u.makeTensorInfo(b,d),w=u.texData.get(S.dataId);return w.values=x,S}const h=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let p;return h?p=new ex(e,l.shape,c.shape,n):p=new $p(t,l.shape,c.shape),u.runWebGLProgram(p,[l,c],d)}}function v1(t,e=!1){if(t==="linear")return e?$zt:Nzt;if(t==="relu")return e?Izt:Tzt;if(t==="elu")return e?Azt:_zt;if(t==="relu6")return e?Ozt:kzt;if(t==="prelu")return e?wSe:bSe;if(t==="leakyrelu")return e?xSe:vSe;if(t==="sigmoid")return e?Pzt:Ezt;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SSe{constructor(e,n,r,s=!1,i=!1,o=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Bs(this.outputShape.length);const u=s?e[1]:e[2],d=Math.ceil(u/2),h=s?"i * 2, rc.y":"rc.y, i * 2",p=i?"rc.z, i * 2":"i * 2, rc.z",m=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],g=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let y="",v="";a&&(l?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:y=`vec4 activation(vec4 x) {
          ${a}
        }`,v="result = activation(result);");const x=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let b="rc.x",S="rc.x";e[0]<n[0]?b=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(S=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${y}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${b};
        int batchB = ${S};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${h});
          vec4 b = getMatrixB(batchB, ${p});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${m[0]} * ${g[0]});
          result += (${m[1]} * ${g[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${x}

        ${v}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZX={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class JX{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Pt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eY="return a * b;";function C6(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=oo(r.dtype,s.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),c=new JX(ZX.REAL,r.shape,s.shape),u=new JX(ZX.IMAG,r.shape,s.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],h=n.runWebGLProgram(c,d,"float32"),p=n.runWebGLProgram(u,d,"float32"),m=Uf({inputs:{real:h,imag:p},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),m}if(n.shouldExecuteOnCPU([r,s])){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),[c,u]=qBt(r.shape,s.shape,a.values,l.values,i),d=n.makeTensorInfo(u,i),h=n.texData.get(d.dataId);return h.values=c,d}let o;return oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new ex(eY,r.shape,s.shape):o=new $p(eY,r.shape,s.shape),n.runWebGLProgram(o,[r,s],i)}const Xzt={kernelName:Zw,backendName:"webgl",kernelFunc:C6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yzt(t,e,n){const r=[qy(t.shape),...Ky(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},i=[qy(e),...Ky(e)],o=new ySe(i,r),a=!0,l=[r],c=n.runWebGLProgram(o,[s],t.dtype,l,a);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,o=n,a=le(s.shape),l=lve(i,a),c=le(l);L(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const u=o.texData.get(s.dataId);return u.isPacked&&!UT(s.shape,l)&&!(u.texture!==null&&UT(u.shape,l))?Yzt(s,l,o):(o.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const Qzt={kernelName:uA,backendName:"webgl",kernelFunc:Pe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tY{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];const a=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const d=1/n;c=`sumValue += dot(values * ${jy(d)?d.toPrecision(2):d}, ones);`}let u="";i%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zzt{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const u=Math.floor(r/4)*4,d=r%4;let h=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,p="vec4";n==="all"?(a="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,p="bvec4"):n==="any"&&(a="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,p="bvec4");let m="";i%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${h}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===2}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===3}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${h}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jzt(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=PA(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function om(t,e,n,r){const s=Jzt(t.shape);let i=t;for(let o=0;o<s.length;o++){const{inSize:a,windowSize:l,outSize:c}=s[o];let u,d;n==="mean"?u=o===0?new tY({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new tY({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new Zzt({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},n),d=i,i=r.runWebGLProgram(u,[i],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eVt{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const s=Sn(this.rank),i=tVt(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function tVt(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nVt{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[n[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=Sn(this.rank),i=gSe("rc",this.rank),o=new Array(this.rank);for(let u=0;u<n.length;u++)o[n[u]]=i[u];const a=`vec2(${o.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YA(t,e,n){const r=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new nVt(t.shape,e):new eVt(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rVt(t,e,n,r){const s=e,i=t.shape.length,o=Vt(s,t.shape);let a=o;const l=lr(a,i),c=l!=null;let u=t;c&&(u=YA(t,l,r),a=Er(a.length,i)),Ss("sum",a,i);const[d,h]=ds(u.shape,a);let p=d;n&&(p=Mr(d,o));const m=le(h),y=le(t.shape)/m,v=Pe({inputs:{x:u},attrs:{shape:[y,m]},backend:r}),x=AV(t.dtype),b=om(v,x,"sum",r),S=Pe({inputs:{x:b},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(b),c&&r.disposeIntermediateTensorInfo(u),S}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QA(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;return rVt(s,i,o,n)}const sVt={kernelName:gA,backendName:"webgl",kernelFunc:QA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function di(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:i}=r,o=n,a=s.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=s.shape[i[u]];let c;if(o.shouldExecuteOnCPU([s])){const d=o.texData.get(s.dataId).values,h=w6(d,s.shape,s.dtype,i,l);c=o.makeTensorInfo(l,s.dtype);const p=o.texData.get(c.dataId);p.values=h}else c=YA(s,i,o);return c}const iVt={kernelName:vg,backendName:"webgl",kernelFunc:di};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CSe=1e3;function GT({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape.length,u=e.shape.length,d=n?t.shape[c-2]:t.shape[c-1],h=r?e.shape[u-1]:e.shape[u-2],p=n?t.shape[c-1]:t.shape[c-2],m=r?e.shape[u-2]:e.shape[u-1],g=t.shape.slice(0,-2),y=e.shape.slice(0,-2),v=le(g),x=le(y),S=Pt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([p,m]);L(d===h,()=>`Error in matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const w=n?[v,d,p]:[v,p,d],C=r?[x,m,h]:[x,h,m],_=Pe({inputs:{x:t},backend:s,attrs:{shape:w}}),T=Pe({inputs:{x:e},backend:s,attrs:{shape:C}}),k=[_,T],$=Math.max(v,x),O=n?_.shape[1]:_.shape[2],P=i!=null,D=o!=null,A=l==="leakyrelu",I=l!=null?v1(l,!0):null,R=P||D||A||I!=null;let M;if((p===1||m===1)&&O>CSe&&R===!1){let j=_,B=T;n&&(j=di({inputs:{x:_},backend:s,attrs:{perm:[0,2,1]}}),k.push(j)),r&&(B=di({inputs:{x:T},backend:s,attrs:{perm:[0,2,1]}}),k.push(B));const W=m!==1,G=m===1;let te=j;W&&(te=Pe({inputs:{x:j},backend:s,attrs:{shape:[$,O,1]}}),k.push(te));const ne=m===1?2:1;let ue=B;G&&(ue=Pe({inputs:{x:B},backend:s,attrs:{shape:[$,1,O]}}),k.push(ue));const ge=C6({inputs:{a:te,b:ue},backend:s});M=QA({inputs:{x:ge},backend:s,attrs:{axis:ne,keepDims:!0}}),k.push(ge)}else{const j=oo(t.dtype,e.dtype),B=new SSe(w,C,[$,p,m],n,r,P,I,D,A),W=[_,T];if(i!=null&&W.push(i),D&&W.push(o),A){const G=s.makeTensorInfo([],"float32",jf(a,"float32"));W.push(G),k.push(G)}M=s.runWebGLProgram(B,W,j)}const E=Pe({inputs:{x:M},backend:s,attrs:{shape:S}});k.push(M);for(const j of k)s.disposeIntermediateTensorInfo(j);return E}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oVt(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return GT({a:s,b:i,transposeA:l,transposeB:c,backend:n,bias:o,preluActivationWeights:a,leakyreluAlpha:d,activation:u})}const aVt={kernelName:xT,backendName:"webgl",kernelFunc:oVt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nY="return abs(x);";function lVt(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),o=pSe(i.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let s;return oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Pd(r.shape,nY):s=new oc(r.shape,nY),n.runWebGLProgram(s,[r],r.dtype)}const cVt={kernelName:C$,backendName:"webgl",kernelFunc:lVt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uVt=La+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,dVt=Jt({opSnippet:uVt}),fVt={kernelName:Cw,backendName:"webgl",kernelFunc:dVt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hVt=La+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,pVt=Jt({opSnippet:hVt}),mVt={kernelName:Nw,backendName:"webgl",kernelFunc:pVt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rY="return a + b;",gVt=Cs({opSnippet:rY,packedOpSnippet:rY,supportsComplex:!0,cpuKernelImpl:TBt}),yVt={kernelName:Vv,backendName:"webgl",kernelFunc:gVt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vVt{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xVt{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U2(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return lo({inputs:{x:r[0]},backend:n});if(r.length>oe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=U2({inputs:r.slice(0,l),backend:n}),u=U2({inputs:r.slice(l),backend:n});return U2({inputs:[c,u],backend:n})}const s=r.map(l=>l.dtype).reduce((l,c)=>oo(l,c)),i=r.map(l=>l.shape),a=oe().getBool("WEBGL_PACK")?new xVt(r[0].shape,i):new vVt(r[0].shape,i);return n.runWebGLProgram(a,r,s)}const bVt={kernelName:Vz,backendName:"webgl",kernelFunc:U2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wVt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=Vt(i,s.shape);let c=l;const u=lr(c,a);let d=s;u!=null&&(d=di({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Er(c.length,a)),Ss("all",c,a);const[h,p]=ds(d.shape,c),m=le(p),g=Pe({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),y=om(g,g.dtype,"all",n);let v;if(o){const x=Mr(h,l);v=Pe({inputs:{x:y},backend:n,attrs:{shape:x}})}else v=Pe({inputs:{x:y},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),u!=null&&n.disposeIntermediateTensorInfo(d),v}const SVt={kernelName:Wz,backendName:"webgl",kernelFunc:wVt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CVt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=Vt(i,s.shape);let c=l;const u=lr(c,a);let d=s;u!=null&&(d=di({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Er(c.length,a)),Ss("any",c,a);const[h,p]=ds(d.shape,c),m=le(p),g=Pe({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),y=om(g,g.dtype,"any",n);let v;if(o){const x=Mr(h,l);v=Pe({inputs:{x:y},backend:n,attrs:{shape:x}})}else v=Pe({inputs:{x:y},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),u!=null&&n.disposeIntermediateTensorInfo(d),v}const NVt={kernelName:Uz,backendName:"webgl",kernelFunc:CVt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Vt{constructor(e,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:i,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TVt{constructor(e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,L(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],o=Math.ceil(i/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),s||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=Sn(l),u=ni("coords",l);let d,h;if(o===1){h=l+1;const T=Sn(h);d=`
        ${T} sourceLocR = ${T}(${u.join()}, 0);
        ++${u[l-1]};
        ${T} sourceLocG = ${T}(${u.join()}, 0);
        ++${u[l-2]};
        ${T} sourceLocA = ${T}(${u.join()}, 0);
        --${u[l-1]};
        ${T} sourceLocB = ${T}(${u.join()}, 0);
        --${u[l-2]};`}else h=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const p=["x","y","z","w","u","v"].slice(0,h),m="."+p[h-1],g=p.map(T=>"int "+T),y=ni("sourceLocR",h-1).concat("inIdx.r"),v=ni("sourceLocG",h-1).concat("inIdx.g"),x=ni("sourceLocB",h-1).concat("inIdx.b"),b=ni("sourceLocA",h-1).concat("inIdx.a"),S=r==="max"?"greaterThan":"lessThan",w=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${b.join()})));`,C=`vec4(
            getAChannel(${y.join()}),
            hasNextCol ? getAChannel(${v.join()}) : 0.,
            hasNextRow ? getAChannel(${x.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,_=s?"":`
      float getBestIndicesAChannel(${g.join()}) {
        return getChannel(getBestIndicesA(${p.join()}),
                                          vec2(${p.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${g.join()}) {
        return getChannel(getA(${p.join()}),
                               vec2(${p.slice(-2).join()}));
      }
      ${_}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${m}, sourceLocG${m},
          sourceLocB${m}, sourceLocA${m}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${S}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NSe(t,e,n,r=null){let s=e.shape[0],i=e.shape[1];r!=null&&(s=r.shape[0],i=r.shape[1]);const o=PA(i),a={windowSize:o,inSize:i,batchSize:s,outSize:Math.ceil(i/o)},l=new _Vt(a,n,r==null),c=[e];r!=null&&c.push(r);const u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const d=NSe(t,e,n,u);return t.disposeIntermediateTensorInfo(u),d}function _Se(t,e,n,r=null){const s=r!=null?r.shape:e.shape,i=s[s.length-1],o=PA(i),a=new TVt(s,o,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===e.shape.length){const u=_Se(t,e,n,c);return t.disposeIntermediateTensorInfo(c),u}return c}function TSe(t,e,n,r){const s=[n];if(Ss("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!oe().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],o=t.texData.get(e.dataId),a=o!==null&&o.isPacked;let l=e;a&&(l=t.unpackTensor(e),i.push(l));const[c,u]=ds(l.shape,s),d=le(u),h=Pe({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});i.push(h);const p=NSe(t,h,r);i.push(p);const m=Pe({inputs:{x:p},backend:t,attrs:{shape:c}});return i.forEach(g=>t.disposeIntermediateTensorInfo(g)),m}return _Se(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kVt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=Vt(i,s.shape);const a=lr(o,s.shape.length);let l=s;const c=[];a!=null&&(l=di({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=Er(o.length,l.shape.length)),Ss("argMax",[o[0]],l.shape.length);const u=TSe(n,l,o[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const EVt={kernelName:N$,backendName:"webgl",kernelFunc:kVt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Vt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=Vt(i,s.shape);const a=lr(o,s.shape.length);let l=s;const c=[];a!=null&&(l=di({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=Er(o.length,l.shape.length)),Ss("argMin",[o[0]],l.shape.length);const u=TSe(n,l,o[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const AVt={kernelName:_$,backendName:"webgl",kernelFunc:$Vt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IVt=La+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,OVt=Jt({opSnippet:IVt}),PVt={kernelName:_w,backendName:"webgl",kernelFunc:OVt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RVt=La+"return log(x + sqrt(x * x + 1.0));",DVt=Jt({opSnippet:RVt}),jVt={kernelName:Tw,backendName:"webgl",kernelFunc:DVt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MVt=La+`
  return atan(x);
`,FVt=Jt({opSnippet:MVt}),LVt={kernelName:kw,backendName:"webgl",kernelFunc:FVt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BVt=S6+`
  return atan(a, b);
`,zVt=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+im+`
  return result;
`,VVt=Cs({opSnippet:BVt,packedOpSnippet:zVt}),WVt={kernelName:$w,backendName:"webgl",kernelFunc:VVt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UVt=La+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,GVt=Jt({opSnippet:UVt}),HVt={kernelName:Ew,backendName:"webgl",kernelFunc:GVt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x1{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;const g=n==="avg",y=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,v=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let x="0.0";if(g||(x="-1.0 / 1e-20"),r){const T=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${p}, ${m});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${T} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?i?y:v:`wR * ${h} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const b="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / max(count, 1.0)");const w=Math.floor(o/4)*4,C=o%4,_=`
      if (${g}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${b}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${p}, ${m});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${_}
          }

          int xC = xCCorner + ${w};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${_}
          }
        }
        setOutput(${S});
      }
    `}}class N6{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,d=e.dilationHeight,h=e.dilationWidth,p=e.effectiveFilterDepth,m=e.effectiveFilterHeight,g=e.effectiveFilterWidth,y=e.padInfo.front,v=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;const b=n==="avg";let S="0.0";if(b||(S="-1.0 / 1e-20"),r){const $=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${y}, ${v}, ${x});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${p};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${m};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${g};
                  wC += ${h}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${$} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${m} * ${g} +
                      wR * ${g} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let C=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(C="avgValue / max(count, 1.0)");const _=Math.floor(o/4)*4,T=o%4,k=`
      if (${b}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${y}, ${v}, ${x});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${p};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${m};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${_}; wC += 4) {
              int xC = xCCorner + wC * ${h};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                getValue(batch, xD, xR, xC + 3 * ${h}, ch)
              );

              ${k}
            }

            int xC = xCCorner + ${_};
            if (${T===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${k}
            } else if (${T===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                initializationValue,
                initializationValue
              );

              ${k}
            } else if (${T===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                initializationValue
              );

              ${k}
            }
          }
        }
        setOutput(${C});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qVt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;jS(s,"avgPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;L(Fs(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Ma(s.shape,i,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&cn(u.inShape,u.outShape))return lo({inputs:{x:s},backend:n});const d=new x1(u,"avg",!1);return n.runWebGLProgram(d,[s],"float32")}const KVt={kernelName:T$,backendName:"webgl",kernelFunc:qVt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XVt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],d=Xu(s.shape,i,o,u,a,l,c),h=new N6(d,"avg",!1);return n.runWebGLProgram(h,[s],"float32")}const YVt={kernelName:k$,backendName:"webgl",kernelFunc:XVt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QVt{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,d=c-1-e.padInfo.left,h=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class ZVt{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterDepth,h=e.effectiveFilterHeight,p=e.effectiveFilterWidth,m=d-1-e.padInfo.front,g=h-1-e.padInfo.top,y=p-1-e.padInfo.left,v=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${m}, ${g}, ${y});
      const float avgMultiplier = float(${v});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${h};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${p};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JVt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],h=Xu(o.shape,a,l,d,c,u),p=new ZVt(h);return n.runWebGLProgram(p,[s],o.dtype)}const e5t={kernelName:Hz,backendName:"webgl",kernelFunc:JVt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t5t(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i;jS([s,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=Ma(o.shape,a,l,1,c),d=new QVt(u);return n.runWebGLProgram(d,[s],o.dtype)}const n5t={kernelName:Gz,backendName:"webgl",kernelFunc:t5t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r5t(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:o,transposeB:a}=r;return GT({a:s,b:i,transposeA:o,transposeB:a,backend:n})}const s5t={kernelName:E$,backendName:"webgl",kernelFunc:r5t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i5t{constructor(e,n,r,s,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],Pt(e,n),Pt(e,r);let a="0.0";s!=null&&(Pt(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";i!=null&&(Pt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o5t{constructor(e,n,r,s,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Pt(e,n),Pt(e,r);let a="vec4(0.0)";s!=null&&(Pt(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(Pt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a5t=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:s,variance:i,offset:o,scale:a}=t;L(s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),L(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),L(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,s,i];let u=null;o!=null&&(u=o.shape,c.push(o));let d=null;a!=null&&(d=a.shape,c.push(a));const h=oe().getBool("WEBGL_PACK_NORMALIZATION")?new o5t(r.shape,s.shape,i.shape,u,d,l):new i5t(r.shape,s.shape,i.shape,u,d,l);return e.runWebGLProgram(h,c,c[0].dtype)},l5t={kernelName:B$,backendName:"webgl",kernelFunc:a5t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c5t{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Sn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=u5t(this.rank);let s;const i=e.map((o,a)=>`sourceLoc.${CF[a]} = start[${a}] + coords.${CF[a]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const CF=["x","y","z","w","u","v"];function u5t(t){if(t===1)return"sourceLoc";if(t<=6)return CF.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d5t{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Sn(this.rank),r=ni("coords",this.rank),s=ni("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,o=`getChannel(getSource(${s.join()}), ${i})`,a=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${o};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${o};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((u,d)=>`start[${d}]`).join()});`:e.map((u,d)=>`${s[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f5t(t,e,n,r){const s=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),o=r.texData.get(i.dataId);Object.assign(o,s),o.refCount=1,o.shape=n,o.dtype=t.dtype;let a=v5(e,st(t.shape));s.slice&&(a+=s.slice.flatOffset),o.slice={flatOffset:a,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),i}function nx(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:o}=r,[a,l]=OA(s,i,o);if(m5(s,a,l),le(l)===0)return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const d=n.texData.get(s.dataId),h=szt(d.values,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,h)}const{isPacked:c}=n.texData.get(s.dataId),u=y5(s.shape,a,l);if(c||!u){const d=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new d5t(l):new c5t(l),h=[a];return n.runWebGLProgram(d,[s],s.dtype,h)}return n.uploadToGPU(s.dataId),f5t(s,a,l,n)}const h5t={kernelName:mA,backendName:"webgl",kernelFunc:nx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p5t=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:o}=r;L(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((x,b)=>x*b),l=CS(s.shape,i,a),c=NS(l.length,i.length),u=_S(s.shape,i,a),d=C5(o,i.length),h=N5(u,o,i.length),p=[],m=Pe({inputs:{x:s},backend:n,attrs:{shape:l}}),g=di({inputs:{x:m},backend:n,attrs:{perm:c}}),y=Pe({inputs:{x:g},backend:n,attrs:{shape:u}}),v=nx({inputs:{x:y},backend:n,attrs:{begin:d,size:h}});return p.push(m),p.push(g),p.push(y),p.forEach(x=>n.disposeIntermediateTensorInfo(x)),v},m5t={kernelName:$$,backendName:"webgl",kernelFunc:p5t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g5t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o}=r,a=n.readSync(s.dataId),l=n.readSync(i.dataId),c=hSe(a,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}const y5t={kernelName:qz,backendName:"webgl",kernelFunc:g5t};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v5t=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,x5t=`
  return float(int(a.r) & int(b.r));
`;function b5t(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=oe().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||o===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(s.dataId).values,[u,d]=EBt(r.shape,s.shape,l,c,r.dtype),h=n.makeTensorInfo(d,r.dtype),p=n.texData.get(h.dataId);return p.values=u,h}let a;return i?a=new ex(v5t,r.shape,s.shape,!1):a=new $p(x5t,r.shape,s.shape),n.runWebGLProgram(a,[r,s],r.dtype)}const w5t={kernelName:Kz,backendName:"webgl",kernelFunc:b5t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S5t(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.readSync(r.dataId),o=n.readSync(s.dataId),a=Pt(Array.from(i),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const C5t={kernelName:pve,backendName:"webgl",kernelFunc:S5t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N5t="return float(a != b);",kSe=Cs({opSnippet:N5t,cpuKernelImpl:XBt,dtype:"bool"}),_5t={kernelName:rA,backendName:"webgl",kernelFunc:kSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FS(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return lo({inputs:{x:s.complexTensorInfos.real},backend:n})}const T5t={kernelName:xV,backendName:"webgl",kernelFunc:FS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k5t="return float(int(x));";function E5t(t,e){const n=new oc(t.shape,k5t),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NF(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return lo({inputs:{x:s},backend:n});const o=ns(s.shape),a=NF({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=Uf({inputs:{real:a,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(a),l}if(s.dtype==="complex64"){const o=FS({inputs:{input:s},backend:n}),a=NF({inputs:{x:o},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(o),a}if(!cve(s.dtype,i)){const o=lo({inputs:{x:s},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:i}}if(n.shouldExecuteOnCPU([s])){const o=n.texData.get(s.dataId).values,[a,l,c]=$Bt(o,s.shape,s.dtype,i);return n.makeTensorInfo(a,l,c)}if(i==="int32")return E5t(s,n);if(i==="bool"){const o=n.makeTensorInfo([],"bool",Ds("bool",1)),l=kSe({inputs:{a:s,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${i}`)}const $5t={kernelName:Aw,backendName:"webgl",kernelFunc:NF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sY="return ceil(x);",A5t=Jt({opSnippet:sY,packedOpSnippet:sY,cpuKernelImpl:ABt}),I5t={kernelName:Iw,backendName:"webgl",kernelFunc:A5t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O5t{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P5t{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R5t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:i,clipValueMax:o}=r;let a;oe().getBool("WEBGL_PACK_CLIP")?a=new P5t(s.shape):a=new O5t(s.shape);const l=[[i],[o]];return n.runWebGLProgram(a,[s],s.dtype,l)}const D5t={kernelName:Ow,backendName:"webgl",kernelFunc:R5t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j5t{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iY(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function M5t(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),i=new j5t(r.shape),o=[iY(r,s.complexTensorInfos.real),iY(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}const F5t={kernelName:A$,backendName:"webgl",kernelFunc:M5t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L5t{constructor(e){this.outputShape=[],this.outputShape=yc(e,1),this.variableNames=e.map((o,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const a=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const s=n.length,i=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B5t{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=yc(e,n);const r=this.outputShape,s=r.length,i=Sn(s),o=ni("coords",s),a=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((g,y)=>`T${y}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let g=1;g<l.length;g++)l[g]=l[g-1]+e[g][n];const c=a[n],u=a.slice(-2),d=a.join();let h=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let g=1;g<l.length;g++){const y=l[g-1];h+=`
        if (${c} < ${l[g]}  && ${c} >= ${l[g-1]}) {
          return getChannel(
            getT${g}(${s2(a,c,y)}),
            vec2(${s2(u,c,y)}));
        }`}const p=l.length,m=l[l.length-1];h+=`
        return getChannel(
          getT${p}(${s2(a,c,m)}),
          vec2(${s2(u,c,m)}));`,this.userCode=`
      float getValue(${a.map(g=>"int "+g)}) {
        ${h}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[s-1]} = ${o[s-1]} + 1;
        if (${o[s-1]} < ${r[s-1]}) {
          result.g = getValue(${o});
        }

        ${o[s-2]} = ${o[s-2]} + 1;
        if (${o[s-2]} < ${r[s-2]}) {
          result.a = getValue(${o});
        }

        ${o[s-1]} = ${o[s-1]} - 1;
        if (${o[s-2]} < ${r[s-2]} &&
            ${o[s-1]} < ${r[s-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function s2(t,e,n){const r=t.indexOf(e);return t.map((i,o)=>o===r?`${i} - ${n}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZA(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return lo({inputs:{x:s.complexTensorInfos.imag},backend:n})}const z5t={kernelName:dV,backendName:"webgl",kernelFunc:ZA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r0(t,e,n){const r=t[0].dtype;if(r==="complex64"){const p=t.map(x=>FS({inputs:{input:x},backend:n})),m=t.map(x=>ZA({inputs:{input:x},backend:n})),g=r0(p,e,n),y=r0(m,e,n),v=Uf({inputs:{real:g,imag:y},backend:n});return p.forEach(x=>n.disposeIntermediateTensorInfo(x)),m.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),v}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const p=t.map(S=>{const C=[-1,le(S.shape.slice(e))];return Pe({inputs:{x:S},backend:n,attrs:{shape:C}})}),m=p.map(S=>({vals:n.readSync(S.dataId),shape:S.shape})),g=yc(p.map(S=>S.shape),1),y=p[0].shape[0]===1,v=IBt(m,g,r,y),x=yc(t.map(S=>S.shape),e),b=n.makeTensorInfo(x,r,v);return p.forEach(S=>n.disposeIntermediateTensorInfo(S)),b}const i=t.filter(p=>le(p.shape)>0),o=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const p=o?new oc(t[0].shape,ud):new Pd(t[0].shape,ud);return n.runWebGLProgram(p,t,r)}const a=oe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>a){const p=[];for(let g=0;g<i.length;g+=a){const y=i.slice(g,g+a);p.push(r0(y,e,n))}const m=r0(p,e,n);for(const g of p)n.disposeIntermediateTensorInfo(g);return m}if(o){const p=new B5t(i.map(m=>m.shape),e);return n.runWebGLProgram(p,i,r)}const{tensors2D:l,outShape:c}=V5t(i,e,n),u=new L5t(l.map(p=>p.shape)),d=n.runWebGLProgram(u,l,r);l.forEach(p=>n.disposeIntermediateTensorInfo(p));const h=Pe({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),h}function V5t(t,e,n){const r=yc(t.map(i=>i.shape),e);return{tensors2D:t.map(i=>Pe({inputs:{x:i},attrs:{shape:[-1,le(i.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ESe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=Vt(s,e[0].shape)[0],o=e.map(c=>c.shape);b5(o,i);const a=yc(e.map(c=>c.shape),i);if(le(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(c=>le(c.shape)>0);return l.length===1?lo({inputs:{x:l[0]},backend:n}):r0(l,i,n)}const W5t={kernelName:I$,backendName:"webgl",kernelFunc:ESe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Se{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,p=e.filterWidth,m=Math.floor(e.inChannels/4)*4,g=e.inChannels%4,y=e.dataFormat==="channelsLast",v=y?1:2,x=y?2:3,b=y?3:1;let S="",w="";r&&(s?S=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?S=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:S=`
          float activation(float x) {
            ${r}
          }
        `,w="result = activation(result);");const C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${S}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${b}];

        ivec2 xRCCorner =
            ivec2(coords[${v}], coords[${x}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${p}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${m}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${y}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${g===1}) {

              if (${y}) {
                dotProd +=
                    getX(batch, xR, xC, ${m}) *
                    getW(wR, wC, ${m}, d2);
              } else {
                dotProd +=
                    getX(batch, ${m}, xR, xC) *
                    getW(wR, wC, ${m}, d2);
              }

            } else if (${g===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2)
              );

              if (${y}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${g===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2),
                getW(wR, wC, ${m} + 2, d2)
              );

              if (${y}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1),
                  getX(batch, xR, xC, ${m} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC),
                  getX(batch, ${m} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${w}
        setOutput(result);
      }
    `}}class U5t{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterDepth,h=e.filterHeight,p=e.filterWidth,m=Math.floor(e.inChannels/4)*4,g=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${o}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${m}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${g===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${m}) *
                  getW(wF, wR, wC, ${m}, d2);
              } else if (${g===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${g===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1),
                  getX(batch, xF, xR, xC, ${m} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2),
                  getW(wF, wR, wC, ${m} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ASe{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Bs(this.outputShape.length);const o=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let h=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<u;y++)h+=`
           vec4 xTexelC${y*2};
           int xTexelC${y*2}Ready;
           vec4 xTexelC${y*2+1};
           int xTexelC${y*2+1}Ready;
           vec4 xC${y};`;h+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let y=0;y<u;y++)h+=`
           xTexelC${y*2} = vec4(0.0);
           xTexelC${y*2}Ready = 0;
           xTexelC${y*2+1} = vec4(0.0);
           xTexelC${y*2+1}Ready = 0;
           xC${y} = vec4(0.0);`;h+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let y=0;y<(d+1)/2;y++){const v=y*2;if(h+=`
           xC = xCCorner + ${v*l};
           `,a===1){if(v<u&&(o%2===1?(h+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }
               `,l===1&&v>0?h+=`
                 xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                 `:h+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                   } else {
                     xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                   }
                   `):h+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xC${v} = xTexelC${v};
                 `,v+1<u)){const x=o%2===0?Mz(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(h+=`
                   xCOffset = xC + imod(pads[1], 2) + ${x};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                     xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${v+1}.zw = vec2(0.0);
                     }
                     xTexelC${v+1}Ready = 1;
                   }
                   `,l>1?h+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                     } else {
                      xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                     }
                     `:h+=`
                     xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                     `):x===1?h+=`
                     xC${v+1} = xTexelC${v};
                     `:h+=`
                     xCOffset = xC + ${x};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                       xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${v+1}.zw = vec2(0.0);
                       }
                       xTexelC${v+1}Ready = 1;
                     }

                     xC${v+1} = xTexelC${v+1};
                     `}}else v<u&&(o%2===1?(h+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.0);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
               `,v+1<u&&(h+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                 `)):(h+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(
                   xTexelC${v}.xy, xTexelC${v+1}.xy);
               `,v+1<u&&(h+=`
                   xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                 `)));v<u&&(h+=`
             wTexel = getW(r, ${v}, d1, d2);
             dotProd += xC${v}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${v}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,v+1<u&&(h+=`
               wTexel = getW(r, ${v+1}, d1, d2);
               dotProd += xC${v+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${v+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}h+=`
     }
   `,h+=`
     }
   `,h+=`
     }
   `;let p="",m="";r&&(s?p=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?p=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:p=`vec4 activation(vec4 x) {
           ${r}
         }`,m="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${p}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${h}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${g}
         ${m}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G5t{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Bs(this.outputShape.length);const{dataFormat:r}=n,s=fi(),i=r==="channelsLast",o=i?1:2,a=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HT(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function ISe({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const l=t.shape,c=r.texData.get(t.dataId),u=n.inChannels,d=l[0]*l[1]*l[2],h=n.outChannels,p=n.dataFormat==="channelsLast",m=!1,g=!1;let y;const v=[];if(i!=null){const S=HT(i.shape,p);S!=null&&(i=Pe({inputs:{x:i},backend:r,attrs:{shape:S}}),v.push(i))}if(s!=null){const S=HT(s.shape,p);S!=null&&(s=Pe({inputs:{x:s},backend:r,attrs:{shape:S}}),v.push(s))}if(!((d===1||h===1)&&u>CSe)&&c.isPacked&&p&&c.texture!=null&&l[2]%2!==0&&cn(c.shape.slice(-3),l.slice(-3))){const S=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,S,n.inChannels],dtype:t.dtype},C=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,L(UT(c.shape,w.shape),()=>`packed reshape ${c.shape} to ${w.shape} isn't free`);const _=Pe({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});v.push(_);const T=GT({a:w,b:_,backend:r,transposeA:m,transposeB:g,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o}),k=r.texData.get(T.dataId);L(k.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=C,k.shape=n.outShape,y=lo({inputs:{x:T},backend:r}),y.shape=n.outShape,v.push(T)}else{const S=n.outHeight*n.outWidth,w=Pe({inputs:{x:t},backend:r,attrs:{shape:p?[n.batchSize,S,n.inChannels]:[n.batchSize,n.inChannels,S]}}),C=Pe({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),_=GT({a:p?w:C,b:p?C:w,transposeA:!p,transposeB:g,backend:r,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o});y=Pe({inputs:{x:_},backend:r,attrs:{shape:n.outShape}}),v.push(w),v.push(C),v.push(_)}for(const S of v)r.disposeIntermediateTensorInfo(S);return y}function OSe({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:h,dataFormat:p}=n,m=p==="channelsLast",g=l*c*u,y=h*d,v=[n.batchSize,g,y],x=!0,b=!1,S=[];if(i!=null){const E=HT(i.shape,m);E!=null&&(i=Pe({inputs:{x:i},backend:r,attrs:{shape:E}}),S.push(i))}if(s!=null){const E=HT(s.shape,m);E!=null&&(s=Pe({inputs:{x:s},backend:r,attrs:{shape:E}}),S.push(s))}const w=Pe({inputs:{x:e},backend:r,attrs:{shape:[1,g,le(e.shape)/g]}});S.push(w);const C=new G5t(v,n),_=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],T=r.runWebGLProgram(C,[t],"float32",_),k=Pe({inputs:{x:T},backend:r,attrs:{shape:v}});S.push(T),S.push(k);const $=s!=null,O=i!=null,P=a==="leakyrelu",D=a?v1(a,!0):null,A=new SSe(m?k.shape:w.shape,m?w.shape:k.shape,m?[n.batchSize,y,n.outChannels]:[n.batchSize,n.outChannels,y],x,b,$,D,O,P),I=m?[k,w]:[w,k];if(s&&I.push(s),O&&I.push(i),P){const E=r.makeTensorInfo([],"float32",jf(o,"float32"));I.push(E),S.push(E)}const R=r.runWebGLProgram(A,I,"float32"),M=Pe({inputs:{x:R},backend:r,attrs:{shape:n.outShape}});S.push(R);for(const E of S)r.disposeIntermediateTensorInfo(E);return M}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H5t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=Yu(l),h=ws(s.shape,i.shape,o,c,a,u,!1,d);let p;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))p=ISe({x:s,filter:i,convInfo:h,backend:n});else if(h.strideWidth<=2&&d==="channelsLast"&&oe().getBool("WEBGL_EXP_CONV")){const g=new ASe(h),y=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];p=n.runWebGLProgram(g,[s,i],"float32",y)}else if(oe().getBool("WEBGL_CONV_IM2COL"))p=OSe({x:s,filter:i,convInfo:h,backend:n});else{const g=new $Se(h);p=n.runWebGLProgram(g,[s,i],"float32")}const m=Pe({inputs:{x:p},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(p),m}const q5t={kernelName:O$,backendName:"webgl",kernelFunc:H5t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K5t{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class X5t{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=o?1:2,u=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Y5t{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Q5t{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,u=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z5t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=Yu(l),h=ws(s.shape,u,o,1,a,c,!1,d),p=new K5t(h);return n.runWebGLProgram(p,[s,i],"float32")}const J5t={kernelName:Yz,backendName:"webgl",kernelFunc:Z5t};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e6t{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Bs(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,s=n-1-e.padInfo.top,i=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t6t(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=Yu(c),h=ws(o,i.shape,a,1,l,u,!1,d);if(oe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const p=[[h.strideHeight,h.strideWidth]],m=new e6t(h);return n.runWebGLProgram(m,[s,i],"float32",p)}else{const p=new X5t(h);return n.runWebGLProgram(p,[s,i],"float32")}}const n6t={kernelName:P$,backendName:"webgl",kernelFunc:t6t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r6t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,c=Mf(s.shape,i.shape,o,l,a),u=new U5t(c);return n.runWebGLProgram(u,[s,i],"float32")}const s6t={kernelName:R$,backendName:"webgl",kernelFunc:r6t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i6t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,filterShape:l}=r,c=Mf(s.shape,l,o,1,a),u=new Y5t(c);return n.runWebGLProgram(u,[s,i],"float32")}const o6t={kernelName:Qz,backendName:"webgl",kernelFunc:i6t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a6t(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:o,strides:a,inputShape:l}=r,c=Mf(l,i.shape,a,1,o),u=new Q5t(c);return n.runWebGLProgram(u,[s,i],"float32")}const l6t={kernelName:Zz,backendName:"webgl",kernelFunc:a6t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c6t=tx+`
  return cos(x);
`,u6t=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${im}
  return result;
`,d6t=Jt({opSnippet:c6t,packedOpSnippet:u6t}),f6t={kernelName:Pw,backendName:"webgl",kernelFunc:d6t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h6t=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,p6t=Jt({opSnippet:h6t}),m6t={kernelName:Rw,backendName:"webgl",kernelFunc:p6t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g6t{constructor(e,n,r,s,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,c]=e,[u]=n,[d,h]=r;this.outputShape=[u,d,h,c];const p=s==="bilinear"?1:0,[m,g]=[`${a-1}.0`,`${l-1}.0`],[y,v,x]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${m} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${m}`],[b,S,w]=h>1?[`${(l-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${g} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${g}`];this.userCode=`
      const float height_ratio = float(${y});
      const float width_ratio = float(${b});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${v};
        float width_scale = ${S};

        float in_y = ${x};
        if( in_y < 0.0 || in_y > ${m} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${g} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${p} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y6t=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=r,u=new g6t(s.shape,i.shape,a,l,c);return n.runWebGLProgram(u,[s,i,o],"float32")},v6t={kernelName:eV,backendName:"webgl",kernelFunc:y6t};var b1;(function(t){t.Prod="*",t.Sum="+"})(b1||(b1={}));class oY{constructor(e,n,r,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===b1.Prod?"1.0":"0.0",a=r?o:`getX(${aY(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=s?`end != ${l-1}`:"end != 0",u=s?"end + 1":"end - 1"):(c=s?`end + pow2 < ${l}`:"end >= pow2",u=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Sn(i)} coords = getOutputCoords();
        int end = ${lY(i,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${lY(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${aY(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function aY(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function lY(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PSe(t,e,n,r,s,i){const o=e.shape.length,a=lr([r],o);let l=e;a!=null&&(l=di({inputs:{x:e},backend:n,attrs:{perm:a}}));const c=Er(1,o)[0];if(c!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const u=l.shape[c];let d=lo({inputs:{x:l},backend:n});for(let h=0;h<=Math.ceil(Math.log2(u))-1;h++){const p=new oY(t,l.shape,!1,i),m=[[h]],g=d;d=n.runWebGLProgram(p,[d],d.dtype,m),n.disposeIntermediateTensorInfo(g)}if(s){const h=new oY(t,l.shape,s,i),p=d;d=n.runWebGLProgram(h,[d],d.dtype),n.disposeIntermediateTensorInfo(p)}if(a!=null){const h=Ff(a),p=di({inputs:{x:d},backend:n,attrs:{perm:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),p}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x6t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return PSe(b1.Prod,s,n,i,o,a)}const b6t={kernelName:Jz,backendName:"webgl",kernelFunc:x6t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w6t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return PSe(b1.Sum,s,n,i,o,a)}const S6t={kernelName:D$,backendName:"webgl",kernelFunc:w6t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C6t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o,binaryOutput:a}=r;if(s.shape.length===1){const l=n.readSync(s.dataId),c=n.readSync(i.dataId),u=hSe(l,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(i),u=kBt(l,c,o,a);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const N6t={kernelName:tV,backendName:"webgl",kernelFunc:C6t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _6t{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T6t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:o}=r,a=s.shape[0],l=o==="NHWC"?s.shape[1]:s.shape[2],c=o==="NHWC"?s.shape[2]:s.shape[3],u=o==="NHWC"?s.shape[3]:s.shape[1],d=l*i,h=c*i,p=u/(i*i),m=o==="NHWC"?[a,d,h,p]:[a,p,d,h],g=new _6t(m,i,o);return n.runWebGLProgram(g,[s],s.dtype)}const k6t={kernelName:nV,backendName:"webgl",kernelFunc:T6t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RSe{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Bs(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";r&&(s?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DSe{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Bs(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,h=d;let p=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<d;v++)p+=`
          vec4 xTexelC${v*2};
          int xTexelC${v*2}Ready;
          vec4 xTexelC${v*2+1};
          int xTexelC${v*2+1}Ready;
          vec4 xC${v};`;p+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let v=0;v<d;v++)p+=`
          xTexelC${v*2} = vec4(0.0);
          xTexelC${v*2}Ready = 0;
          xTexelC${v*2+1} = vec4(0.0);
          xTexelC${v*2+1}Ready = 0;
          xC${v} = vec4(0.0);`;p+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let v=0;v<(h+1)/2;v++){const x=v*2;if(p+=`
          xC = xCCorner + ${x*c};
          `,l===1){if(x<d&&(a%2===1?(p+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }
              `,c===1&&x>0?p+=`
                xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                `:p+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                  } else {
                    xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                  }
                  `):p+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xC${x} = xTexelC${x};
                `,x+1<d)){const b=a%2===0?Mz(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(p+=`
                  xCOffset = xC + imod(pads[1], 2) + ${b};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                    xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${x+1}.zw = vec2(0.0);
                    }
                    xTexelC${x+1}Ready = 1;
                  }
                  `,c>1?p+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                    } else {
                     xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                    }
                    `:p+=`
                    xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                    `):b===1?p+=`
                    xC${x+1} = xTexelC${x};
                    `:p+=`
                    xCOffset = xC + ${b};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                      xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${x+1}.zw = vec2(0.0);
                      }
                      xTexelC${x+1}Ready = 1;
                    }

                    xC${x+1} = xTexelC${x+1};
                    `}}else x<d&&(a%2===1?(p+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.0);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
              `,x+1<d&&(p+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                `)):(p+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(
                  xTexelC${x}.xy, xTexelC${x+1}.xy);
              `,x+1<d&&(p+=`
                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                `)));x<d&&(p+=`
            wTexel = getW(r, ${x}, d1, q);
            dotProd += xC${x} * vec4(wTexel.xz, wTexel.xz);
          `,x+1<d&&(p+=`
              wTexel = getW(r, ${x+1}, d1, q);
              dotProd += xC${x+1} * vec4(wTexel.xz, wTexel.xz);
            `))}p+=`
    }
  `,p+=`
      }
    `;let m="",g="";r&&(s?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:m=`vec4 activation(vec4 x) {
          ${r}
        }`,g="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${m}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${p}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${y}
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E6t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;let u=l;u==null&&(u=[1,1]),L(Fs(o,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const d=ws(s.shape,i.shape,o,u,a,c,!0);let h;oe().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?h=new DSe(d):h=new RSe(d);const p=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[s,i],"float32",p)}const $6t={kernelName:j$,backendName:"webgl",kernelFunc:E6t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A6t{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class I6t{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O6t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r,d=ws(s.shape,u,o,a,l,c,!0),h=new A6t(d);return n.runWebGLProgram(h,[s,i],"float32")}const P6t={kernelName:rV,backendName:"webgl",kernelFunc:O6t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R6t(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r,d=ws(u,i.shape,o,a,l,c,!0),h=new I6t(d);return n.runWebGLProgram(h,[s,i],"float32")}const D6t={kernelName:sV,backendName:"webgl",kernelFunc:R6t};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j6t{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M6t(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],i=le(r.shape),o=Pe({inputs:{x:r},backend:n,attrs:{shape:[i]}}),a=new j6t(i),l=n.runWebGLProgram(a,[o],o.dtype),c=Pe({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const F6t={kernelName:mve,backendName:"webgl",kernelFunc:M6t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L6t{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:i,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:d,left:h}=s;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${o});
      const ivec2 pads = ivec2(${d}, ${h});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B6t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,c=vS(s.shape,i.shape,o,a,"NHWC",l);let u;const d=new L6t(c);u=n.runWebGLProgram(d,[s,i],"float32");const h=Pe({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),h}const z6t={kernelName:M$,backendName:"webgl",kernelFunc:B6t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V6t(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:o,summedDims:a,idDims:l}=O5(s,i.length);R5(o.length,l,i);const{path:c,steps:u}=D5(a,l),d=u.length;let h=null,p=o.length;const m=[];for(let g=0;g<d;++g){for(const y of u[g]){const{permutationIndices:v,expandDims:x}=P5(p,l[y]);let b;j5(v)?b=i[y]:(b=di({inputs:{x:i[y]},backend:n,attrs:{perm:v}}),m.push(b));const S=b.shape.slice();for(let w=0;w<x.length;++w)S.splice(x[w],0,1);cn(b.shape,S)||(b=Pe({inputs:{x:b},backend:n,attrs:{shape:S}}),m.push(b)),h===null?h=b:(h=C6({inputs:{a:b,b:h},backend:n}),m.push(h))}g<d-1&&(c[g]>=0&&(h=QA({inputs:{x:h},backend:n,attrs:{axis:c[g]-(o.length-p),keepDims:!1}}),m.push(h)),p--)}for(const g of m)g!==h&&n.disposeIntermediateTensorInfo(g);return h}const W6t={kernelName:iV,backendName:"webgl",kernelFunc:V6t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U6t="return (x >= 0.0) ? x : (exp(x) - 1.0);",G6t=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,H6t=Jt({opSnippet:U6t,packedOpSnippet:G6t}),q6t={kernelName:jw,backendName:"webgl",kernelFunc:H6t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K6t="return (b >= 0.0) ? a : a * (b + 1.0);",X6t=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,Y6t=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,i=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ex(X6t,r.shape,s.shape):new $p(K6t,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],r.dtype)},Q6t={kernelName:oV,backendName:"webgl",kernelFunc:Y6t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z6t=`
  return vec4(equal(a, b));
`,J6t="return float(a == b);",eWt=Cs({opSnippet:J6t,packedOpSnippet:Z6t,dtype:"bool",cpuKernelImpl:OBt}),tWt={kernelName:F$,backendName:"webgl",kernelFunc:eWt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nWt=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${_5};
  float a1 = ${T5};
  float a2 = ${k5};
  float a3 = ${E5};
  float a4 = ${$5};
  float a5 = ${A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,rWt=Jt({opSnippet:nWt}),sWt={kernelName:Mw,backendName:"webgl",kernelFunc:rWt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iWt=tx+`
  return exp(x);
`,oWt=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,jSe=Jt({opSnippet:iWt,packedOpSnippet:oWt,cpuKernelImpl:PBt,dtype:"float32"}),aWt={kernelName:Fw,backendName:"webgl",kernelFunc:jSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _F(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:i}=e,o=i.shape.length,a=i.shape.slice();let l=s;return s<0&&(L(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),a.splice(l,0,1),Pe({inputs:{x:i},backend:r,attrs:{shape:a}})}const lWt={kernelName:L$,backendName:"webgl",kernelFunc:_F};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cY="return exp(x) - 1.0;",cWt=Jt({opSnippet:cY,packedOpSnippet:cY,cpuKernelImpl:RBt}),uWt={kernelName:Lw,backendName:"webgl",kernelFunc:cWt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uY{constructor(e,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${s}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MSe(t,e,n){const r=n.texData.get(t.dataId),s=le(t.shape),i=t.shape[t.shape.length-1],o=s/i,a=Pe({inputs:{x:t},backend:n,attrs:{shape:[o,i]}}),l=a.shape,c=new uY("real",l,e),u=new uY("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],h=n.runWebGLProgram(c,d,"float32"),p=n.runWebGLProgram(u,d,"float32"),m=Uf({inputs:{real:h,imag:p},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p);const g=Pe({inputs:{x:m},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(m),g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dWt(t){const{inputs:e,backend:n}=t,{input:r}=e;return MSe(r,!1,n)}const fWt={kernelName:aV,backendName:"webgl",kernelFunc:dWt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hWt{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LS(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:i}=n;if(i=i||Bv(s),i==="string"){const o=Nr(i,le(r));return o.fill(s),e.makeTensorInfo(r,i,o)}else{const o=new hWt(r,s),a=[[s]];return e.runWebGLProgram(o,[],i,a)}}const pWt={kernelName:lV,backendName:"webgl",kernelFunc:LS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mWt{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gWt={kernelName:cV,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new mWt(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dY="return floor(x);",yWt=Jt({opSnippet:dY,packedOpSnippet:dY,cpuKernelImpl:DBt}),vWt={kernelName:Bw,backendName:"webgl",kernelFunc:yWt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xWt=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,bWt=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,wWt=Cs({opSnippet:xWt,packedOpSnippet:bWt,dtype:"int32"}),SWt={kernelName:zw,backendName:"webgl",kernelFunc:wWt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CWt{constructor(e){this.variableNames=["A"];const n=fi(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NWt{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=fi(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Wt={kernelName:W2t,backendName:"webgl",kernelFunc:TWt};let Sm,PP=oe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function TWt(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:i}=r,o=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,c]=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],u=[c,l],d=[c,l,i];if(a||o){const g=oe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Sm==null||g!==PP)&&(PP=g,Sm=document.createElement("canvas").getContext("2d",{willReadFrequently:PP})),Sm.canvas.width=l,Sm.canvas.height=c,Sm.drawImage(s,0,0,l,c),s=Sm.canvas}const h=n.makeTensorInfo(u,"int32");n.texData.get(h.dataId).usage=_o.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),s);const p=oe().getBool("WEBGL_PACK")?new NWt(d):new CWt(d),m=n.runWebGLProgram(p,[h],"int32");return n.disposeData(h.dataId),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kWt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:m}=r,g=Yu(u),y=ws(s.shape,i.shape,l,d,c,h,!1,g);let v;const x=[],b=o!=null,S=a!=null,w=p==="leakyrelu",C=()=>{const T=[s,i],k=($,O)=>{if(O==="NCHW"&&$.shape.length===1&&$.shape[0]!==1){const P=Pe({inputs:{x:$},backend:n,attrs:{shape:[$.shape[0],1,1]}});return x.push(P),P}return $};if(b&&T.push(k(o,u)),S&&T.push(k(a,u)),w){const $=n.makeTensorInfo([],"float32",jf(m,"float32"));T.push($),x.push($)}return T};if(y.filterHeight===1&&y.filterWidth===1&&y.dilationHeight===1&&y.dilationWidth===1&&y.strideHeight===1&&y.strideWidth===1&&(y.padInfo.type==="SAME"||y.padInfo.type==="VALID"))v=ISe({x:s,filter:i,convInfo:y,backend:n,bias:o,activation:p,preluActivationWeights:a,leakyreluAlpha:m});else if(y.strideWidth<=2&&g==="channelsLast"&&oe().getBool("WEBGL_EXP_CONV")){const T=p?v1(p,!0):null,k=new ASe(y,b,T,S,w),$=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],O=C();v=n.runWebGLProgram(k,O,"float32",$)}else if(oe().getBool("WEBGL_CONV_IM2COL"))v=OSe({x:s,filter:i,convInfo:y,backend:n,bias:o,activation:p,preluActivationWeights:a,leakyreluAlpha:m});else{const T=p?v1(p,!1):null,k=new $Se(y,b,T,S,w),$=C();v=n.runWebGLProgram(k,$,"float32")}const _=Pe({inputs:{x:v},backend:n,attrs:{shape:y.outShape}});return x.push(v),x.forEach(T=>n.disposeIntermediateTensorInfo(T)),_}const EWt={kernelName:bT,backendName:"webgl",kernelFunc:kWt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Wt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=r,m=[];let g=u;g==null&&(g=[1,1]),L(Fs(l,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${g}'`);const y=ws(s.shape,i.shape,l,g,c,d,!0),v=oe().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,x=h?v1(h,v):null,b=[s,i],S=o!=null,w=a!=null,C=h==="leakyrelu";if(S&&b.push(o),w&&b.push(a),C){const $=n.makeTensorInfo([],"float32",jf(p,"float32"));b.push($),m.push($)}let _;v?_=new DSe(y,S,x,w,C):_=new RSe(y,S,x,w,C);const T=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],k=n.runWebGLProgram(_,b,"float32",T);return m.forEach($=>n.disposeIntermediateTensorInfo($)),k}const AWt={kernelName:Rve,backendName:"webgl",kernelFunc:$Wt};class IWt{constructor(e,n,r,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const i=Sn(r.length);let o=`
    int index;`;for(let a=0;a<this.sliceDim;a++)o+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OWt(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=s.shape,o=i[i.length-1],a=le(r.shape),[l,c,u,d]=p5(r,s),h=Pe({inputs:{x:s},backend:n,attrs:{shape:[c,o]}}),p=Pe({inputs:{x:r},backend:n,attrs:{shape:[le(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const v=n.readSync(s.dataId),x=n.bufferSync(r),b=jBt(v,x,r.dtype,c,o,u,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,b.values)}const m=new IWt(o,d,[c,u],r.shape),g=n.runWebGLProgram(m,[p,h],p.dtype),y=Pe({inputs:{x:g},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),y}const PWt={kernelName:gve,backendName:"webgl",kernelFunc:OWt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RWt{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Sn(this.rank),s=DWt(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function DWt(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:o,batchDims:a}=r,l=Vt(o,s.shape)[0];if(oe().get("DEBUG")){const x=n.readSync(i.dataId),b=s.shape[l];for(let S=0;S<x.length;++S){const w=x[S];L(w<=b-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${b-1}]`)}}const c=F5(s,i,l,a),u=le(i.shape),d=[],h=Pe({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=Pe({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(h),d.push(p);const m=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([s,i])||s.dtype==="string"){const x=n.bufferSync(p),b=n.bufferSync(h),S=MBt(b,x,m);return d.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(c.outputShape,S.dtype,S.values)}const g=new RWt(h.shape,m),y=n.runWebGLProgram(g,[h,p],h.dtype);d.push(y);const v=Pe({inputs:{x:y},backend:n,attrs:{shape:c.outputShape}});return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),v}const jWt={kernelName:z$,backendName:"webgl",kernelFunc:FSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MWt="return float(a > b);",FWt=`
  return vec4(greaterThan(a, b));
`,LWt=Cs({opSnippet:MWt,packedOpSnippet:FWt,cpuKernelImpl:FBt,dtype:"bool"}),BWt={kernelName:V$,backendName:"webgl",kernelFunc:LWt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zWt="return float(a >= b);",VWt=`
  return vec4(greaterThanEqual(a, b));
`,WWt=Cs({opSnippet:zWt,packedOpSnippet:VWt,dtype:"bool",cpuKernelImpl:LBt}),UWt={kernelName:Vw,backendName:"webgl",kernelFunc:WWt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GWt(t){const{inputs:e,backend:n}=t,{input:r}=e;return MSe(r,!0,n)}const HWt={kernelName:uV,backendName:"webgl",kernelFunc:GWt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qWt="return float(!isnan(x) && !isinf(x));",KWt=Jt({opSnippet:qWt,dtype:"bool"}),XWt={kernelName:Uw,backendName:"webgl",kernelFunc:KWt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YWt="return float(isinf(x));",QWt=Jt({opSnippet:YWt,dtype:"bool"}),ZWt={kernelName:Gw,backendName:"webgl",kernelFunc:QWt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JWt="return float(isnan(x));",eUt=Jt({opSnippet:JWt,dtype:"bool"}),tUt={kernelName:Hw,backendName:"webgl",kernelFunc:eUt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nUt="return float(a < b);",rUt=`
  return vec4(lessThan(a, b));
`,sUt=Cs({opSnippet:nUt,packedOpSnippet:rUt,cpuKernelImpl:BBt,dtype:"bool"}),iUt={kernelName:U$,backendName:"webgl",kernelFunc:sUt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oUt="return float(a <= b);",aUt=`
  return vec4(lessThanEqual(a, b));
`,lUt=Cs({opSnippet:oUt,packedOpSnippet:aUt,cpuKernelImpl:zBt,dtype:"bool"}),cUt={kernelName:G$,backendName:"webgl",kernelFunc:lUt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uUt(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,o=VBt(r,s,i);return e.makeTensorInfo([o.length],"float32",o)}const dUt={kernelName:yve,backendName:"webgl",kernelFunc:uUt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fUt=tx+`
  return x < 0.0 ? 0./0. : log(x);
`,hUt=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,pUt=Jt({opSnippet:fUt,packedOpSnippet:hUt,cpuKernelImpl:WBt}),mUt={kernelName:qw,backendName:"webgl",kernelFunc:pUt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gUt=tx+`
  return log(1.0 + x);
`,yUt=Jt({opSnippet:gUt}),vUt={kernelName:Kw,backendName:"webgl",kernelFunc:yUt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xUt="return float(a >= 1.0 && b >= 1.0);",bUt=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,wUt=Cs({opSnippet:xUt,packedOpSnippet:bUt,dtype:"bool"}),SUt={kernelName:H$,backendName:"webgl",kernelFunc:wUt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CUt="return float(!(x >= 1.0));",NUt=Jt({opSnippet:CUt}),_Ut={kernelName:q$,backendName:"webgl",kernelFunc:NUt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TUt="return float(a >= 1.0 || b >= 1.0);",kUt=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,EUt=Cs({opSnippet:TUt,packedOpSnippet:kUt,dtype:"bool"}),$Ut={kernelName:K$,backendName:"webgl",kernelFunc:EUt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AUt{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[];const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IUt{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OUt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:o,alpha:a,beta:l}=r,c=oe().getBool("WEBGL_PACK_NORMALIZATION")?new IUt(s.shape,i,o,a,l):new AUt(s.shape,i,o,a,l);return n.runWebGLProgram(c,[s],s.dtype)},PUt={kernelName:X$,backendName:"webgl",kernelFunc:OUt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RUt{constructor(e,n,r,s,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DUt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r,d=new RUt(s.shape,a,l,c,u);return n.runWebGLProgram(d,[s,i,o],s.dtype)},jUt={kernelName:fV,backendName:"webgl",kernelFunc:DUt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MUt(t,e,n,r){const s=le(e),o=le(t.shape)/s,a=Pe({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),l=om(a,t.dtype,"max",r),c=Pe({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:o}=r,a=s.shape.length,l=Vt(i,s.shape);let c=l;const u=lr(c,a),d=u!=null,h=n.shouldExecuteOnCPU([s]);let p=s;if(d){if(h){const b=n.texData.get(p.dataId).values,S=new Array(a);for(let _=0;_<S.length;_++)S[_]=s.shape[u[_]];const w=w6(b,s.shape,s.dtype,u,S);p=n.makeTensorInfo(S,s.dtype);const C=n.texData.get(p.dataId);C.values=w}else p=YA(s,u,n);c=Er(c.length,a)}Ss("max",c,a);const[m,g]=ds(p.shape,c);let y=m;o&&(y=Mr(m,l));let v;if(h){const b=n.texData.get(p.dataId).values,S=UBt(b,le(g),y,s.dtype);v=n.makeTensorInfo(y,s.dtype);const w=n.texData.get(v.dataId);w.values=S}else v=MUt(p,g,y,n);return d&&n.disposeIntermediateTensorInfo(p),v}const FUt={kernelName:Y$,backendName:"webgl",kernelFunc:LSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LUt=S6+`
  return max(a, b);
`,BUt=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+im+`
  return result;
`,zUt=Cs({opSnippet:LUt,packedOpSnippet:BUt,cpuKernelImpl:GBt}),VUt={kernelName:Xw,backendName:"webgl",kernelFunc:zUt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WUt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;jS(s,"maxPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;L(Fs(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Ma(s.shape,i,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&cn(u.inShape,u.outShape))return lo({inputs:{x:s},backend:n});const d=new x1(u,"max",!1);return n.runWebGLProgram(d,[s],s.dtype)}const UUt={kernelName:Q$,backendName:"webgl",kernelFunc:WUt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GUt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],d=Xu(s.shape,i,o,u,a,c,l),h=new N6(d,"max",!1);return n.runWebGLProgram(h,[s],s.dtype)}const HUt={kernelName:Z$,backendName:"webgl",kernelFunc:GUt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qUt{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=i-1-e.padInfo.top,l=o-1-e.padInfo.left,c=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class KUt{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,d=l-1-e.padInfo.front,h=c-1-e.padInfo.top,p=u-1-e.padInfo.left,m=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${h}, ${p});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${m} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XUt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],h=Xu(o.shape,a,l,d,c,u),p=new N6(h,"max",!0),m=n.runWebGLProgram(p,[o],o.dtype),g=new KUt(h),y=n.runWebGLProgram(g,[s,m],o.dtype);return n.disposeIntermediateTensorInfo(m),y}const YUt={kernelName:pV,backendName:"webgl",kernelFunc:XUt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QUt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:o}=e,a=i;jS([i,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,h=Ma(a.shape,l,c,1,u,d),p=!0,m=new x1(h,"max",p),g=n.runWebGLProgram(m,[a],a.dtype),y=new qUt(h),v=n.runWebGLProgram(y,[s,g],a.dtype);return n.disposeIntermediateTensorInfo(g),v}const ZUt={kernelName:hV,backendName:"webgl",kernelFunc:QUt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JUt(t,e,n,r){let s=new x1(n,"max",!1);const i=r.runWebGLProgram(s,[t],"float32");s=new x1(n,"max",!0,!0,e);const o=r.runWebGLProgram(s,[t],"float32");return[i,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e8t={kernelName:vve,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:o,includeBatchInIndex:a}=e,l=n;L(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];L(Fs(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=Ma(r.shape,s,i,c,o),[d,h]=JUt(r,a,u,l);return[d,h]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t8t(t,e,n,r){const s=le(e),o=le(t.shape)/s,a=Pe({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),l=om(a,"float32","mean",r),c=Pe({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n8t={kernelName:J$,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:s,axis:i}=e,o=n,a=r.shape.length,l=Vt(i,r.shape);let c=l;const u=lr(c,a),d=u!=null,h=o.shouldExecuteOnCPU([r]),p=[];let m=r;if(d){if(h){const S=o.texData.get(m.dataId).values,w=new Array(a);for(let T=0;T<w.length;T++)w[T]=r.shape[u[T]];const C=w6(S,r.shape,r.dtype,u,w);m=o.makeTensorInfo(w,r.dtype);const _=o.texData.get(m.dataId);_.values=C}else m=YA(r,u,o);p.push(m),c=Er(c.length,a)}Ss("sum",c,a);const[g,y]=ds(m.shape,c);let v=g;s&&(v=Mr(g,l));const x=t8t(m,y,v,o);for(const b of p)o.disposeIntermediateTensorInfo(b);return x}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r8t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=Vt(i,s.shape);let c=l;const u=lr(c,a);let d=s;u!=null&&(d=di({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Er(c.length,s.shape.length)),Ss("min",c,a);const[h,p]=ds(d.shape,c),m=le(p),g=Pe({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),y=om(g,g.dtype,"min",n);let v;if(o){const x=Mr(h,l);v=Pe({inputs:{x:y},backend:n,attrs:{shape:x}})}else v=Pe({inputs:{x:y},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),u!=null&&n.disposeIntermediateTensorInfo(d),v}const s8t={kernelName:eA,backendName:"webgl",kernelFunc:r8t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i8t=S6+`
  return min(a, b);
`,o8t=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+im+`
  return result;
`,a8t=Cs({opSnippet:i8t,packedOpSnippet:o8t,cpuKernelImpl:HBt}),l8t={kernelName:Yw,backendName:"webgl",kernelFunc:a8t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c8t{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((u,d)=>u[0]+e[d]+u[1]);const s=e.length,i=Sn(s),o=n.map(u=>u[0]).join(","),a=n.map((u,d)=>u[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),c=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u8t{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((m,g)=>m[0]+e[g]+m[1]);const s=e.length,i=Sn(s),o=n.map(m=>m[0]).join(","),a=n.map((m,g)=>m[0]+e[g]).join(","),l=ni("rc",s),c=ni("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,d=s===1?"source":`vec2(${c.slice(-2).join()})`,h=r==="reflect"?0:1;let p="";if(s===1){const m=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${h};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${h};
        }
        source -= start;
      `;p=`
        ${i} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[s-1]} += 1;
        if(${u}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{const m=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${h}) +
                gte * ((end - 1) * 2 - source + ${h});
        source -= start;
      `;p=`
        ${i} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[s-1]} += 1;
        if(${u}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${m}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[s-1]} += 1;
          if(${u}) {
            ${m}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d8t=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:i}=n,o=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new u8t(r.shape,s,i):new c8t(r.shape,s,i);return e.runWebGLProgram(o,[r],r.dtype)},f8t={kernelName:tA,backendName:"webgl",kernelFunc:d8t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h8t=`if (b == 0.0) return NAN;
  return mod(a, b);`,p8t=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+im+`
  return result;
`,m8t=Cs({opSnippet:h8t,packedOpSnippet:p8t}),g8t={kernelName:Qw,backendName:"webgl",kernelFunc:m8t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y8t{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v8t=`
if (a == b) {
  return 1.0;
};
return a / b;`,x8t=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,BSe=Cs({opSnippet:v8t,packedOpSnippet:x8t,checkOutOfBounds:!0}),b8t={kernelName:Dw,backendName:"webgl",kernelFunc:BSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fY="return a - b;",zSe=Cs({opSnippet:fY,packedOpSnippet:fY,supportsComplex:!0,cpuKernelImpl:hzt}),w8t={kernelName:hS,backendName:"webgl",kernelFunc:zSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VSe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,o=Vt([i],s.shape),a=LSe({inputs:{x:s},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=Mr(a.shape,o),c=Pe({inputs:{x:a},backend:n,attrs:{shape:l}}),u=zSe({inputs:{a:s,b:c},backend:n}),d=jSe({inputs:{x:u},backend:n}),h=QA({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),p=Pe({inputs:{x:h},backend:n,attrs:{shape:l}}),m=BSe({inputs:{a:d,b:p},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),m}const S8t={kernelName:xA,backendName:"webgl",kernelFunc:VSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C8t(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:o,normalized:a}=r,l=a?s:VSe({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new y8t(c,u,i),h=[[o]],p=n.runWebGLProgram(d,[l],"int32",h);return a||n.disposeIntermediateTensorInfo(l),p}const N8t={kernelName:xve,backendName:"webgl",kernelFunc:C8t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _8t=La+`
  return -x;
`,T8t=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function k8t(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[o,a]=KBt(i.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}let s;return oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Pd(r.shape,T8t):s=new oc(r.shape,_8t),n.runWebGLProgram(s,[r],r.dtype)}const E8t={kernelName:nA,backendName:"webgl",kernelFunc:k8t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $8t=c5;function A8t(t){Co("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r,c=n.readSync(s.dataId),u=n.readSync(i.dataId),{selectedIndices:d}=$8t(c,u,o,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const I8t={kernelName:mV,backendName:"webgl",kernelFunc:A8t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O8t=u5;function P8t(t){Co("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(s.dataId),d=n.readSync(i.dataId),{selectedIndices:h,validOutputs:p}=O8t(u,d,o,a,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}const R8t={kernelName:gV,backendName:"webgl",kernelFunc:P8t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D8t=d5;function j8t(t){Co("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(s.dataId),d=n.readSync(i.dataId),h=o,p=a,m=l,g=c,{selectedIndices:y,selectedScores:v}=D8t(u,d,h,p,m,g);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const M8t={kernelName:yV,backendName:"webgl",kernelFunc:j8t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F8t{constructor(e,n,r,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L8t=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:o,onValue:a,offValue:l}=r,c=le(s.shape),u=new F8t(c,o,a,l),d=Pe({inputs:{x:s},backend:n,attrs:{shape:[c]}}),h=n.runWebGLProgram(u,[d],i);n.disposeIntermediateTensorInfo(d);const p=[...s.shape,o],m=Pe({inputs:{x:h},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(h),m},B8t={kernelName:iA,backendName:"webgl",kernelFunc:L8t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qT(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=FS({inputs:{input:r},backend:n}),i=qT({inputs:{x:s},backend:n}),o=ZA({inputs:{input:r},backend:n}),a=qT({inputs:{x:o},backend:n}),l=Uf({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return LS({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const z8t={kernelName:SA,backendName:"webgl",kernelFunc:qT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WSe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=FS({inputs:{input:r},backend:n}),i=WSe({inputs:{x:s},backend:n}),o=ZA({inputs:{input:r},backend:n}),a=qT({inputs:{x:o},backend:n}),l=Uf({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return LS({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const V8t={kernelName:sA,backendName:"webgl",kernelFunc:WSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W8t(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return _F({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,o=e[0].dtype;e.forEach(u=>{Fz(i,u.shape,"All tensors passed to stack must have matching shapes"),L(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=_F({inputs:{input:u},backend:n,attrs:{dim:s}});return a.push(d),d}),c=ESe({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const U8t={kernelName:oA,backendName:"webgl",kernelFunc:W8t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G8t{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);const s=e.length,i=Sn(s),o=n.map(c=>c[0]).join(","),a=n.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H8t{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((g,y)=>g[0]+e[y]+g[1]);const s=e.length,i=Sn(s),o=n.map(g=>g[0]).join(","),a=n.map((g,y)=>g[0]+e[y]).join(","),l=ni("rc",s),c=ni("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,d=s===1?"source":`vec2(${c.slice(-2).join()})`,h=[`${i} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${u}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${u}) {`],p=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let m="";for(let g=0,y=s===1?2:4;g<y;g++)m+=`
        ${h[g]}
        if (${p}) {
          result[${g}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${g}] = getChannel(getX(${c.join()}), ${d});
        }
      `;m+=s===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const USe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:o}=r;if(le(s.shape)===0){const c=i.map((u,d)=>u[0]+s.shape[d]+u[1]);return LS({backend:n,attrs:{shape:c,value:o,dtype:s.dtype}})}const a=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new H8t(s.shape,i,o):new G8t(s.shape,i,o),l=[[o]];return n.runWebGLProgram(a,[s],s.dtype,l)},q8t={kernelName:aA,backendName:"webgl",kernelFunc:USe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K8t=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,X8t=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+im+`
  return result;
`,Y8t=Cs({opSnippet:K8t,packedOpSnippet:X8t}),Q8t={kernelName:Jw,backendName:"webgl",kernelFunc:Y8t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z8t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=[],c=Vt(i,s.shape);let u=c;const d=lr(u,a);let h=s;d!=null&&(h=di({inputs:{x:s},backend:n,attrs:{perm:d}}),u=Er(u.length,a),l.push(h)),Ss("prod",u,a);let p;if(n.shouldExecuteOnCPU([h])){const m=n.texData.get(h.dataId).values,{outVals:g,outShape:y,outDtype:v}=YBt(h.shape,h.dtype,m,u);p=n.makeTensorInfo(y,v,g)}else{const[m,g]=ds(h.shape,u),y=le(g),v=Pe({inputs:{x:h},backend:n,attrs:{shape:[-1,y]}}),x=AV(s.dtype),b=om(v,x,"prod",n);p=Pe({inputs:{x:b},backend:n,attrs:{shape:m}}),l.push(v),l.push(b)}if(o){l.push(p);const m=Mr(p.shape,c);p=Pe({inputs:{x:p},backend:n,attrs:{shape:m}})}return l.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const J8t={kernelName:cA,backendName:"webgl",kernelFunc:Z8t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eGt(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:o}=e,{outputRaggedRank:a}=r,l=s.map(v=>n.readSync(v.dataId)),c=s.map(v=>v.shape),u=n.readSync(i.dataId),d=n.readSync(o.dataId),[h,p,m]=QBt(l,c,u,i.shape,i.dtype,d,o.shape,a),g=h.map(v=>n.makeTensorInfo([v.length],"int32",v)),y=n.makeTensorInfo(m,i.dtype,p);return g.concat([y])}const tGt={kernelName:bve,backendName:"webgl",kernelFunc:eGt};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nGt(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=ZBt(o,r.shape,r.dtype,a,s.shape,l,i.shape),d=n.makeTensorInfo([c.length],"int32",c),h=n.makeTensorInfo([u.length],r.dtype,u);return[d,h]}const rGt={kernelName:wve,backendName:"webgl",kernelFunc:nGt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sGt(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.readSync(s.dataId),u=n.readSync(i.dataId),d=n.readSync(o.dataId),h=a.map(y=>n.readSync(y.dataId)),p=a.map(y=>y.shape),[m,g]=JBt(c,s.shape,u,i.shape,i.dtype,d,o.shape,h,p,l);return n.makeTensorInfo(m,i.dtype,g)}const iGt={kernelName:Sve,backendName:"webgl",kernelFunc:sGt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GSe=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:i,dtype:o}=n,a=ezt(r,s,i,o);return e.makeTensorInfo([a.length],o,a)},oGt={kernelName:vV,backendName:"webgl",kernelFunc:GSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aGt="return 1.0 / x;",lGt=Jt({opSnippet:aGt}),cGt={kernelName:eS,backendName:"webgl",kernelFunc:lGt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uGt=La+`
  return (x < 0.0) ? 0.0 : x;
`,dGt=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,fGt=Jt({opSnippet:uGt,packedOpSnippet:dGt}),hGt={kernelName:tS,backendName:"webgl",kernelFunc:fGt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pGt=La+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,mGt=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,gGt=Jt({opSnippet:pGt,packedOpSnippet:mGt}),yGt={kernelName:nS,backendName:"webgl",kernelFunc:gGt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vGt{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r];let h;i?h="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xGt{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r];let h;i?h="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bGt(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,c]=a,u=oe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new xGt(s.shape,l,c,i,o):new vGt(s.shape,l,c,i,o);return n.runWebGLProgram(u,[s],"float32")}const wGt={kernelName:fA,backendName:"webgl",kernelFunc:bGt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SGt{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,l=[r&&o>1?s-1:s,r&&a>1?i-1:i],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],h=1/u,p=1/d,m=Math.ceil(h)*2+2,g=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${p});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CGt(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new SGt(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const NGt={kernelName:wV,backendName:"webgl",kernelFunc:CGt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Gt{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r],h=s?"0.5":"0.0";let p;i?p="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TGt{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r],h=s?"0.5":"0.0";let p;i?p="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kGt(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,c]=a,u=oe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new TGt(s.shape,l,c,i,o):new _Gt(s.shape,l,c,i,o);return n.runWebGLProgram(u,[s],s.dtype)}const EGt={kernelName:dA,backendName:"webgl",kernelFunc:kGt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Gt{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,l=[r&&o>1?s-1:s,r&&a>1?i-1:i],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],h=1/u,p=1/d,m=Math.ceil(h)*2+2,g=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${p});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AGt(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new $Gt(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const IGt={kernelName:bV,backendName:"webgl",kernelFunc:AGt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OGt{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,i=e.map((a,l)=>s(l)).join(","),o=Sn(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PGt{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=ni("rc",r),i=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,a=Sn(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${i}){
            result.g = ${c(s.slice())};
          }
          if(${o}) {
            result.b = ${u(s.slice())};
            if(${i}) {
              result.a = ${d(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(m){return h(m)}function c(m){return m[r-1]="("+m[r-1]+" + 1)",h(m)}function u(m){return m[r-2]="("+m[r-2]+" + 1)",h(m)}function d(m){return m[r-1]="("+m[r-1]+" + 1)",m[r-2]="("+m[r-2]+" + 1)",h(m)}function h(m){const g=e.map((x,b)=>p(b,m)),y=g.join(","),v=g.slice(-2).join(",");return`getChannel(getX(${y}), vec2(${v}))`}function p(m,g){return n.indexOf(m)!==-1&&e[m]!==1?`${e[m]} - ${g[m]} - 1`:`${g[m]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RGt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r,o=s.shape.length,a=Vt(i,s.shape);if(o===0)return lo({inputs:{x:s},backend:n});const l=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new PGt(s.shape,a):new OGt(s.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}const DGt={kernelName:hA,backendName:"webgl",kernelFunc:RGt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jGt{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MGt={kernelName:EV,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:o}=e,a=n,l=new jGt(r.shape,i),[c,u]=S5(o,r.shape[1],r.shape[2]),d=[[c,u,Math.sin(s),Math.cos(s)]];return a.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FGt=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,LGt=Jt({opSnippet:FGt}),BGt={kernelName:rS,backendName:"webgl",kernelFunc:LGt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zGt="return inversesqrt(x);",VGt=Jt({opSnippet:zGt,cpuKernelImpl:tzt}),WGt={kernelName:sS,backendName:"webgl",kernelFunc:VGt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _6{constructor(e,n,r,s,i,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const c=Sn(i.length),u=Sn(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const h=`getIndices(${d})`;let p="";s===1?p="i":s===2&&(p="i, coords[1]");const m=`getUpdates(${p})`;let g="";l&&(g="coords[0], coords[1]");const y=`getDefaultValue(${g})`,v=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${h});
              flattenedIndex += index * ${v};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${m};
              found = true;
            }
          }
          setOutput(mix(${y}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UGt{constructor(e,n,r,s,i,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const c=Sn(i.length),u=Sn(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const h=`getIndices(${d})`;let p="";s===1?p="i":s===2&&(p="i, coords[1]");const m=`getUpdates(${p})`;let g="";l&&(g="coords[0], coords[1]");const y=`getDefaultValue(${g})`,v=n>1?"strides[j]":"strides",x=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${h});
              flattenedIndex += index.xz * ${v};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${x};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${m};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${y}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GGt(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=em(i,s,o),h=[d/c,c];if(d===0)return n.makeTensorInfo(o,s.dtype);const p=Pe({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),m=Pe({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0]));let y;oe().getBool("WEBGL_PACK")?y=new UGt(l,a,p.shape.length,m.shape.length,u,h):y=new _6(l,a,p.shape.length,m.shape.length,u,h);const v=n.runWebGLProgram(y,[m,p,g],m.dtype),x=Pe({inputs:{x:v},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),x}const HGt={kernelName:Cve,backendName:"webgl",kernelFunc:GGt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qGt{constructor(e,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=oe().getNumber("WEBGL_VERSION")===2?i:o,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KGt(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:o}=r,a=new qGt(s.shape[0],s.shape[1],i.shape[1],o),l=[[s.shape[1]]];return n.runWebGLProgram(a,[s,i],"int32",l)}const XGt={kernelName:_ve,backendName:"webgl",kernelFunc:KGt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YGt{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",s="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<n.length;u++)c.push(`${a[u]}`),u<e&&l.push(`${a[u]}`);s=l.join(),i=c.join()}const o=Sn(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QGt(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e,o=new YGt(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(o,[r,s,i],oo(s.dtype,i.dtype))}const ZGt={kernelName:pA,backendName:"webgl",kernelFunc:QGt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JGt=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${RA};
  float scale = ${DA};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,eHt=Jt({opSnippet:JGt}),tHt={kernelName:iS,backendName:"webgl",kernelFunc:eHt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nHt=tx+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,rHt=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,sHt=Jt({opSnippet:nHt,packedOpSnippet:rHt,cpuKernelImpl:rzt}),iHt={kernelName:cS,backendName:"webgl",kernelFunc:sHt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oHt=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,aHt=Jt({opSnippet:oHt}),lHt={kernelName:lS,backendName:"webgl",kernelFunc:aHt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cHt=tx+`
  return sin(x);
`,uHt=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${im}
  return result;
`,dHt=Jt({opSnippet:cHt,packedOpSnippet:uHt}),fHt={kernelName:oS,backendName:"webgl",kernelFunc:dHt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hHt=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,pHt=Jt({opSnippet:hHt}),mHt={kernelName:aS,backendName:"webgl",kernelFunc:pHt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gHt=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,yHt=Jt({opSnippet:gHt}),vHt={kernelName:uS,backendName:"webgl",kernelFunc:yHt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xHt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:o}=r;L(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((v,x)=>v*x),l=[[0,0]];l.push(...o);for(let v=1+i.length;v<s.shape.length;++v)l.push([0,0]);const c=[],u=USe({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),d=CS(u.shape,i,a,!1),h=NS(d.length,i.length,!1),p=_S(u.shape,i,a,!1),m=Pe({inputs:{x:u},backend:n,attrs:{shape:d}}),g=di({inputs:{x:m},backend:n,attrs:{perm:h}}),y=Pe({inputs:{x:g},backend:n,attrs:{shape:p}});return c.push(u),c.push(m),c.push(g),c.forEach(v=>n.disposeIntermediateTensorInfo(v)),y},bHt={kernelName:yA,backendName:"webgl",kernelFunc:xHt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wHt(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.readSync(r.dataId),l=n.readSync(s.dataId),c=n.readSync(i.dataId),u=n.readSync(o.dataId)[0],[d,h,p,m,g]=izt(a,r.shape,r.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],s.dtype,p),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(y=>Number(y)))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}const SHt={kernelName:Tve,backendName:"webgl",kernelFunc:wHt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CHt(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.readSync(s.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[c,u,d]=ozt(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const NHt={kernelName:kve,backendName:"webgl",kernelFunc:CHt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ht(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=mSe(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const THt={kernelName:Eve,backendName:"webgl",kernelFunc:_Ht};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kHt(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=mSe(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const EHt={kernelName:$ve,backendName:"webgl",kernelFunc:kHt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ht(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=em(i,s,a),p=!1;if(i.dtype==="string"){const v=n.bufferSync(s),x=n.bufferSync(i),b=hf(n.readSync(o.dataId)[0]),S=nzt(v,x,a,h,u,c,l,d,b,p);return n.makeTensorInfo(a,S.dtype,S.values)}const m=new _6(c,l,s.shape.length,i.shape.length,d,[h,1],p),g=n.runWebGLProgram(m,[i,s,o],i.dtype),y=Pe({inputs:{x:g},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(g),y}const AHt={kernelName:Ave,backendName:"webgl",kernelFunc:$Ht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IHt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:o}=r,a=Vt(o,s.shape)[0],l=M5(s,i,a),c=s.shape.length,u=new Array(c).fill(0),d=s.shape.slice();return l.map(h=>{const p=[...d];p[a]=h;const m=nx({inputs:{x:s},backend:n,attrs:{begin:u,size:p}});return u[a]+=h,m})}const OHt={kernelName:vA,backendName:"webgl",kernelFunc:IHt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hY="return sqrt(x);",PHt=Jt({opSnippet:hY,packedOpSnippet:hY,cpuKernelImpl:azt}),RHt={kernelName:dS,backendName:"webgl",kernelFunc:PHt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DHt="return x * x;",jHt=Jt({opSnippet:DHt}),MHt={kernelName:SV,backendName:"webgl",kernelFunc:jHt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pY="return (a - b) * (a - b);",FHt=Cs({opSnippet:pY,packedOpSnippet:pY}),LHt={kernelName:fS,backendName:"webgl",kernelFunc:FHt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BHt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const i=n.readSync(s.dataId),o=Bu(i),a=lzt(o,"string",r);return n.makeTensorInfo(s.shape,"string",a)}const zHt={kernelName:CV,backendName:"webgl",kernelFunc:BHt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VHt({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=La+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new oc(r.shape,s);return n.runWebGLProgram(i,[r],r.dtype)}const WHt={kernelName:yS,backendName:"webgl",kernelFunc:VHt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UHt{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,i=Sn(r.length),o=Sn(r.length);let a="";if(s===1)a="coords * strides + begin";else{let l=0;a=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GHt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=r,{finalShapeSparse:p,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:v,begin:x,end:b,strides:S}=x5(s.shape,i,o,a,l,c,u,d,h);let w;if(g)w=Pe({inputs:{x:s},backend:n,attrs:{shape:m}});else if(y||v){L(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const _=g5(x,b,S),T=nx({inputs:{x:s},backend:n,attrs:{begin:x,size:_}});w=Pe({inputs:{x:T},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(T)}else if(n.shouldExecuteOnCPU([s])){const T=n.readSync(s.dataId),k=zt(s.shape,s.dtype,T),$=czt(p,k,S,x);w=n.makeTensorInfo(m,s.dtype,$.values)}else{const T=new UHt(x,S,p);w=n.runWebGLProgram(T,[s],s.dtype)}const C=Pe({inputs:{x:w},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(w),C}const HHt={kernelName:NV,backendName:"webgl",kernelFunc:GHt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qHt(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,h=n.readSync(u.dataId),p=n.readSync(d.dataId),[m,g]=uzt(h,p,s,i,o,a,l,c);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",g)]}const KHt={kernelName:Ive,backendName:"webgl",kernelFunc:qHt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XHt(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],[c,u,d]=dzt(a,l,s),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const YHt={kernelName:Ove,backendName:"webgl",kernelFunc:XHt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QHt(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(i.dataId),a=fzt(o,s);return n.makeTensorInfo(i.shape,"int32",a)}const ZHt={kernelName:Pve,backendName:"webgl",kernelFunc:QHt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JHt="return tan(x);",e9t=Jt({opSnippet:JHt}),t9t={kernelName:pS,backendName:"webgl",kernelFunc:e9t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n9t=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,r9t=Jt({opSnippet:n9t}),s9t={kernelName:mS,backendName:"webgl",kernelFunc:r9t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i9t(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:s,indices:i,updates:o}=e,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=em(o,i,s.shape),h=[d/c,c];if(d===0)return n.makeTensorInfo(s.shape,i.dtype);const p=Pe({inputs:{x:i},backend:n,attrs:{shape:[l,a]}}),m=Pe({inputs:{x:o},backend:n,attrs:{shape:[l,c]}}),g=Pe({inputs:{x:s},backend:n,attrs:{shape:h}}),y=new _6(l,a,p.shape.length,m.shape.length,u,h,!1,!0),v=n.runWebGLProgram(y,[m,p,g],g.dtype),x=Pe({inputs:{x:v},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),x}const o9t={kernelName:Nve,backendName:"webgl",kernelFunc:i9t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a9t{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const s=Sn(this.rank),i=l9t(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function l9t(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;if(s.dtype==="string"||s.shape.length>5){const l=n.readSync(s.dataId),c=s.dtype==="string"?l.map(h=>hf(h)):l,u=zt(s.shape,s.dtype,c),d=pzt(u,i);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const o=new a9t(s.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}const c9t={kernelName:gS,backendName:"webgl",kernelFunc:HSe};class u9t{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class d9t{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nh(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function mY(t){let e=1;for(;e<t;)e*=2;return e}function f9t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:o}=r,a=oe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=oe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=s.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([s])||u<a||i>l){const $=n.readSync(s.dataId),[O,P]=mzt($,c,s.dtype,i,o);return[n.makeTensorInfo(O.shape,O.dtype,O.values),n.makeTensorInfo(P.shape,P.dtype,P.values)]}if(i===0)return c[c.length-1]=0,[n.makeTensorInfo(c,s.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[s,LS({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(s.dataId),h=d!==null&&d.isPacked,p=h?n.unpackTensor(s):s,g=le(c)/u,y=Pe({inputs:{x:p},attrs:{shape:[g,u]},backend:n});h&&nh(n,p);const v=mY(i),x=mY(u);let b=null;const S=()=>b===null?[y,y]:[y,b],w=($,O,P)=>{const D=S(),A=new u9t(P),R=[[u],[b===null?1:0],[Number.NEGATIVE_INFINITY],[$],[O]],M=b;b=n.runWebGLProgram(A,D,"int32",R),nh(n,M)};for(let $=1;$<v;$*=2){const O=$*2;for(let P=$;P>=1;P/=2)w(O,P,[g,x])}for(let $=x;$>v;$/=2){const O=S(),P=new d9t([g,$/2]),A=[[u],[b===null?1:0],[v]],I=b;b=n.runWebGLProgram(P,O,"int32",A),nh(n,I);const R=v/2,M=R*2;for(let E=R;E>=1;E/=2)w(M,E,b.shape)}let C=b;b=nx({inputs:{x:b},backend:n,attrs:{begin:0,size:[g,i]}}),nh(n,C);let _=FSe({inputs:{x:y,indices:b},backend:n,attrs:{axis:1,batchDims:1}});nh(n,y);const T=c.slice(0,-1);T.push(i),C=b,b=Pe({inputs:{x:b},attrs:{shape:T},backend:n}),nh(n,C);const k=_;return _=Pe({inputs:{x:_},attrs:{shape:T},backend:n}),nh(n,k),[_,b]}const h9t={kernelName:_V,backendName:"webgl",kernelFunc:f9t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p9t{constructor(e,n,r,s,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=r==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m9t(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:i}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=r,[u,d,h,p]=s.shape,[m,g]=c??[d,h],y=[u,m,g,p],v=new p9t(d,h,o,a,l,y);return n.runWebGLProgram(v,[s,i],"float32")}const g9t={kernelName:TV,backendName:"webgl",kernelFunc:m9t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y9t(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;jS(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(i.dataId),{outputValues:a,outputShape:l,indices:c}=gzt(o,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const v9t={kernelName:kV,backendName:"webgl",kernelFunc:y9t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x9t(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const o=s,a=o.shape.length,l=s.shape[i],c=new Array(a-1);let u=0;for(let g=0;g<a;g++)g!==i&&(c[u++]=o.shape[g]);const d=[],h=new Array(a).fill(0),p=o.shape.slice();p[i]=1;const m=new Array(l);for(let g=0;g<m.length;g++){h[i]=g;const y=nx({inputs:{x:o},backend:n,attrs:{begin:h,size:p}}),v=Pe({inputs:{x:y},backend:n,attrs:{shape:c}});m[g]=v,d.push(y)}return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const b9t={kernelName:bA,backendName:"webgl",kernelFunc:x9t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w9t{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,i=e.inSize,o=e.numSegments,a=o*Math.ceil(i/r);this.outputShape=[s,a];const l="0.0",c="sumValue",u=Math.floor(r/4)*4,d=r%4,h=`
        sumValue += dot(values, segFilter);
    `;let p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let m="";i%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${m}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${h}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${h}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${h}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${h}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S9t(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:o}=r,a=s.shape.length,l=[];let c=0;const u=lr([c],a);let d=s;u!=null&&(d=di({inputs:{x:s},backend:n,attrs:{perm:u}}),l.push(d),c=Er(1,a)[0]);const h=k0e(d.shape,c,o),p=le([d.shape[c]]),m=Pe({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});l.push(m);const g=AV(s.dtype),y=(S,w,C,_,T)=>{const k=S.shape[0],$=S.shape[1],O=T0e($,T),P={windowSize:O,inSize:$,batchSize:k,numSegments:T},D=new w9t(P,w),A=n.compileAndRun(D,[S,C],_);if(l.push(A),A.shape[1]===T)return A;const I=GSe({backend:n,attrs:{start:0,stop:T,step:1,dtype:"float32"}}),R=HSe({inputs:{x:I},backend:n,attrs:{reps:[$/O]}});return l.push(I),l.push(R),y(A,w,R,_,T)},v=y(m,"unsortedSegmentSum",i,g,o),x=Pe({inputs:{x:v},backend:n,attrs:{shape:h}});let b=x;if(u!=null){l.push(x);const S=Ff(u);b=di({inputs:{x:b},backend:n,attrs:{perm:S}})}return l.forEach(S=>n.disposeIntermediateTensorInfo(S)),b}const C9t={kernelName:wA,backendName:"webgl",kernelFunc:S9t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N9t=[aVt,cVt,fVt,mVt,yVt,bVt,SVt,NVt,EVt,AVt,PVt,jVt,LVt,WVt,HVt,KVt,YVt,e5t,n5t,s5t,l5t,m5t,y5t,w5t,C5t,$5t,I5t,D5t,Uzt,F5t,W5t,q5t,J5t,n6t,s6t,o6t,l6t,f6t,m6t,v6t,b6t,S6t,N6t,k6t,$6t,P6t,D6t,F6t,z6t,W6t,q6t,Q6t,tWt,sWt,aWt,lWt,uWt,fWt,pWt,gWt,vWt,SWt,_Wt,EWt,AWt,PWt,jWt,BWt,UWt,Wzt,HWt,z5t,XWt,ZWt,tUt,Hzt,iUt,cUt,dUt,mUt,vUt,SUt,_Ut,$Ut,PUt,jUt,FUt,VUt,UUt,HUt,YUt,ZUt,e8t,n8t,s8t,l8t,f8t,g8t,N8t,Xzt,E8t,I8t,R8t,M8t,_5t,B8t,V8t,U8t,q8t,Q8t,Kzt,J8t,tGt,rGt,iGt,oGt,T5t,b8t,cGt,hGt,yGt,Qzt,wGt,NGt,EGt,IGt,DGt,MGt,BGt,WGt,HGt,XGt,ZGt,tHt,iHt,lHt,fHt,mHt,h5t,S8t,vHt,bHt,SHt,NHt,THt,EHt,AHt,OHt,RHt,MHt,LHt,zHt,WHt,HHt,KHt,YHt,ZHt,w8t,sVt,t9t,s9t,o9t,c9t,h9t,g9t,iVt,v9t,b9t,C9t,z8t];for(const t of N9t)Dve(t);function _9t(){var p,m;const[t,e]=N.useState(null),[n,r]=N.useState(!0);N.useState("overview");const[s,i]=N.useState("week"),[o,a]=N.useState(null);N.useEffect(()=>{l()},[s]);async function l(){r(!0);try{const g=await fetch(`/api/sales-analytics?period=${s}`);if(!g.ok)throw new Error("فشل في جلب البيانات");const y=await g.json();e(y),y.dailyAverageSales&&await c(y)}catch(g){console.error("خطأ في جلب تحليلات المبيعات:",g)}finally{r(!1)}}async function c(g){try{const y=pbe();y.add(FT({units:10,inputShape:[1],activation:"relu"})),y.add(FT({units:1})),y.compile({optimizer:"adam",loss:"meanSquaredError"});const v=g.dailyAverageSales,x=1.05,b=7,S=[];for(let w=1;w<=b;w++){const C=v*Math.pow(x,w);S.push({day:`اليوم ${w}`,sales:Number(C.toFixed(0))})}a(S)}catch(y){console.error("خطأ في التنبؤ بالمبيعات:",y)}}const d=(()=>{const g=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],y=g.map((x,b)=>{const S=1e4+b*1e3,w=Math.random()*2e3-1e3;return{name:x,قيمة:Math.max(S+w,5e3)}}),v=g.slice(0,6).map((x,b)=>{const S=y[y.length-1].قيمة,w=1+(Math.random()*.08+.02);return{name:x,متوقع:S*Math.pow(w,b+1)}});return{monthlySalesData:y,forecastData:v}})(),h=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];return n?f.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh]",children:[f.jsx(Zs,{className:"h-8 w-8 animate-spin text-primary mb-4"}),f.jsx("p",{className:"text-lg",children:"جاري تحليل البيانات باستخدام الذكاء الاصطناعي..."})]}):f.jsxs("div",{className:"container mx-auto p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-8",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:"تحليلات المبيعات الذكية"}),f.jsx("p",{className:"text-muted-foreground",children:"نظرة تحليلية مدعومة بالذكاء الاصطناعي على أداء المبيعات"})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx($e,{variant:s==="week"?"default":"outline",onClick:()=>i("week"),children:"أسبوع"}),f.jsx($e,{variant:s==="month"?"default":"outline",onClick:()=>i("month"),children:"شهر"}),f.jsx($e,{variant:s==="year"?"default":"outline",onClick:()=>i("year"),children:"سنة"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[f.jsxs(Le,{children:[f.jsxs(Ye,{className:"pb-2",children:[f.jsx(Qe,{className:"text-lg",children:"متوسط المبيعات اليومي"}),f.jsx(Kt,{children:"متوسط المبيعات لكل يوم"})]}),f.jsxs(Ue,{children:[f.jsxs("div",{className:"text-3xl font-bold",children:[((p=t==null?void 0:t.dailyAverageSales)==null?void 0:p.toLocaleString())||"0"," د.ع"]}),f.jsxs("div",{className:"flex items-center mt-2 text-sm",children:[f.jsx(xN,{className:"text-green-500 h-4 w-4 mr-1"}),f.jsx("span",{className:"text-green-500",children:"+15% "}),f.jsx("span",{className:"text-muted-foreground mr-1",children:"من الأسبوع الماضي"})]})]})]}),f.jsxs(Le,{children:[f.jsxs(Ye,{className:"pb-2",children:[f.jsx(Qe,{className:"text-lg",children:"توقعات الأسبوع القادم"}),f.jsx(Kt,{children:"توقعات المبيعات بناءً على الذكاء الاصطناعي"})]}),f.jsxs(Ue,{children:[f.jsxs("div",{className:"text-3xl font-bold",children:[((m=t==null?void 0:t.forecastNextWeek)==null?void 0:m.toLocaleString())||"0"," د.ع"]}),f.jsxs("div",{className:"flex items-center mt-2 text-sm",children:[f.jsx(xN,{className:"text-green-500 h-4 w-4 mr-1"}),f.jsx("span",{className:"text-green-500",children:"+8% "}),f.jsx("span",{className:"text-muted-foreground mr-1",children:"توقع النمو"})]})]})]}),f.jsxs(Le,{children:[f.jsxs(Ye,{className:"pb-2",children:[f.jsx(Qe,{className:"text-lg",children:"المنتجات الأكثر مبيعًا"}),f.jsx(Kt,{children:"أفضل المنتجات من حيث الكمية المباعة"})]}),f.jsx(Ue,{children:f.jsx("div",{className:"space-y-2",children:((t==null?void 0:t.topSellingProducts)||[]).slice(0,3).map((g,y)=>{var v,x;return f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{children:g.name||`منتج ${g.productId}`}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("div",{className:"h-2 bg-primary rounded",style:{width:`${g.count/(((x=(v=t==null?void 0:t.topSellingProducts)==null?void 0:v[0])==null?void 0:x.count)||1)*100}px`}}),f.jsxs("span",{children:[g.count," قطعة"]})]})]},g.productId)})})})]})]}),f.jsxs(Dc,{defaultValue:"sales",className:"w-full",children:[f.jsxs(Al,{className:"mb-4",children:[f.jsx(Ln,{value:"sales",children:"تحليل المبيعات"}),f.jsx(Ln,{value:"forecast",children:"التنبؤ المستقبلي"}),f.jsx(Ln,{value:"products",children:"تحليل المنتجات"})]}),f.jsxs(Cr,{value:"sales",className:"p-4 border rounded-md shadow-sm bg-card",children:[f.jsx("h2",{className:"text-xl font-bold mb-4",children:"اتجاه المبيعات"}),f.jsx("div",{className:"h-80 w-full",children:f.jsx(ro,{width:"100%",height:"100%",children:f.jsxs($E,{data:d.monthlySalesData,children:[f.jsx(si,{strokeDasharray:"3 3"}),f.jsx(_r,{dataKey:"name"}),f.jsx(ar,{}),f.jsx(Tn,{}),f.jsx(ii,{type:"monotone",dataKey:"قيمة",stroke:"#8884d8",activeDot:{r:8}})]})})})]}),f.jsxs(Cr,{value:"forecast",className:"p-4 border rounded-md shadow-sm bg-card",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h2",{className:"text-xl font-bold",children:"توقعات المبيعات للأسبوع القادم"}),f.jsxs("div",{className:"flex items-center text-amber-500",children:[f.jsx(pk,{className:"h-4 w-4 mr-1"}),f.jsx("span",{className:"text-sm",children:"توقعات بناءً على تحليل البيانات التاريخية"})]})]}),f.jsx("div",{className:"h-80 w-full",children:f.jsx(ro,{width:"100%",height:"100%",children:f.jsxs(Q1,{data:o,children:[f.jsx(si,{strokeDasharray:"3 3"}),f.jsx(_r,{dataKey:"day"}),f.jsx(ar,{}),f.jsx(Tn,{}),f.jsx(ls,{dataKey:"sales",fill:"#8884d8"})]})})})]}),f.jsxs(Cr,{value:"products",className:"p-4 border rounded-md shadow-sm bg-card",children:[f.jsx("h2",{className:"text-xl font-bold mb-4",children:"توزيع المبيعات حسب المنتج"}),f.jsxs("div",{className:"flex flex-col md:flex-row justify-between",children:[f.jsx("div",{className:"h-80 w-full md:w-1/2",children:f.jsx(ro,{width:"100%",height:"100%",children:f.jsxs(Dde,{children:[f.jsx(Lc,{data:(t==null?void 0:t.topSellingProducts)||[],cx:"50%",cy:"50%",labelLine:!1,label:({name:g,percent:y})=>`${g||"منتج"} (${(y*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"count",children:((t==null?void 0:t.topSellingProducts)||[]).map((g,y)=>f.jsx(xv,{fill:h[y%h.length]},`cell-${y}`))}),f.jsx(Tn,{})]})})}),f.jsxs("div",{className:"md:w-1/2 mt-4 md:mt-0 md:pr-6",children:[f.jsx("h3",{className:"text-lg font-medium mb-4",children:"منتجات مرتبطة"}),f.jsx("div",{className:"space-y-4",children:((t==null?void 0:t.topSellingProducts)||[]).slice(0,3).map(g=>{var y;return f.jsxs(Le,{children:[f.jsx(Ye,{className:"py-2",children:f.jsx(Qe,{className:"text-base",children:g.name||`منتج ${g.productId}`})}),f.jsxs(Ue,{className:"py-2",children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"العملاء الذين اشتروا هذا المنتج اشتروا أيضًا:"}),f.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:(((y=t==null?void 0:t.relatedProducts)==null?void 0:y[g.productId])||[]).map((v,x)=>f.jsx("div",{className:"px-3 py-1 rounded-full text-sm bg-secondary text-secondary-foreground",children:v.name||`منتج ${v.productId}`},x))})]})]},g.productId)})})]})]})]})]})]})}function T9t(){const[t,e]=N.useState(null),[n,r]=N.useState(null),[s,i]=N.useState(!1);return f.jsx("div",{className:"flex flex-col min-h-screen",children:f.jsx("main",{className:"flex-1 p-8 overflow-auto",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"توصيات المنتجات"}),f.jsxs(Le,{className:"mb-8",children:[f.jsx(Ye,{children:f.jsx(Qe,{children:"اختيار المنتج أو العميل"})}),f.jsxs(Ue,{children:[f.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[f.jsxs("div",{className:"w-full md:w-1/2 space-y-2",children:[f.jsx("label",{className:"text-sm font-medium",children:"اختر منتجًا:"}),f.jsxs(sr,{value:t||"",onValueChange:o=>{e(o),r(null)},children:[f.jsx(Yn,{children:f.jsx(ir,{placeholder:"اختر منتجًا"})}),f.jsxs(Qn,{children:[f.jsx(Je,{value:"1",children:"منتج 1"}),f.jsx(Je,{value:"2",children:"منتج 2"}),f.jsx(Je,{value:"3",children:"منتج 3"})]})]})]}),f.jsx("div",{className:"text-center md:pt-8",children:f.jsx("span",{className:"px-4",children:"أو"})}),f.jsxs("div",{className:"w-full md:w-1/2 space-y-2",children:[f.jsx("label",{className:"text-sm font-medium",children:"اختر عميلًا:"}),f.jsxs(sr,{value:n||"",onValueChange:o=>{r(o),e(null)},children:[f.jsx(Yn,{children:f.jsx(ir,{placeholder:"اختر عميلًا"})}),f.jsxs(Qn,{children:[f.jsx(Je,{value:"1",children:"عميل 1"}),f.jsx(Je,{value:"2",children:"عميل 2"}),f.jsx(Je,{value:"3",children:"عميل 3"})]})]})]})]}),f.jsx("div",{className:"mt-8 text-center",children:f.jsx($e,{variant:"default",onClick:()=>i(!0),disabled:s||!t&&!n,children:s?"جاري التحليل...":"تحليل البيانات وعرض التوصيات"})}),s&&f.jsx("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:"جاري تحليل البيانات وإنشاء التوصيات المخصصة..."})]})]}),f.jsx(k9t,{customerId:n||void 0,currentProductId:t||void 0})]})})})}function k9t({customerId:t,currentProductId:e}){return!t&&!e?null:f.jsxs("div",{className:"space-y-6",children:[f.jsx("h2",{className:"text-2xl font-semibold",children:t?"منتجات موصى بها لهذا العميل":"منتجات مشابهة قد تهمك"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((n,r)=>f.jsxs(Le,{children:[f.jsx(Ye,{className:"pb-2",children:f.jsxs(Qe,{className:"text-lg",children:["منتج موصى به #",r+1]})}),f.jsxs(Ue,{children:[f.jsx("div",{className:"h-32 bg-muted rounded-md mb-3 flex items-center justify-center text-muted-foreground",children:"صورة المنتج"}),f.jsx("p",{className:"font-medium",children:"اسم المنتج"}),f.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"وصف قصير للمنتج"}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"font-bold",children:"199 ر.س"}),f.jsx($e,{variant:"outline",size:"sm",children:"إضافة للسلة"})]})]})]},r))})]})}function E9t(){const[t,e]=N.useState(!0);N.useState(null);const[n,r]=N.useState([]),[s,i]=N.useState([]),[o,a]=N.useState(null);return N.useEffect(()=>{async function l(){try{e(!0);const u=await(await fetch("/api/inventory/transactions")).json();if(!u||u.length===0){a("لا توجد بيانات كافية للتنبؤ بالمخزون"),e(!1);return}i(u);const d={};u.forEach(p=>{d[p.productId]||(d[p.productId]=[]);const m=p.type==="in"?p.quantity:-p.quantity;d[p.productId].push(m)});const h=[];for(const[p,m]of Object.entries(d)){if(m.length<10)continue;const g=bg(m.slice(0,-5).map((C,_)=>[_])),y=bg(m.slice(0,-5).map(C=>[C])),v=pbe();v.add(FT({units:10,inputShape:[1],activation:"relu"})),v.add(FT({units:1})),v.compile({optimizer:"adam",loss:"meanSquaredError"}),await v.fit(g,y,{epochs:100,verbose:0});const x=m.length-1,b=[];for(let C=1;C<=7;C++){const _=bg([[x+C]]),T=v.predict(_),k=await T.data();b.push({day:C,value:Math.round(k[0]),productId:parseInt(p)}),T.dispose(),_.dispose()}const S=await fetch(`/api/products/${p}`);let w=`المنتج ${p}`;try{const C=await S.json();C&&C.name&&(w=C.name)}catch(C){console.error("تعذر الحصول على معلومات المنتج:",C)}h.push({productId:parseInt(p),productName:w,predictions:b,averageDemand:Math.round(b.reduce((C,_)=>C+_.value,0)/b.length)}),g.dispose(),y.dispose(),v.dispose()}r(h),e(!1)}catch(c){console.error("حدث خطأ أثناء تدريب النموذج:",c),a("تعذر إنشاء التنبؤات. يرجى المحاولة مرة أخرى لاحقًا."),e(!1)}}l()},[]),t?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Zs,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),f.jsx("p",{className:"text-muted-foreground",children:"جاري تحليل بيانات المخزون وإنشاء التنبؤات..."})]})}):o?f.jsxs(MN,{variant:"destructive",className:"mb-6",children:[f.jsx(_oe,{children:"تعذر إنشاء التنبؤات"}),f.jsx(FN,{children:o})]}):f.jsxs("div",{className:"space-y-6",children:[f.jsxs(Le,{children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"تنبؤات المخزون بالذكاء الاصطناعي"}),f.jsx(Kt,{children:"توقعات الطلب للأسبوع القادم مبنية على نمط المبيعات السابقة"})]}),f.jsx(Ue,{children:n.length===0?f.jsx("p",{className:"text-center text-muted-foreground py-6",children:"لا توجد بيانات كافية للتنبؤ"}):f.jsx("div",{className:"space-y-8",children:n.map(l=>f.jsxs("div",{className:"border rounded-lg p-4",children:[f.jsx("h3",{className:"text-lg font-medium mb-2",children:l.productName}),f.jsxs("p",{className:"text-muted-foreground mb-4",children:["متوسط الطلب المتوقع: ",f.jsx("span",{className:"font-semibold",children:l.averageDemand})," وحدة يوميًا"]}),f.jsx("div",{className:"h-[200px]",children:f.jsx(ro,{width:"100%",height:"100%",children:f.jsxs(N4,{data:l.predictions,children:[f.jsx(si,{strokeDasharray:"3 3"}),f.jsx(_r,{dataKey:"day",label:{value:"الأيام القادمة",position:"insideBottom",offset:-5}}),f.jsx(ar,{label:{value:"الطلب المتوقع",angle:-90,position:"insideLeft"}}),f.jsx(Tn,{formatter:c=>[`${c} وحدة`,"الطلب المتوقع"],labelFormatter:c=>`اليوم ${c}`}),f.jsx(oi,{type:"monotone",dataKey:"value",name:"الطلب",stroke:"#8884d8",fill:"#8884d8"})]})})}),f.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:f.jsxs("p",{children:["توصية: ",l.averageDemand>10?"ينصح بزيادة المخزون":"المخزون الحالي قد يكون كافيًا"]})})]},l.productId))})})]}),f.jsxs(Le,{children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"حركات المخزون الأخيرة"}),f.jsx(Kt,{children:"آخر 10 حركات للمخزون"})]}),f.jsx(Ue,{children:f.jsx("div",{className:"h-[300px]",children:f.jsx(ro,{width:"100%",height:"100%",children:f.jsxs(Q1,{data:s.slice(-10),children:[f.jsx(si,{strokeDasharray:"3 3"}),f.jsx(_r,{dataKey:"productId",label:{value:"رقم المنتج",position:"insideBottom",offset:-5}}),f.jsx(ar,{label:{value:"الكمية",angle:-90,position:"insideLeft"}}),f.jsx(Tn,{}),f.jsx(os,{}),f.jsx(ls,{dataKey:"quantity",name:"الكمية",fill:"#8884d8"})]})})})})]})]})}function $9t(){return f.jsxs("div",{className:"flex h-screen overflow-hidden",children:[f.jsx(yT,{}),f.jsx("div",{className:"flex-1 overflow-auto",children:f.jsxs("div",{className:"p-6",children:[f.jsx("h1",{className:"text-2xl font-bold mb-6",children:"تحليلات الذكاء الاصطناعي"}),f.jsxs(Le,{className:"mb-6",children:[f.jsxs(Ye,{children:[f.jsx(Qe,{children:"نظرة عامة"}),f.jsx(Kt,{children:"استخدم الذكاء الاصطناعي لتحسين قرارات عملك"})]}),f.jsx(Ue,{children:f.jsx("p",{className:"text-muted-foreground",children:"تستخدم هذه الأدوات خوارزميات الذكاء الاصطناعي لتحليل بيانات عملك وتقديم توصيات ذكية لتحسين المبيعات وإدارة المخزون والإنفاق. التنبؤات تعتمد على أنماط البيانات التاريخية وتتحسن مع مرور الوقت كلما زادت البيانات المتوفرة."})})]}),f.jsxs(Dc,{defaultValue:"inventory",className:"w-full",children:[f.jsxs(Al,{className:"grid w-full grid-cols-2 mb-6",children:[f.jsx(Ln,{value:"inventory",children:"تنبؤات المخزون"}),f.jsx(Ln,{value:"sales",children:"توصيات المبيعات"})]}),f.jsx(Cr,{value:"inventory",className:"space-y-6",children:f.jsx(E9t,{})}),f.jsx(Cr,{value:"sales",className:"space-y-6",children:f.jsx(SalesRecommendations,{})})]})]})})]})}Sne(document.getElementById("root")).render(f.jsxs(f2t,{children:[" ",f.jsxs(WCt,{children:[f.jsx(Ll,{path:"/",element:f.jsx(WSt,{})})," ",f.jsx(Ll,{path:"/inventory",element:f.jsx(Mfe,{})}),f.jsx(Ll,{path:"/reports",element:f.jsx(Kge,{})}),f.jsx(Ll,{path:"/settings",element:f.jsx(mge,{})}),f.jsx(Ll,{path:"/pos",element:f.jsx(C2t,{})}),f.jsx(Ll,{path:"/sales-history",element:f.jsx(N2t,{})}),f.jsx(Ll,{path:"/sales-analytics",element:f.jsx(_9t,{})})," ",f.jsx(Ll,{path:"/product-recommendation",element:f.jsx(T9t,{})})," ",f.jsx(Ll,{path:"/ai-analytics",element:f.jsx($9t,{})})," "]})]}));
